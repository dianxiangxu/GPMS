/*!CK:3566214013!*//*1436993576,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Iup22"]); }

__d("XdArbiterBuffer",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();if(!a.XdArbiter)a.XdArbiter={_m:[],_p:[],register:function(g,h,i){h=h||((/^apps\./).test(location.hostname)?'canvas':'tab');this._p.push([g,h,i]);return h;},handleMessage:function(g,h){this._m.push([g,h]);}};},null);
__d("CanvasIFrameLoader",["$","XdArbiterBuffer"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();b('XdArbiterBuffer');var h={loadFromForm:function(i){i.submit();}};e.exports=h;},null);
__d("PlatformDialogClient",["Arbiter","AsyncDialog","AsyncRequest","DOMEventListener","guid","PlatformBaseVersioning","PlatformDialog","PopupWindow","QueryString","URI","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=575,s='FB_DIALOG_RESPONSE';h.getLoadingDialog().setWidth(r);j.add(window,'message',function(event){if((/\.facebook\.com$/).test(event.origin)&&new RegExp('^'+s+':').test(event.data))g.inform(m.RESPONSE,JSON.parse(event.data.substr(s.length+1)));});var t={};g.subscribe(m.RESPONSE,function(event,w){var x=w.state;if(t[x]){t[x].callback(w);w.state=t[x].state;delete t[x];}},g.SUBSCRIBE_NEW);function u(w){return function(){g.inform(m.RESPONSE,Object.assign({state:w},v.REQUEST_ABORTED_ERROR));};}var v={REQUEST_ABORTED_ERROR:{error_code:-200,error_message:'Request aborted.'},async:function(w,x,y){var z=k(),aa=x.state;x.state=z;x.redirect_uri=new p('/dialog/return/arbiter').setSubdomain('www').setFragment(o.encode({origin:x.redirect_uri})).getQualifiedURI().toString();x.display='async';t[z]={callback:y||function(){},state:aa};h.send(new i(this.getURI(w,x)).setMethod('GET').setReadOnly(true).setAbortHandler(u(z)));},popup:function(w,x,y,z,aa){var ba=k(),ca=y.state;y.state=ba;y.client_id=y.app_id=x;y.redirect_uri=new p('/dialog/return/arbiter').setSecure(p.getRequestURI().isSecure()).setSubdomain('www').setFragment(o.encode({origin:y.redirect_uri})).addQueryData(z||{}).addQueryData({relation:'opener',close:true}).toString();y.display=q.mobile()?'touch':'popup';t[ba]={callback:aa||function(){},state:ca};var da=p.getRequestURI(),ea=da.getDomain(),fa=ea.replace('developers','www');n.open(new p(this.getURI(w,y)).setDomain(fa).setProtocol('https').toString(),210,r);},getURI:function(w,x){if(x.version){var y=new p('/'+x.version+'/dialog/'+w);delete x.version;return y.addQueryData(x);}return l.versionAwareURI(new p('/dialog/'+w).addQueryData(x));}};e.exports=v;},null);
__d("GamesAnonymousStatus",["Arbiter","AsyncRequest","ChannelConstants","CSS","Event"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={appID:null,showingStatusDiv:null,hiddenStatusDiv:null,init:function(m){this.appID=m;g.subscribe(i.getArbiterType('anonymous_login_status'),function(n,o){return this.statusUpdated(o.obj);}.bind(this));},initShowingDiv:function(m,n){this.showingStatusDiv=m;this.init(n);},initHiddenDiv:function(m,n){j.hide(m);this.hiddenStatusDiv=m;this.init(n);},statusUpdated:function(m){if(!this.showingStatusDiv)return;if(m.app_id!=this.appID)return;if(m.is_currently_anonymous){j.show(this.showingStatusDiv);}else j.hide(this.showingStatusDiv);},collapseFullStatus:function(m){k.listen(m,'click',function(){this.switchStatusDiv();new h().setURI('/games/async/collapse_anonymous_status_bar/').setData({app_id:this.appID}).send();return false;}.bind(this));},switchStatusDiv:function(){j.hide(this.showingStatusDiv);j.show(this.hiddenStatusDiv);var m=this.hiddentStatusDiv;this.hiddentStatusDiv=this.showingStatusDiv;this.showingStatusDiv=m;}};e.exports=l;},null);
__d("XPlatformXOutableElementController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/async\/xoutelement\/",{type:{type:"Enum",required:true,enumType:0},fbid:{type:"Int",required:true}});},null);
__d("PlatformElementXOut.react",["React","DOM","DOMContainer.react","XPlatformXOutableElementController","AsyncRequest","GamesXOut.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.PropTypes,o=g.createClass({displayName:"PlatformElementXOut",propTypes:{type:n.string.isRequired,fbid:n.string.isRequired,domChild:n.object.isRequired},_sendFeedback:function(){var p=j.getURIBuilder().setEnum('type',this.props.type).setInt('fbid',this.props.fbid).getURI();new k(p).setMethod('POST').send();var q=g.findDOMNode(this).parentNode.parentNode;g.unmountComponentAtNode(q);h.remove(q);},render:function(){var p=g.createElement(i,null,this.props.domChild);return g.createElement(l,{onClick:this._sendFeedback},p);}});e.exports=o;},null);
__d("CanvasNavigationFullScreen",["Arbiter","CSS","cx","Event","FullScreen"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=false,m={initLink:function(n,o){if(l){return;}else l=true;h.conditionClass(n,"_4-os",k.isSupported());if(k.isSupported()&&o)setTimeout(o.show.bind(o),500);j.listen(n,'click',this.setFullScreen.bind(null,true));k.subscribe('changed',function(){if(k.isFullScreen()){g.inform('canvas.enter_fullscreen');}else g.inform('canvas.exit_fullscreen');});},isSupported:function(){var n=l&&k.isSupported();return !!n;},getFullScreen:function(){return !!k.isFullScreen();},setFullScreen:function(n){var o=true;if(n){o=k.enableFullScreen(document.documentElement);}else o=k.disableFullScreen();return o;}};e.exports=m;},null);
__d("CanvasPresenceController",["Arbiter","AsyncRequest","AvailableListConstants","AvailableList","PresenceStatus","XAppFriendsController"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=60*1000,n=false,o=[],p=0,q,r,s,t;function u(){var z=0;o.forEach(function(aa){if(k.hasDetailedPresenceData(aa)&&k.getDetailedActivePresence(aa)==i.ACTIVE_ON_WEB)z++;});if(s===(void 0)||s!==(z>1)){s=z>1;g.inform('canvas.friendsOnlineUpdated',s);}}function v(z){var aa=l.getURIBuilder().setInt('app_id',p).getURI();new h().setURI(aa).setHandler(function(ba){o=ba.payload.ids;if(z)z();u();}).send();}function w(){if(p===0){t=w;return;}n=true;v(function(){q=setInterval(v,m);r=j.subscribe(i.ON_AVAILABILITY_CHANGED,u);});}function x(){n=false;clearInterval(q);j.unsubscribe(r);}var y={setAppID:function(z){p=z;if(t)t();},setAppFriends:function(z){o=z;},useFriendsOnline:function(z){if(z==n)return;if(z){w();}else x();}};e.exports=y;},null);
__d("XPendingSyncRequestsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/platform\/games\/sync_requests\/pending_list\/",{app_id:{type:"Int",required:true}});},null);
__d("CanvasSyncRequestsController",["Arbiter","AsyncRequest","ChannelConstants","SyncRequestStatusEnum","XPendingSyncRequestsController"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=false,n=0,o;function p(u){if(r(u))q(u);l[u.id]=u;u.timer=setTimeout(function(){u.status=j.EXPIRED;s(u);},u.timeout*1000);}function q(u){clearTimeout(l[u.id].timer);delete l[u.id];}function r(u){return l[u.id]!==(void 0);}function s(u){if(!r(u))return;if(u.status!=j.PENDING){var v={id:u.id,status:j.namesByValue[u.status]};g.inform('canvas.syncRequestUpdated',v);q(u);}}g.subscribe(i.getArbiterType('sync_request_created'),function(u,v){return p(v.obj);});g.subscribe(i.getArbiterType('sync_request_updated'),function(u,v){return s(v.obj);});var t={setAppID:function(u){n=u;if(o)o();},initPendingSyncRequests:function(){if(m)return;if(n===0){o=t.initPendingSyncRequests;return;}m=true;var u=k.getURIBuilder().setInt('app_id',n).getURI();new h().setURI(u).setHandler(function(v){v.getPayload().forEach(p);}).send();}};e.exports=t;},null);
__d("JSONRPC",["Log"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){"use strict";this.$JSONRPC0=0;this.$JSONRPC1={};this.remote=function(j){this.$JSONRPC2=j;return this.remote;}.bind(this);this.local={};this.$JSONRPC3=i;}h.prototype.stub=function(i){"use strict";this.remote[i]=function(){for(var j=[],k=0,l=arguments.length;k<l;k++)j.push(arguments[k]);var m={jsonrpc:'2.0',method:i};if(typeof j[j.length-1]=='function'){m.id=++this.$JSONRPC0;this.$JSONRPC1[m.id]=j.pop();}m.params=j;this.$JSONRPC3(JSON.stringify(m),this.$JSONRPC2||{method:i});}.bind(this);};h.prototype.read=function(i,j){"use strict";var k=JSON.parse(i),l=k.id;if(!k.method){if(!this.$JSONRPC1[l]){g.warn('Could not find callback %s',l);return;}var m=this.$JSONRPC1[l];delete this.$JSONRPC1[l];delete k.id;delete k.jsonrpc;m(k);return;}var n=this,o=this.local[k.method],p;if(l){p=function(s,t){var u={jsonrpc:'2.0',id:l};u[s]=t;setTimeout(function(){n.$JSONRPC3(JSON.stringify(u),j);},0);};}else p=function(){};if(!o){g.error('Method "%s" has not been defined',k.method);p('error',{code:-32601,message:'Method not found',data:k.method});return;}k.params.push(p.bind(null,'result'));k.params.push(p.bind(null,'error'));try{var r=o.apply(j||null,k.params);if(typeof r!=='undefined')p('result',r);}catch(q){g.error('Invokation of RPC method %s resulted in the error: %s',k.method,q.message);p('error',{code:-32603,message:'Internal error',data:q.message});}};e.exports=h;},null);
__d("XdArbiter",["Arbiter","Log","QueryString","Queue"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=/^apps\./.test(location.hostname)?'canvas':'tab',l={},m=[],n=new j(),o={setRpcHandler:function(q){n.start(q);},handleMessage:function(q,r,s){try{if(typeof q=='string'){if(/^FB_RPC:/.test(q)){n.enqueue([q.substring(7),{origin:r,source:s||l[k]}]);return;}q=JSON.parse(q);}if(!q.method)return;if(typeof q.params=='string')q.params=JSON.parse(q.params);g.inform('Connect.Unsafe.'+q.method,q.params,g.BEHAVIOR_PERSISTENT);}catch(t){}},register:function(q,r,s){var t=r||k;g.inform("XdArbiter/register",{origin:s});l[t]=q;l[s]=q;g.inform('XdArbiter.register',t,g.BEHAVIOR_PERSISTENT);this.scheduleDispatch();return t;},scheduleDispatch:function(){var q=this,r=42;function s(){var t=m.shift();if(t)q.send.apply(q,t);if(m.length)setTimeout(s,r);}setTimeout(s,r);},hasProxy:function(q){var r=q||k;return !!l[r];},send:function(q,r,s){var t=s in l?s:k;r=r||l[t];if(typeof q!=='string')q=i.encode(q);try{r.proxyMessage(q,s);}catch(u){h.debug('XdArbiter: Proxy for %s not available, '+'page might have been navigated: %s',t,u.message);delete l[t];}return true;}},p=a.XdArbiter;a.XdArbiter=o;if(p){if(p._p.length)while(p._p.length)o.register.apply(o,p._p.shift());if(p._m.length)while(p._m.length)o.handleMessage.apply(o,p._m.shift());}e.exports=o;},null);
__d("PlatformAppController",["Arbiter","AsyncRequest","Bootloader","CanvasNavigationFullScreen","CanvasPresenceController","CSS","CurrentUser","Dialog","JSONRPC","PlatformDialogClient","Style","URI","Vector","XdArbiter","CanvasSyncRequestsController","errorCode","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x={oauth:true,test_flow:true,app_requests:true,game_group_create:true,game_group_join:true,gift:true,share:true,share_open_graph:true,sync_request:true},y,z,aa=true,ba=0,ca=false,da,ea=false,fa=window._cstart,ga=0,ha,ia,ja={},ka=new o(function(wa,xa){t.send('FB_RPC:'+wa,xa.source||w(y).contentWindow.frames['fb_xdm_frame_'+location.protocol.replace(':','')],xa.origin||z);});g.subscribe("XdArbiter/register",function(wa,xa){if(ha&&xa.origin!=z)new h().setURI('/platform/app_owned_url_check/').setData({appid:ha,url:xa.origin}).setHandler(function(ya){var za=ya.getPayload();if(za.allowed)z=xa.origin;}).send();});function la(wa){var xa=parseInt(wa.x,10),ya=parseInt(wa.y,10);if(xa>=0&&ya>=0)window.scrollTo(xa,ya);}function ma(wa){var xa=w(wa.frame.replace(/_fb_https$/,''));if(xa){l.addClass(xa,'noresize');xa.style.height=wa.height+'px';}}function na(){var wa=w(y),xa=0,ya=0;while(wa){xa+=parseInt(wa.offsetLeft,10);ya+=parseInt(wa.offsetTop,10);wa=wa.offsetParent;}var za=s.getViewportDimensions(),ab=s.getScrollPosition();return {clientWidth:za.x,clientHeight:za.y,scrollLeft:ab.x,scrollTop:ab.y,offsetLeft:xa,offsetTop:ya};}function oa(wa,xa,ya){var za=wa.method;delete wa.method;delete wa.access_token;delete wa.next;delete wa.context;delete wa.locale;wa.display='async';if(!/^[\w\-_.]+$/.test(za))throw new Error('Malformed method name');Object.keys(wa).forEach(function(eb){if(/[\x80-\x9f]/.test(eb))delete wa[eb];});if(!wa.redirect_uri||new r(wa.redirect_uri).getOrigin()!=new r(this.origin).getOrigin())wa.redirect_uri=this.origin;if(za=='apprequests'){za='app_requests';wa.context='canvas_app_requests';}if(za=='pay')if(wa.action=='purchaseitem'||wa.action=='purchase_item'){x[za]=ia&&ia.useNewPayDialogs;}else x[za]=false;if(za=='payer_promotion'||za=='payerpromotion')x[za]=ia&&ia.useNewPayerPromotionDialogs;if(za=='permissions.oauth'||za=='permissions.request'||za=='oauth'){za='oauth';var ab={};ab.app_id=wa.app_id;ab.auth_nonce=wa.auth_nonce;ab.auth_token=wa.auth_token;ab.auth_type=wa.auth_type;ab.client_id=wa.client_id;ab.default_audience=wa.default_audience;ab.display=wa.display;ab.domain=wa.domain;ab.e2e=wa.e2e;ab.origin=wa.origin;ab.redirect_uri=wa.redirect_uri;ab.response_type=wa.response_type;ab.return_scopes=wa.return_scopes;ab.scope=wa.scope;ab.sdk=wa.sdk;ab.state=wa.state;wa=ab;}if(x[za]){var bb=wa.redirect_uri;p.async(za,wa,function(eb){if(eb.error_code==1340004){if(m.getID()&&m.getID()!="0"){xa(eb);}else new r('/login.php').addQueryData('next',r.getRequestURI().toString()).go();}else if(za=='app_requests'&&eb.error_code==1349146){pa(za,wa,xa,eb,bb);}else xa(eb);});return;}var cb=new r('/fbml/ajax/dialog/'+za.replace(/\./g,'_')).setQueryData(wa),db=new h().setMethod('GET').setReadOnly(true).setURI(cb).setAbortHandler(function(){ya(p.REQUEST_ABORTED_ERROR);});new n().setAsync(db).setModal(true).setWideDialog(true).show().setCloseHandler(xa);}function pa(wa,xa,ya,za,ab){xa.redirect_uri=ab;p.async('oauth',xa,function(bb){if(bb.error){ya(za);}else{xa.redirect_uri=ab;p.async(wa,xa,function(cb){ya(cb);});}});}function qa(wa){ca=wa;}function ra(wa,xa){ea=wa;da=xa;}ka.stub('navigate');function sa(wa){if(ca){ka.remote.navigate(wa);return true;}return false;}ka.stub('enterFullScreen');g.subscribe('canvas.enter_fullscreen',ka.remote.enterFullScreen);ka.stub('exitFullScreen');g.subscribe('canvas.exit_fullscreen',ka.remote.exitFullScreen);ka.stub('fireEvent');g.subscribe('canvas.friendsOnlineUpdated',ka.remote.fireEvent.bind(ka.remote));g.subscribe('canvas.syncRequestUpdated',ka.remote.fireEvent.bind(ka.remote));function ta(wa){var xa=wa.time-fa+ga;switch(wa.name){case 'StopIframeAppTtiTimer':ga=xa;return {time_delta_ms:xa,type:"tti"};case 'StartIframeAppTtiTimer':fa=wa.time;break;case 'RecordIframeAppTti':if(ea)i.loadModules(["CanvasIFrameLogger"],function(ya){ya.log(xa,wa.appId,da);});return {time_delta_ms:xa,type:"tti"};}}ka.local.setSize=ma;ka.local.getPageInfo=na;ka.local.scrollTo=la;ka.local.showDialog=oa;ka.local.setNavigationEnabled=qa;ka.local.isFullScreenSupported=j.isSupported;ka.local.getFullScreen=j.getFullScreen;ka.local.logTtiMessage=ta;ka.local.useFriendsOnline=k.useFriendsOnline.bind(k);ka.local.initPendingSyncRequests=u.initPendingSyncRequests.bind(u);t.setRpcHandler(function(wa){ka.read.apply(ka,wa);});ka.stub('hidePluginObjects');g.subscribe('layer_shown',function(){if(++ba===1)if(aa){ka.remote.hidePluginObjects();}else q.set(w('pagelet_canvas_content'),'visibility','hidden');});ka.stub('showPluginObjects');g.subscribe('layer_hidden',function(){if(--ba===0){if(aa){ka.remote.showPluginObjects();}else q.set(w('pagelet_canvas_content'),'visibility','');}else if(ba<0)ba=0;});function ua(wa){ja[wa.name]=wa;var xa=w(wa.name);if(xa)y=xa;}var va={setActiveIframeAndAppID:function(wa,xa,ya){y=wa;z=xa;ha=ya;k.setAppID(ha);u.setAppID(ha);},setInformAppOnLayerChange:function(wa){aa=wa;},setNavigationEnabled:qa,setTtiEnabled:ra,handleNavigation:sa,init:ua,getFrameParams:function(wa){return ja[wa];},setConfig:function(wa){ia=wa;}};a.PlatformAppController=va;e.exports=va;},null);
__d("PlatformCanvasController",["PlatformAppController","DOMEventListener","URI","CSS","DOM","DocumentTitle","FavIcon","ge","fbt","AsyncRequest","UserActivity","UIPagelet","PageTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t='iframe_canvas',u=240000,v=5000,w=60000,x,y,z,aa,ba,ca,da;function ea(na){var oa=n('pagelet_canvas_content');j.hide(oa);k.scry(oa,'iframe').forEach(function(pa){pa.src='';});k.setContent(n('canvas_throbber_text'),o._("Loading {app-name}",[o.param("app-name",na)]));}function fa(na,oa,pa,qa,ra){var sa=n('pagelet_canvas_footer_content'),ta=n('pagelet_canvas_content'),ua=n('pagelet_canvas_ip_banner_content');k.setContent(ta,na);k.setContent(sa,oa);k.setContent(ua,ra);j.show(ta);l.set(pa);m.set(qa);}function ga(na){if(na.getSubdomain()!='apps')return false;var oa,pa=k.scry(document,'a[data-appname]');for(var qa=0;qa<pa.length;qa++)if(pa[qa].href==na){oa=pa[qa].getAttribute('data-appname');break;}if(!oa)return false;var ra=na.getPath().split('/')[1];if(ra=='l.php')return false;ea(oa);var sa=na.getUnqualifiedURI();new p().setURI(new i('/ajax/canvas.php')).setData({fb_app_name:ra,uri:sa.toString()}).setMethod('GET').setReadOnly(true).setStatusElement('canvas_throbber').setHandler(function(ta){var ua=ta.getPayload();j.conditionClass(document.body,'center_fixed_width_app',!ua.is_liquid);fa(ua.main_html,ua.footer_html,ua.page_title,ua.favicon,ua.start_now_banner_markup);s.transitionComplete();}).send();return true;}function ha(na){if(!String(na.getPath()).startsWith('/'+z+'/')&&!String(na.getPath()).startsWith('/'+y+'/'))return false;na=na.getUnqualifiedURI();na.setPath('/'+na.getPath().split('/').slice(2).join('/'));return g.handleNavigation(na.toString());}function ia(na){return ha(na)||ga(na);}function ja(){var na=Date.now();if((x>0)&&(na-aa>=u)){aa=na;r.loadFromEndpoint('WebEgoPane','pagelet_ego_pane',{pid:9,data:[y,++ba]},{bundle:false});}}q.subscribe(function(){var na=Date.now();if(na-aa>=u-v)setTimeout(ja,v);});function ka(){var na=Date.now();if((x>0)&&(na-ca>=w)){ca=na;r.loadFromEndpoint('CanvasShowcaseSliderPagelet','pagelet_canvas_showcase',{pid:129,data:[y,++da]},{bundle:false});}}function la(na,oa,pa,qa,ra){x=pa;aa=Date.now();ba=0;ca=Date.now();da=0;if(y&&y!==na)ja();y=na;z=oa;var sa=n(t);g.setConfig(ra);if(sa)h.add(sa,'load',function(){g.setNavigationEnabled(false);});if(ra&&ra.displayShowcase)setInterval(ka,w);g.setInformAppOnLayerChange(!qa);g.setNavigationEnabled(false);s.registerHandler(ia);}var ma={setup:la};e.exports=ma;},null);