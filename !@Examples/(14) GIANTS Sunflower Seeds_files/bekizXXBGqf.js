/*!CK:3958959940!*//*1437526767,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["yfeFr"]); }

__d("SubscriptionLevels",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;},null);
__d("EditSubscriptions",["Arbiter","AsyncRequest","CSS","DOM","Event","FeedBlacklistButton","MenuDeprecated","Parent","SubscriptionLevels","arrayContains","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=45,t=[o.ALL,o.DEFAULT,o.TOP],u={},v={},w={},x={},y={},z={},aa={},ba={},ca={},da={},ea={},fa="/ajax/follow/follow_profile.php",ga="/ajax/follow/unfollow_profile.php",ha="/ajax/settings/notifications/notify_me.php",ia={},ja={},ka={},la=null,ma=false,na={};function oa(mb){return p(t,mb);}function pa(mb,nb,ob,pb){var qb=n.byClass(pb,'uiMenuItem')||n.byClass(pb,"_54ni"),rb=j.getID(mb);if(!qb||!j.contains(mb,qb)){return;}else if(i.hasClass(qb,'SubscribeMenuSubscribeCheckbox')){if(w[nb]){ua(rb,nb);}else ta(rb,nb);return false;}else if(i.hasClass(qb,'SubscribeMenuUnsubscribe')){ua(rb,nb);return false;}else if(i.hasClass(qb,'SubscribeMenuSettingsItem')){gb(mb,true);return false;}else if(i.hasClass(qb,'SubscriptionMenuGoBack')){gb(mb,false);return false;}else if(i.hasClass(qb,'SubscriptionMenuItem')){ra(mb,nb,ob,qb);return false;}else if(i.hasClass(qb,'SubscribeMenuNotifyMeCheckbox')){qa(mb,nb);return false;}}function qa(mb,nb){if(x[nb]){kb(mb,nb);}else jb(mb,nb);}function ra(mb,nb,ob,pb){if(i.hasClass(pb,'SubscriptionMenuLevel')){if(m.isItemChecked(pb))return;eb(mb,nb,xa(pb),true,ob);}else if(i.hasClass(pb,'SubscriptionMenuCategory')){bb(nb,pb,!m.isItemChecked(pb),true,ob);}else if(i.hasClass(pb,'SubscriptionAppStory'))db(nb,pb,!m.isItemChecked(pb),ob);}function sa(mb){return na[mb]?na[mb]:0;}function ta(mb,nb){var ob={profile_id:nb};g.inform('FollowingUser',ob);g.inform(l.UNBLACKLIST,ob);new h().setURI(fa).setMethod('POST').setData({profile_id:nb,location:sa(mb)}).setErrorHandler(g.inform.bind(null,'FollowUserFail',ob)).send();}function ua(mb,nb){var ob={profile_id:nb};g.inform('UnfollowingUser',ob);g.inform(l.BLACKLIST,ob);new h().setURI(ga).setMethod('POST').setData({profile_id:nb,location:sa(mb)}).setErrorHandler(g.inform.bind(null,'UnfollowUserFail',ob)).send();}function va(mb,nb,ob){var pb={profile_id:mb,level:ba[mb],custom_categories:ca[mb],location:ob};new h().setURI('/ajax/follow/manage_subscriptions.php').setData(pb).send();}function wa(mb,nb){var ob=ca[nb]||[],pb=m.getItems(mb);pb.forEach(function(qb){if(i.hasClass(qb,'SubscriptionMenuCategory')){var rb=xa(qb);if(p(ob,rb)){za(qb);}else ab(qb);}else if(i.hasClass(qb,'SubscriptionAppStory')){var sb=xa(qb);if(ka[nb]&&ka[nb][sb]){za(qb);}else ab(qb);}});eb(mb,nb,ba[nb],false);}function xa(mb){var nb=j.scry(mb,'input')[0];return nb&&nb.value;}function ya(mb){return j.find(mb,'a.itemAnchor');}function za(mb){i.addClass(mb,'checked');ya(mb).setAttribute('aria-checked',true);}function ab(mb){i.removeClass(mb,'checked');ya(mb).setAttribute('aria-checked',false);}function bb(mb,nb,ob,pb,qb){if(ob){za(nb);}else ab(nb);var rb=xa(nb);if(oa(rb)){ob&&cb(mb,rb);}else if(ob){if(!p(ca[mb],rb))ca[mb].push(rb);}else{var sb=ca[mb].indexOf(rb);if(sb!==-1)ca[mb].splice(sb,1);}if(pb)va(mb,rb,qb);}function cb(mb,nb){ba[mb]=nb;g.inform('SubscriptionLevelUpdated',{profile_id:mb,level:nb});}function db(mb,nb,ob,pb){var qb='/ajax/feed/filter_action/',rb=xa(nb),sb={actor_id:mb,app_id:rb};if(ob){za(nb);qb+='resubscribe_user_app/';sb.action='resubscribe_user_app';if(!ka[mb])ka[mb]={};ka[mb][rb]=true;}else{ab(nb);qb+='unsubscribe_user_app_checkbox/';sb.action='unsubscribe_user_app_checkbox';if(ka[mb])ka[mb][rb]=false;}new h().setURI(qb).setData(sb).send();}function eb(mb,nb,ob,pb,qb){var rb=j.scry(mb,'.SubscriptionMenuLevel'),sb=null;rb.forEach(function(tb){if(xa(tb)==ob){sb=tb;}else if(m.isItemChecked(tb))bb(nb,tb,false,false);});sb&&bb(nb,sb,true,pb,qb);}function fb(mb,nb,ob){w[nb]=ob;i.conditionClass(mb,'isUnsubscribed',!ob);var pb=j.scry(mb,'li.SubscribeMenuSubscribeCheckbox');if(pb.length!==0){var qb=pb[0];if(ob){za(qb);}else ab(qb);}}function gb(mb,nb){i.conditionClass(mb,'subscriptionMenuOpen',nb);}function hb(mb,nb,ob){var pb=j.find(mb,".FriendListSubscriptionsMenu"),qb=j.find(pb,".uiMenuInner");if(la!=null)la.forEach(function(rb){qb.removeChild(rb);});ob.forEach(function(rb){qb.appendChild(rb);});la=ob;}g.subscribe('UnfollowUser',function(mb,nb){if(da[nb.profile_id]){cb(nb.profile_id,da[nb.profile_id]);ca[nb.profile_id]=ea[nb.profile_id].slice();}});g.subscribe('UpdateSubscriptionLevel',function(mb,nb){var ob=nb.profile_id+'',pb=nb.level+'';cb(ob,pb);var qb;for(qb in u)if(u[qb]===ob){var rb=r(qb);rb&&eb(rb,ob,pb,false);}});g.subscribe('listeditor/close_editor',function(){var mb;for(mb in u){var nb=r(mb);nb&&gb(nb,false);}});function ib(mb,nb,ob){x[nb]=ob;var pb=ja[nb];if(pb){if(ob){pb.select();}else pb.deselect();return;}var qb=z[nb]&&!ma,rb=j.scry(mb,'li.SubscribeMenuNotifyMeCheckbox');if(rb.length!==0){var sb=rb[0];i.conditionShow(sb,!qb);var tb=j.scry(mb,'li.SubscribeMenuNotifyMeCheckboxSeparator');if(tb.length>0)i.conditionShow(tb[0],!qb);if(ob){za(sb);}else ab(sb);}}function jb(mb,nb){var ob={profile_id:nb};g.inform('EnableNotifsForUser',ob);new h().setURI(ha).setMethod('POST').setData({notifier_id:nb,enable:true}).setErrorHandler(g.inform.bind(null,'EnableNotifsForUserFail',ob)).send();}function kb(mb,nb){var ob={profile_id:nb};g.inform('DisableNotifsForUser',ob);new h().setURI(ha).setMethod('POST').setData({notifier_id:nb,enable:false}).setErrorHandler(g.inform.bind(null,'DisableNotifsForUserFail',ob)).send();}var lb={init:function(mb,nb,ob){var pb=j.getID(mb);na[pb]=ob;if(!u[pb])k.listen(mb,'click',function(qb){return pa(mb,u[pb],ob,qb.getTarget());});if(ob===s&&ia[nb].length)hb(mb,nb,ia[nb]);if(ba[nb])wa(mb,nb);u[pb]=nb;i.conditionClass(mb,'NonFriendSubscriptionMenu',!v[nb]);i.conditionClass(mb,'cannotSubscribe',!y[nb]);i.conditionClass(mb,'noSubscriptionLevels',z[nb]&&!aa[nb]);i.conditionClass(mb,'noSubscribeCheckbox',!v[nb]&&!z[nb]);fb(mb,nb,w[nb]);ib(mb,nb,x[nb]);g.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(qb,rb){if(rb.profile_id==nb)fb(mb,nb,true);}.bind(this));g.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(qb,rb){if(rb.profile_id==nb){g.inform('SubMenu/Reset');fb(mb,nb,false);}}.bind(this));g.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(qb,rb){if(rb.profile_id==nb)ib(mb,nb,true);}.bind(this));g.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(qb,rb){if(rb.profile_id==nb)ib(mb,nb,false);}.bind(this));g.subscribe('listeditor/friend_lists_changed',function(qb,rb){if(rb.notify_state){var sb=rb.added_uid?rb.added_uid:rb.removed_uid;ib(mb,sb,rb.notify_state.is_notified);}}.bind(this));},getSubscriptions:function(mb){return {level:ba[mb],custom_categories:ca[mb]};},registerTimelineNotifySelector:function(mb,nb){var ob=mb.getInitialMenu(),pb=mb.getContentRoot();ob.forEachItem(function(qb){var rb=qb.getRoot();if(i.hasClass(rb,'SubscribeMenuNotifyMeCheckbox')){ja[nb]=qb;ib(pb,nb,x[nb]);}});ob.subscribe('itemclick',function(qb,rb){if(rb.item===ja[nb])qa(pb,nb);return true;});},setSubscriptions:function(mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb){cb(mb,sb+'');v[mb]=nb;w[mb]=ob;y[mb]=pb;z[mb]=qb;aa[mb]=rb;da[mb]=ub+'';ca[mb]=tb.map(String);ea[mb]=vb.map(String);ia[mb]=yb;x[mb]=wb;ma=xb;}};e.exports=a.EditSubscriptions||lb;},null);
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.SubscriptionLevels=b('SubscriptionLevels');a.EditSubscriptions=b('EditSubscriptions');},3);
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitions","arrayContains","createArrayFromMixed","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o,p,q,r,s,t;function u(){q&&q.hide();r&&r.hide();}function v(y){n(p,y);u();s({accept_tag_education:true});}function w(){u();s({nux_cancel:true});}var x={init:function(y,z){o=y;p=m(z).map(String);k.registerHandler(function(){u();o=false;s=(void 0);p=[];});},showDialog:function(y,z,aa){if(o&&l(p,y)){u();h.inform('DynamicFriendListEducation/dialogOpen',{uid:z,flid:y});s=aa;q=new j().setAsync(new i('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true)).setHandler(v.bind(this,y)).setCloseHandler(function(){h.inform('DynamicFriendListEducation/dialogClosed',{uid:z,flid:y});}).setCancelHandler(function(){h.inform('DynamicFriendListEducation/dialogCancel',{uid:z,flid:y});}).show();}else aa();},showContextualDialog:function(y,z,aa,ba){if(o&&l(p,y)){u();t=aa;s=ba;new i('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:y,uid:z}).setReadOnly(true).send();}else ba();},setContextualDialog:function(y,z,aa,ba){r=y;r.setContext(t);r.show();g.listen(z,'click',v.bind(this,ba));g.listen(aa,'click',w);}};e.exports=x;},null);
__d("FriendStatus",["Arbiter","AsyncRequest","SubscribeButton","arrayContains","createArrayFromMixed","forEachObject"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(q,r,s){this.id=q;this.update(r,s);}Object.assign(m.prototype,{update:function(q,r){q&&(this.status=q);if(r){this.lists=k(r).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(q){if(this.lists&&!j(this.lists,q))this.lists.push(q);this._informListChange();},removeFromList:function(q){if(this.lists){var r=this.lists.indexOf(q);r!==-1&&this.lists.splice(r,1);}this._informListChange();},updateList:function(q,r){r?this.addToList(q):this.removeFromList(q);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});Object.assign(m,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var n={},o={};function p(q,r,s){if(!n[s.uid]){n[s.uid]=new m(s.uid,q);}else n[s.uid].update(q);g.inform('FriendRequest/change',{uid:s.uid,status:q});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend'],function(q,r){r.profile_id=r.uid;r.connected=false;g.inform(i.UNSUBSCRIBED,r);});g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],p.bind(null,m.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],p.bind(null,m.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],p.bind(null,m.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],p.bind(null,m.ARE_FRIENDS));Object.assign(m,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(q,r){if(n[q]&&n[q].isComplete()){r(n[q]);}else if(o[q]){o[q].push(r);}else{o[q]=[r];new h().setURI("/ajax/friends/status.php").setData({friend:q}).setHandler(function(s){var t=s.getPayload();setTimeout(m.initFriend.bind(m,q,t.status,t.lists),0);}).send();}},initFriend:function(q,r,s){var t=n[q]||new m(q);t.update(t.status||r,t.lists||s);n[q]=t;o[q]&&o[q].forEach(function(u){u(t);});o[q]=null;},setSpecialLists:function(q){var r=m.CLOSE_FRIENDS===null;m.CLOSE_FRIENDS=q.close+'';m.ACQUAINTANCES=q.acq+'';if(r)l(n,function(s,t){s._informListChange();});}});e.exports=m;},null);
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","Event","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","arrayContains","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=5,w={},x='/ajax/profile/removefriendconfirm.php',y='/ajax/friends/requests/cancel.php',z='/ajax/choose/',aa='/profile.php',ba,ca,da,ea,fa=null,ga={profile_browser:43,fbx_top_bar:1,hovercard:5};function ha(sa,ta,ua){var va=w[sa.id],wa=function(xa){var ya={action:ua?'add_list':'del_list',to_friend:va.id,friendlists:[ta],source:ba};if(xa)Object.assign(ya,xa);va.updateList(ta,ua);var za;if(ua&&ta==n.CLOSE_FRIENDS){za=ka(sa,n.ACQUAINTANCES);if(o.isItemChecked(za)){o.toggleItem(za);ha(sa,n.ACQUAINTANCES,false);}}else if(ua&&ta==n.ACQUAINTANCES){za=ka(sa,n.CLOSE_FRIENDS);if(o.isItemChecked(za)){o.toggleItem(za);ha(sa,n.CLOSE_FRIENDS,false);}}var ab={flid:ta,uid:va.id},bb=ua?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(bb,ab);new h().setURI('/ajax/add_friend/action.php').setData(ya).send();};if(ua){k.showDialog(ta,va.id,wa);}else wa();}function ia(sa){var ta=j.scry(sa,'input')[0];return ta&&ta.value;}function ja(sa,ta,ua){if(i.hasClass(ua,'async_saving'))return;var va={uid:ta.id};new h().setURI(y).setMethod('POST').setData({friend:ta.id,cancel_ref:da,floc:ea}).setHandler(g.inform.bind(g,'FriendRequest/cancel',va)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',va)).setStatusElement(ua).send();}function ka(sa,ta){var ua=o.getItems(sa);for(var va=0;va<ua.length;va++)if(ia(ua[va])==ta)return ua[va];return null;}function la(sa,ta){var ua=o.getItems(sa);ua.forEach(function(va){var wa=ia(va),xa=t(ta.lists,wa);if(o.isItemChecked(va)!==xa)o.toggleItem(va);});}function ma(sa){var ta=o.getItems(sa),ua=!i.hasClass(sa,'followButtonFlyout')&&!i.hasClass(sa,'likeButtonFlyout'),va=[],wa=[],xa=0,ya=0;ta.forEach(function(db){if(i.hasClass(db,'neverHide')){i.removeClass(db,'underShowMore');xa++;}else if(o.isItemChecked(db)){va.push(db);}else if(i.hasClass(db,'neverShow')||i.hasClass(db,'FriendListCreateTrigger')||(!ua&&i.hasClass(db,'friendOptionsOnly'))){i.addClass(db,'underShowMore');ya++;}else wa.push(db);});var za=v-xa,ab=va.concat(wa),bb=ya;ab.forEach(function(db){if(i.hasClass(db,'ShowMoreItem')){za--;return;}if(za){i.removeClass(db,'underShowMore');za--;}else{i.addClass(db,'underShowMore');bb=true;}});i.conditionClass(sa,'hasMoreFriendListItems',bb);var cb=j.scry(sa,'.FriendListMenuShowMore');cb.forEach(function(db){i.removeClass(db,'FriendListMenuShowMore');});}function na(sa,ta){i.conditionClass(sa,'FriendListMemorializedUser',ta);}function oa(sa,ta){i.conditionClass(sa,'FriendListCannotSuggestFriends',!ta);}function pa(sa,ta){var ua=j.scry(sa,'.FriendListUnfriend')[0],va=j.scry(sa,'.FriendListCancel')[0],wa=j.scry(sa,'.FriendListSuggestFriends')[0],xa=j.scry(sa,'.FriendListFriendship')[0];if(va)i.conditionShow(va,ta.status==n.OUTGOING_REQUEST);if(ua){i.conditionShow(ua,ta.status==n.ARE_FRIENDS);var ya=j.find(ua,'a');ya.setAttribute('ajaxify',new r(x).addQueryData({uid:ta.id,unref:ca,floc:ea}).toString());if(!fa)fa=m.listen(ya,'click',function(za){var ab=p.byClass(za.getTarget(),'FriendListUnfriend');if(!ab)return;var bb=new r(j.find(ab,'a').getAttribute('ajaxify')).getQueryData();});}else i.conditionClass(sa,'NoFriendListActionSeparator',!va||ta.status!=n.OUTGOING_REQUEST);if(wa)j.find(wa,'a').setAttribute('href',new r(z).addQueryData({type:'suggest_friends',newcomer:ta.id,ref:'profile_others_dropdown'}).toString());if(xa){i.conditionShow(xa,ta.status==n.ARE_FRIENDS);j.find(xa,'a').setAttribute('href',new r(aa).addQueryData({and:ta.id}).toString());}}function qa(sa,ta,ua){var va=j.scry(sa,'div.FriendListSubscriptionsMenu');if(va.length!==0)l.init(sa,ta,ua);}g.subscribe('FriendRequest/change',function(sa,ta){for(var ua in w){var va=u(ua),wa=w[ua];if(va&&wa&&wa.id==ta.uid){la(va,wa);pa(va,wa);ma(va);}}});o.subscribe('select',function(sa,ta){if(i.hasClass(ta.item,'ShowMoreItem')&&i.hasClass(ta.menu,'FriendListMenu')){i.addClass(ta.menu,'FriendListMenuShowMore');q.poke(ta.item);}});var ra={init:function(sa,ta,ua,va,wa,xa,ya,za){sa=s(sa);ba=ua;ca=xa;da=ya;ea=za;var ab=ga[ua]||45;if(!w[sa.id])o.subscribe('select',function(bb,cb){if(j.contains(sa,cb.item))if(p.byClass(cb.item,'FriendListItem')){o.toggleItem(cb.item);var db=ia(cb.item);ha(sa,db,o.isItemChecked(cb.item));}else if(p.byClass(cb.item,'FriendListCancel')){ja(sa,w[sa.id],cb.item);}else if(p.byClass(cb.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(sa,'async_saving');n.getFriend(ta,function(bb){na(sa,va);oa(sa,wa);la(sa,bb);pa(sa,bb);w[sa.id]=bb;ma(sa);qa(sa,ta,ab);i.removeClass(sa,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||ra;},null);
__d("FriendListFlyoutController",["Event","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","DOMQuery","FriendEditLists","FriendStatus","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent_DEPRECATED","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea,fa,ga,ha=null,ia=null,ja,ka,la,ma,na,oa,pa=1500,qa,ra=false,sa=['uiButtonConfirm','uiButtonSpecial',"_42gz","_42g-","_4jy2","_51tl","_4jy1"],ta={init:function(xb,yb){ta.init=da;ea=xb;ea.subscribe('mouseenter',cb);ea.subscribe('mouseleave',function(){if(!ra)sb();});ea.subscribe('hide',eb);ea.enableBehavior(v);ea.enableBehavior(u);qa=yb;if(ha)o.setContent(ea.getContent(),[ha,ia]);var zb=function(bc){var cc=x.byClass(bc.getTarget(),'enableFriendListFlyout');if(cc){ra=true;if(ja!==cc){ga&&ub();rb(cc);}}else if(ra)ub();},ac=function(bc){var cc=x.byClass(bc.getTarget(),'enableFriendListFlyout');if(cc)if(ja===cc){clearTimeout(ma);}else{ga&&ub();rb(cc);}};g.listen(document.documentElement,{click:zb,mouseover:ac,keydown:function(event){var bc=event.getTarget();if(event.getModifiers().any)return;if(!ga||p.isNodeOfType(bc,['input','textarea']))return;var cc=g.getKeyCode(event),dc;switch(cc){case s.UP:case s.DOWN:var ec=bb();dc=za(ec);xa(ec[dc+(cc===s.UP?-1:1)]);return false;case s.SPACE:var fc=ya(bc);if(fc){ua(fc);event.prevent();}break;default:var gc=String.fromCharCode(cc).toLowerCase(),hc=bb();dc=za(hc);var ic=dc,jc=hc.length;while((~dc&&(ic=++ic%jc)!==dc)||(!~dc&&++ic<jc)){var kc=w.getItemLabel(hc[ic]);if(kc&&kc.charAt(0).toLowerCase()===gc){xa(hc[ic]);return false;}}}}});h.subscribe('FriendEditLists/unfriend',ub);h.subscribe('FriendRequest/cancel',ub);h.subscribe('DynamicFriendListEducation/dialogOpen',function(){oa=true;});h.subscribe('DynamicFriendListEducation/dialogClosed',function(){oa=false;sb();});},initContent:function(xb){o.appendContent(document.body,xb);fb(xb);setTimeout(function(){if(!ha){ha=xb;ea&&o.setContent(ea.getContent(),[ha,ia]);l.show(ha);g.listen(ha,'click',vb);ga&&ob(ja);}else{o.remove(xb);xb=null;}},0);},initNux:function(xb){if(ia)return;ia=xb;ea&&o.setContent(ea.getContent(),[ha,ia]);},show:function(xb){pb(xb);},hide:function(xb){xb===false?ub():sb();},setActiveNode:function(xb){ga&&ub();ja=xb;ka=g.listen(xb,'mouseleave',function(){ja=null;ka&&ka.remove();});},setCloseListener:function(xb,yb){m.set(xb,'flfcloselistener',yb);if(ja!=xb)m.set(xb,'flfcloselistenertimeout',setTimeout(wb.bind(null,xb),pa));},setCloseListenerTimeout:function(xb){pa=xb;}};function ua(xb){ba.firefox()&&wa(xb).blur();w.inform('select',{menu:va(xb),item:xb});}function va(xb){if(l.hasClass(xb,'uiMenuContainer'))return xb;return x.byClass(xb,'uiMenu');}function wa(xb){return p.find(xb,'a.itemAnchor');}function xa(xb){if(xb&&ab(xb)){w._removeSelected(ea.getContent());l.addClass(xb,'selected');wa(xb).focus();}}function ya(xb){return x.byClass(xb,'uiMenuItem');}function za(xb){if(document.activeElement){var yb=ya(document.activeElement);return xb.indexOf(yb);}return -1;}function ab(xb){return !l.hasClass(xb,'disabled')&&z.get(xb,'display')!=='none'&&z.get(x.byClass(xb,'uiMenu'),'display')!=='none';}function bb(){return w.getItems(ea.getContent()).filter(ab);}function cb(){clearTimeout(ma);}function db(xb){for(var yb=0;yb<sa.length;yb++)if(l.hasClass(xb,sa[yb]))return false;return true;}function eb(){if(ja){if(db(ja)){l.removeClass(ja,"_52nd");if(l.hasClass(ja,'uiButton')||l.hasClass(ja,"_42fu"))l.removeClass(ja,'selected');}if(m.get(ja,'flfcloselistener')){var xb=ja;m.set(ja,'flfcloselistenertimeout',setTimeout(wb.bind(null,xb),pa));}}ga=false;nb();ja=null;}function fb(xb){var yb=p.scry(xb,'[tabindex="0"]');yb.forEach(function(zb){zb.tabIndex='-1';});yb[0]&&(yb[0].tabIndex='0');}function gb(xb){if(p.isNodeOfType(xb,'label')&&l.hasClass(xb,'uiButton'))xb=j.getInputElement(xb);return xb;}function hb(xb){return m.get(gb(xb),'profileid');}function ib(xb){return m.get(gb(xb),'memorialized')==='true';}function jb(xb){return m.get(gb(xb),'cansuggestfriends')==='true';}function kb(xb){return m.get(gb(xb),'unref');}function lb(xb){return m.get(gb(xb),'cancelref');}function mb(xb){return m.get(gb(xb),'floc');}function nb(){ka&&ka.remove();ka=null;na&&t.unsubscribe(na);na=null;ma&&clearTimeout(ma);ma=null;}function ob(xb){var yb=hb(xb),zb=ib(xb),ac=jb(xb),bc=m.get(xb,'flloc'),cc=kb(xb),dc=lb(xb),ec=mb(xb);q.init(ha,yb,bc,zb,ac,cc,dc,ec);l.conditionClass(ha,'followButtonFlyout',l.hasClass(xb,'profileFollowButton'));l.conditionClass(ha,'friendButtonFlyout',l.hasClass(xb,'FriendRequestFriends')||l.hasClass(xb,'FriendRequestIncoming')||l.hasClass(xb,'FriendRequestOutgoing'));l.conditionClass(ha,'likeButtonFlyout',l.hasClass(xb,'profileLikeButton'));var fc=p.scry(ha,'div.uiScrollableArea')[0];fc&&y.poke(fc);var gc=aa.find(ha)[0];gc&&gc.focus();}function pb(xb){if(!ea||ga)return;ea.setContext(xb);ea.setCausalElement(xb);xb.setAttribute('aria-expanded','true');if(db(xb)){l.addClass(xb,"_52nd");if(l.hasClass(xb,'uiButton')||l.hasClass(xb,"_42fu"))l.addClass(xb,'selected');}ea.show();ja=xb;ga=true;var yb=null;if(ha){yb='show';ob(xb);}else{yb='init_show';new i().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(ea.getContent()).send();}nb();ka=g.listen(xb,'mouseleave',sb);na=t.subscribe('show',qb);if(m.get(xb,'flfcloselistener'))clearTimeout(m.remove(xb,'flfcloselistenertimeout'));var zb=hb(xb);r.getFriend(zb,function(ac){if(ac.status==r.ARE_FRIENDS)new i().setURI('/ajax/friends/lists/flyout_log.php').setData({target_id:hb(xb),unref:kb(xb),action:yb}).send();if(!ia)return;if(ac.status==r.OUTGOING_REQUEST){l.show(ia);i.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else l.hide(ia);});if(!fa||xb.id!==fa.id){h.inform('listeditor/close_editor');h.inform('friend-list/close_editor');}fa=xb;}function qb(xb,yb){if(!(yb instanceof k)||!p.contains(ja,yb.getContext()))sb();}function rb(xb){ja=xb;la=setTimeout(pb.bind(null,xb),qa);ka=g.listen(xb,'mouseleave',function(){clearTimeout(la);ja=null;ka&&ka.remove();});}function sb(){ma=setTimeout(ub,150);}function tb(){var xb=n.getCurrent(),yb=xb&&xb.getBody();return !!(yb&&p.scry(yb,'.friendListDialogTourCarousel')[0]);}function ub(){if(oa||tb())return;ra=false;if(ea){ea.hide();var xb=ea.getCausalElement();xb&&xb.setAttribute('aria-expanded','false');}}function vb(event){var xb=x.byTag(event.getTarget(),'a');if(xb&&l.hasClass(xb,'FriendListActionItem'))sb();}function wb(xb){var yb=m.remove(xb,'flfcloselistener');yb&&yb();}e.exports=a.FriendListFlyoutController||ta;},null);
__d("AddFriendButton",["Event","Animation","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","SubscribeButton","URI","XPubcontentChainedSuggestionsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w={ERROR_ALREADY_ADDED:1431005,init:function(x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka){var la=x.id,ma=null,na=n.scry(x,'.addButton')[0],oa=n.scry(x,'.addFriendText')[0],pa=n.scry(x,'.outgoingButton')[0],qa=n.scry(x,'.incomingButton')[0],ra=n.scry(x,'.friendButton')[0],sa=n.scry(x.parentNode,'.suggestFriendsButton')[0];function ta(ab,bb,cb){var db=new u(na.getAttribute('ajaxify')),eb=l(x,['ft','gt']);new j().setURI(ca).setData({to_friend:y,action:ab,how_found:aa,ref_param:ba,link_data:eb,outgoing_id:pa.id,xids:db.getQueryData().xids,logging_location:da,no_flyout_on_click:ea,ego_log_data:fa,http_referer:ha,floc:ja,frefs:ka}).setErrorHandler(bb).setServerDialogCancelHandler(cb).setRelativeTo(pa).send();if(ia&&ab==='add_friend'){var fb=(v.getURIBuilder()).setInt('friendid',y).getURI();new j().setURI(fb).send();}i.inform(t.SUBSCRIBED,{profile_id:y.toString(),connected:true,chaining:false});}function ua(ab,bb){if(oa){m.hide(oa);}else if(na)m.hide(na);pa&&m.hide(pa);qa&&m.hide(qa);ra&&m.hide(ra);if(ab)m.show(ab);if('Outgoing'==bb&&ma!=bb&&ga)new h(ab).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',s.get(ab,'borderLeftColor')).duration(2000).go();if('Requestable'==bb&&ma!=bb)sa&&m.hide(sa);ma&&m.removeClass(x,'fStatus'+ma);ma=bb;m.addClass(x,'fStatus'+bb);}function va(ab){if(m.hasClass(ab,'enableFriendListFlyout')){o.show(ab);}else o.hide();}var wa=i.subscribe('FriendRequest/change',function(ab,bb){za();if(bb.uid!=y)return;switch(bb.status){case p.ARE_FRIENDS:return ua(ra,'Friends');case p.INCOMING_REQUEST:return ua(qa,'Incoming');case p.OUTGOING_REQUEST:return ua(pa,'Outgoing');case p.CAN_REQUEST:return ua(oa?oa:na,'Requestable');}}),xa=i.subscribe('FriendRequest/unfriend',function(ab,bb){za();if(bb.uid===y&&bb.shouldHideButton===true)m.hide(na);}),ya;if(z)ya=i.subscribe('FriendRequest/confirm',function(ab,bb){za();bb.uid==y&&r(z);});na&&g.listen(na,'click',function(){i.inform('FriendRequest/sending',{uid:y});if(ea){o.setActiveNode(pa);}else va(pa);ta("add_friend",function(ab){var bb=ab.error==w.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';i.inform(bb,{uid:y});o.hide();k.defaultErrorHandler(ab);},function(ab){i.inform('FriendRequest/sendFail',{uid:y});o.hide();});});function za(){if(q(la))return;wa&&wa.unsubscribe();ya&&ya.unsubscribe();xa&&xa.unsubscribe();wa=null;ya=null;xa=null;}}};e.exports=w;},null);
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button","arrayContains"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();e.exports={register:function(k,l,m){g.subscribe('FriendListMembershipChange',function(n,o){if(o.uid==m){var p=j(o.lists,h.CLOSE_FRIENDS),q=j(o.lists,h.ACQUAINTANCES);if(p&&!q){i.setIcon(k,l.close);}else if(q&&!p){i.setIcon(k,l.acquaintance);}else i.setIcon(k,l.friend);}});}};},null);
__d("DoublyLinkedListMap",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";this._head=null;this._tail=null;this._nodes={};this._nodeCount=0;}g.prototype.get=function(h){"use strict";return this._nodes[h]?this._nodes[h].data:null;};g.prototype.getIndex=function(h){"use strict";for(var i=this._head,j=0;i;i=i.next,j++)if(i.key===h)return j;return null;};g.prototype._insert=function(h,i,j,k){"use strict";j&&!this._nodes[j]&&(j=null);var l=(j&&this._nodes[j])||(k?this._head:this._tail),m={data:i,key:h,next:null,prev:null};if(l){this.remove(h);if(k){m.prev=l.prev;l.prev&&(l.prev.next=m);l.prev=m;m.next=l;}else{m.next=l.next;l.next&&(l.next.prev=m);l.next=m;m.prev=l;}}m.prev===null&&(this._head=m);m.next===null&&(this._tail=m);this._nodes[h]=m;this._nodeCount++;return this;};g.prototype.insertBefore=function(h,i,j){"use strict";return this._insert(h,i,j,true);};g.prototype.insertAfter=function(h,i,j){"use strict";return this._insert(h,i,j,false);};g.prototype.prepend=function(h,i){"use strict";return this.insertBefore(h,i,this._head&&this._head.key);};g.prototype.append=function(h,i){"use strict";return this.insertAfter(h,i,this._tail&&this._tail.key);};g.prototype.remove=function(h){"use strict";var i=this._nodes[h];if(i){var j=i.next,k=i.prev;j&&(j.prev=k);k&&(k.next=j);this._head===i&&(this._head=j);this._tail===i&&(this._tail=k);delete this._nodes[h];this._nodeCount--;}return this;};g.prototype.find=function(h){"use strict";for(var i=this._head;i;i=i.next)if(h(i.data))return i.key;return null;};g.prototype.reduce=function(h,i){"use strict";for(var j=this._head;j;j=j.next)i=h(j.data,i);return i;};g.prototype.exists=function(h){"use strict";return !!this._nodes[h];};g.prototype.isEmpty=function(){"use strict";return !this._head;};g.prototype.reset=function(){"use strict";this._head=null;this._tail=null;this._nodes={};this._nodeCount=0;};g.prototype.map=function(h){"use strict";for(var i=this._head;i;i=i.next)h(i.data);};g.prototype.getCount=function(){"use strict";return this._nodeCount;};g.prototype.getHead=function(){"use strict";return this._head&&this._head.data;};g.prototype.getTail=function(){"use strict";return this._tail&&this._tail.data;};g.prototype.getNext=function(h){"use strict";var i=this._nodes[h];if(i&&i.next)return i.next.data;return null;};g.prototype.getPrev=function(h){"use strict";var i=this._nodes[h];if(i&&i.prev)return i.prev.data;return null;};e.exports=g;},null);
__d("Optimus",["Event","Parent"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={};function j(l,m){var n=m.getTarget();if(!n)return;var o=i[l];for(var p in o){var q=h.byAttribute(n,p);if(q)do{var r=o[p][q.getAttribute(p)];if(r&&r.handleOptimus(l,q,m)===false)break;}while(q=h.byAttribute(q.parentNode,p));}}function k(l,m,n,o){if(!i[l]){i[l]={};g.listen(document.documentElement,l,j.bind(null,l));}if(!i[l][m])i[l][m]={};if(!i[l][m][n])i[l][m][n]=o;}e.exports={addRelClick:function(l,m){k('click','rel',l,m);},addEventListener:k};},null);
__d("ProfileActionBarLogger",["FBJSON","MarauderLogger","Optimus"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(){i.addEventListener('mouseup','data-loggable','ProfileHighQualityLogger',{handleOptimus:function(k,l,m){h.log('profile_high_quality_action',null,g.parse(l.getAttribute('data-store')));return false;}});}f.init=j;},null);
__d("ProfileOverviewSection",["Arbiter","DOMScroll","DoublyLinkedListMap","Run","TidyArbiterMixin","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=null;function n(){m=null;}function o(p,q,r){"use strict";this.id=p;this.label=r;this.nodeID=q;this._parentSection=null;this.childSections=new i();this._isLoaded=false;setTimeout(function(){return o.inform('sectionInitialized/'+p,{section:this},g.BEHAVIOR_STATE);}.bind(this),0);}o.prototype.appendSection=function(p){"use strict";this.childSections.append(p.id,p);p._parentSection=this;};o.prototype.freeze=function(){"use strict";this.freezeChildren();};o.prototype.freezeChildren=function(){"use strict";var p=this.childSections.getHead();while(p){!p.isActive()&&p.freeze();p=p.getNext();}};o.prototype.getNext=function(){"use strict";return this._parentSection&&this._parentSection.childSections.getNext(this.id);};o.prototype.getPrev=function(){"use strict";return this._parentSection&&this._parentSection.childSections.getPrev(this.id);};o.prototype.isActive=function(){"use strict";var p=this;while(p){if(p.id===m)return true;p=p._parentSection;}return false;};o.prototype.isLoaded=function(){"use strict";return this._isLoaded;};o.prototype.setIsLoaded=function(p){"use strict";this._isLoaded=p;return this;};o.prototype.scrollTo=function(){"use strict";if(!l(this.nodeID))return;h.scrollTo(this.getNode(),true,false,false,0,h.scrollTo.bind(this).bind(null,this.getNode(),0));};o.prototype.thaw=function(){"use strict";this.thawChildren();};o.prototype.thawChildren=function(){"use strict";var p=this.childSections.getHead();while(p){p.thaw();p=p.getNext();}};o.prototype.getNode=function(){"use strict";throw new Error('This function needs to be implemented in children.');};o.callWithSection=function(p,q){"use strict";this.subscribe('sectionInitialized/'+p,function(r,s){q(s.section);});};o.setActiveSectionID=function(p){"use strict";!m&&j.onLeave(n);m=p;};Object.assign(o,k);e.exports=o;},null);
__d("ProfileEscapeHatch",["CSS","ProfileTabUtils","Run","TimelineComponentKeys","TimelineController"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=[],m=false;function n(o){"use strict";this.$ProfileEscapeHatch0=o;l.push(this);if(!m){k.register(j.ESCAPE_HATCH,n);i.onLeave(function(){l=[];});m=true;}}n.handleTabChange=function(o){"use strict";l.forEach(function(p){g.conditionShow(p.$ProfileEscapeHatch0,h.isTimelineTab(o));});};e.exports=n;},null);
__d("VideoCallButton.react",["FBRTCCallabilityStore","FBRTCCore","Image.react","React","StoreAndPropBasedStateMixin","Tooltip","XUIButton.react","cx","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=j,q=p.PropTypes,r=j.createClass({displayName:"VideoCallButton",mixins:[k(g)],statics:{calculateState:function(s){return {isCallable:g.isCallable(s.calleeID)};}},propTypes:{calleeID:q.string.isRequired,calleeName:q.string.isRequired},render:function(){var s=g.callButtonTooltip(this.props.calleeID,this.props.calleeName);return (j.createElement(m,j.__spread({className:"_4vuc",disabled:!this.state.isCallable,image:j.createElement(i,{src:o('video')}),onClick:this._handleStartCall,size:"large"},l.propsFor(s))));},_handleStartCall:function(s){s.preventDefault();h.startOutgoingCall(this.props.calleeID,'timeline_profile',false);}});e.exports=r;},null);