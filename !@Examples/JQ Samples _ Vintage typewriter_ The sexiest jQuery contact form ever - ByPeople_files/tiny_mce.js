(function(e){var t=/^\s*|\s*$/g,n,r="B".replace(/A(.)|B/,"$1")==="$1";var i={majorVersion:"3",minorVersion:"5.7",releaseDate:"2012-09-20",_init:function(){function c(e){if(e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)){if(/_(src|dev)\.js/g.test(e.src)){t.suffix="_src"}if((f=e.src.indexOf("?"))!=-1){t.query=e.src.substring(f+1)}t.baseURL=e.src.substring(0,e.src.lastIndexOf("/"));if(a&&t.baseURL.indexOf("://")==-1&&t.baseURL.indexOf("/")!==0){t.baseURL=a+t.baseURL}return t.baseURL}return null}var t=this,n=document,r=navigator,i=r.userAgent,s,o,u,a,f,l;t.isOpera=e.opera&&opera.buildNumber;t.isWebKit=/WebKit/.test(i);t.isIE=!t.isWebKit&&!t.isOpera&&/MSIE/gi.test(i)&&/Explorer/gi.test(r.appName);t.isIE6=t.isIE&&/MSIE [56]/.test(i);t.isIE7=t.isIE&&/MSIE [7]/.test(i);t.isIE8=t.isIE&&/MSIE [8]/.test(i);t.isIE9=t.isIE&&/MSIE [9]/.test(i);t.isGecko=!t.isWebKit&&/Gecko/.test(i);t.isMac=i.indexOf("Mac")!=-1;t.isAir=/adobeair/i.test(i);t.isIDevice=/(iPad|iPhone)/.test(i);t.isIOS5=t.isIDevice&&i.match(/AppleWebKit\/(\d*)/)[1]>=534;if(e.tinyMCEPreInit){t.suffix=tinyMCEPreInit.suffix;t.baseURL=tinyMCEPreInit.base;t.query=tinyMCEPreInit.query;return}t.suffix="";o=n.getElementsByTagName("base");for(s=0;s<o.length;s++){l=o[s].href;if(l){if(/^https?:\/\/[^\/]+$/.test(l)){l+="/"}a=l?l.match(/.*\//)[0]:""}}o=n.getElementsByTagName("script");for(s=0;s<o.length;s++){if(c(o[s])){return}}u=n.getElementsByTagName("head")[0];if(u){o=u.getElementsByTagName("script");for(s=0;s<o.length;s++){if(c(o[s])){return}}}return},is:function(e,t){if(!t){return e!==n}if(t=="array"&&i.isArray(e)){return true}return typeof e==t},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},makeMap:function(e,t,n){var r;e=e||[];t=t||",";if(typeof e=="string"){e=e.split(t)}n=n||{};r=e.length;while(r--){n[e[r]]={}}return n},each:function(e,t,r){var i,s;if(!e){return 0}r=r||e;if(e.length!==n){for(i=0,s=e.length;i<s;i++){if(t.call(r,e[i],i,e)===false){return 0}}}else{for(i in e){if(e.hasOwnProperty(i)){if(t.call(r,e[i],i,e)===false){return 0}}}}return 1},map:function(e,t){var n=[];i.each(e,function(e){n.push(t(e))});return n},grep:function(e,t){var n=[];i.each(e,function(e){if(!t||t(e)){n.push(e)}});return n},inArray:function(e,t){var n,r;if(e){for(n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}}return-1},extend:function(e,t){var r,i,s,o=arguments,u;for(r=1,i=o.length;r<i;r++){t=o[r];for(s in t){if(t.hasOwnProperty(s)){u=t[s];if(u!==n){e[s]=u}}}}return e},trim:function(e){return(e?""+e:"").replace(t,"")},create:function(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e);o=e[3].match(/(^|\.)(\w+)$/i)[2];s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o]){return}if(e[2]=="static"){s[o]=t;if(this.onCreate){this.onCreate(e[2],e[3],s[o])}return}if(!t[o]){t[o]=function(){};f=1}s[o]=t[o];r.extend(s[o].prototype,t);if(e[5]){i=r.resolve(e[5]).prototype;u=e[5].match(/\.(\w+)$/i)[1];a=s[o];if(f){s[o]=function(){return i[u].apply(this,arguments)}}else{s[o]=function(){this.parent=i[u];return a.apply(this,arguments)}}s[o].prototype[o]=s[o];r.each(i,function(e,t){s[o].prototype[t]=i[t]});r.each(t,function(e,t){if(i[t]){s[o].prototype[t]=function(){this.parent=i[t];return e.apply(this,arguments)}}else{if(t!=o){s[o].prototype[t]=e}}})}r.each(t["static"],function(e,t){s[o][t]=e});if(this.onCreate){this.onCreate(e[2],e[3],s[o].prototype)}},walk:function(e,t,n,r){r=r||this;if(e){if(n){e=e[n]}i.each(e,function(e,s){if(t.call(r,e,s,n)===false){return false}i.walk(e,t,n,r)})}},createNS:function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0;r<t.length;r++){i=t[r];if(!n[i]){n[i]={}}n=n[i]}return n},resolve:function(t,n){var r,i;n=n||e;t=t.split(".");for(r=0,i=t.length;r<i;r++){n=n[t[r]];if(!n){break}}return n},addUnload:function(t,n){function s(){function n(){t.detachEvent("onstop",n);if(i){i()}t=0}var t=document;if(t.readyState=="interactive"){if(t){t.attachEvent("onstop",n)}e.setTimeout(function(){if(t){t.detachEvent("onstop",n)}},0)}}var r=this,i;i=function(){var t=r.unloads,n,o;if(t){for(o in t){n=t[o];if(n&&n.func){n.func.call(n.scope,1)}}if(e.detachEvent){e.detachEvent("onbeforeunload",s);e.detachEvent("onunload",i)}else{if(e.removeEventListener){e.removeEventListener("unload",i,false)}}r.unloads=n=t=w=i=0;if(e.CollectGarbage){CollectGarbage()}}};t={func:t,scope:n||this};if(!r.unloads){if(e.attachEvent){e.attachEvent("onunload",i);e.attachEvent("onbeforeunload",s)}else{if(e.addEventListener){e.addEventListener("unload",i,false)}}r.unloads=[t]}else{r.unloads.push(t)}return t},removeUnload:function(e){var t=this.unloads,n=null;i.each(t,function(r,i){if(r&&r.func==e){t.splice(i,1);n=e;return false}});return n},explode:function(e,t){if(!e||i.is(e,"array")){return e}return i.map(e.split(t||","),i.trim)},_addVer:function(e){var t;if(!this.query){return e}t=(e.indexOf("?")==-1?"?":"&")+this.query;if(e.indexOf("#")==-1){return e+t}return e.replace("#",t+"#")},_replace:function(e,t,i){if(r){return i.replace(e,function(){var e=t,r=arguments,i;for(i=0;i<r.length-2;i++){if(r[i]===n){e=e.replace(new RegExp("\\$"+i,"g"),"")}else{e=e.replace(new RegExp("\\$"+i,"g"),r[i])}}return e})}return i.replace(e,t)}};i._init();e.tinymce=e.tinyMCE=i})(window);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:false,Dispatcher:function(e){this.scope=e||this;this.listeners=[]},add:function(e,t){this.listeners.push({cb:e,scope:t||this.scope});return e},addToTop:function(e,t){var n=this,r={cb:e,scope:t||n.scope};if(n.inDispatch){n.listeners=[r].concat(n.listeners)}else{n.listeners.unshift(r)}return e},remove:function(e){var t=this.listeners,n=null;tinymce.each(t,function(r,i){if(e==r.cb){n=r;t.splice(i,1);return false}});return n},dispatch:function(){var e=this,t,n=arguments,r,i=e.listeners,s;e.inDispatch=true;for(r=0;r<i.length;r++){s=i[r];t=s.cb.apply(s.scope,n.length>0?n:[s.scope]);if(t===false){break}}e.inDispatch=false;return t}});(function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var r=this,i,s,o,u;t=tinymce.trim(t);n=r.settings=n||{};if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){r.source=t;return}if(t.indexOf("/")===0&&t.indexOf("//")!==0){t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t}if(!/^[\w\-]*:?\/\//.test(t)){u=n.base_uri?n.base_uri.path:(new tinymce.util.URI(location.href)).directory;t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+r.toAbsPath(u,t)}t=t.replace(/@@/g,"(mce_at)");t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var i=t[n];if(i){i=i.replace(/\(mce_at\)/g,"@@")}r[e]=i});o=n.base_uri;if(o){if(!r.protocol){r.protocol=o.protocol}if(!r.userInfo){r.userInfo=o.userInfo}if(!r.port&&r.host==="mce_host"){r.port=o.port}if(!r.host||r.host==="mce_host"){r.host=o.host}r.source=""}},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e);t.path=e[0];t.directory=e[1];t.file=e[2];t.source="";t.getURI()},toRelative:function(e){var t=this,n;if(e==="./"){return e}e=new tinymce.util.URI(e,{base_uri:t});if(e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol){return e.getURI()}var r=t.getURI(),i=e.getURI();if(r==i||r.charAt(r.length-1)=="/"&&r.substr(0,r.length-1)==i){return r}n=t.toRelPath(t.path,e.path);if(e.query){n+="?"+e.query}if(e.anchor){n+="#"+e.anchor}return n},toAbsolute:function(e,t){e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;e=e.substring(0,e.lastIndexOf("/"));e=e.split("/");n=t.split("/");if(e.length>=n.length){for(s=0,o=e.length;s<o;s++){if(s>=n.length||e[s]!=n[s]){r=s+1;break}}}if(e.length<n.length){for(s=0,o=n.length;s<o;s++){if(s>=e.length||e[s]!=n[s]){r=s+1;break}}}if(r===1){return t}for(s=0,o=e.length-(r-1);s<o;s++){i+="../"}for(s=r-1,o=n.length;s<o;s++){if(s!=r-1){i+="/"+n[s]}else{i+=n[s]}}return i},toAbsPath:function(t,n){var r,i=0,s=[],o,u;o=/\/$/.test(n)?"/":"";t=t.split("/");n=n.split("/");e(t,function(e){if(e){s.push(e)}});t=s;for(r=n.length-1,s=[];r>=0;r--){if(n[r].length===0||n[r]==="."){continue}if(n[r]===".."){i++;continue}if(i>0){i--;continue}s.push(n[r])}r=t.length-i;if(r<=0){u=s.reverse().join("/")}else{u=t.slice(0,r).join("/")+"/"+s.reverse().join("/")}if(u.indexOf("/")!==0){u="/"+u}if(o&&u.lastIndexOf("/")!==u.length-1){u+=o}return u},getURI:function(e){var t,n=this;if(!n.source||e){t="";if(!e){if(n.protocol){t+=n.protocol+"://"}if(n.userInfo){t+=n.userInfo+"@"}if(n.host){t+=n.host}if(n.port){t+=":"+n.port}}if(n.path){t+=n.path}if(n.query){t+="?"+n.query}if(n.anchor){t+="#"+n.anchor}n.source=t}return n.source}})})();(function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n=this.get(t),r;if(n){e(n.split("&"),function(e){e=e.split("=");r=r||{};r[unescape(e[0])]=unescape(e[1])})}return r},setHash:function(t,n,r,i,s,o){var u="";e(n,function(e,t){u+=(!u?"":"&")+escape(t)+"="+escape(e)});this.set(t,u,r,i,s,o)},get:function(e){var t=document.cookie,n,r=e+"=",i;if(!t){return}i=t.indexOf("; "+r);if(i==-1){i=t.indexOf(r);if(i!==0){return null}}else{i+=2}n=t.indexOf(";",i);if(n==-1){n=t.length}return unescape(t.substring(i+r.length,n))},set:function(e,t,n,r,i,s){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(r?"; path="+escape(r):"")+(i?"; domain="+i:"")+(s?"; secure":"")},remove:function(e,t,n){var r=new Date;r.setTime(r.getTime()-1e3);this.set(e,"",r,t,n)}})})();(function(){function serialize(e,t){var n,r,i,s;t=t||'"';if(e==null){return"null"}i=typeof e;if(i=="string"){r="\bb	t\nn\ff\rr\"\"''\\\\";return t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){if(t==='"'&&e==="'"){return e}n=r.indexOf(i);if(n+1){return"\\"+r.charAt(n+1)}e=i.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+t}if(i=="object"){if(e.hasOwnProperty&&Object.prototype.toString.call(e)==="[object Array]"){for(n=0,r="[";n<e.length;n++){r+=(n>0?",":"")+serialize(e[n],t)}return r+"]"}r="{";for(s in e){if(e.hasOwnProperty(s)){r+=typeof e[s]!="function"?(r.length>1?","+t:t)+s+t+":"+serialize(e[s],t):""}}return r+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(e){function s(){if(!e.async||t.readyState==4||i++>1e4){if(e.success&&i<1e4&&t.status==200){e.success.call(e.success_scope,""+t.responseText,t,e)}else{if(e.error){e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",t,e)}}t=null}else{r.setTimeout(s,10)}}function o(e){t=0;try{t=new ActiveXObject(e)}catch(n){}return t}var t,n,r=window,i=0;e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=e.async===false?false:true;e.data=e.data||"";t=r.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP");if(t){if(t.overrideMimeType){t.overrideMimeType(e.content_type)}t.open(e.type||(e.data?"POST":"GET"),e.url,e.async);if(e.content_type){t.setRequestHeader("Content-Type",e.content_type)}t.setRequestHeader("X-Requested-With","XMLHttpRequest");t.send(e.data);if(!e.async){return s()}n=r.setTimeout(s,10)}}});(function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t);this.count=0},send:function(r){var i=r.error,s=r.success;r=e(this.settings,r);r.success=function(e,n){e=t.parse(e);if(typeof e=="undefined"){e={error:"JSON Parse error."}}if(e.error){i.call(r.error_scope||r.scope,e.error,n)}else{s.call(r.success_scope||r.scope,e.result)}};r.error=function(e,t){if(i){i.call(r.error_scope||r.scope,e,t)}};r.data=t.serialize({id:r.id||"c"+this.count++,method:r.method,params:r.params});r.content_type="application/json";n.send(r)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})})();(function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}})(tinymce);tinymce.util.Quirks=function(e){function f(t,n){try{e.getDoc().execCommand(t,false,n)}catch(r){}}function l(){var t=e.getDoc().documentMode;return t?t:6}function c(e){return e.isDefaultPrevented()}function h(){function o(t){var n,r,o,u;n=s.getRng();r=i.getParent(n.startContainer,i.isBlock);if(t){r=i.getNext(r,i.isBlock)}if(r){o=r.firstChild;while(o&&o.nodeType==3&&o.nodeValue.length===0){o=o.nextSibling}if(o&&o.nodeName==="SPAN"){u=o.cloneNode(false)}}e.getDoc().execCommand(t?"ForwardDelete":"Delete",false,null);r=i.getParent(n.startContainer,i.isBlock);tinymce.each(i.select("span.Apple-style-span,font.Apple-style-span",r),function(e){var t=s.getBookmark();if(u){i.replace(u.cloneNode(false),e,true)}else{i.remove(e,true)}s.moveToBookmark(t)})}e.onKeyDown.add(function(e,i){var s;s=i.keyCode==r;if(!c(i)&&(s||i.keyCode==n)&&!t.modifierPressed(i)){i.preventDefault();o(s)}});e.addCommand("Delete",function(){o()})}function p(){function t(e){var t=i.create("body");var n=e.cloneContents();t.appendChild(n);return s.serializer.serialize(t,{format:"html"})}function o(n){var r=t(n);var s=i.createRng();s.selectNode(e.getBody());var o=t(s);return r===o}e.onKeyDown.add(function(e,t){var s=t.keyCode,u;if(!c(t)&&(s==r||s==n)){u=e.selection.isCollapsed();if(u&&!i.isEmpty(e.getBody())){return}if(tinymce.isIE&&!u){return}if(!u&&!o(e.selection.getRng())){return}e.setContent("");e.selection.setCursorLocation(e.getBody(),0);e.nodeChanged()}})}function d(){e.onKeyDown.add(function(e,n){if(!c(n)&&n.keyCode==65&&t.metaKeyPressed(n)){n.preventDefault();e.execCommand("SelectAll")}})}function v(){if(!e.settings.content_editable){i.bind(e.getDoc(),"focusin",function(e){s.setRng(s.getRng())});i.bind(e.getDoc(),"mousedown",function(t){if(t.target==e.getDoc().documentElement){e.getWin().focus();s.setRng(s.getRng())}})}}function m(){e.onKeyDown.add(function(e,t){if(!c(t)&&t.keyCode===n){if(s.isCollapsed()&&s.getRng(true).startOffset===0){var r=s.getNode();var o=r.previousSibling;if(o&&o.nodeName&&o.nodeName.toLowerCase()==="hr"){i.remove(o);tinymce.dom.Event.cancel(t)}}}})}function g(){if(!Range.prototype.getClientRects){e.onMouseDown.add(function(e,t){if(!c(t)&&t.target.nodeName==="HTML"){var n=e.getBody();n.blur();setTimeout(function(){n.focus()},0)}})}}function y(){e.onClick.add(function(e,t){t=t.target;if(/^(IMG|HR)$/.test(t.nodeName)){s.getSel().setBaseAndExtent(t,0,t,1)}if(t.nodeName=="A"&&i.hasClass(t,"mceItemAnchor")){s.select(t)}e.nodeChanged()})}function b(){function t(){var t=i.getAttribs(s.getStart().cloneNode(false));return function(){var n=s.getStart();if(n!==e.getBody()){i.setAttrib(n,"style",null);tinymce.each(t,function(e){n.setAttributeNode(e.cloneNode(true))})}}}function n(){return!s.isCollapsed()&&i.getParent(s.getStart(),i.isBlock)!=i.getParent(s.getEnd(),i.isBlock)}function r(e,t){t.preventDefault();return false}e.onKeyPress.add(function(e,r){var i;if(!c(r)&&(r.keyCode==8||r.keyCode==46)&&n()){i=t();e.getDoc().execCommand("delete",false,null);i();r.preventDefault();return false}});i.bind(e.getDoc(),"cut",function(i){var s;if(!c(i)&&n()){s=t();e.onKeyUp.addToTop(r);setTimeout(function(){s();e.onKeyUp.remove(r)},0)}})}function w(){var t,n;i.bind(e.getDoc(),"selectionchange",function(){if(n){clearTimeout(n);n=0}n=window.setTimeout(function(){var n=s.getRng();if(!t||!tinymce.dom.RangeUtils.compareRanges(n,t)){e.nodeChanged();t=n}},50)})}function E(){document.body.setAttribute("role","application")}function S(){e.onKeyDown.add(function(e,t){if(!c(t)&&t.keyCode===n){if(s.isCollapsed()&&s.getRng(true).startOffset===0){var r=s.getNode().previousSibling;if(r&&r.nodeName&&r.nodeName.toLowerCase()==="table"){return tinymce.dom.Event.cancel(t)}}}})}function x(){if(l()>7){return}f("RespectVisibilityInDesign",true);e.contentStyles.push(".mceHideBrInPre pre br {display: none}");i.addClass(e.getBody(),"mceHideBrInPre");u.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br");i=r.length;while(i--){s=r[i];o=s.prev;if(o&&o.type===3&&o.value.charAt(o.value-1)!="\n"){o.value+="\n"}else{s.parent.insert(new tinymce.html.Node("#text",3),s,true).value="\n"}}}});a.addNodeFilter("pre",function(e,t){var n=e.length,r,i,s,o;while(n--){r=e[n].getAll("br");i=r.length;while(i--){s=r[i];o=s.prev;if(o&&o.type==3){o.value=o.value.replace(/\r?\n$/,"")}}}})}function T(){i.bind(e.getBody(),"mouseup",function(e){var t,n=s.getNode();if(n.nodeName=="IMG"){if(t=i.getStyle(n,"width")){i.setAttrib(n,"width",t.replace(/[^0-9%]+/g,""));i.setStyle(n,"width","")}if(t=i.getStyle(n,"height")){i.setAttrib(n,"height",t.replace(/[^0-9%]+/g,""));i.setStyle(n,"height","")}}})}function N(){e.onKeyDown.add(function(e,o){var u,a,f,l,h,p,d;u=o.keyCode==r;if(!c(o)&&(u||o.keyCode==n)&&!t.modifierPressed(o)){a=s.getRng();f=a.startContainer;l=a.startOffset;d=a.collapsed;if(f.nodeType==3&&f.nodeValue.length>0&&(l===0&&!d||d&&l===(u?0:1))){nonEmptyElements=e.schema.getNonEmptyElements();o.preventDefault();h=i.create("br",{id:"__tmp"});f.parentNode.insertBefore(h,f);e.getDoc().execCommand(u?"ForwardDelete":"Delete",false,null);f=s.getRng().startContainer;p=f.previousSibling;if(p&&p.nodeType==1&&!i.isBlock(p)&&i.isEmpty(p)&&!nonEmptyElements[p.nodeName.toLowerCase()]){i.remove(p)}i.remove("__tmp")}}})}function C(){e.onKeyDown.add(function(e,n){var r,o,u,a,f;if(c(n)||n.keyCode!=t.BACKSPACE){return}r=s.getRng();o=r.startContainer;u=r.startOffset;a=i.getRoot();f=o;if(!r.collapsed||u!==0){return}while(f&&f.parentNode&&f.parentNode.firstChild==f&&f.parentNode!=a){f=f.parentNode}if(f.tagName==="BLOCKQUOTE"){e.formatter.toggle("blockquote",null,f);r=i.createRng();r.setStart(o,0);r.setEnd(o,0);s.setRng(r)}})}function k(){function t(){e._refreshContentEditable();f("StyleWithCSS",false);f("enableInlineTableEditing",false);if(!o.object_resizing){f("enableObjectResizing",false)}}if(!o.readonly){e.onBeforeExecCommand.add(t);e.onMouseDown.add(t)}}function L(){function t(e,t){tinymce.each(i.select("a"),function(e){var t=e.parentNode,n=i.getRoot();if(t.lastChild===e){while(t&&!i.isBlock(t)){if(t.parentNode.lastChild!==t||t===n){return}t=t.parentNode}i.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){if(n==="CreateLink"){t(e)}});e.onSetContent.add(s.onSetContent.add(t))}function A(){if(o.forced_root_block){e.onInit.add(function(){f("DefaultParagraphSeparator",o.forced_root_block)})}}function O(){function t(t,n){if(!t||!n.initial){e.execCommand("mceRepaint")}}e.onUndo.add(t);e.onRedo.add(t);e.onSetContent.add(t)}function M(){e.onKeyDown.add(function(e,t){var r;if(!c(t)&&t.keyCode==n){r=e.getDoc().selection.createRange();if(r&&r.item){t.preventDefault();e.undoManager.beforeChange();i.remove(r.item(0));e.undoManager.add()}}})}function _(){var t;if(l()>=10){t="";tinymce.each("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"});e.contentStyles.push(t+"{padding-right: 1px !important}")}}function D(){function E(e){var s,o;s=e.screenX-c;o=e.screenY-h;g=s*l[2]+p;y=o*l[3]+d;g=g<5?5:g;y=y<5?5:y;if(t.modifierPressed(e)||u.nodeName=="IMG"&&l[2]*l[3]!==0){g=Math.round(y/v);y=Math.round(g*v)}i.setStyles(a,{width:g,height:y});if(l[2]<0&&a.clientWidth<=g){i.setStyle(a,"left",n+(p-g))}if(l[3]<0&&a.clientHeight<=y){i.setStyle(a,"top",r+(d-y))}}function S(){function t(t,n){if(n){if(u.style[t]||!e.schema.isValid(u.nodeName.toLowerCase(),t)){i.setStyle(u,t,n)}else{i.setAttrib(u,t,n)}}}t("width",g);t("height",y);i.unbind(w,"mousemove",E);i.unbind(w,"mouseup",S);if(b!=w){i.unbind(b,"mousemove",E);i.unbind(b,"mouseup",S)}i.remove(a);x(u)}function x(e){var t,s,o;T();t=i.getPos(e);n=t.x;r=t.y;s=e.offsetWidth;o=e.offsetHeight;if(u!=e){u=e;g=y=0}tinymce.each(m,function(e,t){var f;f=i.get("mceResizeHandle"+t);if(!f){f=i.add(w.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"});i.bind(f,"mousedown",function(t){t.preventDefault();S();c=t.screenX;h=t.screenY;p=u.clientWidth;d=u.clientHeight;v=d/p;l=e;a=u.cloneNode(true);i.addClass(a,"mceClonedResizable");i.setStyles(a,{left:n,top:r,margin:0});w.documentElement.appendChild(a);i.bind(w,"mousemove",E);i.bind(w,"mouseup",S);if(b!=w){i.bind(b,"mousemove",E);i.bind(b,"mouseup",S)}})}else{i.show(f)}i.setStyles(f,{left:s*e[0]+n-f.offsetWidth/2,top:o*e[1]+r-f.offsetHeight/2})});if(!tinymce.isOpera&&u.nodeName=="IMG"){u.setAttribute("data-mce-selected","1")}}function T(){if(u){u.removeAttribute("data-mce-selected")}for(var e in m){i.hide("mceResizeHandle"+e)}}function N(){var e=i.getParent(s.getNode(),"table,img");tinymce.each(i.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")});if(e){x(e)}else{T()}}var n,r,u,a,l,c,h,p,d,v,m,g,y,b=document,w=e.getDoc();if(!o.object_resizing||o.webkit_fake_resize===false){return}f("enableObjectResizing",false);m={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}");e.onNodeChange.add(N);i.bind(w,"selectionchange",N);e.serializer.addAttributeFilter("data-mce-selected",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}})}function P(){if(l()<9){u.addNodeFilter("noscript",function(e){var t=e.length,n,r;while(t--){n=e[t];r=n.firstChild;if(r){n.attr("data-mce-innertext",r.value)}}});a.addNodeFilter("noscript",function(e){var t=e.length,n,r,i;while(t--){n=e[t];r=e[t].firstChild;if(r){r.value=tinymce.html.Entities.decode(r.value)}else{i=n.attributes.map["data-mce-innertext"];if(i){n.attr("data-mce-innertext",null);r=new tinymce.html.Node("#text",3);r.value=i;r.raw=true;n.append(r)}}}})}}var t=tinymce.VK,n=t.BACKSPACE,r=t.DELETE,i=e.dom,s=e.selection,o=e.settings,u=e.parser,a=e.serializer;S();C();p();if(tinymce.isWebKit){N();h();v();y();A();if(tinymce.isIDevice){w()}else{D();d()}}if(tinymce.isIE){m();E();x();T();M();_();P()}if(tinymce.isGecko){m();g();b();k();L();O()}if(tinymce.isOpera){D()}};(function(e){function f(e){var t;t=document.createElement("div");t.innerHTML=e;return t.textContent||t.innerText||e}function l(e,t){var r,i,s,o={};if(e){e=e.split(",");t=t||10;for(r=0;r<e.length;r+=2){i=String.fromCharCode(parseInt(e[r],t));if(!n[i]){s="&"+e[r+1]+";";o[i]=s;o[s]=i}}return o}}var t,n,r,i=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,a={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};n={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&"};r={"&lt;":"<","&gt;":">","&":"&","&quot;":'"',"&apos;":"'"};t=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);e.html=e.html||{};e.html.Entities={encodeRaw:function(e,t){return e.replace(t?i:s,function(e){return n[e]||e})},encodeAllRaw:function(e){return(""+e).replace(o,function(e){return n[e]||e})},encodeNumeric:function(e,t){return e.replace(t?i:s,function(e){if(e.length>1){return"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";"}return n[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,r,o){o=o||t;return e.replace(r?i:s,function(e){return n[e]||o[e]||e})},getEncodeFunc:function(r,o){function a(e,t){return e.replace(t?i:s,function(e){return n[e]||o[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,t){return u.encodeNamed(e,t,o)}var u=e.html.Entities;o=l(o)||t;r=e.makeMap(r.replace(/\+/g,","));if(r.named&&r.numeric){return a}if(r.named){if(o){return f}return u.encodeNamed}if(r.numeric){return u.encodeNumeric}return u.encodeRaw},decode:function(e){return e.replace(u,function(e,n,i){if(n){i=parseInt(i,n.length===2?16:10);if(i>65535){i-=65536;return String.fromCharCode(55296+(i>>10),56320+(i&1023))}else{return a[i]||String.fromCharCode(i)}}return r[e]||t[e]||f(e)})}}})(tinymce);tinymce.html.Styles=function(e,t){function c(e,t,n,r){function i(e){e=parseInt(e).toString(16);return e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,o=/rgb/,u,a,f={},l;e=e||{};l="\\\" \\' \\; \\: ; : ﻿".split(" ");for(a=0;a<l.length;a++){f[l[a]]="﻿"+a;f["﻿"+a]=l[a]}return{toHex:function(e){return e.replace(n,c)},parse:function(t){function g(e,t){var n,r,i,s;n=o[e+"-top"+t];if(!n){return}r=o[e+"-right"+t];if(n!=r){return}i=o[e+"-bottom"+t];if(r!=i){return}s=o[e+"-left"+t];if(i!=s){return}o[e+t]=s;delete o[e+"-top"+t];delete o[e+"-right"+t];delete o[e+"-bottom"+t];delete o[e+"-left"+t]}function y(e){var t=o[e],n;if(!t||t.indexOf(" ")<0){return}t=t.split(" ");n=t.length;while(n--){if(t[n]!==t[0]){return false}}o[e]=t[0];return true}function w(e,t,n,r){if(!y(t)){return}if(!y(n)){return}if(!y(r)){return}o[e]=o[t]+" "+o[n]+" "+o[r];delete o[t];delete o[n];delete o[r]}function E(e){p=true;return f[e]}function S(e,t){if(p){e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})}if(!t){e=e.replace(/\\([\'\";:])/g,"$1")}return e}function x(e,t,n,r,i,s){i=i||s;if(i){i=S(i);return"'"+i.replace(/\'/g,"\\'")+"'"}t=S(t||n||r);if(v){t=v.call(m,t,"style")}return"url('"+t.replace(/\'/g,"\\'")+"')"}var o={},u,a,l,p,v=e.url_converter,m=e.url_converter_scope||this;if(t){t=t.replace(/\\[\"\';:\uFEFF]/g,E).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,E)});while(u=i.exec(t)){a=u[1].replace(s,"").toLowerCase();l=u[2].replace(s,"");if(a&&l.length>0){if(a==="font-weight"&&l==="700"){l="bold"}else{if(a==="color"||a==="background-color"){l=l.toLowerCase()}}l=l.replace(n,c);l=l.replace(r,x);o[a]=p?S(l,true):l}i.lastIndex=u.index+u[0].length}g("border","");g("border","-width");g("border","-color");g("border","-style");g("padding","");g("margin","");w("border","border-width","border-style","border-color");if(o.border==="medium none"){delete o.border}}return o},serialize:function(e,n){function o(n){var i,s,o,a;i=t.styles[n];if(i){for(s=0,o=i.length;s<o;s++){n=i[s];a=e[n];if(a!==u&&a.length>0){r+=(r.length>0?" ":"")+n+": "+a+";"}}}}var r="",i,s;if(n&&t&&t.styles){o("*");o(n)}else{for(i in e){s=e[i];if(s!==u&&s.length>0){r+=(r.length>0?" ":"")+i+": "+s+";"}}}return r}}};(function(e){function i(e,t){return e.split(t||",")}function s(e,t){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var r,s={};for(r in e){if(e.hasOwnProperty(r)){e[r]=o(e[r])}}o(t).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,t,r,o){r=i(r,"|");s[t]={attributes:n(r),attributesOrder:r,children:n(o,"|",{"#comment":{}})}});return s}function o(){var e=t.html5;if(!e){e=t.html5=s({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")}return e}function u(){var e=t.html4;if(!e){e=t.html4=s({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")}return e}var t={},n=e.makeMap,r=e.each;e.html.Schema=function(s){function k(r,i,o){var u=s[r];if(!u){u=t[r];if(!u){u=n(i," ",n(i.toUpperCase()," "));u=e.extend(u,o);t[r]=u}}else{u=n(u,",",n(u.toUpperCase()," "))}return u}function L(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function A(t){var r,s,o,u,a,l,c,p,m,g,y,b,w,E,S,x,T,N,C,k,A,O,M=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,_=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,D=/[*?+]/;if(t){t=i(t);if(h["@"]){T=h["@"].attributes;N=h["@"].attributesOrder}for(r=0,s=t.length;r<s;r++){l=M.exec(t[r]);if(l){S=l[1];g=l[2];x=l[3];m=l[4];w={};E=[];c={attributes:w,attributesOrder:E};if(S==="#"){c.paddEmpty=true}if(S==="-"){c.removeEmpty=true}if(T){for(k in T){w[k]=T[k]}E.push.apply(E,N)}if(m){m=i(m,"|");for(o=0,u=m.length;o<u;o++){l=_.exec(m[o]);if(l){p={};b=l[1];y=l[2].replace(/::/g,":");S=l[3];O=l[4];if(b==="!"){c.attributesRequired=c.attributesRequired||[];c.attributesRequired.push(y);p.required=true}if(b==="-"){delete w[y];E.splice(e.inArray(E,y),1);continue}if(S){if(S==="="){c.attributesDefault=c.attributesDefault||[];c.attributesDefault.push({name:y,value:O});p.defaultValue=O}if(S===":"){c.attributesForced=c.attributesForced||[];c.attributesForced.push({name:y,value:O});p.forcedValue=O}if(S==="<"){p.validValues=n(O,"?")}}if(D.test(y)){c.attributePatterns=c.attributePatterns||[];p.pattern=L(y);c.attributePatterns.push(p)}else{if(!w[y]){E.push(y)}w[y]=p}}}}if(!T&&g=="@"){T=w;N=E}if(x){c.outputName=g;h[x]=c}if(D.test(g)){c.pattern=L(g);v.push(c)}else{h[g]=c}}}}}function O(e){h={};v=[];A(e);r(y,function(e,t){p[t]=e.children})}function M(e){var t=/^(~)?(.+)$/;if(e){r(i(e),function(e){var n=t.exec(e),i=n[1]==="~",s=i?"span":"div",o=n[2];p[o]=p[s];C[o]=s;if(!i){T[o.toUpperCase()]={};T[o]={}}if(!h[o]){h[o]=h[s]}r(p,function(e,t){if(e[s]){e[o]=e[s]}})})}}function _(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(e){r(i(e),function(e){var n=t.exec(e),s,o;if(n){o=n[1];if(o){s=p[n[2]]}else{s=p[n[2]]={"#comment":{}}}s=p[n[2]];r(i(n[3],"|"),function(e){if(o==="-"){delete s[e]}else{s[e]={}}})}})}}function D(e){var t=h[e],n;if(t){return t}n=v.length;while(n--){t=v[n];if(t.pattern.test(e)){return t}}}var l=this,h={},p={},v=[],m,y;var w,E,S,x,T,N,C={};s=s||{};y=s.schema=="html5"?o():u();if(s.verify_html===false){s.valid_elements="*[*]"}if(s.valid_styles){m={};r(s.valid_styles,function(t,n){m[n]=e.explode(t)})}w=k("whitespace_elements","pre script noscript style textarea");E=k("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");S=k("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr");x=k("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");N=k("non_empty_elements","td th iframe video audio object",S);textBlockElementsMap=k("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");T=k("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap);if(!s.valid_elements){r(y,function(e,t){h[t]={attributes:e.attributes,attributesOrder:e.attributesOrder};p[t]=e.children});if(s.schema!="html5"){r(i("strong/b,em/i"),function(e){e=i(e,"/");h[e[1]].outputName=e[0]})}h.img.attributesDefault=[{name:"alt",value:""}];r(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){if(h[e]){h[e].removeEmpty=true}});r(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){h[e].paddEmpty=true})}else{O(s.valid_elements)}M(s.custom_elements);_(s.valid_children);A(s.extended_valid_elements);_("+ol[ul|ol],+ul[ul|ol]");if(s.invalid_elements){e.each(e.explode(s.invalid_elements),function(e){if(h[e]){delete h[e]}})}if(!D("span")){A("span[!data-mce-type|*]")}l.children=p;l.styles=m;l.getBoolAttrs=function(){return x};l.getBlockElements=function(){return T};l.getTextBlockElements=function(){return textBlockElementsMap};l.getShortEndedElements=function(){return S};l.getSelfClosingElements=function(){return E};l.getNonEmptyElements=function(){return N};l.getWhiteSpaceElements=function(){return w};l.isValidChild=function(e,t){var n=p[e];return!!(n&&n[t])};l.isValid=function(e,t){var n,r,i=D(e);if(i){if(t){if(i.attributes[t]){return true}n=i.attributePatterns;if(n){r=n.length;while(r--){if(n[r].pattern.test(e)){return true}}}}else{return true}}return false};l.getElementRule=D;l.getCustomElements=function(){return C};l.addValidElements=A;l.setValidElements=O;l.addCustomElements=M;l.addValidChildren=_;l.elements=h}})(tinymce);(function(e){e.html.SaxParser=function(t,n){var r=this,i=function(){};t=t||{};r.schema=n=n||new e.html.Schema;if(t.fix_self_closing!==false){t.fix_self_closing=true}e.each("comment cdata text start end pi doctype".split(" "),function(e){if(e){r[e]=t[e]||i}});r.parse=function(r){function R(e){var t,n;t=l.length;while(t--){if(l[t].name===e){break}}if(t>=0){for(n=l.length-1;n>=t;n--){e=l[n];if(e.valid){i.end(e.name)}}l.length=t}}function U(e,t,n,r,i){var s,o;t=t.toLowerCase();n=t in b?t:F(n||r||i||"");if(E&&!m&&t.indexOf("data-mce-")!==0){s=k[t];if(!s&&L){o=L.length;while(o--){s=L[o];if(s.pattern.test(t)){break}}if(o===-1){s=null}}if(!s){return}if(s.validValues&&!(n in s.validValues)){return}}h.map[t]=n;h.push({name:t,value:n})}var i=this,s,o=0,u,f,l=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=e.html.Entities.decode,I,q;D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g");P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};y=n.getShortEndedElements();_=t.self_closing_elements||n.getSelfClosingElements();b=n.getBoolAttrs();E=t.validate;g=t.remove_internals;I=t.fix_self_closing;q=e.isIE;C=/^:/;while(s=D.exec(r)){if(o<s.index){i.text(F(r.substr(o,s.index-o)))}if(u=s[6]){u=u.toLowerCase();if(q&&C.test(u)){u=u.substr(1)}R(u)}else{if(u=s[7]){u=u.toLowerCase();if(q&&C.test(u)){u=u.substr(1)}w=u in y;if(I&&_[u]&&l.length>0&&l[l.length-1].name===u){R(u)}if(!E||(S=n.getElementRule(u))){x=true;if(E){k=S.attributes;L=S.attributePatterns}if(N=s[8]){m=N.indexOf("data-mce-type")!==-1;if(m&&g){x=false}h=[];h.map={};N.replace(P,U)}else{h=[];h.map={}}if(E&&!m){A=S.attributesRequired;O=S.attributesDefault;M=S.attributesForced;if(M){p=M.length;while(p--){T=M[p];v=T.name;B=T.value;if(B==="{$uid}"){B="mce_"+j++}h.map[v]=B;h.push({name:v,value:B})}}if(O){p=O.length;while(p--){T=O[p];v=T.name;if(!(v in h.map)){B=T.value;if(B==="{$uid}"){B="mce_"+j++}h.map[v]=B;h.push({name:v,value:B})}}}if(A){p=A.length;while(p--){if(A[p]in h.map){break}}if(p===-1){x=false}}if(h.map["data-mce-bogus"]){x=false}}if(x){i.start(u,h,w)}}else{x=false}if(f=H[u]){f.lastIndex=o=s.index+s[0].length;if(s=f.exec(r)){if(x){d=r.substr(o,s.index-o)}o=s.index+s[0].length}else{d=r.substr(o);o=r.length}if(x&&d.length>0){i.text(d,true)}if(x){i.end(u)}D.lastIndex=o;continue}if(!w){if(!N||N.indexOf("/")!=N.length-1){l.push({name:u,valid:x})}else{if(x){i.end(u)}}}}else{if(u=s[1]){i.comment(u)}else{if(u=s[2]){i.cdata(u)}else{if(u=s[3]){i.doctype(u)}else{if(u=s[4]){i.pi(u,s[5])}}}}}}o=s.index+s[0].length}if(o<r.length){i.text(F(r.substr(o)))}for(p=l.length-1;p>=0;p--){u=l[p];if(u.valid){i.end(u.name)}}}}})(tinymce);(function(e){function r(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s]){return e[s]}if(e!==t){r=e[o];if(r){return r}for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r){return r}}}}function i(e,t){this.name=e;this.type=t;if(t===1){this.attributes=[];this.attributes.map={}}}var t=/^[ \t\r\n]*$/,n={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(i.prototype,{replace:function(e){var t=this;if(e.parent){e.remove()}t.insert(e,t);t.remove();return t},attr:function(e,t){var n=this,r,i,s;if(typeof e!=="string"){for(i in e){n.attr(i,e[i])}return n}if(r=n.attributes){if(t!==s){if(t===null){if(e in r.map){delete r.map[e];i=r.length;while(i--){if(r[i].name===e){r=r.splice(i,1);return n}}}return n}if(e in r.map){i=r.length;while(i--){if(r[i].name===e){r[i].value=t;break}}}else{r.push({name:e,value:t})}r.map[e]=t;return n}else{return r.map[e]}}},clone:function(){var e=this,t=new i(e.name,e.type),n,r,s,o,u;if(s=e.attributes){u=[];u.map={};for(n=0,r=s.length;n<r;n++){o=s[n];if(o.name!=="id"){u[u.length]={name:o.name,value:o.value};u.map[o.name]=o.value}}t.attributes=u}t.value=e.value;t.shortEnded=e.shortEnded;return t},wrap:function(e){var t=this;t.parent.insert(e,t);e.append(t);return t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;){n=t.next;e.insert(t,e,true);t=n}e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;if(t){if(t.firstChild===e){t.firstChild=n;if(n){n.prev=null}}else{r.next=n}if(t.lastChild===e){t.lastChild=r;if(r){r.next=null}}else{n.prev=r}e.parent=e.next=e.prev=null}return e},append:function(e){var t=this,n;if(e.parent){e.remove()}n=t.lastChild;if(n){n.next=e;e.prev=n;t.lastChild=e}else{t.lastChild=t.firstChild=e}e.parent=t;return e},insert:function(e,t,n){var r;if(e.parent){e.remove()}r=t.parent||this;if(n){if(t===r.firstChild){r.firstChild=e}else{t.prev.next=e}e.prev=t.prev;e.next=t;t.prev=e}else{if(t===r.lastChild){r.lastChild=e}else{t.next.prev=e}e.next=t.next;e.prev=t;t.next=e}e.parent=r;return e},getAll:function(e){var t=this,n,i=[];for(n=t.firstChild;n;n=r(n,t)){if(n.name===e){i.push(n)}}return i},empty:function(){var e=this,t,n,i;if(e.firstChild){t=[];for(i=e.firstChild;i;i=r(i,e)){t.push(i)}n=t.length;while(n--){i=t[n];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}e.firstChild=e.lastChild=null;return e},isEmpty:function(e){var n=this,i=n.firstChild,s,o;if(i){do{if(i.type===1){if(i.attributes.map["data-mce-bogus"]){continue}if(e[i.name]){return false}s=i.attributes.length;while(s--){o=i.attributes[s].name;if(o==="name"||o.indexOf("data-mce-")===0){return false}}}if(i.type===8){return false}if(i.type===3&&!t.test(i.value)){return false}}while(i=r(i,n))}return true},walk:function(e){return r(this,null,e)}});e.extend(i,{create:function(e,t){var r,s;r=new i(e,n[e]||1);if(t){for(s in t){r.attr(s,t[s])}}return r}});e.html.Node=i})(tinymce);(function(e){var t=e.html.Node;e.html.DomParser=function(n,r){function l(n){var s,o,u,f,l,c,p,d,v,m,g,y,w,E,S;y=e.makeMap("tr,td,th,tbody,thead,tfoot,table");g=r.getNonEmptyElements();w=r.getTextBlockElements();for(s=0;s<n.length;s++){o=n[s];if(!o.parent||o.fixed){continue}if(w[o.name]&&o.parent.name=="li"){E=o.next;while(E){if(w[E.name]){E.name="li";E.fixed=true;o.parent.insert(E,o.parent)}else{break}E=E.next}o.unwrap(o);continue}f=[o];for(u=o.parent;u&&!r.isValidChild(u.name,o.name)&&!y[u.name];u=u.parent){f.push(u)}if(u&&f.length>1){f.reverse();l=c=i.filterNode(f[0].clone());for(v=0;v<f.length-1;v++){if(r.isValidChild(c.name,f[v].name)){p=i.filterNode(f[v].clone());c.append(p)}else{p=c}for(d=f[v].firstChild;d&&d!=f[v+1];){S=d.next;p.append(d);d=S}c=p}if(!l.isEmpty(g)){u.insert(l,f[0],true);u.insert(o,l)}else{u.insert(o,f[0],true)}u=f[0];if(u.isEmpty(g)||u.firstChild===u.lastChild&&u.firstChild.name==="br"){u.empty().remove()}}else{if(o.parent){if(o.name==="li"){E=o.prev;if(E&&(E.name==="ul"||E.name==="ul")){E.append(o);continue}E=o.next;if(E&&(E.name==="ul"||E.name==="ul")){E.insert(o,E.firstChild,true);continue}o.wrap(i.filterNode(new t("ul",1)));continue}if(r.isValidChild(o.parent.name,"div")&&r.isValidChild("div",o.name)){o.wrap(i.filterNode(new t("div",1)))}else{if(o.name==="style"||o.name==="script"){o.empty().remove()}else{o.unwrap()}}}}}}var i=this,s={},o=[],u={},f={};n=n||{};n.validate="validate"in n?n.validate:true;n.root_name=n.root_name||"body";i.schema=r=r||new e.html.Schema;i.filterNode=function(e){var t,n,r;if(n in s){r=u[n];if(r){r.push(e)}else{u[n]=[e]}}t=o.length;while(t--){n=o[t].name;if(n in e.attributes.map){r=f[n];if(r){r.push(e)}else{f[n]=[e]}}}return e};i.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=s[e];if(!t){s[e]=t=[]}t.push(n)})};i.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<o.length;t++){if(o[t].name===e){o[t].callbacks.push(n);return}}o.push({name:e,callbacks:[n]})})};i.parse=function(i,p){function q(){var e=m.firstChild,t,n;while(e){t=e.next;if(e.type==3||e.type==1&&e.name!=="p"&&!L[e.name]&&!e.attr("data-mce-type")){if(!n){n=R(I,1);m.insert(n,e);n.append(e)}else{n.append(e)}}else{n=null}e=t}}function R(e,n){var r=new t(e,n),i;if(e in s){i=u[e];if(i){i.push(r)}else{u[e]=[r]}}return r}function U(e){var t,n,r;for(t=e.prev;t&&t.type===3;){n=t.value.replace(_,"");if(n.length>0){t.value=n;t=t.prev}else{r=t.prev;t.remove();t=r}}}function z(e){var t,n={};for(t in e){if(t!=="li"&&t!="p"){n[t]=e[t]}}return n}var v,m,y,w,E,S,x,T,N,C,k,L,A,O=[],M,_,D,P,H,B,F,I;p=p||{};u={};f={};L=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),r.getBlockElements());F=r.getNonEmptyElements();B=r.children;k=n.validate;I="forced_root_block"in p?p.forced_root_block:n.forced_root_block;H=r.getWhiteSpaceElements();A=/^[ \t\r\n]+/;_=/[ \t\r\n]+$/;D=/[ \t\r\n]+/g;P=/^[ \t\r\n]+$/;v=new e.html.SaxParser({validate:k,self_closing_elements:z(r.getSelfClosingElements()),cdata:function(e){y.append(R("#cdata",4)).value=e},text:function(e,t){var n;if(!M){e=e.replace(D," ");if(y.lastChild&&L[y.lastChild.name]){e=e.replace(A,"")}}if(e.length!==0){n=R("#text",3);n.raw=!!t;y.append(n).value=e}},comment:function(e){y.append(R("#comment",8)).value=e},pi:function(e,t){y.append(R(e,7)).value=t;U(y)},doctype:function(e){var t;t=y.append(R("#doctype",10));t.value=e;U(y)},start:function(e,t,n){var i,s,u,a,l,p,v,m;u=k?r.getElementRule(e):{};if(u){i=R(u.outputName||e,1);i.attributes=t;i.shortEnded=n;y.append(i);m=B[y.name];if(m&&B[i.name]&&!m[i.name]){O.push(i)}s=o.length;while(s--){l=o[s].name;if(l in t.map){N=f[l];if(N){N.push(i)}else{f[l]=[i]}}}if(L[e]){U(i)}if(!n){y=i}if(!M&&H[e]){M=true}}},end:function(e){var n,i,s,o,u;i=k?r.getElementRule(e):{};if(i){if(L[e]){if(!M){n=y.firstChild;if(n&&n.type===3){s=n.value.replace(A,"");if(s.length>0){n.value=s;n=n.next}else{o=n.next;n.remove();n=o}while(n&&n.type===3){s=n.value;o=n.next;if(s.length===0||P.test(s)){n.remove();n=o}n=o}}n=y.lastChild;if(n&&n.type===3){s=n.value.replace(_,"");if(s.length>0){n.value=s;n=n.prev}else{o=n.prev;n.remove();n=o}while(n&&n.type===3){s=n.value;o=n.prev;if(s.length===0||P.test(s)){n.remove();n=o}n=o}}}}if(M&&H[e]){M=false}if(i.removeEmpty||i.paddEmpty){if(y.isEmpty(F)){if(i.paddEmpty){y.empty().append(new t("#text","3")).value=" "}else{if(!y.attributes.map.name&&!y.attributes.map.id){u=y.parent;y.empty().remove();y=u;return}}}}y=y.parent}}},r);m=y=new t(p.context||n.root_name,11);v.parse(i);if(k&&O.length){if(!p.context){l(O)}else{p.invalid=true}}if(I&&m.name=="body"){q()}if(!p.invalid){for(C in u){N=s[C];w=u[C];x=w.length;while(x--){if(!w[x].parent){w.splice(x,1)}}for(E=0,S=N.length;E<S;E++){N[E](w,C,p)}}for(E=0,S=o.length;E<S;E++){N=o[E];if(N.name in f){w=f[N.name];x=w.length;while(x--){if(!w[x].parent){w.splice(x,1)}}for(x=0,T=N.callbacks.length;x<T;x++){N.callbacks[x](w,N.name,p)}}}}return m};if(n.remove_trailing_brs){i.addNodeFilter("br",function(t,n){var i,s=t.length,o,u=e.extend({},r.getBlockElements()),a=r.getNonEmptyElements(),f,l,c,p;u.body=1;for(i=0;i<s;i++){o=t[i];f=o.parent;if(u[o.parent.name]&&o===f.lastChild){c=o.prev;while(c){p=c.name;if(p!=="span"||c.attr("data-mce-type")!=="bookmark"){if(p!=="br"){break}if(p==="br"){o=null;break}}c=c.prev}if(o){o.remove();if(f.isEmpty(a)){elementRule=r.getElementRule(f.name);if(elementRule){if(elementRule.removeEmpty){f.remove()}else{if(elementRule.paddEmpty){f.empty().append(new e.html.Node("#text",3)).value=" "}}}}}}else{l=o;while(f.firstChild===l&&f.lastChild===l){l=f;if(u[f.name]){break}f=f.parent}if(l===f){textNode=new e.html.Node("#text",3);textNode.value=" ";o.replace(textNode)}}}})}if(!n.allow_html_in_named_anchor){i.addAttributeFilter("id,name",function(e,t){var n=e.length,r,i,s,o;while(n--){o=e[n];if(o.name==="a"&&o.firstChild&&!o.attr("href")){s=o.parent;r=o.lastChild;do{i=r.prev;s.insert(r,o);r=i}while(r)}}})}}})(tinymce);tinymce.html.Writer=function(e){var t=[],n,r,i,s,o;e=e||{};n=e.indent;r=tinymce.makeMap(e.indent_before||"");i=tinymce.makeMap(e.indent_after||"");s=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);o=e.element_format=="html";return{start:function(e,u,l){var h,p,v,m;if(n&&r[e]&&t.length>0){m=t[t.length-1];if(m.length>0&&m!=="\n"){t.push("\n")}}t.push("<",e);if(u){for(h=0,p=u.length;h<p;h++){v=u[h];t.push(" ",v.name,'="',s(v.value,true),'"')}}if(!l||o){t[t.length]=">"}else{t[t.length]=" />"}if(l&&n&&i[e]&&t.length>0){m=t[t.length-1];if(m.length>0&&m!=="\n"){t.push("\n")}}},end:function(e){var r;t.push("</",e,">");if(n&&i[e]&&t.length>0){r=t[t.length-1];if(r.length>0&&r!=="\n"){t.push("\n")}}},text:function(e,n){if(e.length>0){t[t.length]=n?e:s(e)}},cdata:function(e){t.push("<![CDATA[",e,"]]>")},comment:function(e){t.push("<!--",e,"-->")},pi:function(e,r){if(r){t.push("<?",e," ",r,"?>")}else{t.push("<?",e,"?>")}if(n){t.push("\n")}},doctype:function(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}};(function(e){e.html.Serializer=function(t,n){var r=this,i=new e.html.Writer(t);t=t||{};t.validate="validate"in t?t.validate:true;r.schema=n=n||new e.html.Schema;r.writer=i;r.serialize=function(e){function o(e){var t=r[e.type],u,a,l,c,h,p,v,m,y;if(!t){u=e.name;a=e.shortEnded;l=e.attributes;if(s&&l&&l.length>1){p=[];p.map={};y=n.getElementRule(e.name);for(v=0,m=y.attributesOrder.length;v<m;v++){c=y.attributesOrder[v];if(c in l.map){h=l.map[c];p.map[c]=h;p.push({name:c,value:h})}}for(v=0,m=l.length;v<m;v++){c=l[v].name;if(!(c in p.map)){h=l.map[c];p.map[c]=h;p.push({name:c,value:h})}}l=p}i.start(e.name,l,a);if(!a){if(e=e.firstChild){do{o(e)}while(e=e.next)}i.end(u)}}else{t(e)}}var r,s;s=t.validate;r={3:function(e,t){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild){do{o(e)}while(e=e.next)}}};i.reset();if(e.type==1&&!t.inner){o(e)}else{r[11](e)}return i.getContent()}}})(tinymce);tinymce.dom={};(function(e,t){function r(e,t,n,r){if(e.addEventListener){e.addEventListener(t,n,r||false)}else{if(e.attachEvent){e.attachEvent("on"+t,n)}}}function i(e,t,n,r){if(e.removeEventListener){e.removeEventListener(t,n,r||false)}else{if(e.detachEvent){e.detachEvent("on"+t,n)}}}function s(e,t){function i(){return false}function s(){return true}var n,r=t||{};for(n in e){if(n!=="layerX"&&n!=="layerY"){r[n]=e[n]}}if(!r.target){r.target=r.srcElement||document}r.preventDefault=function(){r.isDefaultPrevented=s;if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};r.stopPropagation=function(){r.isPropagationStopped=s;if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=s;r.stopPropagation()};if(!r.isDefaultPrevented){r.isDefaultPrevented=i;r.isPropagationStopped=i;r.isImmediatePropagationStopped=i}return r}function o(e,t,s){function a(){if(!s.domLoaded){s.domLoaded=true;t(u)}}var o=e.document,u={type:"ready"};if(o.readyState=="complete"){a();return}if(n){r(e,"DOMContentLoaded",a)}else{r(o,"readystatechange",function(){if(o.readyState==="complete"){i(o,"readystatechange",arguments.callee);a()}});if(o.documentElement.doScroll&&e===e.top){(function(){try{o.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}a()})()}}r(e,"load",a)}function u(e){function b(e,t){var n,r,i,s;n=f[t][e.type];if(n){for(r=0,i=n.length;r<i;r++){s=n[r];if(s&&s.func.call(s.scope,e)===false){e.preventDefault()}if(e.isImmediatePropagationStopped()){return}}}}var u=this,f={},l,p,v,m,y;m="onmouseenter"in document.documentElement;v="onfocusin"in document.documentElement;y={mouseenter:"mouseover",mouseleave:"mouseout"};l=1;u.domLoaded=false;u.events=f;u.bind=function(i,p,w,E){function M(e){b(s(e||O.event),S)}var S,x,T,N,C,L,A,O=window;if(!i||i.nodeType===3||i.nodeType===8){return}if(!i[t]){S=l++;i[t]=S;f[S]={}}else{S=i[t];if(!f[S]){f[S]={}}}E=E||i;p=p.split(" ");T=p.length;while(T--){N=p[T];L=M;C=A=false;if(N==="DOMContentLoaded"){N="ready"}if((u.domLoaded||i.readyState=="complete")&&N==="ready"){u.domLoaded=true;w.call(E,s({type:N}));continue}if(!m){C=y[N];if(C){L=function(e){var t,n;t=e.currentTarget;n=e.relatedTarget;if(n&&t.contains){n=t.contains(n)}else{while(n&&n!==t){n=n.parentNode}}if(!n){e=s(e||O.event);e.type=e.type==="mouseout"?"mouseleave":"mouseenter";e.target=t;b(e,S)}}}}if(!v&&(N==="focusin"||N==="focusout")){A=true;C=N==="focusin"?"focus":"blur";L=function(e){e=s(e||O.event);e.type=e.type==="focus"?"focusin":"focusout";b(e,S)}}x=f[S][N];if(!x){f[S][N]=x=[{func:w,scope:E}];x.fakeName=C;x.capture=A;x.nativeHandler=L;if(!n){x.proxyHandler=e(S)}if(N==="ready"){o(i,L,u)}else{r(i,C||N,n?L:x.proxyHandler,A)}}else{x.push({func:w,scope:E})}}i=x=0;return w};u.unbind=function(e,r,s){var o,a,l,c,p,d;if(!e||e.nodeType===3||e.nodeType===8){return u}o=e[t];if(o){d=f[o];if(r){r=r.split(" ");l=r.length;while(l--){p=r[l];a=d[p];if(a){if(s){c=a.length;while(c--){if(a[c].func===s){a.splice(c,1)}}}if(!s||a.length===0){delete d[p];i(e,a.fakeName||p,n?a.nativeHandler:a.proxyHandler,a.capture)}}}}else{for(p in d){a=d[p];i(e,a.fakeName||p,n?a.nativeHandler:a.proxyHandler,a.capture)}d={}}for(p in d){return u}delete f[o];try{delete e[t]}catch(v){e[t]=null}}return u};u.fire=function(e,n,r){var i,o;if(!e||e.nodeType===3||e.nodeType===8){return u}o=s(null,r);o.type=n;do{i=e[t];if(i){b(o,i)}e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return u};u.clean=function(e){var n,r,i=u.unbind;if(!e||e.nodeType===3||e.nodeType===8){return u}if(e[t]){i(e)}if(!e.getElementsByTagName){e=e.document}if(e&&e.getElementsByTagName){i(e);r=e.getElementsByTagName("*");n=r.length;while(n--){e=r[n];if(e[t]){i(e)}}}return u};u.callNativeHandler=function(e,t){if(f){f[e][t.type].nativeHandler(t)}};u.destory=function(){f={}};u.add=function(e,t,n,r){if(typeof e==="string"){e=document.getElementById(e)}if(e&&e instanceof Array){var i=e.length;while(i--){u.add(e[i],t,n,r)}return}if(t==="init"){t="ready"}return u.bind(e,t instanceof Array?t.join(" "):t,n,r)};u.remove=function(e,t,n,r){if(!e){return u}if(typeof e==="string"){e=document.getElementById(e)}if(e instanceof Array){var i=e.length;while(i--){u.remove(e[i],t,n,r)}return u}return u.unbind(e,t instanceof Array?t.join(" "):t,n)};u.clear=function(e){if(typeof e==="string"){e=document.getElementById(e)}return u.clean(e)};u.cancel=function(e){if(e){u.prevent(e);u.stop(e)}return false};u.prevent=function(e){if(!e.preventDefault){e=s(e)}e.preventDefault();return false};u.stop=function(e){if(!e.stopPropagation){e=s(e)}e.stopPropagation();return false}}var n=!!document.addEventListener;e.EventUtils=u;e.Event=new u(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}});e.Event.bind(window,"ready",function(){});e=0})(tinymce.dom,"data-mce-expando");tinymce.dom.TreeWalker=function(e,t){function r(e,n,r,i){var s,o;if(e){if(!i&&e[n]){return e[n]}if(e!=t){s=e[r];if(s){return s}for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s){return s}}}}}var n=e;this.current=function(){return n};this.next=function(e){return n=r(n,"firstChild","nextSibling",e)};this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)}};(function(e){var t=e.each,n=e.is,r=e.isWebKit,i=e.isIE,s=e.html.Entities,o=/^([a-z0-9],?)+$/i,u=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var r=this,i,s,o;r.doc=t;r.win=window;r.files={};r.cssFlicker=false;r.counter=0;r.stdMode=!e.isIE||t.documentMode>=8;r.boxModel=!e.isIE||t.compatMode=="CSS1Compat"||r.stdMode;r.hasOuterHTML="outerHTML"in t.createElement("a");r.settings=n=e.extend({keep_values:false,hex_colors:1},n);r.schema=n.schema;r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema);if(e.isIE6){try{t.execCommand("BackgroundImageCache",false,true)}catch(u){r.cssFlicker=true}}r.fixDoc(t);r.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event;e.addUnload(r.destroy,r);o=n.schema?n.schema.getBlockElements():{};r.isBlock=function(e){var t=e.nodeType;if(t){return!!(t===1&&o[e.nodeName])}return!!o[e]}},fixDoc:function(e){var t=this.settings,n;if(i&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements()){e.createElement(n)}}},clone:function(e,n){var r=this,s,o;if(!i||e.nodeType!==1||n){return e.cloneNode(n)}o=r.doc;if(!n){s=o.createElement(e.nodeName);t(r.getAttribs(e),function(t){r.setAttrib(s,t.nodeName,r.getAttrib(e,t.nodeName))});return s}return s.firstChild},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;e=!e?this.win:e;t=e.document;n=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n=this,r;e=n.get(e);t=n.getPos(e);r=n.getSize(e);return{x:t.x,y:t.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;e=t.get(e);n=t.getStyle(e,"width");r=t.getStyle(e,"height");if(n.indexOf("px")===-1){n=0}if(r.indexOf("px")===-1){r=0}return{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,false)},getParents:function(e,t,r,i){var s=this,o,u=s.settings,a=[];e=s.get(e);i=i===undefined;if(u.strict_root){r=r||s.getRoot()}if(n(t,"string")){o=t;if(t==="*"){t=function(e){return e.nodeType==1}}else{t=function(e){return s.is(e,o)}}}while(e){if(e==r||!e.nodeType||e.nodeType===9){break}if(!t||t(e)){if(i){a.push(e)}else{return e}}e=e.parentNode}return i?a:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e;e=this.doc.getElementById(e);if(e&&e.id!==t){return this.doc.getElementsByName(t)[1]}}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e.dom.Sizzle(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(t,n){var r;if(t.length===undefined){if(n==="*"){return t.nodeType==1}if(o.test(n)){n=n.toLowerCase().split(/,/);t=t.nodeName.toLowerCase();for(r=n.length-1;r>=0;r--){if(n[r]==t){return true}}return false}}return e.dom.Sizzle.matches(n,t.nodeType?[t]:t).length>0},add:function(e,t,r,i,s){var o=this;return this.run(e,function(e){var u,a;u=n(t,"string")?o.doc.createElement(t):t;o.setAttribs(u,r);if(i){if(i.nodeType){u.appendChild(i)}else{o.setHTML(u,i)}}return!s?e.appendChild(u):u})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i=this,s;r+="<"+e;for(s in t){if(t.hasOwnProperty(s)){r+=" "+s+'="'+i.encode(t[s])+'"'}}if(typeof n!="undefined"){return r+">"+n+"</"+e+">"}return r+" />"},remove:function(t,n){return this.run(t,function(t){var r,i=t.parentNode;if(!i){return null}if(n){while(r=t.firstChild){if(!e.isIE||r.nodeType!==3||r.nodeValue){i.insertBefore(r,t)}else{t.removeChild(r)}}}return i.removeChild(t)})},setStyle:function(t,n,r){var s=this;return s.run(t,function(o){var u,a;u=o.style;n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(s.pixelStyles.test(n)&&(e.is(r,"number")||/^[\-0-9\.]+$/.test(r))){r+="px"}switch(n){case"opacity":if(i){u.filter=r===""?"":"alpha(opacity="+r*100+")";if(!t.currentStyle||!t.currentStyle.hasLayout){u.display="inline-block"}}u[n]=u["-moz-opacity"]=u["-khtml-opacity"]=r||"";break;case"float":i?u.styleFloat=r:u.cssFloat=r;break;default:u[n]=r||""}if(s.settings.update_styles){s.setAttrib(o,"data-mce-style")}})},getStyle:function(e,t,n){e=this.get(e);if(!e){return}if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(r){return null}}t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()});if(t=="float"){t=i?"styleFloat":"cssFloat"}if(e.currentStyle&&n){return e.currentStyle[t]}return e.style?e.style[t]:undefined},setStyles:function(e,n){var r=this,i=r.settings,s;s=i.update_styles;i.update_styles=0;t(n,function(t,n){r.setStyle(e,n,t)});i.update_styles=s;if(i.update_styles){r.setAttrib(e,i.cssText)}},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--){e.removeAttributeNode(n.item(t))}})},setAttrib:function(e,r,i){var s=this;if(!e||!r){return}if(s.settings.strict){r=r.toLowerCase()}return this.run(e,function(e){var o=s.settings;var u=e.getAttribute(r);if(i!==null){switch(r){case"style":if(!n(i,"string")){t(i,function(t,n){s.setStyle(e,n,t)});return}if(o.keep_values){if(i&&!s._isRes(i)){e.setAttribute("data-mce-style",i,2)}else{e.removeAttribute("data-mce-style",2)}}e.style.cssText=i;break;case"class":e.className=i||"";break;case"src":case"href":if(o.keep_values){if(o.url_converter){i=o.url_converter.call(o.url_converter_scope||s,i,r,e)}s.setAttrib(e,"data-mce-"+r,i,2)}break;case"shape":e.setAttribute("data-mce-style",i);break}}if(n(i)&&i!==null&&i.length!==0){e.setAttribute(r,""+i,2)}else{e.removeAttribute(r,2)}if(tinyMCE.activeEditor&&u!=i){var a=tinyMCE.activeEditor;a.onSetAttrib.dispatch(a,e,r,i)}})},setAttribs:function(e,n){var r=this;return this.run(e,function(e){t(n,function(t,n){r.setAttrib(e,n,t)})})},getAttrib:function(t,s,o){var u,a=this,l;t=a.get(t);if(!t||t.nodeType!==1){return o===l?false:o}if(!n(o)){o=""}if(/^(src|href|style|coords|shape)$/.test(s)){u=t.getAttribute("data-mce-"+s);if(u){return u}}if(i&&a.props[s]){u=t[a.props[s]];u=u&&u.nodeValue?u.nodeValue:u}if(!u){u=t.getAttribute(s,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(s)){if(t[a.props[s]]===true&&u===""){return s}return u?s:""}if(t.nodeName==="FORM"&&t.getAttributeNode(s)){return t.getAttributeNode(s).nodeValue}if(s==="style"){u=u||t.style.cssText;if(u){u=a.serializeStyle(a.parseStyle(u),t.nodeName);if(a.settings.keep_values&&!a._isRes(u)){t.setAttribute("data-mce-style",u)}}}if(r&&s==="class"&&u){u=u.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(i){switch(s){case"rowspan":case"colspan":if(u===1){u=""}break;case"size":if(u==="+0"||u===20||u===0){u=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(u===0){u=""}break;case"hspace":if(u===-1){u=""}break;case"maxlength":case"tabindex":if(u===32768||u===2147483647||u==="32768"){u=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(u===65535){return s}return o;case"shape":u=u.toLowerCase();break;default:if(s.indexOf("on")===0&&u){u=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+u)}}}return u!==l&&u!==null&&u!==""?""+u:o},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;e=n.get(e);t=t||o.body;if(e){if(e.getBoundingClientRect){e=e.getBoundingClientRect();s=n.boxModel?o.documentElement:o.body;r=e.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-s.clientTop;i=e.top+(o.documentElement.scrollTop||o.body.scrollTop)-s.clientLeft;return{x:r,y:i}}u=e;while(u&&u!=t&&u.nodeType){r+=u.offsetLeft||0;i+=u.offsetTop||0;u=u.offsetParent}u=e.parentNode;while(u&&u!=t&&u.nodeType){r-=u.scrollLeft||0;i-=u.scrollTop||0;u=u.parentNode}}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this.doc,n;styleElm=t.getElementById("mceDefaultStyles");if(!styleElm){styleElm=t.createElement("style"),styleElm.id="mceDefaultStyles";styleElm.type="text/css";n=t.getElementsByTagName("head")[0];if(n.firstChild){n.insertBefore(styleElm,n.firstChild)}else{n.appendChild(styleElm)}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=e}else{styleElm.appendChild(t.createTextNode(e))}},loadCSS:function(n){var r=this,s=r.doc,o;if(!n){n=""}o=s.getElementsByTagName("head")[0];t(n.split(","),function(t){var n;if(r.files[t]){return}r.files[t]=true;n=r.create("link",{rel:"stylesheet",href:e._addVer(t)});if(i&&s.documentMode&&s.recalc){n.onload=function(){if(s.recalc){s.recalc()}n.onload=null}}o.appendChild(n)})},addClass:function(e,t){return this.run(e,function(e){var n;if(!t){return 0}if(this.hasClass(e,t)){return e.className}n=this.removeClass(e,t);return e.className=(n!=""?n+" ":"")+t})},removeClass:function(t,n){var r=this,i;return r.run(t,function(t){var s;if(r.hasClass(t,n)){if(!i){i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")}s=t.className.replace(i," ");s=e.trim(s!=" "?s:"");t.className=s;if(!s){t.removeAttribute("class");t.removeAttribute("className")}return s}return t.className})},hasClass:function(e,t){e=this.get(e);if(!e||!t){return false}return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){e=this.get(e);return!e||e.style.display=="none"||this.getStyle(e,"display")=="none"},uniqueId:function(e){return(!e?"mce_":e)+this.counter++},setHTML:function(n,r){var s=this;return s.run(n,function(n){if(i){while(n.firstChild){n.removeChild(n.firstChild)}try{n.innerHTML="<br />"+r;n.removeChild(n.firstChild)}catch(o){var u=s.create("div");u.innerHTML="<br />"+r;t(e.grep(u.childNodes),function(e,t){if(t&&n.canHaveHTML){n.appendChild(e)}})}}else{n.innerHTML=r}return r})},getOuterHTML:function(e){var t,n=this;e=n.get(e);if(!e){return null}if(e.nodeType===1&&n.hasOuterHTML){return e.outerHTML}t=(e.ownerDocument||n.doc).createElement("body");t.appendChild(e.cloneNode(true));return t.innerHTML},setOuterHTML:function(e,t,n){function s(e,t,n){var i,s;s=n.createElement("body");s.innerHTML=t;i=s.lastChild;while(i){r.insertAfter(i.cloneNode(true),e);i=i.previousSibling}r.remove(e)}var r=this;return this.run(e,function(e){e=r.get(e);if(e.nodeType==1){n=n||e.ownerDocument||r.doc;if(i){try{if(i&&e.nodeType==1){e.outerHTML=t}else{s(e,t,n)}}catch(o){s(e,t,n)}}else{s(e,t,n)}}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){t=this.get(t);return this.run(e,function(e){var n,r;n=t.parentNode;r=t.nextSibling;if(r){n.insertBefore(e,r)}else{n.appendChild(e)}return e})},replace:function(r,i,s){var o=this;if(n(i,"array")){r=r.cloneNode(true)}return o.run(i,function(n){if(s){t(e.grep(n.childNodes),function(e){r.appendChild(e)})}return n.parentNode.replaceChild(r,n)})},rename:function(e,n){var r=this,i;if(e.nodeName!=n.toUpperCase()){i=r.create(n);t(r.getAttribs(e),function(t){r.setAttrib(i,t.nodeName,r.getAttrib(e,t.nodeName))});r.replace(i,e,1)}return i||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r){r=r.parentNode}if(n==r){break}n=n.parentNode}if(!n&&e.ownerDocument){return e.ownerDocument.documentElement}return n},toHex:function(e){function n(e){e=parseInt(e,10).toString(16);return e.length>1?e:"0"+e}var t=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);if(t){e="#"+n(t[1])+n(t[2])+n(t[3]);return e}return e},getClasses:function(){function a(n){t(n.imports,function(e){a(e)});t(n.cssRules||n.rules,function(n){switch(n.type||1){case 1:if(n.selectorText){t(n.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t)){return}u=t;t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(o&&!(t=o(t,u))){return}if(!s[t]){r.push({"class":t});s[t]=1}})}break;case 3:a(n.styleSheet);break}})}var n=this,r=[],i,s={},o=n.settings.class_filter,u;if(n.classes){return n.classes}try{t(n.doc.styleSheets,a)}catch(f){}if(r.length>0){n.classes=r}return r},run:function(e,n,r){var i=this,s;if(i.doc&&typeof e==="string"){e=i.get(e)}if(!e){return false}r=r||this;if(!e.nodeType&&(e.length||e.length===0)){s=[];t(e,function(e,t){if(e){if(typeof e=="string"){e=i.doc.getElementById(e)}s.push(n.call(r,e,t))}});return s}return n.call(r,e)},getAttribs:function(e){var t;e=this.get(e);if(!e){return[]}if(i){t=[];if(e.nodeName=="OBJECT"){return e.attributes}if(e.nodeName==="OPTION"&&this.getAttrib(e,"selected")){t.push({specified:1,nodeName:"selected"})}e.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})});return t}return e.attributes},isEmpty:function(t,n){var r=this,i,s,o,f,l,c=0;t=t.firstChild;if(t){f=new e.dom.TreeWalker(t,t.parentNode);n=n||r.schema?r.schema.getNonEmptyElements():null;do{o=t.nodeType;if(o===1){if(t.getAttribute("data-mce-bogus")){continue}l=t.nodeName.toLowerCase();if(n&&n[l]){if(l==="br"){c++;continue}return false}s=r.getAttribs(t);i=t.attributes.length;while(i--){l=t.attributes[i].nodeName;if(l==="name"||l==="data-mce-bookmark"){return false}}}if(o==8){return false}if(o===3&&!u.test(t.nodeValue)){return false}}while(t=f.next())}return c<=1},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null;if(!t){e.removeUnload(n.destroy)}},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e){for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling){s=e.nodeType;if(t&&s==3){if(s==r||!e.nodeValue.length){continue}}n++;r=s}}return n},split:function(t,n,r){function f(t){function o(e){var t=e.previousSibling&&e.previousSibling.nodeName=="SPAN";var n=e.nextSibling&&e.nextSibling.nodeName=="SPAN";return t&&n}var n,r=t.childNodes,s=t.nodeType;if(s==1&&t.getAttribute("data-mce-type")=="bookmark"){return}for(n=r.length-1;n>=0;n--){f(r[n])}if(s!=9){if(s==3&&t.nodeValue.length>0){var u=e.trim(t.nodeValue).length;if(!i.isBlock(t.parentNode)||u>0||u===0&&o(t)){return}}else{if(s==1){r=t.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"){t.parentNode.insertBefore(r[0],t)}if(r.length||/^(br|hr|input|img)$/i.test(t.nodeName)){return}}}i.remove(t)}return t}var i=this,s=i.createRng(),o,u,a;if(t&&n){s.setStart(t.parentNode,i.nodeIndex(t));s.setEnd(n.parentNode,i.nodeIndex(n));o=s.extractContents();s=i.createRng();s.setStart(n.parentNode,i.nodeIndex(n)+1);s.setEnd(t.parentNode,i.nodeIndex(t)+1);u=s.extractContents();a=t.parentNode;a.insertBefore(f(o),t);if(r){a.replaceChild(r,n)}else{a.insertBefore(n,t)}a.insertBefore(f(u),t);i.remove(t);return r||n}},bind:function(e,t,n,r){return this.events.add(e,t,n,r||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;if(e.nodeType!=1){return null}t=e.getAttribute("data-mce-contenteditable");if(t&&t!=="inherit"){return t}return e.contentEditable!=="inherit"?e.contentEditable:null},_findSib:function(e,t,r){var i=this,s=t;if(e){if(n(s,"string")){s=function(e){return i.is(e,t)}}for(e=e[r];e;e=e[r]){if(s(e)){return e}}}return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}});e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(e){function t(e){function v(){return r.createDocumentFragment()}function m(e,t){B(u,e,t)}function g(e,t){B(a,e,t)}function y(e){m(e.parentNode,d(e))}function w(e){m(e.parentNode,d(e)+1)}function E(e){g(e.parentNode,d(e))}function S(e){g(e.parentNode,d(e)+1)}function x(e){if(e){n[c]=n[l];n[h]=n[f]}else{n[l]=n[c];n[f]=n[h]}n.collapsed=u}function T(e){y(e);S(e)}function N(e){m(e,0);g(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function C(e,t){var r=n[l],i=n[f],s=n[c],o=n[h],u=t.startContainer,a=t.startOffset,p=t.endContainer,d=t.endOffset;if(e===0){return H(r,i,u,a)}if(e===1){return H(s,o,u,a)}if(e===2){return H(s,o,p,d)}if(e===3){return H(r,i,p,d)}}function k(){j(o)}function L(){return j(i)}function A(){return j(s)}function O(t){var n=this[l],r=this[f],i,s;if((n.nodeType===3||n.nodeType===4)&&n.nodeValue){if(!r){n.parentNode.insertBefore(t,n)}else{if(r>=n.nodeValue.length){e.insertAfter(t,n)}else{i=n.splitText(r);n.parentNode.insertBefore(t,i)}}}else{if(n.childNodes.length>0){s=n.childNodes[r]}if(s){n.insertBefore(t,s)}else{n.appendChild(t)}}}function M(e){var t=n.extractContents();n.insertNode(e);e.appendChild(t);n.selectNode(e)}function _(){return p(new t(e),{startContainer:n[l],startOffset:n[f],endContainer:n[c],endOffset:n[h],collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})}function D(e,t){var n;if(e.nodeType==3){return e}if(t<0){return e}n=e.firstChild;while(n&&t>0){--t;n=n.nextSibling}if(n){return n}return e}function P(){return n[l]==n[c]&&n[f]==n[h]}function H(t,n,r,i){var s,o,u,a,f,l;if(t==r){if(n==i){return 0}if(n<i){return-1}return 1}s=r;while(s&&s.parentNode!=t){s=s.parentNode}if(s){o=0;u=t.firstChild;while(u!=s&&o<n){o++;u=u.nextSibling}if(n<=o){return-1}return 1}s=t;while(s&&s.parentNode!=r){s=s.parentNode}if(s){o=0;u=r.firstChild;while(u!=s&&o<i){o++;u=u.nextSibling}if(o<i){return-1}return 1}a=e.findCommonAncestor(t,r);f=t;while(f&&f.parentNode!=a){f=f.parentNode}if(!f){f=a}l=r;while(l&&l.parentNode!=a){l=l.parentNode}if(!l){l=a}if(f==l){return 0}u=a.firstChild;while(u){if(u==f){return-1}if(u==l){return 1}u=u.nextSibling}}function B(t,r,i){var s,o;if(t){n[l]=r;n[f]=i}else{n[c]=r;n[h]=i}s=n[c];while(s.parentNode){s=s.parentNode}o=n[l];while(o.parentNode){o=o.parentNode}if(o==s){if(H(n[l],n[f],n[c],n[h])>0){n.collapse(t)}}else{n.collapse(t)}n.collapsed=P();n.commonAncestorContainer=e.findCommonAncestor(n[l],n[c])}function j(e){var t,r=0,i=0,s,o,u,a,f,h;if(n[l]==n[c]){return F(e)}for(t=n[c],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[l]){return I(t,e)}++r}for(t=n[l],s=t.parentNode;s;t=s,s=s.parentNode){if(s==n[c]){return q(t,e)}++i}o=i-r;u=n[l];while(o>0){u=u.parentNode;o--}a=n[c];while(o<0){a=a.parentNode;o++}for(f=u.parentNode,h=a.parentNode;f!=h;f=f.parentNode,h=h.parentNode){u=f;a=h}return R(u,a,e)}function F(e){var t,i,a,c,p,d,m,g,y;if(e!=o){t=v()}if(n[f]==n[h]){return t}if(n[l].nodeType==3){i=n[l].nodeValue;a=i.substring(n[f],n[h]);if(e!=s){c=n[l];g=n[f];y=n[h]-n[f];if(g===0&&y>=c.nodeValue.length-1){c.parentNode.removeChild(c)}else{c.deleteData(g,y)}n.collapse(u)}if(e==o){return}if(a.length>0){t.appendChild(r.createTextNode(a))}return t}c=D(n[l],n[f]);p=n[h]-n[f];while(c&&p>0){d=c.nextSibling;m=X(c,e);if(t){t.appendChild(m)}--p;c=d}if(e!=s){n.collapse(u)}return t}function I(e,t){var r,i,u,l,c,h;if(t!=o){r=v()}i=U(e,t);if(r){r.appendChild(i)}u=d(e);l=u-n[f];if(l<=0){if(t!=s){n.setEndBefore(e);n.collapse(a)}return r}i=e.previousSibling;while(l>0){c=i.previousSibling;h=X(i,t);if(r){r.insertBefore(h,r.firstChild)}--l;i=c}if(t!=s){n.setEndBefore(e);n.collapse(a)}return r}function q(e,t){var r,i,a,f,l,c;if(t!=o){r=v()}a=z(e,t);if(r){r.appendChild(a)}i=d(e);++i;f=n[h]-i;a=e.nextSibling;while(a&&f>0){l=a.nextSibling;c=X(a,t);if(r){r.appendChild(c)}--f;a=l}if(t!=s){n.setStartAfter(e);n.collapse(u)}return r}function R(e,t,r){var i,a,f,l,c,h,p,m;if(r!=o){a=v()}i=z(e,r);if(a){a.appendChild(i)}f=e.parentNode;l=d(e);c=d(t);++l;h=c-l;p=e.nextSibling;while(h>0){m=p.nextSibling;i=X(p,r);if(a){a.appendChild(i)}p=m;--h}i=U(t,r);if(a){a.appendChild(i)}if(r!=s){n.setStartAfter(e);n.collapse(u)}return a}function U(e,t){var r=D(n[c],n[h]-1),i,s,f,l,p,d=r!=n[c];if(r==e){return W(r,d,a,t)}i=r.parentNode;s=W(i,a,a,t);while(i){while(r){f=r.previousSibling;l=W(r,d,a,t);if(t!=o){s.insertBefore(l,s.firstChild)}d=u;r=f}if(i==e){return s}r=i.previousSibling;i=i.parentNode;p=W(i,a,a,t);if(t!=o){p.appendChild(s)}s=p}}function z(e,t){var r=D(n[l],n[f]),i=r!=n[l],s,c,h,p,d;if(r==e){return W(r,i,u,t)}s=r.parentNode;c=W(s,a,u,t);while(s){while(r){h=r.nextSibling;p=W(r,i,u,t);if(t!=o){c.appendChild(p)}i=u;r=h}if(s==e){return c}r=s.nextSibling;s=s.parentNode;d=W(s,a,u,t);if(t!=o){d.appendChild(c)}c=d}}function W(t,r,i,u){var l,c,p,d,v;if(r){return X(t,u)}if(t.nodeType==3){l=t.nodeValue;if(i){d=n[f];c=l.substring(d);p=l.substring(0,d)}else{d=n[h];c=l.substring(0,d);p=l.substring(d)}if(u!=s){t.nodeValue=p}if(u==o){return}v=e.clone(t,a);v.nodeValue=c;return v}if(u==o){return}return e.clone(t,a)}function X(t,n){if(n!=o){return n==s?e.clone(t,u):t}t.parentNode.removeChild(t)}function V(){return e.create("body",null,A()).outerText}var n=this,r=e.doc,i=0,s=1,o=2,u=true,a=false,f="startOffset",l="startContainer",c="endContainer",h="endOffset",p=tinymce.extend,d=e.nodeIndex;p(n,{startContainer:r,startOffset:0,endContainer:r,endOffset:0,collapsed:u,commonAncestorContainer:r,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:m,setEnd:g,setStartBefore:y,setStartAfter:w,setEndBefore:E,setEndAfter:S,collapse:x,selectNode:T,selectNodeContents:N,compareBoundaryPoints:C,deleteContents:k,extractContents:L,cloneContents:A,insertNode:O,surroundContents:M,cloneRange:_,toStringIE:V});return n}e.Range=t;t.prototype.toString=function(){return this.toStringIE()}})(tinymce.dom);(function(){function e(e){function s(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;r=t.duplicate();r.collapse(n);h=r.parentElement();if(h.ownerDocument!==e.dom.doc){return}while(h.contentEditable==="false"){h=h.parentNode}if(!h.hasChildNodes()){return{node:h,inside:1}}u=h.children;s=u.length-1;while(i<=s){l=Math.floor((i+s)/2);a=u[l];r.moveToElementText(a);c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0){s=l-1}else{if(c<0){i=l+1}else{return{node:a}}}}if(c<0){if(!a){r.moveToElementText(h);r.collapse(true);a=h;o=true}else{r.collapse(false)}f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",1)===0||h!=r.parentElement()){break}f++}}else{r.collapse(true);f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",-1)===0||h!=r.parentElement()){break}f++}}return{node:a,position:c,offset:f,inside:o}}function o(){function p(e){var t=s(r,e),n,o,u=0,a,f,l;n=t.node;o=t.offset;if(t.inside&&!n.hasChildNodes()){i[e?"setStart":"setEnd"](n,0);return}if(o===f){i[e?"setStartBefore":"setEndAfter"](n);return}if(t.position<0){a=t.inside?n.firstChild:n.nextSibling;if(!a){i[e?"setStartAfter":"setEndAfter"](n);return}if(!o){if(a.nodeType==3){i[e?"setStart":"setEnd"](a,0)}else{i[e?"setStartBefore":"setEndBefore"](a)}return}while(a){l=a.nodeValue;u+=l.length;if(u>=o){n=a;u-=o;u=l.length-u;break}a=a.nextSibling}}else{a=n.previousSibling;if(!a){return i[e?"setStartBefore":"setEndBefore"](n)}if(!o){if(n.nodeType==3){i[e?"setStart":"setEnd"](a,n.nodeValue.length)}else{i[e?"setStartAfter":"setEndAfter"](a)}return}while(a){u+=a.nodeValue.length;if(u>=o){n=a;u-=o;break}a=a.previousSibling}}i[e?"setStart":"setEnd"](n,u)}var r=e.getRng(),i=n.createRng(),o,u,a,f,l,c;o=r.item?r.item(0):r.parentElement();if(o.ownerDocument!=n.doc){return i}u=e.isCollapsed();if(r.item){i.setStart(o.parentNode,n.nodeIndex(o));i.setEnd(i.startContainer,i.startOffset+1);return i}try{p(true);if(!u){p()}}catch(v){if(v.number==-2147024809){l=t.getBookmark(2);a=r.duplicate();a.collapse(true);o=a.parentElement();if(!u){a=r.duplicate();a.collapse(false);f=a.parentElement();f.innerHTML=f.innerHTML}o.innerHTML=o.innerHTML;t.moveToBookmark(l);r=e.getRng();p(true);if(!u){p()}}else{throw v}}return i}var t=this,n=e.dom,r=true,i=false;this.getBookmark=function(t){function a(e){var t,r,i,s,o=[];t=e.parentNode;r=n.getRoot().parentNode;while(t!=r&&t.nodeType!==9){i=t.children;s=i.length;while(s--){if(e===i[s]){o.push(s);break}}e=t;t=t.parentNode}return o}function f(e){var t;t=s(r,e);if(t){return{position:t.position,offset:t.offset,indexes:a(t.node),inside:t.inside}}}var r=e.getRng(),i,o,u={};if(t===2){if(!r.item){u.start=f(true);if(!e.isCollapsed()){u.end=f()}}else{u.start={ctrl:true,indexes:a(r.item(0))}}}return u};this.moveToBookmark=function(e){function i(e){var t,r,i,s;t=n.getRoot();for(r=e.length-1;r>=0;r--){s=t.children;i=e[r];if(i<=s.length-1){t=s[i]}}return t}function s(n){var s=e[n?"start":"end"],o,u,a;if(s){o=s.position>0;u=r.createTextRange();u.moveToElementText(i(s.indexes));offset=s.offset;if(offset!==a){u.collapse(s.inside||o);u.moveStart("character",o?-offset:offset)}else{u.collapse(n)}t.setEndPoint(n?"StartToStart":"EndToStart",u);if(n){t.collapse(true)}}}var t,r=n.doc.body;if(e.start){if(e.start.ctrl){t=r.createControlRange();t.addElement(i(e.start.indexes));t.select()}else{t=r.createTextRange();s(true);s();t.select()}}};this.addRange=function(t){function y(e){var t,s,c,d,m;c=n.create("a");t=e?o:a;s=e?u:l;d=r.duplicate();if(t==p||t==p.documentElement){t=v;s=0}if(t.nodeType==3){t.parentNode.insertBefore(c,t);d.moveToElementText(c);d.moveStart("character",s);n.remove(c);r.setEndPoint(e?"StartToStart":"EndToEnd",d)}else{m=t.childNodes;if(m.length){if(s>=m.length){n.insertAfter(c,m[m.length-1])}else{t.insertBefore(c,m[s])}d.moveToElementText(c)}else{if(t.canHaveHTML){t.innerHTML="<span>﻿</span>";c=t.firstChild;d.moveToElementText(c);d.collapse(i)}}r.setEndPoint(e?"StartToStart":"EndToEnd",d);n.remove(c)}}var r,s,o,u,a,l,c,p=e.dom.doc,v=p.body,m,g;o=t.startContainer;u=t.startOffset;a=t.endContainer;l=t.endOffset;r=v.createTextRange();if(o==a&&o.nodeType==1){if(u==l&&!o.hasChildNodes()){if(o.canHaveHTML){c=o.previousSibling;if(c&&!c.hasChildNodes()&&n.isBlock(c)){c.innerHTML="﻿"}else{c=null}o.innerHTML="<span>﻿</span><span>﻿</span>";r.moveToElementText(o.lastChild);r.select();n.doc.selection.clear();o.innerHTML="";if(c){c.innerHTML=""}return}else{u=n.nodeIndex(o);o=o.parentNode}}if(u==l-1){try{g=o.childNodes[u];s=v.createControlRange();s.addElement(g);s.select();m=e.getRng();if(m.item&&g===m.item(0)){return}}catch(b){}}}y(true);y();r.select()};this.getRangeAt=o}tinymce.dom.TridentSelection=e})();(function(){function b(e,n,r,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=false;f=f[e];while(f){if(f[t]===r){l=i[f.sizset];break}if(f.nodeType===1&&!o){f[t]=r;f.sizset=u}if(f.nodeName.toLowerCase()===n){l=f;break}f=f[e]}i[u]=l}}}function w(e,n,r,i,s,o){for(var u=0,a=i.length;u<a;u++){var l=i[u];if(l){var c=false;l=l[e];while(l){if(l[t]===r){c=i[l.sizset];break}if(l.nodeType===1){if(!o){l[t]=r;l.sizset=u}if(typeof n!=="string"){if(l===n){c=true;break}}else{if(f.filter(n,[l]).length>0){c=l;break}}}l=l[e]}i[u]=c}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,t="sizcache",n=0,r=Object.prototype.toString,i=false,s=true,o=/\\/g,u=/\r\n/g,a=/\W/;[0,0].sort(function(){s=false;return 0});var f=function(t,n,i,s){i=i||[];n=n||document;var o=n;if(n.nodeType!==1&&n.nodeType!==9){return[]}if(!t||typeof t!=="string"){return i}var u,a,l,p,d,m,g,y,b=true,w=f.isXML(n),S=[],x=t;do{e.exec("");u=e.exec(x);if(u){x=u[3];S.push(u[1]);if(u[2]){p=u[3];break}}}while(u);if(S.length>1&&h.exec(t)){if(S.length===2&&c.relative[S[0]]){a=E(S[0]+S[1],n,s)}else{a=c.relative[S[0]]?[n]:f(S.shift(),n);while(S.length){t=S.shift();if(c.relative[t]){t+=S.shift()}a=E(t,a,s)}}}else{if(!s&&S.length>1&&n.nodeType===9&&!w&&c.match.ID.test(S[0])&&!c.match.ID.test(S[S.length-1])){d=f.find(S.shift(),n,w);n=d.expr?f.filter(d.expr,d.set)[0]:d.set[0]}if(n){d=s?{expr:S.pop(),set:v(s)}:f.find(S.pop(),S.length===1&&(S[0]==="~"||S[0]==="+")&&n.parentNode?n.parentNode:n,w);a=d.expr?f.filter(d.expr,d.set):d.set;if(S.length>0){l=v(a)}else{b=false}while(S.length){m=S.pop();g=m;if(!c.relative[m]){m=""}else{g=S.pop()}if(g==null){g=n}c.relative[m](l,g,w)}}else{l=S=[]}}if(!l){l=a}if(!l){f.error(m||t)}if(r.call(l)==="[object Array]"){if(!b){i.push.apply(i,l)}else{if(n&&n.nodeType===1){for(y=0;l[y]!=null;y++){if(l[y]&&(l[y]===true||l[y].nodeType===1&&f.contains(n,l[y]))){i.push(a[y])}}}else{for(y=0;l[y]!=null;y++){if(l[y]&&l[y].nodeType===1){i.push(a[y])}}}}}else{v(l,i)}if(p){f(p,o,i,s);f.uniqueSort(i)}return i};f.uniqueSort=function(e){if(g){i=s;e.sort(g);if(i){for(var t=1;t<e.length;t++){if(e[t]===e[t-1]){e.splice(t--,1)}}}}return e};f.matches=function(e,t){return f(e,null,null,t)};f.matchesSelector=function(e,t){return f(t,null,null,[e]).length>0};f.find=function(e,t,n){var r,i,s,u,a,f;if(!e){return[]}for(i=0,s=c.order.length;i<s;i++){a=c.order[i];if(u=c.leftMatch[a].exec(e)){f=u[1];u.splice(1,1);if(f.substr(f.length-1)!=="\\"){u[1]=(u[1]||"").replace(o,"");r=c.find[a](u,t,n);if(r!=null){e=e.replace(c.match[a],"");break}}}}if(!r){r=typeof t.getElementsByTagName!=="undefined"?t.getElementsByTagName("*"):[]}return{set:r,expr:e}};f.filter=function(e,t,n,r){var i,s,o,u,a,l,h,p,d,v=e,m=[],g=t,y=t&&t[0]&&f.isXML(t[0]);while(e&&t.length){for(o in c.filter){if((i=c.leftMatch[o].exec(e))!=null&&i[2]){l=c.filter[o];h=i[1];s=false;i.splice(1,1);if(h.substr(h.length-1)==="\\"){continue}if(g===m){m=[]}if(c.preFilter[o]){i=c.preFilter[o](i,g,n,m,r,y);if(!i){s=u=true}else{if(i===true){continue}}}if(i){for(p=0;(a=g[p])!=null;p++){if(a){u=l(a,i,p,g);d=r^u;if(n&&u!=null){if(d){s=true}else{g[p]=false}}else{if(d){m.push(a);s=true}}}}}if(u!==undefined){if(!n){g=m}e=e.replace(c.match[o],"");if(!s){return[]}break}}}if(e===v){if(s==null){f.error(e)}else{break}}v=e}return g};f.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var l=f.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9||r===11){if(typeof e.textContent==="string"){return e.textContent}else{if(typeof e.innerText==="string"){return e.innerText.replace(u,"")}else{for(e=e.firstChild;e;e=e.nextSibling){i+=l(e)}}}}else{if(r===3||r===4){return e.nodeValue}}}else{for(t=0;n=e[t];t++){if(n.nodeType!==8){i+=l(n)}}}return i};var c=f.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t==="string",r=n&&!a.test(t),i=n&&!r;if(r){t=t.toLowerCase()}for(var s=0,o=e.length,u;s<o;s++){if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1){}e[s]=i||u&&u.nodeName.toLowerCase()===t?u||false:u===t}}if(i){f.filter(t,e,true)}},">":function(e,t){var n,r=typeof t==="string",i=0,s=e.length;if(r&&!a.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:false}}}else{for(;i<s;i++){n=e[i];if(n){e[i]=r?n.parentNode:n.parentNode===t}}if(r){f.filter(t,e,true)}}},"":function(e,t,r){var i,s=n++,o=w;if(typeof t==="string"&&!a.test(t)){t=t.toLowerCase();i=t;o=b}o("parentNode",t,s,e,i,r)},"~":function(e,t,r){var i,s=n++,o=w;if(typeof t==="string"&&!a.test(t)){t=t.toLowerCase();i=t;o=b}o("previousSibling",t,s,e,i,r)}},find:{ID:function(e,t,n){if(typeof t.getElementById!=="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!=="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++){if(r[i].getAttribute("name")===e[1]){n.push(r[i])}}return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(o,"")+" ";if(s){return e}for(var u=0,a;(a=t[u])!=null;u++){if(a){if(i^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)){if(!n){r.push(a)}}else{if(n){t[u]=false}}}}return false},ID:function(e){return e[1].replace(o,"")},TAG:function(e,t){return e[1].replace(o,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){f.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0;e[3]=t[3]-0}else{if(e[2]){f.error(e[0])}}e[0]=n++;return e},ATTR:function(e,t,n,r,i,s){var u=e[1]=e[1].replace(o,"");if(!s&&c.attrMap[u]){e[1]=c.attrMap[u]}e[4]=(e[4]||e[5]||"").replace(o,"");if(e[2]==="~="){e[4]=" "+e[4]+" "}return e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if((e.exec(t[3])||"").length>1||/^\w/.test(t[3])){t[3]=f(t[3],null,null,n)}else{var o=f.filter(t[3],n,r,true^s);if(!r){i.push.apply(i,o)}return false}}else{if(c.match.POS.test(t[0])||c.match.CHILD.test(t[0])){return true}}return t},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!f(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=c.filters[i];if(s){return s(e,n,t,r)}else{if(i==="contains"){return(e.textContent||e.innerText||l([e])||"").indexOf(t[3])>=0}else{if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++){if(o[u]===e){return false}}return true}else{f.error(i)}}}},CHILD:function(e,n){var r,i,s,o,u,a,f,l=n[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling){if(c.nodeType===1){return false}}if(l==="first"){return true}c=e;case"last":while(c=c.nextSibling){if(c.nodeType===1){return false}}return true;case"nth":r=n[2];i=n[3];if(r===1&&i===0){return true}s=n[0];o=e.parentNode;if(o&&(o[t]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling){if(c.nodeType===1){c.nodeIndex=++a}}o[t]=s}f=e.nodeIndex-i;if(r===0){return f===0}else{return f%r===0&&f/r>=0}}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=f.attr?f.attr(e,n):c.attrHandle[n]?c.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&f.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:!o?i&&r!==false:s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":false},POS:function(e,t,n,r){var i=t[2],s=c.setFilters[i];if(s){return s(e,n,t,r)}}}};var h=c.match.POS,p=function(e,t){return"\\"+(t-0+1)};for(var d in c.match){c.match[d]=new RegExp(c.match[d].source+/(?![^\[]*\])(?![^\(]*\))/.source);c.leftMatch[d]=new RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[d].source.replace(/\\(\d+)/g,p))}c.match.globalPOS=h;var v=function(e,t){e=Array.prototype.slice.call(e,0);if(t){t.push.apply(t,e);return t}return e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(m){v=function(e,t){var n=0,i=t||[];if(r.call(e)==="[object Array]"){Array.prototype.push.apply(i,e)}else{if(typeof e.length==="number"){for(var s=e.length;n<s;n++){i.push(e[n])}}else{for(;e[n];n++){i.push(e[n])}}}return i}}var g,y;if(document.documentElement.compareDocumentPosition){g=function(e,t){if(e===t){i=true;return 0}if(!e.compareDocumentPosition||!t.compareDocumentPosition){return e.compareDocumentPosition?-1:1}return e.compareDocumentPosition(t)&4?-1:1}}else{g=function(e,t){if(e===t){i=true;return 0}else{if(e.sourceIndex&&t.sourceIndex){return e.sourceIndex-t.sourceIndex}}var n,r,s=[],o=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a){return y(e,t)}else{if(!u){return-1}else{if(!a){return 1}}}while(f){s.unshift(f);f=f.parentNode}f=a;while(f){o.unshift(f);f=f.parentNode}n=s.length;r=o.length;for(var l=0;l<n&&l<r;l++){if(s[l]!==o[l]){return y(s[l],o[l])}}return l===n?y(e,o[l],-1):y(s[l],t,1)};y=function(e,t,n){if(e===t){return n}var r=e.nextSibling;while(r){if(r===t){return-1}r=r.nextSibling}return 1}}(function(){var e=document.createElement("div"),t="script"+(new Date).getTime(),n=document.documentElement;e.innerHTML="<a name='"+t+"'/>";n.insertBefore(e,n.firstChild);if(document.getElementById(t)){c.find.ID=function(e,t,n){if(typeof t.getElementById!=="undefined"&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||typeof r.getAttributeNode!=="undefined"&&r.getAttributeNode("id").nodeValue===e[1]?[r]:undefined:[]}};c.filter.ID=function(e,t){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}}n.removeChild(e);n=e=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){c.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++){if(n[i].nodeType===1){r.push(n[i])}}n=r}return n}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){c.attrHandle.href=function(e){return e.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=f,t=document.createElement("div"),n="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0){return}f=function(t,r,i,s){r=r||document;if(!s&&!f.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(r.nodeType===1||r.nodeType===9)){if(o[1]){return v(r.getElementsByTagName(t),i)}else{if(o[2]&&c.find.CLASS&&r.getElementsByClassName){return v(r.getElementsByClassName(o[2]),i)}}}if(r.nodeType===9){if(t==="body"&&r.body){return v([r.body],i)}else{if(o&&o[3]){var u=r.getElementById(o[3]);if(u&&u.parentNode){if(u.id===o[3]){return v([u],i)}}else{return v([],i)}}}try{return v(r.querySelectorAll(t),i)}catch(a){}}else{if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var l=r,h=r.getAttribute("id"),p=h||n,d=r.parentNode,m=/^\s*[+~]/.test(t);if(!h){r.setAttribute("id",p)}else{p=p.replace(/'/g,"\\$&")}if(m&&d){r=r.parentNode}try{if(!m||d){return v(r.querySelectorAll("[id='"+p+"'] "+t),i)}}catch(g){}finally{if(!h){l.removeAttribute("id")}}}}}return e(t,r,i,s)};for(var r in e){f[r]=e[r]}t=null})()}(function(){var e=document.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(document.createElement("div"),"div"),r=false;try{t.call(document.documentElement,"[test!='']:sizzle")}catch(i){r=true}f.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!f.isXML(e)){try{if(r||!c.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&e.document.nodeType!==11){return s}}}catch(o){}}return f(i,null,null,[e]).length>0}}})();(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}c.order.splice(1,0,"CLASS");c.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!=="undefined"&&!n){return t.getElementsByClassName(e[1])}};e=null})();if(document.documentElement.contains){f.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):true)}}else{if(document.documentElement.compareDocumentPosition){f.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}}else{f.contains=function(){return false}}}f.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":false};var E=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=c.match.PSEUDO.exec(e)){s+=r[0];e=e.replace(c.match.PSEUDO,"")}e=c.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++){f(e,o[u],i,n)}return f.filter(s,i)};window.tinymce.dom.Sizzle=f})();(function(e){e.dom.Element=function(t,n){var r=this,i,s;r.settings=n=n||{};r.id=t;r.dom=i=n.dom||e.DOM;if(!e.isIE){s=i.get(r.id)}e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n=[t],s;for(s=0;s<arguments.length;s++){n.push(arguments[s])}n=i[e].apply(i,n);r.update(e);return n}});e.extend(r,{on:function(t,n,i){return e.dom.Event.add(r.id,t,n,i)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=i.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var s;if(e.isIE6&&n.blocker){t=t||"";if(t.indexOf("get")===0||t.indexOf("has")===0||t.indexOf("is")===0){return}if(t=="remove"){i.remove(r.blocker);return}if(!r.blocker){r.blocker=i.uniqueId();s=i.add(n.container||i.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});i.setStyle(s,"opacity",0)}else{s=i.get(r.blocker)}i.setStyles(s,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(e){function t(e){return e.replace(/[\n\r]+/g,"")}var n=e.is,r=e.isIE,i=e.each,s=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,r,s){var o=this;o.dom=t;o.win=n;o.serializer=r;o.editor=s;i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){o[t]=new e.util.Dispatcher(o)});if(!o.win.getSelection){o.tridentSel=new e.dom.TridentSelection(o)}if(e.isIE&&t.boxModel){this._fixIESelection()}e.addUnload(o.destroy,o)},setCursorLocation:function(e,t){var n=this;var r=n.dom.createRng();r.setStart(e,t);r.setEnd(e,t);n.setRng(r);n.collapse(false)},getContent:function(e){var t=this,r=t.getRng(),i=t.dom.create("body"),s=t.getSel(),o,u,a;e=e||{};o=u="";e.get=true;e.format=e.format||"html";e.forced_root_block="";t.onBeforeGetContent.dispatch(t,e);if(e.format=="text"){return t.isCollapsed()?"":r.text||(s.toString?s.toString():"")}if(r.cloneContents){a=r.cloneContents();if(a){i.appendChild(a)}}else{if(n(r.item)||n(r.htmlText)){i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText);i.removeChild(i.firstChild)}else{i.innerHTML=r.toString()}}if(/^\s/.test(i.innerHTML)){o=" "}if(/\s+$/.test(i.innerHTML)){u=" "}e.getInner=true;e.content=t.isCollapsed()?"":o+t.serializer.serialize(i,e)+u;t.onGetContent.dispatch(t,e);return e.content},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;t=t||{format:"html"};t.set=true;e=t.content=e;if(!t.no_events){n.onBeforeSetContent.dispatch(n,t)}e=t.content;if(r.insertNode){e+='<span id="__caret">_</span>';if(r.startContainer==s&&r.endContainer==s){s.body.innerHTML=e}else{r.deleteContents();if(s.body.childNodes.length===0){s.body.innerHTML=e}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(e))}else{o=s.createDocumentFragment();u=s.createElement("div");o.appendChild(u);u.outerHTML=e;r.insertNode(o)}}}i=n.dom.get("__caret");r=s.createRange();r.setStartBefore(i);r.setEndBefore(i);n.setRng(r);n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else{if(r.item){s.execCommand("Delete",false,null);r=n.getRng()}if(/^\s+/.test(e)){r.pasteHTML('<span id="__mce_tmp">_</span>'+e);n.dom.remove("__mce_tmp")}else{r.pasteHTML(e)}}if(!t.no_events){n.onSetContent.dispatch(n,t)}},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item){return t.item(0)}i=t.duplicate();i.collapse(1);n=i.parentElement();if(n.ownerDocument!==e.dom.doc){n=e.dom.getRoot()}r=s=t.parentElement();while(s=s.parentNode){if(s==n){n=r;break}}return n}else{n=t.startContainer;if(n.nodeType==1&&n.hasChildNodes()){n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]}if(n&&n.nodeType==3){return n.parentNode}return n}},getEnd:function(){var e=this,t=e.getRng(),n,r;if(t.duplicate||t.item){if(t.item){return t.item(0)}t=t.duplicate();t.collapse(0);n=t.parentElement();if(n.ownerDocument!==e.dom.doc){n=e.dom.getRoot()}if(n&&n.nodeName=="BODY"){return n.lastChild||n}return n}else{n=t.endContainer;r=t.endOffset;if(n.nodeType==1&&n.hasChildNodes()){n=n.childNodes[r>0?r-1:r]}if(n&&n.nodeType==3){return n.parentNode}return n}},getBookmark:function(e,t){function d(e,t){var n=0;i(r.select(e),function(e,r){if(e==t){n=r}});return n}function v(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"];r=e[s+"Offset"];if(n.nodeType==1&&n.nodeName=="TR"){i=n.childNodes;n=i[Math.min(t?r:r-1,i.length-1)];if(n){r=t?0:n.childNodes.length;e["set"+(t?"Start":"End")](n,r)}}}t(true);t();return e}function m(){function o(e,r){var s=e[r?"startContainer":"endContainer"],o=e[r?"startOffset":"endOffset"],u=[],a,f,l=0;if(s.nodeType==3){if(t){for(a=s.previousSibling;a&&a.nodeType==3;a=a.previousSibling){o+=a.nodeValue.length}}u.push(o)}else{f=s.childNodes;if(o>=f.length&&f.length){l=1;o=Math.max(0,f.length-1)}u.push(n.dom.nodeIndex(f[o],t)+l)}for(;s&&s!=i;s=s.parentNode){u.push(n.dom.nodeIndex(s,t))}return u}var e=n.getRng(true),i=r.getRoot(),s={};s.start=o(e,true);if(!n.isCollapsed()){s.end=o(e)}return s}var n=this,r=n.dom,s,o,u,a,f,l,c,h="﻿",p;if(e==2){if(n.tridentSel){return n.tridentSel.getBookmark(e)}return m()}if(e){return{rng:n.getRng()}}s=n.getRng();u=r.uniqueId();a=tinyMCE.activeEditor.selection.isCollapsed();p="overflow:hidden;line-height:0px";if(s.duplicate||s.item){if(!s.item){o=s.duplicate();try{s.collapse();s.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+p+'">'+h+"</span>");if(!a){o.collapse(false);s.moveToElementText(o.parentElement());if(s.compareEndPoints("StartToEnd",o)===0){o.move("character",-1)}o.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+p+'">'+h+"</span>")}}catch(g){return null}}else{l=s.item(0);f=l.nodeName;return{name:f,index:d(f,l)}}}else{l=n.getNode();f=l.nodeName;if(f=="IMG"){return{name:f,index:d(f,l)}}o=v(s.cloneRange());if(!a){o.collapse(false);o.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:p},h))}s=v(s);s.collapse(true);s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:p},h))}n.moveToBookmark({id:u,keep:1});return{id:u}},moveToBookmark:function(t){function v(e){var n=t[e?"start":"end"],r,i,s,o;if(n){s=n[0];for(i=f,r=n.length-1;r>=1;r--){o=i.childNodes;if(n[r]>o.length-1){return}i=o[n[r]]}if(i.nodeType===3){s=Math.min(n[0],i.nodeValue.length)}if(i.nodeType===1){s=Math.min(n[0],i.childNodes.length)}if(e){a.setStart(i,s)}else{a.setEnd(i,s)}}return true}function m(n){var r=s.get(t.id+"_"+n),o,u,a,f,v=t.keep;if(r){o=r.parentNode;if(n=="start"){if(!v){u=s.nodeIndex(r)}else{o=r.firstChild;u=1}l=c=o;h=p=u}else{if(!v){u=s.nodeIndex(r)}else{o=r.firstChild;u=1}c=o;p=u}if(!v){f=r.previousSibling;a=r.nextSibling;i(e.grep(r.childNodes),function(e){if(e.nodeType==3){e.nodeValue=e.nodeValue.replace(/\uFEFF/g,"")}});while(r=s.get(t.id+"_"+n)){s.remove(r,1)}if(f&&a&&f.nodeType==a.nodeType&&f.nodeType==3&&!e.isOpera){u=f.nodeValue.length;f.appendData(a.nodeValue);s.remove(a);if(n=="start"){l=c=f;h=p=u}else{c=f;p=u}}}}}function g(e){if(s.isBlock(e)&&!e.innerHTML&&!r){e.innerHTML='<br data-mce-bogus="1" />'}return e}var n=this,s=n.dom,o,u,a,f,l,c,h,p;if(t){if(t.start){a=s.createRng();f=s.getRoot();if(n.tridentSel){return n.tridentSel.moveToBookmark(t)}if(v(true)&&v()){n.setRng(a)}}else{if(t.id){m("start");m("end");if(l){a=s.createRng();a.setStart(g(l),h);a.setEnd(g(c),p);n.setRng(a)}}else{if(t.name){n.select(s.select(t.name)[t.index])}else{if(t.rng){n.setRng(t.rng)}}}}}},select:function(t,n){function f(t,n){var r=new s(t,t);do{if(t.nodeType==3&&e.trim(t.nodeValue).length!==0){if(n){o.setStart(t,0)}else{o.setEnd(t,t.nodeValue.length)}return}if(t.nodeName=="BR"){if(n){o.setStartBefore(t)}else{o.setEndBefore(t)}return}}while(t=n?r.next():r.prev())}var r=this,i=r.dom,o=i.createRng(),u;if(t){u=i.nodeIndex(t);o.setStart(t.parentNode,u);o.setEnd(t.parentNode,u+1);if(n){f(t,1);f(t)}r.setRng(o)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();if(!t||t.item){return false}if(t.compareEndPoints){return t.compareEndPoints("StartToEnd",t)===0}return!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;if(n.item){r=n.item(0);n=t.win.document.body.createTextRange();n.moveToElementText(r)}n.collapse(!!e);t.setRng(n)},getSel:function(){var e=this,t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(t){var n=this,r,i,s,o=n.win.document;if(t&&n.tridentSel){return n.tridentSel.getRangeAt(0)}try{if(r=n.getSel()){i=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():o.createRange()}}catch(u){}if(e.isIE&&i&&i.setStart&&o.selection.createRange().item){s=o.selection.createRange().item(0);i=o.createRange();i.setStartBefore(s);i.setEndAfter(s)}if(!i){i=o.createRange?o.createRange():o.body.createTextRange()}if(i.setStart&&i.startContainer.nodeType===9&&i.collapsed){s=n.dom.getRoot();i.setStart(s,0);i.setEnd(s,0)}if(n.selectedRange&&n.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,n.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,n.selectedRange)===0){i=n.explicitRange}else{n.selectedRange=null;n.explicitRange=null}}return i},setRng:function(e,t){var n,r=this;if(!r.tridentSel){n=r.getSel();if(n){r.explicitRange=e;try{n.removeAllRanges()}catch(i){}n.addRange(e);if(t===false&&n.extend){n.collapse(e.endContainer,e.endOffset);n.extend(e.startContainer,e.startOffset)}r.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}}else{if(e.cloneRange){try{r.tridentSel.addRange(e);return}catch(i){}}try{e.select()}catch(i){}}},setNode:function(e){var t=this;t.setContent(t.dom.getOuterHTML(e));return e},getNode:function(){function o(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0){e=t?e.nextSibling:e.previousSibling}return e||n}var e=this,t=e.getRng(),n=e.getSel(),r,i=t.startContainer,s=t.endContainer;if(!t){return e.dom.getRoot()}if(t.setStart){r=t.commonAncestorContainer;if(!t.collapsed){if(t.startContainer==t.endContainer){if(t.endOffset-t.startOffset<2){if(t.startContainer.hasChildNodes()){r=t.startContainer.childNodes[t.startOffset]}}}if(i.nodeType===3&&s.nodeType===3){if(i.length===t.startOffset){i=o(i.nextSibling,true)}else{i=i.parentNode}if(t.endOffset===0){s=o(s.previousSibling,false)}else{s=s.parentNode}if(i&&i===s){return i}}}if(r&&r.nodeType==3){return r.parentNode}return r}return t.item?t.item(0):t.parentElement()},getSelectedBlocks:function(e,t){var n=this,r=n.dom,i,o,u,f=[];i=r.getParent(e||n.getStart(),r.isBlock);o=r.getParent(t||n.getEnd(),r.isBlock);if(i){f.push(i)}if(i&&o&&i!=o){u=i;var l=new s(i,r.getRoot());while((u=l.next())&&u!=o){if(r.isBlock(u)){f.push(u)}}}if(o&&i!=o){f.push(o)}return f},isForward:function(){var e=this.dom,t=this.getSel(),n,r;if(!t||t.anchorNode==null||t.focusNode==null){return true}n=e.createRng();n.setStart(t.anchorNode,t.anchorOffset);n.collapse(true);r=e.createRng();r.setStart(t.focusNode,t.focusOffset);r.collapse(true);return n.compareBoundaryPoints(n.START_TO_START,r)<=0},normalize:function(){function f(e){function b(e,t){var n=new s(e,c.getParent(e.parentNode,c.isBlock)||p);while(e=n[t?"prev":"next"]()){if(e.nodeName==="BR"){return true}}}function w(e,t){var n,f;t=t||o;n=new s(t,c.getParent(t.parentNode,c.isBlock)||p);while(d=n[e?"prev":"next"]()){if(d.nodeType===3&&d.nodeValue.length>0){o=d;u=e?d.nodeValue.length:0;r=true;return}if(c.isBlock(d)||v[d.nodeName.toLowerCase()]){return}f=d}if(i&&f){o=f;r=true;u=0}}var o,u,f,c=t.dom,p=c.getRoot(),d,v,y;o=n[(e?"start":"end")+"Container"];u=n[(e?"start":"end")+"Offset"];v=c.schema.getNonEmptyElements();if(o.nodeType===9){o=c.getRoot();u=0}if(o===p){if(e){d=o.childNodes[u>0?u-1:0];if(d){y=d.nodeName.toLowerCase();if(v[d.nodeName]||d.nodeName=="TABLE"){return}}}if(o.hasChildNodes()){o=o.childNodes[Math.min(!e&&u>0?u-1:u,o.childNodes.length-1)];u=0;if(o.hasChildNodes()&&!/TABLE/.test(o.nodeName)){d=o;f=new s(o,p);do{if(d.nodeType===3&&d.nodeValue.length>0){u=e?0:d.nodeValue.length;o=d;r=true;break}if(v[d.nodeName.toLowerCase()]){u=c.nodeIndex(d);o=d.parentNode;if(d.nodeName=="IMG"&&!e){u++}r=true;break}}while(d=e?f.next():f.prev())}}}if(i){if(o.nodeType===3&&u===0){w(true)}if(o.nodeType===1){d=o.childNodes[u];if(d&&d.nodeName==="BR"&&!b(d)&&!b(d,true)){w(true,o.childNodes[u])}}}if(e&&!i&&o.nodeType===3&&u===o.nodeValue.length){w(false)}if(r){n["set"+(e?"Start":"End")](o,u)}}var t=this,n,r,i,o,u;if(e.isIE){return}n=t.getRng();i=n.collapsed;f(true);if(!i){f()}if(r){if(i){n.collapse(true)}t.setRng(n,t.isForward())}},selectorChanged:function(e,t){var n=this,r;if(!n.selectorChangedData){n.selectorChangedData={};r={};n.editor.onNodeChange.addToTop(function(e,t,s){var o=n.dom,u=o.getParents(s,null,o.getRoot()),a={};i(n.selectorChangedData,function(e,t){i(u,function(n){if(o.is(n,t)){if(!r[t]){i(e,function(e){e(true,{node:n,selector:t,parents:u})});r[t]=e}a[t]=e;return false}})});i(r,function(e,t){if(!a[t]){delete r[t];i(e,function(e){e(false,{node:s,selector:t,parents:u})})}})})}if(!n.selectorChangedData[e]){n.selectorChangedData[e]=[]}n.selectorChangedData[e].push(t);return n},destroy:function(t){var n=this;n.win=null;if(!t){e.removeUnload(n.destroy)}},_fixIESelection:function(){function o(e,t){var r=n.createTextRange();try{r.moveToPoint(e,t)}catch(i){r=null}return r}function u(e){var t;if(e.button){t=o(e.x,e.y);if(t){if(t.compareEndPoints("StartToStart",i)>0){t.setEndPoint("StartToStart",i)}else{t.setEndPoint("EndToEnd",i)}t.select()}}else{a()}}function a(){var n=t.selection.createRange();if(i&&!n.item&&n.compareEndPoints("StartToEnd",n)===0){i.select()}e.unbind(t,"mouseup",a);e.unbind(t,"mousemove",u);i=r=0}var e=this.dom,t=e.doc,n=t.body,r,i,s;t.documentElement.unselectable=true;e.bind(t,["mousedown","contextmenu"],function(n){if(n.target.nodeName==="HTML"){if(r){a()}s=t.documentElement;if(s.scrollHeight>s.clientHeight){return}r=1;i=o(n.x,n.y);if(i){e.bind(t,"mouseup",a);e.bind(t,"mousemove",u);e.win.focus();i.select()}}})}})})(tinymce);(function(e){e.dom.Serializer=function(t,n,r){var i,s,o=e.isIE,u=e.each,f;if(!t.apply_source_formatting){t.indent=false}n=n||e.DOM;r=r||new e.html.Schema(t);t.entity_encoding=t.entity_encoding||"named";t.remove_trailing_brs="remove_trailing_brs"in t?t.remove_trailing_brs:true;i=new e.util.Dispatcher(self);s=new e.util.Dispatcher(self);f=new e.html.DomParser(t,r);f.addAttributeFilter("src,href,style",function(e,r){var i=e.length,s,o,u="data-mce-"+r,a=t.url_converter,f=t.url_converter_scope,l;while(i--){s=e[i];o=s.attributes.map[u];if(o!==l){s.attr(r,o.length>0?o:null);s.attr(u,null)}else{o=s.attributes.map[r];if(r==="style"){o=n.serializeStyle(n.parseStyle(o),s.name)}else{if(a){o=a.call(f,o,r,s.name)}}s.attr(r,o.length>0?o:null)}}});f.addAttributeFilter("class",function(e,t){var n=e.length,r,i;while(n--){r=e[n];i=r.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,"");r.attr("class",i.length>0?i:null)}});f.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--){i=e[r];if(i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup){i.remove()}}});f.addAttributeFilter("data-mce-expando",function(e,t,n){var r=e.length;while(r--){e[r].attr(t,null)}});f.addNodeFilter("noscript",function(t){var n=t.length,r;while(n--){r=t[n].firstChild;if(r){r.value=e.html.Entities.decode(r.value)}}});f.addNodeFilter("script,style",function(e,t){function s(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var n=e.length,r,i;while(n--){r=e[n];i=r.firstChild?r.firstChild.value:"";if(t==="script"){r.attr("type",(r.attr("type")||"text/javascript").replace(/^mce\-/,""));if(i.length>0){r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>"}}else{if(i.length>0){r.firstChild.value="<!--\n"+s(i)+"\n-->"}}}});f.addNodeFilter("#comment",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.value.indexOf("[CDATA[")===0){r.name="#cdata";r.type=4;r.value=r.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(r.value.indexOf("mce:protected ")===0){r.name="#text";r.type=3;r.raw=true;r.value=unescape(r.value).substr(14)}}}});f.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--){r=e[n];if(r.type===7){r.remove()}else{if(r.type===1){if(t==="input"&&!("type"in r.attributes.map)){r.attr("type","text")}}}}});if(t.fix_list_elements){f.addNodeFilter("ul,ol",function(e,t){var n=e.length,r,i;while(n--){r=e[n];i=r.parent;if(i.name==="ul"||i.name==="ol"){if(r.prev&&r.prev.name==="li"){r.prev.append(r)}}}})}f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){var n=e.length;while(n--){e[n].attr(t,null)}});return{schema:r,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,onPreProcess:i,onPostProcess:s,serialize:function(l,p){var v,m,y,w,E;if(o&&n.select("script,style,select,map").length>0){E=l.innerHTML;l=l.cloneNode(false);n.setHTML(l,E)}else{l=l.cloneNode(true)}v=l.ownerDocument.implementation;if(v.createHTMLDocument){m=v.createHTMLDocument("");u(l.nodeName=="BODY"?l.childNodes:[l],function(e){m.body.appendChild(m.importNode(e,true))});if(l.nodeName!="BODY"){l=m.body.firstChild}else{l=m.body}y=n.doc;n.doc=m}p=p||{};p.format=p.format||"html";if(!p.no_events){p.node=l;i.dispatch(self,p)}w=new e.html.Serializer(t,r);p.content=w.serialize(f.parse(e.trim(p.getInner?l.innerHTML:n.getOuterHTML(l)),p));if(!p.cleanup){p.content=p.content.replace(/\uFEFF/g,"")}if(!p.no_events){s.dispatch(self,p)}if(y){n.doc=y}p.node=null;return p.content},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)}}}})(tinymce);(function(e){e.dom.ScriptLoader=function(t){function h(t,n){function l(){i.remove(f);if(s){s.onreadystatechange=s.onload=s=null}n()}function c(){if(typeof console!=="undefined"&&console.log){console.log("Failed to load: "+t)}}var r=this,i=e.DOM,s,o,u,f;f=i.uniqueId();if(e.isIE6){o=new e.util.URI(t);u=location;if(o.host==u.hostname&&o.port==u.port&&o.protocol+":"==u.protocol&&o.protocol.toLowerCase()!="file"){e.util.XHR.send({url:e._addVer(o.getURI()),success:function(e){var t=i.create("script",{type:"text/javascript"});t.text=e;document.getElementsByTagName("head")[0].appendChild(t);i.remove(t);l()},error:c});return}}s=document.createElement("script");s.id=f;s.type="text/javascript";s.src=e._addVer(t);if(!e.isIE){s.onload=l}s.onerror=c;if(!e.isOpera){s.onreadystatechange=function(){var e=s.readyState;if(e=="complete"||e=="loaded"){l()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n=0,r=1,i=2,s={},o=[],u={},f=[],l=0,c;this.isDone=function(e){return s[e]==i};this.markDone=function(e){s[e]=i};this.add=this.load=function(e,t,r){var i,a=s[e];if(a==c){o.push(e);s[e]=n}if(t){if(!u[e]){u[e]=[]}u[e].push({func:t,scope:r||this})}};this.loadQueue=function(e,t){this.loadScripts(o,e,t)};this.loadScripts=function(t,n,o){function v(t){e.each(u[t],function(e){e.func.call(e.scope)});u[t]=c}var p;f.push({func:n,scope:o||this});p=function(){var n=e.grep(t);t.length=0;e.each(n,function(e){if(s[e]==i){v(e);return}if(s[e]!=r){s[e]=r;l++;h(e,function(){s[e]=i;l--;v(e);p()})}});if(!l){e.each(f,function(e){e.func.call(e.scope)});f.length=0}};p()}};e.ScriptLoader=new e.dom.ScriptLoader})(tinymce);(function(e){e.dom.RangeUtils=function(t){var n="﻿";this.walk=function(n,r){function g(e){var t;t=e[0];if(t.nodeType===3&&t===i&&s>=t.nodeValue.length){e.splice(0,1)}t=e[e.length-1];if(u===0&&e.length>0&&t===o&&t.nodeType===3){e.splice(e.length-1,1)}return e}function y(e,t,n){var r=[];for(;e&&e!=n;e=e[t]){r.push(e)}return r}function b(e,t){do{if(e.parentNode==t){return e}e=e.parentNode}while(e)}function w(e,t,n){var i=n?"nextSibling":"previousSibling";for(p=e,d=p.parentNode;p&&p!=t;p=d){d=p.parentNode;v=y(p==e?p:p[i],i);if(v.length){if(!n){v.reverse()}r(g(v))}}}var i=n.startContainer,s=n.startOffset,o=n.endContainer,u=n.endOffset,f,l,h,p,d,v,m;m=t.select("td.mceSelected,th.mceSelected");if(m.length>0){e.each(m,function(e){r([e])});return}if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[s]}if(o.nodeType==1&&o.hasChildNodes()){o=o.childNodes[Math.min(u-1,o.childNodes.length-1)]}if(i==o){return r(g([i]))}f=t.findCommonAncestor(i,o);for(p=i;p;p=p.parentNode){if(p===o){return w(i,f,true)}if(p===f){break}}for(p=o;p;p=p.parentNode){if(p===i){return w(o,f)}if(p===f){break}}l=b(i,f)||i;h=b(o,f)||o;w(i,l,true);v=y(l==i?l:l.nextSibling,"nextSibling",h==o?h.nextSibling:h);if(v.length){r(g(v))}w(o,h)};this.split=function(e){function s(e,t){return e.splitText(t)}var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;if(t==r&&t.nodeType==3){if(n>0&&n<t.nodeValue.length){r=s(t,n);t=r.previousSibling;if(i>n){i=i-n;t=r=s(r,i).previousSibling;i=r.nodeValue.length;n=0}else{i=0}}}else{if(t.nodeType==3&&n>0&&n<t.nodeValue.length){t=s(t,n);n=0}if(r.nodeType==3&&i>0&&i<r.nodeValue.length){r=s(r,i).previousSibling;i=r.nodeValue.length}}return{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}};e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(e.item||e.duplicate){if(e.item&&t.item&&e.item(0)===t.item(0)){return true}if(e.isEqual&&t.isEqual&&t.isEqual(e)){return true}}else{return e.startContainer==t.startContainer&&e.startOffset==t.startOffset}}return false}})(tinymce);(function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(r,i){var s=this,o=r.root,u=r.items,f=r.enableUpDown,l=r.enableLeftRight||!r.enableUpDown,h=r.excludeFromTabOrder,p,d,v,m,g;i=i||e.DOM;p=function(e){g=e.target.id};d=function(e){i.setAttrib(e.target.id,"tabindex","-1")};m=function(e){var t=i.get(g);i.setAttrib(t,"tabindex","0");t.focus()};s.focus=function(){i.get(g).focus()};s.destroy=function(){n(u,function(e){var t=i.get(e.id);i.unbind(t,"focus",p);i.unbind(t,"blur",d)});var e=i.get(o);i.unbind(e,"focus",m);i.unbind(e,"keydown",v);u=i=o=s.focus=p=d=v=m=null;s.destroy=function(){}};s.moveFocus=function(e,o){var f=-1,l=s.controls,h;if(!g){return}n(u,function(e,t){if(e.id===g){f=t;return false}});f+=e;if(f<0){f=u.length-1}else{if(f>=u.length){f=0}}h=u[f];i.setAttrib(g,"tabindex","-1");i.setAttrib(h.id,"tabindex","0");i.get(h.id).focus();if(r.actOnFocus){r.onAction(h.id)}if(o){t.cancel(o)}};v=function(e){var n=37,i=39,o=38,u=40,c=27,h=14,p=13,d=32;switch(e.keyCode){case n:if(l){s.moveFocus(-1)}break;case i:if(l){s.moveFocus(1)}break;case o:if(f){s.moveFocus(-1)}break;case u:if(f){s.moveFocus(1)}break;case c:if(r.onCancel){r.onCancel();t.cancel(e)}break;case h:case p:case d:if(r.onAction){r.onAction(g);t.cancel(e)}break}};n(u,function(e,t){var n,r;if(!e.id){e.id=i.uniqueId("_mce_item_")}r=i.get(e.id);if(h){i.bind(r,"blur",d);n="-1"}else{n=t===0?"0":"-1"}r.setAttribute("tabindex",n);i.bind(r,"focus",p)});if(u[0]){g=u[0].id}i.setAttrib(o,"tabindex","-1");var y=i.get(o);i.bind(y,"focus",m);i.bind(y,"keydown",v)}})})(tinymce);(function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,r){this.id=t;this.settings=n=n||{};this.rendered=false;this.onRender=new e.util.Dispatcher(this);this.classPrefix="";this.scope=n.scope||this;this.disabled=0;this.active=0;this.editor=r},setAriaProperty:function(e,n){var r=t.get(this.id+"_aria")||t.get(this.id);if(r){t.setAttrib(r,"aria-"+e,!!n)}},focus:function(){t.get(this.id).focus()},setDisabled:function(e){if(e!=this.disabled){this.setAriaProperty("disabled",e);this.setState("Disabled",e);this.setState("Enabled",!e);this.disabled=e}},isDisabled:function(){return this.disabled},setActive:function(e){if(e!=this.active){this.setState("Active",e);this.active=e;this.setAriaProperty("pressed",e)}},isActive:function(){return this.active},setState:function(e,n){var r=t.get(this.id);e=this.classPrefix+e;if(n){t.addClass(r,e)}else{t.removeClass(r,e)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e=this,t;if(n(e.disabled)){t=e.disabled;e.disabled=-1;e.setDisabled(t)}if(n(e.active)){t=e.active;e.active=-1;e.setActive(t)}},remove:function(){t.remove(this.id);this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n);this.controls=[];this.lookup={}},add:function(e){this.lookup[e.id]=e;this.controls.push(e);return e},get:function(e){return this.lookup[e]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t);this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e);this.setAriaProperty("checked",!!e);this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent();if(t(e.selected)){e.setSelected(e.selected)}}})})(tinymce);(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var r=this;r.parent(t,n);r.items={};r.collapsed=false;r.menuCount=0;r.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;if(e){i(t,function(e){if(e.expand){e.expand()}},"items",t)}t.collapsed=false},collapse:function(e){var t=this;if(e){i(t,function(e){if(e.collapse){e.collapse()}},"items",t)}t.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(t){if(!t.settings){t=new e.ui.MenuItem(t.id||n.uniqueId(),t)}this.onAddItem.dispatch(this,t);return this.items[t.id]=t},addSeparator:function(){return this.add({separator:true})},addMenu:function(e){if(!e.collapse){e=this.createMenu(e)}this.menuCount++;return this.add(e)},hasMenus:function(){return this.menuCount!==0},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;i(e,function(e){if(e.removeAll){e.removeAll()}else{e.remove()}e.destroy()},"items",e);e.items={}},createMenu:function(t){var r=new e.ui.Menu(t.id||n.uniqueId(),t);r.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return r}})})(tinymce);(function(e){var t=e.is,n=e.DOM,r=e.each,i=e.dom.Event,s=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(r,i){i=i||{};i.container=i.container||n.doc.body;i.offset_x=i.offset_x||0;i.offset_y=i.offset_y||0;i.vp_offset_x=i.vp_offset_x||0;i.vp_offset_y=i.vp_offset_y||0;if(t(i.icons)&&!i.icons){i["class"]+=" mceNoIcons"}this.parent(r,i);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(t){var r=this,i=r.settings,s;t.container=t.container||i.container;t.parent=r;t.constrain=t.constrain||i.constrain;t["class"]=t["class"]||i["class"];t.vp_offset_x=t.vp_offset_x||i.vp_offset_x;t.vp_offset_y=t.vp_offset_y||i.vp_offset_y;t.keyboard_focus=i.keyboard_focus;s=new e.ui.DropMenu(t.id||n.uniqueId(),t);s.onAddItem.add(r.onAddItem.dispatch,r.onAddItem);return s},focus:function(){var e=this;if(e.keyboardNav){e.keyboardNav.focus()}},update:function(){var e=this,t=e.settings,r=n.get("menu_"+e.id+"_tbl"),i=n.get("menu_"+e.id+"_co"),s,o;s=t.max_width?Math.min(r.offsetWidth,t.max_width):r.offsetWidth;o=t.max_height?Math.min(r.offsetHeight,t.max_height):r.offsetHeight;if(!n.boxModel){e.element.setStyles({width:s+2,height:o+2})}else{e.element.setStyles({width:s,height:o})}if(t.max_width){n.setStyle(i,"width",s)}if(t.max_height){n.setStyle(i,"height",o);if(r.clientHeight<t.max_height){n.setStyle(i,"overflow","hidden")}}},showMenu:function(t,o,u){var l=this,h=l.settings,p,d=n.getViewPort(),v,m,g,y,w=2,E,S,x=l.classPrefix;l.collapse(1);if(l.isMenuVisible){return}if(!l.rendered){p=n.add(l.settings.container,l.renderNode());r(l.items,function(e){e.postRender()});l.element=new s("menu_"+l.id,{blocker:1,container:h.container})}else{p=n.get("menu_"+l.id)}if(!e.isOpera){n.setStyles(p,{left:-65535,top:-65535})}n.show(p);l.update();t+=h.offset_x||0;o+=h.offset_y||0;d.w-=4;d.h-=4;if(h.constrain){v=p.clientWidth-w;m=p.clientHeight-w;g=d.x+d.w;y=d.y+d.h;if(t+h.vp_offset_x+v>g){t=u?u-v:Math.max(0,g-h.vp_offset_x-v)}if(o+h.vp_offset_y+m>y){o=Math.max(0,y-h.vp_offset_y-m)}}n.setStyles(p,{left:t,top:o});l.element.update();l.isMenuVisible=1;l.mouseClickFunc=i.add(p,"click",function(e){var t;e=e.target;if(e&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,x+"ItemSub")){t=l.items[e.id];if(t.isDisabled()){return}E=l;while(E){if(E.hideMenu){E.hideMenu()}E=E.settings.parent}if(t.settings.onclick){t.settings.onclick(e)}return false}});if(l.hasMenus()){l.mouseOverFunc=i.add(p,"mouseover",function(e){var t,r,i;e=e.target;if(e&&(e=n.getParent(e,"tr"))){t=l.items[e.id];if(l.lastMenu){l.lastMenu.collapse(1)}if(t.isDisabled()){return}if(e&&n.hasClass(e,x+"ItemSub")){r=n.getRect(e);t.showMenu(r.x+r.w-w,r.y-w,r.x);l.lastMenu=t;n.addClass(n.get(t.id).firstChild,x+"ItemActive")}}})}i.add(p,"keydown",l._keyHandler,l);l.onShowMenu.dispatch(l);if(h.keyboard_focus){l._setupKeyboardNav()}},hideMenu:function(e){var t=this,r=n.get("menu_"+t.id),s;if(!t.isMenuVisible){return}if(t.keyboardNav){t.keyboardNav.destroy()}i.remove(r,"mouseover",t.mouseOverFunc);i.remove(r,"click",t.mouseClickFunc);i.remove(r,"keydown",t._keyHandler);n.hide(r);t.isMenuVisible=0;if(!e){t.collapse(1)}if(t.element){t.element.hide()}if(s=n.get(t.id)){n.removeClass(s.firstChild,t.classPrefix+"ItemActive")}t.onHideMenu.dispatch(t)},add:function(e){var t=this,r;e=t.parent(e);if(t.isRendered&&(r=n.get("menu_"+t.id))){t._add(n.select("tbody",r)[0],e)}return e},collapse:function(e){this.parent(e);this.hideMenu(1)},remove:function(e){n.remove(e.id);this.destroy();return this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);if(e.keyboardNav){e.keyboardNav.destroy()}i.remove(t,"mouseover",e.mouseOverFunc);i.remove(n.select("a",t),"focus",e.mouseOverFunc);i.remove(t,"click",e.mouseClickFunc);i.remove(t,"keydown",e._keyHandler);if(e.element){e.element.remove()}n.remove(t)},renderNode:function(){var e=this,t=e.settings,i,o,u,a;a=n.create("div",{role:"listbox",id:"menu_"+e.id,"class":t["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});if(e.settings.parent){n.setAttrib(a,"aria-parent","menu_"+e.settings.parent.id)}u=n.add(a,"div",{role:"presentation",id:"menu_"+e.id+"_co","class":e.classPrefix+(t["class"]?" "+t["class"]:"")});e.element=new s("menu_"+e.id,{blocker:1,container:t.container});if(t.menu_line){n.add(u,"span",{"class":e.classPrefix+"Line"})}i=n.add(u,"table",{role:"presentation",id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});o=n.add(i,"tbody");r(e.items,function(t){e._add(o,t)});e.rendered=true;return a},_setupKeyboardNav:function(){var t,r,i=this;t=n.get("menu_"+i.id);r=n.select("a[role=option]","menu_"+i.id);r.splice(0,0,t);i.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+i.id,items:r,onCancel:function(){i.hideMenu()},enableUpDown:true});t.focus()},_keyHandler:function(e){var t=this,n;switch(e.keyCode){case 37:if(t.settings.parent){t.hideMenu();t.settings.parent.focus();i.cancel(e)}break;case 39:if(t.mouseOverFunc){t.mouseOverFunc(e)}break}},_add:function(e,t){var r,i=t.settings,s,o,u,a=this.classPrefix,f;if(i.separator){o=n.add(e,"tr",{id:t.id,"class":a+"ItemSeparator"});n.add(o,"td",{"class":a+"ItemSeparator"});if(r=o.previousSibling){n.addClass(r,"mceLast")}return}r=o=n.add(e,"tr",{id:t.id,"class":a+"Item "+a+"ItemEnabled"});r=u=n.add(r,i.titleItem?"th":"td");r=s=n.add(r,"a",{id:t.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(i.parent){n.setAttrib(s,"aria-haspopup","true");n.setAttrib(s,"aria-owns","menu_"+t.id)}n.addClass(u,i["class"]);f=n.add(r,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")});if(i.icon_src){n.add(f,"img",{src:i.icon_src})}r=n.add(r,i.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title);if(t.settings.style){if(typeof t.settings.style=="function"){t.settings.style=t.settings.style()}n.setAttrib(r,"style",t.settings.style)}if(e.childNodes.length==1){n.addClass(o,"mceFirst")}if((r=o.previousSibling)&&n.hasClass(r,a+"ItemSeparator")){n.addClass(o,"mceFirst")}if(t.collapse){n.addClass(o,a+"ItemSub")}if(r=o.previousSibling){n.removeClass(r,"mceLast")}n.addClass(o,"mceLast")}})})(tinymce);(function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n);this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,n=this.settings,r,i;i=t.encode(n.label||"");r='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+n["class"]+(i?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(n.title)+'">';if(n.image&&!(this.editor&&this.editor.forcedHighContrastMode)){r+='<span class="mceIcon '+n["class"]+'"><img class="mceIcon" src="'+n.image+'" alt="'+t.encode(n.title)+'" /></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":"")}else{r+='<span class="mceIcon '+n["class"]+'"></span>'+(i?'<span class="'+e+'Label">'+i+"</span>":"")}r+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+n.title+"</span>";r+="</a>";return r},postRender:function(){var t=this,n=t.settings,r;if(e.isIE&&t.editor){e.dom.Event.add(t.id,"mousedown",function(e){var n=t.editor.selection.getNode().nodeName;r=n==="IMG"?t.editor.selection.getBookmark():null})}e.dom.Event.add(t.id,"click",function(i){if(!t.isDisabled()){if(e.isIE&&t.editor&&r!==null){t.editor.selection.moveToBookmark(r)}return n.onclick.call(n.scope,i)}});e.dom.Event.add(t.id,"keyup",function(r){if(!t.isDisabled()&&r.keyCode==e.VK.SPACEBAR){return n.onclick.call(n.scope,r)}})}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,r){var s=this;s.parent(t,n,r);s.items=[];s.onChange=new i(s);s.onPostRender=new i(s);s.onAdd=new i(s);s.onRenderMenu=new e.util.Dispatcher(this);s.classPrefix="mceListBox";s.marked={}},select:function(e){var t=this,n,i;t.marked={};if(e==s){return t.selectByIndex(-1)}if(e&&typeof e=="function"){i=e}else{i=function(t){return t==e}}if(e!=t.selectedValue){r(t.items,function(e,r){if(i(e.value)){n=1;t.selectByIndex(r);return false}});if(!n){t.selectByIndex(-1)}}},selectByIndex:function(e){var n=this,r,i,s;n.marked={};if(e!=n.selectedIndex){r=t.get(n.id+"_text");s=t.get(n.id+"_voiceDesc");i=n.items[e];if(i){n.selectedValue=i.value;n.selectedIndex=e;t.setHTML(r,t.encode(i.title));t.setHTML(s,n.settings.title+" - "+i.title);t.removeClass(r,"mceTitle");t.setAttrib(n.id,"aria-valuenow",i.title)}else{t.setHTML(r,t.encode(n.settings.title));t.setHTML(s,t.encode(n.settings.title));t.addClass(r,"mceTitle");n.selectedValue=n.selectedIndex=null;t.setAttrib(n.id,"aria-valuenow",n.settings.title)}r=0}},mark:function(e){this.marked[e]=true},add:function(t,n,r){var i=this;r=r||{};r=e.extend(r,{title:t,value:n});i.items.push(r);i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e="",n=this,r=n.settings,i=n.classPrefix;e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+n.id+'_voiceDesc" aria-describedby="'+n.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+n.id+'" cellpadding="0" cellspacing="0" class="'+i+" "+i+"Enabled"+(r["class"]?" "+r["class"]:"")+'"><tbody><tr>';e+="<td>"+t.createHTML("span",{id:n.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},n.settings.title);e+=t.createHTML("a",{id:n.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},t.encode(n.settings.title))+"</td>";e+="<td>"+t.createHTML("a",{id:n.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>";e+="</tr></tbody></table></span>";return e},showMenu:function(){var i=this,s,o=t.get(this.id),u;if(i.isDisabled()||i.items.length===0){return}if(i.menu&&i.menu.isMenuVisible){return i.hideMenu()}if(!i.isMenuRendered){i.renderMenu();i.isMenuRendered=true}s=t.getPos(o);u=i.menu;u.settings.offset_x=s.x;u.settings.offset_y=s.y;u.settings.keyboard_focus=!e.isOpera;r(i.items,function(e){if(u.items[e.id]){u.items[e.id].setSelected(0)}});r(i.items,function(e){if(u.items[e.id]&&i.marked[e.value]){u.items[e.id].setSelected(1)}if(e.value===i.selectedValue){u.items[e.id].setSelected(1)}});u.showMenu(0,o.clientHeight);n.add(t.doc,"mousedown",i.hideMenu,i);t.addClass(i.id,i.classPrefix+"Selected")},hideMenu:function(e){var r=this;if(r.menu&&r.menu.isMenuVisible){t.removeClass(r.id,r.classPrefix+"Selected");if(e&&e.type=="mousedown"&&(e.target.id==r.id+"_text"||e.target.id==r.id+"_open")){return}if(!e||!t.getParent(e.target,".mceMenu")){t.removeClass(r.id,r.classPrefix+"Selected");n.remove(t.doc,"mousedown",r.hideMenu,r);r.menu.hideMenu()}}},renderMenu:function(){var e=this,n;n=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":e.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150});n.onHideMenu.add(function(){e.hideMenu();e.focus()});n.add({title:e.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(e.settings.onselect("")!==false){e.select("")}}});r(e.items,function(r){if(r.value===s){n.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(e.settings.onselect("")!==false){e.select("")}}})}else{r.id=t.uniqueId();r.role="option";r.onclick=function(){if(e.settings.onselect(r.value)!==false){e.select(r.value)}};n.add(r)}});e.onRenderMenu.dispatch(e,n);e.menu=n},postRender:function(){var r=this,i=r.classPrefix;n.add(r.id,"click",r.showMenu,r);n.add(r.id,"keydown",function(e){if(e.keyCode==32){r.showMenu(e);n.cancel(e)}});n.add(r.id,"focus",function(){if(!r._focused){r.keyDownHandler=n.add(r.id,"keydown",function(e){if(e.keyCode==40){r.showMenu();n.cancel(e)}});r.keyPressHandler=n.add(r.id,"keypress",function(e){var t;if(e.keyCode==13){t=r.selectedValue;r.selectedValue=null;n.cancel(e);r.settings.onselect(t)}})}r._focused=1});n.add(r.id,"blur",function(){n.remove(r.id,"keydown",r.keyDownHandler);n.remove(r.id,"keypress",r.keyPressHandler);r._focused=0});if(e.isIE6||!t.boxModel){n.add(r.id,"mouseover",function(){if(!t.hasClass(r.id,i+"Disabled")){t.addClass(r.id,i+"Hover")}});n.add(r.id,"mouseout",function(){if(!t.hasClass(r.id,i+"Disabled")){t.removeClass(r.id,i+"Hover")}})}r.onPostRender.dispatch(r,t.get(r.id))},destroy:function(){this.parent();n.clear(this.id+"_text");n.clear(this.id+"_open")}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.util.Dispatcher,s;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t);this.classPrefix="mceNativeListBox"},setDisabled:function(e){t.get(this.id).disabled=e;this.setAriaProperty("disabled",e)},isDisabled:function(){return t.get(this.id).disabled},select:function(e){var t=this,n,i;if(e==s){return t.selectByIndex(-1)}if(e&&typeof e=="function"){i=e}else{i=function(t){return t==e}}if(e!=t.selectedValue){r(t.items,function(e,r){if(i(e.value)){n=1;t.selectByIndex(r);return false}});if(!n){t.selectByIndex(-1)}}},selectByIndex:function(e){t.get(this.id).selectedIndex=e+1;this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,n,r){var i,s=this;r=r||{};r.value=n;if(s.isRendered()){t.add(t.get(this.id),"option",r,e)}i={title:e,value:n,attribs:r};s.items.push(i);s.onAdd.dispatch(s,i)},getLength:function(){return this.items.length},renderHTML:function(){var e,n=this;e=t.createHTML("option",{value:""},"-- "+n.settings.title+" --");r(n.items,function(n){e+=t.createHTML("option",{value:n.value},n.title)});e=t.createHTML("select",{id:n.id,"class":"mceNativeListBox","aria-labelledby":n.id+"_aria"},e);e+=t.createHTML("span",{id:n.id+"_aria",style:"display: none"},n.settings.title);return e},postRender:function(){function o(e){var t=r.items[e.target.selectedIndex-1];if(t&&(t=t.value)){r.onChange.dispatch(r,t);if(r.settings.onselect){r.settings.onselect(t)}}}var r=this,i,s=true;r.rendered=true;n.add(r.id,"change",o);n.add(r.id,"keydown",function(t){var u;n.remove(r.id,"change",i);s=false;u=n.add(r.id,"blur",function(){if(s){return}s=true;n.add(r.id,"change",o);n.remove(r.id,"blur",u)});if(e.isWebKit&&(t.keyCode==37||t.keyCode==39)){return n.prevent(t)}if(t.keyCode==13||t.keyCode==32){o(t);return n.cancel(t)}});r.onPostRender.dispatch(r,t.get(r.id))}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,r,i){this.parent(n,r,i);this.onRenderMenu=new e.util.Dispatcher(this);r.menu_container=r.menu_container||t.doc.body},showMenu:function(){var e=this,r,i,s=t.get(e.id),o;if(e.isDisabled()){return}if(!e.isMenuRendered){e.renderMenu();e.isMenuRendered=true}if(e.isMenuVisible){return e.hideMenu()}r=t.getPos(e.settings.menu_container);i=t.getPos(s);o=e.menu;o.settings.offset_x=i.x;o.settings.offset_y=i.y;o.settings.vp_offset_x=i.x;o.settings.vp_offset_y=i.y;o.settings.keyboard_focus=e._focused;o.showMenu(0,s.firstChild.clientHeight);n.add(t.doc,"mousedown",e.hideMenu,e);e.setState("Selected",1);e.isMenuVisible=1},renderMenu:function(){var e=this,t;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons});t.onHideMenu.add(function(){e.hideMenu();e.focus()});e.onRenderMenu.dispatch(e,t);e.menu=t},hideMenu:function(e){var r=this;if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id||e.id===r.id+"_open"})){return}if(!e||!t.getParent(e.target,".mceMenu")){r.setState("Selected",0);n.remove(t.doc,"mousedown",r.hideMenu,r);if(r.menu){r.menu.hideMenu()}}r.isMenuVisible=0},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){if(!e.isDisabled()){if(t.onclick){t.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.each;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n);this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n=this,r=n.settings,i;e="<tbody><tr>";if(r.image){i=t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]})}else{i=t.createHTML("span",{"class":"mceAction "+r["class"]},"")}i+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:n.id+"_voice",style:"display:none;"},r.title);e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>";i=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');e+="<td >"+t.createHTML("a",{role:"button",id:n.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},i)+"</td>";e+="</tr></tbody>";e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e);return t.createHTML("div",{id:n.id,role:"button",tabindex:"0","aria-labelledby":n.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var r=this,i=r.settings,s;if(i.onclick){s=function(e){if(!r.isDisabled()){i.onclick(r.value);n.cancel(e)}};n.add(r.id+"_action","click",s);n.add(r.id,["click","keydown"],function(e){var t=32,i=14,o=13,u=38,l=40;if((e.keyCode===32||e.keyCode===13||e.keyCode===14)&&!e.altKey&&!e.ctrlKey&&!e.metaKey){s();n.cancel(e)}else{if(e.type==="click"||e.keyCode===l){r.showMenu();n.cancel(e)}}})}n.add(r.id+"_open","click",function(e){r.showMenu();n.cancel(e)});n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1});n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0});if(e.isIE6||!t.boxModel){n.add(r.id,"mouseover",function(){if(!t.hasClass(r.id,"mceSplitButtonDisabled")){t.addClass(r.id,"mceSplitButtonHover")}});n.add(r.id,"mouseout",function(){if(!t.hasClass(r.id,"mceSplitButtonDisabled")){t.removeClass(r.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();n.clear(this.id+"_action");n.clear(this.id+"_open");n.clear(this.id)}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.is,i=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,r){var i=this;i.parent(t,n,r);i.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},i.settings);i.onShowMenu=new e.util.Dispatcher(i);i.onHideMenu=new e.util.Dispatcher(i);i.value=n.default_color},showMenu:function(){var r=this,i,s,o,u;if(r.isDisabled()){return}if(!r.isMenuRendered){r.renderMenu();r.isMenuRendered=true}if(r.isMenuVisible){return r.hideMenu()}o=t.get(r.id);t.show(r.id+"_menu");t.addClass(o,"mceSplitButtonSelected");u=t.getPos(o);t.setStyles(r.id+"_menu",{left:u.x,top:u.y+o.firstChild.clientHeight,zIndex:2e5});o=0;n.add(t.doc,"mousedown",r.hideMenu,r);r.onShowMenu.dispatch(r);if(r._focused){r._keyHandler=n.add(r.id+"_menu","keydown",function(e){if(e.keyCode==27){r.hideMenu()}});t.select("a",r.id+"_menu")[0].focus()}r.keyboardNav=new e.ui.KeyboardNavigation({root:r.id+"_menu",items:t.select("a",r.id+"_menu"),onCancel:function(){r.hideMenu();r.focus()}});r.keyboardNav.focus();r.isMenuVisible=1},hideMenu:function(e){var r=this;if(r.isMenuVisible){if(e&&e.type=="mousedown"&&t.getParent(e.target,function(e){return e.id===r.id+"_open"})){return}if(!e||!t.getParent(e.target,".mceSplitButtonMenu")){t.removeClass(r.id,"mceSplitButtonSelected");n.remove(t.doc,"mousedown",r.hideMenu,r);n.remove(r.id+"_menu","keydown",r._keyHandler);t.hide(r.id+"_menu")}r.isMenuVisible=0;r.onHideMenu.dispatch();r.keyboardNav.destroy()}},renderMenu:function(){var s=this,o,u=0,f=s.settings,l,h,p,v,m;v=t.add(f.menu_container,"div",{role:"listbox",id:s.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"});o=t.add(v,"div",{"class":f["class"]+" mceSplitButtonMenu"});t.add(o,"span",{"class":"mceMenuLine"});l=t.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"});h=t.add(l,"tbody");u=0;i(r(f.colors,"array")?f.colors:f.colors.split(","),function(n){n=n.replace(/^#/,"");if(!(u--)){p=t.add(h,"tr");u=f.grid_width-1}l=t.add(p,"td");var r={href:"javascript:;",style:{backgroundColor:"#"+n},title:s.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};if(!e.isIE){r.role="option"}l=t.add(l,"a",r);if(s.editor.forcedHighContrastMode){l=t.add(l,"canvas",{width:16,height:16,"aria-hidden":"true"});if(l.getContext&&(m=l.getContext("2d"))){m.fillStyle="#"+n;m.fillRect(0,0,16,16)}else{t.remove(l)}}});if(f.more_colors_func){l=t.add(h,"tr");l=t.add(l,"td",{colspan:f.grid_width,"class":"mceMoreColors"});l=t.add(l,"a",{role:"option",id:s.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title);n.add(l,"click",function(e){f.more_colors_func.call(f.more_colors_scope||this);return n.cancel(e)})}t.addClass(o,"mceColorSplitMenu");n.add(s.id+"_menu","mousedown",function(e){return n.cancel(e)});n.add(s.id+"_menu","click",function(e){var n;e=t.getParent(e.target,"a",h);if(e&&e.nodeName.toLowerCase()=="a"&&(n=e.getAttribute("data-mce-color"))){s.setColor(n)}return false});return v},setColor:function(e){this.displayColor(e);this.hideMenu();this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e);n.value=e},postRender:function(){var e=this,n=e.id;e.parent();t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"});t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent();n.clear(e.id+"_menu");n.clear(e.id+"_more");t.remove(e.id+"_menu");if(e.keyboardNav){e.keyboardNav.destroy()}}})})(tinymce);(function(e){var t=e.DOM,n=e.each,r=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,r=[],i=n.controls,s=e.each,o=n.settings;r.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">');r.push("<span role='application'>");r.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(o.name)+"</span>");s(i,function(e){r.push(e.renderHTML())});r.push("</span>");r.push("</div>");return r.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var r=this,i=[];n(r.controls,function(e){n(e.controls,function(e){if(e.id){i.push(e)}})});r.keyNav=new e.ui.KeyboardNavigation({root:r.id,items:i,onCancel:function(){if(e.isWebKit){t.get(r.editor.id+"_ifr").focus()}r.editor.focus()},excludeFromTabOrder:!r.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();r.clear(e.id)}})})(tinymce);(function(e){var t=e.DOM,n=e.each;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e=this,n="",r,i,s=e.settings,o,u,a,f;f=e.controls;for(o=0;o<f.length;o++){i=f[o];u=f[o-1];a=f[o+1];if(o===0){r="mceToolbarStart";if(i.Button){r+=" mceToolbarStartButton"}else{if(i.SplitButton){r+=" mceToolbarStartSplitButton"}else{if(i.ListBox){r+=" mceToolbarStartListBox"}}}n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"))}if(u&&i.ListBox){if(u.Button||u.SplitButton){n+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))}}if(t.stdMode){n+='<td style="position: relative">'+i.renderHTML()+"</td>"}else{n+="<td>"+i.renderHTML()+"</td>"}if(a&&i.ListBox){if(a.Button||a.SplitButton){n+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->"))}}}r="mceToolbarEnd";if(i.Button){r+=" mceToolbarEndButton"}else{if(i.SplitButton){r+=" mceToolbarEndSplitButton"}else{if(i.ListBox){r+=" mceToolbarEndListBox"}}}n+=t.createHTML("td",{"class":r},t.createHTML("span",null,"<!-- IE -->"));return t.createHTML("table",{id:e.id,"class":"mceToolbar"+(s["class"]?" "+s["class"]:""),cellpadding:"0",cellspacing:"0",align:e.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+n+"</tr></tbody>")}})})(tinymce);(function(e){var t=e.util.Dispatcher,n=e.each;e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[];e.urls={};e.lookup={};e.onAdd=new t(e)},get:function(e){if(this.lookup[e]){return this.lookup[e].instance}else{return undefined}},dependencies:function(e){var t;if(this.lookup[e]){t=this.lookup[e].dependencies}return t||[]},requireLangPack:function(t){var n=e.settings;if(n&&n.language&&n.language_load!==false){e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")}},add:function(e,t,n){this.items.push(t);this.lookup[e]={instance:t,dependencies:n};this.onAdd.dispatch(this,e,t);return t},createUrl:function(e,t){if(typeof t==="object"){return t}else{return{prefix:e.prefix,resource:t,suffix:e.suffix}}},addComponents:function(t,n){var r=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(t,n,r,i){function u(){var o=s.dependencies(t);e.each(o,function(e){var t=s.createUrl(n,e);s.load(t.resource,t,undefined,undefined)});if(r){if(i){r.call(i)}else{r.call(e.ScriptLoader)}}}var s=this,o=n;if(s.urls[t]){return}if(typeof n==="object"){o=n.prefix+n.resource+n.suffix}if(o.indexOf("/")!==0&&o.indexOf("://")==-1){o=e.baseURL+"/"+o}s.urls[t]=o.substring(0,o.lastIndexOf("/"));if(s.lookup[t]){u()}else{e.ScriptLoader.add(o,u,i)}}});e.PluginManager=new e.AddOnManager;e.ThemeManager=new e.AddOnManager})(tinymce);(function(e){var t=e.each,n=e.extend,r=e.DOM,i=e.dom.Event,s=e.ThemeManager,o=e.PluginManager,u=e.explode,a=e.util.Dispatcher,f,l=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(e.documentBaseURL)){e.documentBaseURL+="/"}e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute(e.baseURL);e.baseURI=new e.util.URI(e.baseURL);e.onBeforeUnload=new a(e);i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)});e.onAddEditor=new a(e);e.onRemoveEditor=new a(e);e.EditorManager=n(e,{editors:[],i18n:{},activeEditor:null,init:function(n){function d(e){var t=e.id;if(!t){t=e.name;if(t&&!r.get(t)){t=e.name}else{t=r.uniqueId()}e.setAttribute("id",t)}return t}function v(t,n,r){var i=t[n];if(!i){return}if(e.is(i,"string")){r=i.replace(/\.\w+$/,"");r=r?e.resolve(r):0;i=e.resolve(i)}return i.apply(r||this,Array.prototype.slice.call(arguments,2))}function m(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}var s=this,o,a=e.ScriptLoader,f,h=[],p;s.settings=n;i.bind(window,"ready",function(){var i,s;v(n,"onpageload");switch(n.mode){case"exact":i=n.elements||"";if(i.length>0){t(u(i),function(i){if(r.get(i)){p=new e.Editor(i,n);h.push(p);p.render(1)}else{t(document.forms,function(s){t(s.elements,function(t){if(t.name===i){i="mce_editor_"+l++;r.setAttrib(t,"id",i);p=new e.Editor(i,n);h.push(p);p.render(1)}})})}})}break;case"textareas":case"specific_textareas":t(r.select("textarea"),function(t){if(n.editor_deselector&&m(t,n.editor_deselector)){return}if(!n.editor_selector||m(t,n.editor_selector)){p=new e.Editor(d(t),n);h.push(p);p.render(1)}});break;default:if(n.types){t(n.types,function(i){t(r.select(i.selector),function(t){var r=new e.Editor(d(t),e.extend({},n,i));h.push(r);r.render(1)})})}else{if(n.selector){t(r.select(n.selector),function(t){var r=new e.Editor(d(t),n);h.push(r);r.render(1)})}}}if(n.oninit){i=s=0;t(h,function(e){s++;if(!e.initialized){e.onInit.add(function(){i++;if(i==s){v(n,"oninit")}})}else{i++}if(i==s){v(n,"oninit")}})}})},get:function(e){if(e===f){return this.editors}if(!this.editors.hasOwnProperty(e)){return f}return this.editors[e]},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this,n=t.editors;n[e.id]=e;n.push(e);t._setActive(e);t.onAddEditor.dispatch(t,e);return e},remove:function(e){var t=this,n,r=t.editors;if(!r[e.id]){return null}delete r[e.id];for(n=0;n<r.length;n++){if(r[n]==e){r.splice(n,1);break}}if(t.activeEditor==e){t._setActive(r[0])}e.destroy();t.onRemoveEditor.dispatch(t,e);return e},execCommand:function(t,n,r){function u(){s.destroy();o.detachEvent("onunload",u);o=o.tinyMCE=o.tinymce=null}var i=this,s=i.get(r),o;switch(t){case"mceFocus":s.focus();return true;case"mceAddEditor":case"mceAddControl":if(!i.get(r)){(new e.Editor(r,i.settings)).render()}return true;case"mceAddFrameControl":o=r.window;o.tinyMCE=tinyMCE;o.tinymce=e;e.DOM.doc=o.document;e.DOM.win=o;s=new e.Editor(r.element_id,r);s.render();if(e.isIE){o.attachEvent("onunload",u)}r.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(s){s.remove()}return true;case"mceToggleEditor":if(!s){i.execCommand("mceAddControl",0,r);return true}if(s.isHidden()){s.show()}else{s.hide()}return true}if(i.activeEditor){return i.activeEditor.execCommand(t,n,r)}return false},execInstanceCommand:function(e,t,n,r){var i=this.get(e);if(i){return i.execCommand(t,n,r)}return false},triggerSave:function(){t(this.editors,function(e){e.save()})},addI18n:function(n,r){var i,s=this.i18n;if(!e.is(n,"string")){t(n,function(e,n){t(e,function(e,r){t(e,function(e,t){if(r==="common"){s[n+"."+t]=e}else{s[n+"."+r+"."+t]=e}})})})}else{t(r,function(e,t){s[n+"."+t]=e})}},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})})(tinymce);(function(e){var t=e.DOM,n=e.dom.Event,r=e.extend,i=e.each,s=e.isGecko,o=e.isIE,u=e.isWebKit,a=e.is,f=e.ThemeManager,l=e.PluginManager,c=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var i=this,s=true;i.settings=n=r({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:s,submit_patch:s,add_unload_trigger:s,convert_urls:s,relative_urls:s,remove_script_host:s,table_inline_editing:false,object_resizing:s,accessibility_focus:s,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:s,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:s,directionality:"ltr",forced_root_block:"p",hidden_input:s,padd_empty_editor:s,render_ui:s,indentation:"30px",fix_table_elements:s,inline_styles:s,convert_fonts_to_spans:s,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:s,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:s},n);i.id=i.editorId=t;i.isNotDirty=false;i.plugins={};i.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI});i.baseURI=e.baseURI;i.contentCSS=[];i.contentStyles=[];i.setupEvents();i.execCommands={};i.queryStateCommands={};i.queryValueCommands={};i.execCallback("setup",i)},render:function(r){function p(){if(o.language&&o.language_load!==false){a.add(e.baseURL+"/langs/"+o.language+".js")}if(o.theme&&typeof o.theme!="function"&&o.theme.charAt(0)!="-"&&!f.urls[o.theme]){f.load(o.theme,"themes/"+o.theme+"/editor_template"+e.suffix+".js")}i(c(o.plugins),function(t){if(t&&!l.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var n=l.dependencies(t);i(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=l.createUrl(n,t);l.load(t.resource,t)})}else{if(t=="safari"){return}l.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}});a.loadQueue(function(){if(!s.removed){s.init()}})}var s=this,o=s.settings,u=s.id,a=e.ScriptLoader;if(!n.domLoaded){n.add(window,"ready",function(){s.render()});return}tinyMCE.settings=o;if(!s.getElement()){return}if(e.isIDevice&&!e.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(s.getElement().nodeName)&&o.hidden_input&&t.getParent(u,"form")){t.insertAfter(t.create("input",{type:"hidden",name:u}),u)}if(!o.content_editable){s.orgVisibility=s.getElement().style.visibility;s.getElement().style.visibility="hidden"}if(e.WindowManager){s.windowManager=new e.WindowManager(s)}if(o.encoding=="xml"){s.onGetContent.add(function(e,n){if(n.save){n.content=t.encode(n.content)}})}if(o.add_form_submit_trigger){s.onSubmit.addToTop(function(){if(s.initialized){s.save();s.isNotDirty=1}})}if(o.add_unload_trigger){s._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(s.initialized&&!s.destroyed&&!s.isHidden()){s.save({format:"raw",no_events:true})}})}e.addUnload(s.destroy,s);if(o.submit_patch){s.onBeforeRenderUI.add(function(){var t=s.getElement().form;if(!t){return}if(t._mceOldSubmit){return}if(!t.submit.nodeType&&!t.submit.length){s.formElement=t;t._mceOldSubmit=t.submit;t.submit=function(){e.triggerSave();s.isNotDirty=1;return s.formElement._mceOldSubmit(s.formElement)}}t=null})}p()},init:function(){function N(t){var n=l.get(t),s=l.urls[t]||e.documentBaseURL.replace(/\/$/,""),o;if(n&&e.inArray(T,t)===-1){i(l.dependencies(t),function(e){N(e)});o=new n(r,s);r.plugins[t]=o;if(o.init){o.init(r,s);T.push(t)}}}var n,r=this,s=r.settings,u,a,p,d=r.getElement(),v,m,y,w,E,S,x,T=[];e.add(r);s.aria_label=s.aria_label||t.getAttrib(d,"aria-label",r.getLang("aria.rich_text_area"));if(s.theme){if(typeof s.theme!="function"){s.theme=s.theme.replace(/-/,"");v=f.get(s.theme);r.theme=new v;if(r.theme.init){r.theme.init(r,f.urls[s.theme]||e.documentBaseURL.replace(/\/$/,""))}}else{r.theme=s.theme}}i(c(s.plugins.replace(/\-/g,"")),N);if(s.popup_css!==false){if(s.popup_css){s.popup_css=r.documentBaseURI.toAbsolute(s.popup_css)}else{s.popup_css=r.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")}}if(s.popup_css_add){s.popup_css+=","+r.documentBaseURI.toAbsolute(s.popup_css_add)}r.controlManager=new e.ControlManager(r);r.onBeforeRenderUI.dispatch(r,r.controlManager);if(s.render_ui&&r.theme){r.orgDisplay=d.style.display;if(typeof s.theme!="function"){u=s.width||d.style.width||d.offsetWidth;a=s.height||d.style.height||d.offsetHeight;p=s.min_height||100;S=/^[0-9\.]+(|px)$/i;if(S.test(""+u)){u=Math.max(parseInt(u,10)+(v.deltaWidth||0),100)}if(S.test(""+a)){a=Math.max(parseInt(a,10)+(v.deltaHeight||0),p)}v=r.theme.renderUI({targetNode:d,width:u,height:a,deltaWidth:s.delta_width,deltaHeight:s.delta_height});t.setStyles(v.sizeContainer||v.editorContainer,{width:u,height:a});a=(v.iframeHeight||a)+(typeof a=="number"?v.deltaHeight||0:"");if(a<p){a=p}}else{v=s.theme(r,d);if(v.editorContainer.nodeType){v.editorContainer=v.editorContainer.id=v.editorContainer.id||r.id+"_parent"}if(v.iframeContainer.nodeType){v.iframeContainer=v.iframeContainer.id=v.iframeContainer.id||r.id+"_iframecontainer"}a=v.iframeHeight||d.offsetHeight;if(o){r.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown",function(){e.lastIERng=e.selection.getRng()})})}}r.editorContainer=v.editorContainer}if(s.content_css){i(c(s.content_css),function(e){r.contentCSS.push(r.documentBaseURI.toAbsolute(e))})}if(s.content_style){r.contentStyles.push(s.content_style)}if(s.content_editable){d=n=v=null;return r.initContentBody()}if(document.domain&&location.hostname!=document.domain){e.relaxedDomain=document.domain}r.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(s.document_base_url!=e.documentBaseURL){r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />'}if(s.ie7_compat){r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}r.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(x=0;x<r.contentCSS.length;x++){r.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+r.contentCSS[x]+'" />'}r.contentCSS=[];w=s.body_id||"tinymce";if(w.indexOf("=")!=-1){w=r.getParam("body_id","","hash");w=w[r.id]||w}E=s.body_class||"";if(E.indexOf("=")!=-1){E=r.getParam("body_class","","hash");E=E[r.id]||""}r.iframeHTML+='</head><body id="'+w+'" class="mceContentBody '+E+'" onload="window.parent.tinyMCE.get(\''+r.id+"').onLoad.dispatch();\"><br></body></html>";if(e.relaxedDomain&&(o||e.isOpera&&parseFloat(opera.version())<11)){y='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'}n=t.add(v.iframeContainer,"iframe",{id:r.id+"_ifr",src:y||'javascript:""',frameBorder:"0",allowTransparency:"true",title:s.aria_label,style:{width:"100%",height:a,display:"block"}});r.contentAreaContainer=v.iframeContainer;if(v.editorContainer){t.get(v.editorContainer).style.display=r.orgDisplay}d.style.visibility=r.orgVisibility;t.get(r.id).style.display="none";t.setAttrib(r.id,"aria-hidden",true);if(!e.relaxedDomain||!y){r.initContentBody()}d=n=v=null},initContentBody:function(){var n=this,r=n.settings,s=t.get(n.id),u=n.getDoc(),a,f,l;if((!o||!e.relaxedDomain)&&!r.content_editable){u.open();u.write(n.iframeHTML);u.close();if(e.relaxedDomain){u.domain=e.relaxedDomain}}if(r.content_editable){t.addClass(s,"mceContentBody");n.contentDocument=u=r.content_document||document;n.contentWindow=r.content_window||window;n.bodyElement=s;r.content_document=r.content_window=null}f=n.getBody();f.disabled=true;if(!r.readonly){f.contentEditable=n.getParam("content_editable_state",true)}f.disabled=false;n.schema=new e.html.Schema(r);n.dom=new e.dom.DOMUtils(u,{keep_values:true,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:true,root_element:r.content_editable?n.id:null,schema:n.schema});n.parser=new e.html.DomParser(r,n.schema);n.parser.addAttributeFilter("src,href,style",function(e,t){var r=e.length,i,s=n.dom,o,u;while(r--){i=e[r];o=i.attr(t);u="data-mce-"+t;if(!i.attributes.map[u]){if(t==="style"){i.attr(u,s.serializeStyle(s.parseStyle(o),i.name))}else{i.attr(u,n.convertURL(o,t,i.name))}}}});n.parser.addNodeFilter("script",function(e,t){var n=e.length,r;while(n--){r=e[n];r.attr("type","mce-"+(r.attr("type")||"text/javascript"))}});n.parser.addNodeFilter("#cdata",function(e,t){var n=e.length,r;while(n--){r=e[n];r.type=8;r.name="#comment";r.value="[CDATA["+r.value+"]]"}});n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,r){var i=t.length,s,o=n.schema.getNonEmptyElements();while(i--){s=t[i];if(s.isEmpty(o)){s.empty().append(new e.html.Node("br",1)).shortEnded=true}}});n.serializer=new e.dom.Serializer(r,n.dom,n.schema);n.selection=new e.dom.Selection(n.dom,n.getWin(),n.serializer,n);n.formatter=new e.Formatter(n);n.undoManager=new e.UndoManager(n);n.forceBlocks=new e.ForceBlocks(n);n.enterKey=new e.EnterKey(n);n.editorCommands=new e.EditorCommands(n);n.onExecCommand.add(function(e,t){if(!/^(FontName|FontSize)$/.test(t)){n.nodeChanged()}});n.serializer.onPreProcess.add(function(e,t){return n.onPreProcess.dispatch(n,t,e)});n.serializer.onPostProcess.add(function(e,t){return n.onPostProcess.dispatch(n,t,e)});n.onPreInit.dispatch(n);if(!r.browser_spellcheck&&!r.gecko_spellcheck){u.body.spellcheck=false}if(!r.readonly){n.bindNativeEvents()}n.controlManager.onPostRender.dispatch(n,n.controlManager);n.onPostRender.dispatch(n);n.quirks=e.util.Quirks(n);if(r.directionality){f.dir=r.directionality}if(r.nowrap){f.style.whiteSpace="nowrap"}if(r.protect){n.onBeforeSetContent.add(function(e,t){i(r.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})})}n.onSetContent.add(function(){n.addVisual(n.getBody())});if(r.padd_empty_editor){n.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}n.load({initial:true,format:"html"});n.startContent=n.getContent({format:"raw"});n.initialized=true;n.onInit.dispatch(n);n.execCallback("setupcontent_callback",n.id,f,u);n.execCallback("init_instance_callback",n);n.focus(true);n.nodeChanged({initial:true});if(n.contentStyles.length>0){l="";i(n.contentStyles,function(e){l+=e+"\r\n"});n.dom.addStyle(l)}i(n.contentCSS,function(e){n.dom.loadCSS(e)});if(r.auto_focus){setTimeout(function(){var t=e.get(r.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getBody().focus();t.getWin().focus()},100)}s=u=f=null},focus:function(t){var n,r=this,i=r.selection,s=r.settings.content_editable,o,u,a=r.getDoc(),f;if(!t){if(r.lastIERng){i.setRng(r.lastIERng)}o=i.getRng();if(o.item){u=o.item(0)}r._refreshContentEditable();if(!s){r.getWin().focus()}if(e.isGecko||s){f=r.getBody();if(f.setActive){f.setActive()}else{f.focus()}if(s){i.normalize()}}if(u&&u.ownerDocument==a){o=a.body.createControlRange();o.addElement(u);o.select()}}if(e.activeEditor!=r){if((n=e.activeEditor)!=null){n.onDeactivate.dispatch(n,r)}r.onActivate.dispatch(r,n)}e._setActive(r)},execCallback:function(t){var n=this,r=n.settings[t],i;if(!r){return}if(n.callbackLookup&&(i=n.callbackLookup[t])){r=i.func;i=i.scope}if(a(r,"string")){i=r.replace(/\.\w+$/,"");i=i?e.resolve(i):0;r=e.resolve(r);n.callbackLookup=n.callbackLookup||{};n.callbackLookup[t]={func:r,scope:i}}return r.apply(i||n,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",r=e.i18n;if(!t){return""}return r[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return r[n+"."+t]||"{#"+t+"}"})},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(a(n)?n:"{#"+t+"}")},getParam:function(t,n,r){var s=e.trim,o=a(this.settings[t])?this.settings[t]:n,u;if(r==="hash"){u={};if(a(o,"string")){i(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("=");if(e.length>1){u[s(e[0])]=s(e[1])}else{u[s(e[0])]=s(e)}})}else{u=o}return u}return o},nodeChanged:function(e){var t=this,n=t.selection,r;if(t.initialized){e=e||{};r=n.getStart()||t.getBody();r=o&&r.ownerDocument!=t.getDoc()?t.getBody():r;e.parents=[];t.dom.getParent(r,function(t){if(t.nodeName=="BODY"){return true}e.parents.push(t)});t.onNodeChange.dispatch(t,e?e.controlManager||t.controlManager:t.controlManager,r,n.isCollapsed(),e)}},addButton:function(e,t){var n=this;n.buttons=n.buttons||{};n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){var s=this,o;if(s.settings.custom_shortcuts===false){return false}s.shortcuts=s.shortcuts||{};if(a(n,"string")){o=n;n=function(){s.execCommand(o,false,null)}}if(a(n,"object")){o=n;n=function(){s.execCommand(o[0],o[1],o[2])}}i(c(e),function(e){var o={func:n,scope:r||this,desc:s.translate(t),alt:false,ctrl:false,shift:false};i(c(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":o[e]=true;break;default:o.charCode=e.charCodeAt(0);o.keyCode=e.toUpperCase().charCodeAt(0)}});s.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o});return true},execCommand:function(e,t,n,s){var o=this,u=0,a,f;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)&&(!s||!s.skip_focus)){o.focus()}s=r({},s);o.onBeforeExecCommand.dispatch(o,e,t,n,s);if(s.terminate){return false}if(o.execCallback("execcommand_callback",o.id,o.selection.getNode(),e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}if(a=o.execCommands[e]){f=a.func.call(a.scope,t,n);if(f!==true){o.onExecCommand.dispatch(o,e,t,n,s);return f}}i(o.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);u=1;return false}});if(u){return true}if(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}if(o.editorCommands.execCommand(e,t,n)){o.onExecCommand.dispatch(o,e,t,n,s);return true}o.getDoc().execCommand(e,t,n);o.onExecCommand.dispatch(o,e,t,n,s)},queryCommandState:function(e){var t=this,n,r;if(t._isHidden()){return}if(n=t.queryStateCommands[e]){r=n.func.call(n.scope);if(r!==true){return r}}n=t.editorCommands.queryCommandState(e);if(n!==-1){return n}try{return this.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var t=this,n,r;if(t._isHidden()){return}if(n=t.queryValueCommands[e]){r=n.func.call(n.scope);if(r!==true){return r}}n=t.editorCommands.queryCommandValue(e);if(a(n)){return n}try{return this.getDoc().queryCommandValue(e)}catch(i){}},show:function(){var e=this;t.show(e.getContainer());t.hide(e.id);e.load()},hide:function(){var e=this,n=e.getDoc();if(o&&n){n.execCommand("SelectAll")}e.save();setTimeout(function(){t.hide(e.getContainer())},1);t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){this.onSetProgressState.dispatch(this,e,t,n);return e},load:function(e){var t=this,n=t.getElement(),r;if(n){e=e||{};e.load=true;r=t.setContent(a(n.value)?n.value:n.innerHTML,e);e.element=n;if(!e.no_events){t.onLoadContent.dispatch(t,e)}e.element=n=null;return r}},save:function(e){var n=this,r=n.getElement(),s,o;if(!r||!n.initialized){return}e=e||{};e.save=true;e.element=r;s=e.content=n.getContent(e);if(!e.no_events){n.onSaveContent.dispatch(n,e)}s=e.content;if(!/TEXTAREA|INPUT/i.test(r.nodeName)){r.innerHTML=s;if(o=t.getParent(n.id,"form")){i(o.elements,function(e){if(e.name==n.id){e.value=s;return false}})}}else{r.value=s}e.element=r=null;return s},setContent:function(t,n){var r=this,i,s=r.getBody(),o;n=n||{};n.format=n.format||"html";n.set=true;n.content=t;if(!n.no_events){r.onBeforeSetContent.dispatch(r,n)}t=n.content;if(!e.isIE&&(t.length===0||/^\s+$/.test(t))){o=r.settings.forced_root_block;if(o){t="<"+o+'><br data-mce-bogus="1"></'+o+">"}else{t='<br data-mce-bogus="1">'}s.innerHTML=t;r.selection.select(s,true);r.selection.collapse(true);return}if(n.format!=="raw"){t=(new e.html.Serializer({},r.schema)).serialize(r.parser.parse(t))}n.content=e.trim(t);r.dom.setHTML(s,n.content);if(!n.no_events){r.onSetContent.dispatch(r,n)}if(!r.settings.content_editable||document.activeElement===r.getBody()){r.selection.normalize()}return n.content},getContent:function(t){var n=this,r,i=n.getBody();t=t||{};t.format=t.format||"html";t.get=true;t.getInner=true;if(!t.no_events){n.onBeforeGetContent.dispatch(n,t)}if(t.format=="raw"){r=i.innerHTML}else{if(t.format=="text"){r=i.innerText||i.textContent}else{r=n.serializer.serialize(i,t)}}if(t.format!="text"){t.content=e.trim(r)}else{t.content=r}if(!t.no_events){n.onGetContent.dispatch(n,t)}return t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;if(!e.container){e.container=t.get(e.editorContainer||e.id+"_parent")}return e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e=this,n;if(!e.contentWindow){n=t.get(e.id+"_ifr");if(n){e.contentWindow=n.contentWindow}}return e.contentWindow},getDoc:function(){var e=this,t;if(!e.contentDocument){t=e.getWin();if(t){e.contentDocument=t.document}}return e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;if(i.urlconverter_callback){return r.execCallback("urlconverter_callback",e,n,true,t)}if(!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0){return e}if(i.relative_urls){return r.documentBaseURI.toRelative(e)}e=r.documentBaseURI.toAbsolute(e,i.remove_script_host);return e},addVisual:function(e){var t=this,n=t.settings,r=t.dom,s;e=e||t.getBody();if(!a(t.hasVisual)){t.hasVisual=n.visual}i(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":s=n.visual_table_class||"mceItemTable";i=r.getAttrib(e,"border");if(!i||i=="0"){if(t.hasVisual){r.addClass(e,s)}else{r.removeClass(e,s)}}return;case"A":if(!r.getAttrib(e,"href",false)){i=r.getAttrib(e,"name")||e.id;s="mceItemAnchor";if(i){if(t.hasVisual){r.addClass(e,s)}else{r.removeClass(e,s)}}}return}});t.onVisualAid.dispatch(t,e,t.hasVisual)},remove:function(){var r=this,i=r.getContainer();if(!r.removed){r.removed=1;r.hide();if(!r.settings.content_editable){n.unbind(r.getWin());n.unbind(r.getDoc())}n.unbind(r.getBody());n.clear(i);r.execCallback("remove_instance_callback",r);r.onRemove.dispatch(r);r.onExecCommand.listeners=[];e.remove(r);t.remove(i)}},destroy:function(t){var r=this;if(r.destroyed){return}if(s){n.unbind(r.getDoc());n.unbind(r.getWin());n.unbind(r.getBody())}if(!t){e.removeUnload(r.destroy);tinyMCE.onBeforeUnload.remove(r._beforeUnload);if(r.theme&&r.theme.destroy){r.theme.destroy()}r.controlManager.destroy();r.selection.destroy();r.dom.destroy()}if(r.formElement){r.formElement.submit=r.formElement._mceOldSubmit;r.formElement._mceOldSubmit=null}r.contentAreaContainer=r.formElement=r.container=r.settings.content_element=r.bodyElement=r.contentDocument=r.contentWindow=null;if(r.selection){r.selection=r.selection.win=r.selection.dom=r.selection.dom.doc=null}r.destroyed=1},_refreshContentEditable:function(){var e=this,t,n;if(e._isHidden()){t=e.getBody();n=t.parentNode;n.removeChild(t);n.appendChild(t);t.focus()}},_isHidden:function(){var e;if(!s){return 0}e=this.selection.getSel();return!e||!e.rangeCount||e.rangeCount===0}})})(tinymce);(function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,r=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)});if(r.cleanup_callback){n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)});n.onPreProcess.add(function(e,t){if(t.set){e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});n.onPostProcess.add(function(e,t){if(t.set){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(r.save_callback){n.onGetContent.add(function(e,t){if(t.save){t.content=e.execCallback("save_callback",e.id,t.content,e.getBody())}})}if(r.handle_event_callback){n.onEvent.add(function(e,t,r){if(n.execCallback("handle_event_callback",t,e,r)===false){t.preventDefault();t.stopPropagation()}})}if(r.handle_node_change_callback){n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,true,e.selection.isCollapsed())})}if(r.save_callback){n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());if(n){t.content=n}})}if(r.onchange_callback){n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})}};e.Editor.prototype.bindNativeEvents=function(){function u(e,t){var r=e.type;if(n.removed){return}if(n.onEvent.dispatch(n,e,t)!==false){n[o[e.fakeType||e.type]].dispatch(n,e,t)}}function f(e){n.focus(true)}function l(t,r){if(r.keyCode!=65||!e.VK.metaKeyPressed(r)){n.selection.normalize()}n.nodeChanged()}function c(r,i){if(r.altKey||r.ctrlKey||r.metaKey){t(n.shortcuts,function(t){var n=e.isMac?r.metaKey:r.ctrlKey;if(t.ctrl!=n||t.alt!=r.altKey||t.shift!=r.shiftKey){return}if(r.keyCode==t.keyCode||r.charCode&&r.charCode==t.charCode){r.preventDefault();if(i){t.func.call(t.scope)}return true}})}}var n=this,r,i=n.settings,s=n.dom,o;o={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};t(o,function(t,r){var o=i.content_editable?n.getBody():n.getDoc();switch(r){case"contextmenu":s.bind(o,r,u);break;case"paste":s.bind(n.getBody(),r,u);break;case"submit":case"reset":s.bind(n.getElement().form||e.DOM.getParent(n.id,"form"),r,u);break;default:s.bind(o,r,u)}});s.bind(i.content_editable?n.getBody():e.isGecko?n.getDoc():n.getWin(),"focus",function(e){n.focus(true)});if(i.content_editable&&e.isOpera){s.bind(n.getBody(),"click",f);s.bind(n.getBody(),"keydown",f)}n.onMouseUp.add(l);n.onKeyUp.add(function(t,n){var r=n.keyCode;if(r>=33&&r<=36||r>=37&&r<=40||r==13||r==45||r==46||r==8||e.isMac&&(r==91||r==93)||n.ctrlKey){l(t,n)}});n.onReset.add(function(){n.setContent(n.startContent,{format:"raw"})});n.onKeyUp.add(function(e,t){c(t)});n.onKeyPress.add(function(e,t){c(t)});n.onKeyDown.add(function(e,t){c(t,true)});if(e.isOpera){n.onClick.add(function(e,t){t.preventDefault()})}}})(tinymce);(function(e){var t=e.each,n,r=true,i=false;e.EditorCommands=function(s){function v(e,t,n){var s;e=e.toLowerCase();if(s=f.exec[e]){s(e,t,n);return r}return i}function m(e){var t;e=e.toLowerCase();if(t=f.state[e]){return t(e)}return-1}function g(e){var t;e=e.toLowerCase();if(t=f.value[e]){return t(e)}return i}function y(e,n){n=n||"exec";t(e,function(e,r){t(r.toLowerCase().split(","),function(t){f[n][t]=e})})}function w(e,t,r){if(t===n){t=i}if(r===n){r=null}return s.getDoc().execCommand(e,t,r)}function E(e){return h.match(e)}function S(e,t){h.toggle(e,t?{value:t}:n)}function x(e){p=u.getBookmark(e)}function T(){u.moveToBookmark(p)}var o=s.dom,u=s.selection,f={state:{},exec:{},value:{}},l=s.settings,h=s.formatter,p;e.extend(this,{execCommand:v,queryCommandState:m,queryCommandValue:g,addCommands:y});y({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){s.undoManager.add()},"Cut,Copy,Paste":function(t){var n=s.getDoc(),i;try{w(t)}catch(o){i=r}if(i||!n.queryCommandSupported(t)){if(e.isGecko){s.windowManager.confirm(s.getLang("clipboard_msg"),function(e){if(e){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{s.windowManager.alert(s.getLang("clipboard_no_support"))}}},unlink:function(e){if(u.isCollapsed()){u.select(u.getNode())}w(e);u.collapse(i)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n=e.substring(7);t("left,center,right,full".split(","),function(e){if(n!=e){h.remove("align"+e)}});S("align"+n);v("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;w(e);t=o.getParent(u.getNode(),"ol,ul");if(t){n=t.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){x();o.split(n,t);T()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){S(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){S(e,n)},FontSize:function(t,n,r){var i,s;if(r>=1&&r<=7){s=e.explode(l.font_size_style_values);i=e.explode(l.font_size_classes);if(i){r=i[r-1]||r}else{r=s[r-1]||r}}S(t,r)},RemoveFormat:function(e){h.remove(e)},mceBlockQuote:function(e){S("blockquote")},FormatBlock:function(e,t,n){return S(n||"p")},mceCleanup:function(){var e=u.getBookmark();s.setContent(s.getContent({cleanup:r}),{cleanup:r});u.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||u.getNode();if(i!=s.getBody()){x();s.dom.remove(i,r);T()}},mceSelectNodeDepth:function(e,t,n){var r=0;o.getParent(u.getNode(),function(e){if(e.nodeType==1&&r++==n){u.select(e);return i}},s.getBody())},mceSelectNode:function(e,t,n){u.select(n)},mceInsertContent:function(t,n,r){var i,a,f,l,c,h,p,v,m,g,y,b,w,E;i=s.parser;a=new e.html.Serializer({},s.schema);w='<span id="mce_marker" data-mce-type="bookmark">﻿</span>';h={content:r,format:"html"};u.onBeforeSetContent.dispatch(u,h);r=h.content;if(r.indexOf("{$caret}")==-1){r+="{$caret}"}r=r.replace(/\{\$caret\}/,w);if(!u.isCollapsed()){s.getDoc().execCommand("Delete",false,null)}f=u.getNode();h={context:f.nodeName.toLowerCase()};c=i.parse(r,h);y=c.lastChild;if(y.attr("id")=="mce_marker"){p=y;for(y=y.prev;y;y=y.walk(true)){if(y.type==3||!o.isBlock(y.name)){y.parent.insert(p,y,y.name==="br");break}}}if(!h.invalid){r=a.serialize(c);y=f.firstChild;b=f.lastChild;if(!y||y===b&&y.nodeName==="BR"){o.setHTML(f,r)}else{u.setContent(r)}}else{u.setContent(w);f=u.getNode();l=s.getBody();if(f.nodeType==9){f=y=l}else{y=f}while(y!==l){f=y;y=y.parentNode}r=f==l?l.innerHTML:o.getOuterHTML(f);r=a.serialize(i.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)})));if(f==l){o.setHTML(l,r)}else{o.setOuterHTML(f,r)}}p=o.get("mce_marker");v=o.getRect(p);m=o.getViewPort(s.getWin());if(v.y+v.h>m.y+m.h||v.y<m.y||v.x>m.x+m.w||v.x<m.x){E=e.isIE?s.getDoc().documentElement:s.getBody();E.scrollLeft=v.x;E.scrollTop=v.y-m.h+25}g=o.createRng();y=p.previousSibling;if(y&&y.nodeType==3){g.setStart(y,y.nodeValue.length)}else{g.setStartBefore(p);g.setEndBefore(p)}o.remove(p);u.setRng(g);u.onSetContent.dispatch(u,h);s.addVisual()},mceInsertRawHTML:function(e,t,n){u.setContent("tiny_mce_marker");s.setContent(s.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){S(n)},mceSetContent:function(e,t,n){s.setContent(n)},"Indent,Outdent":function(e){var n,r,i;n=l.indentation;r=/[a-z%]+$/i.exec(n);n=parseInt(n);if(!m("InsertUnorderedList")&&!m("InsertOrderedList")){if(!l.forced_root_block&&!o.getParent(u.getNode(),o.isBlock)){h.apply("div")}t(u.getSelectedBlocks(),function(t){if(e=="outdent"){i=Math.max(0,parseInt(t.style.paddingLeft||0)-n);o.setStyle(t,"paddingLeft",i?i+r:"")}else{o.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+r)}})}else{w(e)}},mceRepaint:function(){var t;if(e.isGecko){try{x(r);if(u.getSel()){u.getSel().selectAllChildren(s.getBody())}u.collapse(r);T()}catch(n){}}},mceToggleFormat:function(e,t,n){h.toggle(n)},InsertHorizontalRule:function(){s.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){s.hasVisual=!s.hasVisual;s.addVisual()},mceReplaceContent:function(e,t,n){s.execCommand("mceInsertContent",false,n.replace(/\{\$selection\}/g,u.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;if(typeof n=="string"){n={href:n}}r=o.getParent(u.getNode(),"a");n.href=n.href.replace(" ","%20");if(!r||!n.href){h.remove("link")}if(n.href){h.apply("link",n,r)}},selectAll:function(){var e=o.getRoot(),t=o.createRng();if(u.getRng().setStart){t.setStart(e,0);t.setEnd(e,e.childNodes.length);u.setRng(t)}else{w("SelectAll")}}});y({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7);var i=u.isCollapsed()?[o.getParent(u.getNode(),o.isBlock)]:u.getSelectedBlocks();var s=e.map(i,function(e){return!!h.matchNode(e,n)});return e.inArray(s,r)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return E(e)},mceBlockQuote:function(){return E("blockquote")},Outdent:function(){var e;if(l.inline_styles){if((e=o.getParent(u.getStart(),o.isBlock))&&parseInt(e.style.paddingLeft)>0){return r}if((e=o.getParent(u.getEnd(),o.isBlock))&&parseInt(e.style.paddingLeft)>0){return r}}return m("InsertUnorderedList")||m("InsertOrderedList")||!l.inline_styles&&!!o.getParent(u.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=o.getParent(u.getNode(),"ul,ol");return t&&(e==="insertunorderedlist"&&t.tagName==="UL"||e==="insertorderedlist"&&t.tagName==="OL")}},"state");y({"FontSize,FontName":function(e){var t=0,n;if(n=o.getParent(u.getNode(),"span")){if(e=="fontsize"){t=n.style.fontSize}else{t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return t}},"value");y({Undo:function(){s.undoManager.undo()},Redo:function(){s.undoManager.redo()}})}})(tinymce);(function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function c(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function h(){r.typing=false;r.add()}var r,i=0,s=[],o,u,f,l;onBeforeAdd=new t(r);u=new t(r);f=new t(r);l=new t(r);u.add(function(e,t){if(e.hasUndo()){return n.onChange.dispatch(n,t,e)}});f.add(function(e,t){return n.onUndo.dispatch(n,t,e)});l.add(function(e,t){return n.onRedo.dispatch(n,t,e)});n.onInit.add(function(){r.add()});n.onBeforeExecCommand.add(function(e,t,n,i,s){if(t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)){r.beforeChange()}});n.onExecCommand.add(function(e,t,n,i,s){if(t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&(!s||!s.skip_undo)){r.add()}});n.onSaveContent.add(h);n.dom.bind(n.dom.getRoot(),"dragend",h);n.dom.bind(n.getDoc(),e.isGecko?"blur":"focusout",function(e){if(!n.removed&&r.typing){h()}});n.onKeyUp.add(function(e,t){var n=t.keyCode;if(n>=33&&n<=36||n>=37&&n<=40||n==45||n==13||t.ctrlKey){h()}});n.onKeyDown.add(function(e,t){var n=t.keyCode;if(n>=33&&n<=36||n>=37&&n<=40||n==45){if(r.typing){h()}return}if((n<16||n>20)&&n!=224&&n!=91&&!r.typing){r.beforeChange();r.typing=true;r.add()}});n.onMouseDown.add(function(e,t){if(r.typing){h()}});n.addShortcut("ctrl+z","undo_desc","Undo");n.addShortcut("ctrl+y","redo_desc","Redo");r={data:s,typing:false,onBeforeAdd:onBeforeAdd,onAdd:u,onUndo:f,onRedo:l,beforeChange:function(){o=n.selection.getBookmark(2,true)},add:function(e){var t,u=n.settings,a;e=e||{};e.content=c();r.onBeforeAdd.dispatch(r,e);a=s[i];if(a&&a.content==e.content){return null}if(s[i]){s[i].beforeBookmark=o}if(u.custom_undo_redo_levels){if(s.length>u.custom_undo_redo_levels){for(t=0;t<s.length-1;t++){s[t]=s[t+1]}s.length--;i=s.length}}e.bookmark=n.selection.getBookmark(2,true);if(i<s.length-1){s.length=i+1}s.push(e);i=s.length-1;r.onAdd.dispatch(r,e);n.isNotDirty=0;return e},undo:function(){var e,t;if(r.typing){r.add();r.typing=false}if(i>0){e=s[--i];n.setContent(e.content,{format:"raw"});n.selection.moveToBookmark(e.beforeBookmark);r.onUndo.dispatch(r,e)}return e},redo:function(){var e;if(i<s.length-1){e=s[++i];n.setContent(e.content,{format:"raw"});n.selection.moveToBookmark(e.bookmark);r.onRedo.dispatch(r,e)}return e},clear:function(){s=[];i=0;r.typing=false},hasUndo:function(){return i>0||this.typing},hasRedo:function(){return i<s.length-1&&!this.typing}};return r}})(tinymce);tinymce.ForceBlocks=function(e){function s(){var s=r.getStart(),o=e.getBody(),u,f,l,h,p,v,m,g=-16777215,y,w;if(!s||s.nodeType!==1||!t.forced_root_block){return}while(s&&s!=o){if(i[s.nodeName]){return}s=s.parentNode}u=r.getRng();if(u.setStart){f=u.startContainer;l=u.startOffset;h=u.endContainer;p=u.endOffset}else{if(u.item){s=u.item(0);u=e.getDoc().body.createTextRange();u.moveToElementText(s)}w=u.parentElement().ownerDocument===e.getDoc();tmpRng=u.duplicate();tmpRng.collapse(true);l=tmpRng.move("character",g)*-1;if(!tmpRng.collapsed){tmpRng=u.duplicate();tmpRng.collapse(false);p=tmpRng.move("character",g)*-1-l}}s=o.firstChild;while(s){if(s.nodeType===3||s.nodeType==1&&!i[s.nodeName]){if(s.nodeType===3&&s.nodeValue.length==0){m=s;s=s.nextSibling;n.remove(m);continue}if(!v){v=n.create(t.forced_root_block);s.parentNode.insertBefore(v,s);y=true}m=s;s=s.nextSibling;v.appendChild(m)}else{v=null;s=s.nextSibling}}if(y){if(u.setStart){u.setStart(f,l);u.setEnd(h,p);r.setRng(u)}else{if(w){try{u=e.getDoc().body.createTextRange();u.moveToElementText(o);u.collapse(true);u.moveStart("character",l);if(p>0){u.moveEnd("character",p)}u.select()}catch(E){}}}e.nodeChanged()}}var t=e.settings,n=e.dom,r=e.selection,i=e.schema.getBlockElements();if(t.forced_root_block){e.onKeyUp.add(s);e.onNodeChange.add(s)}};(function(e){var t=e.DOM,n=e.dom.Event,r=e.each,i=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,n){var i=this,s;n=n||{};i.editor=t;i.controls={};i.onAdd=new e.util.Dispatcher(i);i.onPostRender=new e.util.Dispatcher(i);i.prefix=n.prefix||t.id+"_";i._cls={};i.onPostRender.add(function(){r(i.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;if(n=this.get(e)){n.setActive(t)}return n},setDisabled:function(e,t){var n=null;if(n=this.get(e)){n.setDisabled(t)}return n},add:function(e){var t=this;if(e){t.controls[e.id]=e;t.onAdd.dispatch(e,t)}return e},createControl:function(e){var t,n,i,s=this,o=s.editor,u,a;if(!s.controlFactories){s.controlFactories=[];r(o.plugins,function(e){if(e.createControl){s.controlFactories.push(e)}})}u=s.controlFactories;for(n=0,i=u.length;n<i;n++){t=u[n].createControl(e,s);if(t){return s.add(t)}}if(e==="|"||e==="separator"){return s.createSeparator()}if(o.buttons&&(t=o.buttons[e])){return s.createButton(e,t)}return s.add(t)},createDropMenu:function(t,n,r){var s=this,o=s.editor,u,a,f,l;n=i({"class":"mceDropDown",constrain:o.settings.constrain_menus},n);n["class"]=n["class"]+" "+o.getParam("skin")+"Skin";if(f=o.getParam("skin_variant")){n["class"]+=" "+o.getParam("skin")+"Skin"+f.substring(0,1).toUpperCase()+f.substring(1)}n["class"]+=o.settings.directionality=="rtl"?" mceRtl":"";t=s.prefix+t;l=r||s._cls.dropmenu||e.ui.DropMenu;u=s.controls[t]=new l(t,n);u.onAddItem.add(function(e,t){var n=t.settings;n.title=o.getLang(n.title,n.title);if(!n.onclick){n.onclick=function(e){if(n.cmd){o.execCommand(n.cmd,n.ui||false,n.value)}}}});o.onRemove.add(function(){u.destroy()});if(e.isIE){u.onShowMenu.add(function(){o.focus();a=o.selection.getBookmark(1)});u.onHideMenu.add(function(){if(a){o.selection.moveToBookmark(a);a=0}})}return s.add(u)},createListBox:function(t,r,s){function p(t){return t.settings.use_accessible_selects&&!e.isGecko}var o=this,u=o.editor,f,l,h;if(o.get(t)){return null}r.title=u.translate(r.title);r.scope=r.scope||u;if(!r.onselect){r.onselect=function(e){u.execCommand(r.cmd,r.ui||false,e||r.value)}}r=i({title:r.title,"class":"mce_"+t,scope:r.scope,control_manager:o},r);t=o.prefix+t;if(u.settings.use_native_selects||p(u)){l=new e.ui.NativeListBox(t,r)}else{h=s||o._cls.listbox||e.ui.ListBox;l=new h(t,r,u)}o.controls[t]=l;if(e.isWebKit){l.onPostRender.add(function(e,t){n.add(t,"mousedown",function(){u.bookmark=u.selection.getBookmark(1)});n.add(t,"focus",function(){u.selection.moveToBookmark(u.bookmark);u.bookmark=null})})}if(l.hideMenu){u.onMouseDown.add(l.hideMenu,l)}return o.add(l)},createButton:function(t,n,r){var s=this,o=s.editor,u,a,f;if(s.get(t)){return null}n.title=o.translate(n.title);n.label=o.translate(n.label);n.scope=n.scope||o;if(!n.onclick&&!n.menu_button){n.onclick=function(){o.execCommand(n.cmd,n.ui||false,n.value)}}n=i({title:n.title,"class":"mce_"+t,unavailable_prefix:o.getLang("unavailable",""),scope:n.scope,control_manager:s},n);t=s.prefix+t;if(n.menu_button){f=r||s._cls.menubutton||e.ui.MenuButton;a=new f(t,n,o);o.onMouseDown.add(a.hideMenu,a)}else{f=s._cls.button||e.ui.Button;a=new f(t,n,o)}return s.add(a)},createMenuButton:function(e,t,n){t=t||{};t.menu_button=1;return this.createButton(e,t,n)},createSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f;if(s.get(t)){return null}n.title=o.translate(n.title);n.scope=n.scope||o;if(!n.onclick){n.onclick=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}if(!n.onselect){n.onselect=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}n=i({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n);t=s.prefix+t;f=r||s._cls.splitbutton||e.ui.SplitButton;a=s.add(new f(t,n,o));o.onMouseDown.add(a.hideMenu,a);return a},createColorSplitButton:function(t,n,r){var s=this,o=s.editor,u,a,f,l;if(s.get(t)){return null}n.title=o.translate(n.title);n.scope=n.scope||o;if(!n.onclick){n.onclick=function(t){if(e.isIE){l=o.selection.getBookmark(1)}o.execCommand(n.cmd,n.ui||false,t||n.value)}}if(!n.onselect){n.onselect=function(e){o.execCommand(n.cmd,n.ui||false,e||n.value)}}n=i({title:n.title,"class":"mce_"+t,menu_class:o.getParam("skin")+"Skin",scope:n.scope,more_colors_title:o.getLang("more_colors")},n);t=s.prefix+t;f=r||s._cls.colorsplitbutton||e.ui.ColorSplitButton;a=new f(t,n,o);o.onMouseDown.add(a.hideMenu,a);o.onRemove.add(function(){a.destroy()});if(e.isIE){a.onShowMenu.add(function(){o.focus();l=o.selection.getBookmark(1)});a.onHideMenu.add(function(){if(l){o.selection.moveToBookmark(l);l=0}})}return s.add(a)},createToolbar:function(t,n,r){var i,s=this,o;t=s.prefix+t;o=r||s._cls.toolbar||e.ui.Toolbar;i=new o(t,n,s.editor);if(s.get(t)){return null}return s.add(i)},createToolbarGroup:function(t,n,r){var i,s=this,o;t=s.prefix+t;o=r||this._cls.toolbarGroup||e.ui.ToolbarGroup;i=new o(t,n,s.editor);if(s.get(t)){return null}return s.add(i)},createSeparator:function(t){var n=t||this._cls.separator||e.ui.Separator;return new n},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){r(this.controls,function(e){e.destroy()});this.controls=null}})})(tinymce);(function(e){var t=e.util.Dispatcher,n=e.each,r=e.isIE,i=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e;n.onOpen=new t(n);n.onClose=new t(n);n.params={};n.features={}},open:function(t,s){var o=this,u="",a,f,l=o.editor.settings.dialog_type=="modal",h,p,v,m=e.DOM.getViewPort(),g;t=t||{};s=s||{};p=i?m.w:screen.width;v=i?m.h:screen.height;t.name=t.name||"mc_"+(new Date).getTime();t.width=parseInt(t.width||320);t.height=parseInt(t.height||240);t.resizable=true;t.left=t.left||parseInt(p/2)-t.width/2;t.top=t.top||parseInt(v/2)-t.height/2;s.inline=false;s.mce_width=t.width;s.mce_height=t.height;s.mce_auto_focus=t.auto_focus;if(l){if(r){t.center=true;t.help=false;t.dialogWidth=t.width+"px";t.dialogHeight=t.height+"px";t.scroll=t.scrollbars||false}}n(t,function(t,n){if(e.is(t,"boolean")){t=t?"yes":"no"}if(!/^(name|url)$/.test(n)){if(r&&l){u+=(u?";":"")+n+":"+t}else{u+=(u?",":"")+n+"="+t}}});o.features=t;o.params=s;o.onOpen.dispatch(o,t,s);g=t.url||t.file;g=e._addVer(g);try{if(r&&l){h=1;window.showModalDialog(g,window,u)}else{h=window.open(g,t.name,u)}}catch(y){}if(!h){alert(o.editor.getLang("popup_blocked"))}},close:function(e){e.close();this.onClose.dispatch(this)},createInstance:function(t,n,r,i,s,o){var u=e.resolve(t);return new u(n,r,i,s,o)},confirm:function(e,t,n,r){r=r||window;t.call(n||this,r.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,r){var i=this;r=r||window;r.alert(i._decode(i.editor.getLang(e,e)));if(t){t.call(n||i)}},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})})(tinymce);(function(e){e.Formatter=function(t){function E(e){return!!t.schema.getTextBlocks()[e.toLowerCase()]}function S(e,t){return i.getParents(e,t,i.getRoot())}function x(e){return e.nodeType===1&&e.id==="_mce_caret"}function T(){k({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(e){return true},onformat:function(e,t,n){r(n,function(t,n){i.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});r("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){k(e,{block:e,remove:"all"})});k(t.settings.formats)}function N(){t.addShortcut("ctrl+b","bold_desc","Bold");t.addShortcut("ctrl+i","italic_desc","Italic");t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++){t.addShortcut("ctrl+"+e,"",["FormatBlock",false,"h"+e])}t.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);t.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);t.addShortcut("ctrl+9","",["FormatBlock",false,"address"])}function C(e){return e?n[e]:n}function k(e,t){if(e){if(typeof e!=="string"){r(e,function(e,t){k(t,e)})}else{t=t.length?t:[t];r(t,function(e){if(e.deep===b){e.deep=!e.selector}if(e.split===b){e.split=!e.selector||e.inline}if(e.remove===b&&e.selector&&!e.inline){e.remove="none"}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true}if(typeof e.classes==="string"){e.classes=e.classes.split(/\s+/)}});n[e]=t}}}function O(n,l,p){function N(e,t){t=t||v;if(e){if(t.onformat){t.onformat(e,t,l,p)}r(t.styles,function(t,n){i.setStyle(e,n,R(t,l))});r(t.attributes,function(t,n){i.setAttrib(e,n,R(t,l))});r(t.classes,function(t){t=R(t,l);if(!i.hasClass(e,t)){i.addClass(e,t)}})}}function k(){function e(e,t){var n=new o(t);for(p=n.current();p;p=n.prev()){if(p.childNodes.length>1||p==e||p.tagName=="BR"){return p}}}var n=t.selection.getRng();var r=n.startContainer;var i=n.endContainer;if(r!=i&&n.endOffset===0){var s=e(r,i);var u=s.nodeType==3?s.length:s.childNodes.length;n.setEnd(s,u)}return n}function L(t,n,s,o,u){var f=[],l=-1,c,h=-1,p=-1,d;r(t.childNodes,function(e,t){if(e.nodeName==="UL"||e.nodeName==="OL"){l=t;c=e;return false}});r(t.childNodes,function(e,t){if(e.nodeName==="SPAN"&&i.getAttrib(e,"data-mce-type")=="bookmark"){if(e.id==n.id+"_start"){h=t}else{if(e.id==n.id+"_end"){p=t}}}});if(l<=0||h<l&&p>l){r(e.grep(t.childNodes),u);return 0}else{d=i.clone(s,m);r(e.grep(t.childNodes),function(e,t){if(h<l&&t<l||h>l&&t>l){f.push(e);e.parentNode.removeChild(e)}});if(h<l){t.insertBefore(d,c)}else{if(h>l){t.insertBefore(d,c.nextSibling)}}o.push(d);r(f,function(e){d.appendChild(e)});return d}}function M(t,s,o){var h=[],p,y,b=true;p=v.inline||v.block;y=i.create(p);N(y);u.walk(t,function(t){function c(t){var g,S,C,k,A;A=b;g=t.nodeName.toLowerCase();S=t.parentNode.nodeName.toLowerCase();if(t.nodeType===1&&w(t)){A=b;b=w(t)==="true";k=true}if(I(g,"br")){u=0;if(v.block){i.remove(t)}return}if(v.wrapper&&D(t,n,l)){u=0;return}if(b&&!k&&v.block&&!v.wrapper&&E(g)){t=i.rename(t,p);N(t);h.push(t);u=0;return}if(v.selector){r(d,function(e){if("collapsed"in e&&e.collapsed!==T){return}if(i.is(t,e.selector)&&!x(t)){N(t,e);C=true}});if(!v.inline||C){u=0;return}}if(b&&!k&&f(p,g)&&f(S,p)&&!(!o&&t.nodeType===3&&t.nodeValue.length===1&&t.nodeValue.charCodeAt(0)===65279)&&!x(t)){if(!u){u=i.clone(y,m);t.parentNode.insertBefore(u,t);h.push(u)}u.appendChild(t)}else{if(g=="li"&&s){u=L(t,s,y,h,c)}else{u=0;r(e.grep(t.childNodes),c);if(k){b=A}u=0}}}var u;r(t,c)});if(v.wrap_links===false){r(h,function(t){function n(t){var s,o,u;if(t.nodeName==="A"){o=i.clone(y,m);h.push(o);u=e.grep(t.childNodes);for(s=0;s<u.length;s++){o.appendChild(u[s])}t.appendChild(o)}r(e.grep(t.childNodes),n)}n(t)})}r(h,function(e){function s(e){var t=0;r(e.childNodes,function(e){if(!U(e)&&!J(e)){t++}});return t}function o(e){var t,n;r(e.childNodes,function(e){if(e.nodeType==1&&!J(e)&&!x(e)){t=e;return m}});if(t&&F(t,v)){n=i.clone(t,m);N(n);i.replace(n,e,g);i.remove(t,1)}return n||e}var t;t=s(e);if((h.length>1||!c(e))&&t===0){i.remove(e,1);return}if(v.inline||v.wrapper){if(!v.exact&&t===1){e=o(e)}r(d,function(t){r(i.select(t.inline,e),function(e){var n;if(t.wrap_links===false){n=e.parentNode;do{if(n.nodeName==="A"){return}}while(n=n.parentNode)}X(t,l,e,t.exact?e:null)})});if(D(e.parentNode,n,l)){i.remove(e,1);e=0;return g}if(v.merge_with_parents){i.getParent(e.parentNode,function(t){if(D(t,n,l)){i.remove(e,1);e=0;return g}})}if(e&&v.merge_siblings!==false){e=K($(e),e);e=K(e,$(e,g))}}})}var d=C(n),v=d[0],y,b,S,T=s.isCollapsed();if(v){if(p){if(p.nodeType){b=i.createRng();b.setStartBefore(p);b.setEndAfter(p);M(W(b,d),null,true)}else{M(p,null,true)}}else{if(!T||!v.inline||i.select("td.mceSelected,th.mceSelected").length){var _=t.selection.getNode();if(!h&&d[0].defaultBlock&&!i.getParent(_,i.isBlock)){O(d[0].defaultBlock)}t.selection.setRng(k());y=s.getBookmark();M(W(s.getRng(g),d),y);if(v.styles&&(v.styles.color||v.styles.textDecoration)){e.walk(_,A,"childNodes");A(_)}s.moveToBookmark(y);Y(s.getRng(g));t.nodeChanged()}else{G("apply",n,l)}}}}function M(n,o,f){function E(t){var n,r,i,s,u,f;if(t.nodeType===1&&w(t)){u=b;b=w(t)==="true";f=true}n=e.grep(t.childNodes);if(b&&!f){for(r=0,i=l.length;r<i;r++){if(X(l[r],o,t,t)){break}}}if(h.deep){if(n.length){for(r=0,i=n.length;r<i;r++){E(n[r])}if(f){b=u}}}}function x(e){var t;r(S(e.parentNode).reverse(),function(e){var r;if(!t&&e.id!="_start"&&e.id!="_end"){r=D(e,n,o);if(r&&r.split!==false){t=e}}});return t}function T(e,t,n,r){var s,u,a,f,p,d;if(e){d=e.parentNode;for(s=t.parentNode;s&&s!=d;s=s.parentNode){u=i.clone(s,m);for(p=0;p<l.length;p++){if(X(l[p],o,u,u)){u=0;break}}if(u){if(a){u.appendChild(a)}if(!f){f=u}a=u}}if(r&&(!h.mixed||!c(e))){t=i.split(e,t)}if(a){n.parentNode.insertBefore(a,n);f.appendChild(n)}}return t}function N(e){return T(x(e),e,e,true)}function k(e){var t=i.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];if(J(n)){n=n[e?"firstChild":"lastChild"]}i.remove(t,true);return n}function A(e){var n,i,s;e=W(e,l,g);if(h.split){n=Q(e,g);i=Q(e);if(n!=i){if(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild){n=(n.nodeName=="TD"?n.firstChild:n.firstChild.firstChild)||n}n=z(n,"span",{id:"_start","data-mce-type":"bookmark"});i=z(i,"span",{id:"_end","data-mce-type":"bookmark"});N(n);N(i);n=k(g);i=k()}else{n=i=N(n)}e.startContainer=n.parentNode;e.startOffset=p(n);e.endContainer=i.parentNode;e.endOffset=p(i)+1}u.walk(e,function(e){r(e,function(e){E(e);if(e.nodeType===1&&t.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&L(e.parentNode)==="underline"){X({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,e)}})})}var l=C(n),h=l[0],d,v,y,b=true;if(f){if(f.nodeType){y=i.createRng();y.setStartBefore(f);y.setEndAfter(f);A(y)}else{A(f)}return}if(!s.isCollapsed()||!h.inline||i.select("td.mceSelected,th.mceSelected").length){d=s.getBookmark();A(s.getRng(g));s.moveToBookmark(d);if(h.inline&&P(n,o,s.getStart())){Y(s.getRng(true))}t.nodeChanged()}else{G("remove",n,o)}}function _(e,t,n){var r=C(e);if(P(e,t,n)&&(!("toggle"in r[0])||r[0].toggle)){M(e,t,n)}else{O(e,t,n)}}function D(e,t,n,r){function f(e,t,s){var o,u,a=t[s],f;if(t.onmatch){return t.onmatch(e,t,s)}if(a){if(a.length===b){for(o in a){if(a.hasOwnProperty(o)){if(s==="attributes"){u=i.getAttrib(e,o)}else{u=q(e,o)}if(r&&!u&&!t.exact){return}if((!r||t.exact)&&!I(u,R(a[o],n))){return}}}}else{for(f=0;f<a.length;f++){if(s==="attributes"?i.getAttrib(e,a[f]):q(e,a[f])){return t}}}}return t}var s=C(t),o,u,a;if(s&&e){for(u=0;u<s.length;u++){o=s[u];if(F(e,o)&&f(e,o,"attributes")&&f(e,o,"styles")){if(a=o.classes){for(u=0;u<a.length;u++){if(!i.hasClass(e,a[u])){return}}}return o}}}}function P(e,t,n){function o(n){n=i.getParent(n,function(n){return!!D(n,e,t,true)});return D(n,e,t)}var r;if(n){return o(n)}n=s.getNode();if(o(n)){return g}r=s.getStart();if(r!=n){if(o(r)){return g}}return m}function H(e,t){var n,r=[],o={},u,a,f;n=s.getStart();i.getParent(n,function(n){var i,s;for(i=0;i<e.length;i++){s=e[i];if(!o[s]&&D(n,s,t)){o[s]=true;r.push(s)}}},i.getRoot());return r}function B(e){var t=C(e),n,r,o,u,a;if(t){n=s.getStart();r=S(n);for(u=t.length-1;u>=0;u--){a=t[u].selector;if(!a){return g}for(o=r.length-1;o>=0;o--){if(i.is(r[o],a)){return g}}}}return m}function j(e,n,i){var s;if(!y){y={};s={};t.onNodeChange.addToTop(function(e,t,n){var i=S(n),o={};r(y,function(e,t){r(i,function(n){if(D(n,t,{},e.similar)){if(!s[t]){r(e,function(e){e(true,{node:n,format:t,parents:i})});s[t]=e}o[t]=e;return false}})});r(s,function(e,t){if(!o[t]){delete s[t];r(e,function(e){e(false,{node:n,format:t,parents:i})})}})})}r(e.split(","),function(e){if(!y[e]){y[e]=[];y[e].similar=i}y[e].push(n)});return this}function F(e,t){if(I(e,t.inline)){return g}if(I(e,t.block)){return g}if(t.selector){return i.is(e,t.selector)}}function I(e,t){e=e||"";t=t||"";e=""+(e.nodeName||e);t=""+(t.nodeName||t);return e.toLowerCase()==t.toLowerCase()}function q(e,t){var n=i.getStyle(e,t);if(t=="color"||t=="backgroundColor"){n=i.toHex(n)}if(t=="fontWeight"&&n==700){n="bold"}return""+n}function R(e,t){if(typeof e!="string"){e=e(t)}else{if(t){e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})}}return e}function U(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function z(e,t,n){var r=i.create(t,n);e.parentNode.insertBefore(r,e);r.appendChild(e);return r}function W(e,n,r){function g(e){function f(e){return e.nodeName=="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var t,r,s,o,u,a;t=r=e?l:d;u=e?"previousSibling":"nextSibling";a=i.getRoot();if(t.nodeType==3&&!U(t)){if(e?h>0:v<t.nodeValue.length){return t}}for(;;){if(!n[0].block_expand&&c(r)){return r}for(o=r[u];o;o=o[u]){if(!J(o)&&!U(o)&&!f(o)){return r}}if(r.parentNode==a){t=r;break}r=r.parentNode}return t}function y(e,t){if(t===b){t=e.nodeType===3?e.length:e.childNodes.length}while(e&&e.hasChildNodes()){e=e.childNodes[t];if(e){t=e.nodeType===3?e.length:e.childNodes.length}}return{node:e,offset:t}}function x(e){var t=e;while(t){if(t.nodeType===1&&w(t)){return w(t)==="false"?t:e}t=t.parentNode}return e}function T(e,n,s){function h(e,t){var n,i,o=e.nodeValue;if(typeof t=="undefined"){t=s?o.length:0}if(s){n=o.lastIndexOf(" ",t);i=o.lastIndexOf(" ",t);n=n>i?n:i;if(n!==-1&&!r){n++}}else{n=o.indexOf(" ",t);i=o.indexOf(" ",t);n=n!==-1&&(i===-1||n<i)?n:i}return n}var u,a,f,l;if(e.nodeType===3){f=h(e,n);if(f!==-1){return{container:e,offset:f}}l=e}u=new o(e,i.getParent(e,c)||t.getBody());while(a=u[s?"prev":"next"]()){if(a.nodeType===3){l=a;f=h(a);if(f!==-1){return{container:a,offset:f}}}else{if(c(a)){break}}}if(l){if(s){n=0}else{n=l.length}return{container:l,offset:n}}}function N(t,r){var s,o,u,a;if(t.nodeType==3&&t.nodeValue.length===0&&t[r]){t=t[r]}s=S(t);for(o=0;o<s.length;o++){for(u=0;u<n.length;u++){a=n[u];if("collapsed"in a&&a.collapsed!==e.collapsed){continue}if(i.is(s[o],a.selector)){return s[o]}}}return t}function C(e,t,r){var s;if(!n[0].wrapper){s=i.getParent(e,n[0].block)}if(!s){s=i.getParent(e.nodeType==3?e.parentNode:e,E)}if(s&&n[0].wrapper){s=S(s,"ul,ol").reverse()[0]||s}if(!s){s=e;while(s[t]&&!c(s[t])){s=s[t];if(I(s,"br")){break}}}return s||e}var s,u,a,f,l=e.startContainer,h=e.startOffset,d=e.endContainer,v=e.endOffset;if(l.nodeType==1&&l.hasChildNodes()){u=l.childNodes.length-1;l=l.childNodes[h>u?u:h];if(l.nodeType==3){h=0}}if(d.nodeType==1&&d.hasChildNodes()){u=d.childNodes.length-1;d=d.childNodes[v>u?u:v-1];if(d.nodeType==3){v=d.nodeValue.length}}l=x(l);d=x(d);if(J(l.parentNode)||J(l)){l=J(l)?l:l.parentNode;l=l.nextSibling||l;if(l.nodeType==3){h=0}}if(J(d.parentNode)||J(d)){d=J(d)?d:d.parentNode;d=d.previousSibling||d;if(d.nodeType==3){v=d.length}}if(n[0].inline){if(e.collapsed){f=T(l,h,true);if(f){l=f.container;h=f.offset}f=T(d,v);if(f){d=f.container;v=f.offset}}a=y(d,v);if(a.node){while(a.node&&a.offset===0&&a.node.previousSibling){a=y(a.node.previousSibling)}if(a.node&&a.offset>0&&a.node.nodeType===3&&a.node.nodeValue.charAt(a.offset-1)===" "){if(a.offset>1){d=a.node;d.splitText(a.offset-1)}}}}if(n[0].inline||n[0].block_expand){if(!n[0].inline||l.nodeType!=3||h===0){l=g(true)}if(!n[0].inline||d.nodeType!=3||v===d.nodeValue.length){d=g()}}if(n[0].selector&&n[0].expand!==m&&!n[0].inline){l=N(l,"previousSibling");d=N(d,"nextSibling")}if(n[0].block||n[0].selector){l=C(l,"previousSibling");d=C(d,"nextSibling");if(n[0].block){if(!c(l)){l=g(true)}if(!c(d)){d=g()}}}if(l.nodeType==1){h=p(l);l=l.parentNode}if(d.nodeType==1){v=p(d)+1;d=d.parentNode}return{startContainer:l,startOffset:h,endContainer:d,endOffset:v}}function X(e,t,n,s){var o,u,a;if(!F(n,e)){return m}if(e.remove!="all"){r(e.styles,function(e,r){e=R(e,t);if(typeof r==="number"){r=e;s=0}if(!s||I(q(s,r),e)){i.setStyle(n,r,"")}a=1});if(a&&i.getAttrib(n,"style")==""){n.removeAttribute("style");n.removeAttribute("data-mce-style")}r(e.attributes,function(e,o){var u;e=R(e,t);if(typeof o==="number"){o=e;s=0}if(!s||I(i.getAttrib(s,o),e)){if(o=="class"){e=i.getAttrib(n,o);if(e){u="";r(e.split(/\s+/),function(e){if(/mce\w+/.test(e)){u+=(u?" ":"")+e}});if(u){i.setAttrib(n,o,u);return}}}if(o=="class"){n.removeAttribute("className")}if(v.test(o)){n.removeAttribute("data-mce-"+o)}n.removeAttribute(o)}});r(e.classes,function(e){e=R(e,t);if(!s||i.hasClass(s,e)){i.removeClass(n,e)}});u=i.getAttribs(n);for(o=0;o<u.length;o++){if(u[o].nodeName.indexOf("_")!==0){return m}}}if(e.remove!="none"){V(n,e);return g}}function V(t,n){function u(e,t,n){e=$(e,t,n);return!e||e.nodeName=="BR"||c(e)}var s=t.parentNode,o;if(n.block){if(!h){if(c(t)&&!c(s)){if(!u(t,m)&&!u(t.firstChild,g,1)){t.insertBefore(i.create("br"),t.firstChild)}if(!u(t,g)&&!u(t.lastChild,m,1)){t.appendChild(i.create("br"))}}}else{if(s==i.getRoot()){if(!n.list_block||!I(t,n.list_block)){r(e.grep(t.childNodes),function(e){if(f(h,e.nodeName.toLowerCase())){if(!o){o=z(e,h)}else{o.appendChild(e)}}else{o=0}})}}}}if(n.selector&&n.inline&&!I(n.inline,t)){return}i.remove(t,1)}function $(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t]){if(e.nodeType==1||!U(e)){return e}}}}function J(e){return e&&e.nodeType==1&&e.getAttribute("data-mce-type")=="bookmark"}function K(t,n){function f(e,t){function n(e){var t={};r(i.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();if(r.indexOf("_")!==0&&r!=="style"){t[r]=i.getAttrib(e,r)}});return t}function s(e,t){var n,r;for(r in e){if(e.hasOwnProperty(r)){n=t[r];if(n===b){return m}if(e[r]!=n){return m}delete t[r]}}for(r in t){if(t.hasOwnProperty(r)){return m}}return g}if(e.nodeName!=t.nodeName){return m}if(!s(n(e),n(t))){return m}if(!s(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style")))){return m}return g}function l(e,t){for(o=e;o;o=o[t]){if(o.nodeType==3&&o.nodeValue.length!==0){return e}if(o.nodeType==1&&!J(o)){return o}}return e}var s,o,u;if(t&&n){t=l(t,"previousSibling");n=l(n,"nextSibling");if(f(t,n)){for(o=t.nextSibling;o&&o!=n;){u=o;o=o.nextSibling;t.appendChild(u)}i.remove(n);r(e.grep(n.childNodes),function(e){t.appendChild(e)});return t}}return n}function E(e){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(e)}function Q(e,n){var r,i,s,u;r=e[n?"startContainer":"endContainer"];i=e[n?"startOffset":"endOffset"];if(r.nodeType==1){s=r.childNodes.length-1;if(!n&&i){i--}r=r.childNodes[i>s?s:i]}if(r.nodeType===3&&n&&i>=r.nodeValue.length){r=(new o(r,t.getBody())).next()||r}if(r.nodeType===3&&!n&&i===0){r=(new o(r,t.getBody())).prev()||r}return r}function G(n,r,f){function h(e){var n=i.create("span",{id:l,"data-mce-bogus":true,style:c?"color:red":""});if(e){n.appendChild(t.getDoc().createTextNode(d))}return n}function p(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==d||e.childNodes.length>1){return false}if(t&&e.nodeType===1){t.push(e)}e=e.firstChild}return true}function v(e){while(e){if(e.id===l){return e}e=e.parentNode}}function m(e){var t;if(e){t=new o(e,e);for(e=t.current();e;e=t.next()){if(e.nodeType===3){return e}}}}function g(e,t){var n,r;if(!e){e=v(s.getStart());if(!e){while(e=i.get(l)){g(e,false)}}}else{r=s.getRng(true);if(p(e)){if(t!==false){r.setStartBefore(e);r.setEndBefore(e)}i.remove(e)}else{n=m(e);if(n.nodeValue.charAt(0)===d){n=n.deleteData(0,1)}i.remove(e,1)}s.setRng(r)}}function y(){var e,t,n,i,o,a,l;e=s.getRng(true);i=e.startOffset;a=e.startContainer;l=a.nodeValue;t=v(s.getStart());if(t){n=m(t)}if(l&&i>0&&i<l.length&&/\w/.test(l.charAt(i))&&/\w/.test(l.charAt(i-1))){o=s.getBookmark();e.collapse(true);e=W(e,C(r));e=u.split(e);O(r,f,e);s.moveToBookmark(o)}else{if(!t||n.nodeValue!==d){t=h(true);n=t.firstChild;e.insertNode(t);i=1;O(r,f,t)}else{O(r,f,t)}s.setCursorLocation(n,i)}}function b(){var e=s.getRng(true),t,n,o,a,l,c,p=[],v,m;t=e.startContainer;n=e.startOffset;l=t;if(t.nodeType==3){if(n!=t.nodeValue.length||t.nodeValue===d){a=true}l=l.parentNode}while(l){if(D(l,r,f)){c=l;break}if(l.nextSibling){a=true}p.push(l);l=l.parentNode}if(!c){return}if(a){o=s.getBookmark();e.collapse(true);e=W(e,C(r),true);e=u.split(e);M(r,f,e);s.moveToBookmark(o)}else{m=h();l=m;for(v=p.length-1;v>=0;v--){l.appendChild(i.clone(p[v],false));l=l.firstChild}l.appendChild(i.doc.createTextNode(d));l=l.firstChild;i.insertAfter(m,c);s.setCursorLocation(l,1)}}function w(){var t,n,r;n=v(s.getStart());if(n&&!i.isEmpty(n)){e.walk(n,function(e){if(e.nodeType==1&&e.id!==l&&!i.isEmpty(e)){i.setAttrib(e,"data-mce-bogus",null)}},"childNodes")}}var l="_mce_caret",c=t.settings.caret_debug;if(!self._hasCaretEvents){t.onBeforeGetContent.addToTop(function(){var e=[],t;if(p(v(s.getStart()),e)){t=e.length;while(t--){i.setAttrib(e[t],"data-mce-bogus","1")}}});e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){g();w()})});t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;if(n==8||n==37||n==39){g(v(s.getStart()))}w()});s.onSetContent.add(w);self._hasCaretEvents=true}if(n=="apply"){y()}else{b()}}function Y(e){var t=e.startContainer,n=e.startOffset,r,u,a,f,l;if(t.nodeType==3&&n>=t.nodeValue.length){n=p(t);t=t.parentNode;r=true}if(t.nodeType==1){f=t.childNodes;t=f[Math.min(n,f.length-1)];u=new o(t,i.getParent(t,i.isBlock));if(n>f.length-1||r){u.next()}for(a=u.current();a;a=u.next()){if(a.nodeType==3&&!U(a)){l=i.create("a",null,d);a.parentNode.insertBefore(l,a);e.setStart(a,0);s.setRng(e);i.remove(l);return}}}}var n={},r=e.each,i=t.dom,s=t.selection,o=e.dom.TreeWalker,u=new e.dom.RangeUtils(i),f=t.schema.isValidChild,l=e.isArray,c=i.isBlock,h=t.settings.forced_root_block,p=i.nodeIndex,d="﻿",v=/^(src|href|style)$/,m=false,g=true,y,b,w=i.getContentEditable;var L=function(e){var n;t.dom.getParent(e,function(e){n=t.dom.getStyle(e,"text-decoration");return n&&n!=="none"});return n};var A=function(e){var n;if(e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1){n=L(e.parentNode);if(t.dom.getStyle(e,"color")&&n){t.dom.setStyle(e,"text-decoration",n)}else{if(t.dom.getStyle(e,"textdecoration")===n){t.dom.setStyle(e,"text-decoration",null)}}}};e.extend(this,{get:C,register:k,apply:O,remove:M,toggle:_,match:P,matchAll:H,matchNode:D,canApply:B,formatChanged:j});T();N()}})(tinymce);tinymce.onAddEditor.add(function(e,t){function o(t,n){e.each(n,function(e,n){if(e){i.setStyle(t,n,e)}});i.rename(t,"span")}function u(r,o){i=r.dom;if(s.convert_fonts_to_spans){e.each(i.select("font,u,strike",o.node),function(e){n[e.nodeName.toLowerCase()](t.dom,e)})}}var n,r,i,s=t.settings;if(s.inline_styles){r=e.explode(s.font_size_legacy_values);n={font:function(e,t){o(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,t){o(t,{textDecoration:"underline"})},strike:function(e,t){o(t,{textDecoration:"line-through"})}};t.onPreProcess.add(u);t.onSetContent.add(u);t.onInit.add(function(){t.selection.onSetContent.add(u)})}});(function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function f(f){function A(e){return e&&r.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&r.getContentEditable(e)!=="true"}function O(t){var n;if(e.isIE&&r.isBlock(t)){n=i.getRng();t.appendChild(r.create("span",null," "));i.select(t);t.lastChild.outerHTML="";i.setRng(n)}}function M(e){var t=e,n=[],i;while(t=t.firstChild){if(r.isBlock(t)){return}if(t.nodeType==1&&!u[t.nodeName.toLowerCase()]){n.push(t)}}i=n.length;while(i--){t=n[i];if(!t.hasChildNodes()||t.firstChild==t.lastChild&&t.firstChild.nodeValue===""){r.remove(t)}else{if(t.nodeName=="A"&&(t.innerText||t.textContent)===" "){r.remove(t)}}}}function _(e){var s,o,f,l,h,p=e,d;f=r.createRng();if(e.hasChildNodes()){s=new t(e,e);while(o=s.current()){if(o.nodeType==3){f.setStart(o,0);f.setEnd(o,0);break}if(u[o.nodeName.toLowerCase()]){f.setStartBefore(o);f.setEndBefore(o);break}p=o;o=s.next()}if(!o){f.setStart(p,0);f.setEnd(p,0)}}else{if(e.nodeName=="BR"){if(e.nextSibling&&r.isBlock(e.nextSibling)){if(!w||w<9){d=r.create("br");e.parentNode.insertBefore(d,e)}f.setStartBefore(e);f.setEndBefore(e)}else{f.setStartAfter(e);f.setEndAfter(e)}}else{f.setStart(e,0);f.setEnd(e,0)}}i.setRng(f);r.remove(d);h=r.getViewPort(n.getWin());l=r.getPos(e).y;if(l<h.y||l+25>h.y+h.h){n.getWin().scrollTo(0,l<h.y?l:l-h.h+25)}}function D(t){var n=m,i,o,u;i=t||N=="TABLE"?r.create(t||k):y.cloneNode(false);u=i;if(s.keep_styles!==false){do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(n.nodeName)){if(n.id=="_mce_caret"){continue}o=n.cloneNode(false);r.setAttrib(o,"id","");if(i.hasChildNodes()){o.appendChild(i.firstChild);i.appendChild(o)}else{u=o;i.appendChild(o)}}}while(n=n.parentNode)}if(!e.isIE){u.innerHTML='<br data-mce-bogus="1">'}return i}function P(e){var n,r,i;if(m.nodeType==3&&(e?g>0:g<m.nodeValue.length)){return false}if(m.parentNode==y&&L&&!e){return true}if(e&&m.nodeType==1&&m==y.firstChild){return true}if(m.nodeName==="TABLE"||m.previousSibling&&m.previousSibling.nodeName=="TABLE"){return L&&!e||!L&&e}n=new t(m,y);if(m.nodeType==3){if(e&&g==0){n.prev()}else{if(!e&&g==m.nodeValue.length){n.next()}}}while(r=n.current()){if(r.nodeType===1){if(!r.getAttribute("data-mce-bogus")){i=r.nodeName.toLowerCase();if(u[i]&&i!=="br"){return false}}}else{if(r.nodeType===3&&!/^[ \t\r\n]*$/.test(r.nodeValue)){return false}}if(e){n.prev()}else{n.next()}}return true}function H(e,t){var n,i,s,o,u,a=k||"P";i=r.getParent(e,r.isBlock);if(!i||!A(i)){i=i||v;if(!i.hasChildNodes()){n=r.create(a);i.appendChild(n);l.setStart(n,0);l.setEnd(n,0);return n}o=e;while(o.parentNode!=i){o=o.parentNode}while(o&&!r.isBlock(o)){s=o;o=o.previousSibling}if(s){n=r.create(a);s.parentNode.insertBefore(n,s);o=s;while(o&&!r.isBlock(o)){u=o.nextSibling;n.appendChild(o);o=u}l.setStart(e,t);l.setEnd(e,t)}}return e}function B(){function e(e){var t=T[e?"firstChild":"lastChild"];while(t){if(t.nodeType==1){break}t=t[e?"nextSibling":"previousSibling"]}return t===y}S=k?D(k):r.create("BR");if(e(true)&&e()){r.replace(S,T)}else{if(e(true)){T.parentNode.insertBefore(S,T)}else{if(e()){r.insertAfter(S,T);O(S)}else{p=l.cloneRange();p.setStartAfter(y);p.setEndAfter(T);x=p.extractContents();r.insertAfter(x,T);r.insertAfter(S,T)}}}r.remove(y);_(S);o.add()}function j(){var e=new t(m,y),n;while(n=e.current()){if(n.nodeName=="BR"){return true}n=e.next()}}function F(){var t,n;if(m&&m.nodeType==3&&g>=m.nodeValue.length){if(!e.isIE&&!j()){t=r.create("br");l.insertNode(t);l.setStartAfter(t);l.setEndAfter(t);n=true}}t=r.create("br");l.insertNode(t);if(e.isIE&&N=="PRE"&&(!w||w<8)){t.parentNode.insertBefore(r.doc.createTextNode("\r"),t)}if(!n){l.setStartAfter(t);l.setEndAfter(t)}else{l.setStartBefore(t);l.setEndBefore(t)}i.setRng(l);o.add()}function I(e){do{if(e.nodeType===3){e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")}e=e.firstChild}while(e)}function q(e){var t=r.getRoot(),n,i;n=e;while(n!==t&&r.getContentEditable(n)!=="false"){if(r.getContentEditable(n)==="true"){i=n}n=n.parentNode}return n!==t?i:t}function R(t){var n;if(!e.isIE){t.normalize();n=t.lastChild;if(!n||/^(left|right)$/gi.test(r.getStyle(n,"float",true))){r.add(t,"br")}}}var l=i.getRng(true),p,v,m,g,y,w,E,S,x,T,N,C,k,L;if(!l.collapsed){n.execCommand("Delete");return}if(f.isDefaultPrevented()){return}m=l.startContainer;g=l.startOffset;k=(s.force_p_newlines?"p":"")||s.forced_root_block;k=k?k.toUpperCase():"";w=r.doc.documentMode;E=f.shiftKey;if(m.nodeType==1&&m.hasChildNodes()){L=g>m.childNodes.length-1;m=m.childNodes[Math.min(g,m.childNodes.length-1)]||m;if(L&&m.nodeType==3){g=m.nodeValue.length}else{g=0}}v=q(m);if(!v){return}o.beforeChange();if(!r.isBlock(v)&&v!=r.getRoot()){if(!k||E){F()}return}if(k&&!E||!k&&E){m=H(m,g)}y=r.getParent(m,r.isBlock);T=y?r.getParent(y.parentNode,r.isBlock):null;N=y?y.nodeName.toUpperCase():"";C=T?T.nodeName.toUpperCase():"";if(C=="LI"&&!f.ctrlKey){y=T;N=C}if(N=="LI"){if(!k&&E){F();return}if(r.isEmpty(y)){if(/^(UL|OL|LI)$/.test(T.parentNode.nodeName)){return false}B();return}}if(N=="PRE"&&s.br_in_pre!==false){if(!E){F();return}}else{if(!k&&!E&&N!="LI"||k&&E){F();return}}k=k||"P";if(P()){if(/^(H[1-6]|PRE)$/.test(N)&&C!="HGROUP"){S=D(k)}else{S=D()}if(s.end_container_on_empty_block&&A(T)&&r.isEmpty(y)){S=r.split(T,y)}else{r.insertAfter(S,y)}_(S)}else{if(P(true)){S=y.parentNode.insertBefore(D(),y);O(S)}else{p=l.cloneRange();p.setEndAfter(y);x=p.extractContents();I(x);S=x.firstChild;r.insertAfter(x,y);M(S);R(y);_(S)}}r.setAttrib(S,"id","");o.add()}var r=n.dom,i=n.selection,s=n.settings,o=n.undoManager,u=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){if(t.keyCode==13){if(f(t)!==false){t.preventDefault()}}})}})(tinymce)