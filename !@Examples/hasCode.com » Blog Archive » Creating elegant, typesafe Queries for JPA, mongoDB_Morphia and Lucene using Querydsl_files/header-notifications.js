var xdmStore=window.xdmStore||{};!function(t,e){function i(t){console&&console.log?console.log(t):(window.loggedMessages&&(window.loggedMessages=[]),window.loggedMessages.push(t))}function n(){return window.SHAREAHOLIC_PLUGIN_VERSION}function s(){t.ajax({method:"GET",dataType:"jsonp",url:T+"/notifications"}).done(m).fail(o)}function o(){i("failed to retrieve notifications from the server"),m([])}function r(){t("body").fontSpy({font:"FontAwesome",callback:function(t){t&&_.load_css({href:"//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css",id:"notifications_font_css"})}}),_.load_css({href:S+"/notifications.css",id:"header_notifications_css",success:a,failure:function(){i("Cannot load the notifications.css...")}})}function a(){if(k||n()){var e=t(".logged-in.js-logged-in .hiring"),i=t(".new-design .user-nav.js-logged-out .hiring"),o=t(w),r=o.clone();e.before(o.clone()),i.after(o.clone()),r.addClass("mobile"),t(".mobile-menu-link").after(r)}else{var a=t(w),l=t(".wrap .unit.size3of5, .wrap .unit.size4of5").eq(0);l.length?(a.addClass("wordpress-v7"),l.before(a)):(l=t("#sexy-bookmarks"),l&&(a.addClass("wordpress-v6"),l.prepend(a)))}s()}function l(t,e){var i,n,s,o,r=!1,a=new Date;for(C=[],n=0,i=t.length;i>n;n++)s=t[n],s.startAt&&(s.startAt=new Date(s.startAt)),s.endAt&&(s.endAt=new Date(s.endAt)),s.startAt&&s.startAt.getTime()>a.getTime()||s.endAt&&s.endAt.getTime()<a.getTime()||(e&&(o=e.filter(function(t){return t.id===s.id})[0]),o?s.read=o.read===!0:r=!0,C.push(s));r&&g(),C.sort(function(t,e){var i,n;return i=new Date(t.startAt),n=new Date(e.startAt),t.priority>e.priority?1:t.priority<e.priority?-1:i>n?1:n>i?-1:0}),c(C,r)}function c(e,n){var s=t(".shareaholic-notifications");t(".shareaholic-notifications-count");var o=t(".shareaholic-notifications-container");b=t(".shareaholic-notifications-list"),d(!1),v(n),(0===e.length||0===b.children().length)&&b.append(x),s.click(function(e){e.stopPropagation(),o.addClass("open"),s.removeClass("new-notifications"),y.setItem("shareaholic-notifications-open","true",function(t){t&&i("Undable to store if notifications have been looked at or not. Error: "+t)});var n=function(){o.removeClass("open"),t(this).off("click",n),s.off("click",r)},r=function(e){var i=t(e.target);(i.hasClass("shareaholic-notifications")||i.hasClass("shareaholic-notifications-count"))&&o.toggleClass("open")};t(document).click(n),s.click(r)}),s.not(".mobile").show(),p(),t(".shareaholic-notifications-read-more").click(function(){o.toggleClass("expanded"),b.toggleClass("expanded"),"Read More..."===t(this).text()?t(this).text("Read Less..."):t(this).text("Read More...")}),t(".shareaholic-notifications-read-old").click(function(){D?(u(),t(this).text("Show Read..."),D=!1):(h(),t(this).text("Hide Read..."),D=!0)})}function h(){d(!0)}function u(){d(!1),(0===C.length||0===b.children().length)&&b.append(x)}function d(e){var i,n,s,o;if(b.empty(),e)for(i=0,n=C.length;n>i;i++)o=C[i].content.length>M?C[i].content.substr(0,M-12).trim()+"... ":C[i].content,C[i].target?(o+='<span class="shareaholic-notification-link"> Read More</span>',s=t('<a target="_blank" href="'+C[i].target+'"><li class="shareaholic-notification shareaholic-'+C[i].id+'">'+'<a class="shareaholic-notifications-content-link" target="_blank" href="'+C[i].target+'"><div class="shareaholic-notification-text">'+o+"</div></a></li>")):s=t('<li class="shareaholic-notification shareaholic-'+C[i].id+'">'+'<div class="shareaholic-notification-text">'+o+"</div></li>"),b.append(s);else for(i=0,n=C.length;n>i;i++)C[i].read||(o=C[i].content.length>M?C[i].content.substr(0,M-12)+"... ":C[i].content,C[i].target?(o+='<span class="shareaholic-notification-link"> Read More</span>',s=t('<li class="shareaholic-notification shareaholic-'+C[i].id+'">'+'<span class="fa fa-close shareaholic-notification-dismiss"></span>'+'<a class="shareaholic-notifications-content-link" target="_blank" href="'+C[i].target+'"><div  class="shareaholic-notification-text">'+o+"</div></a></li>")):s=t('<li class="shareaholic-notification shareaholic-'+C[i].id+'">'+'<span class="fa fa-close shareaholic-notification-dismiss"></span>'+'<div class="shareaholic-notification-text">'+o+"</div></li>"),s.find(".shareaholic-notification-dismiss").click(function(t){return function(){b.find(".shareaholic-"+t).remove(),f(t)}}(C[i].id)),b.append(s))}function p(){A&&t(".shareaholic-notification").length>3&&t(".shareaholic-notifications-list").css("padding-right","5px")}function f(t){C.forEach(function(e){e.id===t&&(e.read=!0)}),g(t),p(),0===b.children().length&&b.append(x)}function m(t){y.getItem("shareaholic-notifications",function(e,n){e&&i("could not get stored notifications"),l(t,JSON.parse(n))})}function g(t){if(t)y.getItem("shareaholic-notifications",function(e,n){e&&i("could not update notification");var s=JSON.parse(n).map(function(e){return e.id===t&&(e.read=!0),e});y.setItem("shareaholic-notifications",JSON.stringify(s),function(t){t&&i("something went wrong updating notifications")})});else{var e=C.map(function(t){return{id:t.id}});y.setItem("shareaholic-notifications",JSON.stringify(e),function(t){t&&i("something went wrong saving notifications")})}}function v(e){e?(t(".shareaholic-notifications").addClass("new-notifications"),y.setItem("shareaholic-notifications-open","false")):y.getItem("shareaholic-notifications-open",function(e,n){if(e)return i("Unabled to fetch if notifications have previously been read. Error: "+e),void 0;var s=JSON.parse(n);s||t(".shareaholic-notifications").addClass("new-notifications")})}if(!t)return i("JQuery needs to be defined for header-notifications"),void 0;/* jQuery-FontSpy.js v2.0.0
   * https://github.com/patrickmarabeas/jQuery-FontSpy.js
   *
   * Copyright 2013, Patrick Marabeas http://pulse-dev.com
   * Released under the MIT license
   * http://opensource.org/licenses/mit-license.php
   *
   * Date: 10/12/2013
   */
!function(t){function e(e,i){function n(){var t=h.outerWidth();u!==t?o():c.timeOut<0?s():r()}function s(){a.removeClass(c.onLoad),a.addClass(c.onFail),c.callback(new Error("FontSpy timeout")),h.remove()}function o(){c.callback(),a.removeClass(c.onLoad),h.remove()}function r(){a.addClass(c.onLoad),setTimeout(n,c.delay),c.timeOut=c.timeOut-c.delay}var a=t(e);a.css("font-family");var l={font:"",onLoad:"",onFail:"",testFont:"Comic Sans MS",testString:"QW@HhsXJ",delay:50,timeOut:2500,callback:t.noop},c=t.extend(l,i),h=t("<span>"+c.testString+"</span>").css("position","absolute").css("top","-9999px").css("left","-9999px").css("visibility","hidden").css("fontFamily",c.testFont).css("fontSize","250px");t("body").append(h);var u=h.outerWidth();h.css("fontFamily",c.font+","+c.testFont),n()}t.fn.fontSpy=function(i){return this.each(function(){if(void 0==t(this).data("fontSpy")){var n=new e(this,i);t(this).data("fontSpy",n)}})}}(t);var _={};if(_.load_css=function(e){var i,n,s,o,r=navigator.userAgent;return null==e&&(e={}),e=t.extend({href:null,id:null,success:function(){},failure:function(){}},e),n=document.getElementById(e.id),n?n.onload?(o=n.onload,n.onload=function(){return o(),e.success()}):e.success():(i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e.href,i.async="true",i.id=e.id,i.onload=function(){return i.onload=null,e.success()},i.onerror=e.failure,s=document.getElementsByTagName("head")[0],s.appendChild(i),_.is_webkit(r)&&_.webkit_version(r)&&_.webkit_version(r)<=535?_.poll_css(i,e.success):void 0)},_.is_webkit=function(t){return/WebKit/.test(t)},_.webkit_version=function(t){var e=/WebKit\/([0-9]+)/.exec(t);return e?parseInt(e[1]):e},_.poll_css=function(t,e){var i;try{t.sheet.cssRules}catch(n){if(i=n,"NS_ERROR_DOM_SECURITY_ERR"!==i.name)return setTimeout(function(){return _.poll_css(t,e)},50),void 0}return e()},!window.shrNotifications){window.shrNotifications=window.shrNotifications||{};var y,b,w='<div class="shareaholic-notifications"><div class="shareaholic-notifications-count fa fa-bell-o fa-lg"></div><div class="shareaholic-notifications-container"><div class="shareaholic-image"></div><ul class="shareaholic-notifications-list"></ul><div class="shareaholic-notifications-footer"><div class="shareaholic-notifications-footer-button shareaholic-notifications-read-more">Read More...</div> | <div class="shareaholic-notifications-footer-button shareaholic-notifications-read-old">Show Read...</div></div></div></div>',x=t('<div class="shareaholic-notifications-none">You have no unread notifications!</div>'),k=-1===window.location.pathname.indexOf("wp-admin"),C=[],S=t("[data-sorassetbase]:first").data("sorassetbase"),T=t("[data-shr-notificationbase]").attr("data-shr-notificationbase"),A=-1!==navigator.appVersion.indexOf("Win"),D=!1,M=140;t(function(){var n=S;0===n.indexOf("//")&&(n="https:"+n),e.getStore?e.getStore({remote:n+"/lib/xdmStore/remote.html"},function(t,e){return t?(i("Could not connect to cross-domain store"),void 0):(y=e,r(),void 0)}):t.getScript(n+"/lib/xdmStore/xdmStore.js",function(t,s){return"success"!==s?(i("could not contact shareaholic server"),void 0):(e=window.xdmStore,e.getStore({remote:n+"/lib/xdmStore/remote.html"},function(t,e){return t?(i("Could not connect to cross-domain store"),void 0):(y=e,r(),void 0)}),void 0)})})}}("undefined"!=typeof jQuery?jQuery:null,xdmStore);