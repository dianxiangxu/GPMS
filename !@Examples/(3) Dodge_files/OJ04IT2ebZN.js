/*!CK:2413977748!*//*1437965285,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["SFMRm"]); }

__d("SaveCaretMenuItem",["Banzai","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","MenuItem","SaveState","SaveStateHandler","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='saved_for_later:caret_action',s='imp';for(var t in m)if(m.hasOwnProperty(t))v[t]=m[t];var u=m===null?null:m.prototype;v.prototype=Object.create(u);v.prototype.constructor=v;v.__superConstructor__=m;function v(w){"use strict";m.call(this,w);this._data=this._updateData();this.getRoot();l.listen(this._anchor,'error',this.handleError.bind(this));o.listen(w.primarysaveid,function(x){this._data=this._updateData();this._doRender(x);}.bind(this));}v.prototype.handleClick=function(){"use strict";var w=u.handleClick.call(this),x=j.getRoot(q(this._data.storydomid));if(this._data.isSaveAction){o.saving(this._data.allsaveids);x&&k.addFollowup(x,this._data.savefollowupmarkup,["_521o","_4-u3","_3yll"]);}else{o.unsaving(this._data.allsaveids);var y=k.getFollowup(x);y&&k.removeFollowup(x);}return w;};v.prototype.handleError=function(){"use strict";if(this._data.isSaveAction){o.saved(this._data.allsaveids);}else o.unsaved(this._data.allsaveids);};v.prototype._updateData=function(){"use strict";var w=Object.assign({},this._data);w.isSaveAction=o.isSaveAction(w.primarysaveid);if(w.isSaveAction){w.markup=w.savemarkup;w.ajaxify=w.saveajaxify;w.title=w.savetitle;}else{w.markup=w.unsavemarkup;w.ajaxify=w.unsaveajaxify;w.title=w.unsavetitle;}return w;};v.prototype._doRender=function(w){"use strict";if(!this._root)return;switch(w){case n.SAVING:case n.UNSAVING:h.addClass(this._root,"_5arm");setTimeout(this.disable.bind(this),10);break;case n.SAVED:case n.UNSAVED:h.removeClass(this._root,"_5arm");setTimeout(this.enable.bind(this),10);break;}i.replace(this._anchor,this._renderItemContent());l.listen(this._anchor,'error',this.handleError.bind(this));};v.prototype.onShow=function(){"use strict";var w=this._data.logdata;g.post(r,{action:s,surface:w.surface,story_id:w.story_id,is_save:this._data.isSaveAction});};e.exports=v;},null);
__d("FbFeedOptionsExpander",["BanzaiLogger","CSS","DOMQuery","Event"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={expand:function(l){var m=l.expander,n=l.menu,o=l.foldedClass,p=l.unfoldedClass,q=l.foldedItemClass,r=l.data;j.listen(m,'click',function(){h.toggleClass(n.getRoot(),o);h.toggleClass(n.getRoot(),p);var s=i.scry(n.getRoot(),'li.'+q);s.forEach(function(t){var u=t.getAttribute('data-feed-option-name');if(u)g.log('FeedStoryOptionMenuLoggerConfig',{option_name:u,is_secondary:1,event_type:'imp',feed_location:r.location,session_id:r.session_id,is_sponsored:r.is_sponsored,is_self_story:r.is_self_story});},this);});}};e.exports=k;},null);