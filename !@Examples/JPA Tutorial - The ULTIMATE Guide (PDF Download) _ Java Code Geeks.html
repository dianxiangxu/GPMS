<!DOCTYPE html>
<!-- saved from url=(0140)http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer -->
<html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/single.include.9cb930.css" media="all"><script async="" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/analytics.js"></script><script async="" type="text/javascript" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/gpt.js"></script><script type="text/javascript" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/default.include.cb9bcd.js"></script><style type="text/css"></style><meta charset="UTF-8"><title>JPA Tutorial - The ULTIMATE Guide (PDF Download) | Java Code Geeks</title><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="http://www.javacodegeeks.com/xmlrpc.php"><script type="text/javascript">var googletag=googletag||{};googletag.cmd=googletag.cmd||[];(function(){var gads=document.createElement('script');gads.async=true;gads.type='text/javascript';var useSSL='https:'==document.location.protocol;gads.src=(useSSL?'https:':'http:')+'//www.googletagservices.com/tag/js/gpt.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);})();</script><script type="text/javascript">googletag.cmd.push(function(){googletag.defineSlot('/70432299/JCG_Header',[728,90],'div-gpt-ad-1415445260332-0').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_In-post',[300,250],'div-gpt-ad-1415445260332-2').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side',[300,250],'div-gpt-ad-1415445260332-3').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side_1',[300,250],'div-gpt-ad-1415445260332-4').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Under-post',[300,250],'div-gpt-ad-1415445260332-5').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side_2',[300,600],'div-gpt-ad-1415445260332-6').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_NotifBar',[1220,50],'div-gpt-ad-1431445244472-0').addService(googletag.pubads());googletag.pubads().setTargeting("PostID","36797");googletag.pubads().setTargeting("PostCAT","8");googletag.pubads().enableSingleRequest();googletag.enableServices();});</script><meta name="description" content="In this ULTIMATE JPA example all major aspects like onetomany and manytoone mappings, native queries, criteria, joins are explained to quickly get started!"><link rel="canonical" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html"><link rel="publisher" href="https://plus.google.com/+JavaCodeGeeks/"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="In this ULTIMATE JPA example all major aspects like onetomany and manytoone mappings, native queries, criteria, joins are explained to quickly get started!"><meta name="twitter:title" content="JPA Tutorial - The ULTIMATE Guide (PDF Download) | Java Code Geeks"><meta name="twitter:site" content="@javacodegeeks"><meta name="twitter:domain" content="Java Code Geeks"><meta name="twitter:image:src" content="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/10/enterprise-java-logo.jpg"><meta name="twitter:creator" content="@javacodegeeks"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » Feed" href="http://www.javacodegeeks.com/feed/"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » Comments Feed" href="http://www.javacodegeeks.com/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » JPA Tutorial – The ULTIMATE Guide (PDF Download) Comments Feed" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html/feed/"><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.javacodegeeks.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.3"}};!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><script src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/wp-emoji-release.min.js" type="text/javascript"></script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel="stylesheet" id="snp_styles_newtheme7-css" href="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/newtheme7.css" type="text/css" media="all"><link rel="stylesheet" id="Oswald-css" href="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/css" type="text/css" media="all"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.javacodegeeks.com/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 4.2.3"><link rel="shortlink" href="http://www.javacodegeeks.com/?p=36797"><link rel="shortcut icon" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/12/JavaCodeGeeks-favIcon.png" title="Favicon"><meta property="og:title" content="JPA Tutorial – The ULTIMATE Guide (PDF Download)"><meta property="og:type" content="article"><meta property="og:description" content="EDITORIAL NOTE: The Java Persistence API (JPA) is a Java programming language application programmin..."><meta property="og:url" content="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html"><meta property="og:site_name" content="Java Code Geeks"><meta property="og:image" content="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/10/enterprise-java-logo.jpg"> <!--[if IE]><script type="text/javascript">jQuery(document).ready(function(){jQuery(".menu-item").has("ul").children("a").attr("aria-haspopup","true");});</script><![endif]--> <!--[if lt IE 9]><script src="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/js/html5.js"></script><script src="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/js/selectivizr-min.js"></script><![endif]--> <!--[if IE 8]><link rel="stylesheet" type="text/css" media="all" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/css/ie8.css" /> <![endif]--><script type="text/javascript">var tievar={'go_to':'Go to...'};var tie={"ajaxurl":"http://www.javacodegeeks.com/wp-admin/admin-ajax.php","your_rating":"Your Rating:"};</script><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><style type="text/css" media="screen">body{background-image:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/images/patterns/body-bg1.png);background-position:top center}body.single .entry, body.page
.entry{font-size:15px !important}#main-nav ul li.current-menu-item a,
#main-nav ul li.current-menu-item a:hover,
#main-nav ul li.current-menu-parent a,
#main-nav ul li.current-menu-parent a:hover,
#main-nav ul li.current-page-ancestor a,
#main-nav ul li.current-page-ancestor a:hover,
.pagination span.current,
.ei-slider-thumbs li.ei-slider-element,
.breaking-news span,
.ei-title h2,h2.cat-box-title,
a.more-link,.scroll-nav a,
.flex-direction-nav a,
.tagcloud a:hover,
#tabbed-widget ul.tabs li.active a,
.slider-caption h2, .full-width .content .slider-caption h2,
.review-percentage .review-item span span,.review-final-score,
.woocommerce span.onsale, .woocommerce-page span.onsale ,
.woocommerce .widget_price_filter .ui-slider .ui-slider-handle, .woocommerce-page .widget_price_filter .ui-slider .ui-slider-handle,
.button,a.button,#main-content input[type="submit"],#main-content input[type="submit"]:focus,span.onsale{background-color:#326693 !important}::-webkit-scrollbar-thumb{background-color:#326693 !important}#main-nav,.top-nav{border-bottom-color:#326693}.cat-box , .footer-bottom
.container{border-top-color:#326693}body.single .post .entry a, body.page .post .entry
a{color:#326693}body.single .post .entry a:hover, body.page .post .entry a:hover{color:#478cc4;text-decoration:underline}#main-nav ul
li{text-transform:none}.toc
dl{display:block}.toc
dt{display:block}.toc
dd{display:block;-webkit-margin-start:20px;-moz-margin-start:20px}.toc{line-height:1.4;font-size:90%;border-bottom:1px solid #eee;padding:20px;border:1px
solid #e1e1e1;background:#f1f1f1;border-radius:9px;-moz-border-radius:9px;-webkit-border-radius:9px;width:80%;display:inline-block;margin:20px
0}code{display:inline}.tip{background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -201px -72px no-repeat;padding:10px
20px 25px 80px;margin:2.5em 1em;border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background-color:#FAFAFA;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.download{background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -266px 0px no-repeat;padding:10px
20px 25px 80px;margin:2.5em 1em;border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background-color:#FAFAFA;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nlbox{background:#E2ECFA;margin:15px
0px 15px;padding:10px;-webkit-border-radius:3px;-mozilla-border-radius:3px;-o-border-radius:3px;border-radius:3px;-moz-box-shadow:0px 2px 2px 1px #d7e1eb;-webkit-box-shadow:0px 2px 2px 1px #d7e1eb;box-shadow:0px 2px 2px 1px #d7e1eb;border:solid 1px #D8D8D8;display:inline-block}.nlbox1{background:#E2ECFA;margin:-10px 0 25px;width:auto;max-width:798px;padding:10px;-webkit-border-radius:3px;-mozilla-border-radius:3px;-o-border-radius:3px;border-radius:3px;-moz-box-shadow:0px 2px 2px 1px #d7e1eb;-webkit-box-shadow:0px 2px 2px 1px #d7e1eb;box-shadow:0px 2px 2px 1px #d7e1eb;border:solid 1px #D8D8D8}.button-gw{border-top:1px solid #96d1f8;background:#65a9d7;background:-webkit-gradient(linear, left top, left bottom, from(#3e779d), to(#65a9d7));background:-webkit-linear-gradient(top, #3e779d, #65a9d7);background:-moz-linear-gradient(top, #3e779d, #65a9d7);background:-ms-linear-gradient(top, #3e779d, #65a9d7);background:-o-linear-gradient(top, #3e779d, #65a9d7);padding:20px
40px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:rgba(0,0,0,1) 0 1px 0;-moz-box-shadow:rgba(0,0,0,1) 0 1px 0;box-shadow:rgba(0,0,0,1) 0 1px 0;text-shadow:rgba(0,0,0,.4) 0 1px 0;color:white;font-size:34px;font-family:Georgia,Serif;text-decoration:none !important;vertical-align:middle}.button-gw:hover{border-top-color:#28597a;background:#28597a;color:#ccc}.button-gw:active{border-top-color:#1b435e;background:#1b435e}.widget_wpjb-recent-jobs .wpjb-grid-compact{margin-left:5%;margin-right:5%}.attribution{border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background:#fff;background:-moz-linear-gradient(top, #fff 0%, #f6f6f6 47%, #ededed 100%);background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed));background:-webkit-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:-o-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:-ms-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);padding:3px
8px;line-height:20px;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin-top:20px;display:inline-block}.attribution
.reference{font-weight:bold}.attribution
table{border:none;background-color:inherit}.attribution table
td{vertical-align:top;padding:0px
5px;border-bottom:none;font-size:inherit}a.TPbutton_w_cnd01lb:hover{background-color:#fc0;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) 0 -102px;color:#fff;text-decoration:none;transition:none}a.TPbutton_w_cnd01lb{-webkit-border-radius:7px;-mozilla-border-radius:7px;-o-border-radius:7px;border-radius:7px;text-decoration:none;color:#fff;font-family:'lucida sans','lucida grande',arial,helvetica,sans-serif;letter-spacing:-1px;font-weight:bold;background-color:#f90;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) 0 -73px;padding:4px
10px 4px 10px;font-size:16px;-moz-box-shadow:0px 3px 3px 2px #d7e1eb;-webkit-box-shadow:0px 3px 3px 2px #d7e1eb;box-shadow:0px 3px 3px 2px #d7e1eb;border:solid 2px #fff;width:200px;height:56px;transition:none}.TPbutton_w_cnd01lb_arrow{position:relative;display:inline-block;overflow:hidden;vertical-align:bottom;width:30px;height:20px;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -146px 0px}#commentform
input{width:inherit}#author-box .post-listing{margin-bottom:0px}#author-box .block-head
h3{text-transform:none}header#theme-header{margin:0
0 0}blockquote{display:inline-block;margin:20px
0 10px 40px;font-size:14px}blockquote:before{font-size:25px;line-height:inherit}.syntaxhighlighter{display:inline-block}@media (max-width: 767px){#div-gpt-ad-1415445260332-0{display:none}}@media (max-width: 479px){#div-gpt-ad-1415445260332-3{margin-left:-10px}#div-gpt-ad-1415445260332-4{margin-left:-10px}#div-gpt-ad-1415445260332-6{margin-left:-10px}}.wpjb div, body .wpjb p, body .wpjb ul, body .wpjb li, body .wpjb ol, body .wpjb span, body .wpjb img, body .wpjb form, body .wpjb fieldset, body .wpjb label, body .wpjb table, body .wpjb thead, body .wpjb tfoot, body .wpjb tbody, body .wpjb tr, body .wpjb td, body .wpjb strong, body .wpjb b, body .wpjb em, body .wpjb i, body .wpjb
center{margin:0;padding:0;border:0;box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;list-style-type:none}.wpjb .wpjb-grid{margin:0% 0% 0% 0%}.wpjb-grid .wpjb-grid-row{clear:both;overflow:hidden;padding:0.75em 0 0.75em 0;margin:0
0 0 0;border-bottom:1px solid whitesmoke}.wpjb-grid .wpjb-grid-row>div{padding:0
1% 0 1%}.wpjb-grid .wpjb-grid-col-right{text-align:right}.wpjb .wpjb-grid .wpjb-sub{display:block;margin:0
0 0 0;padding:2px
0 0 0;line-height:1.3em;font-size:0.95em}.wpjb-col-title{width:40%}[class*='wpjb-col-']{float:left}#wpjb-top-search{margin:0
0 15px 0;padding:8px
2% 2px 2%;clear:both;overflow:hidden}.wpjb .wpjb-layer-inside{border:1px
solid whitesmoke;border-radius:2px;background-color:#fcfcfc;box-shadow:0 1px 1px rgba(0,0,0,.04)}#wpjb-top-search input[type=text]{width:49%;display:inline}.wpjb select, .wpjb textarea, .wpjb input[type=password], .wpjb input[type=text]{margin:2px;padding:6px;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}#wpjb-top-search ul
li{display:inline-block;line-height:1.2em;margin:2% 1% 1% 1%;float:left}.wpjb input[type=checkbox], .wpjb input[type=radio]{display:inline;margin:0;padding:0;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box}#wpjb-top-search
label{display:inline !important;width:auto;float:none}#wpjb-top-search .wpjb-top-search-submit{float:right;margin:4px
0 4px 0}</style><script type="text/javascript">window.cookieconsent_options={"message":"This website uses cookies to ensure you get the best experience on our website. By using our website, you agree to our use of cookies.","dismiss":"Got it!","learnMore":"More info","link":"http://www.javacodegeeks.com/about/privacy-policy/","theme":"light-floating"};</script><script type="text/javascript" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/cookieconsent.latest.min.js"></script><style type="text/css">.mc4wp-form input[name="_mc4wp_required_but_not_really"]{display:none !important}</style><script async="" type="text/javascript" src="http://partner.googleadservices.com/gpt/pubads_impl_68.js"></script><iframe src="about:blank" width="0" height="0" style="visibility: hidden !important; display: none !important; opacity: 0 !important;"></iframe><link rel="stylesheet" type="text/css" href="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/light-floating.css"></head><body id="top" class="single single-post postid-36797 single-format-standard"><div class="cc_banner-wrapper "><div class="cc_banner cc_container cc_container--open"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#null" data-cc-event="click:dismiss" class="cc_btn cc_btn_accept_all">Got it!</a><p class="cc_message">This website uses cookies to ensure you get the best experience on our website. By using our website, you agree to our use of cookies. <a data-cc-if="options.link" class="cc_more_info" href="http://www.javacodegeeks.com/about/privacy-policy/">More info</a></p><a class="cc_logo" target="_blank" href="http://silktide.com/cookieconsent">Cookie Consent plugin for the EU cookie law</a></div></div><div class="x-white foobar-wrapper shadow fb-top" style="height: 58px; bottom: auto; top: 0px;"><table cellpadding="0" cellspacing="0" class="foobar-container" style="border-style: none none solid; border-bottom-width: 3px; border-bottom-color: rgb(255, 255, 255); height: 50px; display: table; background-color: rgb(50, 102, 147);"><tbody><tr class="foobar-container-row"><td class="foobar-container-left" style="height: 50px; width: 0px;"><div class="foobar-container-inner" style="max-height: 50px;"></div></td><td class="foobar-close-button-spacer" style="width: 80px;"></td><td class="foobar-container-center" style="height: 50px; width: 0px;"><div class="foobar-container-inner" style="max-height: 50px;"><div class="foobar-message" style="opacity: 100;"></div><div class="x-white foobar-prev-button" style="height: 50px; margin-top: -25px; display: block; background-color: rgb(50, 102, 147);"></div><div class="x-white foobar-next-button" style="height: 50px; margin-top: -25px; display: block; background-color: rgb(50, 102, 147);"></div></div></td><td class="foobar-container-right" style="height: 50px; width: auto;"><div class="foobar-container-inner" style="max-height: 50px;"><!-- /70432299/JCG_NotifBar --><div id="div-gpt-ad-1431445244472-0" style="height:50px; width:1220px; margin-left: auto; margin-right: auto;"><script src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/fbDFP.js"></script></div></div></td><td class="foobar-close-button-container" style="width: 80px;"><span class="foobar-close-button" style="height: 50px;"></span></td></tr></tbody></table><div class="foobar-shadow"></div><div class="foobar-open-button-container hidden" style="height: 0px; bottom: auto; top: 0px; width: 80px; left: auto; right: 0px; display: block;"><span class="foobar-open-button" style="border-style: none solid solid; border-right-width: 3px; border-bottom-width: 3px; border-left-width: 3px; border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); height: 0px; margin-left: -17px; display: none; background-color: rgb(50, 102, 147);"></span></div></div><div class="background-cover"></div><div class="wrapper"><div class="top-nav fade-in animated1 head_menu"><div class="container"><div class="search-block"><form method="get" id="searchform" action="http://www.javacodegeeks.com/"> <button class="search-button" type="submit" value="Search"></button> <input type="text" id="s" name="s" value="Search..." onfocus="if (this.value == &#39;Search...&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;Search...&#39;;}"></form></div><div class="social-icons icon_flat"> <a class="tooldown ext-link" href="http://feeds.feedburner.com/JavaCodeGeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Rss"><i class="tieicon-rss"></i></a><a class="tooldown ext-link" href="https://plus.google.com/+JavaCodeGeeks/" rel="external nofollow" data-wpel-target="_blank" original-title="Google+"><i class="tieicon-gplus"></i></a><a class="tooldown ext-link" href="https://www.facebook.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Facebook"><i class="tieicon-facebook"></i></a><a class="tooldown ext-link" href="https://twitter.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Twitter"><i class="tieicon-twitter"></i></a><a class="tooldown ext-link" href="https://www.linkedin.com/groups/Java-Code-Geeks-3810709" rel="external nofollow" data-wpel-target="_blank" original-title="LinkedIn"><i class="tieicon-linkedin"></i></a></div><div class="top-menu"><ul id="menu-pages" class="menu"><li id="menu-item-38541" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-has-children menu-item-38541 parent-list"><a href="http://www.javacodegeeks.com/#">Knowledge Base <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38217" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38217 parent-list"><a href="http://www.javacodegeeks.com/tutorials/">Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38218" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38218 parent-list"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/">Java Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38219" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38219"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/core-java-tutorials/">Core Java Tutorials</a></li><li id="menu-item-38220" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38220 parent-list"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/">Enterprise Java Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38221" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38221"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/spring-tutorials/">Spring Tutorials</a></li></ul></li><li id="menu-item-38222" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38222"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/desktop-java-tutorials/">Desktop Java Tutorials</a></li></ul></li><li id="menu-item-38223" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38223 parent-list"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/">Android Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38224" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38224"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/android-core-tutorials/">Android Core Tutorials</a></li><li id="menu-item-38225" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38225"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/android-game-tutorials/">Android Game Tutorials</a></li></ul></li><li id="menu-item-38226" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38226"><a href="http://www.javacodegeeks.com/tutorials/scala-tutorials/">Scala Tutorials</a></li><li id="menu-item-38227" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38227"><a href="http://www.javacodegeeks.com/tutorials/devops-tutorials/">DevOps Tutorials</a></li><li id="menu-item-38228" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38228"><a href="http://www.javacodegeeks.com/tutorials/nosql-tutorials/">NoSQL Tutorials</a></li><li id="menu-item-38229" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38229"><a href="http://www.javacodegeeks.com/tutorials/groovy-grails-tutorials/">Groovy/Grails Tutorials</a></li></ul></li><li id="menu-item-38243" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38243 parent-list"><a href="http://www.javacodegeeks.com/resources/">Resources <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38244"><a href="http://www.javacodegeeks.com/resources/software/">Software</a></li><li id="menu-item-38245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38245"><a href="http://www.javacodegeeks.com/resources/our-projects/">Our Projects</a></li></ul></li><li id="menu-item-38273" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38273"><a href="http://examples.javacodegeeks.com/" data-wpel-ignored="true">Examples</a></li><li id="menu-item-38275" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38275"><a href="http://academy.javacodegeeks.com/" data-wpel-ignored="true">Academy</a></li><li id="menu-item-38274" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38274"><a href="http://www.javacodegeeks.com/whitepaper/">Whitepapers</a></li><li id="menu-item-38276" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38276"><a href="http://library.javacodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Library</a></li></ul></li><li id="menu-item-38240" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38240 parent-list"><a href="http://www.javacodegeeks.com/job-board/">Job Board <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38241" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38241"><a href="http://www.javacodegeeks.com/job-board/jobs/">Jobs</a></li></ul></li><li id="menu-item-38230" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38230 parent-list"><a href="http://www.javacodegeeks.com/join-us/">Join Us <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38231" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38231"><a href="http://www.javacodegeeks.com/join-us/jcg/">JCG</a></li><li id="menu-item-38232" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38232 parent-list"><a href="http://www.javacodegeeks.com/join-us/w4g/">W4G <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38233" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38233"><a href="http://www.javacodegeeks.com/join-us/w4g/submission-guidelines/">Submission Guidelines</a></li><li id="menu-item-38234" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38234"><a href="http://www.javacodegeeks.com/join-us/w4g/terms-conditions/">Terms &amp; Conditions</a></li></ul></li></ul></li><li id="menu-item-38235" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38235 parent-list"><a href="http://www.javacodegeeks.com/about/">About <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38236" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38236"><a href="http://www.javacodegeeks.com/about/about-jcgs/">About JCGs</a></li><li id="menu-item-38237" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38237"><a href="http://www.javacodegeeks.com/about/advertising/">Advertising</a></li><li id="menu-item-38238" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38238"><a href="http://www.javacodegeeks.com/about/terms-of-use/">Terms of Use</a></li><li id="menu-item-38239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38239"><a href="http://www.javacodegeeks.com/about/privacy-policy/">Privacy Policy</a></li></ul></li></ul><select id="top-menu-mob"><option value="#">Go to...</option><option value="http://www.javacodegeeks.com/#">&nbsp;Knowledge Base </option><option value="http://www.javacodegeeks.com/tutorials/">&nbsp; &nbsp; –&nbsp;Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Java Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/core-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Core Java Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Enterprise Java Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/spring-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Spring Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/desktop-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Desktop Java Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/android-core-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Core Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/android-game-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Game Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/scala-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Scala Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/devops-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;DevOps Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/nosql-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;NoSQL Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/groovy-grails-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Groovy/Grails Tutorials</option><option value="http://www.javacodegeeks.com/resources/">&nbsp; &nbsp; –&nbsp;Resources </option><option value="http://www.javacodegeeks.com/resources/software/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Software</option><option value="http://www.javacodegeeks.com/resources/our-projects/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Our Projects</option><option value="http://examples.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Examples</option><option value="http://academy.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Academy</option><option value="http://www.javacodegeeks.com/whitepaper/">&nbsp; &nbsp; –&nbsp;Whitepapers</option><option value="http://library.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Library</option><option value="http://www.javacodegeeks.com/job-board/">&nbsp;Job Board </option><option value="http://www.javacodegeeks.com/job-board/jobs/">&nbsp; &nbsp; –&nbsp;Jobs</option><option value="http://www.javacodegeeks.com/join-us/">&nbsp;Join Us </option><option value="http://www.javacodegeeks.com/join-us/jcg/">&nbsp; &nbsp; –&nbsp;JCG</option><option value="http://www.javacodegeeks.com/join-us/w4g/">&nbsp; &nbsp; –&nbsp;W4G </option><option value="http://www.javacodegeeks.com/join-us/w4g/submission-guidelines/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Submission Guidelines</option><option value="http://www.javacodegeeks.com/join-us/w4g/terms-conditions/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Terms &amp; Conditions</option><option value="http://www.javacodegeeks.com/about/">&nbsp;About </option><option value="http://www.javacodegeeks.com/about/about-jcgs/">&nbsp; &nbsp; –&nbsp;About JCGs</option><option value="http://www.javacodegeeks.com/about/advertising/">&nbsp; &nbsp; –&nbsp;Advertising</option><option value="http://www.javacodegeeks.com/about/terms-of-use/">&nbsp; &nbsp; –&nbsp;Terms of Use</option><option value="http://www.javacodegeeks.com/about/privacy-policy/">&nbsp; &nbsp; –&nbsp;Privacy Policy</option></select></div></div></div><div class="container"> <header id="theme-header"><div class="header-content fade-in animated1"><div class="logo"><h2> <a title="Java Code Geeks" href="http://www.javacodegeeks.com/"> <img src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/JavaCodeGeeks-logo.png" alt="Java Code Geeks"><strong>Java Code Geeks Java 2 Java Developers Resource Center</strong> </a></h2></div><div class="ads-top"><div id="div-gpt-ad-1415445260332-0" style="width:728px; height:90px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-0');});</script></div></div><div class="clear"></div></div> <nav id="main-nav" class="fade-in animated2"><div class="container"><div class="main-menu"><ul id="menu-categories" class="menu"><li id="menu-item-38251" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/android/">Android <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38252" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/android/android-core/">Android Core</a></li><li id="menu-item-38253" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/android/android-games/">Android Games</a></li></ul></li><li id="menu-item-38257" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  current-post-ancestor  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/java/">Java <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38258" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/java/core-java/">Core Java</a></li><li id="menu-item-38259" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/java/desktop-java/">Desktop Java</a></li><li id="menu-item-38260" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  current-post-ancestor  current-menu-parent  current-post-parent"><a href="http://www.javacodegeeks.com/category/java/enterprise-java/">Enterprise Java</a></li></ul></li><li id="menu-item-38261" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/jvm-languages/">JVM Languages <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38262" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/ceylon/">Ceylon</a></li><li id="menu-item-38263" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/clojure/">Clojure</a></li><li id="menu-item-38264" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/groovy/">Groovy</a></li><li id="menu-item-38265" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/jruby/">JRuby</a></li><li id="menu-item-38266" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/kotlin/">Kotlin</a></li><li id="menu-item-38267" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/scala/">Scala</a></li></ul></li><li id="menu-item-38271" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/software-development/">Software Development</a></li><li id="menu-item-38250" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/agile/">Agile</a></li><li id="menu-item-38254" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/career/">Career</a></li><li id="menu-item-38255" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/communications/">Communications</a></li><li id="menu-item-38256" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/devops/">DevOps</a></li><li id="menu-item-38268" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/meta-jcg/">Meta JCG <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38269" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/meta-jcg/best-of-the-week/">Best Of The Week</a></li><li id="menu-item-38270" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/misc/">Misc</a></li></ul></li></ul><select id="main-menu-mob"><option value="#">Go to...</option><option value="http://www.javacodegeeks.com/category/android/">&nbsp;Android </option><option value="http://www.javacodegeeks.com/category/android/android-core/">&nbsp; &nbsp; –&nbsp;Android Core</option><option value="http://www.javacodegeeks.com/category/android/android-games/">&nbsp; &nbsp; –&nbsp;Android Games</option><option value="http://www.javacodegeeks.com/category/java/">&nbsp;Java </option><option value="http://www.javacodegeeks.com/category/java/core-java/">&nbsp; &nbsp; –&nbsp;Core Java</option><option value="http://www.javacodegeeks.com/category/java/desktop-java/">&nbsp; &nbsp; –&nbsp;Desktop Java</option><option value="http://www.javacodegeeks.com/category/java/enterprise-java/">&nbsp; &nbsp; –&nbsp;Enterprise Java</option><option value="http://www.javacodegeeks.com/category/jvm-languages/">&nbsp;JVM Languages </option><option value="http://www.javacodegeeks.com/category/jvm-languages/ceylon/">&nbsp; &nbsp; –&nbsp;Ceylon</option><option value="http://www.javacodegeeks.com/category/jvm-languages/clojure/">&nbsp; &nbsp; –&nbsp;Clojure</option><option value="http://www.javacodegeeks.com/category/jvm-languages/groovy/">&nbsp; &nbsp; –&nbsp;Groovy</option><option value="http://www.javacodegeeks.com/category/jvm-languages/jruby/">&nbsp; &nbsp; –&nbsp;JRuby</option><option value="http://www.javacodegeeks.com/category/jvm-languages/kotlin/">&nbsp; &nbsp; –&nbsp;Kotlin</option><option value="http://www.javacodegeeks.com/category/jvm-languages/scala/">&nbsp; &nbsp; –&nbsp;Scala</option><option value="http://www.javacodegeeks.com/category/software-development/">&nbsp;Software Development</option><option value="http://www.javacodegeeks.com/category/agile/">&nbsp;Agile</option><option value="http://www.javacodegeeks.com/category/career/">&nbsp;Career</option><option value="http://www.javacodegeeks.com/category/communications/">&nbsp;Communications</option><option value="http://www.javacodegeeks.com/category/devops/">&nbsp;DevOps</option><option value="http://www.javacodegeeks.com/category/meta-jcg/">&nbsp;Meta JCG </option><option value="http://www.javacodegeeks.com/category/meta-jcg/best-of-the-week/">&nbsp; &nbsp; –&nbsp;Best Of The Week</option><option value="http://www.javacodegeeks.com/category/misc/">&nbsp; &nbsp; –&nbsp;Misc</option></select></div></div> </nav> </header><div id="main-content" class="container fade-in animated3 sidebar-narrow-left"><div class="content-wrap-wide"><div class="content"><div xmlns:v="http://rdf.data-vocabulary.org/#" id="crumbs"><span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" class="crumbs-home" href="http://www.javacodegeeks.com/"><i class="tieicon-home"></i>Home</a></span> » <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.javacodegeeks.com/category/java/">Java</a></span> » <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.javacodegeeks.com/category/java/enterprise-java/">Enterprise Java</a></span> » <span class="current">JPA Tutorial – The ULTIMATE Guide (PDF Download)</span></div> <section id="author-box"><div class="block-head"><h3>About Martin Mois</h3></div><div class="post-listing"><div class="author-avatar"> <img alt="" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/623d489d25fc1ad017a2ed2b417fddd8" srcset="http://0.gravatar.com/avatar/623d489d25fc1ad017a2ed2b417fddd8?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"></div><div class="author-description"> Martin is a Java EE enthusiast and works for an international operating company. He is interested in clean code and the software craftsmanship approach. He also strongly believes in automated testing and continuous integration.</div><div class="author-social"> <a class="ttip ext-link" href="http://martinsdeveloperworld.wordpress.com/" rel="external nofollow" data-wpel-target="_blank" original-title="Martin Mois &#39;s site"><img src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/author_site.png" width="18" height="18" alt=""></a></div><div class="clear"></div></div> </section> <article class="post-listing post-36797 post type-post status-publish format-standard has-post-thumbnail hentry category-enterprise-java tag-jpa tag-ultimate"><div class="post-inner"><h1 class="name post-title entry-title" itemprop="itemReviewed" itemscope="" itemtype="http://schema.org/Thing"><span itemprop="name">JPA Tutorial – The ULTIMATE Guide (PDF Download)</span></h1><p class="post-meta"> <span class="post-meta-author">Posted by: <a href="http://www.javacodegeeks.com/author/martin-mois/" title="">Martin Mois </a></span> <span class="post-cats">in <a href="http://www.javacodegeeks.com/category/java/enterprise-java/" rel="category tag">Enterprise Java</a></span> <span class="tie-date">February 16th, 2015</span></p><div class="clear"></div><div class="entry"><div class="ads-post"><div id="div-gpt-ad-1415445260332-2" style="width:300px; height:250px;float:left; margin-right:20px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-2');});</script></div></div><p><em><strong>EDITORIAL NOTE:</strong> The Java Persistence API (JPA) is a Java programming language application programming interface specification that describes the management of relational data in applications using Java Platform, Standard Edition and Java Platform, Enterprise Edition.</em></p><p><em>JPA has become the de-facto standard to write application code that interacts with Databases. For this reason we have provided an abundance of tutorials here at Java Code Geeks, most of which can be found <a href="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/#JPA">here</a>. Additionally, we have created the JPA mini-book which will get you introduced to JPA and smoothly transition the reader to more advanced concepts (get it for free by <a href="http://eepurl.com/xRlkj" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">joining our newsletter</a>).</em></p><p><em>Now, we wanted to create a standalone, reference post to provide a framework on how to work with JPA and help you quickly kick-start your JPA applications. Enjoy!</em><br></p><div id="mc4wp-form-1" class="form mc4wp-form mc4wp-form-39800 mc4wp-ajax"><form method="post" role="form"><div class="nlbox" style="font-family: Tahoma,Arial,Verdana,sans-serif; font-size: 13px;"><h1 style="font-family: inherit; font-size: 2em; margin: 0; text-align: center;">Want to be a JPA Master ?</h1><div style="background: url(&#39;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2015/05/jpa-tutorial_book.png&#39;) no-repeat; float:left; padding: 75px 120px 240px; margin-top: -10px;"></div><table style="margin-top: 20px; border: none; background-color: inherit; width: inherit; font-family: inherit; padding-left: 20px;"><tbody><tr><td style="vertical-align:top; border: none; padding: 0; font-size: inherit;"><h2 style="font-family: inherit; font-size: 1.5em; margin: 0;">Subscribe to our newsletter and download the JPA <span style="color: #CAB43D; text-shadow: 1px 1px #835D5D;">Ultimate</span> Guide <span style="text-decoration: underline;">right now!</span></h2><h5>In order to help you master programming with JPA, we have compiled a kick-ass guide with all the major JPA features and use cases! Besides studying them online you may download the eBook in PDF format!</h5><p>&nbsp;</p><p> <label for="mc4wp_email"><span style="font-weight: bold; font-size: 13pt;">Email address: </span></label> <input type="email" id="mc4wp_email" name="EMAIL" required="" placeholder="Your email address"></p> <input type="submit" value="Sign up"></td></tr></tbody></table></div><span class="mc4wp-ajax-loader" style="display: none;"></span><input type="hidden" name="_mc4wp_required_but_not_really" value="" style="display: none;"><input type="hidden" name="_mc4wp_timestamp" value="1438576895"><input type="hidden" name="_mc4wp_form_id" value="39800"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1"><input type="hidden" name="_mc4wp_form_submit" value="1"><input type="hidden" name="_mc4wp_form_nonce" value="762fe71465"></form><div class="mc4wp-response"></div></div><div class="toc"><h2>Table Of Contents</h2><dl><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#introduction">1. Introduction</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#setup">2. Project setup</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#basics">3. Basics</a></dt><dd><dl><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#entitymanager">3.1. EntityManager and Persistence Unit</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#transactions">3.2. Transactions</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#tables">3.3. Tables</a></dt></dl></dd><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#intheritance">4. Inheritance</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#relationships">5. Relationships</a></dt><dd><dl><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#relationships_onetoone">5.1. OneToOne</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#relationships_onetomany">5.2. OneToMany</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#relationships_manytomany">5.3. ManyToMany</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#relationships_embedded">5.4. Embedded / ElementCollection</a></dt></dl></dd><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#dataTypes">6. Data Types and Converters</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#criteriaapi">7. Criteria API</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#sequences">8. Sequences</a></dt><dt><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#download">9. Download</a></dt></dl></div><h2><a name="introduction"></a>1. Introduction</h2><p>The Java Persistence API (JPA) is a vendor independent specification for mapping Java objects to the tables of relational databases. Implementations of this specification allow application developers to abstract from the specific database prodcut they are working with and allow them to implement CRUD (create, read, update and delete) operations such that the same code works on different database products. These frameworks do not only handle the code that interacts with the database (the JDBC code) but also map the data to object structures used by the application.</p><p>The JPA consists of three different components:</p><ul><li><code>Entities</code>: In current versions of the JPA entities are plain old Java objects (POJOs). Older versions of the JPA required to subclass entities from classes provided by the JPA, but as these approaches are more difficult to test because of their hard dependecies to the framework, newer versions of the JPA do not require entities to subclass any framework class.</li><li><code>Object-relational metadata</code>: The application developer has to provide the mapping between the Java classes and their attributes to the tables and columns of the database. This can be done either trough dedicated configuration files or in newer version of the framework also by annotations.</li><li><code>Java Persistence Query Language (JPQL)</code>: As the JPA aims to abstract from the specific database product, the framework also provides a dedicated query langauge that can be used instead of SQL. This additional translation from JPQL to SQL allows the implementations of the framework to support different database dialects and allows the application developer to implement queries in a database independent way</li></ul><p>In this tutorial we are going through different aspects of the framework and will develop a simple Java SE application that stores and retrieves data in/from a relational database. We will use the following libraries/environments:</p><ul><li>maven &gt;= 3.0 as build environment</li><li>JPA 2.1 as contained in the Java Enterprise Edition (JEE) 7.0</li><li>Hibernate as an implementation of JPA (4.3.8.Final)</li><li>H2 as relational database in version 1.3.176</li></ul><h2><a name="setup"></a>2. Project setup</h2><p>As a first step we will create a simple maven project on the command line:</p><div id="highlighter_501563" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">mvn archetype:create -DgroupId=com.javacodegeeks.ultimate -DartifactId=jpa</code></td></tr></tbody></table></div></div></div><p>This command will create the following structure in the file system:</p><div id="highlighter_180304" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">|-- src</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |-- main</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp; `-- java</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- com </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- javacodegeeks</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- ultimate</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; `-- test</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp; `-- java</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- com </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- javacodegeeks</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">|&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-- ultimate</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">`-- pom.xml</code></td></tr></tbody></table></div></div></div><p>The libraries our implementation depends on are added to the dependencies section of the pom.xml file in the following way:</p><div id="highlighter_908263" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">properties</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">jee.version</code><code class="plain">&gt;7.0&lt;/</code><code class="keyword">jee.version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">h2.version</code><code class="plain">&gt;1.3.176&lt;/</code><code class="keyword">h2.version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">hibernate.version</code><code class="plain">&gt;4.3.8.Final&lt;/</code><code class="keyword">hibernate.version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">properties</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">dependencies</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;javax&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;javaee-api&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;${jee.version}&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">scope</code><code class="plain">&gt;provided&lt;/</code><code class="keyword">scope</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;com.h2database&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;h2&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;${h2.version}&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">groupId</code><code class="plain">&gt;org.hibernate&lt;/</code><code class="keyword">groupId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">artifactId</code><code class="plain">&gt;hibernate-entitymanager&lt;/</code><code class="keyword">artifactId</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">version</code><code class="plain">&gt;${hibernate.version}&lt;/</code><code class="keyword">version</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">dependency</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">dependencies</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p>To get a better overview of the separate versions, we define each version as a maven property and reference it later on in the dependencies section.</p><h2><a name="basics"></a>3. Basics</h2><h3><a name="entitymanager"></a>3.1. EntityManager and Persistence Unit</h3><p>Now we cat start to implement our first JPA functionality. Let’s start with a simple class that provides a <code>run()</code> method that is invoked in the application’s <code>main</code> method:</p><div id="highlighter_777291" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Main {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="keyword">static</code> <code class="keyword">final</code> <code class="plain">Logger LOGGER = Logger.getLogger(</code><code class="string">"JPA"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">static</code> <code class="keyword">void</code> <code class="plain">main(String[] args) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Main main = </code><code class="keyword">new</code> <code class="plain">Main();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">main.run();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">run() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">EntityManagerFactory factory = </code><code class="keyword">null</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">EntityManager entityManager = </code><code class="keyword">null</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">factory = Persistence.createEntityManagerFactory(</code><code class="string">"PersistenceUnit"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager = factory.createEntityManager();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">persistPerson(entityManager);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(Exception e) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.log(Level.SEVERE, e.getMessage(), e);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">finally</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(entityManager != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.close();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(factory != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">factory.close();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div></div></div><p>Nearly all interaction with the JPA is done through the <code>EntityManager</code>. To obtain an instance of an <code>EntityManager</code>, we have to create an instance of the <code>EntityManagerFactory</code>. Normally we only need one <code>EntityManagerFactory</code> for one “persistence unit” per application. A persistence unit is a set of JPA classes that is managed together with the database configuration in a file called <code>persistence.xml</code>:</p><div id="highlighter_657224" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;?</code><code class="keyword">xml</code> <code class="color1">version</code><code class="plain">=</code><code class="string">"1.0"</code> <code class="color1">encoding</code><code class="plain">=</code><code class="string">"UTF-8"</code> <code class="plain">?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;</code><code class="keyword">persistence</code> <code class="color1">xmlns</code><code class="plain">=</code><code class="string">"<a href="http://java.sun.com/xml/ns/persistence">http://java.sun.com/xml/ns/persistence</a>"</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">xmlns:xsi</code><code class="plain">=</code><code class="string">"<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">xsi:schemaLocation="<a href="http://java.sun.com/xml/ns/persistence">http://java.sun.com/xml/ns/persistence</a></code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain"><a href="http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd</a>" </code><code class="color1">version</code><code class="plain">=</code><code class="string">"1.0"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">persistence-unit</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"PersistenceUnit"</code> <code class="color1">transaction-type</code><code class="plain">=</code><code class="string">"RESOURCE_LOCAL"</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">provider</code><code class="plain">&gt;org.hibernate.ejb.HibernatePersistence&lt;/</code><code class="keyword">provider</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">properties</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"connection.driver_class"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"org.h2.Driver"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"hibernate.connection.url"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"jdbc:h2:~/jpa"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"hibernate.dialect"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"org.hibernate.dialect.H2Dialect"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"hibernate.hbm2ddl.auto"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"create"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"hibernate.show_sql"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;</code><code class="keyword">property</code> <code class="color1">name</code><code class="plain">=</code><code class="string">"hibernate.format_sql"</code> <code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">properties</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;/</code><code class="keyword">persistence-unit</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="plain">&lt;/</code><code class="keyword">persistence</code><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div><p>This file is created in the <code>src/main/resource/META-INF</code> folder of the maven project. As you can see, we define one <code>persistence-unit</code> with the name <code>PersistenceUnit</code> that has the <code>transaction-type</code> <code>RESOURCE_LOCAL</code>. The transaction-type determines how transactions are handled in the application.</p><p>In our sample application we want to handle them on our own, hence we specify here <code>RESOURCE_LOCAL</code>. When you use a JEE container then the container is responsible for setting up the <code>EntityManagerFactory</code> and only provides you he <code>EntityManager</code>. The container then also handles the begin and end of each transaction. In this case you would provide the value <code>JTA</code>.</p><p>By setting the <code>provider</code> to <code>org.hibernate.ejb.HibernatePersistence</code> we select the JPA implementation we want to use. Because we have included Hibernate as JPA provider on the classpath by defining a dependency to it, we can reference the provider implementation here by class name.</p><p>The next step in <code>persistence.xml</code> is to inform the JPA provider about the database we want to use. This is done by specifying the JDBC driver that Hibernate should use. As we want to use the H2 database (www.h2database.com), the property <code>connection.driver_class</code> is set to the value <code>org.h2.Driver</code>.</p><p>In order to enable Hibernate to create connections to the database we also have to provide the connection URL. H2 provides the option to create the database within a single file which path is given in the JDBC URL. Hence the JDBC URL <code>jdbc:h2:~/jpa</code> tells H2 to create in the user’s home directory a file called <code>jpa.h2.db</code>.</p><p>H2 is a fast open source database that can be easily embedded in Java applications as it comes as a single jar file with a size of about 1.5 MB. This makes it suitable for our purpose of creating a simple sample application to demonstrate the usage of JPA. In projects that require solutions that scale better for huge amounts of data you would probably choose a different database product, but for small amount of data that have strong relations H2 is good choice.</p><p>The next thing we have to tell Hibernate is the JDBC dialect that it should use. As Hibernate provides a dedicated dialect implementation for H2, we choose this one with the property <code>hibernate.dialect</code>. With this dialect Hibernate is capable of creating the appropriate SQL statements for the H2 database.</p><p>Last but not least we provide three options that come handy when developing a new application, but that would not be used in production environments. The first of them is the property <code>hibernate.hbm2ddl.auto</code> that tells Hibernate to create all tables from scratch at startup. If the table already exists, it will be deleted. In our sample application this is a good feature as we can rely on the fact that the database is empty at the beginnig and that all changes we have made to the schema since our last start of the application are reflected in the schema.</p><p>The second option is <code>hibernate.show_sql</code> that tells Hibernate to print every SQL statement that it issues to the database on the command line. With this option enabled we can easily trace all statements and have a look if everything works as expected. And finally we tell Hibernate to pretty print the SQL for better readability by setting the property <code>hibernate.format_sql</code> to <code>true</code>.</p><p>Now that we have setup the <code>persistence.xml</code> file, we get back to our Java code above:</p><div id="highlighter_733644" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">EntityManagerFactory factory = </code><code class="keyword">null</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">EntityManager entityManager = </code><code class="keyword">null</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">factory = Persistence.createEntityManagerFactory(</code><code class="string">"PersistenceUnit"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager = factory.createEntityManager();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">persistPerson(entityManager);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(Exception e) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.log(Level.SEVERE, e.getMessage(), e);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">} </code><code class="keyword">finally</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(entityManager != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.close();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(factory != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">factory.close();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>After having obtained an instance of the <code>EntityManagerFactory</code> and from it an instance of <code>EntityManager</code> we can use them in the method <code>persistPerson</code> to save some data in the database. Please note that after we have done our work we have to close both the <code>EntityManager</code> as well as the <code>EntityManagerFactory</code>.</p><h3><a name="transactions"></a>3.2. Transactions</h3><p>The <code>EntityManager</code> represents a persistence unit and therefore we will need in <code>RESOURCE_LOCAL</code> applications only one instance of the <code>EntityManager</code>. A persistence unit is a cache for the entities that represent parts of the state stored in the database as well as a connection to the database. In order to store data in the database we therefore have to pass it to the <code>EntityManager</code> and therewith to the underlying cache. In case you want to create a new row in the database, this is done by invoking the method <code>persist()</code> on the <code>EntityManager</code> as demonstrated in the following code:</p><div id="highlighter_756498" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">void</code> <code class="plain">persistPerson(EntityManager entityManager) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">EntityTransaction transaction = entityManager.getTransaction();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">transaction.begin();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Person person = </code><code class="keyword">new</code> <code class="plain">Person();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person.setFirstName(</code><code class="string">"Homer"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person.setLastName(</code><code class="string">"Simpson"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.persist(person);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">transaction.commit();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(Exception e) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(transaction.isActive()) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">transaction.rollback();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>But before we can call <code>persist()</code> we have to open a new transaction by calling <code>transaction.begin()</code> on a new transaction object we have retrieved from the <code>EntityManager</code>. If we would omit this call, Hibernate would throw a <code>IllegalStateException</code> that tells us that we have forgotten to run the <code>persist()</code> within a transaction:</p><div id="highlighter_626125" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">java.lang.IllegalStateException: Transaction not active</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:</code><code class="value">70</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">at jpa.Main.persistPerson(Main.java:</code><code class="value">87</code><code class="plain">)</code></td></tr></tbody></table></div></div></div><p>After calling <code>persist()</code> we have to commit the transaction, i.e. send the data to the database and store it there. In case an exception is thrown within the try block, we have to rollback the transaction we have begun before. But as we can only rollback active transactions, we have to check before if the current transaction is already running, as it may happen that the exception is thrown within the <code>transaction.begin()</code> call.</p><h3><a name="tables"></a>3.3. Tables</h3><p>The class Person is mapped to the database table <code>T_PERSON</code> by adding the annotation <code>@Entity</code>:</p><div id="highlighter_41589" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PERSON"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Person {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Long id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String firstName;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String lastName;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@GeneratedValue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setId(Long id) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.id = id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"FIRST_NAME"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getFirstName() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">firstName;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setFirstName(String firstName) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.firstName = firstName;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"LAST_NAME"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getLastName() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">lastName;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setLastName(String lastName) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.lastName = lastName;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The additional annotation <code>@Table</code> is optional, but you can use it to specify a specific table name. In our example we want that all tables have the prefix T_, hence we tell Hibernate to create the table <code>T_PERSON</code>. The table <code>T_PERSON</code> has three columns: <code>ID</code>, <code>FIRST_NAME</code>, <code>LAST_NAME</code>.</p><p>This information is provided to the JPA provider with the annotations <code>@Column</code> and their attribute <code>name</code>. Even this annotation is optional. JPA will use all properties of the Java class that have a setter and getter method and create columns for them, as long as you do not exclude them by annotating them with <code>@Transient</code>. On the other hand you can specify more information for each column by using the other attributes that the <code>@Column</code> annotation provides:</p><div id="highlighter_863278" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"FIRST_NAME"</code><code class="plain">, length = </code><code class="value">100</code><code class="plain">, nullable = </code><code class="keyword">false</code><code class="plain">, unique = </code><code class="keyword">false</code><code class="plain">)</code></td></tr></tbody></table></div></div></div><p>The example above restricts the length of the string colum to 100 characters, states that the column must not contain null values and is not unique. Trying to insert null as first name into this table would provoke a constraint violation on the database and cause the current transaction to roll back.</p><p>The two annotations <code>@Id</code> and <code>@GeneratedValue</code> tell JPA that this value is the primary key for this table and that it should be generated automatically.</p><p>In the example code above we have added the JPA annotations to the getter methods for each field that should be mapped to a database column. Another way would be to annotate the field directly instead of the getter method:</p><div id="highlighter_697262" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PERSON"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Person {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@GeneratedValue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Long id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"FIRST_NAME"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String firstName;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"LAST_NAME"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String lastName;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div></div></div><p>The two ways are more or less equal, the only difference they have plays a role when you want to override annotations for fields in subclasses. As we will see in the further course of this tutorial, it is possible to extend an existing entity in order to inherit its fields. When we place the JPA annotations at the field level, we cannot override them as we can by overriding the corresponding getter method.</p><p>One also has to pay attention to keep the way to annotate entities the same for one entity hierarchy. You can mix annotation of fields and methods within one JPA project, but within one entity and all its subclasses is must be consistent. If you need to change the way of annotatio within a subclass hierarchy, you can use the JPA annotation <code>Access</code> to specify that a certain subclass uses a different way to annotate fields and methods:</p><div id="highlighter_661594" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_GEEK"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="color1">@Access</code><code class="plain">(AccessType.PROPERTY)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Geek </code><code class="keyword">extends</code> <code class="plain">Person {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div></div></div><p>The code snippet above tells JPA that this class is going to use annotations on the method level, whereas the superclass may have used annotations on field level.</p><p>When we run the code above, Hibernate will issue the following queries to our local H2 database:</p><div id="highlighter_669918" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">Hibernate: drop table T_PERSON </code><code class="keyword">if</code> <code class="plain">exists</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">Hibernate: create table T_PERSON (</code><code class="functions">id</code> <code class="plain">bigint generated by default as identity, FIRST_NAME varchar(255), LAST_NAME varchar(255), primary key (</code><code class="functions">id</code><code class="plain">))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">Hibernate: insert into T_PERSON (</code><code class="functions">id</code><code class="plain">, FIRST_NAME, LAST_NAME) values (null, ?, ?)</code></td></tr></tbody></table></div></div></div><p>As we can see, Hibernate first drops the table <code>T_PERSON</code> if it exists and re-creates it afterwards. If creates the table with two columns of the type <code>varchar(255)</code> (<code>FIRST_NAME</code>, <code>LAST_NAME</code>) and one column named <code>id</code> of type <code>bigint</code>. The latter column is defined as primary key and its values are automatically generated by the database when we insert a new value.</p><p>We can check that everything is correct by using the Shell that ships with H2. In order to use this Shell we just need the jar archive <code>h2-1.3.176.jar</code>:</p><div id="highlighter_598305" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">&gt;java -</code><code class="functions">cp</code> <code class="plain">h2-1.3.176.jar org.h2.tools.Shell -url jdbc:h2:~/jpa</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from T_PERSON;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">ID | FIRST_NAME | LAST_NAME</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">1&nbsp; | Homer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Simpson</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">(4 rows, 4 ms)</code></td></tr></tbody></table></div></div></div><p>The query result above shows us that the table <code>T_PERSON</code> actually contains one row with id 1 and values for first name and last name.</p><h2><a name="intheritance"></a>4. Inheritance</h2><p>After having accomplished the setup and this easy use case, we turn towards some more complex use cases. Let’s assume we want to store next to persons also information about geeks and about their favourite programming language. As geeks are also persons, we would model this in the Java world as subclass relation to Person:</p><div id="highlighter_481359" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_GEEK"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Geek </code><code class="keyword">extends</code> <code class="plain">Person {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String favouriteProgrammingLanguage;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">List&lt;Project&gt; projects = </code><code class="keyword">new</code> <code class="plain">ArrayList&lt;Project&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"FAV_PROG_LANG"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getFavouriteProgrammingLanguage() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">favouriteProgrammingLanguage;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setFavouriteProgrammingLanguage(String favouriteProgrammingLanguage) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.favouriteProgrammingLanguage = favouriteProgrammingLanguage;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Adding the annotations <code>@Entity</code> and <code>@Table</code> to the class lets Hibernate create the new table <code>T_GEEK</code>:</p><div id="highlighter_972898" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">Hibernate: create table T_PERSON (DTYPE varchar(31) not null, </code><code class="functions">id</code> <code class="plain">bigint generated by default as identity, FIRST_NAME varchar(255), LAST_NAME varchar(255), FAV_PROG_LANG varchar(255), primary key (</code><code class="functions">id</code><code class="plain">))</code></td></tr></tbody></table></div></div></div><p>We can see that Hibernate creates one table for both entities and puts the information whether we have stored a <code>Person</code> or a <code>Geek</code> within a new column named <code>DTYPE</code>. Let’s persist some geeks in our database (for better readability I have omitted the block that catches any exception and rolls back the transaction):</p><div id="highlighter_251352" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">void</code> <code class="plain">persistGeek(EntityManager entityManager) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">EntityTransaction transaction = entityManager.getTransaction();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">transaction.begin();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Geek geek = </code><code class="keyword">new</code> <code class="plain">Geek();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFirstName(</code><code class="string">"Gavin"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setLastName(</code><code class="string">"Coffee"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFavouriteProgrammingLanguage(</code><code class="string">"Java"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.persist(geek);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek = </code><code class="keyword">new</code> <code class="plain">Geek();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFirstName(</code><code class="string">"Thomas"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setLastName(</code><code class="string">"Micro"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFavouriteProgrammingLanguage(</code><code class="string">"C#"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.persist(geek);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek = </code><code class="keyword">new</code> <code class="plain">Geek();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFirstName(</code><code class="string">"Christian"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setLastName(</code><code class="string">"Cup"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.setFavouriteProgrammingLanguage(</code><code class="string">"Java"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">entityManager.persist(geek);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">transaction.commit();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>After having executed this method, the database table <code>T_PERSON</code> contains the following rows (together with the person we have already inserted):</p><div id="highlighter_977863" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_person;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">DTYPE&nbsp; | ID | FIRST_NAME | LAST_NAME | FAV_PROG_LANG</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">Person | 1&nbsp; | Homer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Simpson&nbsp;&nbsp; | null</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">Geek&nbsp;&nbsp; | 2&nbsp; | Gavin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Coffee&nbsp;&nbsp;&nbsp; | Java</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">Geek&nbsp;&nbsp; | 3&nbsp; | Thomas&nbsp;&nbsp;&nbsp;&nbsp; | Micro&nbsp;&nbsp;&nbsp;&nbsp; | C</code><code class="comments">#</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">Geek&nbsp;&nbsp; | 4&nbsp; | Christian&nbsp; | Cup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Java</code></td></tr></tbody></table></div></div></div><p>As expected the new column <code>DTYPE</code> determines which type of person we have. The column <code>FAV_PROG_LANG</code> has the value <code>null</code> for persons that are no geeks.</p><p>If you do not like the name or type of the discriminator column, you can change it with the corresponding annotation. In the following we want that the column has the name <code>PERSON_TYPE</code> and is an integer column instead of a string column:</p><div id="highlighter_875873" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@DiscriminatorColumn</code><code class="plain">(name=</code><code class="string">"PERSON_TYPE"</code><code class="plain">, discriminatorType = DiscriminatorType.INTEGER)</code></td></tr></tbody></table></div></div></div><p>This yields to the following result:</p><div id="highlighter_200637" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_person;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">PERSON_TYPE | ID | FIRST_NAME | LAST_NAME | FAV_PROG_LANG</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">-1907849355 | 1&nbsp; | Homer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Simpson&nbsp;&nbsp; | null</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">2215460&nbsp;&nbsp;&nbsp;&nbsp; | 2&nbsp; | Gavin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Coffee&nbsp;&nbsp;&nbsp; | Java</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">2215460&nbsp;&nbsp;&nbsp;&nbsp; | 3&nbsp; | Thomas&nbsp;&nbsp;&nbsp;&nbsp; | Micro&nbsp;&nbsp;&nbsp;&nbsp; | C</code><code class="comments">#</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">2215460&nbsp;&nbsp;&nbsp;&nbsp; | 4&nbsp; | Christian&nbsp; | Cup&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Java</code></td></tr></tbody></table></div></div></div><p>Not in every situation you want to have one table for all different types you want to store in your database. This is especially the case when the different types do not have nearly all columns in common. Therefore JPA lets you specify how to lay out the different columns. These three options are available:</p><ul><li><code>SINGLE_TABLE</code>: This strategy maps all classes to one single table. As a consequence that each row has all columns for all types the database needs additional storage for the empty columns. On the other hand this strategy brings the advantage that a query never has to use a join and therefore can be much faster.</li><li><code>JOINED</code>: This strategy creates for each type a separate table. Each table therefore only contains the state of the mapped entity. To load one entity, the JPA provider has to load the data for one entity from all tables the entity is mapped to. This approach reduces storage space but on the other hand introduces join queries which can decrease query speed significantly.</li><li><code>TABLE_PER_CLASS</code>: Like the <code>JOINED</code> strategy, this strategy creates a separate table for each entity type. But in contrast to the <code>JOINED</code> strategy these tables contain all information necessary to load this entity. Hence no join queries are necessary for loading the entities but it introduces in situations where the concrete subclass is not known additional SQL quries in order to determine it.</li></ul><p>To change our implementation to use the <code>JOINED</code> strategy, all we have to do is to add the following annotation to the base class:</p><div id="highlighter_465710" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Inheritance</code><code class="plain">(strategy = InheritanceType.JOINED)</code></td></tr></tbody></table></div></div></div><p>Now Hibernate creates two tables for persons and geeks:</p><div id="highlighter_594512" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">Hibernate: create table T_GEEK (FAV_PROG_LANG varchar(255), </code><code class="functions">id</code> <code class="plain">bigint not null, primary key (</code><code class="functions">id</code><code class="plain">))</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">Hibernate: create table T_PERSON (</code><code class="functions">id</code> <code class="plain">bigint generated by default as identity, FIRST_NAME varchar(255), LAST_NAME varchar(255), primary key (</code><code class="functions">id</code><code class="plain">))</code></td></tr></tbody></table></div></div></div><p>Having added the person and the geeks we get the following result:</p><div id="highlighter_921304" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_person;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">ID | FIRST_NAME | LAST_NAME</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">1&nbsp; | Homer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Simpson</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">2&nbsp; | Gavin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Coffee</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">3&nbsp; | Thomas&nbsp;&nbsp;&nbsp;&nbsp; | Micro</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">4&nbsp; | Christian&nbsp; | Cup</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">(4 rows, 12 ms)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_geek;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">FAV_PROG_LANG | ID</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">Java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">C</code><code class="comments">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 3</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="plain">Java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 4</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">(3 rows, 7 ms)</code></td></tr></tbody></table></div></div></div><p>As expected the data is distributed over the two tables. The base table <code>T_PERSON</code> contains all the common attributes whereas the table <code>T_GEEK</code> only contains rows for each geek. Each row references a person by the value of the column <code>ID</code>.</p><p>When we issue a query for persons, the following SQL is send to the database:</p><div id="highlighter_115389" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">select</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.id </code><code class="keyword">as</code> <code class="plain">id1_2_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.FIRST_NAME </code><code class="keyword">as</code> <code class="plain">FIRST_NA2_2_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.LAST_NAME </code><code class="keyword">as</code> <code class="plain">LAST_NAM3_2_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_1_.FAV_PROG_LANG </code><code class="keyword">as</code> <code class="plain">FAV_PROG1_1_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color2">case</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">when</code> <code class="plain">person0_1_.id </code><code class="keyword">is</code> <code class="color1">not</code> <code class="color1">null</code> <code class="keyword">then</code> <code class="plain">1 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">when</code> <code class="plain">person0_.id </code><code class="keyword">is</code> <code class="color1">not</code> <code class="color1">null</code> <code class="keyword">then</code> <code class="plain">0 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">end</code> <code class="keyword">as</code> <code class="plain">clazz_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="keyword">from</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PERSON person0_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="color2">left</code> <code class="color1">outer</code> <code class="color1">join</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_GEEK person0_1_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">on</code> <code class="plain">person0_.id=person0_1_.id</code></td></tr></tbody></table></div></div></div><p>We see that a join query is necessary to include the data from the table <code>T_GEEK</code> and that Hibernate encodes the information if one row is a geek or by returning an integer (see case statement).</p><p>The Java code to issue such a query looks like the following:</p><div id="highlighter_680416" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">TypedQuery&lt;Person&gt; query = entityManager.createQuery(</code><code class="string">"from Person"</code><code class="plain">, Person.</code><code class="keyword">class</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">List&lt;Person&gt; resultList = query.getResultList();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">for</code> <code class="plain">(Person person : resultList) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">StringBuilder sb = </code><code class="keyword">new</code> <code class="plain">StringBuilder();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">sb.append(person.getFirstName()).append(</code><code class="string">" "</code><code class="plain">).append(person.getLastName());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(person </code><code class="keyword">instanceof</code> <code class="plain">Geek) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Geek geek = (Geek)person;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">sb.append(</code><code class="string">" "</code><code class="plain">).append(geek.getFavouriteProgrammingLanguage());</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.info(sb.toString());</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>First of all we create a <code>Query</code> object by calling EntityManager’s <code>createQuery()</code> method. The query clause can omit the select keyword. The second parameter helps to parameterize the method such that the <code>Query</code> is of type <code>Person</code>. Issuing the query is simply done by calling <code>query.getResultList()</code>. The returned list is iterable, hence we can just iterate over the <code>Person</code> objects. If we want to know whether we have a <code>Person</code> or a <code>Geek</code>, we can just use Java’s <code>instanceof</code> operator.</p><p>Running the above code leads to the following output:</p><div id="highlighter_727821" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">Homer Simpson</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">Gavin Coffee Java</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">Thomas Micro C</code><code class="comments">#</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">Christian Cup Java</code></td></tr></tbody></table></div></div></div><h2><a name="relationships"></a>5. Relationships</h2><p>Until now we have not modelled any relations between different entities except the <code>extends</code> relation between a subclass and its superclass. JPA offers different relations between entities/tables that can be modelled:</p><ul><li><code>OneToOne</code>: In this relationship each entity has exactly one reference to the other entity and vice versa.</li><li><code>OneToMany / ManyToOne</code>: In this relationship one entity can have multiple child entities and each child entity belongs to one parent entity.</li><li><code>ManyToMany</code>: In this relationship multiple entites of one type can have multiple references to entities from the other type.</li><li><code>Embedded</code>: In this relationship the other entity is stored in the same table as the parent entity (i.e. we have two entites for one table).</li><li><code>ElementCollection</code>: This relationship is similar to the <code>OneToMany</code> relation but in contrast to it the referenced entity is an <code>Embedded</code> entity. This allows to define <code>OneToMany</code> relationships to simple objects that are stored in contrast to the “normal” <code>Embedded</code> relationship in another table.</li></ul><h2><a name="relationships_onetoone"></a>5.1. OneToOne</h2><p>Let’s start with an <code>OneToOne</code> relationship by adding a new entity <code>IdCard</code>:</p><div id="highlighter_668572" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_ID_CARD"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">IdCard {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Long id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String idNumber;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Date issueDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@GeneratedValue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setId(Long id) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.id = id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"ID_NUMBER"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getIdNumber() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">idNumber;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setIdNumber(String idNumber) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.idNumber = idNumber;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"ISSUE_DATE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Temporal</code><code class="plain">(TemporalType.TIMESTAMP)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Date getIssueDate() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">issueDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setIssueDate(Date issueDate) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.issueDate = issueDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Note that we have used a common <code>java.util.Date</code> to model the issue date of the ID card. We can use the annotation <code>@Temporal</code> to tell JPA how we want the <code>Date</code> to be serialized to the database. Depending on the underlying database product this column is mapped to an appropriate date/timestamp type. Possible values for this annotation are next to <code>TIMESTAMP</code>: <code>TIME</code> and <code>DATE</code>.</p><p>We tell JPA that each person has exactly one ID card:</p><div id="highlighter_406325" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PERSON"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Person {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">IdCard idCard;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@OneToOne</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@JoinColumn</code><code class="plain">(name = </code><code class="string">"ID_CARD_ID"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">IdCard getIdCard() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">idCard;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The column in the table <code>T_PERSON</code> that contains the foreign key to the table <code>T_ID_CARD</code> is stored in the additional column <code>ID_CARD_ID</code>. Now Hibernate generates these two tables in the following way:</p><div id="highlighter_971906" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">create</code> <code class="keyword">table</code> <code class="plain">T_ID_CARD (</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">id </code><code class="keyword">bigint</code> <code class="plain">generated </code><code class="keyword">by</code> <code class="keyword">default</code> <code class="keyword">as</code> <code class="plain">identity,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ID_NUMBER </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ISSUE_DATE </code><code class="keyword">timestamp</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">primary</code> <code class="keyword">key</code> <code class="plain">(id)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">create</code> <code class="keyword">table</code> <code class="plain">T_PERSON (</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">id </code><code class="keyword">bigint</code> <code class="plain">generated </code><code class="keyword">by</code> <code class="keyword">default</code> <code class="keyword">as</code> <code class="plain">identity,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">FIRST_NAME </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LAST_NAME </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ID_CARD_ID </code><code class="keyword">bigint</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">primary</code> <code class="keyword">key</code> <code class="plain">(id)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">)</code></td></tr></tbody></table></div></div></div><p>An important fact is that we can configure when the ID card entity should be loaded. Therefore we can add the attribute <code>fetch</code> to the <code>@OneToOne</code> annotation:</p><div id="highlighter_348175" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@OneToOne</code><code class="plain">(fetch = FetchType.EAGER)</code></td></tr></tbody></table></div></div></div><p>The value <code>FetchType.EAGER</code> is the default value and specifies that each time we load a person we also want to load the ID card. On the other hand we can specify that we only want to load the ID when we actually access it by calling <code>person.getIdCard()</code>:</p><div id="highlighter_588405" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@OneToOne</code><code class="plain">(fetch = FetchType.LAZY)</code></td></tr></tbody></table></div></div></div><p>This result in the following SQL statements when loading all persons:</p><div id="highlighter_842589" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">Hibernate: </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions">select</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.</code><code class="functions">id</code> <code class="plain">as id1_3_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.FIRST_NAME as FIRST_NA2_3_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.ID_CARD_ID as ID_CARD_4_3_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.LAST_NAME as LAST_NAM3_3_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_1_.FAV_PROG_LANG as FAV_PROG1_1_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">case</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">when person0_1_.</code><code class="functions">id</code> <code class="plain">is not null </code><code class="keyword">then</code> <code class="plain">1 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">when person0_.</code><code class="functions">id</code> <code class="plain">is not null </code><code class="keyword">then</code> <code class="plain">0 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">end as clazz_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">from</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PERSON person0_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">left outer </code><code class="functions">join</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_GEEK person0_1_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">on person0_.</code><code class="functions">id</code><code class="plain">=person0_1_.</code><code class="functions">id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">Hibernate: </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="functions">select</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">idcard0_.</code><code class="functions">id</code> <code class="plain">as id1_2_0_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">idcard0_.ID_NUMBER as ID_NUMBE2_2_0_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">idcard0_.ISSUE_DATE as ISSUE_DA3_2_0_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">from</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_ID_CARD idcard0_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">where</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">idcard0_.</code><code class="functions">id</code><code class="plain">=?</code></td></tr></tbody></table></div></div></div><p>We can see that we now have to load each ID card separately. Therefore this feature has to be used wisely, as it can cause hundreds of additional select queries in case you are loading a huge number of persons and you know that you are loading each time also the ID card.</p><h2><a name="relationships_onetomany"></a>5.2. OneToMany</h2><p>Another important relationship is the <code>@OneToMany</code> relationship. In our example every <code>Person</code> should have one ore more phones:</p><div id="highlighter_790450" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PHONE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Phone {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Long id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String number;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Person person;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@GeneratedValue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setId(Long id) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.id = id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"NUMBER"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getNumber() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">number;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setNumber(String number) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.number = number;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@ManyToOne</code><code class="plain">(fetch = FetchType.LAZY)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@JoinColumn</code><code class="plain">(name = </code><code class="string">"PERSON_ID"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Person getPerson() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">person;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setPerson(Person person) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.person = person;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Each phone has an internal id as well as the number. Next to this we also have to specify the relation to the <code>Person</code> with the <code>@ManyToOne</code>, as we have “many” phones for “one” person. The annotation <code>@JoinColumn</code> specifies the column in the <code>T_PHONE</code> table that stores the foreign key to the person.</p><p>On the other side of the relation we have to add a <code>List</code> of <code>Phone</code> objects to the person and annotate the corresponding getter method with <code>@OneToMany</code> as we have “one” person with “many” phones:</p><div id="highlighter_789113" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">private</code> <code class="plain">List&lt;Phone&gt; phones = </code><code class="keyword">new</code> <code class="plain">ArrayList&lt;&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="color1">@OneToMany</code><code class="plain">(mappedBy = </code><code class="string">"person"</code><code class="plain">, fetch = FetchType.LAZY)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">public</code> <code class="plain">List&lt;Phone&gt; getPhones() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">phones;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The value of the attribute <code>mappedBy</code> tells JPA which list on the other side of the relation (here <code>Phone.person</code>) this annotation references.</p><p>As we do not want to load all phones every time we load the person, we set the relationship to be fetched lazy (although this is the default value and we would have to set it explicitly). Now we get an additional selecte statment each time we load the phones for one person:</p><div id="highlighter_839682" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">select</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.PERSON_ID </code><code class="keyword">as</code> <code class="plain">PERSON_I3_3_0_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.id </code><code class="keyword">as</code> <code class="plain">id1_4_0_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.id </code><code class="keyword">as</code> <code class="plain">id1_4_1_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.NUMBER </code><code class="keyword">as</code> <code class="plain">NUMBER2_4_1_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.PERSON_ID </code><code class="keyword">as</code> <code class="plain">PERSON_I3_4_1_ </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="keyword">from</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PHONE phones0_ </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="keyword">where</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones0_.PERSON_ID=?</code></td></tr></tbody></table></div></div></div><p>As the value for the attribute <code>fetch</code> is set at compile time, we unfortunately cannot change it at runtime. But if we know that we want to load all phone numbers in this use case and in other use cases not, we can leave the relation to be loaded lazy and add the clause <code>left join fetch</code> to our JPQL query in order to tell the JPA provider to also load all phones in this specific query even if the relation is set to <code>FetchType.LAZY</code>. Such a query can look like the following one:</p><div id="highlighter_573637" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">TypedQuery&lt;Person&gt; query = entityManager.createQuery(</code><code class="string">"from Person p left join fetch p.phones"</code><code class="plain">, Person.</code><code class="keyword">class</code><code class="plain">);</code></td></tr></tbody></table></div></div></div><p>We give the <code>Person</code> the alias <code>p</code> and tell JPA to also fetch all instances of <code>phones</code> that belong to each person. This results with Hibernate in the following select query:</p><div id="highlighter_665552" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">select</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.id </code><code class="keyword">as</code> <code class="plain">id1_3_0_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones1_.id </code><code class="keyword">as</code> <code class="plain">id1_4_1_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.FIRST_NAME </code><code class="keyword">as</code> <code class="plain">FIRST_NA2_3_0_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.ID_CARD_ID </code><code class="keyword">as</code> <code class="plain">ID_CARD_4_3_0_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_.LAST_NAME </code><code class="keyword">as</code> <code class="plain">LAST_NAM3_3_0_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">person0_1_.FAV_PROG_LANG </code><code class="keyword">as</code> <code class="plain">FAV_PROG1_1_0_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color2">case</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">when</code> <code class="plain">person0_1_.id </code><code class="keyword">is</code> <code class="color1">not</code> <code class="color1">null</code> <code class="keyword">then</code> <code class="plain">1 </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">when</code> <code class="plain">person0_.id </code><code class="keyword">is</code> <code class="color1">not</code> <code class="color1">null</code> <code class="keyword">then</code> <code class="plain">0 </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">end</code> <code class="keyword">as</code> <code class="plain">clazz_0_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones1_.NUMBER </code><code class="keyword">as</code> <code class="plain">NUMBER2_4_1_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones1_.PERSON_ID </code><code class="keyword">as</code> <code class="plain">PERSON_I3_4_1_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones1_.PERSON_ID </code><code class="keyword">as</code> <code class="plain">PERSON_I3_3_0__,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">phones1_.id </code><code class="keyword">as</code> <code class="plain">id1_4_0__ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="keyword">from</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PERSON person0_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="color2">left</code> <code class="color1">outer</code> <code class="color1">join</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_GEEK person0_1_ </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">on</code> <code class="plain">person0_.id=person0_1_.id </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="color2">left</code> <code class="color1">outer</code> <code class="color1">join</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PHONE phones1_ </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">on</code> <code class="plain">person0_.id=phones1_.PERSON_ID</code></td></tr></tbody></table></div></div></div><p>Please note that without the keyword <code>left</code> (i.e. only <code>join fetch</code>) Hibernate will create an inner join and only load persons that actually have at least one phone number.</p><h2><a name="relationships_manytomany"></a>5.3. ManyToMany</h2><p>Another interesting relationship is the <code>@ManyToMany</code> one. As one geek can join many projects and one project consists of many geeks, we model the relationship between <code>Project</code> and <code>Geek</code> as <code>@ManyToMany</code> relationship:</p><div id="highlighter_890934" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PROJECT"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Project {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Long id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">String title;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">List&lt;Geek&gt; geeks = </code><code class="keyword">new</code> <code class="plain">ArrayList&lt;Geek&gt;();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@GeneratedValue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setId(Long id) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.id = id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"TITLE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">String getTitle() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">title;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setTitle(String title) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.title = title;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@ManyToMany</code><code class="plain">(mappedBy=</code><code class="string">"projects"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">List&lt;Geek&gt; getGeeks() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">geeks;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setGeeks(List&lt;Geek&gt; geeks) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.geeks = geeks;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Our project has an internal id, a title of type <code>String</code> and a list of <code>Geeks</code>. The getter method for the geeks attribute is annotated with <code>@ManyToMany(mappedBy="projects")</code>. The value of the attribute <code>mappedBy</code> tells JPA the class member on the other side of the relation this relation belongs to as there can be more than one list of projects for a geek. The class <code>Geek</code> gets a list of projects and :</p><div id="highlighter_654174" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="plain">List&lt;Project&gt; projects = </code><code class="keyword">new</code> <code class="plain">ArrayList&lt;&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="color1">@ManyToMany</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="color1">@JoinTable</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">name=</code><code class="string">"T_GEEK_PROJECT"</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">joinColumns={</code><code class="color1">@JoinColumn</code><code class="plain">(name=</code><code class="string">"GEEK_ID"</code><code class="plain">, referencedColumnName=</code><code class="string">"ID"</code><code class="plain">)},</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">inverseJoinColumns={</code><code class="color1">@JoinColumn</code><code class="plain">(name=</code><code class="string">"PROJECT_ID"</code><code class="plain">, referencedColumnName=</code><code class="string">"ID"</code><code class="plain">)})</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">public</code> <code class="plain">List&lt;Project&gt; getProjects() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">projects;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>For a <code>@ManyToMany</code> we need an additional table. This table is configured by the <code>@JoinTable</code> annotation that describes the table used to store the geek’s assignments to the different projects. It has the name <code>GEEK_PROJECT</code> and stores the geek’s id in the column <code>GEEK_ID</code> and the project’s id in the column <code>PROJECT_ID</code>. The referenced column is on both sides just <code>ID</code> as we have named the internal id in both classes <code>ID</code>.</p><p>A <code>@ManyToMany</code> is also per default fetched lazy, as in most cases we do not want to load all projects assignments when we load a single geek.</p><p>As the relation <code>@ManyToMany</code> is equal on both sides, we could have also annotated the two lists in both classes the other way round:</p><div id="highlighter_741728" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@ManyToMany</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="color1">@JoinTable</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">name=</code><code class="string">"T_GEEK_PROJECT"</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">joinColumns={</code><code class="color1">@JoinColumn</code><code class="plain">(name=</code><code class="string">"PROJECT_ID"</code><code class="plain">, referencedColumnName=</code><code class="string">"ID"</code><code class="plain">)},</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">inverseJoinColumns={</code><code class="color1">@JoinColumn</code><code class="plain">(name=</code><code class="string">"GEEK_ID"</code><code class="plain">, referencedColumnName=</code><code class="string">"ID"</code><code class="plain">)})</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="keyword">public</code> <code class="plain">List&lt;Geek&gt; getGeeks() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">geeks;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>And on the other <code>Geek</code> side:</p><div id="highlighter_292000" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@ManyToMany</code><code class="plain">(mappedBy=</code><code class="string">"geeks"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">public</code> <code class="plain">List&lt;Project&gt; getProjects() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">projects;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>In both cases Hibernate creates a new table <code>T_GEEK_PROJECT</code> with the two colums <code>PROJECT_ID</code> and <code>GEEK_ID</code>:</p><div id="highlighter_823198" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_geek_project;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">PROJECT_ID | GEEK_ID</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 4</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">(2 rows, 2 ms)</code></td></tr></tbody></table></div></div></div><p>The Java code to persist these relations is the following one:</p><div id="highlighter_311622" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">List&lt;Geek&gt; resultList = entityManager.createQuery(</code><code class="string">"from Geek g where g.favouriteProgrammingLanguage = :fpl"</code><code class="plain">, Geek.</code><code class="keyword">class</code><code class="plain">).setParameter(</code><code class="string">"fpl"</code><code class="plain">, </code><code class="string">"Java"</code><code class="plain">).getResultList();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">EntityTransaction transaction = entityManager.getTransaction();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="plain">transaction.begin();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">Project project = </code><code class="keyword">new</code> <code class="plain">Project();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="plain">project.setTitle(</code><code class="string">"Java Project"</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="keyword">for</code> <code class="plain">(Geek geek : resultList) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project.getGeeks().add(geek);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">geek.getProjects().add(project);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">entityManager.persist(project);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">transaction.commit();</code></td></tr></tbody></table></div></div></div><p>In this example we only want to add geeks to our “Java Project” whose favourite programming language is of course Java. Hence we add a where clause to our select query that restricts the result set to geeks with a specific value for the column <code>FAV_PROG_LANG</code>. As this column is mapped to the field <code>favouriteProgrammingLanguage</code>, we can reference it directly by its Java field name in the JPQL statement. The dynamic value for the query is passed into the statement by calling <code>setParameter()</code> for the corresponding variable in the JPQL query (here: <code>fpl</code>).</p><h2><a name="relationships_embedded"></a>5.4. Embedded / ElementCollection</h2><p>It can happen that you want to structure your Java model more fine-grained than your database model. An example for such a use case is the Java class <code>Period</code> that models the time between a start and an end date. This construct can be reused in different entities as you do not want to copy the two class fields <code>startDate</code> and <code>endDate</code> to each entity that has a period of time.</p><p>For such cases JPA offers the ability to model embedded entities. These entities are modeled as separate Java classes with the annotation <code>@Embeddable</code>:</p><div id="highlighter_644757" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Embeddable</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Period {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Date startDate;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">Date endDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name =</code><code class="string">"START_DATE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Date getStartDate() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">startDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setStartDate(Date startDate) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.startDate = startDate;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Column</code><code class="plain">(name =</code><code class="string">"END_DATE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Date getEndDate() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">endDate;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setEndDate(Date endDate) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.endDate = endDate;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>This entity can then be included in our <code>Project</code> entity:</p><div id="highlighter_835788" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="plain">Period projectPeriod;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="color1">@Embedded</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="keyword">public</code> <code class="plain">Period getProjectPeriod() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">projectPeriod;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setProjectPeriod(Period projectPeriod) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.projectPeriod = projectPeriod;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>As this entity is embedded, Hibernate creates the two columns <code>START_DATE</code> and <code>END_DATE</code> for the table <code>T_PROJECT</code>:</p><div id="highlighter_379349" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">create</code> <code class="keyword">table</code> <code class="plain">T_PROJECT (</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">id </code><code class="keyword">bigint</code> <code class="plain">generated </code><code class="keyword">by</code> <code class="keyword">default</code> <code class="keyword">as</code> <code class="plain">identity,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">END_DATE </code><code class="keyword">timestamp</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">START_DATE </code><code class="keyword">timestamp</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">projectType </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">TITLE </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">primary</code> <code class="keyword">key</code> <code class="plain">(id)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="plain">)</code></td></tr></tbody></table></div></div></div><p>Altough these two values are modelled within a separate Java class, we can query them as part of the project:</p><div id="highlighter_612873" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_project;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">ID | END_DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | START_DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | PROJECTTYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | TITLE</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">1&nbsp; | 2015-02-01 00:00:00.000 | 2016-01-31 23:59:59.999 | TIME_AND_MATERIAL | Java Project</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">(1 row, 2 ms)</code></td></tr></tbody></table></div></div></div><p>A JPQL query has to reference the embedded period in order to formulate a condition that restricts the result set to projects that started on a certain day:</p><div id="highlighter_137163" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">entityManager.createQuery(</code><code class="string">"from Project p where p.projectPeriod.startDate = :startDate"</code><code class="plain">, Project.</code><code class="keyword">class</code><code class="plain">).setParameter(</code><code class="string">"startDate"</code><code class="plain">, createDate(</code><code class="value">1</code><code class="plain">, </code><code class="value">1</code><code class="plain">, </code><code class="value">2015</code><code class="plain">));</code></td></tr></tbody></table></div></div></div><p>This yields to the following SQL query:</p><div id="highlighter_186046" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">select</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.id </code><code class="keyword">as</code> <code class="plain">id1_5_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.END_DATE </code><code class="keyword">as</code> <code class="plain">END_DATE2_5_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.START_DATE </code><code class="keyword">as</code> <code class="plain">START_DA3_5_,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.projectType </code><code class="keyword">as</code> <code class="plain">projectT4_5_,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.TITLE </code><code class="keyword">as</code> <code class="plain">TITLE5_5_ </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="keyword">from</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">T_PROJECT project0_ </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="keyword">where</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">project0_.START_DATE=?</code></td></tr></tbody></table></div></div></div><p>Since version 2.0 of JPA you can even use <code>@Embeddable</code> entities in one-to-many relations. This is accomplished by using the new annotations <code>@ElementCollection</code> and <code>@CollectionTable</code> as shown in the following example for the class <code>Project</code>:</p><div id="highlighter_251608" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="plain">List&lt;Period&gt; billingPeriods = </code><code class="keyword">new</code> <code class="plain">ArrayList&lt;Period&gt;();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="color1">@ElementCollection</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="color1">@CollectionTable</code><code class="plain">(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">name=</code><code class="string">"T_BILLING_PERIOD"</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">joinColumns=</code><code class="color1">@JoinColumn</code><code class="plain">(name=</code><code class="string">"PROJECT_ID"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="keyword">public</code> <code class="plain">List&lt;Period&gt; getBillingPeriods() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">billingPeriods;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setBillingPeriods(List&lt;Period&gt; billingPeriods) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.billingPeriods = billingPeriods;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>As <code>Period</code> is an <code>@Embeddable</code> entity we cannot just use a normal <code>@OneToMany</code> relation.</p><h2><a name="dataTypes"></a>6. Data Types and Converters</h2><p>When dealing with legacy databases it can happen that you the standard mapping provided by JPA may not be enough. The following table lists how the Java types are mapped to the different database types:</p><table border="2"><thead><tr><td style="background-color:#dedede;font-weight: bold">Java type</td><td style="background-color:#dedede;font-weight: bold">Database type</td></tr></thead><tbody><tr><td>String (char, char[])</td><td>VARCHAR (CHAR, VARCHAR2, CLOB, TEXT)</td></tr><tr><td>Number (BigDecimal, BigInteger, Integer, Double, Long, Float, Short, Byte)</td><td>NUMERIC (NUMBER, INT, LONG, FLOAT, DOUBLE)</td></tr><tr><td>int, long, float, double, short, byte</td><td>NUMERIC (NUMBER, INT, LONG, FLOAT, DOUBLE)</td></tr><tr><td>byte[]</td><td>VARBINARY (BINARY, BLOB)</td></tr><tr><td>boolean (Boolean)</td><td>BOOLEAN (BIT, SMALLINT, INT, NUMBER)</td></tr><tr><td>java.util.Date, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.util.Calendar</td><td>TIMESTAMP (DATE, DATETIME)</td></tr><tr><td>java.lang.Enum</td><td>NUMERIC (VARCHAR, CHAR)</td></tr><tr><td>java.util.Serializable</td><td>VARBINARY (BINARY, BLOB)</td></tr></tbody></table><p>An interesting point in this table is the mapping for enum types. To demonstrate the usage of enums in JPA let’s add the enum <code>ProjectType</code> to the entity:</p><div id="highlighter_438356" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Entity</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="color1">@Table</code><code class="plain">(name = </code><code class="string">"T_PROJECT"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">Project {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">private</code> <code class="plain">ProjectType projectType;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">enum</code> <code class="plain">ProjectType {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">FIXED, TIME_AND_MATERIAL</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Enumerated</code><code class="plain">(EnumType.ORDINAL)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">ProjectType getProjectType() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">projectType;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setProjectType(ProjectType projectType) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.projectType = projectType;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>As we can see from the snippet above, the annotation <code>@Enumerated</code> allows us to map enums to database colums by specifying how to map the different values to the column. Choosing <code>EnumType.ORDINAL</code> means that each enum constant is mapped to a specific number in the database. When we set our “Java Project” to <code>TIME_AND_MATERIAL</code> we get the following output:</p><div id="highlighter_600716" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="keyword">select</code> <code class="plain">* </code><code class="keyword">from</code> <code class="plain">t_project;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">ID | PROJECTTYPE | TITLE</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">1&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Java Project</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">(1 row, 2 ms)</code></td></tr></tbody></table></div></div></div><p>As an alternative we could also use the value <code>EnumType.STRING</code>. In this case the column is of type <code>String</code> and encodes the enum by calling its <code>name()</code> method:</p><div id="highlighter_885973" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="keyword">select</code> <code class="plain">* </code><code class="keyword">from</code> <code class="plain">t_project;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">ID | PROJECTTYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | TITLE</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">1&nbsp; | TIME_AND_MATERIAL | Java Project</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">(1 row, 2 ms)</code></td></tr></tbody></table></div></div></div><p>If both solutions do not satisfy your requirements, you can write your own converter. This is done by implementing the Java interface <code>AttributeConverter</code> and annotating the class with <code>@Converter</code>. The following class for example converts a boolean value into the two numeric values <code>1</code> and <code>-1</code>:</p><div id="highlighter_223646" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Converter</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">class</code> <code class="plain">BooleanConverter </code><code class="keyword">implements</code> <code class="plain">AttributeConverter&lt;Boolean, Integer&gt; {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Override</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Integer convertToDatabaseColumn(Boolean aBoolean) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(Boolean.TRUE.equals(aBoolean)) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">-</code><code class="value">1</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="color1">@Override</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">public</code> <code class="plain">Boolean convertToEntityAttribute(Integer value) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(value == </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">Boolean.FALSE;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(value == </code><code class="value">1</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">Boolean.TRUE;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">Boolean.FALSE;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>This converter can be applied to our <code>IdCard</code> when we want provide the information if an ID card is valid or not as a boolean value:</p><div id="highlighter_343365" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">private</code> <code class="keyword">boolean</code> <code class="plain">valid;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="color1">@Column</code><code class="plain">(name = </code><code class="string">"VALID"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="color1">@Convert</code><code class="plain">(converter = BooleanConverter.</code><code class="keyword">class</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">boolean</code> <code class="plain">isValid() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">valid;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">setValid(</code><code class="keyword">boolean</code> <code class="plain">valid) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">this</code><code class="plain">.valid = valid;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Inserting an ID card with <code>false</code> for the attribute <code>valid</code>, results in the following output:</p><div id="highlighter_721010" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="keyword">select</code> <code class="plain">* </code><code class="keyword">from</code> <code class="plain">t_id_card;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">ID | ID_NUMBER | ISSUE_DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | VALID</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">1&nbsp; | 4711&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2015-02-04 16:43:30.233 | -1</code></td></tr></tbody></table></div></div></div><h2><a name="criteriaapi"></a>7. Criteria API</h2><p>Until now we have used the Java Persistence Query Language (JPQL) to issue queries to the database. An alternative to the JPQL is the “Criteria API”. This API provides a pure Java method based API to construct a query.</p><p>The following example queries the database for persons with <code>firstName = 'Homer'</code>:</p><div id="highlighter_874118" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">CriteriaBuilder builder = entityManager.getCriteriaBuilder();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">CriteriaQuery&lt;Person&gt; query = builder.createQuery(Person.</code><code class="keyword">class</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">Root&lt;Person&gt; personRoot = query.from(Person.</code><code class="keyword">class</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="plain">query.where(builder.equal(personRoot.get(</code><code class="string">"firstName"</code><code class="plain">), </code><code class="string">"Homer"</code><code class="plain">));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">List&lt;Person&gt; resultList = entityManager.createQuery(query).getResultList();</code></td></tr></tbody></table></div></div></div><p>When starting to build a criteria query, we have to ask the <code>EntityManager</code> for a <code>CriteriaBuilder</code> object. This builder can then be used to create the actual <code>Query</code> object. The way to tell this query which table(s) to query is accomplished by invoking the method <code>from()</code> and passing the entity that is mapped to the corresponding table. The <code>Query</code> object also offers a method to add the where clause:</p><div id="highlighter_491629" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">query.where(builder.equal(personRoot.get(</code><code class="string">"firstName"</code><code class="plain">), </code><code class="string">"Homer"</code><code class="plain">));</code></td></tr></tbody></table></div></div></div><p>The condition itself is then created using the <code>CriteriaBuilder</code> and its <code>equal()</code> method. More complex queries can then be assembled by using the appropriate logical conjunction:</p><div id="highlighter_201816" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">query.where(builder.and(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">builder.equal(personRoot.get(</code><code class="string">"firstName"</code><code class="plain">), </code><code class="string">"Homer"</code><code class="plain">), </code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">builder.equal(personRoot.get(</code><code class="string">"lastName"</code><code class="plain">), </code><code class="string">"Simpson"</code><code class="plain">)));</code></td></tr></tbody></table></div></div></div><p>In general <code>CriteriaQuery</code> defines the following clauses and options:</p><ul><li><code>distinct()</code>: Specifies whether the database should filter out duplicate values.</li><li><code>from()</code>: Specifies the table/entity the query is submitted for.</li><li><code>select()</code>: Specifies a <code>select</code> query.</li><li><code>multiselect()</code>: Specifies a list of selections.</li><li><code>where()</code>: Specifies the <code>where</code> clause of the query.</li><li><code>orderBy()</code>: Specifies the ordering for the query.</li><li><code>groupBy()</code>: Specifies groups that are formed over the result.</li><li><code>having()</code>: Specifies restrictions for groups that are defined over the result.</li><li><code>subquery()</code>: Specifies a subquery that can be used in other queries.</li></ul><p>The above methods allow you to assemble queries completely dynamically based on any filter restrictions the user has provided.</p><h2><a name="sequences"></a>8. Sequences</h2><p>Until now we have used in this tutorial the annotation <code>@GeneratedValue</code> without any specific information on how this unique value should be assigned to each entity. Without any further information the JPA provider chooses on its on how to generate this unique value. But we can also decide the way how to generate unique ids for entities on our own. JPA provides therefore these three different approaches:</p><ul><li><code>TABLE</code>: This strategy lets the JPA provider create a separate table that contains one row for each entity. This row contains next to the name of the entity also the current value for the id. Each time a new value is requsted, the row in the table is updated accordingly.</li><li><code>SEQUENCE</code>: If the database provides sequences, this strategy requests the unique values from the provided database sequence. Not all database products do support sequences.</li><li><code>IDENTITY</code>: If the database provides identity columns, this strategy uses this kind of column provided by the underlying database implementation. Not all database products support identity columns.</li></ul><p>In order to use the <code>TABLE</code> strategy, we also have to tell the JPA provider some details about the table it should use for the sequence management:</p><div id="highlighter_819041" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="color1">@GeneratedValue</code><code class="plain">(strategy = GenerationType.TABLE, generator = </code><code class="string">"TABLE_GENERATOR"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="color1">@TableGenerator</code><code class="plain">(name = </code><code class="string">"TABLE_GENERATOR"</code><code class="plain">, table=</code><code class="string">"T_SEQUENCES"</code><code class="plain">, pkColumnName = </code><code class="string">"SEQ_NAME"</code><code class="plain">, valueColumnName = </code><code class="string">"SEQ_VALUE"</code><code class="plain">, pkColumnValue = </code><code class="string">"PHONE"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The <code>@TableGenerator</code> annotation tell our JPA provider that the table should have the name <code>T_SEQUENCES</code> and the two columns <code>SEQ_NAME</code> and <code>SEQ_VALUE</code>. The name for this sequence in the table should be <code>PHONE</code>:</p><div id="highlighter_180152" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">sql&gt; </code><code class="functions">select</code> <code class="plain">* from t_sequences;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">SEQ_NAME | SEQ_VALUE</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">PHONE&nbsp;&nbsp;&nbsp; | 1</code></td></tr></tbody></table></div></div></div><p>The <code>SEQUENCE</code> strategy can be used in a similar way:</p><div id="highlighter_244433" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="color1">@GeneratedValue</code><code class="plain">(strategy = GenerationType.SEQUENCE, generator = </code><code class="string">"S_PROJECT"</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="color1">@SequenceGenerator</code><code class="plain">(name = </code><code class="string">"S_PROJECT"</code><code class="plain">, sequenceName = </code><code class="string">"S_PROJECT"</code><code class="plain">, allocationSize = </code><code class="value">100</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>By using the annotation <code>@SequenceGenerator</code> we tell the JPA provider how the sequence should be named (<code>S_PROJECT</code>) and tell it an allocation size (here 100), i.e. how many values should be pre-allocated. The attributes <code>generator</code> and <code>name</code> connect the two annotations with each other.</p><p>As this strategy uses a separate table, it can easily become a performance bottleneck when requesting a lot of sequence values. This is especially true if you use the same table for a huge number of tables and the underlying database only supports table locks or locks on table pages. In this case the database has to lock the complete table/page until the current transaction has been committed. Therefore JPA allows to define a pre-allocation size such that the database is not hit too often.</p><p>In order to use the <code>IDENTITY</code> strategy, we just have to set the <code>strategy</code> attribute accordingly:</p><div id="highlighter_132240" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="color1">@Id</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="color1">@GeneratedValue</code><code class="plain">(strategy = GenerationType.IDENTITY)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="keyword">public</code> <code class="plain">Long getId() {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">id;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>If the database supports identity columns, the table is created appropriately:</p><div id="highlighter_222227" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">create</code> <code class="keyword">table</code> <code class="plain">T_ID_CARD (</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">id </code><code class="keyword">bigint</code> <code class="plain">generated </code><code class="keyword">by</code> <code class="keyword">default</code> <code class="keyword">as</code> <code class="plain">identity,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ID_NUMBER </code><code class="keyword">varchar</code><code class="plain">(255),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">ISSUE_DATE </code><code class="keyword">timestamp</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">VALID </code><code class="keyword">integer</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">primary</code> <code class="keyword">key</code> <code class="plain">(id)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="plain">)</code></td></tr></tbody></table></div></div></div><h2><a name="download"></a>9. Download</h2><p>This was a tutorial on Java Persistence API (JPA).</p><div class="download"><strong>Download</strong><br> You can download the full source code of this tutorial here: <a href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2015/02/jpa.zip"><strong>jpa_tutorial</strong></a></div></div> <span style="display:none"><a href="http://www.javacodegeeks.com/tag/jpa/" rel="tag">JPA</a> <a href="http://www.javacodegeeks.com/tag/ultimate/" rel="tag">Ultimate</a></span> <span style="display:none" class="updated">2015-02-16</span><div style="display:none" class="vcard author" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><strong class="fn" itemprop="name"><a href="http://www.javacodegeeks.com/author/martin-mois/" title="Posts by Martin Mois" rel="author">Martin Mois</a></strong></div></div> </article><p class="post-tag">Tagged with: <a href="http://www.javacodegeeks.com/tag/jpa/" rel="tag">JPA</a> <a href="http://www.javacodegeeks.com/tag/ultimate/" rel="tag">Ultimate</a></p><div id="mc4wp-form-2" class="form mc4wp-form mc4wp-form-29380 mc4wp-ajax"><form method="post" role="form"><div class="nlbox1"><h1>Do you want to know how to develop your skillset to become a <span style="color: #CAB43D; text-shadow: 1px 1px #835D5D;">Java Rockstar?</span></h1><div style="background: url(&#39;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2015/01/books_promo.png&#39;) no-repeat; float:left; padding: 75px 145px 310px 170px; margin-top: -10px; margin-left: -35px;"></div><table style="margin-top: 20px; padding-left: 20px;"><tbody><tr><td style="vertical-align:top;"><h2>Subscribe to our newsletter to start Rocking <span style="text-decoration: underline;">right now!</span></h2><h3>To get you started we give you our best selling eBooks for <span style="color:#e01404; text-shadow: 1px 1px #C99924; font-size: 20px; line-height: 25px;">FREE!</span></h3><p></p><h3><strong>1.</strong> JPA Mini Book</h3><h3><strong>2.</strong> JVM Troubleshooting Guide</h3><h3><strong>3.</strong> JUnit Tutorial for Unit Testing</h3><h3><strong>4.</strong> Java Annotations Tutorial<!--3--></h3><h3><strong>5.</strong> Java Interview Questions</h3><h3><strong>6.</strong> Spring Interview Questions</h3><h3><strong>7.</strong> Android UI Design</h3><p></p><h3>and many more ....</h3><p>&nbsp;</p><p></p><p> <label for="mc4wp_email"><span style="font-weight: bold; font-size: 13pt;">Email address: </span></label> <input type="email" id="mc4wp_email" name="EMAIL" required="" placeholder="Your email address"></p> <input type="submit" value="Sign up"></td></tr></tbody></table></div><span class="mc4wp-ajax-loader" style="display: none;"></span><input type="hidden" name="_mc4wp_required_but_not_really" value="" style="display: none;"><input type="hidden" name="_mc4wp_timestamp" value="1438576895"><input type="hidden" name="_mc4wp_form_id" value="29380"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-2"><input type="hidden" name="_mc4wp_form_submit" value="1"><input type="hidden" name="_mc4wp_form_nonce" value="762fe71465"></form><div class="mc4wp-response"></div></div><div class="ads-post"><div id="div-gpt-ad-1415445260332-5" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-5');});</script></div></div><div id="comments"><h3 id="comments-title"> 3 comments</h3><ol class="commentlist"><li id="comment-61463"><div class="comment even thread-even depth-1 comment-wrap"><div class="comment-avatar"><img alt="" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/59d81769538274fcd66d15079c78c355" srcset="http://2.gravatar.com/avatar/59d81769538274fcd66d15079c78c355?s=90&amp;d=mm&amp;r=g 2x" class="avatar avatar-45 photo" height="45" width="45"></div><div class="author-comment"> <cite class="fn">Fatih Aksu</cite><div class="comment-meta commentmetadata"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html#comment-61463"> June 18th, 2015 at 10:58 am</a></div></div><div class="clear"></div><div class="comment-content"><p>Very nice tutorial! Thank you.</p></div><div class="reply"><a class="comment-reply-link" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer&replytocom=61463#respond" onclick="return addComment.moveForm( &quot;comment-61463&quot;, &quot;61463&quot;, &quot;respond&quot;, &quot;36797&quot; )" aria-label="Reply to Fatih Aksu">Reply</a></div></div></li><li id="comment-62682"><div class="comment odd alt thread-odd thread-alt depth-1 comment-wrap"><div class="comment-avatar"><img alt="" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/c59e551e0eb3cc22cb8bffa379fafc7b" srcset="http://0.gravatar.com/avatar/c59e551e0eb3cc22cb8bffa379fafc7b?s=90&amp;d=mm&amp;r=g 2x" class="avatar avatar-45 photo" height="45" width="45"></div><div class="author-comment"> <cite class="fn">Juan Manuel Hernandez Navarro</cite><div class="comment-meta commentmetadata"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html#comment-62682"> July 8th, 2015 at 6:25 pm</a></div></div><div class="clear"></div><div class="comment-content"><p>Excellent excellent excellent!!</p></div><div class="reply"><a class="comment-reply-link" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer&replytocom=62682#respond" onclick="return addComment.moveForm( &quot;comment-62682&quot;, &quot;62682&quot;, &quot;respond&quot;, &quot;36797&quot; )" aria-label="Reply to Juan Manuel Hernandez Navarro">Reply</a></div></div></li><li id="comment-62792"><div class="comment even thread-even depth-1 comment-wrap"><div class="comment-avatar"><img alt="" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/7493c167168272391383c8d422d21995" srcset="http://1.gravatar.com/avatar/7493c167168272391383c8d422d21995?s=90&amp;d=mm&amp;r=g 2x" class="avatar avatar-45 photo" height="45" width="45"></div><div class="author-comment"> <cite class="fn">JF Richard</cite><div class="comment-meta commentmetadata"><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html#comment-62792"> July 10th, 2015 at 5:55 pm</a></div></div><div class="clear"></div><div class="comment-content"><p>Very nice tutorial!<br> All the essential information is there.<br> Thank you.</p></div><div class="reply"><a class="comment-reply-link" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer&replytocom=62792#respond" onclick="return addComment.moveForm( &quot;comment-62792&quot;, &quot;62792&quot;, &quot;respond&quot;, &quot;36797&quot; )" aria-label="Reply to JF Richard">Reply</a></div></div></li></ol><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#respond" style="display:none;">Cancel reply</a></small></h3><form action="http://www.javacodegeeks.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p><p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" aria-required="true" required="true"></p><p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" aria-required="true" required="true"></p><p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30"></p><p class="cptch_block"><br> <input type="hidden" name="cptch_result" value="3fY="> <input type="hidden" name="cptch_time" value="1438576895"> <input type="hidden" value="Version: 4.1.3"> 4 × <input id="cptch_input" class="cptch_input" type="text" autocomplete="off" name="cptch_number" value="" maxlength="2" size="2" aria-required="true" required="required" style="margin-bottom:0;display:inline;font-size: 12px;width: 40px;"> =  thirty six</p><p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-describedby="form-allowed-tags" aria-required="true" required="required"></textarea></p><p class="form-allowed-tags" id="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes: <code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="36797" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"></p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="68028f238d"></p><p class="comment-form-subscriptions"><label for="subscribe-reloaded"><input type="checkbox" name="subscribe-reloaded" id="subscribe-reloaded" value="yes"> Notify me of followup comments via e-mail. You can also <a href="http://www.javacodegeeks.com/comment-subscriptions/?srp=36797&srk=&sra=s">subscribe</a> without commenting.</label></p><p id="mc4wp-checkbox" class="mc4wp-checkbox-comment_form"><label><input type="checkbox" name="_mc4wp_subscribe_comment_form" value="1" checked=""> Sign me up for the newsletter!</label></p><textarea name="_mc4wp_required_but_not_really" style="display: none !important;"></textarea><p style="display: none;"></p><input type="hidden" id="ak_js" name="ak_js" value="1438576906311"></form></div></div></div></div> <aside class="sidebar"><div id="text-12" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-3" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-3');});</script></div></div></div></div><div id="text-13" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-4" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-4');});</script></div></div></div></div><div id="mc4wp_widget-3" class="widget widget_mc4wp_widget"><div class="widget-top"><h4>Newsletter</h4><div class="stripe-line"></div></div><div class="widget-container"><div id="mc4wp-form-3" class="form mc4wp-form mc4wp-form-28645 mc4wp-ajax"><form method="post" role="form"><div style="padding: 15px 15px 15px; background: url(&#39;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2014/11/newsletter-bg.jpg&#39;) no-repeat; background-color: rgb(252, 252, 252);"><span style="text-shadow: 1px 1px #D0D0D0; font-weight: bold; font-size: 14pt; display: inline;">112784</span> insiders are already enjoying weekly updates and complimentary whitepapers!<p> <span style="text-shadow: 1px 1px #D0D0D0; font-weight: bold; font-size: 14pt; display: inline;">Join them now</span> to gain <span style="text-decoration: underline;  font-size: 14pt;">exclusive access</span> to the latest news in the Java world, as well as insights about Android, Scala, Groovy and other related technologies.</p><p> <label for="mc4wp_email"><span style="font-weight: bold; font-size: 13pt;">Email address: </span></label> <input type="email" id="mc4wp_email" name="EMAIL" required="" placeholder="Your email address"></p> <input type="submit" value="Sign up"></div><span class="mc4wp-ajax-loader" style="display: none;"></span><input type="hidden" name="_mc4wp_required_but_not_really" value="" style="display: none;"><input type="hidden" name="_mc4wp_timestamp" value="1438576895"><input type="hidden" name="_mc4wp_form_id" value="28645"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-3"><input type="hidden" name="_mc4wp_form_submit" value="1"><input type="hidden" name="_mc4wp_form_nonce" value="762fe71465"></form><div class="mc4wp-response"></div></div></div></div><div id="text-6" class="widget widget_text"><div class="widget-top"><h4>Join Us</h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div style="width:150px; height:150px; float:left; margin-top:-10px; margin-left:-10px;"> <img title="Join Us" alt="Join Us" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/w4g-badge-150x150.png" width="150" height="150"></div> With <label style="border:1px solid #D8D8D8;background:#F0F0F0;border-radius:3px;-moz-border-radius:3px;text-shadow: 1px 1px #D0D0D0;text-align:center;font-weight:bold;padding-left:3px;padding-right:3px">1,240,600</label> monthly unique visitors and over <label style="border:1px solid #D8D8D8;background:#F0F0F0;border-radius:3px;-moz-border-radius:3px;text-shadow: 1px 1px #D0D0D0;text-align:center;font-weight:bold;padding-left:3px;padding-right:3px">500</label> authors we are placed among the top Java related sites around. Constantly being on the lookout for partners; we encourage you to join us. So If you have a blog with unique and interesting content then you should check out our <strong><a href="http://www.javacodegeeks.com/join-us/jcg">JCG</a></strong> partners program. You can also be a <strong><a href="http://www.javacodegeeks.com/join-us/w4g">guest writer</a></strong> for Java Code Geeks and hone your writing skills!</div></div></div><div id="text-14" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-6" style="width:300px; height:600px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-6');});</script></div></div></div></div><div id="text-15" class="widget widget_text"><div class="widget-top"><h4>Career Opportunities</h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><style type="text/css">#indJobContent{line-height:18px;padding:0
10px 10px}#indJobContent
a{color:#00c}#indJobContent
.company_location{font-size:11px;overflow:hidden;display:block}#pagination{clear:both;margin-top:10px}</style><script type="text/javascript">var ind_pub='4110899194707815';var ind_el='indJobContent';var ind_pf='';var ind_q='';var ind_l='';var ind_chnl='Jobroll-JCG';var ind_n=10;var ind_d='http://www.indeed.com';var ind_t=40;var ind_c=30;var ind_pgn=1;var ind_pgnCnt=10;</script><script type="text/javascript" src="http://www.indeed.com/ads/jobroll-widget-v3.js"></script><div id="indJobContent" class=""></div><form style="background: url(&quot;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2015/07/career-opportunities.jpg&quot;) no-repeat;" action="http://www.javacodegeeks.com/job-board/jobs/" method="GET"><table width="100%" cellspacing="5" style="font-family: arial"><tbody><tr><td style="font-size: 16px; color: #F60"><b>what</b></td></tr><tr><td><input style="border-style: solid; border-width: 1px; border-color: #e0e0e0;" name="query" value="" placeholder="job title, keywords" size="30"></td></tr><tr><td style="font-size: 16px; color:#F60"><b>where</b></td></tr><tr><td><input style="border-style: solid; border-width: 1px; border-color: #e0e0e0;" name="location" value="" placeholder="city, state, zip" size="30"></td></tr><tr><td style="font-size: 16px; color:#F60"><b>country</b></td></tr><tr><td><select name="country"><option value="us">United States</option><option value="ar">Argentina</option><option value="au">Australia</option><option value="at">Austria</option><option value="bh">Bahrain</option><option value="be">Belgium</option><option value="br">Brazil</option><option value="ca">Canada</option><option value="cl">Chile</option><option value="cn">China</option><option value="co">Colombia</option><option value="cz">Czech Republic</option><option value="dk">Denmark</option><option value="fi">Finland</option><option value="fr">France</option><option value="de">Germany</option><option value="gr">Greece</option><option value="hk">Hong Kong</option><option value="hu">Hungary</option><option value="in">India</option><option value="id">Indonesia</option><option value="ie">Ireland</option><option value="il">Israel</option><option value="it">Italy</option><option value="jp">Japan</option><option value="kr">Korea</option><option value="kw">Kuwait</option><option value="lu">Luxembourg</option><option value="my">Malaysia</option><option value="mx">Mexico</option><option value="nl">Netherlands</option><option value="nz">New Zealand</option><option value="no">Norway</option><option value="om">Oman</option><option value="pk">Pakistan</option><option value="pe">Peru</option><option value="ph">Philippines</option><option value="pl">Poland</option><option value="pt">Portugal</option><option value="qa">Qatar</option><option value="ro">Romania</option><option value="ru">Russia</option><option value="sa">Saudi Arabia</option><option value="sg">Singapore</option><option value="za">South Africa</option><option value="es">Spain</option><option value="se">Sweden</option><option value="ch">Switzerland</option><option value="tw">Taiwan</option><option value="tr">Turkey</option><option value="ae">United Arab Emirates</option><option value="gb">United Kingdom</option><option value="ve">Venezuela</option> </select></td></tr><tr><td style="padding-top: 10px;"><input type="submit" value="Find Jobs"></td></tr><tr><td style="font-size: 13px; float: right; padding-top: 20px;"> <span id="indeed_at"> <a href="http://www.indeed.com/?indpubnum=4110899194707815" style="text-decoration: none; color: #000" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">jobs by</a> <a href="http://www.indeed.com/?indpubnum=4110899194707815" title="Job" search="" rel="external nofollow" class="ext-link" data-wpel-target="_blank"> <img src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/jobsearch.gif" style="border: 0; vertical-align: middle" alt="job search"> </a> </span></td></tr></tbody></table></form></div></div></div></aside><div class="clear"></div><div class="clear"></div></div></div><footer class="fade-in animated4"><div id="footer-widget-area" class="wide-right-3c container"><div id="footer-first" class="footer-widgets-box"><div id="linkcat-4" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Knowledge Base</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://academy.javacodegeeks.com/" data-wpel-ignored="true">Academy</a></li><li><a href="http://examples.javacodegeeks.com/" target="_blank" data-wpel-ignored="true">Examples</a></li><li><a href="http://library.javacodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Library</a></li><li><a href="http://www.javacodegeeks.com/p/resources.html" target="_blank">Resources</a></li><li><a href="http://www.javacodegeeks.com/tutorials/" target="_blank">Tutorials</a></li><li><a href="http://www.javacodegeeks.com/whitepaper/" target="_blank">Whitepapers</a></li></ul></div></div><div id="linkcat-3" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Partners</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.mkyong.com/" target="_blank" data-wpel-ignored="true">Mkyong</a></li></ul></div></div><div id="linkcat-5" class="footer-widget widget_links"><div class="footer-widget-top"><h4>The Code Geeks Network</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.dotnetcodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">.NET Code Geeks</a></li><li><a href="http://www.javacodegeeks.com/" target="_blank">Java Code Geeks</a></li><li><a href="http://www.webcodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Web Code Geeks</a></li></ul></div></div></div><div id="footer-second" class="footer-widgets-box"><div id="linkcat-652" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Hall Of Fame</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.javacodegeeks.com/2010/10/android-full-application-tutorial.html" target="_blank">“Android Full Application Tutorial” series</a></li><li><a href="http://www.javacodegeeks.com/2013/01/15-online-learning-websites-that-you-should-check-out.html" target="_blank">11 Online Learning websites that you should check out</a></li><li><a href="http://www.javacodegeeks.com/2013/04/advantages-and-disadvantages-of-cloud-computing-cloud-computing-pros-and-cons.html" target="_blank">Advantages and Disadvantages of Cloud Computing – Cloud computing pros and cons</a></li><li><a href="http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html" target="_blank">Android Google Maps Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html" target="_blank">Android JSON Parsing with Gson Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2010/09/android-location-based-services.html" target="_blank">Android Location Based Services Application – GPS location</a></li><li><a href="http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html" target="_blank">Android Quick Preferences Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2013/03/difference-between-comparator-and-comparable-in-java.html" target="_blank">Difference between Comparator and Comparable in Java</a></li><li><a href="http://www.javacodegeeks.com/2010/05/gwt-2-spring-3-jpa-2-hibernate-35-2.html" target="_blank">GWT 2 Spring 3 JPA 2 Hibernate 3.5 Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2010/08/java-best-practices-vector-arraylist.html" target="_blank">Java Best Practices – Vector vs ArrayList vs HashSet</a></li></ul></div></div></div><div id="footer-third" class="footer-widgets-box"><div id="text-16" class="footer-widget widget_text"><div class="footer-widget-top"><h4>About Java Code Geeks</h4></div><div class="footer-widget-container"><div class="textwidget">JCGs (Java Code Geeks) is an independent online community focused on creating the ultimate Java to Java developers resource center; targeted at the technical architect, technical team lead (senior developer), project manager and junior developers alike. JCGs serve the Java, SOA, Agile and Telecom communities with daily news written by domain experts, articles, tutorials, reviews, announcements, code snippets and open source projects.</div></div></div><div id="text-17" class="footer-widget widget_text"><div class="footer-widget-top"><h4>Disclaimer</h4></div><div class="footer-widget-container"><div class="textwidget">All trademarks and registered trademarks appearing on Examples Java Code Geeks are the property of their respective owners. Java is a trademark or registered trademark of Oracle Corporation in the United States and other countries. Examples Java Code Geeks is not connected to Oracle Corporation and is not sponsored by Oracle Corporation.</div></div></div></div></div><div class="clear"></div> </footer><div class="clear"></div><div class="footer-bottom fade-in animated4"><div class="container"><div class="social-icons icon_flat"> <a class="ttip ext-link" href="http://feeds.feedburner.com/JavaCodeGeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Rss"><i class="tieicon-rss"></i></a><a class="ttip ext-link" href="https://plus.google.com/+JavaCodeGeeks/" rel="external nofollow" data-wpel-target="_blank" original-title="Google+"><i class="tieicon-gplus"></i></a><a class="ttip ext-link" href="https://www.facebook.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Facebook"><i class="tieicon-facebook"></i></a><a class="ttip ext-link" href="https://twitter.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Twitter"><i class="tieicon-twitter"></i></a><a class="ttip ext-link" href="https://www.linkedin.com/groups/Java-Code-Geeks-3810709" rel="external nofollow" data-wpel-target="_blank" original-title="LinkedIn"><i class="tieicon-linkedin"></i></a></div><div class="alignleft"> Java Code Geeks and all content copyright © 2010-2015, <a href="http://www.exelixismedia.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Exelixis Media P.C.</a> | <a href="http://www.javacodegeeks.com/about/terms-of-use/">Terms of Use</a> | <a href="http://www.javacodegeeks.com/about/privacy-policy/">Privacy Policy</a> | <a href="mailto:support@javacodegeeks.com">Contact</a></div></div></div></div><div id="topcontrol" class="tieicon-up-open" title="Scroll To Top" style="bottom: 15px;"></div><div id="fb-root"></div> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12271632-2','auto');ga('send','pageview');</script><script>var snp_f=[];</script><div class="snp-root"> <input type="hidden" id="snp_popup" value=""> <input type="hidden" id="snp_popup_id" value=""> <input type="hidden" id="snp_popup_theme" value=""> <input type="hidden" id="snp_exithref" value=""> <input type="hidden" id="snp_exittarget" value=""><div id="snppopup-welcome" class="snp-pop-42061 snppopup"><input type="hidden" class="snp_open" value="load"><input type="hidden" class="snp_open_after" value="6"><input type="hidden" class="snp_open_scroll" value="10"><input type="hidden" class="snp_optin_redirect_url" value=""><input type="hidden" class="snp_show_cb_button" value="no"><input type="hidden" class="snp_popup_id" value="42061"><input type="hidden" class="snp_popup_theme" value="newtheme7"><input type="hidden" class="snp_overlay" value="default"><input type="hidden" class="snp_cookie_conversion" value="30"><input type="hidden" class="snp_cookie_close" value="5"><div class="snp-fb snp-newtheme7"><div class="snp-steps snp-step-1 snp-step-show"><div class="snp-media"><div class="snp-media__img"><img src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/books_promo_lp.png" alt=""></div><div class="snp-media__body"><div class="snp-h3 snp-delta">Want to take your Java Skills to the next level?</div><div class="snp-h1 snp-beta  snp-uppercase  snp-color--primary">Grab our programming books for FREE!</div><ul class="snp-list"><li>Save time by leveraging our field-tested solutions to common problems.</li><li>The books cover a wide range of topics, from JPA and JUnit, to JMeter and Android.</li><li>Each book comes as a standalone guide (with source code provided), so that you use it as reference.</li></ul></div></div> <footer class="snp-theme__footer snp-flush--top"><div class="snp-theme__choice"> <a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" data-nextstep="2" class="snp_nextstep snp-btn snp-btn--primary">Gimme the FREE eBooks</a><span class="snp-theme__choice-or"> </span><a href="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" data-nextstep="2" class="snp_nothanks snp-btn snp-btn--secondary">I reject the FREE eBooks</a></div> </footer></div><div class="snp-steps snp-step-2"><div class="snp-h3 snp-gamma">Last Step ...</div><form action="http://www.javacodegeeks.com/2015/02/jpa-tutorial.html?utm_content=buffer4b780&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" method="post" class="snp-push--ends snp-subscribeform snp_subscribeform"><p><span style="font-size:20px;">Where should we send the free eBooks?</span></p><ul class="snp-fields-list"><li><input type="text" name="email" id="snp_email" placeholder="Your Email..." class="snp-field snp-field-email"></li></ul> <footer class="snp-theme__footer"><p> <button class="snp-subscribe-button snp-submit snp-btn  snp-btn--primary  snp-btn--large" data-nextstep="3" data-loading="" data-success="" type="submit">Send me the FREE eBooks</button></p> </footer></form></div><div class="snp-steps snp-step-3"><div class="snp-h2 snp-gamma">Good Work!</div><div class="snp-h1 snp-alpha snp-uppercase  snp-color--primary"><span>To download the books, please <span style="text-decoration: underline;">verify</span> your email address by following the instructions found on the email we just sent you.</span></div><p class="snp-islet"><img src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/java_duke_thumbs_up.png" alt=""></p> <footer class="snp-theme__footer"><p><a href="" class=" snp-btn snp-btn--secondary">Close</a></p> </footer></div></div><style>/*<![CDATA[*/.snp-pop-42061 .snp-newtheme7{width:890px}.snp-pop-42061 .snp-newtheme7{background:#e5ffff}.snp-pop-42061 .snp-theme__footer{background:#ECFFE8}.snp-pop-42061 .snp-theme__footer{border-top:1px solid #16a126}.snp-pop-42061 .snp-newtheme7{color:#363636}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-h3{font-size:26px;color:#363636}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-h1{font-size:40px;color:#1678a1}.snp-pop-42061 .snp-newtheme7 .snp-color--primary{color:#1678a1}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-btn--primary{background:#16a126}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-btn--primary{color:#fff}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-btn--secondary{background:#e01404}.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-btn--secondary{color:#fff}.snp-pop-42061 .snp-newtheme7 .snp-step-2 .snp-h3{font-size:30px;color:#363636}.snp-pop-42061 .snp-newtheme7 .snp-step-2 .snp-btn--primary{background:#16a126}.snp-pop-42061 .snp-newtheme7 .snp-step-2 .snp-btn--primary{color:#fff}.snp-pop-42061 .snp-newtheme7 .snp-step-3 .snp-btn--secondary{background:#e01404}.snp-pop-42061 .snp-newtheme7 .snp-step-3 .snp-btn--secondary{color:#fff}.snp-pop-42061 .snp-newtheme7 .snp-step-3 .snp-h2{font-size:40px;color:#1678a1}.snp-pop-42061 .snp-newtheme7 .snp-step-3 .snp-h1{font-size:30px;color:#363636}/*]]>*/</style><style>.snp-pop-42061 .snp-newtheme7 .snp-step-1 .snp-btn{width:30%}</style></div></div><script>/*<![CDATA[*/var snp_timer;var snp_timer_o;var snp_ajax_url='http://www.javacodegeeks.com/wp-admin/admin-ajax.php';var snp_ignore_cookies=false;var snp_is_interal_link;var snp_enable_analytics_events=true;var snp_enable_mobile=true;jQuery(document).ready(function(){jQuery('[placeholder]').placeholder();jQuery(".snp_nothanks, .snp_closelink, .snp-close-link").click(function(){snp_close();return false;});jQuery(".snp_subscribeform").submit(function(){return snp_onsubmit(jQuery(this));});var snp_open=jQuery('#snppopup-welcome .snp_open').val();var snp_open_after=jQuery('#snppopup-welcome .snp_open_after').val();var snp_open_inactivity=jQuery('#snppopup-welcome .snp_open_inactivity').val();var snp_open_scroll=jQuery('#snppopup-welcome .snp_open_scroll').val();var snp_op_welcome=false;if(snp_open=='inactivity')
{var snp_idletime=0;function snp_timerIncrement()
{snp_idletime++;if(snp_idletime>snp_open_inactivity)
{window.clearTimeout(snp_idleInterval);snp_open_popup('','','snppopup-welcome','welcome');}}
var snp_idleInterval=setInterval(snp_timerIncrement,1000);jQuery(this).mousemove(function(e){snp_idletime=0;});jQuery(this).keypress(function(e){snp_idletime=0;});}
else if(snp_open=='scroll')
{jQuery(window).scroll(function(){var h=jQuery(document).height()-jQuery(window).height();var sp=jQuery(window).scrollTop();var p=parseInt(sp/h*100);if(p>=snp_open_scroll&&snp_op_welcome==false){snp_open_popup('','','snppopup-welcome','welcome');snp_op_welcome=true;}});}
else
{if(snp_open_after)
{snp_timer_o=setTimeout("snp_open_popup('','','snppopup-welcome','welcome');",snp_open_after*1000);}
else
{snp_open_popup('','','snppopup-welcome','welcome');}}});/*]]>*/</script><script type="text/javascript">var qpprFrontData={"linkData":[],"siteURL":"http:\/\/www.javacodegeeks.com","siteURLq":"http:\/\/www.javacodegeeks.com"};</script><script type="text/javascript" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/qppr_frontend_script.js"></script><script type="text/javascript">var mc4wp_vars={"ajaxurl":"http:\/\/www.javacodegeeks.com\/wp-admin\/admin-ajax.php?mc4wp_action=subscribe","ajaxloader":{"enabled":true,"imgurl":"http:\/\/www.javacodegeeks.com\/wp-content\/plugins\/mailchimp-for-wp-pro\/assets\/img\/ajax-loader.gif"}};</script><script type="text/javascript">/*<![CDATA[*/jQuery(function(){$foobar({"height":{"bar":50,"button":30},"width":{"left":"0px","center":"0px","right":"*","button":"80px"},"position":{"ignoreOffsetMargin":false,"bar":"top","button":"right","social":"left"},"display":{"type":"onscroll","delay":0,"speed":100,"backgroundColor":"#326693","border":"solid 3px #ffffff","theme":{"bar":"x-white"},"easing":"swing","shadow":true,"adjustPageHeight":false,"rtl":false,"button":{"type":"close"}},"message":{"delay":2000,"fadeDelay":500,"random":false,"navigation":false,"scroll":{"enabled":true,"speed":50,"delay":2000,"direction":"left"},"cssClass":"__none"},"rightHtml":"<!-- /70432299/JCG_NotifBar --><div id=\'div-gpt-ad-1431445244472-0\' style=\'height:50px; width:1220px; margin-left: auto; margin-right: auto;\'><script src=\'http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/fbDFP.js\'/></div>"});jQuery(window).scroll(function(){if(jQuery(this).width()>1220){if(jQuery(this).scrollTop()>0){jQuery('.x-white').slideDown(100);}else{jQuery('.x-white').slideUp(100);}}});jQuery(window).resize(function(){if(jQuery(this).width()<1220){jQuery('.x-white').hide();}});});/*]]>*/</script><script type="text/javascript">/*<![CDATA[*/(function(){function addSubmittedClassToFormContainer(e){var form=e.target.form.parentNode;var className='mc4wp-form-submitted';(form.classList)?form.classList.add(className):form.className+=' '+className;}
function hideHoneypot(h){var n=document.createElement('input');n.type='hidden';n.name=h.name;n.style.display='none';n.value=h.value;h.parentNode.replaceChild(n,h);}
var forms=document.querySelectorAll('.mc4wp-form');for(var i=0;i<forms.length;i++){(function(f){var h=f.querySelector('input[name="_mc4wp_required_but_not_really"]');if(h){hideHoneypot(h);}
var b=f.querySelector('[type="submit"], [type="image"]');if(b.addEventListener){b.addEventListener('click',addSubmittedClassToFormContainer);}else{b.attachEvent('click',addSubmittedClassToFormContainer);}})(forms[i]);}})();/*]]>*/</script><script type="text/javascript" src="./JPA Tutorial - The ULTIMATE Guide (PDF Download) _ Java Code Geeks_files/single.include-footer.84923a.js"></script><iframe frameborder="0" scrolling="no" style="border: 0px; display: none; background-color: transparent;"></iframe><div id="GOOGLE_INPUT_CHEXT_FLAG" input="null" input_stat="{&quot;tlang&quot;:true,&quot;tsbc&quot;:true,&quot;pun&quot;:true,&quot;mk&quot;:false,&quot;ss&quot;:true}" style="display: none;"></div></body></html>