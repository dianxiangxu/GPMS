/*!CK:2165058554!*//*1438924236,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["vc1UZ"]); }

__d("UFIReactionIcon.react",["React","UFIReactionTypes","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.Component;for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r){"use strict";m.call(this);}p.prototype.render=function(){"use strict";var q=j((("_2d1t")+(this.props.size==='tiny'?' '+"_2d1w":'')+(this.props.size==='small'?' '+"_2d1x":'')+(this.props.size==='medium'?' '+"_2d1y":'')),h.reactions[this.props.reaction].name,this.props.className);return g.createElement("i",{className:q});};p.propTypes={className:l.string,reaction:l.number.isRequired,size:l.oneOf(['tiny','small','medium'])};p.defaultProps={className:null,size:'small'};e.exports=p;},null);
__d("UFIReactionsFacepile.react",["ActorURI","HovercardLink","React","Image.react","UFIClassNames","UFIReactionIcon.react","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController","XUFIReactionTooltipController","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=12,s=32,t=i.Component;for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x,y){"use strict";t.call(this);this.state={};}w.prototype.renderFacepile=function(){"use strict";var x=this.props.feedback.reactorids;if(this.props.feedback.reactioncount>r)x=x.slice(0,r-1);return x.map(function(y){y=this.props.authorProfiles[y];var z=h.constructEndpointWithLocation(y,'ufi');return (i.createElement("a",{"aria-label":y.name,className:"_51km _2ar2","data-hovercard":z,href:y.uri,key:'reactor-'+y.id,position:"above"},i.createElement(j,{height:32,src:y.thumbSrc,width:32}),i.createElement("div",{className:"_2ar3"},i.createElement(l,{size:"small",reaction:this.props.feedback.userreactions[y.id]}))));}.bind(this));};w.prototype.renderMoreLink=function(){"use strict";if(this.props.feedback.reactioncount<=r)return null;var x=this.props.feedback.reactorids,y=this.props.authorProfiles[x[r-1]],z=this.props.feedback.reactioncountreduced;if(!isNaN(z))z='+'+(this.props.feedback.reactioncount-r+1);var aa=o.getURIBuilder().setIntVector('seen_user_fbids',x.slice(0,r-1)).setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();aa=g.create(aa,this.props.feedback.actorforpost);var ba=n.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();ba=g.create(ba,this.props.feedback.actorforpost);var ca=m.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();ca=g.create(ca,this.props.feedback.actorforpost);return (i.createElement("a",{ajaxify:ba,className:"_51kn","data-hover":"tooltip","data-tooltip-uri":aa,href:ca,rel:"dialog"},i.createElement(j,{height:s,src:y.thumbSrc,width:s}),i.createElement("span",null,z)));};w.prototype.render=function(){"use strict";var x=q(k.ROW,(("_51ko")+(this.props.feedback.reactioncount>=r?' '+"_1w2m":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (i.createElement("li",{className:x},this.renderFacepile(),this.renderMoreLink()));};e.exports=w;},null);
__d("UFIReactionsLink.react",["BanzaiLogger","BootloadedComponent.react","Event","InlineBlock.react","JSResource","React","ReactLayeredComponentMixin","UFIConstants","UFIReactionIcon.react","UFIReactionTypes","UFIUserActions","classWithMixins","cx","getActiveElement","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=false,w,x,y=true,z=1000,aa=250,ba=r(l.Component,u(m));for(var ca in ba)if(ba.hasOwnProperty(ca))ea[ca]=ba[ca];var da=ba===null?null:ba.prototype;ea.prototype=Object.create(da);ea.prototype.constructor=ea;ea.__superConstructor__=ba;function ea(fa,ga){"use strict";ba.call(this);this.hideDialog=this.hideDialog.bind(this);this.showDialog=this.showDialog.bind(this);this.dialogShownTime=0;this.state={dialogShown:false,reaction:fa.reaction};if(!w&&!x){w=i.listen(window,'blur',function(){y=false;});x=i.listen(window,'focus',function(){y=true;});}}ea.prototype.componentWillReceiveProps=function(fa){"use strict";this.setState({reaction:fa.reaction});};ea.prototype.renderLayers=function(){"use strict";if(!this.state.dialogShown&&!v)return null;return {ufiReactionsPopover:l.createElement(h,{bootloadPlaceholder:l.createElement("div",null),bootloadLoader:k('UFIReactionsMenu.react'),context:l.findDOMNode(this.refs.root),onBlur:this.onBlur.bind(this),onClick:this.onReactionChange.bind(this),onComponentLoad:function(){v=true;},onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),selected:this.state.reaction,shown:this.state.dialogShown})};};ea.prototype.hideDialog=function(){"use strict";this.$UFIReactionsLink0(this.state.reaction);clearTimeout(this.hoverTimeout);this.setState({dialogShown:false});};ea.prototype.showDialog=function(){"use strict";if(this.dialogShownTime===0)this.dialogShownTime=Date.now();clearTimeout(this.hoverTimeout);this.setState({dialogShown:true});};ea.prototype.onReactionChange=function(fa,event){"use strict";this.$UFIReactionsLink0(fa);q.changeReaction(this.props.id,fa);this.hideDialog();};ea.prototype.onBlur=function(event){"use strict";if(!l.findDOMNode(this.refs.root).contains(t())&&!l.findDOMNode(this.refs.root).contains(event.relatedTarget))this.hideDialog();};ea.prototype.onMouseEnter=function(event){"use strict";if(!y)return;clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.showDialog,z);};ea.prototype.onMouseLeave=function(event){"use strict";if(!y)return;clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.hideDialog,aa);};ea.prototype.onFocus=function(event){"use strict";if(!this.focusHandlerLock)this.showDialog();};ea.prototype.setFocusHandlerLock=function(fa){"use strict";this.focusHandlerLock=fa;};ea.prototype.renderTrigger=function(){"use strict";var fa={onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onMouseDown:this.setFocusHandlerLock.bind(this,true),onMouseUp:this.setFocusHandlerLock.bind(this,false),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:'trigger'};if(!this.state.reaction||this.state.reaction===n.LikeReaction||!p.reactions[this.state.reaction]){var ga=l.Children.only(this.props.children);return l.cloneElement(ga,Object.assign(Object.assign({onClick:function(event){this.hideDialog();ga.props.onClick(event);}.bind(this)},fa)));}return (l.createElement("a",l.__spread({className:"UFILikeLink UFILinkBright",href:"#",onClick:this.onReactionChange.bind(this,0)},fa),l.createElement(o,{className:"_1ktw",reaction:this.state.reaction,size:"tiny"}),p.reactions[this.state.reaction].display_name));};ea.prototype.render=function(){"use strict";return (l.createElement(j,{className:"uiContextualLayerParent",ref:"root"},this.renderTrigger()));};ea.prototype.$UFIReactionsLink0=function(fa){"use strict";if(this.dialogShownTime!==0){g.log('UserReactionsLoggerConfig',{feedback_id:this.props.id,final_reaction:fa,initial_reaction:this.state.reaction,"interface":'www',time_spent:Date.now()-this.dialogShownTime});this.dialogShownTime=0;}};e.exports=ea;},null);
__d("UFIReactionsTokens.react",["ActorURI","React","UFIConstants","UFIReactionIcon.react","UFIReactionTypes","URI","XUFICommentTooltipController","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController","XUFIReactionTooltipController","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=h.Component;for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v,w){"use strict";r.call(this);this.state={};}u.prototype.renderLikes=function(){"use strict";if(!this.props.feedback.reactioncountmap[i.LikeReaction]["default"])return null;return this.renderToken(i.LikeReaction);};u.prototype.renderComments=function(){"use strict";if(!this.props.commentCount)return null;var v=isNaN(this.props.feedback.commentcountreduced)?this.props.feedback.commentcountreduced:this.props.commentCount,w=g.create(m.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (h.createElement("a",{className:"_3emk _3emm","data-comment-prelude-ref":this.props['data-comment-prelude-ref'],"data-ft":this.props['data-ft'],"data-hover":"tooltip","data-tooltip-uri":w,href:this.props.permalink,onClick:this.props.onCommentClick,rel:"ignore"},v));};u.prototype.renderShares=function(){"use strict";if(!this.props.feedback.sharecount)return null;var v=new l('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid});v=g.create(v,this.props.feedback.actorforpost);var w=new l('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid});w=g.create(w,this.props.feedback.actorforpost);return (h.createElement("a",{ajaxify:v.toString(),className:"_3emk _3emn",href:w.toString(),rel:"dialog"},this.props.feedback.sharecountreduced));};u.prototype.renderTokens=function(){"use strict";var v=k.ordering.map(function(w){if(w===i.LikeReaction||!k.reactions[w]||!this.props.feedback.reactioncountmap[w]["default"])return null;return this.renderToken(w);}.bind(this));return v;};u.prototype.renderToken=function(v){"use strict";var w=this.props.feedback.actorforpost,x=this.props.feedback.entidentifier,y=g.create(o.getURIBuilder().setString('ft_ent_identifier',x).getURI(),w),z=g.create(n.getURIBuilder().setString('ft_ent_identifier',x).getURI(),w),aa=g.create(p.getURIBuilder().setString('ft_ent_identifier',x).setEnum('reaction_type',v).getURI(),w);return (h.createElement("a",{ajaxify:y,className:"_3emk","data-hover":"tooltip","data-tooltip-uri":aa,href:z,key:'reactionType-'+v,rel:"dialog"},h.createElement(j,{className:"_4-op",reaction:v,size:"small"}),this.props.feedback.reactioncountmap[v].reduced));};u.prototype.render=function(){"use strict";return (h.createElement("div",null,this.renderLikes(),this.renderComments(),this.renderShares(),this.renderTokens()));};e.exports=u;},null);