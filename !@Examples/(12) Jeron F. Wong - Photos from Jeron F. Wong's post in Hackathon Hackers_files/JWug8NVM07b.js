/*!CK:1718616959!*//*1438922788,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ySWFc"]); }

__d("MNCommerceErrors",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ALREADY_UNLINKED:1893001};},null);
__d("MNCommerceReplyTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMMERCE_LINK:2};},null);
__d("P2PPaymentLogMessageSubtype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail"};},null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={showDialog:function(j,k){g.dispatch({type:h.DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function(){g.dispatch({type:h.DIALOG.HIDE});}};e.exports=i;},null);
__d("MNCommerceButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.type==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("MNCommerceAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};e.exports=g;},null);
__d("MNCommerceDialog.react",["CurrentEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","XUIDialog.react","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:o,repositionOnUpdate:true,shown:true,width:g.messengerdotcom?j.MDOTCOMDIALOG.WIDTH:j.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this),0);},render:function(){var t=g.messengerdotcom,u=t?k:m;return (l.createElement(u,l.__spread({behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i}},this.props,{className:p(this.props.className,((t?"_3rx0":''))),ref:"dialog"}),this.props.children));}});e.exports=s;},null);
__d("MNCommerceDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"MNCommerceDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("MNCommerceDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceUnlinkDialog.react",["MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MNCommerceUnlinkDialog",propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=m._("Cancel"),r=m._("Turn Off");return (l.createElement(h,{onToggle:this.props.onToggle,shown:this.props.shown},l.createElement(k,{showCloseButton:false},m._("Unlink account?")),l.createElement(i,null,l.createElement("div",null,m._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),l.createElement(j,null,l.createElement(g,{label:q,onClick:this.props.onCancelButtonClick,use:"default"}),l.createElement(g,{label:r,onClick:this.props.onTurnOffButtonClick,use:"confirm"}))));}});e.exports=p;},null);
__d("MNCommerceLoggingConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DIALOG_SURFACE:{SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};e.exports=g;},null);
__d("MNCommerceUnlinkErrorDialog.react",["MNCommerceAttachmentConstants","MNCommerceErrors","React","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"MNCommerceUnlinkErrorDialog",propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=o._("OK"),t=null,u=null;switch(this.props.errorType){case h.ALREADY_UNLINKED:u=i.createElement("div",null,o._("Updates Are Already Off"));t=i.createElement("div",null,o._("You aren't getting updates in Messenger."));break;default:u=i.createElement("div",null,o._("Couldn't Turn Off Updates"));t=i.createElement("div",null,o._("Sorry, something went wrong. Please try again."));break;}return (i.createElement(k,{onToggle:this.props.onToggle,shown:this.props.shown,width:g.UNLINK_ERROR_DIALOG.WIDTH},i.createElement(n,null,u),i.createElement(l,null,t),i.createElement(m,null,i.createElement(j,{label:s,onClick:this.props.onOkayButtonClick,use:"confirm"}))));}});e.exports=r;},null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n.createClass({displayName:"MNCommerceUnlinkDialogContainer",render:function(){var p=i.getState();if(p&&p.errorType){g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK_ERROR})});return (n.createElement(m,{onToggle:this._onToggle,shown:!!p,errorType:p.errorType,onOkayButtonClick:this._hideDialog}));}else{g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});return (n.createElement(l,{onToggle:this._onToggle,shown:!!p,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:p&&p.onTurnOffButtonClick}));}},_onToggle:function(p){if(!p)this._hideDialog();},_hideDialog:function(){h.hideDialog();}});e.exports=o;},null);
__d("XMNCommerceUnlinkController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null);
__d("MNCommerceUnlinkDataManager",["AsyncRequest","MNCommerceDialogStateActions","MNCommerceUnlinkDialogContainer.react","XMNCommerceUnlinkController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(){}k.prototype.unlink=function(l,m){var n=j.getURIBuilder().setString('page_id',l).setString('user_id',m).getURI();new g().setURI(n).setErrorHandler(this.$MNCommerceUnlinkDataManager0).send();};k.prototype.$MNCommerceUnlinkDataManager0=function(l){h.showDialog(i,{errorType:l.error});};e.exports=new k();},null);
__d("MercuryCallLogMessage.react",["FBRTCCore","FBRTCLogger","React","SimpleXUIDialog","Tooltip.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i.createClass({displayName:"MercuryCallLogMessage",render:function(){if(this.props.isAnswered){return (this._renderAnsweredCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));}else return (this._renderMissedCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));},_renderAnsweredCallLogMessage:function(o,p,q){var r=m._("Call {firstname}",[m.param("firstname",p)]),s;if(q){s=m._("You called {firstname}.",[m.param("firstname",p)]);}else s=m._("{firstname} called you.",[m.param("firstname",p)]);return this._generateCallLink(s,r,o,p);},_renderMissedCallLogMessage:function(o,p,q){var r,s;if(q){r=m._("{firstname} missed a call from you.",[m.param("firstname",p)]);s=m._("Call {firstname} again",[m.param("firstname",p)]);}else{r=m._("You missed a call from {firstname}.",[m.param("firstname",p)]);s=m._("Call {firstname} back",[m.param("firstname",p)]);}return this._generateCallLink(r,s,o,p);},_generateCallLink:function(o,p,q,r){if(g.shouldEnableVideoCalling()){return (i.createElement("a",{className:"_1xpw",onClick:this._handleClick.bind(this,q,r)},i.createElement(k,{alignH:"center",position:"above",tooltip:p},o)));}else return (i.createElement("span",{className:"_1xpw"},o));},_handleClick:function(o,p){if(g.isAvailableForWebrtcCalling(o)){g.startOutgoingCall(o,h.Trigger.ADMIN_MESSAGE,false);}else j.show(m._("{firstname} can't be called because they are temporarily offline.",[m.param("firstname",p)]),m._("Can't Connect Call"));}});e.exports=n;},null);
__d("MNCommerceLogMessageUtils",["BanzaiLogger","Link.react","MercuryIDs","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDataManager","MNCommerceDialogStateActions","MNCommerceReplyTypes","MNCommerceUnlinkDialogContainer.react","React","cx","fbt","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=b('MercuryThreads').get();function t(){}t.prototype.isCommercePageAdminMessage=function(u){return !!(u&&u.log_message_data&&u.log_message_data.replyType===n.COMMERCE_LINK);};t.prototype.getCommercePageUnlink=function(u,v){var w=function(){var x=i.getUserIDFromParticipantID(u.author),y=s.getThreadMetaNow(u.thread_id),z=null;y.participants.every(function(ba){if(ba!==u.author){z=i.getUserIDFromParticipantID(ba);return false;}return true;});var aa=function(){m.hideDialog();l.unlink(x,z);};m.showDialog(o,{onTurnOffButtonClick:aa});g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});};return (p.createElement("span",null,u.log_message_body,' ',p.createElement(h,{className:((!v?"_2w2m":'')+(v?' '+"_1jvn":'')),onClick:w},r._("Turn Off"))));};e.exports=new t();},null);
__d("P2PBigAmount.react",["CurrentEnvironment","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"P2PBigAmount",propTypes:{amount:m.string.isRequired,isPending:m.bool,size:m.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium'};},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){return k('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return k('/images/p2p/message-icon-messenger-blue.png');}else return k('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){return k('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return k('/images/p2p/message-icon-facebook-blue.png');}else return k('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return g.messengerdotcom;},render:function(){var o=this.props.size==='large'?'24':'16';return (i.createElement("div",{className:(("_8j6")+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":''))},i.createElement("div",{className:"_8j8"},i.createElement(h,{height:o,src:this.getImage(),width:o})),i.createElement("div",{className:(("_8jc")+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-"))},this.props.amount)));}});e.exports=n;},null);
__d("P2PNonEnabledGroupReceiptDialog.react",["CurrentEnvironment","LeftRight.react","P2PAmountUtils","P2PButton.react","P2PBigAmount.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","XUICloseButton.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=t,x=w.PropTypes,y=t.createClass({displayName:"P2PNonEnabledGroupSendReceiptDialog",propTypes:{amount:x.string.isRequired,onClose:x.func.isRequired,receiverName:x.string.isRequired,senderName:x.string.isRequired},componentDidMount:function(){this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED,{raw_amount:this.props.amount});},log:function(z,aa){p.log(z,Object.assign({www_event_flow:r.UI_FLOW_P2P_GROUP_SEND},aa));},_handleToggle:function(z){if(!z){this.props.onClose();this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED);}},_handleOKClick:function(){this._handleToggle(false);},_handleCloseClick:function(){this._handleToggle(false);},render:function(){var z=g.messengerdotcom,aa=z?270:250,ba=t.createElement(h,null,t.createElement("div",null),t.createElement(o,{onClick:this._handleCloseClick}));return (t.createElement(l,{className:(("_45c8")+(z?' '+"_45c9":'')),layerHideOnBlur:false,onToggle:this._handleToggle,shown:true,width:aa},t.createElement(m,null,!z?ba:null,t.createElement("div",{className:"_45ca"},t.createElement(k,{amount:i.sanitizeAmount(this.props.amount)})),t.createElement(s,{className:"_45cc",size:"small",type:"secondary"},v._("{sender name} sent {amount} to {receiver name}",[v.param("sender name",this.props.senderName),v.param("amount",this.props.amount),v.param("receiver name",this.props.receiverName)]),".")),t.createElement(n,null,t.createElement(j,{use:"confirm",size:"medium",label:v._("OK"),type:"primary",onClick:this._handleOKClick}))));}});e.exports=y;},null);
__d("XP2PTransactionDetailController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null);
__d("P2PMercuryLogMessage.react",["CurrentEnvironment","CurrentUser","Link.react","MercuryIDs","P2PGKValues","P2PGroupSendReceiptDialog.react","P2PNonEnabledGroupReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin","XP2PTransactionDetailController","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=o,u=t.PropTypes,v=o.createClass({displayName:"P2PMercuryLogMessage",mixins:[p],propTypes:{amount:u.string,receiver:u.object.isRequired,sender:u.object.isRequired,subtype:u.oneOf(Object.keys(n).map(function(w){return n[w];})),transferID:u.string.isRequired,threadFBID:u.string,threadID:u.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {groupSendReceiptDetailsShown:false,nonEnabledGroupReceiptDialogShown:false};},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupSendReceiptDetailsShown:false});},handleNonEnabledGroupDetailsLinkClicked:function(){this.setState({nonEnabledGroupReceiptDialogShown:true});},_handleNonEnabledGroupDetailsDialogClosed:function(){this.setState({nonEnabledGroupReceiptDialogShown:false});},isViewerSender:function(){return (j.getUserIDFromParticipantID(this.props.sender.id)===h.getID());},isViewerReceiver:function(){return (j.getUserIDFromParticipantID(this.props.receiver.id)===h.getID());},renderTransferDetailsLink:function(){var w=(q.getURIBuilder()).setString('id',this.props.transferID).getURI();return (o.createElement(i,{className:"_kiq",href:w,target:"_blank"},s._("See details")));},renderGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked},s._("See details")));},renderNonEnabledGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleNonEnabledGroupDetailsLinkClicked},s._("See details")));},renderLayers:function(){var w={};if(this.state.nonEnabledGroupReceiptDialogShown){w.nonEnabledGroupReceiptDialog=o.createElement(m,{amount:this.props.amount,onClose:this._handleNonEnabledGroupDetailsDialogClosed,receiverName:this.props.receiver.short_name,senderName:this.props.sender.short_name});}else if(this.state.groupSendReceiptDetailsShown){var x={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},y={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};w.groupSendReceiptDetailsDialog=o.createElement(l,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:x,sender:y});}return w;},render:function(){var w=null,x=this.props.amount,y=this.props.subtype,z=this.isViewerSender(),aa=this.isViewerReceiver(),ba,ca=g.messengerdotcom?k.P2PGroupSendMessengerDotCom:k.P2PGroupSendWWW;if(!z&&!aa){if(ca){ba=this.renderGroupDetailsLink();}else ba=this.renderNonEnabledGroupDetailsLink();}else ba=this.renderTransferDetailsLink();switch(y){case n.SENT_IN_GROUP:w=(s._("{sendername} sent {amount} to {receivername}. {details}",[s.param("sendername",this.props.sender.short_name),s.param("amount",x),s.param("receivername",this.props.receiver.short_name),s.param("details",ba)]));break;case n.CANCELED_EXPIRED:case n.CANCELED_SAME_CARD:case n.CANCELED_SENDER_RISK:case n.CANCELED_RECIPIENT_RISK:case n.CANCELED_CUSTOMER_SERVICE:if(z){w=(s._("Your {amount} payment was canceled. {details}",[s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("{firstname}'s {amount} payment was canceled. {details}",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));w=o.createElement("span",{className:"_5rdx"},w);break;case n.CANCELED_DECLINED:if(z){w=(s._("{firstname} didn't accept your {amount} payment. {details}",[s.param("firstname",this.props.receiver.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("You didn't accept {firstname}'s {amount} payment. {details}",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));w=o.createElement("span",{className:"_5rdx"},w);break;}return (o.createElement("div",{className:((g.messengerdotcom?"_5rdy":''))},w));}});e.exports=v;},null);