var uppercaseRegEx="[A-Z]",lowercaseRegEx="[a-z]",minLengthRegEx=".{8,}",minOneNumberRegEx="[0-9]",noSymbolRegEx="^[0-9a-zA-Z]*$",unNoSymbolRegex="^[0-9a-zA-Z ]*$",noSpaceRegEx="^[a-zA-Z0-9!@#$%^&*()-_=+;:'\"|~`<>?/{}]*$",minOneLetterRegex=".*[a-zA-Z]",usernameLengthRegex="^[a-zA-Z0-9!@#$%^&*()-_=+;:'\"|~`<>?/{} ]{5,20}$",seqChars=["0123","1234","2345","3456","4567","5678","6789","3210","4321","5432","6543","7654","8765","9876","1111","2222","3333","4444","5555","6666","7777","8888","9999","0000"],pwLengthError="",pwNumberError="",pwUppercaseError="",pwLowercaseError="",pwNosymbolError="",pinLengthError="",pinNotSeqError="",pinNotSsnError="",pinNotDobError="",pwStore="",pwTempStore="",pinStore="",pinTempStore="",ssnTempStore="",unStore="",unTempStore="",unLengthError="",unOneLetterError="",unNoSpaceError="",unNoSymbolError="",newPinLastValue="",ssnFlag=!0,dobFlag=!0,pinValidataionFlag=!0,initialState=!0,isNewPinValid=!0,Serve,Kicksend;(Serve===null||typeof Serve!="object")&&(Serve={}),Serve.Registration=new function(){function s(){jQuery.validator.addMethod("regexcond",function(n,t){var u=$(t).attr("data-val-regexcond-conditionfield"),f=$(t).attr("data-val-regexcond-regexexpression"),r=$("#"+u);if(r.val()&&r.val().toLowerCase()=="true")return $("#Username").length>0&&$("#Username").val().match(f)?!0:($.validator.messages.regexcond=$(t).attr("data-val-regexcond"),!1)})}function h(){var n="customclientlocalized";jQuery.validator.unobtrusive.adapters.add(n,function(t){t.rules[n]="true"}),jQuery.validator.addMethod(n,function(t,i){var u=!1,f="data-val-"+n,e=$(i),o=e.attr(f);return $.validator.messages[n]=o,isNewPinValid!=undefined&&(u=isNewPinValid),u})}function c(){$("#UserAgreement").length&&(jQuery.validator.unobtrusive.adapters.add("vermonterror",function(n){n.rules.vermonterror="true"}),jQuery.validator.addMethod("vermonterror",function(n,t){var u=$("select[name=State] option:selected").text(),r=$("#State");return u=="Vermont"?(r.hasClass("input-validation-error")||r.addClass("input-validation-error"),$.validator.messages.vermonterror=$(t).attr("data-val-vermonterror"),!1):(r.hasClass("input-validation-error")&&r.removeClass("input-validation-error"),!0)}))}function l(){jQuery.validator.unobtrusive.adapters.add("pindobvalidation",function(n){n.rules.pindobvalidation="true"}),jQuery.validator.addMethod("pindobvalidation",function(n,t){var u=$("#YearOfBirth").val(),r=$("#Pin");return u!=""&&u==r.val()?(r.hasClass("input-validation-error")||r.addClass("input-validation-error"),$.validator.messages.pindobvalidation=$(t).attr("data-val-pindobvalidation"),!1):(r.hasClass("input-validation-error")&&r.removeClass("input-validation-error"),!0)})}function r(){jQuery.validator.addMethod("requiredcond",function(n,t){var u=$(t).attr("data-val-requiredcond-conditionfield"),r=$("#"+u);return r.val()&&r.val().toLowerCase()=="true"&&n==""?($.validator.messages.requiredcond=$(t).attr("data-val-requiredcond"),!1):$("#HasStarterCard").length>0&&$("#HasStarterCard").val()=="True"&&n==""?($.validator.messages.requiredcond=$(t).attr("data-val-requiredcond"),!1):$(".radio-group :checked").val()=="True"&&n==""?($.validator.messages.requiredcond=$(t).attr("data-val-requiredcond"),!1):!0})}function a(){if($("[id*=Card_]").each(function(){var t=$(this);t.click(function(){$("#SelectedCardCode").val(t.get(0).id.substring(5)),$("#SelectedCardCode").valid(),t.siblings().removeClass("active").addClass("inactive"),t.removeClass("inactive").addClass("active")})}),$("#SelectedCardCode").length>0&&$("#SelectedCardCode").val()!=""){var n=$("#Card_"+$("#SelectedCardCode").val());n.siblings().removeClass("active").addClass("inactive"),n.removeClass("inactive").addClass("active")}$("form").submit(function(){$("#SelectedCardCode").length>0&&$("#SelectedCardCode").valid(),r()})}function v(){jQuery.validator.unobtrusive.adapters.add("requiredval",function(n){n.rules.requiredval="true"}),jQuery.validator.addMethod("requiredval",function(n,t){var r=$(t).attr("data-val-requiredval-conditionfield");return $("#"+r)!=undefined&&$("#"+r)!=null&&n==""?($.validator.messages.requiredval=$(t).attr("data-val-requiredval"),$("div[data-widget-type=card-selection]").addClass("input-validation-error"),!1):($("div[data-widget-type=card-selection]").removeClass("input-validation-error"),!0)})}function y(){jQuery.validator.unobtrusive.adapters.add("requiredcond",function(n){n.rules.requiredcond="true"}),jQuery.validator.addMethod("requiredcond",function(n,t){var r=$(t).attr("data-val-requiredcond-conditionfield");return $(".radio-group :checked").val()=="True"&&n==""?($.validator.messages.requiredcond=$(t).attr("data-val-requiredcond"),!1):$("#HasStarterCard").val()=="True"&&n==""?($.validator.messages.requiredcond=$(t).attr("data-val-requiredcond"),!1):!0})}function p(){$("#PinConfirm").numeric()}function w(n){$("input[name="+n+"]").blur(function(){$("#emailsuggestion").html(""),$("#emailsuggestion").hide();var r=["aexp.com","yahoo.com","google.com","hotmail.com","gmail.com",,"fastmail.fm","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","serve.com","sbcglobal.net","att.net","gmx.com","mail.com"],i=$("[data-valmsg-for='"+n+"'] span").html();(i==null||i=="")&&$(this).mailcheck({domains:r,suggested:function(n,t){$("#emailsuggestion").html(JSResxKeys.Scripts_Registration_Custom_EmailSuggestion_Part1+'<a href="#" onclick="Serve.Registration.SetSuggestedEmail(\''+t.full+"','"+$(n).attr("name")+"')\">"+t.full+"<\/a>"+JSResxKeys.Scripts_Registration_Custom_EmailSuggestion_Part2),$("#emailsuggestion").show()},empty:function(){$("#emailsuggestion").html(""),$("#emailsuggestion").hide()}})})}function f(){$("[data-action-role=action-target][data-widget-name='starter-card']").slideDown(300)}function e(){$("[data-action-role=action-target][data-widget-name='starter-card']").slideUp(300)}function b(){var h,n;$("#StarterCardNumber").on("keydown",function(){$(this).numeric()});$("#StarterCardSecurityCode").on("keydown",function(){$(this).numeric()});$("#StarterCardNo").on("click",function(){$("#StarterCardNumber").val(""),$("#StarterCardSecurityCode").val(""),$(".CardValidation span").html(""),$(".message.global-error").html(""),$("#HasStarterCard").val("false"),$("#IsStarterCardInfoRequired").val("false"),e()});$("#StarterCardYes").on("click",function(){$("#HasStarterCard").val("true"),$("#IsStarterCardInfoRequired").val("true"),f()});h=$("#HasStarterCard").val(),h!=null&&(h.toLowerCase()=="false"?e():h.toLowerCase()=="true"&&f()),$('input[name="Password"]').keydown(function(n){var i=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pwStore=pwStore!=""?pwStore+String.fromCharCode(i):String.fromCharCode(i),setTimeout(function(){t("kd",pwStore,i,"Password")},300)}),$('input[name="Password"]').keypress(function(n){var i=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pwTempStore=pwTempStore!=""?pwTempStore+String.fromCharCode(i):String.fromCharCode(i),setTimeout(function(){t("kp",pwTempStore,i,"Password")},300)}),$('input[name="PasswordConfirm"]').keydown(function(n){var i=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pwStore=pwStore!=""?pwStore+String.fromCharCode(i):String.fromCharCode(i),setTimeout(function(){t("kd",pwStore,i,"PasswordConfirm")},300)}),$('input[name="PasswordConfirm"]').keypress(function(n){var i=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pwTempStore=pwTempStore!=""?pwTempStore+String.fromCharCode(i):String.fromCharCode(i),setTimeout(function(){t("kp",pwTempStore,i,"PasswordConfirm")},300)}),$('input[name="Pin"]').keydown(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pinStore=pinStore!=""?pinStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){i("kd",pinStore,t,"Pin")},300)}),$('input[name="Pin"]').keypress(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pinTempStore=pinTempStore!=""?pinTempStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){i("kp",pinTempStore,t,"Pin")},300)}),$('input[name="PinConfirm"]').keydown(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pinStore=pinStore!=""?pinStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){i("kd",pinStore,t,"PinConfirm")},300)}),$('input[name="PinConfirm"]').keypress(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;pinTempStore=pinTempStore!=""?pinTempStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){i("kp",pinTempStore,t,"PinConfirm")},300)}),$('input[name="UserName"]').keydown(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;unStore=unStore!=""?unStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){u("kd",unStore,t,"UserName")},300)}),$('input[name="UserName"]').keypress(function(n){var t=n.keyCode?n.keyCode:n.charCode?n.charCode:n.which;unTempStore=unTempStore!=""?pinTempStore+String.fromCharCode(t):String.fromCharCode(t),setTimeout(function(){u("kp",unTempStore,t,"UserName")},300)}),n={limit:21,lengthError:$(".name-length-warning"),checkFields:$(".name-length-check"),runCheck:function(){var t=0;n.checkFields.each(function(){var n=$(this).attr("value").length;t=t+n}),t<=n.limit?n.lengthError.hide("fast"):n.lengthError.show("fast")},init:function(){if(n.checkFields){n.runCheck();$(".name-length-check").on("blur",function(){n.runCheck()})}}},n.init();var o=$(".SsnNumericClass"),s=$(".MaskedSsnNumericClass"),c=$("#isIsisAcntSetup").val();if(c!=undefined&&c=="true"){s.hide(),o.show();function l(){for(var i="",t=ssnTempStore.split(""),n=0;n<t.length;n++)t[n]!="-"&&(t[n]=unescape("%u25CF")),i=i+t[n];s.val(i)}o.on("blur",function(){$(this).val().length>=11&&(ssnTempStore=o.val(),ssnTempStore!=""&&(s.val(ssnTempStore),s.show(),o.hide(),l()))});s.on("focus",function(){s.blur(),s.hide(),o.val(""),o.show(),o.focus()});o.on("focus",function(){})}else{$("#Ssn").on("blur",function(){$(this).val().length>=11&&document.getElementById("Ssn").setAttribute("type","password")});$("#Ssn").on("focus",function(){document.getElementById("Ssn").setAttribute("type","tel")});$("#Ssn").on("focus",function(){$(this).val("")})}$("#check-balance").click(function(n){var t,i,u,f,e;if(n.preventDefault(),r(),$(".card-balance.grid-row").remove(),t=$("#StarterCardNumber").valid(),i=$("#StarterCardSecurityCode").valid(),i==0||t==0)return!1;u=$("#StarterCardNumber").val(),f=$("#StarterCardSecurityCode").val(),$(".card-balance").length>0&&$(".card-balance").remove(),$("#check-balance").addClass("inline-loading"),e=null,$.ajax({url:P2P_PATH+"User/Registration/GetCardBalance",data:{argString:"arg string"},dataType:"json",traditional:!0,type:"POST",data:{CardNumber:u,CardId:f},async:!0,success:function(n){if($("#check-balance").removeClass("inline-loading"),n!=null&&n.isRedirect){window.location=n.redirectUrl;return}if(n!=null&&n.errorMessage.toString()==""){var t='<div class="card-balance grid-row"><div class="label grid-contents">'+JSResxKeys.Scripts_Registration_Custom_AjaxCardBalance_Part1+'<\/div><div class="value grid-contents">'+JSResxKeys.Scripts_Registration_Custom_AjaxCardBalance_Part2+n.availableBalance.toFixed(2).toString()+"<\/div><\/div>";$(".card-balance").length==0&&$(t).insertAfter(".check-balance"),$(".CardValidation span").html("")}else $(".CardValidation span").html(n.errorMessage.toString())},error:function(){}})})}function k(){$(".flow-isis-fast-sign-up").length>0&&(d(),g(),$("#emailsuggestion").hide())}function d(){function r(){n=$("#BankId option:selected").val(),t=$("#CreditCardId option:selected").val(),i=$("#DebitCardId option:selected").val()}function u(){$("#BankId").val(""),$("#CreditCardId").val(""),$("#DebitCardId").val(""),$("#IsBankAvailable").val(!1),$("#IsCreditCardAvailable").val(!1),$("#IsDebitCardAvailable").val(!1)}var n="",t="",i="";u(),$("#BankId").change(function(){r(),n!=""?$("#IsBankAvailable").val(!0):n==""&&$("#IsBankAvailable").val(!1)}),$("#CreditCardId").change(function(){r(),t!=""?$("#IsCreditCardAvailable").val(!0):t==""&&$("#IsCreditCardAvailable").val(!1)}),$("#DebitCardId").change(function(){r(),i!=""?$("#IsDebitCardAvailable").val(!0):i==""&&$("#IsDebitCardAvailable").val(!1)}),$(".btn-secondary.inactive").length>0&&$('input[name="MobileBillingZipCode"]').keypress(function(n){var t=n.keyCode||n.which;t==13&&n.preventDefault()}),jQuery.validator.unobtrusive.adapters.add("requiredcondforaddfundingsources",function(n){n.rules.requiredcondforaddfundingsources="true"}),jQuery.validator.addMethod("requiredcondforaddfundingsources",function(n,t){var r=$(t).attr("data-val-requiredcondforaddfundingsources-conditionfield"),o=$("#"+r),u=$("#IsBankAvailable").val(),f=$("#IsCreditCardAvailable").val(),e=$("#IsDebitCardAvailable").val();return u.toLowerCase()=="true"||f.toLowerCase()=="true"||e.toLowerCase()=="true"?!0:($.validator.messages.requiredcondforaddfundingsources=$(t).attr("data-val-requiredcondforaddfundingsources"),!1)})}function g(){$("[name=MaskedEmailAddress]").length>0&&(jQuery.validator.unobtrusive.adapters.add("regexcompareconditional",function(n){n.rules.regexcompareconditional="true"}),jQuery.validator.addMethod("regexcompareconditional",function(n,t){var u=$(t).attr("data-starting-value"),r;return $("[name=MaskedEmailAddress]").val().toLowerCase()==u.toLowerCase()?!0:(r=$(t).attr("data-val-regexcompareconditional-regexpattern"),$("[name=MaskedEmailAddress]").val().match(r))?!0:($.validator.messages.regexcompareconditional=$(t).attr("data-val-regexcompareconditional"),!1)}))}function t(n,t,i,r){var u=$('input[name="'+r+'"]'),f;if(u[0].value==""){ot(u);return}t=u[0].value,f=$("[data-valmsg-for='Password']").css("display"),lt(t,f)}function i(n,t,i,r){var u,f;if(initialState=!1,u=$('input[name="'+r+'"]'),u[0].value==""){st(u);return}t=u[0].value,f=$("[data-valmsg-for='Pin']").css("display"),at(t,f,u)}function u(n,t,i,r){var u=$('input[name="'+r+'"]'),f;if(u[0].value==""){ht(u);return}t=u[0].value,f=$("[data-valmsg-for='UserName']").css("display"),ct(t,f)}function nt(n){return n=$("[name=FirstName]").val()!=""&&$("[name=FirstName]").valid()==1?n.replace("{0}",$("[name=FirstName]").val()):n.replace(", {0}","")}function tt(n){return n=n.replace("{0}","<a href='"+JSResxKeys.Scripts_Registration_Custom_SetEmailAddressContextualHelp_Part1+"' target='_blank'>"),n=n.replace("{1}","<\/a>"),n=n.replace("{2}","<a href='"+JSResxKeys.Scripts_Registration_Custom_SetEmailAddressContextualHelp_Part2+"' target='_blank'>"),n=n.replace("{3}","<\/a>")}function it(n){var t=$("#card-selector").length;return n=t==0?n.replace("{0}","Serve"):n.replace("{0} ","")}function rt(n){return n=n.replace("{0}",'<a href="#" onclick="AccountSetupView.ReloadImage(); this.blur(); return false;">'),n=n.replace("{1}","<\/a>")}function ut(n){return n="<div class='card-hint-text'>"+n+"<\/div><img class='card-hint-image serve-cvv' src='data:image/gif;base64,R0lGODlhDgAJAIAAAP///wAAACH5BAEAAAAALAAAAAAOAAkAAAIKhI+py+0Po5yqAAA7' />"}function ft(n){return n="<div class='card-hint-text'>"+n+"<\/div><div class='card-hint-image agave-card-digits'><\/div>"}function et(n){return n="<div class='card-hint-text'>"+n+"<\/div>",n+=$("body").hasClass("redcard")?"<img class='card-hint-image serve-cvv' src='data:image/gif;base64,R0lGODlhDgAJAIAAAP///wAAACH5BAEAAAAALAAAAAAOAAkAAAIKhI+py+0Po5yqAAA7' />":"<div class='card-hint-image agave-cvv'><\/div>"}function ot(){pwTempStore="",pwStore="";var n="";(pwLengthError=="fail"||pwUppercaseError=="fail"||pwLowercaseError=="fail"||pwNumberError=="fail"||pwNosymbolError=="fail")&&(n="fail"),$("[name='pwlengthrule']").removeClass(pwLengthError).addClass(n),pwLengthError=n,$("[name='pwuppercaserule']").removeClass(pwUppercaseError).addClass(n),pwUppercaseError=n,$("[name='pwlowercaserule']").removeClass(pwLowercaseError).addClass(n),pwLowercaseError=n,$("[name='pwnumberrule']").removeClass(pwNumberError).addClass(n),pwNumberError=n,$("[name='pwsymbolerule']").removeClass(pwNosymbolError).addClass(n),pwNosymbolError=n}function st(){pinTempStore="",pinStore="";var n="";(pinLengthError=="fail"||pinNotSeqError=="fail"||pinNotSsnError=="fail"||pinNotDobError=="fail")&&(n="fail"),$("[name='pinlengthrule']").removeClass(pinLengthError).addClass(n),pinLengthError=n,$("[name='pinnotseqrule']").removeClass(pinNotSeqError).addClass(n),pinNotSeqError=n,$("[name='pinnotssnrule']").removeClass(pinNotSsnError).addClass(n),$("[name='pinnotssnrule']").hasClass("pass")&&$("[name='pinnotssnrule']").removeClass("pass").addClass(n),pinNotSsnError=n,$("[name='pinnotdobrule']").removeClass(pinNotDobError).addClass(n),pinNotDobError=n}function ht(){unTempStore="",unStore="";var n="";(unLengthError=="fail"||unOneLetterError=="fail"||unNoSpaceError=="fail"||unNoSymbolError=="fail")&&(n="fail"),$("[data-form-rule='UsernameLength']").removeClass(unLengthError).addClass(n),unLengthError=n,$("[data-form-rule='usernameatleastonenumberrule']").removeClass(unOneLetterError).addClass(n),unOneLetterError=n,$("[data-form-rule='usernameNotspacve']").removeClass(unNoSpaceError).addClass(n),unNoSpaceError=n,$("[data-form-rule='usernameNotsymbol']").removeClass(unNoSymbolError).addClass(n),unNoSymbolError=n}function ct(t,i){var r=t.match(usernameLengthRegex)!=null;unLengthError=n(r,i,$("[data-form-rule='UsernameLength']"),unLengthError),r=t.match(minOneLetterRegex)!=null,unOneLetterError=n(r,i,$("[data-form-rule='usernameatleastonenumberrule']"),unNoSymbolError),r=t.match(noSpaceRegEx)!=null,unNoSpaceError=n(r,i,$("[data-form-rule='usernameNotspacve']"),unNoSymbolError),r=t.match(unNoSymbolRegex)!=null,unNoSymbolError=n(r,i,$("[data-form-rule='usernameNotsymbol']"),unNoSymbolError)}function lt(t,i){var r=t.match(uppercaseRegEx)!=null;pwUppercaseError=n(r,i,$("[name='pwuppercaserule']"),pwUppercaseError),r=t.match(lowercaseRegEx)!=null,pwLowercaseError=n(r,i,$("[name='pwlowercaserule']"),pwLowercaseError),r=t.match(minLengthRegEx)!=null,pwLengthError=n(r,i,$("[name='pwlengthrule']"),pwLengthError),r=t.match(noSymbolRegEx)!=null,pwNosymbolError=n(r,i,$("[name='pwsymbolerule']"),pwNosymbolError),r=t.match(minOneNumberRegEx)!=null,pwNumberError=n(r,i,$("[name='pwnumberrule']"),pwNumberError)}function at(t,i,r){var u,f,h;$("form").find("[data-form-rule='pinLength']")!=null&&$("form").find("[data-form-rule='pinLength']").length>0?(u=t.length==4&&jQuery.isNumeric(t),pinLengthError=n(u,i,$("[name='pinlengthrule']"),pinLengthError),u=jQuery.inArray(t,seqChars)==-1):u=jQuery.inArray(t,seqChars)==-1&&t.length==4&&jQuery.isNumeric(t),pinNotSeqError=n(u,i,$("[name='pinnotseqrule']"),pinNotSeqError);var s=$('input[name="Ssn"]'),o=s.length?s.val().substring(s.val().length-4,4):undefined,e=s.val();o!=undefined&&(o.length==0||o.length==4)?(u=t!=o,pinNotSsnError=n(u,i,$("[name='pinnotssnrule']"),pinNotSsnError)):e!=undefined&&(e.length==0||e.length==11)?(u=t!=e.substring(7,e.length),pinNotSsnError=n(u,i,$("[name='pinnotssnrule']"),pinNotSsnError)):$("#pin_Validation")!=null&&$("#pin_Validation").length>0?n(ssnFlag,i,$("[data-form-rule='pinNotSSN']"),pinNotSsnError):o==undefined&&e==undefined&&(vt(r,t,i),n(ssnFlag,i,$("[data-form-rule='pinNotSSN']"),pinNotSsnError)),$('input[name="DateOfBirth"]').length>0?(f=$('input[name="DateOfBirth"]').val(),f!=""&&f!=undefined&&(h=new Date(f),f=h.getFullYear().toString()),u=t!=f):$('input[name="YearOfBirth"]').length>0?(f=$('input[name="YearOfBirth"]').val(),u=t!=f,$("#pin_Validation")!=null&&$("#pin_Validation").length>0&&!u&&(i="block")):u=dobFlag,pinNotDobError=n(u,i,$("[name='pinnotdobrule']"),pinNotDobError)}function vt(t,i,r){var f,u,e;if(i!=newPinLastValue){if(newPinLastValue=i,i.length<4){pinNotSsnError=n(!0,r,$("[data-form-rule='pinNotSSN']"),pinNotSsnError),pinNotDobError=n(!0,r,$("[data-form-rule='pinNotBirthYear']"),pinNotDobError),$(t).valid();return}(f=$("input[name=__RequestVerificationToken]").val(),u=$("#brandUrlForPinValidationAjaxCall").val(),u!=undefined)&&(e=u,$.ajax({url:P2P_PATH+e,dataType:"json",type:"POST",data:{newPin:i,__RequestVerificationToken:f},async:!0,success:function(n){o(n,t),ssnFlag=n.isPinPassedForSsnRule,dobFlag=n.isPinPassedForDobRule,$(t).valid()},error:function(n){n.isPinPassedForSsnRule=!0,n.isPinPassedForDobRule=!0,o(n,t),$(t).valid()}}))}}function o(t,i){isNewPinValid=t.isPinPassedForSsnRule&&t.isPinPassedForDobRule;var r=$("[data-valmsg-for='"+$(i).attr("id")+"']").css("display");pinNotSsnError=n(t.isPinPassedForSsnRule,r,$("[data-form-rule='pinNotSSN']"),pinNotSsnError),pinNotDobError=n(t.isPinPassedForDobRule,r,$("[data-form-rule='pinNotBirthYear']"),pinNotDobError)}function n(n,t,i,r){return n?(i.removeClass(r).addClass("pass"),r="pass"):initialState&&t!="block"?(i.removeClass(r),r=""):(i.removeClass(r).addClass("fail"),r="fail"),r}function yt(){var n=$("#BrandCode").val();n!=null&&n.length>1&&(n=n.charAt(0).toUpperCase()+n.slice(1)),typeof lpTag!="undefined"&&lpTag&&lpTag.events&&lpTag.events.bind("lp_emt_event_bridge","LP_DYNBUTTON_CLICKED",function(){omnitureRichMediaAction("US:"+n+":Secure:Register:OnePage","Click>ClickToChat")})}this.GetContextualHelpText=function(n){var r=n.attr("data-val-contextualhelp"),f=n.closest(".input-fieldset"),e;return n.attr("name")=="Password"||n.attr("name")=="PasswordConfirm"?(t("",n.val(),-1,n.attr("name")),r=f.find(".contextual-help").html(),r!=null&&(r=r.replace('<span class="contextual-help-sm"><\/span>',""),r=r+"<span class='contextual-help-sm'>"+f.find("[data-rule-set]").html()+"<\/span>")):n.attr("name")=="Pin"||n.attr("name")=="PinConfirm"?(i("",n.val(),-1,n.attr("name")),r=f.find(".contextual-help").html(),r!=null&&(r=r.replace('<span class="contextual-help-sm"><\/span>',""),r=r+"<span class='contextual-help-sm'>"+f.find("[data-rule-set]:nth-child(1)").html()+"<\/span>",r=r+"<span class='contextual-help-sm'>"+f.find("[data-rule-set]:nth-child(2)").html()+"<\/span>")):n.attr("name")=="UserName"?(u("",n.val(),-1,n.attr("name")),r=f.find(".contextual-help").html(),r!=null&&(r=r.replace('<span class="contextual-help-sm"><\/span>',""),r=r+"<span class='contextual-help-sm'>"+f.find("[data-rule-set]").html()+"<\/span>")):(e=n.attr("data-val-contextualhelp-secondarymessage"),e!==undefined&&$.trim(e)!=""&&(r=r+"<span class='contextual-help-sm'>"+e+"<\/span>")),r!=undefined&&r.trim()!=""&&(r=this.FormatContextualHelpText(n,r,null)),r},this.InsertContextualHelpText=function(n,t){var i,r,u;return n==null?!1:t==null?!1:(n.substr(1,1)!="#"&&(n="#"+n),t.substr(1,1)!="#"&&(t="#"+t),i=$(n),r=$(t),i==null||r==null)?!1:(u=this.GetContextualHelpText(i),$(t).html($(t).html()+u),!0)},this.FormatContextualHelpText=function(n,t,i){var r=n.attr("name");i!=null&&(r=i);switch(r){case"LastName":t=nt(t);break;case"EmailAddress":case"MaskedEmailAddress":t=tt(t);break;case"Line1":case"City":case"Line2":case"State":case"PostalCode":t=it(t);break;case"CaptchaAnswer":t=rt(t);break;case"StarterCard.StarterCardSecurityCode":case"StarterCardSecurityCode":case"StarterCardNumber":t=ut(t);break;case"CardNumber":t=ft(t);break;case"SecurityCode":t=et(t)}return r=="CaptchaAnswer"&&(t=t.replace("{0}",'<a href="#">'),t=t.replace("{1}","<\/a>")),t},this.SetSuggestedEmail=function(n,t){$("input[name="+t+"]").val(n),$("#emailsuggestion").html(""),$("#emailsuggestion").hide(),$("input[name="+t+"]").focus()},this.Init=function(){jQuery.validator.unobtrusive.adapters.add("requiredcond",function(n){n.rules.requiredcond="true"}),jQuery.validator.addMethod("requiredboolcond",function(n,t){return options.element.tagName.toUpperCase()=="INPUT"&&options.element.type.toUpperCase()=="CHECKBOX"?t.checked:!1}),jQuery.validator.unobtrusive.adapters.add("requiredboolcond",function(n){n.element.tagName.toUpperCase()=="INPUT"&&n.element.type.toUpperCase()=="CHECKBOX"&&(n.rules.required=!0,n.message&&(n.messages.required=n.message))}),b(),a(),v(),w($(".flow-isis-fast-sign-up").length>0&&$("[name=MaskedEmailAddress]").length>0?"MaskedEmailAddress":"EmailAddress"),y(),p(),this.multipleNegativeCompare.init(),this.dateMinMaxMultipleErrorValidator.init(),s(),r(),k(),this.ssnRegexValidation.init(),c(),l(),yt(),h(),$("input[data-val-date]").removeAttr("data-val-date")},this.dateMinMaxMultipleErrorValidator=new function(){function n(){jQuery.validator.unobtrusive.adapters.add("dobminmaxrange",function(n){n.rules.dobminmaxrange="true"}),jQuery.validator.addMethod("dobminmaxrange",function(n,t){var u=0,r=$(t),f,p,s,w,h,c,e,l,a;if(n!=null&&n.length!=0){if((f=n.split("/"),f.length!=3)||(p=f[0],s=parseInt(p,10),s<1||s>12)||(w=f[1],h=parseInt(w,10),h<1||h>31)||(c=f[2],c.length<4))return $.validator.messages.dobminmaxrange=r.attr("data-val-dobminmaxrange-err3"),!1;if(c.substring(0,2)=="00")return $.validator.messages.dobminmaxrange=r.attr("data-val-dobminmaxrange-err0"),!1}else return $.validator.messages.dobminmaxrange=r.attr("data-val-dobminmaxrange-err3"),!1;while(r.attr("data-val-dobminmaxrange-prop"+u)){if(e=$("[name="+r.attr("data-val-dobminmaxrange-prop"+u)+"]"),e.selector=="[name=mindate]"){var v=r.attr("data-val-dobminmaxrange-err"+u),b=r.attr("data-val-dobminmaxrange-date"),k=new Date(b),y=new Date(n);if(y<k)return l=n.split("/"),$.validator.messages.dobminmaxrange=l.length==3&&l[2].length>=2?v:r.attr("data-val-dobminmaxrange-err3"),!1}else if(e.selector=="[name=maxdate]"){var v=r.attr("data-val-dobminmaxrange-err"+u),d=r.attr("data-val-dobminmaxrange-offset"),o=new Date,g=o.getFullYear(),nt=g+parseInt(d),tt=o.getMonth()+1,it=o.getDate(),rt=tt+"/"+it+"/"+nt,ut=new Date(rt),y=new Date(n);if(ut<y)return a=n.split("/"),$.validator.messages.dobminmaxrange=a.length==3&&a[2].length>=2?v:r.attr("data-val-dobminmaxrange-err3"),!1}else if(e.selector=="[name=futuredate]"){var v=r.attr("data-val-dobminmaxrange-err"+u),o=new Date,y=new Date(n);if(y>o)return $.validator.messages.dobminmaxrange=v,!1}u++}return r.attr("data-val-dobminmaxrange",""),!0})}this.init=function(){n()}},this.multipleNegativeCompare=new function(){function n(){jQuery.validator.unobtrusive.adapters.add("multiplenegativecompare",function(n){n.rules.multiplenegativecompare="true"}),jQuery.validator.addMethod("multiplenegativecompare",function(n,t){for(var e=0,f=$(t),r,u,s,h,c,o;f.attr("data-val-multiplenegativecompare-prop"+e);){if(r=$("[name="+f.attr("data-val-multiplenegativecompare-prop"+e)+"]"),u=r.val(),r.selector=="[name=Ssn]"&&(r.length>0?(s=r.val().length,h=r.val().substr(s-4,4),u=h):pinValidataionFlag=ssnFlag),n=n.toLowerCase(),r.selector=="[name=DateOfBirth]"&&(c=new Date(u),u=c.getFullYear()),r.selector=="[name=YearOfBirth]"&&(r.length>0?u=$("[name=YearOfBirth]").val():pinValidataionFlag=dobFlag),n==u||pinValidataionFlag==!1)return o=f.attr("data-val-multiplenegativecompare-err"+e),f.attr("data-val-multiplenegativecompare",o),$.validator.messages.multiplenegativecompare=o,!1;e++}return f.attr("data-val-multiplenegativecompare",""),!0})}this.init=function(){n()}},this.ssnRegexValidation=new function(){function n(){jQuery.validator.unobtrusive.adapters.add("ssnregex",function(n){n.rules.ssnregex="true"}),jQuery.validator.addMethod("ssnregex",function(n,t){var r=$(t).attr("data-val-ssnregex-expresiontovalidate"),u=$(t).val().replace(/-/g,"");return u.match(r)==null?($.validator.messages.ssnregex=$(t).attr("data-val-ssnregex"),!1):!0})}this.init=function(){n()}}},$(document).ready(Serve.Registration.Init()),$(document).ready(CopyContextualhelpToLabel()),function(n){n.fn.mailcheck=function(n,t){var i="yahoo.com,google.com,hotmail.com,gmail.com,me.com,fastmail.fm,aol.com,mac.com,live.com,comcast.net,googlemail.com,msn.com,hotmail.co.uk,yahoo.co.uk,facebook.com,verizon.net,sbcglobal.net,att.net,gmx.com,mail.com".split(","),u="co.uk,com,net,org,info,edu,gov,mil".split(","),r,n;"object"==typeof n&&void 0===t?n.domains=n.domains||i:(r=n,n=t,n.domains=r||i),n.topLevelDomains=n.topLevelDomains||u,n.distanceFunction=Kicksend.sift3Distance,(i=Kicksend.mailcheck.suggest(encodeURI(this.val()),n.domains,n.topLevelDomains,n.distanceFunction))?n.suggested&&n.suggested(this,i):n.empty&&n.empty(this)}}(jQuery),Kicksend={mailcheck:{threshold:3,suggest:function(n,t,i,r){if(n=n.toLowerCase(),n=this.splitEmail(n),t=this.findClosestDomain(n.domain,t,r)){if(t!=n.domain)return{address:n.address,domain:t,full:n.address+"@"+t}}else if(i=this.findClosestDomain(n.topLevelDomain,i),n.domain&&i&&i!=n.topLevelDomain)return t=n.domain,t=t.substring(0,t.lastIndexOf(n.topLevelDomain))+i,{address:n.address,domain:t,full:n.address+"@"+t};return!1},findClosestDomain:function(n,t,i){var u,f=99,e=null,r;if(!n||!t)return!1;for(i||(i=this.sift3Distance),r=0;r<t.length;r++){if(n===t[r])return n;u=i(n,t[r]),u<f&&(f=u,e=t[r])}return f<=this.threshold&&null!==e?e:!1},sift3Distance:function(n,t){var r;if(null==n||0===n.length)return null==t||0===t.length?0:t.length;if(null==t||0===t.length)return n.length;for(var i=0,u=0,f=0,e=0;i+u<n.length&&i+f<t.length;){if(n.charAt(i+u)==t.charAt(i+f))e++;else for(r=f=u=0;5>r;r++){if(i+r<n.length&&n.charAt(i+r)==t.charAt(i)){u=r;break}if(i+r<t.length&&n.charAt(i)==t.charAt(i+r)){f=r;break}}i++}return(n.length+t.length)/2-e},splitEmail:function(n){var t;if(n=n.split("@"),2>n.length)return!1;for(t=0;t<n.length;t++)if(""===n[t])return!1;var u=n.pop(),i=u.split("."),r="";if(0==i.length)return!1;if(1==i.length)r=i[0];else{for(t=1;t<i.length;t++)r+=i[t]+".";2<=i.length&&(r=r.substring(0,r.length-1))}return{topLevelDomain:r,domain:u,address:n.join("@")}}}},$(document).ready(function(){var t=function(){$("#uploadFileForm").hide(),$("#attachAnotherSection").show()},n=function(){$("#attachAnotherSection").hide(),$("#selectedFileName").hide(),$("#uploadFileForm").show()},i=function(){$("#btnAttach").hide(),$("#selectedFileName").show(),$("#lnkAttach").show()},r=function(){$("#selectedFileName").hide(),$("#lnkAttach").hide(),$("#btnAttach").show()};$("#hideFormSwitch").val()=="true"?t():n(),$("#fileSelector").change(function(){var n=$(this).val().split("\\");$("#selectedFileName").text(n[n.length-1]),i()}),$("#attachAnotherButton").click(function(){n()}),$("#lnkAttach").click(function(){r()}),$("#btnUpload").click(function(){document.forms.uploadFileForm.submit()})})