/*!CK:997228738!*//*1438117511,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["rX2fN"]); }

__d("TimelineAppSectionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={collectionTabKeyToAppTabKey:{friends_recent:"friends",friends_all:"friends",friends_mutual:"friends",photos_of:"photos",photos_all:"photos",photos_albums:"photos",likes_recent:null,info_all:"about",music_my_music:"music",music_favs:"music",music_playlists:"music",books_read:"books",books_favorite:"books",books_want:"books",recent_places:null,fitness_overview:"fitness",friends_featured:null,places_want:null,info_contact:null,fitness_running:"fitness",fitness_cycling:"fitness",friends_followers:"friends",friends_following:"friends",music_radio:"music",info_history:null,recent_games:"games",products_want:null,photos_archive:"photos",notes_my_notes:"notes",notes_drafts:"notes",notes_about_me:"notes",video_movies_watch:"movies",video_tv_shows_watch:"tv",music_saved:"music",video_movies_want:"movies",video_tv_shows_want:"tv",video_movies_favorite:"movies",video_tv_shows_favorite:"tv",friends_high_school:"friends",friends_college:"friends",friends_work:"friends",friends_suggested:"friends",apps_like:"games",upcoming_events:"events",past_events:"events",likes_people:"likes",likes_sports:null,fitness_report:null,groups_member:"groups",music_heavy_rotation:"music",photos_album:"photos",photos_untagged:"photos",music_mutual:"music",likes_restaurants:"likes",likes_clothing:null,info_insights:null,apps_used:"games",games_play:"games",games_apps_saved:"games",video_movies_suggestions:null,video_tv_shows_suggestions:null,books_suggestions:null,saved_books:"saved",saved_movies:"saved",saved_tv_shows:"saved",saved_music:"saved",places_saved:"map",saved_links:"saved",sports_teams:"sports",likes_all:"likes",saved_places:"saved",saved_all:"saved",sports_athletes:"sports",sports_activities:null,saved_events:"saved",saved_archived:"saved",places_recent:"map",places_visited:"map",reviews_written:"reviews",likes_section_movies:"likes",likes_section_tv_shows:"likes",likes_section_books:"likes",likes_section_music:"likes",likes_section_sports_teams:"likes",place_visits_by_place_tag:null,places_cities:"map",place_visits_by_city:null,topic_visit_counts:"map",place_visits_by_topic:null,place_visit_stories:null,places_map:"map",likes_section_apps_and_games:"likes",likes_section_sports_athletes:"likes",places_cities_desktop:"map",saved_videos:"saved",saved_pages:"saved",friends_with_upcoming_birthdays:"friends",friends_current_city:"friends",friends_hometown:"friends",at_work_contact:null,place_reviews_written:"reviews",movie_reviews_written:"reviews",tv_show_reviews_written:"reviews",book_reviews_written:"reviews",photos_all_expanded:"photos",videos_by_user:"videos",videos_user_tagged:"videos",external_videos_for_user:"videos",friends_map:"friends",videos_user_all:"videos",saved_posts:"saved",saved_photo_posts:"saved",saved_products:"saved",info_about:null,info_all_relationships:null,info_contact_basic:null,info_edu_work:null,info_overview:null,info_places:null,info_at_work:null,info_year_overviews:null,followers:"friends",following:"friends",media_set:"photos",photos_stream:"photos",photos_synced:"photos",apps:"games",videos_by:"videos",videos_of:"videos"}};},null);
__d("AsyncUploadRequest",["AsyncUploadBase"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.setFiles=function(k){"use strict";this._files=g.parseFiles(k);return this;};j.prototype.abort=function(){"use strict";this._uploads.forEach(function(k){return this._abort(k);}.bind(this),this);};j.prototype.send=function(){"use strict";if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var k in this._files)this._files[k].forEach(function(l){this._uploads.push(this._createFileUpload(k,l));}.bind(this));this._waiting=this._uploads.slice(0);this._pending=[];if(this._uploads.length){this._processQueue();}else this._processUpload(this._createFileUpload(null,null));};j.prototype._processQueue=function(){"use strict";i._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform('complete',this._uploads);};j.isSupported=function(){"use strict";return g.isSupported();};e.exports=j;},null);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","CurrentUser","DataStore","DOMQuery","Event","Form","JSONPTransport","Parent","URI","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();function v(ba){var ca={},da=n.scry(ba,'input[type="file"]');da.forEach(function(ea){ca[ea.name]=ea.files;});return ca;}function w(ba){var ca=n.scry(ba,'input[type="file"]');ca.forEach(function(da){da.files=null;});}var x=t(g,k);for(var y in x)if(x.hasOwnProperty(y))aa[y]=x[y];var z=x===null?null:x.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=x;function aa(ba,ca,da){"use strict";x.call(this);if(ba.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(ba.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=ba;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';this._files=null;ca&&this.enableBehaviors(ca);this._options=da||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);this.setUploadInParallel(this._options.uploadInParallel);this.setConcurrentLimit(this._options.concurrentLimit);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[o.listen(document.documentElement,'submit',this._submit.bind(this)),o.listen(this._form,'click',this._click.bind(this))];m.set(this._form,'FileForm',this);}aa.prototype.getRoot=function(){"use strict";return this._form;};aa.prototype.setAllowCrossOrigin=function(ba){"use strict";this._allowCrossOrigin=!!ba;return this;};aa.prototype.setAllowCrossPageTransition=function(ba){"use strict";this._allowCrossPageTransition=!!ba;return this;};aa.prototype.setUploadInParallel=function(ba){"use strict";this._uploadInParallel=!!ba;return this;};aa.prototype.setConcurrentLimit=function(ba){"use strict";this._concurrentLimit=ba;return this;};aa.prototype.setPreprocessHandler=function(ba){"use strict";this._preprocessHandler=ba;return this;};aa.prototype.setNetworkErrorRetryLimit=function(ba){"use strict";this._retryLimit=ba;return this;};aa.prototype.setFiles=function(ba){"use strict";this._files=ba;return this;};aa.prototype.canUseXHR=function(){"use strict";var ba='FormData' in window;if(ba)if(!new s(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)ba=false;return ba;};aa.prototype._submit=function(event){"use strict";if(event.isDefaultPrevented()||event.getTarget()!==this._form)return;if(this.inform('submit')===false){event.prevent();return;}return this.canUseXHR()?this._sendViaXHR(event):this._sendViaFrame(event);};aa.prototype._click=function(event){"use strict";var ba=event.getTarget();while(n.isElementNode(ba)){if(ba.type==='submit'){this._clickTarget=ba;setTimeout(this._unclick.bind(this),0);break;}ba=ba.parentNode;}};aa.prototype._unclick=function(){"use strict";this._clickTarget=null;};aa.prototype._sendViaFrame=function(event){"use strict";var ba=this._request=new h();ba.setStatusElement(this._getStatusElement());ba.addStatusIndicator();ba.setOption('useIframeTransport',true);var ca=ba.handleResponse.bind(ba),da=new q('iframe',this._form.action,ca),ea=da.getTransportFrame(),fa=da.getRequestURI().addQueryData({__iframe:true,__user:l.getID()});this._form.setAttribute('action',fa.toString());this._form.setAttribute('target',ea.name);ba.setJSONPTransport(da);ba.setURI(fa);ba.setHandler(this.success.bind(this,null));ba.setErrorHandler(this.failure.bind(this,null));ba.setInitialHandler(u(this.initial,this,null));};aa.prototype._sendViaXHR=function(event){"use strict";var ba;if(this._uploadInParallel&&j.isSupported()){ba=new j().setPreprocessHandler(this._preprocessHandler).setData(p.serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);if(this._concurrentLimit)ba.setLimit(this._concurrentLimit);if(this._files){ba.setFiles(this._files);}else ba.setFiles(v(this._form));var ca=[ba.subscribe('progress',function(ha,ia){this.progress(ia,ia.getProgressEvent());}.bind(this)),ba.subscribe('initial',function(ha,ia){this.initial(ia,ia.getResponse());}.bind(this)),ba.subscribe('success',function(ha,ia){this.success(ia,ia.getResponse());}.bind(this)),ba.subscribe('start',function(ha,ia){this.inform('start',{upload:ia});}.bind(this)),ba.subscribe('failure',function(ha,ia){this.failure(ia,ia.getResponse());return false;}.bind(this)),ba.subscribe('complete',function(){while(ca.length)ca.pop().unsubscribe();})];}else{var da;if(this._files){da=p.createFormData(p.serialize(this._form,this._clickTarget));var ea=j.parseFiles(this._files);for(var fa in ea){var ga=ea[fa];if(ga.length===1){da.append(fa,ga[0]);}else{fa=fa+'[]';ga.forEach(function(ha){da.append(fa,ha);});}}}else da=p.createFormData(this._form,this._clickTarget);ba=new h().setRawData(da).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(u(this.initial,this,null));}ba.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=ba;event&&event.prevent();};aa.prototype.forceSendViaXHR=function(){"use strict";return this._sendViaXHR(null);};aa.prototype.initial=function(ba){"use strict";return this.inform('initial',{upload:ba});};aa.prototype.success=function(ba,ca){"use strict";var da={response:ca,upload:ba};if(this.inform('success',da)!==false)o.fire(this._form,'success',da);this._cleanup();};aa.prototype.failure=function(ba,ca){"use strict";var da={response:ca,upload:ba};if(this.inform('failure',da)!==false)if(o.fire(this._form,'error',da)!==false)i.defaultErrorHandler(ca);this._cleanup();};aa.prototype.progress=function(ba,event){"use strict";this.inform('progress',{event:event,upload:ba});};aa.prototype.abort=function(){"use strict";if(this._request){this._request.abort();this._cleanup();}};aa.prototype.clear=function(){"use strict";w(this._form);};aa.prototype.destroy=function(){"use strict";this._cleanup();while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;m.remove(this._form,'FileForm');};aa.prototype._cleanup=function(){"use strict";this._request=null;};aa.prototype._getStatusElement=function(){"use strict";return r.byClass(this._form,'stat_elem')||this._form;};aa.getInstance=function(ba){"use strict";return m.get(ba,'FileForm');};Object.assign(aa,{EVENTS:['start','submit','initial','progress','success','failure']});e.exports=aa;},null);
__d("submitForm",["DOM"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(i){var j=g.scry(i,'input[type="submit"]')[0];if(j){j.click();}else{j=g.create('input',{type:'submit',className:'hidden_elem'});g.appendContent(i,j);j.click();g.remove(j);}};e.exports=h;},null);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin","submitForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";n.call(this);this._inputElem=r;this._data={};}q.prototype.setInput=function(r){"use strict";this._inputElem=r;return this;};q.prototype.setURI=function(r){"use strict";this._uri=r;return this;};q.prototype.setData=function(r){"use strict";this._data=r;return this;};q.prototype.setPreprocessHandler=function(r){"use strict";this._preprocessHandler=r;return this;};q.prototype.setNetworkErrorRetryLimit=function(r){"use strict";this._retryLimit=r;return this;};q.prototype.setFiles=function(r){"use strict";this._files=r;return this;};q.prototype.setAllowCrossOrigin=function(r){"use strict";this._allowCrossOrigin=!!r;return this;};q.prototype.setAllowCrossPageTransition=function(r){"use strict";this._allowCrossPageTransition=!!r;return this;};q.prototype.setUploadInParallel=function(r){"use strict";this._uploadInParallel=!!r;return this;};q.prototype.setConcurrentLimit=function(r){"use strict";this._concurrentLimit=r;return this;};q.prototype.abort=function(){"use strict";if(this._fileForm){this._fileForm.abort();this._destroyFileForm();}};q.prototype.send=function(){"use strict";this._createForm();var r=this._inputElem.cloneNode(false);h.replace(this._inputElem,r);h.appendContent(this._formElem,this._inputElem);h.appendContent(document.body,this._formElem);m(this._formElem);h.replace(r,this._inputElem);this._removeFormEl();};q.prototype._onFileFormEvent=function(r,s){"use strict";if(r==='success'||r==='failure')this._destroyFileForm();this.inform(r,s);};q.prototype._createForm=function(){"use strict";this._destroyFileForm();this._formElem=h.create('form',{action:this._uri,method:'post'});this._fileForm=new j(this._formElem,null,{allowCrossOrigin:this._allowCrossOrigin,allowCrossPageTransition:this._allowCrossPageTransition,uploadInParallel:this._uploadInParallel,concurrentLimit:this._concurrentLimit,preprocessHandler:this._preprocessHandler,networkErrorRetryLimit:this._retryLimit});if(this._files)this._fileForm.setFiles(this._files);this._fileForm.subscribe(j.EVENTS,this._onFileFormEvent.bind(this));k.createHiddenInputs(Object.assign({fb_dtsg:i.getToken()},this._data),this._formElem);};q.prototype._removeFormEl=function(){"use strict";h.remove(this._formElem);this._formElem=null;};q.prototype._destroyFileForm=function(){"use strict";if(this._fileForm){this._fileForm.destroy();this._fileForm=null;}};e.exports=q;},null);
__d("TimelineURI",["BizSiteIdentifier.brands","BusinessURI.brands","ProfileTabConst","TimelineAppSectionConstants","URI","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={parseURI:function(n){n=new k(n);var o=n.getQueryData(),p=n.getPath(),q=p.split('/').slice(1);if(q[0]=='people'||q[0]=='pages')q=q.slice(2);var r=o.sk||q[1]||i.TIMELINE;if(r==i.WALL)r=i.TIMELINE;var s=null,t=null;if(r==i.TIMELINE){t=parseInt(q[2],10)||null;s=parseInt(q[3],10)||null;}return {path:p,id:o.id||q[0],key:r,viewas:o.viewas?o.viewas:0,filter:o.filter?o.filter:null,year:t,month:s,friendship:!!o.and};},goToProfileID:function(n){if(g.isBizSite()){l(h('/profile.php').addQueryData('id',n),true);}else l(new k('/'+n),true);},getTabKeyFromURI:function(n){var o=m.getSectionKeyFromURI(n);return j.collectionTabKeyToAppTabKey[o]||o;},getSectionKeyFromURI:function(n){return n.getQueryData().sk||n.getPath().split('/')[2];},getVanityFromURI:function(n){if(n.getQueryData().id)return n.getQueryData.id;return n.getPath().split('/')[1];},isVideoPermalink:function(n){return (m.getTabKeyFromURI(n)===i.VIDEOS&&n.getPath().split('/').filter(function(o){return !!o;}).length>2);}};e.exports=m;},null);
__d("ProfileNavigation",["Arbiter","CSS","PageTransitions","ProfileDOMID","ProfileOverviewDOMID","ProfileTabConst","ProfileTabUtils","ScriptPath","TimelineComponentKeys","TimelineController","TimelineDOMID","TimelineURI","UIPagelet","URI","$","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=6,x='/profile_book.php',y=null,z=null;function aa(la){var ma=t.getMostRecentURI(),na=r.getSectionKeyFromURI(ma),oa=r.getTabKeyFromURI(ma),pa=r.getSectionKeyFromURI(la),qa=r.getTabKeyFromURI(la),ra=la.getQueryData();if(ha(ma,la)||ia(qa)||!!ra.and||r.isVideoPermalink(la))return false;if(ra.hasOwnProperty('theater')){g.subscribeOnce('PhotoSnowlift.CLOSE',ja);return false;}if(m.isTimelineTab(oa)&&!m.isTimelineTab(qa)&&ga(pa)){y=pa;ba(pa,'TimelineMedleyView',q.TAB_CONTENT,k.MEDLEY_ROOT,ra);return true;}if(!m.isTimelineTab(oa)&&m.isTimelineTab(qa)){y=na;ba(l.TIMELINE,'TimelineWallColumn',k.MEDLEY_ROOT,q.TAB_CONTENT,ra);return true;}return false;}function ba(la,ma,na,oa,pa){p.registerCurrentKey(la);h.hide(u(na));g.inform('save_facebar_query',true);var qa=v(oa);if(qa){h.show(qa);fa(la);}else ca(ma,la,pa);}function ca(la,ma,na){da();var oa=Object.assign({},z,{tab_key:ma});if(na)oa=Object.assign({},oa,na);var pa=function(ra){ea();ra();},qa={append:true,displayCallback:pa,finallyHandler:fa.bind(null,ma),usePipe:true};s.loadFromEndpoint(la,j.MAIN_COLUMN_PERSONAL,oa,qa);}function da(){h.show(u(j.TAB_LOAD_INDICATOR));}function ea(){h.hide(u(j.TAB_LOAD_INDICATOR));}function fa(la){var ma=x;if(!m.isTimelineTab(la))ma+=':'+la;n.set(ma);i.transitionComplete();}function ga(la){return y===null||la===y;}function ha(la,ma){var na=r.getVanityFromURI(la),oa=la.getQueryData().id,pa=r.getVanityFromURI(ma),qa=ma.getQueryData().id;if(na&&pa)return na!==pa;if(oa&&qa)return oa!==qa;return true;}function ia(la){return (m.isActivityLogTab(la)||la===l.MEMORIAL_CONTACT||la===l.POSTS);}function ja(){i.registerHandler(aa,w);}var ka={init:function(la){z=la.profileContextData;p.register(o.ASYNC_NAV,this);ja();},reset:function(){z=null;y=null;i.removeHandler(aa);}};e.exports=ka;},null);
__d("TimelineDrag",["ArbiterMixin","Event","Locale","Style","Vector","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l(g);for(var n in m)if(m.hasOwnProperty(n))p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s){"use strict";m.call(this);s=s||{};this._listenOn=s.listenOn;this._offsetInput=r;this._defaultOffset=s.default_offset;this._killClicks=s.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(q,s);}p.prototype.setPicture=function(q,r){"use strict";if(!q)return false;r=r||{};this._picture=q;this._defaultOffset=r.default_offset;if(r.offsetInput)this._offsetInput=r.offsetInput;if(r.vertical!==(void 0))this._vertical=r.vertical;if(r.height)this._containerHeight=r.height;if(r.width)this._containerWidth=r.width;if(this._vertical){this._offsetType='top';this._eventCoord='y';}else{this._RTLXSwitch=i.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=h.listen(this._picture,'load',function(){this._loadListener.remove();this._loadListener=null;this._initialLoad();}.bind(this));};p.prototype.destroy=function(){"use strict";this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._mousedown=null;this._onclick&&this._onclick.remove();this._onclick=null;this._loadListener&&this._loadListener.remove();this._loadListener=null;};p.prototype._initialLoad=function(){"use strict";var q=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=h.listen(q,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.offsetWidth;if(this._defaultOffset!==(void 0))this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();this._onclick=null;if(this._killClicks)this._onclick=h.listen(q,'click',this._onClick.bind(this));this._saveOffset();};p.prototype._onClick=function(event){"use strict";event.kill();};p.prototype._onMouseDown=function(event){"use strict";var q=parseInt(j.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=q-k.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();};p.prototype._startDrag=function(){"use strict";if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[h.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),h.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}};p.prototype._saveOffset=function(){"use strict";var q=parseInt(j.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=q+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=q;};p.prototype._stopDrag=function(){"use strict";if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(q){q.remove();});this._saveOffset();}};p.prototype._onMouseUp=function(event){"use strict";this._stopDrag();event.kill();};p.prototype._setOffset=function(q){"use strict";if(this._RTLXSwitch){q=Math.max(0,Math.min(q,-this._maxOffset));}else q=Math.min(0,Math.max(q,this._maxOffset));j.set(this._picture,this._offsetType,q+'px');};p.prototype._onMouseMove=function(event){"use strict";this._setOffset(this._pictureStartDragOffset+k.getEventPosition(event)[this._eventCoord]);event.kill();};e.exports=p;},null);
__d("TimelineCover",["Arbiter","Button","CSS","DOM","DOMScroll","Event","FileInputUploader","HTML","PageTransitions","Parent","Run","Style","TimelineDrag","$","cx","fbt","ge","setImmediate","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();function z(aa,ba,ca){"use strict";this.root=t('fbProfileCover');if(typeof ba==='object'){this._coverHeight=ba.cover_height;this._coverWidth=ba.cover_width;this.previewing=ba.previewing;this._isLegacy=false;}else{this._isLegacy=true;this._coverHeight=ba;this.previewing=ca;}this._parentSection=p.byClass(this.root,'fbTimelineSection');this.cover=j.find(this.root,'.cover');z.instance=this;this.editing=false;q.onBeforeUnload(this.onBeforeUnload.bind(this));if(!this._parentSection)this._parentSection=p.byClass(this.root,'fbEventHeader');if(this.previewing)x(function(){this.editMode();this.updateCoverImage(this.previewing);}.bind(this));}z.prototype.showLoadingIndicator=function(){"use strict";var aa=w('fbCoverImageContainer');if(aa)i.addClass(aa,'opaquedLoading');};z.prototype.hideLoadingIndicator=function(){"use strict";var aa=w('fbCoverImageContainer');if(aa)i.removeClass(aa,'opaquedLoading');};z.prototype.onBeforeUnload=function(){"use strict";if(this.isInEditMode())return v._("If you leave this page, your cover photo will not be saved. To save, press the \"save\" button below your cover photo.");};z.prototype.isCoverImageVerticalFlow=function(aa){"use strict";return !(aa.style.height);};z.prototype.editMode=function(){"use strict";h.setEnabled(j.find(this.root,'button.cancelButton'),true);h.setEnabled(j.find(this.root,'button.saveButton'),true);this.hideLoadingIndicator();this._coverImage=j.scry(this.root,'.coverImage')[0];var aa=j.scry(this._coverImage,'.coverWrap')[0];if(aa){var ba=j.find(aa,'.coverPhotoImg');this._originalIsVertical=this.isCoverImageVerticalFlow(ba);this._originalOffset=r.get(ba,this._originalIsVertical?'top':'left');}i.addClass(this._parentSection,'fbEditCover');k.scrollTo(this.root);if(this.previewing){j.remove(this._coverImage);i.show(this._coverImage);}var ca=j.scry(this._coverImage,'.coverPhotoImg')[0];if(ca)this._createDragger();this.editing=true;g.inform('CoverPhotoEdit',{sender:this,state:"open"});};z.prototype._exitEditMode=function(){"use strict";if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}j.find(this.root,'input.hiddenPhotoID').value=null;h.setEnabled(j.find(this.root,'button.cancelButton'),false);h.setEnabled(j.find(this.root,'button.saveButton'),false);i.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;g.inform('CoverPhotoEdit',{sender:this,state:"closed"});this.editing=false;};z.prototype._createDragger=function(aa){"use strict";var ba;if(this._isLegacy){ba=j.find(this.root,'input.photoOffsetInput');this._originalIsVertical=true;}else{var ca=aa===(void 0)?this._originalIsVertical:aa;ba=ca?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');}this._timelineDrag=new s(j.find(this.root,'.coverImage .coverPhotoImg'),ba,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:ca,killClicks:true});};z.prototype.updateCoverImage=function(aa,ba){"use strict";if(ba)this.editMode();j.find(this.root,'input.hiddenPhotoID').value=aa;h.setEnabled(j.find(this.root,'button.saveButton'),true);if(ba)j.replace(j.find(this.root,'.coverImage'),typeof ba==='string'?n(ba):ba);var ca=j.find(j.find(this.root,'.coverImage'),'.coverPhotoImg'),da=this.isCoverImageVerticalFlow(ca),ea;if(this._isLegacy){ea=j.find(this.root,'input.photoOffsetInput');}else ea=da?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');if(this._timelineDrag){this._timelineDrag.setPicture(ca,{offsetInput:ea,vertical:da});}else this._createDragger(da);this._updateHeader();};z.prototype.cancelUpdate=function(){"use strict";this._reloadAfterNextUpdate=false;j.remove(j.scry(this.root,'.coverImage')[0]);j.prependContent(this.cover,this._coverImage);if(this._originalOffset!==(void 0))r.set(j.find(this._coverImage,'.coverPhotoImg'),this._originalIsVertical?'top':'left',this._originalOffset);this._exitEditMode();this._updateHeader();};z.staticSaveComplete=function(){"use strict";z.getInstance().saveComplete();};z.prototype.saveComplete=function(){"use strict";if(this._reloadAfterNextUpdate)a.location.reload();this._coverImage=j.scry(this.root,'.coverImage')[0];var aa=p.byClass(this.root,'fbTimelineTopSectionBase');aa&&i.removeClass(aa,"_6_5");this._exitEditMode();this._updateHeader();o.rewriteCurrentURI(o.getCurrentURI().getUnqualifiedURI(),o.getCurrentURI().removeQueryData('preview_cover'));};z.prototype.isInEditMode=function(){"use strict";return this.editing;};z.prototype._updateHeader=function(){"use strict";var aa=j.scry(this.root,'.coverImage')[0];if(!aa)return;var ba=i.hasClass(aa,'coverNoImage'),ca=i.hasClass(this._parentSection,'noCoverImage');if(ba!==ca)i.conditionClass(this._parentSection,'noCoverImage',ba);};z.getInstance=function(){"use strict";return z.instance;};z.staticUpdateCoverImage=function(aa){"use strict";z.getInstance().updateCoverImage(null,aa);};z.prototype.setupFileUpload=function(aa,ba,ca){"use strict";aa.subscribe('change',function(){var da=new m(aa.getInput()).setURI(ba).setAllowCrossOrigin(true);da.subscribe('failure',function(){z.showErrorDialog(v._("Cover Upload Failed"),v._("Uploading the new cover picture failed. Please try again."));});da.subscribe(['success','failure'],function(){this.hideLoadingIndicator();aa.clear();i.removeClass(aa.getControl(),ca);aa.getInput().disabled=false;}.bind(this));this.showLoadingIndicator();this._reloadAfterNextUpdate=true;da.send();i.addClass(aa.getControl(),ca);aa.getInput().disabled=true;}.bind(this));};z.setupFileUpload=function(aa,ba,ca){"use strict";this.getInstance().setupFileUpload(aa,ba,ca);};z.imageUploadDone=function(aa,ba){"use strict";this.getInstance().updateCoverImage(aa,ba);};z.showErrorDialog=function(aa,ba){"use strict";new Dialog().setTitle(aa).setButtons(Dialog.OK).setBody(ba).show();this.getInstance().hideLoadingIndicator();};z.initFileUploadMenu=function(aa){"use strict";z.showLoadingAfterFileUpload(aa.getForm());};z.showLoadingAfterFileUpload=function(aa){"use strict";y(aa.subscribe('submit',function(){z.getInstance().showLoadingIndicator();}));};z.instance=null;e.exports=z;},null);
__d("TimelineNavLight",["CSS","DOM","DOMQuery","Parent","ProfileOverviewDOMID","TimelineAppSectionConstants","TimelineComponentKeys","TimelineController","ProfileOverviewSection","csx","cx","destroyOnUnload","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t="_6-7",u="_529n",v="_5215",w="_70k",x="._6-7",y="._6-6";function z(aa){"use strict";this.$TimelineNavLight0=aa;this.$TimelineNavLight1=i.scry(aa,x)[0];this.$TimelineNavLight2=i.scry(aa,y);this.$TimelineNavLight3();o.subscribe('Medley/transitionToSection',function(ba,ca){this.$TimelineNavLight5(ca.slice(k.PREFIX_MEDLEY.length));}.bind(this));n.register(m.COVER_NAV,this);r(function(){this.$TimelineNavLight0=null;this.$TimelineNavLight1=null;this.$TimelineNavLight2=null;}.bind(this));}z.prototype.handleTabChange=function(aa){"use strict";this.$TimelineNavLight5(aa);};z.prototype.$TimelineNavLight5=function(aa){"use strict";this.$TimelineNavLight1&&g.removeClass(this.$TimelineNavLight1,t);this.$TimelineNavLight2.some(function(ba){var ca=l.collectionTabKeyToAppTabKey[aa]||aa;if(ba.getAttribute('data-tab-key')===ca){g.addClass(ba,t);this.$TimelineNavLight1=ba;return true;}}.bind(this));};z.prototype.$TimelineNavLight3=function(){"use strict";var aa=this.$TimelineNavLight2.length-1,ba=this.$TimelineNavLight2[aa],ca,da,ea,fa=0;s(function(){ca=j.byClass(this.$TimelineNavLight0,w).offsetWidth;da=ba.offsetLeft;ea=ba.offsetWidth;for(var ga=aa;ga>1;ga--){var ha=this.$TimelineNavLight2[ga];if(ha.offsetLeft+ha.offsetWidth>ca){fa++;}else break;}}.bind(this),function(){if(da+ea>ca)g.addClass(this.$TimelineNavLight0,v);for(var ga=aa;ga>aa-fa;ga--)h.remove(this.$TimelineNavLight2[ga]);g.removeClass(j.byClass(this.$TimelineNavLight0,u),u);}.bind(this));};e.exports=z;},null);
__d("legacy:TimelineCover",["TimelineCover"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();a.TimelineCover=b('TimelineCover');},3);