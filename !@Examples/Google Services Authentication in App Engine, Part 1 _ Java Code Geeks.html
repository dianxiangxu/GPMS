<!DOCTYPE html>
<!-- saved from url=(0165)http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer -->
<html lang="en-US" prefix="og: http://ogp.me/ns#" class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/single.include.6a146c.css" media="all"><script async="" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/analytics.js"></script><script async="" type="text/javascript" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/gpt.js"></script><script type="text/javascript" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/default.include.cb9bcd.js"></script><style type="text/css"></style><meta charset="UTF-8"><title>Google Services Authentication in App Engine, Part 1 | Java Code Geeks</title><link rel="profile" href="http://gmpg.org/xfn/11"><link rel="pingback" href="http://www.javacodegeeks.com/xmlrpc.php"><script type="text/javascript">var googletag=googletag||{};googletag.cmd=googletag.cmd||[];(function(){var gads=document.createElement('script');gads.async=true;gads.type='text/javascript';var useSSL='https:'==document.location.protocol;gads.src=(useSSL?'https:':'http:')+'//www.googletagservices.com/tag/js/gpt.js';var node=document.getElementsByTagName('script')[0];node.parentNode.insertBefore(gads,node);})();</script><script type="text/javascript">googletag.cmd.push(function(){googletag.defineSlot('/70432299/JCG_Header',[728,90],'div-gpt-ad-1415445260332-0').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_In-post',[300,250],'div-gpt-ad-1415445260332-2').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side',[300,250],'div-gpt-ad-1415445260332-3').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side_1',[300,250],'div-gpt-ad-1415445260332-4').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Under-post',[300,250],'div-gpt-ad-1415445260332-5').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_Side_2',[300,600],'div-gpt-ad-1415445260332-6').addService(googletag.pubads());googletag.defineSlot('/70432299/JCG_NotifBar',[1220,50],'div-gpt-ad-1431445244472-0').addService(googletag.pubads());googletag.pubads().setTargeting("PostID","1369");googletag.pubads().setTargeting("PostCAT","8");googletag.pubads().enableSingleRequest();googletag.enableServices();});</script><link rel="canonical" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html"><link rel="publisher" href="https://plus.google.com/+JavaCodeGeeks/"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="This post will illustrate how to build a simple Google App Engine (GAE) Java application that authenticates against Google as well as leverages Google’s OAuth for authorizing access to Google’s API services such as Google Docs. In addition, building on some of the examples already provided by Google, it will also illustrate how to persist ..."><meta name="twitter:title" content="Google Services Authentication in App Engine, Part 1 | Java Code Geeks"><meta name="twitter:site" content="@javacodegeeks"><meta name="twitter:domain" content="Java Code Geeks"><meta name="twitter:image:src" content="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/10/google-aps-logo.jpg"><meta name="twitter:creator" content="@javacodegeeks"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » Feed" href="http://www.javacodegeeks.com/feed/"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » Comments Feed" href="http://www.javacodegeeks.com/comments/feed/"><link rel="alternate" type="application/rss+xml" title="Java Code Geeks » Google Services Authentication in App Engine, Part 1 Comments Feed" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html/feed/"><script type="text/javascript">/*<![CDATA[*/window._wpemojiSettings={"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.javacodegeeks.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2.2"}};!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);/*]]>*/</script><script src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/wp-emoji-release.min.js" type="text/javascript"></script><style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0
.07em !important;vertical-align:-0.1em !important;background:none !important;padding:0
!important}</style><link rel="stylesheet" id="Oswald-css" href="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/css" type="text/css" media="all"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.javacodegeeks.com/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 4.2.2"><link rel="shortlink" href="http://www.javacodegeeks.com/?p=1369"><link rel="shortcut icon" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/12/JavaCodeGeeks-favIcon.png" title="Favicon"><meta property="og:title" content="Google Services Authentication in App Engine, Part 1"><meta property="og:type" content="article"><meta property="og:description" content="This post will illustrate how to build a simple Google App Engine (GAE) Java application that authen..."><meta property="og:url" content="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html"><meta property="og:site_name" content="Java Code Geeks"><meta property="og:image" content="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2012/10/google-aps-logo.jpg"> <!--[if IE]><script type="text/javascript">jQuery(document).ready(function(){jQuery(".menu-item").has("ul").children("a").attr("aria-haspopup","true");});</script><![endif]--> <!--[if lt IE 9]><script src="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/js/html5.js"></script><script src="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/js/selectivizr-min.js"></script><![endif]--> <!--[if IE 8]><link rel="stylesheet" type="text/css" media="all" href="http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/css/ie8.css" /> <![endif]--><script type="text/javascript">var tievar={'go_to':'Go to...'};var tie={"ajaxurl":"http://www.javacodegeeks.com/wp-admin/admin-ajax.php","your_rating":"Your Rating:"};</script><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><style type="text/css" media="screen">body{background-image:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/themes/jarida/images/patterns/body-bg1.png);background-position:top center}body.single .entry, body.page
.entry{font-size:15px !important}#main-nav ul li.current-menu-item a,
#main-nav ul li.current-menu-item a:hover,
#main-nav ul li.current-menu-parent a,
#main-nav ul li.current-menu-parent a:hover,
#main-nav ul li.current-page-ancestor a,
#main-nav ul li.current-page-ancestor a:hover,
.pagination span.current,
.ei-slider-thumbs li.ei-slider-element,
.breaking-news span,
.ei-title h2,h2.cat-box-title,
a.more-link,.scroll-nav a,
.flex-direction-nav a,
.tagcloud a:hover,
#tabbed-widget ul.tabs li.active a,
.slider-caption h2, .full-width .content .slider-caption h2,
.review-percentage .review-item span span,.review-final-score,
.woocommerce span.onsale, .woocommerce-page span.onsale ,
.woocommerce .widget_price_filter .ui-slider .ui-slider-handle, .woocommerce-page .widget_price_filter .ui-slider .ui-slider-handle,
.button,a.button,#main-content input[type="submit"],#main-content input[type="submit"]:focus,span.onsale{background-color:#326693 !important}::-webkit-scrollbar-thumb{background-color:#326693 !important}#main-nav,.top-nav{border-bottom-color:#326693}.cat-box , .footer-bottom
.container{border-top-color:#326693}body.single .post .entry a, body.page .post .entry
a{color:#326693}body.single .post .entry a:hover, body.page .post .entry a:hover{color:#478cc4;text-decoration:underline}#main-nav ul
li{text-transform:none}.toc
dl{display:block}.toc
dt{display:block}.toc
dd{display:block;-webkit-margin-start:20px;-moz-margin-start:20px}.toc{line-height:1.4;font-size:90%;border-bottom:1px solid #eee;padding:20px;border:1px
solid #e1e1e1;background:#f1f1f1;border-radius:9px;-moz-border-radius:9px;-webkit-border-radius:9px;width:80%;display:inline-block;margin:20px
0}code{display:inline}.tip{background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -201px -72px no-repeat;padding:10px
20px 25px 80px;margin:2.5em 1em;border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background-color:#FAFAFA;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.download{background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -266px 0px no-repeat;padding:10px
20px 25px 80px;margin:2.5em 1em;border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background-color:#FAFAFA;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.nlbox{background:#E2ECFA;margin:15px
0px 15px;padding:10px;-webkit-border-radius:3px;-mozilla-border-radius:3px;-o-border-radius:3px;border-radius:3px;-moz-box-shadow:0px 2px 2px 1px #d7e1eb;-webkit-box-shadow:0px 2px 2px 1px #d7e1eb;box-shadow:0px 2px 2px 1px #d7e1eb;border:solid 1px #D8D8D8;display:inline-block}.nlbox1{background:#E2ECFA;margin:-10px 0 25px;width:auto;max-width:798px;padding:10px;-webkit-border-radius:3px;-mozilla-border-radius:3px;-o-border-radius:3px;border-radius:3px;-moz-box-shadow:0px 2px 2px 1px #d7e1eb;-webkit-box-shadow:0px 2px 2px 1px #d7e1eb;box-shadow:0px 2px 2px 1px #d7e1eb;border:solid 1px #D8D8D8}.button-gw{border-top:1px solid #96d1f8;background:#65a9d7;background:-webkit-gradient(linear, left top, left bottom, from(#3e779d), to(#65a9d7));background:-webkit-linear-gradient(top, #3e779d, #65a9d7);background:-moz-linear-gradient(top, #3e779d, #65a9d7);background:-ms-linear-gradient(top, #3e779d, #65a9d7);background:-o-linear-gradient(top, #3e779d, #65a9d7);padding:20px
40px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:rgba(0,0,0,1) 0 1px 0;-moz-box-shadow:rgba(0,0,0,1) 0 1px 0;box-shadow:rgba(0,0,0,1) 0 1px 0;text-shadow:rgba(0,0,0,.4) 0 1px 0;color:white;font-size:34px;font-family:Georgia,Serif;text-decoration:none !important;vertical-align:middle}.button-gw:hover{border-top-color:#28597a;background:#28597a;color:#ccc}.button-gw:active{border-top-color:#1b435e;background:#1b435e}.widget_wpjb-recent-jobs .wpjb-grid-compact{margin-left:5%;margin-right:5%}.attribution{border-color:#dedede #d8d8d8 #d3d3d3;text-shadow:0 1px 0 #fff;-webkit-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;-moz-box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;box-shadow:0 1px 1px #eaeaea, inset 0 1px 0 #fbfbfb;background:#fff;background:-moz-linear-gradient(top, #fff 0%, #f6f6f6 47%, #ededed 100%);background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed));background:-webkit-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:-o-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:-ms-linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);background:linear-gradient(top, #fff 0%,#f6f6f6 47%,#ededed 100%);padding:3px
8px;line-height:20px;color:#555;border:1px
solid #DEDEDE;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;margin-top:20px;display:inline-block}.attribution
.reference{font-weight:bold}.attribution
table{border:none;background-color:inherit}.attribution table
td{vertical-align:top;padding:0px
5px;border-bottom:none;font-size:inherit}a.TPbutton_w_cnd01lb:hover{background-color:#fc0;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) 0 -102px;color:#fff;text-decoration:none;transition:none}a.TPbutton_w_cnd01lb{-webkit-border-radius:7px;-mozilla-border-radius:7px;-o-border-radius:7px;border-radius:7px;text-decoration:none;color:#fff;font-family:'lucida sans','lucida grande',arial,helvetica,sans-serif;letter-spacing:-1px;font-weight:bold;background-color:#f90;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) 0 -73px;padding:4px
10px 4px 10px;font-size:16px;-moz-box-shadow:0px 3px 3px 2px #d7e1eb;-webkit-box-shadow:0px 3px 3px 2px #d7e1eb;box-shadow:0px 3px 3px 2px #d7e1eb;border:solid 2px #fff;width:200px;height:56px;transition:none}.TPbutton_w_cnd01lb_arrow{position:relative;display:inline-block;overflow:hidden;vertical-align:bottom;width:30px;height:20px;background:url(http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/sprites.png) -146px 0px}#commentform
input{width:inherit}#author-box .post-listing{margin-bottom:0px}#author-box .block-head
h3{text-transform:none}header#theme-header{margin:0
0 0}blockquote{display:inline-block;margin:20px
0 10px 40px;font-size:14px}blockquote:before{font-size:25px;line-height:inherit}.syntaxhighlighter{display:inline-block}@media (max-width: 767px){#div-gpt-ad-1415445260332-0{display:none}}@media (max-width: 479px){#div-gpt-ad-1415445260332-3{margin-left:-10px}#div-gpt-ad-1415445260332-4{margin-left:-10px}#div-gpt-ad-1415445260332-6{margin-left:-10px}}</style><style type="text/css">.mc4wp-form input[name="_mc4wp_required_but_not_really"]{display:none !important}</style><script src="http://partner.googleadservices.com/gpt/pubads_impl_63r.js" async=""></script><style type="text/css">.fancybox-margin{margin-right:0px;}</style></head><body id="top" class="single single-post postid-1369 single-format-standard" data-gclp-initialized="true" data-gistbox-initialized="true"><div class="x-white foobar-wrapper shadow fb-top" style="height: 58px; bottom: auto; top: 0px;"><table cellpadding="0" cellspacing="0" class="foobar-container" style="border-style: none none solid; border-bottom-width: 3px; border-bottom-color: rgb(255, 255, 255); height: 50px; display: table; background-color: rgb(50, 102, 147);"><tbody><tr class="foobar-container-row"><td class="foobar-container-left" style="height: 50px; width: 0px;"><div class="foobar-container-inner" style="max-height: 50px;"></div></td><td class="foobar-close-button-spacer" style="width: 80px;"></td><td class="foobar-container-center" style="height: 50px; width: 0px;"><div class="foobar-container-inner" style="max-height: 50px;"><div class="foobar-message" style="opacity: 100;"></div><div class="x-white foobar-prev-button" style="height: 50px; margin-top: -25px; display: block; background-color: rgb(50, 102, 147);"></div><div class="x-white foobar-next-button" style="height: 50px; margin-top: -25px; display: block; background-color: rgb(50, 102, 147);"></div></div></td><td class="foobar-container-right" style="height: 50px; width: auto;"><div class="foobar-container-inner" style="max-height: 50px;"><!-- /70432299/JCG_NotifBar --><div id="div-gpt-ad-1431445244472-0" style="height:50px; width:1220px; margin-left: auto; margin-right: auto;"><script src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/fbDFP.js"></script></div></div></td><td class="foobar-close-button-container" style="width: 80px;"><span class="foobar-close-button" style="height: 50px;"></span></td></tr></tbody></table><div class="foobar-shadow"></div><div class="foobar-open-button-container hidden" style="height: 0px; bottom: auto; top: 0px; width: 80px; left: auto; right: 0px; display: block;"><span class="foobar-open-button" style="border-style: none solid solid; border-right-width: 3px; border-bottom-width: 3px; border-left-width: 3px; border-right-color: rgb(255, 255, 255); border-bottom-color: rgb(255, 255, 255); border-left-color: rgb(255, 255, 255); height: 0px; margin-left: -17px; display: none; background-color: rgb(50, 102, 147);"></span></div></div><div class="background-cover"></div><div class="wrapper"><div class="top-nav fade-in animated1 head_menu"><div class="container"><div class="search-block"><form method="get" id="searchform" action="http://www.javacodegeeks.com/"> <button class="search-button" type="submit" value="Search"></button> <input type="text" id="s" name="s" value="Search..." onfocus="if (this.value == &#39;Search...&#39;) {this.value = &#39;&#39;;}" onblur="if (this.value == &#39;&#39;) {this.value = &#39;Search...&#39;;}"></form></div><div class="social-icons icon_flat"> <a class="tooldown ext-link" href="http://feeds.feedburner.com/JavaCodeGeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Rss"><i class="tieicon-rss"></i></a><a class="tooldown ext-link" href="https://plus.google.com/+JavaCodeGeeks/" rel="external nofollow" data-wpel-target="_blank" original-title="Google+"><i class="tieicon-gplus"></i></a><a class="tooldown ext-link" href="https://www.facebook.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Facebook"><i class="tieicon-facebook"></i></a><a class="tooldown ext-link" href="https://twitter.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Twitter"><i class="tieicon-twitter"></i></a><a class="tooldown ext-link" href="https://www.linkedin.com/groups/Java-Code-Geeks-3810709" rel="external nofollow" data-wpel-target="_blank" original-title="LinkedIn"><i class="tieicon-linkedin"></i></a></div><div class="top-menu"><ul id="menu-pages" class="menu"><li id="menu-item-38541" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-has-children menu-item-38541 parent-list"><a href="http://www.javacodegeeks.com/#">Knowledge Base <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38217" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38217 parent-list"><a href="http://www.javacodegeeks.com/tutorials/">Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38218" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38218 parent-list"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/">Java Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38219" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38219"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/core-java-tutorials/">Core Java Tutorials</a></li><li id="menu-item-38220" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38220 parent-list"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/">Enterprise Java Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38221" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38221"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/spring-tutorials/">Spring Tutorials</a></li></ul></li><li id="menu-item-38222" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38222"><a href="http://www.javacodegeeks.com/tutorials/java-tutorials/desktop-java-tutorials/">Desktop Java Tutorials</a></li></ul></li><li id="menu-item-38223" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38223 parent-list"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/">Android Tutorials <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38224" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38224"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/android-core-tutorials/">Android Core Tutorials</a></li><li id="menu-item-38225" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38225"><a href="http://www.javacodegeeks.com/tutorials/android-tutorials/android-game-tutorials/">Android Game Tutorials</a></li></ul></li><li id="menu-item-38226" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38226"><a href="http://www.javacodegeeks.com/tutorials/scala-tutorials/">Scala Tutorials</a></li><li id="menu-item-38227" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38227"><a href="http://www.javacodegeeks.com/tutorials/devops-tutorials/">DevOps Tutorials</a></li><li id="menu-item-38228" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38228"><a href="http://www.javacodegeeks.com/tutorials/nosql-tutorials/">NoSQL Tutorials</a></li><li id="menu-item-38229" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38229"><a href="http://www.javacodegeeks.com/tutorials/groovy-grails-tutorials/">Groovy/Grails Tutorials</a></li></ul></li><li id="menu-item-38243" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38243 parent-list"><a href="http://www.javacodegeeks.com/resources/">Resources <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38244" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38244"><a href="http://www.javacodegeeks.com/resources/software/">Software</a></li><li id="menu-item-38245" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38245"><a href="http://www.javacodegeeks.com/resources/our-projects/">Our Projects</a></li></ul></li><li id="menu-item-38273" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38273"><a href="http://examples.javacodegeeks.com/">Examples</a></li><li id="menu-item-38275" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38275"><a href="http://academy.javacodegeeks.com/">Academy</a></li><li id="menu-item-38274" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38274"><a href="http://www.javacodegeeks.com/whitepaper/">Whitepapers</a></li><li id="menu-item-38276" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-38276"><a href="http://library.javacodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Library</a></li></ul></li><li id="menu-item-38240" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38240 parent-list"><a href="http://www.javacodegeeks.com/job-board/">Job Board <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38241" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38241"><a href="http://www.javacodegeeks.com/job-board/jobs/">Jobs</a></li><li id="menu-item-38242" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38242"><a href="http://www.javacodegeeks.com/job-board/resumes/">Resumes</a></li></ul></li><li id="menu-item-38230" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38230 parent-list"><a href="http://www.javacodegeeks.com/join-us/">Join Us <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38231" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38231"><a href="http://www.javacodegeeks.com/join-us/jcg/">JCG</a></li><li id="menu-item-38232" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38232 parent-list"><a href="http://www.javacodegeeks.com/join-us/w4g/">W4G <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38233" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38233"><a href="http://www.javacodegeeks.com/join-us/w4g/submission-guidelines/">Submission Guidelines</a></li><li id="menu-item-38234" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38234"><a href="http://www.javacodegeeks.com/join-us/w4g/terms-conditions/">Terms &amp; Conditions</a></li></ul></li></ul></li><li id="menu-item-38235" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-38235 parent-list"><a href="http://www.javacodegeeks.com/about/">About <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38236" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38236"><a href="http://www.javacodegeeks.com/about/about-jcgs/">About JCGs</a></li><li id="menu-item-38237" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38237"><a href="http://www.javacodegeeks.com/about/advertising/">Advertising</a></li><li id="menu-item-38238" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38238"><a href="http://www.javacodegeeks.com/about/terms-of-use/">Terms of Use</a></li><li id="menu-item-38239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38239"><a href="http://www.javacodegeeks.com/about/privacy-policy/">Privacy Policy</a></li></ul></li></ul><select id="top-menu-mob"><option value="#">Go to...</option><option value="http://www.javacodegeeks.com/#">&nbsp;Knowledge Base </option><option value="http://www.javacodegeeks.com/tutorials/">&nbsp; &nbsp; –&nbsp;Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Java Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/core-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Core Java Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Enterprise Java Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/enterprise-java-tutorials/spring-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Spring Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/java-tutorials/desktop-java-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Desktop Java Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Tutorials </option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/android-core-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Core Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/android-tutorials/android-game-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Android Game Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/scala-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Scala Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/devops-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;DevOps Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/nosql-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;NoSQL Tutorials</option><option value="http://www.javacodegeeks.com/tutorials/groovy-grails-tutorials/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Groovy/Grails Tutorials</option><option value="http://www.javacodegeeks.com/resources/">&nbsp; &nbsp; –&nbsp;Resources </option><option value="http://www.javacodegeeks.com/resources/software/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Software</option><option value="http://www.javacodegeeks.com/resources/our-projects/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Our Projects</option><option value="http://examples.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Examples</option><option value="http://academy.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Academy</option><option value="http://www.javacodegeeks.com/whitepaper/">&nbsp; &nbsp; –&nbsp;Whitepapers</option><option value="http://library.javacodegeeks.com/">&nbsp; &nbsp; –&nbsp;Library</option><option value="http://www.javacodegeeks.com/job-board/">&nbsp;Job Board </option><option value="http://www.javacodegeeks.com/job-board/jobs/">&nbsp; &nbsp; –&nbsp;Jobs</option><option value="http://www.javacodegeeks.com/job-board/resumes/">&nbsp; &nbsp; –&nbsp;Resumes</option><option value="http://www.javacodegeeks.com/join-us/">&nbsp;Join Us </option><option value="http://www.javacodegeeks.com/join-us/jcg/">&nbsp; &nbsp; –&nbsp;JCG</option><option value="http://www.javacodegeeks.com/join-us/w4g/">&nbsp; &nbsp; –&nbsp;W4G </option><option value="http://www.javacodegeeks.com/join-us/w4g/submission-guidelines/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Submission Guidelines</option><option value="http://www.javacodegeeks.com/join-us/w4g/terms-conditions/">&nbsp; &nbsp; –&nbsp; &nbsp; –&nbsp;Terms &amp; Conditions</option><option value="http://www.javacodegeeks.com/about/">&nbsp;About </option><option value="http://www.javacodegeeks.com/about/about-jcgs/">&nbsp; &nbsp; –&nbsp;About JCGs</option><option value="http://www.javacodegeeks.com/about/advertising/">&nbsp; &nbsp; –&nbsp;Advertising</option><option value="http://www.javacodegeeks.com/about/terms-of-use/">&nbsp; &nbsp; –&nbsp;Terms of Use</option><option value="http://www.javacodegeeks.com/about/privacy-policy/">&nbsp; &nbsp; –&nbsp;Privacy Policy</option></select></div></div></div><div class="container"> <header id="theme-header"><div class="header-content fade-in animated1"><div class="logo"><h2> <a title="Java Code Geeks" href="http://www.javacodegeeks.com/"> <img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/JavaCodeGeeks-logo.png" alt="Java Code Geeks"><strong>Java Code Geeks Java 2 Java Developers Resource Center</strong> </a></h2></div><div class="ads-top"><div id="div-gpt-ad-1415445260332-0" style="width:728px; height:90px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-0');});</script></div></div><div class="clear"></div></div> <nav id="main-nav" class="fade-in animated2"><div class="container"><div class="main-menu"><ul id="menu-categories" class="menu"><li id="menu-item-38251" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/android/">Android <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38252" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/android/android-core/">Android Core</a></li><li id="menu-item-38253" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/android/android-games/">Android Games</a></li></ul></li><li id="menu-item-38257" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  current-post-ancestor  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/java/">Java <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38258" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/java/core-java/">Core Java</a></li><li id="menu-item-38259" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/java/desktop-java/">Desktop Java</a></li><li id="menu-item-38260" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  current-post-ancestor  current-menu-parent  current-post-parent"><a href="http://www.javacodegeeks.com/category/java/enterprise-java/">Enterprise Java</a></li></ul></li><li id="menu-item-38261" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/jvm-languages/">JVM Languages <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38262" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/ceylon/">Ceylon</a></li><li id="menu-item-38263" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/clojure/">Clojure</a></li><li id="menu-item-38264" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/groovy/">Groovy</a></li><li id="menu-item-38265" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/jruby/">JRuby</a></li><li id="menu-item-38266" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/kotlin/">Kotlin</a></li><li id="menu-item-38267" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/jvm-languages/scala/">Scala</a></li></ul></li><li id="menu-item-38271" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/software-development/">Software Development</a></li><li id="menu-item-38250" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/agile/">Agile</a></li><li id="menu-item-38254" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/career/">Career</a></li><li id="menu-item-38255" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/communications/">Communications</a></li><li id="menu-item-38256" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/devops/">DevOps</a></li><li id="menu-item-38268" class="menu-item  menu-item-type-taxonomy  menu-item-object-category  menu-item-has-children parent-list"><a href="http://www.javacodegeeks.com/category/meta-jcg/">Meta JCG <span class="sub-indicator"></span></a><ul class="sub-menu"><li id="menu-item-38269" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/meta-jcg/best-of-the-week/">Best Of The Week</a></li><li id="menu-item-38270" class="menu-item  menu-item-type-taxonomy  menu-item-object-category"><a href="http://www.javacodegeeks.com/category/misc/">Misc</a></li></ul></li></ul><select id="main-menu-mob"><option value="#">Go to...</option><option value="http://www.javacodegeeks.com/category/android/">&nbsp;Android </option><option value="http://www.javacodegeeks.com/category/android/android-core/">&nbsp; &nbsp; –&nbsp;Android Core</option><option value="http://www.javacodegeeks.com/category/android/android-games/">&nbsp; &nbsp; –&nbsp;Android Games</option><option value="http://www.javacodegeeks.com/category/java/">&nbsp;Java </option><option value="http://www.javacodegeeks.com/category/java/core-java/">&nbsp; &nbsp; –&nbsp;Core Java</option><option value="http://www.javacodegeeks.com/category/java/desktop-java/">&nbsp; &nbsp; –&nbsp;Desktop Java</option><option value="http://www.javacodegeeks.com/category/java/enterprise-java/">&nbsp; &nbsp; –&nbsp;Enterprise Java</option><option value="http://www.javacodegeeks.com/category/jvm-languages/">&nbsp;JVM Languages </option><option value="http://www.javacodegeeks.com/category/jvm-languages/ceylon/">&nbsp; &nbsp; –&nbsp;Ceylon</option><option value="http://www.javacodegeeks.com/category/jvm-languages/clojure/">&nbsp; &nbsp; –&nbsp;Clojure</option><option value="http://www.javacodegeeks.com/category/jvm-languages/groovy/">&nbsp; &nbsp; –&nbsp;Groovy</option><option value="http://www.javacodegeeks.com/category/jvm-languages/jruby/">&nbsp; &nbsp; –&nbsp;JRuby</option><option value="http://www.javacodegeeks.com/category/jvm-languages/kotlin/">&nbsp; &nbsp; –&nbsp;Kotlin</option><option value="http://www.javacodegeeks.com/category/jvm-languages/scala/">&nbsp; &nbsp; –&nbsp;Scala</option><option value="http://www.javacodegeeks.com/category/software-development/">&nbsp;Software Development</option><option value="http://www.javacodegeeks.com/category/agile/">&nbsp;Agile</option><option value="http://www.javacodegeeks.com/category/career/">&nbsp;Career</option><option value="http://www.javacodegeeks.com/category/communications/">&nbsp;Communications</option><option value="http://www.javacodegeeks.com/category/devops/">&nbsp;DevOps</option><option value="http://www.javacodegeeks.com/category/meta-jcg/">&nbsp;Meta JCG </option><option value="http://www.javacodegeeks.com/category/meta-jcg/best-of-the-week/">&nbsp; &nbsp; –&nbsp;Best Of The Week</option><option value="http://www.javacodegeeks.com/category/misc/">&nbsp; &nbsp; –&nbsp;Misc</option></select></div></div> </nav> </header><div id="main-content" class="container fade-in animated3 sidebar-narrow-left"><div class="content-wrap-wide"><div class="content"><div xmlns:v="http://rdf.data-vocabulary.org/#" id="crumbs"><span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" class="crumbs-home" href="http://www.javacodegeeks.com/"><i class="tieicon-home"></i>Home</a></span> » <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.javacodegeeks.com/category/java/">Java</a></span> » <span typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="http://www.javacodegeeks.com/category/java/enterprise-java/">Enterprise Java</a></span> » <span class="current">Google Services Authentication in App Engine, Part 1</span></div> <section id="author-box"><div class="block-head"><h3>About Jeff Davis</h3></div><div class="post-listing"><div class="author-avatar"> <img alt="" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/56cc157a974f2e9b3ec16326d1a286df" srcset="http://2.gravatar.com/avatar/56cc157a974f2e9b3ec16326d1a286df?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"></div><div class="author-description"></div><div class="author-social"> <a class="ttip ext-link" href="http://jeff-davis.blogspot.com/" rel="external nofollow" data-wpel-target="_blank" original-title="Jeff Davis &#39;s site"><img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/author_site.png" width="18" height="18" alt=""></a></div><div class="clear"></div></div> </section> <article class="post-listing post-1369 post type-post status-publish format-standard has-post-thumbnail hentry category-enterprise-java tag-gdata tag-google-app-engine tag-google-services tag-oauth tag-security"><div class="post-inner"><h1 class="name post-title entry-title" itemprop="itemReviewed" itemscope="" itemtype="http://schema.org/Thing"><span itemprop="name">Google Services Authentication in App Engine, Part 1</span></h1><p class="post-meta"> <span class="post-meta-author">Posted by: <a href="http://www.javacodegeeks.com/author/Jeff-Davis/" title="">Jeff Davis </a></span> <span class="post-cats">in <a href="http://www.javacodegeeks.com/category/java/enterprise-java/" rel="category tag">Enterprise Java</a></span> <span class="tie-date">June 20th, 2012</span></p><div class="clear"></div><div class="entry"><div class="ads-post"><div id="div-gpt-ad-1415445260332-2" style="width:300px; height:250px;float:left; margin-right:20px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-2');});</script></div></div><div dir="ltr" style="text-align: left">This post will illustrate how to build a simple Google App Engine (GAE) Java application that authenticates against Google as well as leverages <a href="https://developers.google.com/accounts/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Google’s OAuth</a> for authorizing access to Google’s <a href="https://developers.google.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">API services</a> such as Google Docs.  In addition, building on some of the examples already provided by Google, it will also illustrate how to persist data using the App Engine <a href="https://developers.google.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Datastore</a> and <a href="http://code.google.com/p/objectify-appengine/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Objectify</a>.<p></p><p><a href="https://docs.google.com/open?id=0B0rR_TFXPdF1RG4xckN1R1BRQzQ" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Project Source Code</a></p><p>The motivation behind this post is that I struggled to previously find any examples that really tied these technologies together. Yet, these technologies really represent the building-blocks for many web applications that want to leverage the vast array of Google API services.<br> To keep things simple, the demo will simply allow the user to login via a Google domain; authorize access to the user’s Google Docs services; and display a list of the user’s Google Docs Word and Spreadsheet documents. Throughout this tutorial I do make several assumptions about the reader’s expertise, such as a pretty deep familiarity with Java.<br> <strong><br> </strong><br> <strong>Overview of the Flow</strong></p><p>Before we jump right into the tutorial/demo, let’s take a brief look at the navigation flow.</p><div class="separator" style="clear: both;text-align: center"><a href="http://2.bp.blogspot.com/-P9EgHRusJNw/T-DxXSiCqJI/AAAAAAAAAsE/ke9R87zGRVo/s1600/GAELoginProcess.png" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank"><img border="0" height="400" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/GAELoginProcess.png" width="313"></a></div><p>While it may look rather complicated, the main flow can be summarized as:</p><ol><li>User requests access to listFiles.jsp (actually any of the JSP pages can be used).</li><li>A check is make to see if the user is logged into Google. If not, they are re-directed to a Google login page — once logged in, they are returned back.</li><li>A check is then made to determine whether the user is stored in the local datastore. If not, the user is added along with the user’s Google domain email address.</li><li>Next, we check to see if the user has granted OAuth credentials to the Google Docs API service. If not, the OAuth authentication process is initiated. Once the OAuth credentials are granted, they are stored in the local user table (so we don’t have to ask each time the user attempts to access the services).</li><li>Finally, a list of Google Docs Spreadsheet or Word docs is displayed.</li></ol><p>This same approach could be used to access other Google services, such as YouTube (you might display a list of the user’s favorite videos, for example).</p><p><strong> Environment Setup</strong></p><p>For this tutorial, I am using the following:</p><ul><li>Eclipse Indigo Service Release 2 along with the Google Plugin for Eclipse (see <a href="https://developers.google.com/appengine/docs/java/gettingstarted/installing" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">setup instructions</a>).</li><li>Google GData Java SDK Eclipse plugin version 1.47.1 (see <a href="http://code.google.com/p/gdata-java-client-eclipse-plugin/w/list" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">setup instructions</a>).</li><li>Google App Engine release 1.6.5. Some problems exist with earlier versions, so I’d recommend making sure you are using it. It should install automatically as part of the Google Plugin for Eclipse.</li><li>Objectify version 3.1. The required library is installed already in the project’s war/WEB-INF/lib directory.</li></ul><p>After you have imported the project into Eclipse, your build path should resemble:</p><div class="separator" style="clear: both;text-align: center"><a href="http://1.bp.blogspot.com/-4VojZknIvk4/T-DxhQY5BfI/AAAAAAAAAsM/0A2K7_c4VR8/s1600/eclipse.png" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank"><img border="0" height="283" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/eclipse.png" width="400"></a></div><p>The App Engine settings should resemble:</p><div class="separator" style="clear: both;text-align: center"><a href="http://3.bp.blogspot.com/-b5bztOy-9ps/T-DxoLHUy-I/AAAAAAAAAsU/hCeYH7tHOf8/s1600/Properties-for-GAEOAuthExample.png" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank"><img border="0" height="281" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/Properties-for-GAEOAuthExample.png" width="400"></a></div><p>You will need to setup your own GAE application, along with specifying your own Application ID (see the Google <a href="https://developers.google.com/appengine/docs/java/overview" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">GAE developer docs</a>).<br> The best tutorial I’ve seen that describes how to use OAuth to access Google API services can be found <a href="https://developers.google.com/appengine/articles/java/retrieving_gdata_feeds" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">here</a>. One of the more confusing aspects I found was how to acquire the necessary consumer key and consumer secret values that are required when placing the OAuth request. The way I accomplished this was:</p><ol><li>Create the GAE application using the <a href="https://appengine.google.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">GAE Admin Console</a>. You will need to create your own Application ID (just a name for your webapp). Once you have it, you will update your Application ID in the Eclipse App Engine settings panel that is shown above.</li><li>Create a new Domain for the application. For example, since my Application ID was specified above as ‘tennis-coachrx’, I configured the target URL path prefix as: http://tennis-coachrx.appspot.com/authSub. You will see how we configure that servlet to receive the credentials shortly.</li><li>To complete the domain registration, Google will provide you an HTML file that you can upload. Include that file the root path under the /src/war directory and upload the application to GAE. This way, when Google runs it’s check, the file will be present and it will generate the necessary consumer credentials. Here’s a screenshot of what the setup looks like after it is completed:</li></ol><div class="separator" style="clear: both;text-align: center"><a href="http://1.bp.blogspot.com/-8kRdVE5gxpk/T-Dx24nNB3I/AAAAAAAAAsc/CY3tCQ9hDfs/s1600/domain.png" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank"><img border="0" height="301" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/domain.png" width="400"></a></div><p>Once you have the <i>OAuth Consumer Key</i> and <i>OAuth Consumer Secret</i>, you will then replace the following values in the                      com.zazarie.shared.Constant file:<br> final static String CONSUMER_KEY = ‘                                            ‘;                                                                                                                                                    final static String CONSUMER_SECRET = ‘                                            ‘;<br> Whew, that seemed like a lot of work! However, it’s a one-time deal, and you shouldn’t have to fuss with it again.</p><p><strong> Code Walkthrough</strong></p><p>Now that we got that OAuth configuration/setup out of the way, we can dig into the code. Let’s begin by looking at the structure of the war directory, where your web assets reside:</p><div class="separator" style="clear: both;text-align: center"><a href="http://1.bp.blogspot.com/-rCM1R0af4sk/T-Dx_CEr2nI/AAAAAAAAAsk/qugms7UCuxA/s1600/Java---GAEOAuthExamplewarWEB-INFwebxml---Eclipse---UsersuserDocumentsworkspace.png" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank"><img border="0" height="207" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/Java---GAEOAuthExamplewarWEB-INFwebxml---Eclipse---UsersuserDocumentsworkspace.png" width="400"></a></div><p>The                     listFiles.jsp is the default JSP page that is displayed when your first enter the webapp. Let’s now look at the                     web.xml file to see how this is configured, along with the servlet filter which is central to everything.</p><div id="highlighter_727635" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;?xml version=</code><code class="string">'1.0'</code> <code class="plain">encoding=</code><code class="string">'UTF-8'</code><code class="plain">?&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">&lt;web-app xmlns:xsi=</code><code class="string">'http:www.w3.org2001XMLSchema-instance'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">xsi:schemaLocation='http:java.sun.comxmlnsjavaee </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">http:java.sun.comxmlnsjavaeeweb-app_2_5.xsd'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">version=</code><code class="string">'2.5'</code> <code class="plain">xmlns=</code><code class="string">'http:java.sun.comxmlnsjavaee'</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;!-- Filters --&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;filter&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;filter-name&gt;AuthorizationFilter&lt;filter-name&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;filter-</code><code class="keyword">class</code><code class="plain">&gt;com.zazarie.server.servlet.filter.AuthorizationFilter&lt;filter-</code><code class="keyword">class</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;filter&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;filter-mapping&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">&lt;filter-name&gt;AuthorizationFilter&lt;filter-name&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;url-pattern&gt;html*&lt;url-pattern&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;filter-mapping&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;!-- Servlets --&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;servlet&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;servlet-name&gt;Step2&lt;servlet-name&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;servlet-</code><code class="keyword">class</code><code class="plain">&gt;com.zazarie.server.servlet.RequestTokenCallbackServlet&lt;servlet-</code><code class="keyword">class</code><code class="plain">&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;servlet&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;servlet-mapping&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;servlet-name&gt;Step2&lt;servlet-name&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;url-pattern&gt;authSub&lt;url-pattern&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;servlet-mapping&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;!-- Default page to serve --&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;welcome-file-list&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">&lt;welcome-file&gt;htmllistFiles.jsp&lt;welcome-file&gt;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">&lt;welcome-file-list&gt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="plain">&lt;web-app&gt;</code></td></tr></tbody></table></div></div></div><p>The servlet filter called                     AuthorizationFilter is invoked whenever a JSP file located in the                     html directory is requested. The filter, as we’ll look at in a moment, is responsible for ensuring that the user is logged into Google, and if so, then ensures that the OAuth credentials have been granted for that user (i.e., it will kick off the OAuth credentialing process, if required).</p><p>The servlet name of                     Step2 represents the servlet that is invoked by Google when the OAuth credentials have been granted — think of it as a callback. We will look at this in more detail in a bit.</p><p>Let’s take a more detailed look at the                     AuthorizationFilter.</p><p><strong>AuthorizationFilter Deep Dive</strong></p><p>The                     doFilter method is where the work takes place in a servlet filter.  Here’s the implementation:</p><div id="highlighter_194983" class="syntaxhighlighter  "><div class="bar      "><div class="toolbar"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="color1">@Override</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">doFilter(ServletRequest req, ServletResponse res,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">FilterChain chain) </code><code class="keyword">throws</code> <code class="plain">IOException, ServletException {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">HttpServletRequest request = (HttpServletRequest) req;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">HttpServletResponse response = (HttpServletResponse) res;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">HttpSession session = request.getSession();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Invoking Authorization Filter'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Destination URL is: '</code> <code class="plain">+ request.getRequestURI());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(filterConfig == </code><code class="keyword">null</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">get the Google user</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">AppUser appUser = LoginService.login(request, response);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(appUser != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">session.setAttribute(Constant.AUTH_USER, appUser);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">identify </code><code class="keyword">if</code> <code class="plain">user has an OAuth accessToken - it not, will set in motion</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">oauth procedure</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(appUser.getCredentials() == </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">need to save the target URI in session so we can forward to it when</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">oauth is completed</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">session.setAttribute(Constant.TARGET_URI, request.getRequestURI());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">OAuthRequestService.requestOAuth(request, response, session);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">} </code><code class="keyword">else</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">store DocService in the session so it can be reused</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">session.setAttribute(Constant.DOC_SESSION_ID,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LoginService.docServiceFactory(appUser));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">chain.doFilter(request, response);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>Besides the usual housekeeping stuff, the main logic begins with the line:</p><p>AppUser appUser = LoginService.login(request, response);</p><p>As we will see in a moment, the                      LoginService is responsible for logging the user into Google, and also will create the user in the local BigTable datastore. By storing the user locally, we can then store the user’s OAuth credentials, eliminating the need for the user to have to grant permissions every time they access a restricted/filtered page.<br> After                      LoginService has returned the user (                     AppUser object), we then store that user object into the session (NOTE: to enable sessions, you must set                      sessions-enabled in the                      appengine-web.xml file):<br> session.setAttribute(Constant.AUTH_USER, appUser);</p><p>We then check to see whether the OAuth credentials are associated with that user:</p><p>if (appUser.getCredentials() == null) {</p><p>session.setAttribute(Constant.TARGET_URI, request.getRequestURI());</p><p>OAuthRequestService.requestOAuth(request, response, session);<br> return;<br> } else<br> session.setAttribute(Constant.DOC_SESSION_ID,LoginService.docServiceFactory(appUser));</p><p>If                     getCredentials() returns a                     null, the OAuth credentials have not already been assigned for the user. This means that the OAuth process needs to be kicked off. Since this involves a two-step process of posting the request to Google and then retrieving back the results via the callback (                    Step2 servlet mentioned above), we need to store the destination URL so that we can later redirect the user to it once the authorization process is completed. This is done by storing the URL requested into the session using the                     setAttribute method.</p><p>We then kick off the OAuth process by calling the                     OAuthRequestService.requestOAuth() method (details discussed below).</p><p>In the event that if                     getCredentials() returns a non-null value, this indicates that we already have the user’s OAuth credentials from their local AppUser entry in the datastore, and we simply add it to the session so that we can use it later.</p><p><strong>LoginService Deep Dive</strong></p><p>The LoginService class has one main method called                     login, followed by a bunch of JPA helper methods for saving or updating the local user in the datastore. We will focus on                     login(), since that is where most of the business logic resides.</p><div id="highlighter_632009" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">static</code> <code class="plain">AppUser login(HttpServletRequest req, HttpServletResponse res) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.setLevel(Constant.LOG_LEVEL);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Initializing LoginService'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">String URI = req.getRequestURI();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">UserService userService = UserServiceFactory.getUserService();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">User user = userService.getCurrentUser();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">if</code> <code class="plain">(user != </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'User id is: '</code><code class="plain">' + userService.getCurrentUser().getUserId()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">+ </code><code class="string">''</code><code class="plain">');</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">String userEmail = userService.getCurrentUser().getEmail();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">AppUser appUser = (AppUser) req.getSession().getAttribute(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">Constant.AUTH_USER);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(appUser == </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'appUser not found in session'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">see </code><code class="keyword">if</code> <code class="plain">it is a </code><code class="keyword">new</code> <code class="plain">user</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">appUser = findUser(userEmail);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(appUser == </code><code class="keyword">null</code><code class="plain">) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'User not found in datastore...creating'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">appUser = addUser(userEmail);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'User found in datastore...updating'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">appUser = updateUserTimeStamp(appUser);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">appUser = updateUserTimeStamp(appUser);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">appUser;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">} </code><code class="keyword">else</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Redirecting user to login page'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>46</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>47</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>48</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">res.sendRedirect(userService.createLoginURL(URI));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>49</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(IOException e) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>50</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>51</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>52</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>53</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>54</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>55</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">return</code> <code class="keyword">null</code><code class="plain">;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>56</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The first substantive thing we do is use Google                     UserService class to determine whether the user is logged into Google:</p><p>UserService userService = UserServiceFactory.getUserService();</p><p>User user = userService.getCurrentUser();</p><p>If the                     User object returned by Google’s call is null, the user isn’t logged into Google, and they are redirected to a login page using:</p><p>res.sendRedirect(userService.createLoginURL(URI));</p><p>If the user is logged (i.e., not null), the next thing we do is determine whether that user exists in the local datastore. This is done by looking up the user with their logged-in Google email address with                     appUser = findUser(userEmail). Since JPA/Objectify isn’t the primary discussion point for this tutorial, I won’t go into how that method works. However, the <a href="http://code.google.com/p/objectify-appengine/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Objectify</a> web site has some great tutorials/documentation.</p><p>If the user doesn’t exist locally, the object is populated with Google’s email address and created using                     appUser = addUser(userEmail). If the user does exist, we simply update the login timestamp for logging purposes.<br> <strong><br> </strong> <strong>OAuthRequestService Deep Dive</strong><br> <strong><br> </strong> As you may recall from earlier, once the user is setup locally, the                     AuthorizationFilter will then check to see whether the OAuth credentials have been granted by the user. If not, the                     OAuthRequestService.requestOAuth() method is invoked. It is shown below:</p><div id="highlighter_81872" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">static</code> <code class="keyword">void</code> <code class="plain">requestOAuth(HttpServletRequest req,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">HttpServletResponse res, HttpSession session) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.setLevel(Constant.LOG_LEVEL);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Initializing OAuthRequestService'</code><code class="plain">);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">GoogleOAuthParameters oauthParameters = </code><code class="keyword">new</code> <code class="plain">GoogleOAuthParameters();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthConsumerKey(Constant.CONSUMER_KEY);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthConsumerSecret(Constant.CONSUMER_SECRET);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">Set the scope.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setScope(Constant.GOOGLE_RESOURCE);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">Sets the callback URL.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthCallback(Constant.OATH_CALLBACK);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">GoogleOAuthHelper oauthHelper = </code><code class="keyword">new</code> <code class="plain">GoogleOAuthHelper(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="keyword">new</code> <code class="plain">OAuthHmacSha1Signer());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">Request is still unauthorized at </code><code class="keyword">this</code> <code class="plain">point</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">oauthHelper.getUnauthorizedRequestToken(oauthParameters);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">Generate the authorization URL</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">String approvalPageUrl = oauthHelper</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">.createUserAuthorizationUrl(oauthParameters);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">session.setAttribute(Constant.SESSION_OAUTH_TOKEN,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">oauthParameters.getOAuthTokenSecret());</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">LOGGER.info(</code><code class="string">'Session attributes are: '</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">+ session.getAttributeNames().hasMoreElements());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">res.getWriter().print(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'&lt;a href='</code><code class="plain">' + approvalPageUrl</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">+ </code><code class="string">''</code><code class="plain">&gt;Request token </code><code class="keyword">for</code> <code class="plain">the Google Documents Scope');</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(OAuthException e) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(IOException e) {</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>To simplify working with OAuth, Google has a set of Java helper classes that we are utilizing. The first thing we need to do is setup the consumer credentials (acquiring those was discussed earlier):</p><p>GoogleOAuthParameters oauthParameters = new GoogleOAuthParameters();<br> oauthParameters.setOAuthConsumerKey(Constant.CONSUMER_KEY);<br> oauthParameters.setOAuthConsumerSecret(Constant.CONSUMER_SECRET);</p><p>Then, we set the scope of the OAuth request using:<br> oauthParameters.setScope(Constant.GOOGLE_RESOURCE);</p><p>Where                     Constant.GOOGLE_RESOURCE resolves to                     https://docs.google.com/feeds/. When you make an OAuth request, you specify the scope of what resources you are attempting to gain access. In this case, we are trying to access Google Docs (the GData API’s for each service have the scope URL provided).  Next, we establish where we want Google to return the reply.</p><p>oauthParameters.setOAuthCallback(Constant.OATH_CALLBACK);</p><p>This value changes whether we are running locally in dev mode, or deployed to the Google App Engine. Here’s how the values are defined in the the                     Constant interface:</p><p>// Use for running on GAE<br> //final static String OATH_CALLBACK = ‘http://tennis-coachrx.appspot.com/authSub';</p><p>// Use for local testing<br> final static String OATH_CALLBACK = ‘http://127.0.0.1:8888/authSub';</p><p>When then sign the request using Google’s helper:</p><p>GoogleOAuthHelper oauthHelper = new GoogleOAuthHelper(new OAuthHmacSha1Signer());</p><p>We then generate the URL that the user will navigate to in order to authorize access to the resource. This is generated dynamically using:</p><p>String approvalPageUrl = oauthHelper.createUserAuthorizationUrl(oauthParameters);</p><p>The last step is to provide a link to the user so that they can navigate to that URL to approve the request. This is done by constructing some simple HTML that is output using                     res.getWriter().print().</p><p>Once the user has granted access, Google calls back to the servlet identified by the URL parameter                     /authSub, which corresponds to the servlet class                     RequestTokenCallbackServlet. We will examine this next.</p><p><strong>RequestTokenCallbackServlet Deep Dive</strong><br> <strong><br> </strong> The servlet uses the Google OAuth helper classes to generate the required access token and secret access token’s that will be required on subsequent calls to to the Google API docs service.  Here is the                     doGet method that receives the call back response from Google:</p><div id="highlighter_171047" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">public</code> <code class="keyword">void</code> <code class="plain">doGet(HttpServletRequest req, HttpServletResponse resp)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">throws</code> <code class="plain">ServletException, IOException {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">Create an instance of GoogleOAuthParameters</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">GoogleOAuthParameters oauthParameters = </code><code class="keyword">new</code> <code class="plain">GoogleOAuthParameters();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthConsumerKey(Constant.CONSUMER_KEY);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthConsumerSecret(Constant.CONSUMER_SECRET);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">GoogleOAuthHelper oauthHelper = </code><code class="keyword">new</code> <code class="plain">GoogleOAuthHelper(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="keyword">new</code> <code class="plain">OAuthHmacSha1Signer());</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">String oauthTokenSecret = (String) req.getSession().getAttribute(</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">Constant.SESSION_OAUTH_TOKEN);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">AppUser appUser = (AppUser) req.getSession().getAttribute(</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">Constant.AUTH_USER);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthParameters.setOAuthTokenSecret(oauthTokenSecret);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">oauthHelper.getOAuthParametersFromCallback(req.getQueryString(),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">oauthParameters);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>23</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="keyword">try</code> <code class="plain">{</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>24</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>25</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">String accessToken = oauthHelper.getAccessToken(oauthParameters);</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>26</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>27</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">String accessTokenSecret = oauthParameters.getOAuthTokenSecret();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>28</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>29</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">appUser = LoginService.getById(appUser.getId());</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>30</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>31</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">appUser = LoginService.updateUserCredentials(appUser,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>32</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">new</code> <code class="plain">OauthCredentials(accessToken, accessTokenSecret));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>33</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>34</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">req.getSession().setAttribute(Constant.DOC_SESSION_ID,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>35</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">LoginService.docServiceFactory(appUser));</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>36</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>37</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">RequestDispatcher dispatcher = req.getRequestDispatcher((String) req</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>38</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">.getSession().getAttribute(Constant.TARGET_URI));</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>39</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">(dispatcher != </code><code class="keyword">null</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>40</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">dispatcher.forward(req, resp);</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>41</code></td><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>42</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">} </code><code class="keyword">catch</code> <code class="plain">(OAuthException e) {</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>43</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">e.printStackTrace();</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>44</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>45</code></td><td class="content"><code class="plain">}</code></td></tr></tbody></table></div></div></div><p>The Google                      GoogleOAuthHelper is used to perform the housekeeping tasks required to populate the two values we are interested in:<br> String accessToken = oauthHelper.getAccessToken(oauthParameters);<br> String accessTokenSecret = oauthParameters.getOAuthTokenSecret();</p><p>Once we have these values, we then requery the user object from the datastore, and save those values into the                      AppUser.OauthCredentials subclass:<br> appUser = LoginService.getById(appUser.getId());<br> appUser = LoginService.updateUserCredentials(appUser,<br> new OauthCredentials(accessToken, accessTokenSecret));<br> req.getSession().setAttribute(Constant.DOC_SESSION_ID,<br> LoginService.docServiceFactory(appUser));</p><p>In addition, you’ll see they are also stored into the session so we have them readily available when the API request to Google Docs is placed.</p><p>Now that we’ve got everything we need, we simply redirect the user back to the resource they had originally requested:</p><p>RequestDispatcher dispatcher = req.getRequestDispatcher((String) req<br> .getSession().getAttribute(Constant.TARGET_URI));<br> dispatcher.forward(req, resp);</p><p>Now, when they access the JSP page listing their documents, everything should work!</p><p>Here’s a screencast demo of the final product:</p><p>Hope you enjoyed the tutorial and demo — look forward to your comments!</p><p>Continue to the <a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app_20.html">second part</a> of this tutorial.</p><p><strong><i>Reference: </i></strong><a href="http://jeff-davis.blogspot.com/2012/05/authenticating-for-google-services-in.html" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Authenticating for Google Services in Google App Engine</a> from our <a href="http://www.javacodegeeks.com/p/jcg.html">JCG partner</a> Jeff Davis at the <a href="http://jeff-davis.blogspot.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Jeff’s SOA Ruminations</a> blog.</p></div></div> <span style="display:none"><a href="http://www.javacodegeeks.com/tag/gdata/" rel="tag">GData</a> <a href="http://www.javacodegeeks.com/tag/google-app-engine/" rel="tag">Google App Engine</a> <a href="http://www.javacodegeeks.com/tag/google-services/" rel="tag">Google Services</a> <a href="http://www.javacodegeeks.com/tag/oauth/" rel="tag">OAuth</a> <a href="http://www.javacodegeeks.com/tag/security/" rel="tag">Security</a></span> <span style="display:none" class="updated">2012-06-20</span><div style="display:none" class="vcard author" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><strong class="fn" itemprop="name"><a href="http://www.javacodegeeks.com/author/Jeff-Davis/" title="Posts by Jeff Davis" rel="author">Jeff Davis</a></strong></div></div> </article><p class="post-tag">Tagged with: <a href="http://www.javacodegeeks.com/tag/gdata/" rel="tag">GData</a> <a href="http://www.javacodegeeks.com/tag/google-app-engine/" rel="tag">Google App Engine</a> <a href="http://www.javacodegeeks.com/tag/google-services/" rel="tag">Google Services</a> <a href="http://www.javacodegeeks.com/tag/oauth/" rel="tag">OAuth</a> <a href="http://www.javacodegeeks.com/tag/security/" rel="tag">Security</a></p><div id="mc4wp-form-1" class="form mc4wp-form mc4wp-form-29380 mc4wp-ajax"><form method="post" role="form"><div class="nlbox1"><h1>Do you want to know how to develop your skillset to become a <span style="color: #CAB43D; text-shadow: 1px 1px #835D5D;">Java Rockstar?</span></h1><div style="background: url(&#39;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2015/01/books_promo.png&#39;) no-repeat; float:left; padding: 75px 145px 310px 170px; margin-top: -10px; margin-left: -35px;"></div><table style="margin-top: 20px; padding-left: 20px;"><tbody><tr><td style="vertical-align:top;"><h2>Subscribe to our newsletter to start Rocking <span style="text-decoration: underline;">right now!</span></h2><h3>To get you started we give you our best selling eBooks for <span style="color:#e01404; text-shadow: 1px 1px #C99924; font-size: 20px; line-height: 25px;">FREE!</span></h3><p></p><h3><strong>1.</strong> JPA Mini Book</h3><h3><strong>2.</strong> JVM Troubleshooting Guide</h3><h3><strong>3.</strong> JUnit Tutorial for Unit Testing</h3><h3><strong>4.</strong> Java Annotations Tutorial<!--3--></h3><h3><strong>5.</strong> Java Interview Questions</h3><h3><strong>6.</strong> Spring Interview Questions</h3><h3><strong>7.</strong> Android UI Design</h3><p></p><h3>and many more ....</h3><p>&nbsp;</p><p></p><p> <label for="mc4wp_email"><span style="font-weight: bold; font-size: 13pt;">Email address: </span></label> <input type="email" id="mc4wp_email" name="EMAIL" required="" placeholder="Your email address"></p> <input type="submit" value="Sign up"></td></tr></tbody></table></div><span class="mc4wp-ajax-loader" style="display: none;"></span><input type="hidden" name="_mc4wp_required_but_not_really" value="" style="display: none;"><input type="hidden" name="_mc4wp_timestamp" value="1437201150"><input type="hidden" name="_mc4wp_form_id" value="29380"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-1"><input type="hidden" name="_mc4wp_form_submit" value="1"><input type="hidden" name="_mc4wp_form_nonce" value="d61bea090e"></form><div class="mc4wp-response"></div></div><div class="ads-post"><div id="div-gpt-ad-1415445260332-5" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-5');});</script></div></div><div id="comments"><h3 id="comments-title"> 2 comments</h3><ol class="commentlist"><li id="comment-750"><div class="comment even thread-even depth-1 comment-wrap"><div class="comment-avatar"><img alt="" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/561c457604a68d6555d6e30e5c51f96b" srcset="http://2.gravatar.com/avatar/561c457604a68d6555d6e30e5c51f96b?s=90&amp;d=mm&amp;r=g 2x" class="avatar avatar-45 photo" height="45" width="45"></div><div class="author-comment"> <cite class="fn">Ericko Ericko</cite><div class="comment-meta commentmetadata"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html#comment-750"> June 21st, 2012 at 2:25 am</a></div></div><div class="clear"></div><div class="comment-content"><p>hey,just what i needed, im getting frustrated about this Oauth2 thing. thx so much!!! I have one problem though, I am trying it in the local, I got the consumer key and secret, but how about the SESSION_OAUTH_TOKEN, because when I try to log in, I am getting “com.google.gdata.client.authn.oauth.OAuthException: oauth_token_secret does not exist” error. What should I do? thanks!!</p></div><div class="reply"><a class="comment-reply-link" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer&replytocom=750#respond" onclick="return addComment.moveForm( &quot;comment-750&quot;, &quot;750&quot;, &quot;respond&quot;, &quot;1369&quot; )" aria-label="Reply to Ericko Ericko">Reply</a></div></div></li><li id="comment-1989"><div class="comment odd alt thread-odd thread-alt depth-1 comment-wrap"><div class="comment-avatar"><img alt="" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/854a28b3287efd39c630ef32b858cd7a" srcset="http://2.gravatar.com/avatar/854a28b3287efd39c630ef32b858cd7a?s=90&amp;d=mm&amp;r=g 2x" class="avatar avatar-45 photo" height="45" width="45"></div><div class="author-comment"> <cite class="fn">JoAnn Brereton</cite><div class="comment-meta commentmetadata"><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html#comment-1989"> January 8th, 2013 at 1:02 am</a></div></div><div class="clear"></div><div class="comment-content"><p>Any particular reason that you have two objectify.jar’s in the build path?</p></div><div class="reply"><a class="comment-reply-link" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer&replytocom=1989#respond" onclick="return addComment.moveForm( &quot;comment-1989&quot;, &quot;1989&quot;, &quot;respond&quot;, &quot;1369&quot; )" aria-label="Reply to JoAnn Brereton">Reply</a></div></div></li></ol><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#respond" style="display:none;">Cancel reply</a></small></h3><form action="http://www.javacodegeeks.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p><p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" aria-required="true" required="true"></p><p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" aria-required="true" required="true"></p><p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30"></p><p class="cptch_block"><br> <input type="hidden" name="cptch_result" value="Gr0="> <input type="hidden" name="cptch_time" value="1437201150"> <input type="hidden" value="Version: 4.1.3"> <input id="cptch_input" class="cptch_input" type="text" autocomplete="off" name="cptch_number" value="" maxlength="2" size="2" aria-required="true" required="required" style="margin-bottom:0;display:inline;font-size: 12px;width: 40px;"> − 8 =  one</p><p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-describedby="form-allowed-tags" aria-required="true" required="required"></textarea></p><p class="form-allowed-tags" id="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes: <code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="1369" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"></p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="0b6c434d6e"></p><p class="comment-form-subscriptions"><label for="subscribe-reloaded"><input type="checkbox" name="subscribe-reloaded" id="subscribe-reloaded" value="yes"> Notify me of followup comments via e-mail. You can also <a href="http://www.javacodegeeks.com/comment-subscriptions/?srp=1369&srk=&sra=s">subscribe</a> without commenting.</label></p><p id="mc4wp-checkbox" class="mc4wp-checkbox-comment_form"><label><input type="checkbox" name="_mc4wp_subscribe_comment_form" value="1" checked=""> Sign me up for the newsletter!</label></p><textarea name="_mc4wp_required_but_not_really" style="display: none !important;"></textarea><p style="display: none;"></p><input type="hidden" id="ak_js" name="ak_js" value="1437201150928"></form></div></div></div></div> <aside class="sidebar"><div id="text-12" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-3" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-3');});</script></div></div></div></div><div id="text-13" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-4" style="width:300px; height:250px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-4');});</script></div></div></div></div><div id="mc4wp_widget-3" class="widget widget_mc4wp_widget"><div class="widget-top"><h4>Newsletter</h4><div class="stripe-line"></div></div><div class="widget-container"><div id="mc4wp-form-2" class="form mc4wp-form mc4wp-form-28645 mc4wp-ajax"><form method="post" role="form"><div style="padding: 15px 15px 15px; background: url(&#39;http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/2014/11/newsletter-bg.jpg&#39;) no-repeat; background-color: rgb(252, 252, 252);"><span style="text-shadow: 1px 1px #D0D0D0; font-weight: bold; font-size: 14pt; display: inline;">103659</span> insiders are already enjoying weekly updates and complimentary whitepapers!<p> <span style="text-shadow: 1px 1px #D0D0D0; font-weight: bold; font-size: 14pt; display: inline;">Join them now</span> to gain <span style="text-decoration: underline;  font-size: 14pt;">exclusive access</span> to the latest news in the Java world, as well as insights about Android, Scala, Groovy and other related technologies.</p><p> <label for="mc4wp_email"><span style="font-weight: bold; font-size: 13pt;">Email address: </span></label> <input type="email" id="mc4wp_email" name="EMAIL" required="" placeholder="Your email address"></p> <input type="submit" value="Sign up"></div><span class="mc4wp-ajax-loader" style="display: none;"></span><input type="hidden" name="_mc4wp_required_but_not_really" value="" style="display: none;"><input type="hidden" name="_mc4wp_timestamp" value="1437201150"><input type="hidden" name="_mc4wp_form_id" value="28645"><input type="hidden" name="_mc4wp_form_element_id" value="mc4wp-form-2"><input type="hidden" name="_mc4wp_form_submit" value="1"><input type="hidden" name="_mc4wp_form_nonce" value="d61bea090e"></form><div class="mc4wp-response"></div></div></div></div><div id="text-6" class="widget widget_text"><div class="widget-top"><h4>Join Us</h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div style="width:150px; height:150px; float:left; margin-top:-10px; margin-left:-10px;"> <img title="Join Us" alt="Join Us" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/w4g-badge-150x150.png" width="150" height="150"></div> With <label style="border:1px solid #D8D8D8;background:#F0F0F0;border-radius:3px;-moz-border-radius:3px;text-shadow: 1px 1px #D0D0D0;text-align:center;font-weight:bold;padding-left:3px;padding-right:3px">1,240,600</label> monthly unique visitors and over <label style="border:1px solid #D8D8D8;background:#F0F0F0;border-radius:3px;-moz-border-radius:3px;text-shadow: 1px 1px #D0D0D0;text-align:center;font-weight:bold;padding-left:3px;padding-right:3px">500</label> authors we are placed among the top Java related sites around. Constantly being on the lookout for partners; we encourage you to join us. So If you have a blog with unique and interesting content then you should check out our <strong><a href="http://www.javacodegeeks.com/join-us/jcg">JCG</a></strong> partners program. You can also be a <strong><a href="http://www.javacodegeeks.com/join-us/w4g">guest writer</a></strong> for Java Code Geeks and hone your writing skills!</div></div></div><div id="text-14" class="widget widget_text"><div class="widget-top"><h4></h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><div id="div-gpt-ad-1415445260332-6" style="width:300px; height:600px;"><script type="text/javascript">googletag.cmd.push(function(){googletag.display('div-gpt-ad-1415445260332-6');});</script></div></div></div></div><div id="text-15" class="widget widget_text"><div class="widget-top"><h4>Career Opportunities</h4><div class="stripe-line"></div></div><div class="widget-container"><div class="textwidget"><style type="text/css">#indJobContent{padding-bottom:5px}#indJobContent
.company_location{font-size:11px;overflow:hidden;display:block}#indJobContent.wide
.job{display:block;float:left;margin-right:5px;width:135px;overflow:hidden}#indeed_widget_wrapper{position:relative;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:13px;font-weight:normal;line-height:18px;padding:10px;height:auto;overflow:hidden}#indeed_widget_header{font-size:18px;padding-bottom:5px}#indeed_search_wrapper{clear:both;font-size:12px;margin-top:0px;padding-top:2px}#indeed_search_wrapper
label{font-size:12px;line-height:inherit;text-align:left;margin-right:5px}#indeed_search_wrapper input[type='text']{width:100px;font-size:11px}#indeed_search_wrapper
#qc{float:left}#indeed_search_wrapper
#lc{float:right}#indeed_search_wrapper.stacked #qc, #indeed_search_wrapper.stacked
#lc{float:none;clear:both}#indeed_search_wrapper.stacked input[type='text']{width:150px}#indeed_search_wrapper.stacked
label{display:block;padding-bottom:5px}#indeed_search_footer{width:295px;padding-top:5px;clear:both}#indeed_link{position:absolute;bottom:1px;right:5px;clear:both;font-size:11px}#indeed_link
a{text-decoration:none}#results
.job{padding:1px
0px}#pagination{clear:both}</style><style type="text/css">#indeed_widget_wrapper{max-width:300px;height:600px;background:#FFF}#indeed_widget_wrapper{border:1px
solid #DDD}#indeed_widget_wrapper, #indeed_link
a{color:#000}#indJobContent,#indeed_search_wrapper{border-top:1px solid #DDD}#indJobContent
a{color:#00c}#indeed_widget_header{color:#000}</style><script type="text/javascript">var ind_pub='4110899194707815';var ind_el='indJobContent';var ind_pf='';var ind_q='java';var ind_l='';var ind_chnl='none';var ind_n=10;var ind_d='http://www.indeed.com';var ind_t=40;var ind_c=30;var ind_pgn=1;var ind_pgnCnt=10;</script><script type="text/javascript" src="http://www.indeed.com/ads/jobroll-widget-v3.js"></script><div id="indeed_widget_wrapper" style=""><div id="indJobContent" class=""></div><div id="indeed_search_wrapper"><script type="text/javascript">/*<![CDATA[*/function clearDefaults(){var formInputs=document.getElementById('indeed_jobform').elements;for(var i=0;i<formInputs.length;i++){if(formInputs[i].value=='title, keywords'||formInputs[i].value=='city, state, or zip'){formInputs[i].value='';}}}/*]]>*/</script><form onsubmit="clearDefaults();" method="get" action="http://www.indeed.com/jobs" id="indeed_jobform" target="_new"><div id="qc"><label>What:</label><input type="text" onfocus="this.value=&quot;&quot;" value="title, keywords" name="q" id="q"></div><div id="lc"><label>Where:</label><input type="text" onfocus="this.value=&quot;&quot;" value="city, state, or zip" name="l" id="l"></div><div id="indeed_search_footer"><div style="float:left"><input type="submit" value="Find Jobs" class="findjobs"></div></div> <input type="hidden" name="indpubnum" id="indpubnum" value="4110899194707815"></form></div><div id="indeed_link"> <a title="Job Search" href="http://www.indeed.com/" rel="external nofollow" class="ext-link" data-wpel-target="_blank">jobs by <img alt="Indeed" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/jobsearch.gif" style="border: 0;vertical-align: bottom;"> </a></div></div></div></div></div></aside><div class="clear"></div><div class="clear"></div></div></div><footer class="fade-in animated4"><div id="footer-widget-area" class="wide-right-3c container"><div id="footer-first" class="footer-widgets-box"><div id="linkcat-4" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Knowledge Base</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://academy.javacodegeeks.com/">Academy</a></li><li><a href="http://examples.javacodegeeks.com/" target="_blank">Examples</a></li><li><a href="http://library.javacodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Library</a></li><li><a href="http://www.javacodegeeks.com/p/resources.html" target="_blank">Resources</a></li><li><a href="http://www.javacodegeeks.com/tutorials/" target="_blank">Tutorials</a></li><li><a href="http://www.javacodegeeks.com/whitepaper/" target="_blank">Whitepapers</a></li></ul></div></div><div id="linkcat-3" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Partners</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.mkyong.com/" target="_blank">Mkyong</a></li></ul></div></div><div id="linkcat-5" class="footer-widget widget_links"><div class="footer-widget-top"><h4>The Code Geeks Network</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.dotnetcodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">.NET Code Geeks</a></li><li><a href="http://www.javacodegeeks.com/" target="_blank">Java Code Geeks</a></li><li><a href="http://www.webcodegeeks.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Web Code Geeks</a></li></ul></div></div></div><div id="footer-second" class="footer-widgets-box"><div id="linkcat-652" class="footer-widget widget_links"><div class="footer-widget-top"><h4>Hall Of Fame</h4></div><div class="footer-widget-container"><ul class="xoxo blogroll"><li><a href="http://www.javacodegeeks.com/2013/01/15-online-learning-websites-that-you-should-check-out.html" target="_blank">11 Online Learning websites that you should check out</a></li><li><a href="http://www.javacodegeeks.com/2013/04/advantages-and-disadvantages-of-cloud-computing-cloud-computing-pros-and-cons.html" target="_blank">Advantages and Disadvantages of Cloud Computing – Cloud computing pros and cons</a></li><li><a href="http://www.javacodegeeks.com/2011/02/android-google-maps-tutorial.html" target="_blank">Android Google Maps Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html" target="_blank">Android JSON Parsing with Gson Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2010/09/android-location-based-services.html" target="_blank">Android Location Based Services Application – GPS location</a></li><li><a href="http://www.javacodegeeks.com/2011/01/android-quick-preferences-tutorial.html" target="_blank">Android Quick Preferences Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2013/03/difference-between-comparator-and-comparable-in-java.html" target="_blank">Difference between Comparator and Comparable in Java</a></li><li><a href="http://www.javacodegeeks.com/2010/05/gwt-2-spring-3-jpa-2-hibernate-35-2.html" target="_blank">GWT 2 Spring 3 JPA 2 Hibernate 3.5 Tutorial</a></li><li><a href="http://www.javacodegeeks.com/2010/08/java-best-practices-vector-arraylist.html" target="_blank">Java Best Practices – Vector vs ArrayList vs HashSet</a></li><li><a href="http://www.javacodegeeks.com/2010/10/android-full-application-tutorial.html" target="_blank">“Android Full Application Tutorial” series</a></li></ul></div></div></div><div id="footer-third" class="footer-widgets-box"><div id="text-16" class="footer-widget widget_text"><div class="footer-widget-top"><h4>About Java Code Geeks</h4></div><div class="footer-widget-container"><div class="textwidget">JCGs (Java Code Geeks) is an independent online community focused on creating the ultimate Java to Java developers resource center; targeted at the technical architect, technical team lead (senior developer), project manager and junior developers alike. JCGs serve the Java, SOA, Agile and Telecom communities with daily news written by domain experts, articles, tutorials, reviews, announcements, code snippets and open source projects.</div></div></div><div id="text-17" class="footer-widget widget_text"><div class="footer-widget-top"><h4>Disclaimer</h4></div><div class="footer-widget-container"><div class="textwidget">All trademarks and registered trademarks appearing on Examples Java Code Geeks are the property of their respective owners. Java is a trademark or registered trademark of Oracle Corporation in the United States and other countries. Examples Java Code Geeks is not connected to Oracle Corporation and is not sponsored by Oracle Corporation.</div></div></div></div></div><div class="clear"></div> </footer><div class="clear"></div><div class="footer-bottom fade-in animated4"><div class="container"><div class="social-icons icon_flat"> <a class="ttip ext-link" href="http://feeds.feedburner.com/JavaCodeGeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Rss"><i class="tieicon-rss"></i></a><a class="ttip ext-link" href="https://plus.google.com/+JavaCodeGeeks/" rel="external nofollow" data-wpel-target="_blank" original-title="Google+"><i class="tieicon-gplus"></i></a><a class="ttip ext-link" href="https://www.facebook.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Facebook"><i class="tieicon-facebook"></i></a><a class="ttip ext-link" href="https://twitter.com/javacodegeeks" rel="external nofollow" data-wpel-target="_blank" original-title="Twitter"><i class="tieicon-twitter"></i></a><a class="ttip ext-link" href="https://www.linkedin.com/groups/Java-Code-Geeks-3810709" rel="external nofollow" data-wpel-target="_blank" original-title="LinkedIn"><i class="tieicon-linkedin"></i></a></div><div class="alignleft"> Java Code Geeks and all content copyright © 2010-2015, <a href="http://www.exelixismedia.com/" rel="external nofollow" title="" class="ext-link" data-wpel-target="_blank">Exelixis Media P.C.</a> | <a href="http://www.javacodegeeks.com/about/terms-of-use/">Terms of Use</a> | <a href="http://www.javacodegeeks.com/about/privacy-policy/">Privacy Policy</a> | <a href="mailto:support@javacodegeeks.com">Contact</a></div></div></div></div><div id="topcontrol" class="tieicon-up-open" title="Scroll To Top" style="bottom: 15px;"></div><div id="fb-root"></div> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-12271632-2','auto');ga('send','pageview');</script><script>var snp_f=[];</script><div class="snp-root"> <input type="hidden" id="snp_popup" value=""> <input type="hidden" id="snp_popup_id" value=""> <input type="hidden" id="snp_popup_theme" value=""> <input type="hidden" id="snp_exithref" value=""> <input type="hidden" id="snp_exittarget" value=""><div id="snppopup-welcome" class="snp-pop-28776 snppopup"><input type="hidden" class="snp_open" value="load"><input type="hidden" class="snp_open_after" value="6"><input type="hidden" class="snp_open_scroll" value="10"><input type="hidden" class="snp_optin_redirect_url" value=""><input type="hidden" class="snp_show_cb_button" value="yes"><input type="hidden" class="snp_popup_id" value="28776"><input type="hidden" class="snp_popup_theme" value="newtheme6"><input type="hidden" class="snp_overlay" value="default"><input type="hidden" class="snp_cookie_conversion" value="30"><input type="hidden" class="snp_cookie_close" value="5"><div class="snp-fb snp-newtheme6"><div class="snp-steps snp-step-1 snp-step-show"><div class="snp-h3 snp-beta"><span>Do you want to know how to develop your skillset and become a ...</span></div><div class="snp-h1 snp-alpha  snp-uppercase  snp-color--primary"><img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/java-rockstar.png" style="max-width: 100%;height: auto;"></div><p class="snp-islet"><img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/rockstar_dukewithguitar_small.png" alt=""></p><div class="snp-theme__choice"> <a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" data-nextstep="2" class="snp_nextstep snp-btn snp-btn--primary">YES!<span class="snp-btn__subline"><span style="font-weight: normal;">Make me a Java Rockstar</span></span></a><span class="snp-theme__choice-or"> </span><a href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" data-nextstep="2" class="snp_nothanks snp-btn snp-btn--secondary">NO,<span class="snp-btn__subline"><span style="font-weight: normal;">I'll stick to my gut on this</span></span></a></div> <footer class="snp-theme__footer"> <a class="snp_nothanks" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#">Close this popup</a> </footer></div><div class="snp-steps snp-step-2"><div class="snp-h3 snp-beta">Subscribe to our newsletter to start Rocking <span style="text-decoration: underline;">right now!</span><p style="margin: 30px"></p><img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/books_promo.png" style="float: left; margin-top: -30px; max-width: 100%;height: auto;"><table style="padding-bottom: 30px;"><tbody><tr><td>To get you started we give you our best selling eBooks for <span style="color:#e01404; text-shadow: 1px 1px #C99924">FREE</span>!</td></tr></tbody></table></div><form action="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#" method="post" class="snp-push--ends snp-subscribeform snp_subscribeform"><ul class="snp-fields-list"><li><input type="text" name="email" id="snp_email" placeholder="Your Email..." class="snp-field snp-field-email"></li></ul> <button class="snp-subscribe-button snp-submit snp-btn  snp-btn--primary  snp-btn--large" data-nextstep="3" data-loading="" data-success="" type="submit">Subscribe Now!</button></form> <footer class="snp-theme__footer  snp-flush--top"> <a class="snp_nothanks" href="http://www.javacodegeeks.com/2012/06/google-services-authentication-in-app.html?utm_content=bufferc9d20&utm_medium=social&utm_source=facebook.com&utm_campaign=buffer#">Close this popup</a> </footer></div><div class="snp-steps snp-step-3"><div class="snp-h2 snp-beta">Get ready to Rock!</div><div class="snp-h1 snp-alpha snp-flush--top snp-uppercase  snp-color--primary"><span>To download the books, please <span style="text-decoration: underline;">verify</span> your email address by following the instructions found on the email we just sent you.</span><p>THANK YOU!</p></div><p class="snp-islet"><img src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/java_duke_thumbs_up.png" alt=""></p><a href="" class=" snp-btn snp-btn--secondary">Close</a> <footer class="snp-theme__footer"> </footer></div></div><style>/*<![CDATA[*/.snp-pop-28776 .snp-newtheme6{width:750px}.snp-pop-28776 .snp-newtheme6{background:#e7e7e7}.snp-pop-28776 .snp-newtheme6{color:#363636}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-h3{font-size:26px;color:#363636}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-h1{font-size:40px;color:#45b7af}.snp-pop-28776 .snp-newtheme6 .snp-color--primary{color:#45b7af}.snp-pop-28776 .snp-newtheme6{color:#363636}.snp-pop-28776 .snp-newtheme6 .snp-step-2 .snp-h3{font-size:34px;color:#363636}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--primary{background:#4ecdc4}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--primary{color:#fff}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--secondary{background:#ff6b6b}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--secondary{color:#fff}.snp-pop-28776 .snp-newtheme6 .snp-step-2 .snp-btn--primary{background:#4ecdc4}.snp-pop-28776 .snp-newtheme6 .snp-step-2 .snp-btn--primary{color:#fff}.snp-pop-28776 .snp-newtheme6 .snp-step-3 .snp-btn--secondary{background:#4ecdc4}.snp-pop-28776 .snp-newtheme6 .snp-step-3 .snp-btn--secondary{color:#fff}.snp-pop-28776 .snp-newtheme6 .snp-step-3 .snp-h2{font-size:40px;color:#363636}.snp-pop-28776 .snp-newtheme6 .snp-step-3 .snp-h1{font-size:30px;color:#2f4f4c}/*]]>*/</style><style>/*<![CDATA[*/.snp-pop-28776 .snp-newtheme6{background:-webkit-linear-gradient(left, #FFE974, #FFFDE4, #FFE974);background:-o-linear-gradient(left, #FFE974, #FFFDE4, #FFE974);background:-moz-linear-gradient(left, #FFE974, #FFFDE4, #FFE974);background:linear-gradient(left, #FFE974, #FFFDE4, #FFE974)}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--primary{background:-webkit-linear-gradient(#2FC400, #205800);background:-o-linear-gradient(#2FC400, #205800);background:-moz-linear-gradient(#2FC400, #205800);background:linear-gradient(#2FC400, #205800)}.snp-pop-28776 .snp-newtheme6 .snp-step-1 .snp-btn--secondary{background:-webkit-linear-gradient(#FF5144, #A20000);background:-o-linear-gradient(#FF5144, #A20000);background:-moz-linear-gradient(#FF5144, #A20000);background:linear-gradient(#FF5144, #A20000)}.snp-pop-28776 .snp-newtheme6 .snp-step-2 .snp-btn--primary{background:-webkit-linear-gradient(#2FC400, #205800);background:-o-linear-gradient(#2FC400, #205800);background:-moz-linear-gradient(#2FC400, #205800);background:linear-gradient(#2FC400, #205800)}.snp-pop-28776 .snp-newtheme6 .snp-step-3 .snp-btn--secondary{background:-webkit-linear-gradient(#FF5144, #A20000);background:-o-linear-gradient(#FF5144, #A20000);background:-moz-linear-gradient(#FF5144, #A20000);background:linear-gradient(#FF5144, #A20000)}.snp-newtheme6 .snp-beta{font-size:34px}.snp-newtheme6 .snp-theme__footer>a{color:black;text-decoration:none}.snp-newtheme6 .snp-push--ends{margin-top:-1em;display:inline-block}/*]]>*/</style></div></div><script>/*<![CDATA[*/var snp_timer;var snp_timer_o;var snp_ajax_url='http://www.javacodegeeks.com/wp-admin/admin-ajax.php';var snp_ignore_cookies=false;var snp_is_interal_link;var snp_enable_analytics_events=true;var snp_enable_mobile=true;jQuery(document).ready(function(){jQuery('[placeholder]').placeholder();jQuery(".snp_nothanks, .snp_closelink, .snp-close-link").click(function(){snp_close();return false;});jQuery(".snp_subscribeform").submit(function(){return snp_onsubmit(jQuery(this));});var snp_open=jQuery('#snppopup-welcome .snp_open').val();var snp_open_after=jQuery('#snppopup-welcome .snp_open_after').val();var snp_open_inactivity=jQuery('#snppopup-welcome .snp_open_inactivity').val();var snp_open_scroll=jQuery('#snppopup-welcome .snp_open_scroll').val();var snp_op_welcome=false;if(snp_open=='inactivity')
{var snp_idletime=0;function snp_timerIncrement()
{snp_idletime++;if(snp_idletime>snp_open_inactivity)
{window.clearTimeout(snp_idleInterval);snp_open_popup('','','snppopup-welcome','welcome');}}
var snp_idleInterval=setInterval(snp_timerIncrement,1000);jQuery(this).mousemove(function(e){snp_idletime=0;});jQuery(this).keypress(function(e){snp_idletime=0;});}
else if(snp_open=='scroll')
{jQuery(window).scroll(function(){var h=jQuery(document).height()-jQuery(window).height();var sp=jQuery(window).scrollTop();var p=parseInt(sp/h*100);if(p>=snp_open_scroll&&snp_op_welcome==false){snp_open_popup('','','snppopup-welcome','welcome');snp_op_welcome=true;}});}
else
{if(snp_open_after)
{snp_timer_o=setTimeout("snp_open_popup('','','snppopup-welcome','welcome');",snp_open_after*1000);}
else
{snp_open_popup('','','snppopup-welcome','welcome');}}});/*]]>*/</script><script type="text/javascript">var qpprFrontData={"linkData":[],"siteURL":"http:\/\/www.javacodegeeks.com","siteURLq":"http:\/\/www.javacodegeeks.com"};</script><script type="text/javascript" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/qppr_frontend_script.js"></script><script type="text/javascript">var mc4wp_vars={"ajaxurl":"http:\/\/www.javacodegeeks.com\/wp-admin\/admin-ajax.php?mc4wp_action=subscribe","ajaxloader":{"enabled":true,"imgurl":"http:\/\/www.javacodegeeks.com\/wp-content\/plugins\/mailchimp-for-wp-pro\/assets\/img\/ajax-loader.gif"}};</script><script type="text/javascript">/*<![CDATA[*/jQuery(function(){$foobar({"height":{"bar":50,"button":30},"width":{"left":"0px","center":"0px","right":"*","button":"80px"},"position":{"ignoreOffsetMargin":false,"bar":"top","button":"right","social":"left"},"display":{"type":"onscroll","delay":0,"speed":100,"backgroundColor":"#326693","border":"solid 3px #ffffff","theme":{"bar":"x-white"},"easing":"swing","shadow":true,"adjustPageHeight":false,"rtl":false,"button":{"type":"close"}},"message":{"delay":2000,"fadeDelay":500,"random":false,"navigation":false,"scroll":{"enabled":true,"speed":50,"delay":2000,"direction":"left"},"cssClass":"__none"},"rightHtml":"<!-- /70432299/JCG_NotifBar --><div id=\'div-gpt-ad-1431445244472-0\' style=\'height:50px; width:1220px; margin-left: auto; margin-right: auto;\'><script src=\'http://a3ab771892fd198a96736e50.javacodegeeks.netdna-cdn.com/wp-content/uploads/fbDFP.js\'/></div>"});jQuery(window).scroll(function(){if(jQuery(this).width()>1220){if(jQuery(this).scrollTop()>0){jQuery('.x-white').slideDown(100);}else{jQuery('.x-white').slideUp(100);}}});jQuery(window).resize(function(){if(jQuery(this).width()<1220){jQuery('.x-white').hide();}});});/*]]>*/</script><script type="text/javascript">/*<![CDATA[*/(function(){function addSubmittedClassToFormContainer(e){var form=e.target.form.parentNode;var className='mc4wp-form-submitted';(form.classList)?form.classList.add(className):form.className+=' '+className;}
function hideHoneypot(h){var n=document.createElement('input');n.type='hidden';n.name=h.name;n.style.display='none';n.value=h.value;h.parentNode.replaceChild(n,h);}
var forms=document.querySelectorAll('.mc4wp-form');for(var i=0;i<forms.length;i++){(function(f){var h=f.querySelector('input[name="_mc4wp_required_but_not_really"]');if(h){hideHoneypot(h);}
var b=f.querySelector('[type="submit"], [type="image"]');if(b.addEventListener){b.addEventListener('click',addSubmittedClassToFormContainer);}else{b.attachEvent('click',addSubmittedClassToFormContainer);}})(forms[i]);}})();/*]]>*/</script><script type="text/javascript" src="./Google Services Authentication in App Engine, Part 1 _ Java Code Geeks_files/single.include-footer.84923a.js"></script><iframe frameborder="0" scrolling="no" style="border: 0px; display: none; background-color: transparent;"></iframe><div id="GOOGLE_INPUT_CHEXT_FLAG" input="null" input_stat="{&quot;tlang&quot;:true,&quot;tsbc&quot;:true,&quot;pun&quot;:true,&quot;mk&quot;:false,&quot;ss&quot;:true}" style="display: none;"></div><form id="gclp-frame-form" target="gclp-frame" method="post" style="display: none;"></form></body></html>