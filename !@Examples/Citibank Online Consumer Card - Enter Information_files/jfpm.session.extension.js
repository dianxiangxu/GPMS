CJW.jfp.session={extension:{}};CJW.jfp.session.extension.impl={ready:false,tm1ID:"",tm2ID:"",tm1TS:"",tm2TS:"",warnlockTS:"",extensionCounter:0,cancelExtension:false,lastExtensionTS:"",_getConfig:function(a){if(typeof CJW.jfp.session.extension.config!=="undefined"&&typeof CJW.jfp.session.extension.config[a]!=="undefined"){return CJW.jfp.session.extension.config[a]}else{return false}},_hasQueryParams:function(a){return(typeof a!=="undefined"&&a!==""&a.indexOf("?")!=-1)},_getTimeStamp:function(){return new Date().getTime().toString()},_getTimeDiff:function(a){if(typeof a!=="undefined"&&a===""){return 0}return new Date().getTime()-a.getTime()},_createWidget:function(){var a=this;if((this._getConfig("useNative")===false)&&(this._getConfig("showUI")===true)){$jq("<div></div>").appendTo("body").attr({id:"JFPNav-sessionExtension","class":"jfpw-hidden"}).append('<div class="" aria-live="assertive" aria-atomic="false" aria-relevant="additions"><div class="jfpw-confirm-sessionHeader"></div><div class="jfpw-confirm-sessionTextContainer"> <span class="jfpw-confirm-negErrIcon"></span><div class="jfpw-confirm-sessionText"></div></div><div class="jfpw-confirm-sessionSubText"></div></div>');$jq("#JFPNav-sessionExtension").jfpwidget(new CJW.jfp.widget.Confirm({wrapperSet:"#JFPNav-sessionExtension"},{ok:{label:a._getConfig("extension_button_ok"),callback:"",value:true},cancel:{label:a._getConfig("extension_button_cancel"),callback:"",value:false}},{}));$jq(".jfpw-confirm-sessionHeader").html("<h1>"+this._getConfig("extension_title")+"<h1>");$jq(".jfpw-confirm-sessionText").html(this._getConfig("extension_question"));$jq(".jfpw-confirm-sessionSubText").html(this._getConfig("extension_description"))}},_startTM1Timer:function(){clearTimeout(this.tm1ID);this.tm1ID=setTimeout("CJW.jfp.session.extension.impl.getMoreTime()",(this._getConfig("TmrWarn")-1)*60*1000)},_doSignOff:function(){if(typeof window.unbindAllEvents==="function"){window.unbindAllEvents()}var a=this._getConfig("SignOffLink");if(typeof ACQHSIDKEY!=="undefined"&&ACQHSIDKEY!=="undefined"){if(a.indexOf("?")==-1){window.location=a+"?ACQHSIDKEY="+ACQHSIDKEY}else{window.location=a.substring(0,a.indexOf("?"))+"?ACQHSIDKEY="+ACQHSIDKEY}}else{window.location=a+(this._hasQueryParams(a)?"&":"?")+"_ts="+this._getTimeStamp()}},_doKeepAlive:function(){var a=this._getConfig("KeepAliveLink");jQuery.ajax(a+(this._hasQueryParams(a)?"&":"?")+"_ts="+this._getTimeStamp())},_extendSession:function(){clearTimeout(this.tm2ID);if(this._getTimeDiff(this.tm2TS)<55000){this._doKeepAlive();this._startTM1Timer()}else{this.terminate()}},_cancelExtendSession:function(){clearTimeout(this.tm2ID);this.cancelExtension=true;var a=this._getTimeDiff(this.tm2TS);if(a<55000){this.tm2ID=setTimeout("CJW.jfp.session.extension.impl.terminate()",(55000-a))}else{this.terminate()}},_enableCSE:function(){var a=this;if(this._getConfig("enableCSE")===false){return}this.lastExtensionTS=new Date();jQuery(document).ready(function(){if(a._getConfig("cssClass")!==false){jQuery(document).delegate(a._getConfig("cssClass"),"click",function(){a.ecs(true)});jQuery(document).delegate(a._getConfig("cssClass"),"extend.selectmenu",function(){a.ecs(true)})}else{jQuery(document).bind("click",function(){a.ecs(true)});jQuery(document).bind("extend.selectmenu",function(){a.ecs(true)})}});jQuery(document).ajaxSuccess(function(){a.ecs(false)})},startWLTimer:function(){this.warnlockTS=new Date()},stopWLTimer:function(){this.warnlockTS=""},resetTimers:function(){this._startTM1Timer()},ecs:function(b){if(this._getConfig("blackoutPeriod")!=="undefined"&&this.cancelExtension===false){var a=new Date();var c=a.getTime()>(this.lastExtensionTS.getTime()+(this._getConfig("blackoutPeriod")*1000));if(c){this._startTM1Timer();if(b===true){this._doKeepAlive()}this.lastExtensionTS=a}}},terminate:function(){if(this._getConfig("useNative")===true){alert(this._getConfig("TimerMsg2"));this._doSignOff()}else{$jq("#JFPNav-sessionExtension").jfpwidget("close");this._doSignOff()}},getMoreTime:function(){var a=this;if(this._getTimeDiff(this.warnlockTS)>(this._getConfig("TmrWarn")-1)*60*1000+55000){this._doSignOff();return}this.stopWLTimer();window.focus();this.extensionCounter++;if(this.extensionCounter>this._getConfig("nAllowed")){this._doSignOff();return}this.tm2TS=new Date();if(this._getConfig("useNative")===true){alert(this._getConfig("TimerMsg1"));this._extendSession()}else{if(this._getConfig("showUI")===true){$jq("#JFPNav-sessionExtension").jfpwidget("open");$jq(document).bind("confirm.JFPNav-sessionExtension",function(b){$jq(document).unbind("confirm.JFPNav-sessionExtension");if(b.target.id==="JFPNav-sessionExtension"){if(b.useraction===true){a._extendSession()}else{a._cancelExtendSession()}}})}this.tm2ID=setTimeout("CJW.jfp.session.extension.impl.terminate()",55000)}},init:function(){if(typeof CJW.jfp.session.extension.config==="undefined"){return}if(this.ready===false){this._createWidget();this._enableCSE();this._startTM1Timer();this.ready=true}}};jQuery(document).ready(function(){CJW.jfp.session.extension.impl.init()});