/*!CK:1204627124!*//*1438238276,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["QQKFv"]); }

__d("RTISubscriptionManager",["ChannelConstants","ChannelManager","SystemEvents","invariant","setTimeoutAcrossTransitions","Arbiter","ErrorUtils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={SUBSCRIBE:'s',UNSUBSCRIBE:'u'},o=10000;function p(){this.$RTISubscriptionManager0={};this.$RTISubscriptionManager1=null;this.$RTISubscriptionManager2;this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager4=null;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=false;this.$RTISubscriptionManager8=false;l.subscribe(g.ON_INVALID_HISTORY,(function(){this.$RTISubscriptionManager1=true;this.forEachSubscription(function(s,t){t.setDirty(true);});this.$RTISubscriptionManager8=true;this.flush();}).bind(this));l.subscribe(g.ON_ENTER_STATE,(function(s,t){if(!this.$RTISubscriptionManager8)return;var u=/pull/.test(t.state);if(!this.$RTISubscriptionManager1&&u){this.$RTISubscriptionManager2=true;if(!this.$RTISubscriptionManager3){this.$RTISubscriptionManager3=true;k((function(){this.$RTISubscriptionManager1=this.$RTISubscriptionManager2;this.$RTISubscriptionManager3=false;if(this.$RTISubscriptionManager1)this.flush();}).bind(this),p.PULL_HINT_DELAY_MILLIS);}}else if(!u){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager1=false;}else if(u){this.$RTISubscriptionManager1=true;this.flush();}}).bind(this));i.subscribe(i.ONLINE,(function(s,t){if(!t){this.$RTISubscriptionManager1=false;this.$RTISubscriptionManager2=false;}}).bind(this));i.subscribe(i.USER,(function(s,t){this.$RTISubscriptionManager1=false;this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager0={};}).bind(this));l.subscribe(g.RTI_SESSION,(function(s,t){this.$RTISubscriptionManager4=t;this.deleteSubscriptions(function(u){return u.getState()===n.UNSUBSCRIBE;});k((function(){this.$RTISubscriptionManager8=true;if(this.$RTISubscriptionManager1===null)this.$RTISubscriptionManager1=true;this.flush();}).bind(this),p.RTI_SESSION_INIT_TIMEOUT_MILLIS);}).bind(this));l.subscribe(g.SKYWALKER,(function(s,t){var u=t.obj.topic,v={};if(t.obj.payloads===(void 0)){v.obj=[t.obj.payload];}else v.obj=t.obj.payloads;l.inform(g.getSkywalkerArbiterType(u),v);}).bind(this));}p.prototype.subscribe=function(s,t,u,v){j(s);j(t);if(Object.keys(this.$RTISubscriptionManager0).length<o){var w=s in this.$RTISubscriptionManager0,x=new r(s,t,u,v),y=new q(x);this.$RTISubscriptionManager0[s]=x;if(!w){var z=g.getSkywalkerArbiterType(s),aa=l.subscribe(z,(function(ba,event){var ca=event.obj.length;for(var da=0;da<ca;da++){var ea={topic:s,payload:event.obj[da]};m.applyWithGuard(t,this,[ea]);}}).bind(this));x.setArbiterToken(aa);}this.flush();return y;}return null;};p.prototype.unsubscribe=function(s){j(s);if(s in this.$RTISubscriptionManager0){var t=this.$RTISubscriptionManager0[s];t.setState(n.UNSUBSCRIBE);t.setDirty(true);l.unsubscribe(t.getArbiterToken());this.flush();}};p.prototype.flush=function(){if(this.isReady()&&this.$RTISubscriptionManager4&&!this.$RTISubscriptionManager5){this.$RTISubscriptionManager5=true;this.$RTISubscriptionManager6=false;var s=[],t={};if(!this.$RTISubscriptionManager7)t.reset=true;this.forEachSubscription(function(v,w){if(w.isDirty()){var x='subscriptions',y=t[x];if(!y){y=[];t[x]=y;}s.push(w);w.setDirty(false);w.setSent(false);var z={topic:w.getTopic(),state:w.getState(),context:w.getContext()};y.push(z);}});var u=(function(v){var w=v.data!=null;if(!this.$RTISubscriptionManager7&&w)this.$RTISubscriptionManager7=true;for(var x=0;x<s.length;x++){var y=s[x];y.setSent(w);y.setDirty(!w);var z=y.getSubscribeCallback();if(z!==null)m.applyWithGuard(z,this,[v]);}this.deleteSubscriptions(function(aa){return aa.getState()===n.UNSUBSCRIBE&&aa.isSent();});this.$RTISubscriptionManager5=false;if(this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=false;this.flush();}}).bind(this);if(Object.keys(t).length>0){this.$RTISubscriptionManager4.issueRequest('/sub',{},t,u);}else this.$RTISubscriptionManager5=false;}else this.$RTISubscriptionManager6=true;};p.prototype.deleteSubscriptions=function(s){j(s);var t=[];this.forEachSubscription(function(v,w){if(s.apply(this,[w]))t.push(v);});for(var u=0;u<t.length;u++)delete this.$RTISubscriptionManager0[t[u]];};p.prototype.forEachSubscription=function(s){j(s);for(var t in this.$RTISubscriptionManager0)if(this.$RTISubscriptionManager0.hasOwnProperty(t))s.apply(this,[t,this.$RTISubscriptionManager0[t]]);};p.prototype.isSubscribed=function(s){j(s);return s in this.$RTISubscriptionManager0;};p.prototype.isReady=function(){return this.$RTISubscriptionManager8&&this.$RTISubscriptionManager1!==null&&this.$RTISubscriptionManager1;};function q(s){this.$SubscriptionToken0=s;}q.prototype.unsubscribe=function(){p.unsubscribe(this.$SubscriptionToken0.getTopic());};function r(s,t,u,v){this.$SubscriptionData0=s;this.$SubscriptionData1=t;this.$SubscriptionData2=true;this.$SubscriptionData3=false;this.$SubscriptionData4=n.SUBSCRIBE;this.$SubscriptionData5=null;if(u){this.$SubscriptionData6=u;}else this.$SubscriptionData6={};if(v){this.$SubscriptionData7=v;}else this.$SubscriptionData7=null;}r.prototype.getTopic=function(){return this.$SubscriptionData0;};r.prototype.getListener=function(){return this.$SubscriptionData1;};r.prototype.getSubscribeCallback=function(){return this.$SubscriptionData7;};r.prototype.getArbiterToken=function(){return this.$SubscriptionData5;};r.prototype.setArbiterToken=function(s){this.$SubscriptionData5=s;};r.prototype.isDirty=function(){return this.$SubscriptionData2;};r.prototype.setDirty=function(s){this.$SubscriptionData2=s;};r.prototype.getState=function(){return this.$SubscriptionData4;};r.prototype.setState=function(s){this.$SubscriptionData4=s;};r.prototype.getContext=function(){return this.$SubscriptionData6;};r.prototype.isSent=function(){return this.$SubscriptionData3;};r.prototype.setSent=function(s){this.$SubscriptionData3=s;};p.PULL_HINT_DELAY_MILLIS=10000;p.RTI_SESSION_INIT_TIMEOUT_MILLIS=15*1000;Object.keys(p.prototype).forEach(function(s){p[s]=function(){var t=p;return p.prototype[s].apply(t,arguments);};});p.call(p);e.exports=p;},null);
__d("ClickPointIdentifiersDEPRECATED",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(h){return '{"ua_id":"'+h+'"}';}};e.exports=g;},null);
__d("UFIBlingItem.react",["React","NumberFormat","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"UFIBlingItem",propTypes:{contextArgs:m.object.isRequired,count:m.number.isRequired,countreduced:m.string,allowText:m.bool,className:m.string,iconClassName:m.string,itemKey:m.string},render:function(){var o=k(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),p=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),q=p,r=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||r.showSlimUFI)switch(this.props.itemKey){case 'like':if(r.showSlimUFI)q=j._({"Like":"{count} Like","Likes":"{count} Likes"},[j.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),j['enum'](this.props.count===1?'Like':'Likes',{Like:"Like",Likes:"Likes"})]);break;case 'comment':if(r.showSlimUFI)q=j._({"Comment":"{count} Comment","Comments":"{count} Comments"},[j.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),j['enum'](this.props.count===1?'Comment':'Comments',{Comment:"Comment",Comments:"Comments"})]);break;case 'reshare':if(this.props.contextArgs.reshareedu||r.showSlimUFI)q=j._({"Share":"{count} Share","Shares":"{count} Shares"},[j.param("count",r.truncateNumbers&&isNaN(this.props.countreduced)?this.props.countreduced:q),j['enum'](this.props.count===1?'Share':'Shares',{Share:"Share",Shares:"Shares"})]);break;}var s=g.createElement("span",{className:(("UFIBlingBoxText")+(r.showSlimUFI?' '+"UFIBlingBoxTextRevised":''))},q);if(!r.showSlimUFI){return (g.createElement("span",null,g.createElement("i",{className:o}),s));}else return s;}});e.exports=n;},null);
__d("UFIBlingBox.react",["React","UFIBlingItem.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"UFIBlingBox",propTypes:{contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reshares:l.number,resharesreduced:l.string},render:function(){var n=[],o='',p=this.props.contextArgs.ufiexperiments||{};if(this.props.likes){n.push(g.createElement(h,{className:((n.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:"UFIBlingBoxLikeIcon",itemKey:"like",key:"like"}));o+=(this.props.likes==1)?j._("1 like"):j._({"*":"{count} likes"},[j.param("count",this.props.likes,[0])]);o+=' ';}if(this.props.comments){n.push(g.createElement(h,{className:((n.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:"UFIBlingBoxCommentIcon",itemKey:"comment",key:"comment"}));o+=(this.props.comments==1)?j._("1 comment"):j._({"*":"{count} comments"},[j.param("count",this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(g.createElement(h,{className:((n.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:"UFIBlingBoxReshareIcon",itemKey:"reshare",key:"reshare"}));o+=(this.props.reshares==1)?j._("1 share"):j._({"*":"{count} shares"},[j.param("count",this.props.reshares,[0])]);}var q=g.createElement("a",{className:(("UFIBlingBox")+(' '+"uiBlingBox")+(' '+"feedbackBling")+(p.showSlimUFI?' '+"UFIBlingBoxRevised":'')),href:this.props.permalink,"data-ft":this.props['data-ft'],"data-comment-prelude-ref":this.props['data-comment-prelude-ref'],"aria-label":o,onClick:this.props.onClick,rel:"ignore"},n);return q;}});e.exports=m;},null);
__d("UFICommentLink.react",["Image.react","React","TrackingNodes","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"UFICommentLink",propTypes:{ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{},onClick:j};},render:function(){var p=this.props.ufiExperiments,q=k._("Comment"),r=k._("Leave a comment"),s='{ "tn": "'+i.encodeTN(i.types.COMMENT_LINK)+'", "type": 24 }',t=null;if(p.showSlimUFI)t=h.createElement(g,{className:"UFICommentLinkIcon",src:l('/images/ufi/fbfeed/comment_gray.png')});return (h.createElement("a",{className:"comment_link",href:"#",role:"button",title:r,onClick:this.props.onClick,"data-ft":s},t,q));}});e.exports=o;},null);
__d("UFICollapse",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='ufi/collapse';function i(l){return (""+h+"/"+l);}function j(l,m){g.inform(i(l),m);}var k={show:function(l){j(l,{action:'show'});},hide:function(l){j(l,{action:'hide'});},toggle:function(l){j(l,{action:'toggle'});},subscribe:function(l,m){return g.subscribe(i(l),function(n,o){return m(o);});}};e.exports=k;},null);
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;},null);
__d("UFILikeLink.react",["React","Image.react","TrackingNodes","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.PropTypes,o=g.createClass({displayName:"UFILikeLink",propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p,q){p.preventDefault();this.props.onClick(p,q);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showSlimUFI?k._("Like"):k._("Unlike"),r=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),s=this.props.likeAction?k._("Like this"):k._("Unlike this"),t=null;if(p.showSlimUFI)t=g.createElement(h,{className:"UFILikeLinkIcon",src:this.props.likeAction?l('/images/ufi/fbfeed/like_gray.png'):l('/images/ufi/fbfeed/liked.png')});return (g.createElement("a",{className:(("UFILikeLink")+(p.showSlimUFI&&!this.props.likeAction?' '+"UFILinkBright":'')),href:"#",role:"button","aria-live":"polite",title:s,onBlur:this.props.onBlur,onClick:this.onClick,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseUp:this.props.onMouseUp,"data-ft":r},t,q));}});e.exports=o;},null);
__d("UFICommentList",["ClientIDs","KeyedCallbackManager","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l({actorID:true});function n(o){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new h();this.feedbackTargetID=o;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};k.getFeedbackTarget(this.feedbackTargetID,function(p){this.actorID=p.actorforpost;this.basePermalink=p.permalink;}.bind(this));}n.prototype.addOrUpdateComment=function(o){if(o.islocal){this.$UFICommentList0(o.id);}else this.$UFICommentList1(o.id,o.clientid,o.legacyid);i.didUpdateFeedback(this.feedbackTargetID);};n.prototype.$UFICommentList0=function(o){this.dataSource.setResource(this.count,o);this.count++;};n.prototype.$UFICommentList1=function(o,p,q){var r=p&&g.isExistingClientID(p),s=this.dataSource.getAllResources(),t={};for(var u in s){var v=s[u];t[v]=u;}if(r&&p in t){t[o]=t[p];var w=t[p];this.dataSource.setResource(w,o);}else if(!t[o]&&p)this.$UFICommentList0(o);if(q&&o in t)this.commentPermalinks[o]=this.buildCommentPermalink(o,q,t[o]);};n.prototype.addCommentIDs=function(o,p,q){var r={};for(var s=0;s<p;s++)r[o+s]=q[s]||j.unavailableCommentKey;this.dataSource.addResourcesAndExecute(r);i.didUpdateFeedback(this.feedbackTargetID);return this;};n.prototype.getComments=function(o,p,q,r){var s=[];for(var t=0;t<p;t++)s.push(o+t);var u=this.dataSource.getUnavailableResourcesFromRequest(s);if(u.length){var v=Math.min.apply(Math,u),w=Math.max.apply(Math,u),x=v,y=w-v+1;if(x<this.lastRequestedOffset||(x+y)>(this.lastRequestedOffset+this.lastRequestedLength)){this.lastRequestedOffset=x;this.lastRequestedLength=y;this.fetchComments(x,y,q);}}else this.dataSource.executeOrEnqueue(s,this.deferredCallback.bind(this,o,p,r));};n.prototype.fetchComments=function(o,p,q){};n.prototype.deferredCallback=function(o,p,q,r){};n.prototype.reset=function(){var o=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return o;};n.prototype.deleteComment=function(o){if(!(o in this.deletedComments)){this.deletedComments[o]=true;this.deletedCount++;}};n.prototype.updateCommentCount=function(o){this.count=o;this.deletedCount=0;return this;};n.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};n.prototype.getCommentCount=function(){return this.count;};n.prototype.getDeletedCount=function(){return this.deletedCount;};n.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};n.prototype.getBasePermalink=function(){return this.basePermalink;};n.prototype.buildCommentPermalink=function(o,p,q){};n.prototype.getPermalinkForComment=function(o){return this.commentPermalinks[o];};n.isValidContextPropertyForReset=function(o){return o in m;};e.exports=n;},null);
__d("UFICommentOrdering",["UFIConstants"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={inverted:function(i){switch(i){case g.UFICommentOrderingMode.RECENT_ACTIVITY:case g.UFICommentOrderingMode.RANKED_THREADED:case g.UFICommentOrderingMode.FILTERED:case g.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};e.exports=h;},null);
__d("UFIComments",["ClientIDs","ImmutableObject","UFICentralUpdates","UFIConstants","UFIInstanceState","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={},o={};function p(ea){return ea in o?o[ea]:ea;}function q(ea,fa){ea.forEach(function(ga){var ha=ga.ftentidentifier,ia=j.UFIPayloadSourceType,ja=ga.clientid,ka=false,la=Object.assign({},ga);if(ja){delete la.clientid;ka=g.isExistingClientID(ja);if(ka&&o[ja])return;}if((fa===ia.LIVE_SEND)||(fa===ia.USER_ACTION)||(fa===ia.ENDPOINT_ADD_COMMENT)||(fa===ia.ENDPOINT_EDIT_COMMENT))la.isunseen=true;if(fa===ia.ENDPOINT_COMMENT_FETCH||fa===ia.ENDPOINT_ID_COMMENT_FETCH)la.fromfetch=true;if(ka){if(n[ja].ufiinstanceid)k.updateStateField(n[ja].ufiinstanceid,'locallycomposed',ga.id,true);la.ufiinstanceid=n[ja].ufiinstanceid;o[ja]=ga.id;n[ga.id]=n[ja];delete n[ja];i.didUpdateComment(ja);}da.setComment(ga.id,new h(la));i.didUpdateComment(ga.id);i.didUpdateFeedback(ha);});}function r(ea){for(var fa=0;fa<ea.length;fa++){var ga=ea[fa];switch(ga.actiontype){case j.UFIActionType.LIKE_ACTION:if(da.getComment(ga.entidentifier))s(ga.clientid,ga.entidentifier,ga.hasviewerliked,ga.likecount);break;case j.UFIActionType.COMMENT_LIKE:s(ga.clientid,ga.commentid,ga.viewerliked,ga.likecount);break;case j.UFIActionType.DELETE_COMMENT:w(ga);break;case j.UFIActionType.LIVE_DELETE_COMMENT:x(ga);break;case j.UFIActionType.REMOVE_PREVIEW:y(ga);break;case j.UFIActionType.COMMENT_SET_SPAM:z(ga);break;case j.UFIActionType.CONFIRM_COMMENT_REMOVAL:aa(ga);break;case j.UFIActionType.TRANSLATE_COMMENT:u(ga);break;case j.UFIActionType.COMMENT_LIKECOUNT_UPDATE:t(ga);break;}}}function s(ea,fa,ga,ha){var ia=da.getComment(fa);if(ia){var ja={},ka=ea&&g.isExistingClientID(ea);if(!ka){ja.hasviewerliked=ga;ja.likecount=ha;}ja.likeconfirmhash=m(0,1024);ca(fa,ja);}}function t(ea){var fa=da.getComment(ea.commentid);if(fa&&ea.hasviewerliked===fa.hasviewerliked){var ga={likecount:ea.likecount,likeconfirmhash:m(0,1024)};ca(ea.commentid,ga);}}function u(ea){var fa=ea.commentid,ga=da.getComment(fa);if(ga){var ha={translatedbody:ea.translatedbody,translatorapp:ea.translatorapp};ca(fa,ha);}}function v(ea){var fa={reportLink:ea.reportLink,commenterIsFOF:ea.commenterIsFOF,userIsMinor:ea.userIsMinor,giveFeedbackLink:ea.giveFeedbackLink};return fa;}function w(ea){var fa=da.getComment(ea.commentid);ba(fa,j.UFIStatus.DELETED);}function x(ea){var fa=da.getComment(ea.commentid);if(fa&&fa.status!==j.UFIStatus.DELETED)ba(fa,j.UFIStatus.LIVE_DELETED);}function y(ea){ca(ea.commentid,{attachment:null});}function z(ea){var fa=da.getComment(ea.commentid),ga=ea.shouldHideAsSpam?j.UFIStatus.SPAM_DISPLAY:null;ba(fa,ga);}function aa(ea){ca(ea.commentid,v(ea));}function ba(ea,fa){ca(ea.id,{priorstatus:ea.status,status:fa});}function ca(ea,fa){var ga=da.getComment(ea)||new h({});da.setComment(ea,h.set(ga,fa));i.didUpdateComment(ga.id);i.didUpdateFeedback(ga.ftentidentifier);}var da={getComment:function(ea){if(ea===j.unavailableCommentKey)return null;return n[p(ea)];},setComment:function(ea,fa){l(fa instanceof h);n[p(ea)]=fa;},resetComments:function(ea){for(var fa in ea)delete n[p(fa)];}};i.subscribe('update-comments',function(ea,fa){if(fa.comments&&fa.comments.length)q(fa.comments,fa.payloadsource);});i.subscribe('update-actions',function(ea,fa){if(fa.actions&&fa.actions.length)r(fa.actions);});e.exports=da;},null);
__d("UFIReplyCommentList",["ActorURI","JSLogger","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFIComments","UFIConstants","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={},p=h.create('ufi_reply_comment_list');for(var q in k)if(k.hasOwnProperty(q))s[q]=k[q];var r=k===null?null:k.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=k;s.getCommentList=function(u,v){if(!o[v])o[v]=new s(u,v);return o[v];};s.resetWithContext=function(u,v,w){var x=o[v];if(!x)return;x.reset();for(var y in w)if(this.isValidContextPropertyForReset(y))x[y]=w[y];};function s(u,v){k.call(this,u);this.parentCommentID=v;}s.prototype.fetchComments=function(u,v,w){var x={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[u],lengths:[v],feed_context:w?w.feedContext:null};if(!w||!w.viewAs)x[g.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/reply_fetch.php',x);};s.prototype.deferredCallback=function(u,v,w,x){var y={};for(var z=0;z<v;z++){var aa=l.getComment(x[u+z]);if(aa)y[u+z]=aa;}w(y);};s.prototype.reset=function(){var u=r.reset.call(this),v={};for(var w in u){var x=u[w];v[x]=true;}l.resetComments(v);};s.prototype.getParentCommentID=function(){return this.parentCommentID;};s.prototype.buildCommentPermalink=function(u,v,w){if(!this.basePermalink)return null;var x=this.getParentCommentID().split("_"),y=v;if(x.length===2){y=x[1];}else p.error("Bad reply comment ID: "+this.getParentCommentID());return (new n(this.basePermalink).addQueryData({comment_id:y,reply_comment_id:v,total_comments:this.count}).toString());};i.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:i.IMMEDIATE}});function t(u){var v=l.getComment(u.commentid),w=v.id,x=v.ftentidentifier,y=v.parentcommentid;if(!y)return;if(v.status!==m.UFIStatus.DELETED&&v.status!==m.UFIStatus.FAILED_ADD)s.getCommentList(x,y).deleteComment(w);}j.subscribe('update-actions',function(u,v){if(v.actions&&v.actions.length)for(var w=0;w<v.actions.length;w++){var x=v.actions[w];switch(x.actiontype){case m.UFIActionType.DELETE_COMMENT:t(x);break;}}});j.subscribe('update-comment-lists',function(u,v){var w=v.commentlists;if(w&&w.replies&&Object.keys(w).length)for(var x in w.replies){var y=w.replies[x],z=y.ftentidentifier;s.getCommentList(z,x).addCommentIDs(y.range.offset,y.range.length,y.values).updateCommentCount(y.count);}});j.subscribe('update-comments',function(u,v){if(v.comments&&v.comments.length)v.comments.forEach(function(w){var x=w.entidentifier,y=w.parentcommentid;if(!y)return;s.getCommentList(x,y).addOrUpdateComment(w);});});e.exports=s;},null);
__d("UFIToplevelCommentList",["ActorURI","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFICommentOrdering","UFIComments","UFIConstants","UFIReplyCommentList","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p={};for(var q in j)if(j.hasOwnProperty(q))s[q]=j[q];var r=j===null?null:j.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=j;s.getCommentList=function(u,v){if(!p[u])p[u]={};if(!p[u][v]){var w=new s(u,v),x=s.getCommentListsForFeedbackTargetID(u);if(x.length)w.updateCommentCount(x[0].getCommentCount());p[u][v]=w;}return p[u][v];};s.getCommentListsForFeedbackTargetID=function(u){var v=[],w=p[u]||{};for(var x in w)v.push(w[x]);return v;};s.getCommentListForFeedbackTargetID_UNSAFE=function(u){var v=s.getCommentListsForFeedbackTargetID(u);return v.length?v[0]:null;};s.resetCommentListsForFeedbackTargetID=function(u){if(!p[u])return;var v={};for(var w in p[u]){var x=p[u][w],y=x.reset();for(var z in y){var aa=y[z];v[aa]=true;}}l.resetComments(v);};s.resetCommentListsWithContext=function(u,v){if(!p[u])return;var w={};for(var x in p[u]){var y=p[u][x];for(var z in v)if(this.isValidContextPropertyForReset(z))y[z]=v[z];var aa=y.reset();for(var ba in aa){var ca=aa[ba];w[ca]=true;n.resetWithContext(u,ca,v);}}l.resetComments(w);};function s(u,v){j.call(this,u);this.orderReversed=false;if(k.inverted(v))this.orderReversed=true;this.orderingMode=v;this.forceNotPageable=false;}s.prototype.fetchComments=function(u,v,w){var x={ft_ent_identifier:this.feedbackTargetID,viewas:w&&w.viewAs?w.viewAs+'':null,source:null,offset:u,length:v,orderingmode:this.orderingMode,feed_context:w?w.feedContext:null};if(!w||!w.viewAs)x[g.PARAMETER_ACTOR]=this.actorID;h.trySend('/ajax/ufi/comment_fetch.php',x);};s.prototype.deferredCallback=function(u,v,w,x){var y={},z=u,aa=u+v-1;for(var ba=0;ba<v;ba++){var ca=this.orderReversed?aa-ba:z+ba,da=l.getComment(x[ca]);if(da)y[u+ba]=da;}w(y);};s.prototype.getOrderingMode=function(){return this.orderingMode;};s.prototype.setForceNotPageable=function(u){this.forceNotPageable=u;return this;};s.prototype.getForceNotPageable=function(){return this.forceNotPageable;};s.prototype.buildCommentPermalink=function(u,v,w){if(!this.basePermalink)return null;var x=Math.floor((this.count-w-1)/m.defaultPageSize)*m.defaultPageSize;return (new o(this.basePermalink).addQueryData({comment_id:v,offset:x,total_comments:this.count}).toString());};h.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:h.IMMEDIATE}});function t(u){var v=l.getComment(u.commentid),w=v.id,x=v.ftentidentifier,y=v.parentcommentid;if(y)return;if(u.islocal||(v.status!==m.UFIStatus.DELETED&&v.status!==m.UFIStatus.FAILED_ADD))s.getCommentListsForFeedbackTargetID(x).forEach(function(z){z.deleteComment(w);});}i.subscribe('update-actions',function(u,v){if(v.actions&&v.actions.length)for(var w=0;w<v.actions.length;w++){var x=v.actions[w];switch(x.actiontype){case m.UFIActionType.DELETE_COMMENT:t(x);break;}}});i.subscribe('update-comment-lists',function(u,v){var w=v.commentlists;if(w&&w.comments&&Object.keys(w).length)for(var x in w.comments)for(var y in w.comments[x]){var z=w.comments[x][y],aa=z.forcenotpageable===true;s.getCommentList(x,y).addCommentIDs(z.range.offset,z.range.length,z.values).setForceNotPageable(aa);}});i.subscribe('update-comments',function(u,v){if(v.comments&&v.comments.length)v.comments.forEach(function(w){if(w.parentcommentid)return;var x=w.ftentidentifier;s.getCommentListsForFeedbackTargetID(x).forEach(function(y){y.addOrUpdateComment(w);});});});i.subscribe('update-feedback',function(u,v){if(v.feedbacktargets&&v.feedbacktargets.length)v.feedbacktargets.forEach(function(w){var x=w.entidentifier,y=w.defaultcommentorderingmode,z={};if(y)z[y]=true;if(w.orderingmodes)w.orderingmodes.forEach(function(ba){z[ba.value]=true;});for(var aa in z)s.getCommentList(x,aa).updateCommentCount(w.commentcount);});});e.exports=s;},null);
__d("XUFIAddCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFIDeleteCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFIHideCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIEditCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFIActorChangeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIReactionController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/reaction\/",{});},null);
__d("UFIUserActions",["ActorURI","AsyncRequest","AsyncResponse","requireWeak","ClientIDs","ImmutableObject","Nectar","UFICentralUpdates","UFIToplevelCommentList","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","XUFITypingIndicatorController","XUFIAddCommentController","XUFIDeleteCommentController","XUFICommentLikeController","XUFIHideCommentController","XUFILikeController","XUFIEditCommentController","XUFITranslateCommentController","XUFIActorChangeController","XUFIReactionController","collectDataAttributes","errorCode","fbt","UnicodeBidi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){b.__markCompiled&&b.__markCompiled();var ha;j('CLoggerX',function(hb){ha=hb;});var ia={BAN:'ban',UNDO_BAN:'undo_ban'},ja={changeActor:function(hb,ib){r.getFeedbackTarget(hb,function(jb){o.resetCommentListsWithContext(hb,{actorID:ib});n.inform('actor-changed',null);var kb={from_actor_id:jb.actorforpost,ft_ent_identifier:hb};kb[g.PARAMETER_ACTOR]=ib;var lb=ba.getURIBuilder().getURI();s.trySend(lb,kb);});},changeCommentLike:function(hb,ib,jb){var kb=p.getComment(hb);if(kb.hasviewerliked!=ib){var lb=ka(jb.target),mb=ib?1:-1,nb={commentid:hb,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:ib,likecount:(kb.likecount||0)+mb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[nb]});r.getFeedbackTarget(kb.ftentidentifier,function(ob){var pb={};pb[g.PARAMETER_ACTOR]=ob.actorforpost;var qb=w.getURIBuilder().getURI();s.trySend(qb,Object.assign({comment_id:hb,legacy_id:kb.legacyid,like_action:ib,ft_ent_identifier:kb.ftentidentifier,source:jb.source,client_id:k.getNewClientID()},lb,pb));});}},addComment:function(hb,ib,jb,kb){r.getFeedbackTarget(hb,function(lb){var mb=ka(kb.target),nb=k.getNewClientID();if(!lb.actorforpost)return;var ob=ga.isDirectionLTR(ib)?'ltr':'rtl',pb={ftentidentifier:hb,body:{text:ib,dir:ob},author:lb.actorforpost,id:nb,islocal:true,ufiinstanceid:kb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:kb.replyid,attachment:kb.attachedsticker,photo_comment:kb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:fa._("a few seconds ago")}},qb={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:lb.actorforpost,hasviewersubscribed:true,entidentifier:hb},rb={actiontype:q.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:lb.targetfbid};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[pb],actions:[qb,rb]});var sb=null;if(kb.replyid)sb=(p.getComment(kb.replyid)).fbid;var tb;if(ha)tb=ha.getCLParamsForTarget(kb.target,sb);var ub={};ub[g.PARAMETER_ACTOR]=lb.actorforpost;var vb=u.getURIBuilder().getURI();s.trySend(vb,Object.assign({ft_ent_identifier:lb.entidentifier,comment_text:jb,source:kb.source,client_id:nb,reply_fbid:sb,parent_comment_id:kb.replyid,rootid:kb.rootid,clp:tb,attached_sticker_fbid:kb.attachedsticker?kb.attachedsticker.fbid:0,attached_photo_fbid:kb.attachedphoto?kb.attachedphoto.fbid:0,feed_context:kb.feedcontext},mb,ub));});},_hasCommentTextChanged:function(hb,ib){return hb.body&&hb.body.text!=ib;},_hasCommentPhotoChanged:function(hb,ib){return ((hb||ib)&&!(hb&&ib))||(hb&&ib&&(hb.fbid!=ib.fbid));},_hasCommentStickerChanged:function(hb,ib){return ((hb||ib)&&!(hb&&ib))||(hb&&(hb.type=="sticker")&&ib&&(hb.fbid!=ib.fbid));},editComment:function(hb,ib,jb,kb){var lb=ka(kb.target),mb=p.getComment(hb),nb=this._hasCommentTextChanged(mb,ib)||this._hasCommentPhotoChanged(mb.photo_comment,kb.attachedPhoto)||this._hasCommentStickerChanged(mb.attachment,kb.attachedSticker);mb=l.set(mb,{status:q.UFIStatus.PENDING_EDIT,body:{text:ib},editnux:null,attachment:kb.attachedSticker,photo_comment:kb.attachedPhoto});if(nb)mb=l.set(mb,{originalTimestamp:mb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:fa._("a few seconds ago")}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[mb]});r.getFeedbackTarget(mb.ftentidentifier,function(ob){var pb={};pb[g.PARAMETER_ACTOR]=ob.actorforpost;var qb=z.getURIBuilder().getURI();s.trySend(qb,Object.assign({ft_ent_identifier:mb.ftentidentifier,comment_text:jb,source:kb.source,comment_id:mb.id,parent_comment_id:mb.parentcommentid,attached_sticker_fbid:kb.attachedSticker?kb.attachedSticker.fbid:0,attached_photo_fbid:kb.attachedPhoto?kb.attachedPhoto.fbid:0},lb,pb));});},translateComment:function(hb,ib){var jb=aa.getURIBuilder().getURI();s.trySend(jb,{ft_ent_identifier:hb.ftentidentifier,comment_ids:[hb.id],source:ib.source});},setHideAsSpam:function(hb,ib,jb){var kb=ka(jb.target),lb=p.getComment(hb),mb={commentid:hb,actiontype:q.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:ib};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});var nb=x.getURIBuilder().getURI();s.trySend(nb,Object.assign({comment_id:hb,spam_action:ib,ft_ent_identifier:lb.ftentidentifier,source:jb.source},kb));},removeComment:function(hb,ib){var jb=ka(ib.target),kb=p.getComment(hb),lb={actiontype:q.UFIActionType.DELETE_COMMENT,commentid:hb,islocal:true,oneclick:ib.oneclick};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[lb]});r.getFeedbackTarget(kb.ftentidentifier,function(mb){var nb={};nb[g.PARAMETER_ACTOR]=mb.actorforpost;var ob=v.getURIBuilder().getURI();s.trySend(ob,Object.assign({comment_id:kb.id,comment_legacyid:kb.legacyid,ft_ent_identifier:kb.ftentidentifier,one_click:ib.oneclick,source:ib.source,client_id:k.getNewClientID()},jb,nb));});},banUser:function(hb,ib,jb,kb){var lb=jb?ia.BAN:ia.UNDO_BAN;s.trySend('/ajax/ufi/ban_user.php',{page_id:ib,commenter_id:hb.author,action:lb,comment_id:hb.id,client_side:true});},changeLike:function(hb,ib,jb){r.getFeedbackTarget(hb,function(kb){var lb=ka(jb.target);if(kb.hasviewerliked!==ib){var mb=ib?1:-1,nb={actiontype:q.UFIActionType.LIKE_ACTION,actorid:kb.actorforpost,hasviewerliked:ib,likecount:(kb.likecount||0)+mb,entidentifier:hb,likesentences:{current:kb.likesentences.alternate,alternate:kb.likesentences.current}},ob=gb(kb,ib?q.LikeReaction:0);n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[nb,ob]});var pb={},qb=y.getURIBuilder().getURI();pb[g.PARAMETER_ACTOR]=kb.actorforpost;s.trySend(qb,Object.assign({like_action:ib,ft_ent_identifier:hb,source:jb.source,client_id:k.getNewClientID(),rootid:jb.rootid},lb,pb));}});},changeReaction:function(hb,ib){r.getFeedbackTarget(hb,function(jb){n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[gb(jb,ib)]});var kb={};kb[g.PARAMETER_ACTOR]=jb.actorforpost;s.trySend(ca.getURIBuilder().getURI(),Object.assign({client_id:k.getNewClientID(),ft_ent_identifier:hb,reaction_type:ib},kb));});},changeSubscribe:function(hb,ib,jb){r.getFeedbackTarget(hb,function(kb){var lb=ka(jb.target);if(kb.hasviewersubscribed!==ib){var mb={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:kb.actorforpost,hasviewersubscribed:ib,entidentifier:hb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});var nb={};nb[g.PARAMETER_ACTOR]=kb.actorforpost;s.trySend('/ajax/ufi/subscribe.php',Object.assign({subscribe_action:ib,ft_ent_identifier:hb,source:jb.source,client_id:k.getNewClientID(),rootid:jb.rootid,comment_expand_mode:jb.commentexpandmode},lb,nb));}});},fetchSpamComments:function(hb,ib,jb,kb){s.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:hb,viewas:kb,comment_ids:ib,parent_comment_id:jb,source:null});},removePreview:function(hb,ib){var jb=ka(ib.target),kb={commentid:hb.id,actiontype:q.UFIActionType.REMOVE_PREVIEW};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[kb]});s.trySend('/ajax/ufi/remove_preview.php',Object.assign({comment_id:hb.id,ft_ent_identifier:hb.ftentidentifier,source:ib.source},jb));},typingChange:function(hb,ib){(new h(t.getURIBuilder().setString('feedback_id',hb).setEnum('update',ib?'start':'stop').getURI())).send();}};function ka(hb){if(!hb)return {ft:{}};var ib={ft:da(hb,['ft']).ft};m.addModuleData(ib,hb);return ib;}function la(hb){i.defaultErrorHandler(hb);}function ma(hb){var ib=hb.request.data;i.defaultErrorHandler(hb);var jb=ib.client_id||ib.comment_id,kb=p.getComment(jb),lb=(kb.status===q.UFIStatus.PENDING_EDIT)?q.UFIStatus.FAILED_EDIT:q.UFIStatus.FAILED_ADD;kb=l.setDeep(kb,{status:lb,allowRetry:na(hb),body:{mentionstext:ib.comment_text,mentionsphoto:kb.photo_comment}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[kb]});}function na(hb){var ib=hb.getError();if(hb.isBlockedAction())return false;if(hb.silentError)return true;if(ib===1357012||ib===1357006)return false;return true;}function oa(hb){var ib=hb.request.data,jb=ib.comment_id,kb=p.getComment(jb);kb=l.set(kb,{status:kb.priorstatus||null,priorstatus:(void 0)});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[kb]});}function pa(hb){var ib=hb.request.data,jb=ib.comment_id,kb=p.getComment(jb);if(ib.like_action===kb.hasviewerliked){var lb=kb.hasviewerliked?-1:1,mb={commentid:jb,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:!kb.hasviewerliked,likecount:(kb.likecount||0)+lb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});}i.defaultErrorHandler(hb);}function qa(hb){var ib=hb.request.data,jb=ib.ft_ent_identifier;r.getFeedbackTarget(jb,function(kb){if(kb.hasviewerliked===ib.like_action){var lb=kb.hasviewerliked?-1:1,mb={actiontype:q.UFIActionType.LIKE_ACTION,actorid:kb.actorforpost,hasviewerliked:!kb.hasviewerliked,likecount:(kb.likecount||0)+lb,entidentifier:jb,likesentences:{current:kb.likesentences.alternate,alternate:kb.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[mb]});}});i.defaultErrorHandler(hb);}function ra(hb){var ib=hb.request.data,jb=ib.ft_ent_identifier;r.getFeedbackTarget(jb,function(kb){if(kb.hasviewersubscribed===ib.subscribe_action){var lb={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:kb.actorforpost,hasviewersubscribed:!kb.hasviewersubscribed,entidentifier:jb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[lb]});}});i.defaultErrorHandler(hb);}var sa={'/ajax/ufi/ban_user.php':{mode:s.IMMEDIATE,error_handler:la},'/ajax/ufi/subscribe.php':{mode:s.BATCH_CONDITIONAL,error_handler:ra,batch_if:eb,batch_function:fb},'/ajax/ufi/id_comment_fetch.php':{mode:s.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:s.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:s.IMMEDIATE}},ta=u.getURIBuilder().getURI();sa[ta]={mode:s.IMMEDIATE,error_handler:ma};var ua=v.getURIBuilder().getURI();sa[ua]={mode:s.IMMEDIATE,error_handler:oa};var va=w.getURIBuilder().getURI();sa[va]={mode:s.BATCH_CONDITIONAL,error_handler:pa,batch_if:cb,batch_function:fb};var wa=x.getURIBuilder().getURI();sa[wa]={mode:s.IMMEDIATE,error_handler:oa};var xa=y.getURIBuilder().getURI();sa[xa]={mode:s.BATCH_CONDITIONAL,error_handler:qa,batch_if:db,batch_function:fb};var ya=z.getURIBuilder().getURI();sa[ya]={mode:s.IMMEDIATE,error_handler:ma};var za=aa.getURIBuilder().getURI();sa[za]={mode:s.IMMEDIATE};var ab=ba.getURIBuilder().getURI();sa[ab]={mode:s.IMMEDIATE};var bb=ca.getURIBuilder().getURI();sa[bb]={mode:s.IMMEDIATE};s.registerEndpoints(sa);function cb(hb,ib){return hb&&hb.ft_ent_identifier==ib.ft_ent_identifier&&hb.comment_id==ib.comment_id;}function db(hb,ib){return hb&&hb.ft_ent_identifier==ib.ft_ent_identifier;}function eb(hb,ib){return hb&&hb.ft_ent_identifier==ib.ft_ent_identifier;}function fb(hb,ib){return ib;}function gb(hb,ib){ib=parseInt(ib,10);var jb=!!ib,kb=hb.actorforpost,lb=hb.reactorids?hb.reactorids.slice(0):[],mb=lb.indexOf(kb),nb=0;if(jb){if(mb<0){lb.unshift(kb);nb=1;}}else if(mb>-1){lb.splice(mb,1);nb=-1;}var ob=Math.max(hb.reactioncount+nb,0),pb=hb.reactioncountreduced;if(pb&&!isNaN(pb))pb=ob.toString();var qb=hb.reactioncountmap||{},rb,sb=hb.viewerreaction;if(sb&&qb[sb]){qb[sb]["default"]=Math.max((qb[sb]["default"]||0)-1,0);rb=qb[sb].reduced;if(rb&&!isNaN(rb))qb[sb].reduced=qb[sb]["default"].toString();}if(jb&&qb[ib]){qb[ib]["default"]=(qb[ib]["default"]||0)+1;rb=qb[ib].reduced;if(rb&&!isNaN(rb))qb[ib].reduced=qb[ib]["default"].toString();}var tb=hb.userreactions||{};if(jb){tb[kb]=ib;}else delete tb[kb];return {actiontype:q.UFIActionType.REACTION,actorid:kb,entidentifier:hb.entidentifier,reactioncount:ob,reactioncountmap:qb,reactioncountreduced:pb,reactorids:lb,userreactions:tb,viewerreaction:ib};}e.exports=ja;},null);
__d("UFIShareLink.react",["Event","React","Image.react","TrackingNodes","XUISpinner.react","cx","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=h,q=p.PropTypes,r=h.createClass({displayName:"UFIShareLink",propTypes:{ufiExperiments:q.object},componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=g.listen(h.findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var s=m._("Send this to friends or post it on your timeline."),t='{ "tn": "'+j.encodeTN(j.types.SHARE_LINK)+'", "type": 25 }',u=this.props.ufiExperiments,v=null;if(u.showSlimUFI)v=h.createElement(i,{className:"UFIShareLinkIcon",src:n('/images/ufi/fbfeed/share_gray.png')});var w=null;if(this.props.rel!=='dialog')w=h.createElement(k,{className:"UFIShareLinkSpinner",showOnAsync:true});return (h.createElement("a",h.__spread({},this.props,{className:o(this.props.className,"share_action_link"),onClick:this._onClick,"data-ft":t,title:s}),v,m._("Share"),w));}});e.exports=r;},null);
__d("UFISubscribeLink.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"UFISubscribeLink",propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?h._("Get Notifications"):h._("Stop Notifications"),m=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (g.createElement("a",{className:"UFISubscribeLink",href:"#",role:"button","aria-live":"polite",title:m,onClick:this.props.onClick},l));}});e.exports=k;},null);
__d("ProfileBrowserTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={FRIEND_CHECKINS:'friendcheckins',LIKES:'likes',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};e.exports=g;},null);
__d("UFITimelineBlingBox.react",["ProfileBrowserLink","ProfileBrowserTypes","React","UFIBlingItem.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=i.createClass({displayName:"UFITimelineBlingBox",propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=m._("See who likes this"),t=i.createElement("a",{ajaxify:r.dialog,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-gt":this.props['data-gt'],"data-hover":"tooltip","data-tooltip-alignh":"right","data-tooltip-uri":this._getLikeToolTipURI(),href:r.page,key:"like",rel:"dialog",role:"button",title:s},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:"UFIBlingBoxTimelineLikeIcon",itemKey:"like"}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=m._("Show comments"),v=i.createElement("a",{"aria-label":u,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-hover":"tooltip","data-tooltip-alignh":"right",href:"#",key:"comment",onClick:this.props.commentOnClick},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:"UFIBlingBoxTimelineCommentIcon",itemKey:"comment"}));q.push(v);}if(this.props.reshares){var w=m._("Show shares"),x=this._getShareViewURI(),y=i.createElement("a",{ajaxify:x.dialog,"aria-label":w,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-hover":"tooltip","data-tooltip-alignh":"right",href:x.page,key:"reshare",rel:"async"},i.createElement(j,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:"UFIBlingBoxTimelineReshareIcon",itemKey:"reshare"}));q.push(y);}return (i.createElement("span",null,q));},_getItemClassName:function(q){return ((q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem"));},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=h.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=g.constructDialogURI(q,r),t=g.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});e.exports=p;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d("UFIPrivateReplyLink.react",["ActorURI","Link.react","PagesPrivateReplyConstants","React","XUIGrayText.react","XPagesMessagingPrivateReplyDialogController","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=i.Status,o=i.Type,p=j,q=p.PropTypes,r=j.createClass({displayName:"UFIPrivateReplyLink",propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===n.REPLYABLE){return this._renderMessageLink();}else if(s.status===n.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===n.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=g.create(l.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (j.createElement(h,{href:s,rel:"dialog"},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case n.EXPIRED:s=m._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[m['enum'](this._getActivityTypeLabel(),{comments:"comments",reviews:"reviews",posts:"posts"})]);break;case n.NOT_USER_CREATED:s=m._("Pages can't send private messages to other Pages.");break;}return (j.createElement("span",null,j.createElement(k,{shade:"light","aria-label":s,"data-hover":s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (j.createElement(h,{href:this.props.context.permalink||'#'},m._("See Response")));},_renderIndicator:function(){return (j.createElement("span",null,j.createElement(k,{shade:"light"},m._("Page responded privately"))));},_getLabel:function(){return (m._("Message"));},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case o.COMMENT_PAGE_POST:case o.COMMENT_WALL_POST:case o.COMMENT_REVIEW:return 'comments';case o.REVIEW:return 'reviews';default:return 'posts';}}});e.exports=r;},null);
__d("UFIActionLinkController",["Arbiter","BootloadedComponent.react","Bootloader","ClickPointIdentifiersDEPRECATED","CommentPrelude","CSS","DataStore","DOM","DOMQuery","JSResource","Parent","React","TrackingNodes","UFIBlingBox.react","UFICentralUpdates","UFICommentLink.react","UFICollapse","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFILikeLink.react","UFIReactionsLink.react","UFIReactionsTokens.react","UFIShareLink.react","UFISubscribeLink.react","UFITimelineBlingBox.react","UFIToplevelCommentList","UFIUserActions","UFIUIEvents","UFIPrivateReplyLink.react","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){b.__markCompiled&&b.__markCompiled();var ma;function na(pa,qa,ra){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var sa=o.scry(pa,qa)[0];if(sa){if(l.hasClass(sa,'prevent_react_replace'))return;var ta=document.createElement('span');sa.parentNode.replaceChild(ta,sa);ta.appendChild(sa);if(typeof ra==="function")ra(ta);}else var ua=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(ua);na(pa,qa,ra);},g.SUBSCRIBE_NEW);}var oa=function(pa,qa,ra,sa){this._id=qa.ftentidentifier;this._ftFBID=ra.targetfbid;this._source=qa.source;this._contextArgs=qa;this._ufiRoot=pa;this._ufiInstanceID=sa;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ra.viewercanlike||ra.hasviewerliked)this._attemptInitializeLike();if(ra.cancomment)this._attemptInitializeComment();if(ra.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();u.subscribe('feedback-updated',function(ta,ua){var va=ua.updates;if(this._id in va)this.render();}.bind(this));u.subscribe('feedback-id-changed',function(ta,ua){var va=ua.updates;if(this._id in va)this._id=va[this._id];}.bind(this));u.subscribe('instance-updated',function(ta,ua){var va=ua.updates[this._ufiInstanceID];if(va&&va.inlineShare)this.render();}.bind(this));};Object.assign(oa.prototype,{_attemptInitializeBling:function(){na(this._ufiRoot,'^form .uiBlingBox',function(pa){this._blingRoot=pa;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var pa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(pa){var qa=o.scry(pa,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=qa?true:false;var ra=o.scry(pa,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ra?true:false;}this._blingTimelineRoot=pa;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){na(this._ufiRoot,'^form .like_link',function(pa){this._likeRoot=pa;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeComment:function(){na(this._ufiRoot,'^form .comment_link',function(pa){this._commentRoot=pa;if(this._dataReady)this._renderComment();}.bind(this));},_attemptInitializeSubscribe:function(){na(this._ufiRoot,'^form .unsub_link',function(pa){this._subscribeRoot=pa;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeMessageReply:function(){na(this._ufiRoot,'^form .message_reply_action_link',function(pa){this._messageReplyRoot=pa;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}.bind(this));},_attemptInitializeShare:function(){na(this._ufiRoot,'^form .share_action_link',function(pa){this._shareRoot=pa;l.addClass(this._shareRoot,"share_root");var qa=o.scry(this._shareRoot,'.share_action_link')[0];if(qa){this._shareURI=qa.getAttribute('href');this._shareRel=qa.getAttribute('rel');this._shareNowMenuURI=m.get(qa,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();},_renderBling:function(){if(this._blingRoot)y.getFeedbackTarget(this._id,function(pa){var qa,ra=function(event){k.onBlingboxClick(event.currentTarget);w.toggle(this._ufiInstanceID);event.preventDefault();}.bind(this),sa=s.getTrackingInfo(s.types.BLINGBOX),ta=new ka(pa.permalink).addQueryData({comment_tracking:sa}).toString();if(this._contextArgs.hasReactions&&this._contextArgs.hasReactionsTokens&&pa.displayreactions){qa=r.createElement(ca,{contextArgs:this._contextArgs,"data-comment-prelude-ref":'action_link_bling',"data-ft":sa,feedback:pa,href:ta,onToggle:ra});}else{var ua=ga.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount();qa=r.createElement(t,{likes:pa.likecount,likesreduced:pa.likecountreduced,comments:ua,commentsreduced:pa.commentcountreduced,reshares:pa.sharecount,resharesreduced:pa.sharecountreduced,nfb:pa.nfbcount,permalink:ta,contextArgs:this._contextArgs,onClick:ra,"data-ft":sa,"data-comment-prelude-ref":'action_link_bling'});}this._blingBox=r.render(qa,this._blingRoot);}.bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)y.getFeedbackTarget(this._id,function(pa){var qa=s.getTrackingInfo(s.types.BLINGBOX),ra=j.getUserActionID(j.types.TIMELINE_SEE_LIKERS),sa=function(event){var va=q.byTag(event.target,"form");k.uncollapse(va,'action_link_timeline_bling');var wa=o.scry(va,'a.UFIPagerLink');if(wa.length)wa[0].click();event.preventDefault();}.bind(this),ta=ga.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),ua=r.createElement(fa,{comments:ta,commentsreduced:pa.commentcountreduced,commentOnClick:sa,contextArgs:this._contextArgs,"data-ft":qa,"data-gt":ra,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:pa.likecount,likesreduced:pa.likecountreduced,reshares:pa.sharecount,resharesreduced:pa.sharecountreduced,actorid:pa.actorid});r.render(ua,this._blingTimelineRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)y.getFeedbackTarget(this._id,function(pa){var qa=!pa.hasviewerliked,ra=function(event){var ta=qa?ia.UFIActionLinkLike:ia.UFIActionLinkUnlike;g.inform(ta,{ft_id:this._id,like_action:qa,target:event.target});ha.changeLike(this._id,qa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid});event.preventDefault();g.inform('inlineShare/reflow');}.bind(this),sa=r.createElement(aa,{onClick:ra,likeAction:qa,ufiExperiments:this._contextArgs.ufiexperiments});if(this._contextArgs.hasReactions&&pa.canviewerreact)sa=r.createElement(ba,{id:this._id,reaction:pa.viewerreaction},sa);r.render(sa,this._likeRoot);}.bind(this));},_renderComment:function(){if(!this._commentRoot)return;var pa=function(event){event.preventDefault();this._setInlineShareActive(false);}.bind(this),qa=r.createElement(v,{onClick:pa,ufiExperiments:this._contextArgs.ufiexperiments});this._commentLink=r.render(qa,this._commentRoot);},_renderMessageReply:function(){if(this._messageReplyRoot)y.getFeedbackTarget(this._id,function(pa){this._messageReplyLink=null;if(pa.allowmessagelink){var qa=r.createElement(h,{bootloadPlaceholder:r.createElement("span",null),bootloadLoader:p('UFIMessageLink.react'),feedbackSource:this._source,postID:this._id});this._messageReplyLink=r.render(qa,this._messageReplyRoot);}else if(pa.messagereplycontext){var ra=r.createElement(ja,{actorID:pa.actorforpost,activityID:this._id,context:pa.messagereplycontext});this._messageReplyLink=r.render(ra,this._messageReplyRoot);}if(!this._messageReplyLink||!r.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';n.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}.bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)y.getFeedbackTarget(this._id,function(pa){var qa=!pa.hasviewersubscribed,ra=function(event){ha.changeSubscribe(this._id,qa,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:pa.commentexpandmode});event.preventDefault();}.bind(this),sa=r.createElement(ea,{onClick:ra,subscribeAction:qa});this._subscribeLink=r.render(sa,this._subscribeRoot);}.bind(this));},_onShareClick:function(event){if(this._getInlineShareLoaded()){this._setInlineShareActive(true);event.kill();}},_renderShare:function(pa){if(!(this._shareRoot&&this._shareURI))return;var qa=!this._getInlineShareActive()&&this._shareNowMenuURI,ra=this._ufiInstanceID,sa;if(qa&&ma){sa=r.createElement(ma,r.__spread({endpoint:this._shareNowMenuURI,endpointData:{ufi_id:ra}},pa),r.createElement(da,{href:"#",ufiExperiments:this._contextArgs.ufiexperiments}));}else{var ta=null;if(qa){ta={onClick:this._bootloadShareMenu.bind(this,{openOnInit:true}),onFocus:this._bootloadShareMenu.bind(this,{focusOnInit:true}),onMouseOver:this._bootloadShareMenu.bind(this,{})};}else ta={ajaxify:new ka(this._shareURI).addQueryData({ufi_id:ra}),rel:this._shareRel,onShareClick:this._onShareClick.bind(this)};sa=r.createElement(da,r.__spread({ufiExperiments:this._contextArgs.ufiexperiments,href:"#"},ta));}this._shareLink=r.render(sa,this._shareRoot);},_bootloadShareMenu:function(pa){i.loadModules(["UFIShareNowMenu.react"],function(qa){ma=qa;this._renderShare(pa);}.bind(this));},_setInlineShareActive:function(pa){var qa=z.getKeyForInstance(this._ufiInstanceID,'inlineShare');z.updateState(this._ufiInstanceID,'inlineShare',Object.assign({},qa,{active:pa,toggling:true}));},_getInlineShareLoaded:function(){var pa=z.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(pa&&pa.loaded);},_getInlineShareActive:function(){var pa=z.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(pa&&pa.active);},_isRenderingOnTimeline:function(){if(this._source===x.UFIFeedbackSourceType.PROFILE){var pa=o.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return (pa.length>0);}return false;}});e.exports=oa;},null);
__d("InputCaretUtility",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={moveCaretToBeginning:function(h){if(typeof h.selectionStart==="number"){h.selectionStart=h.selectionEnd=0;}else if(h.createTextRange!==(void 0)){h.focus();var i=h.createTextRange();i.collapse(false);i.select();}},delayedMoveCaretToBeginning:function(h){setTimeout(function(){return g.moveCaretToBeginning(h);});}};e.exports=g;},null);
__d("LegacyMentionsInput.react",["Bootloader","CLogConfig","TypeaheadMetricsConfig","Event","InputCaretUtility","Keys","React","DOM","cx","FocusListener"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();b('FocusListener');var p=m,q=p.PropTypes,r=m.createClass({displayName:"ReactLegacyMentionsInput",propTypes:{initialData:q.object,placeholder:q.string,datasource:q.object,ref:q.string,viewOptionsTypeObjects:q.object,viewOptionsTypeObjectsOrder:q.array,hashtags:q.bool,autoflip:q.bool,onEnterSubmit:q.func,onFocus:q.func,onBlur:q.func,onTypingStateChange:q.func,onPaste:q.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(m.findDOMNode(this));},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},setSignature:function(s){var t=m.findDOMNode(this.refs.textarea);n.setAttributes(t,{value:s});k.delayedMoveCaretToBeginning(t);},submitComment:function(event){var s;if(event){s=event.target.value&&event.target.value.trim();}else{var t=m.findDOMNode(this.refs.textarea);if(t.value&&t.value!==t.placeholder)s=t.value;}s=s||'';var u={visibleValue:s,encodedValue:s};if(this._mentionsInput)u.encodedValue=this._mentionsInput.getRawValue().trim();var v=this.props.onEnterSubmit(u,event);if(v&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var s=event.nativeEvent,t=j.getKeyCode(s)==l.RETURN&&!j.$E(s).getModifiers().any,u=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&t&&!u)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(m.findDOMNode(this.refs.root));},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(s){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;g.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],function(t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha=m.findDOMNode(this.refs.textarea);new y(ha);if(h.gkResults){var ia=ga.getComment(this.props.replyCommentID),ja=ia?ia.fbid:null;v.trackMentionsInput(ha,ja);}if(this.props.onTypingStateChange){var ka=new fa(ha);ka.init();ka.subscribe('change',this.props.onTypingStateChange);}var la={autoSelect:true,renderer:t,causalElement:ha,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)la.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)la.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ma=new z(this.props.datasource,{ctor:u,options:la},{ctor:aa},m.findDOMNode(this.refs.typeahead)),na=[ba,ca];if(i.gkResults){var oa=new ea({extraData:{event_name:'mention_metric_x'}});oa.init(ma);}var pa=new da({extraData:{event_name:'mentions',from_location:'comments'}});z.initNow(ma,na,pa);this._mentionsInput=new x(s,ma,ha,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)w.set(ha,ha.value.length);if(this.props.onPaste)j.listen(ha,'paste',this.props.onPaste);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{m.findDOMNode(this.refs.textarea).focus();}catch(s){}},render:function(){var s=(("textInput")+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput"));return (m.createElement("div",{ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},m.createElement("div",{className:"highlighter"},m.createElement("div",null,m.createElement("span",{className:"highlighterContent hidden_elem"}))),m.createElement("div",{ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},m.createElement("div",{className:"wrap"},m.createElement("input",{type:"hidden",autoComplete:"off",className:"hiddenInput"}),m.createElement("div",{className:"innerWrap"},m.createElement("textarea",{ref:"textarea",name:"add_comment_text",className:s,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown})))),m.createElement("input",{type:"hidden",autoComplete:"off",className:"mentionsHidden",defaultValue:""})));}});e.exports=r;},null);
__d("PageAdminSignatureSettings",["Arbiter","AdminSignatureConstants","invariant"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$PageAdminSignatureSettings0();if(!!l)this.$PageAdminSignatureSettings1=l;if(k instanceof j){i(!!l);this.$PageAdminSignatureSettings2(k);}else if(k!==null&&k!==(void 0)){this.$PageAdminSignatureSettings3=k.isValid;if(!this.$PageAdminSignatureSettings3)return;this.$PageAdminSignatureSettings4=k.signature;this.$PageAdminSignatureSettings5=k.shouldAttachToPost;this.$PageAdminSignatureSettings6=k.shouldAttachToComment;this.$PageAdminSignatureSettings7=k.shouldAttachToMessage;this.$PageAdminSignatureSettings8=k.everPromptedUser;this.$PageAdminSignatureSettings9=k.pageID;this.$PageAdminSignatureSettingsa=k.userID;}g.subscribe(h.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,function(m,n){return this.$PageAdminSignatureSettingsb(m,n);}.bind(this));g.subscribe(h.EVENT_ADMIN_SIGNATURE_PROMPTED,function(m,n){return this.$PageAdminSignatureSettingsc(m,n);}.bind(this));}j.prototype.getIsValid=function(){"use strict";return this.$PageAdminSignatureSettings3;};j.prototype.getIsValidWithActor=function(){"use strict";return this.getIsValid()&&this.$PageAdminSignatureSettings1!==null&&this.$PageAdminSignatureSettings1===this.$PageAdminSignatureSettings9;};j.prototype.getPageID=function(){"use strict";return this.$PageAdminSignatureSettings9;};j.prototype.getUserID=function(){"use strict";return this.$PageAdminSignatureSettingsa;};j.prototype.getSignature=function(){"use strict";return this.$PageAdminSignatureSettings4;};j.prototype.getShouldAttachToPost=function(){"use strict";return this.$PageAdminSignatureSettings5;};j.prototype.getShouldAttachToComment=function(){"use strict";return this.$PageAdminSignatureSettings6;};j.prototype.getShouldAttachToMessage=function(){"use strict";return this.$PageAdminSignatureSettings7;};j.prototype.getEverPromptedUser=function(){"use strict";return this.$PageAdminSignatureSettings8;};j.prototype.$PageAdminSignatureSettings0=function(){"use strict";this.$PageAdminSignatureSettings8=false;this.$PageAdminSignatureSettings9="";this.$PageAdminSignatureSettings6=false;this.$PageAdminSignatureSettings7=false;this.$PageAdminSignatureSettings5=false;this.$PageAdminSignatureSettings4="";this.$PageAdminSignatureSettingsa="";this.$PageAdminSignatureSettings3=false;this.$PageAdminSignatureSettings1=null;};j.prototype.$PageAdminSignatureSettings2=function(k){"use strict";this.$PageAdminSignatureSettings8=k.$PageAdminSignatureSettings8;this.$PageAdminSignatureSettings9=k.$PageAdminSignatureSettings9;this.$PageAdminSignatureSettings6=k.$PageAdminSignatureSettings6;this.$PageAdminSignatureSettings7=k.$PageAdminSignatureSettings7;this.$PageAdminSignatureSettings5=k.$PageAdminSignatureSettings5;this.$PageAdminSignatureSettings4=k.$PageAdminSignatureSettings4;this.$PageAdminSignatureSettingsa=k.$PageAdminSignatureSettingsa;this.$PageAdminSignatureSettings3=k.$PageAdminSignatureSettings3;};j.prototype.$PageAdminSignatureSettingsc=function(k,l){"use strict";if(l.userID!==this.$PageAdminSignatureSettingsa)return;this.$PageAdminSignatureSettings8=true;};j.prototype.$PageAdminSignatureSettingsb=function(k,l){"use strict";if(l.userID!==this.$PageAdminSignatureSettingsa||l.pageID!==this.$PageAdminSignatureSettings9)return;switch(l.settingChanged){case h.SETTING_ATTACH_TO_POST:this.$PageAdminSignatureSettings5=l.newValue;break;case h.SETTING_ATTACH_TO_MESSAGE:this.$PageAdminSignatureSettings7=l.newValue;break;case h.SETTING_ATTACH_TO_COMMENT:this.$PageAdminSignatureSettings6=l.newValue;break;default:i(false);}};e.exports=j;},null);
__d("UFIClassNames",["cx"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ACTOR_IMAGE:"img UFIActorImage _54ru",ROW:"UFIRow",UNSEEN_ITEM:"UFIUnseenItem"};},null);
__d("UFIStickerButton.react",["Bootloader","ContextualLayerAutoFlip","Link.react","React","ReactLayeredComponentMixin","StickerInterfaces","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j,q=p.PropTypes,r=j.createClass({displayName:"UFIStickerButton",propTypes:{onStickerFlyoutShow:q.func,onStickerSelected:q.func.isRequired,onEmoticonSelected:q.func,showTooltip:q.bool,stickerInterface:q.oneOf(o(l))},mixins:[k],getDefaultProps:function(){return {showTooltip:true,stickerInterface:l.COMMENTS};},getInitialState:function(){return {renderFlyout:null,flyoutShown:false};},render:function(){var s=n._("Post a sticker");return (j.createElement(i,{"aria-label":(this.props.showTooltip)?s:null,className:"UFICommentStickerButton","data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},j.createElement("div",{ref:"icon",tabIndex:0,className:"UFICommentStickerIcon"}),this.props.children));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}g.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],function(s,t){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:j.createElement(s,{alignment:"right",behaviors:{flip:h},className:"_5e-r",contextRef:function(){return this.refs.icon;}.bind(this),onBlur:this._hideFlyout,position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:278},j.createElement("div",null,j.createElement(t,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))};}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}.bind(this));},_onStickerSelected:function(s,event){this.props.onStickerSelected(s,event);this._hideFlyout();},_onEmoticonSelected:function(s){this.props.onEmoticonSelected(s);this._hideFlyout();}});e.exports=r;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false}});},null);
__d("UFIAddComment.react",["ActorURI","Arbiter","AsyncRequest","BootloadedComponent.react","Bootloader","ClipboardPhotoUploader","CloseButton.react","DOM","DOMContainer.react","getActiveElement","Event","Focus","HTML","JSResource","Keys","LegacyMentionsInput.react","Link.react","LitestandStoryInsertionStatus","LoadingIndicator.react","PageAdminSignatureMonitor","React","ReactLayeredComponentMixin","Run","SnowflakePermalinkUtils","TrackingNodes","UFIClassNames","UFIConfig","UFIConstants","UFIImageBlock.react","UFIStickerButton.react","URI","XFeedNUXSaveSeenStateController","XUISpinner.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){b.__markCompiled&&b.__markCompiled();var qa=aa,ra=qa.PropTypes,sa=oa._("Write a comment..."),ta=oa._("Write a reply..."),ua="fcg fss UFICommentTip",va=19,wa='/ajax/ufi/upload/',xa=80,ya='/ajax/ufi/sticker_preview/',za=aa.createClass({displayName:"UFIAddComment",mixins:[ba],propTypes:{contextArgs:ra.object.isRequired,viewerActor:ra.object.isRequired,allowPhotoAttachments:ra.bool,allowStickerAttachments:ra.bool,attachedPhoto:ra.object,attachedSticker:ra.object,feedbackIsRanked:ra.bool,hide:ra.bool,initialData:ra.object,isEditing:ra.bool,isFirstComponent:ra.bool,isLastComponent:ra.bool,isSnowlift:ra.bool,isQAndA:ra.bool,mentionsDataSource:ra.object,onCancel:ra.func,onCommentSubmit:ra.func,onTypingStateChange:ra.func,replyCommentID:ra.string,showSendOnEnterTip:ra.bool,subtitle:ra.any,targetID:ra.string,withoutSeparator:ra.bool},getInitialState:function(){if(this.props.attachedPhoto)this.props.contextArgs.attachedphoto=this.props.attachedPhoto;if(this.props.attachedSticker)this.props.contextArgs.attachedsticker=this.props.attachedSticker;return {attachedPhoto:this.props.attachedPhoto?this.props.attachedPhoto:null,attachedSticker:this.props.attachedSticker?this.props.attachedSticker:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing};},_onKeyDown:function(event){if(this.props.isEditing&&q.getKeyCode(event.nativeEvent)===u.ESC)this.props.onCancel();if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){ca.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var ab=p();if(q.getKeyCode(event.nativeEvent)===u.ESC)ab.blur();},_handleUnsavedChanges:function(){var ab=a.PageTransitions;if(ab){var bb=ka.getNextURI(),cb=ab.getMostRecentURI();if(bb.getQueryData().hasOwnProperty('theater')||cb.getQueryData().hasOwnProperty('theater')||da.isPermalinkURI(bb)||da.isPermalinkURI(cb))return;var db=a.DialogNavigationStack;if(db&&db.isActiveURI(bb))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return oa._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var ab=new l(wa,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[ab.subscribe('upload_start',this._prepareForAttachedPhotoPreview),ab.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),ab.subscribe('upload_success',function(bb,cb){this._onPhotoUploadComplete(cb);}.bind(this))];ab.handlePaste(event);},_onEnterSubmit:function(ab,event){var bb=this.state.attachedPhoto||this.state.attachedSticker,cb=this.props.isEditing||bb;if(this.state.isLoadingPhoto){return false;}else if(!ab.encodedValue.trim()&&!cb)return false;ab.encodedValue=ab.encodedValue.trim();if(bb){ab.attachedPhoto=this.state.attachedPhoto;ab.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{ab.attachedPhoto=null;ab.attachedSticker=null;}this.props.onCommentSubmit(ab,event);return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(ab){ab.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=x.registerBlocker(function(){return this.state.isCommenting;}.bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)h.unsubscribe(this._remixedImageToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){var ab={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&ga.shouldShowStickerNUX){var bb=la.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new i(bb).send();if(this.state.renderStickerNUX===null)k.loadModules(["XUIAmbientNUX.react"],function(db){ab.renderStickerNUX=function(){return {ambientNUX:aa.createElement(db,{contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this._hideStickerNUX},oa._("Now you can comment with a sticker!"))};}.bind(this);}.bind(this));ga.shouldShowStickerNUX=false;ab.stickerNUXVisible=true;}var cb=this.props.contextArgs.pagesAdminSignatureSettings;if(cb)z.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,cb,cb.getShouldAttachToComment());this.setState(ab);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},render:function(){var ab=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,bb=null;if(this.props.subtitle){bb=aa.createElement("span",{className:ua},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){bb=aa.createElement("span",{className:ua},oa._("{cancel}",[oa.param("cancel",aa.createElement(w,{onClick:this.props.onCancel},oa._("Cancel")))]));}else if(this.props.isEditing){bb=aa.createElement("span",{className:ua},oa._("Press Esc to {cancel}.",[oa.param("cancel",aa.createElement(w,{onClick:this.props.onCancel},oa._("cancel")))]));}else if(this.props.showSendOnEnterTip)bb=aa.createElement("span",{className:ua},oa._("Press Enter to post."));var cb=null,db=null,eb=this.state.attachedPhoto||this.state.attachedSticker,fb=null;if(this.props.allowStickerAttachments&&!eb)db=aa.createElement(ja,{ref:"sticker_button",onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){fb=this._onPaste;var gb=eb?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",hb="UFIPhotoAttachLinkWrapper _m";cb=aa.createElement("div",{ref:"PhotoInputContainer",className:hb,"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":oa._("Attach a Photo")},aa.createElement("i",{ref:"PhotoInputControl",className:gb}));}var ib=ea.getTrackingInfo(ea.types.ADD_COMMENT_BOX),jb=pa(fa.ACTOR_IMAGE,((!ab?"hidden_elem":''))),kb=aa.createElement("div",{className:"UFIReplyActorPhotoWrapper",onClick:this.focus},aa.createElement("img",{className:jb,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name})),lb=pa(fa.ROW,((this.props.hide?"noDisplay":'')+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),mb;if(!!this.props.replyCommentID){mb=ta;}else if(this.props.isQAndA){mb=oa._("Ask a question...");}else if(this.props.source===ha.UFIFeedbackSourceType.TOPIC_CONVERSATION){mb=oa._("Discuss this topic...");}else if(!this.props.contextArgs.hasComments&&this.props.contextArgs.commentPlaceholderText){mb=this.props.contextArgs.commentPlaceholderText;}else mb=sa;var nb=this.props.contextArgs.viewoptionstypeobjects,ob=this.props.contextArgs.viewoptionstypeobjectsorder,pb=null;if(this.state.attachedSticker){var qb=this._getScaledDimensions(eb.metadata.height,eb.metadata.width),rb=null,sb=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){rb=eb.metadata.sprite_uri_2x;sb=eb.metadata.source_uri_2x;}else{rb=eb.metadata.sprite_uri;sb=eb.metadata.source_uri;}pb=aa.createElement(j,{bootloadPlaceholder:aa.createElement(ma,null),bootloadLoader:t('Sticker.react'),animationTrigger:"load_and_hover",frameCount:eb.metadata.frameCount,framesPerCol:eb.metadata.framesPerCol,framesPerRow:eb.metadata.framesPerRow,spriteURI:rb,sourceHeight:qb.height,sourceURI:sb,sourceWidth:qb.width});}else if(this.state.attachedPhoto){var tb=eb.markupPreview;if(s.isHTML(tb.markup))tb=s.replaceJSONWrapper(tb.markup).getRootNode();pb=aa.createElement(o,null,tb);if(!this.props.subtitle)bb=null;}else if(this.state.isLoadingPhoto)pb=aa.createElement(y,{color:"white",className:"UFICommentPhotoAttachedPreviewLoadingIndicator",size:"medium"});var ub,vb=this.state.attachedPhoto?this._onRemoveAttachedPhotoPreviewClicked:this._onRemoveAttachedStickerPreviewClicked;if(pb!=null){var wb=null;if(this.state.attachedSticker){wb=oa._("Remove Sticker");}else if(this.state.attachedPhoto)wb=oa._("Remove Photo");ub=aa.createElement("div",{className:"UFICommentPhotoAttachedPreview pas"},pb,aa.createElement(m,{tooltip:wb,onClick:vb}));}var xb=this.props.allowStickerAttachments?pa("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",yb,zb,ac;if(this.props.contextArgs.mentionsinput){var bc=this.props.contextArgs.mentionsinput;yb=bc.inputComponent;zb=bc.viewComponent;ac=bc.viewProps;}else yb=v;return (aa.createElement("li",{className:lb,onKeyDown:this._onKeyDown,"data-ft":ib},aa.createElement(ia,{className:xb},kb,aa.createElement("div",{className:"UFICommentContainer"},aa.createElement("div",{className:"UFIInputContainer"},aa.createElement(yb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:mb,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:zb,viewProps:ac,viewOptionsTypeObjects:nb,viewOptionsTypeObjectsOrder:ob,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:this.props.contextArgs.showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onTypingStateChange:this.props.onTypingStateChange,onPaste:fb}),aa.createElement("div",{className:"UFICommentAttachmentButtons clearfix"},cb,db)),ub,bb))));},componentDidUpdate:function(ab,bb,cb){if(!bb.attachedPhoto&&this.state.attachedPhoto||!bb.attachedSticker&&this.state.attachedSticker||!bb.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(ab.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;if(this.props.isSnowlift&&this.props.replyCommentID===null)this._remixedImageToken=h.subscribe('newRemixedImage'+this.props.contextArgs.feedbackID,function(fb,gb){var event={clipboardData:{items:[gb]}};this._onPaste(event);}.bind(this));var ab=aa.findDOMNode(this.refs.PhotoInputContainer),bb=aa.findDOMNode(this.refs.PhotoInputControl),cb=oa._("Attach a Photo"),db=n.create('input',{accept:'image/*',className:"_n",name:'file',type:'file',title:cb,'aria-label':cb});n.appendContent(bb,db);var eb=q.listen(ab,'click',function(event){k.loadModules(["FileInput","FileInputUploader","Input"],function(fb,gb,hb){var ib=new fb(ab,bb,db),jb=new gb().setAllowCrossPageTransition(true).setURI(wa).setData(this._getPhotoUploadData());ib.subscribe('change',function(event){if(ib.getValue()){this._prepareForAttachedPhotoPreview();jb.setInput(ib.getInput()).send();}}.bind(this));jb.subscribe('success',function(kb,lb){ib.clear();this._onPhotoUploadComplete(lb.response);}.bind(this));jb.subscribe('failure',function(kb,lb){ib.clear();this._onPhotoUploadComplete(lb.response);}.bind(this));r.setWithoutOutline(bb);this.setState({fileInput:ib,fileUploader:jb});}.bind(this));eb.remove();}.bind(this));},insertMention:function(ab){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(ab);},_getScaledDimensions:function(ab,bb){var cb,db,eb;if(bb>ab){eb=xa/bb;cb=ab*eb;db=bb*eb;}else{eb=xa/ab;cb=ab*eb;db=bb*eb;}return {height:Math.round(cb),width:Math.round(db)};},_getPhotoUploadData:function(){var ab=this.props.viewerActor.id,bb={profile_id:ab,target_id:this.props.targetID,source:va};bb[g.PARAMETER_ACTOR]=ab;return bb;},_onPhotoUploadComplete:function(ab){if(!this.state.isLoadingPhoto)return;var bb=ab.getPayload();if(bb&&bb.fbid){this.props.contextArgs.attachedphoto=bb;this.setState({attachedPhoto:bb,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(ab){if(!this.state.isLoadingPhoto)return;var bb=ab.getPayload();if(bb&&bb.fbid){this.props.contextArgs.attachedsticker=bb;this.setState({attachedSticker:bb,isLoadingPhoto:false});}else{k.loadModules(["Dialog"],function(cb){var db=oa._("Sticker Failed"),eb=oa._("There was a problem attaching the sticker.");new cb().setTitle(db).setBody(eb).setButtons(cb.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(ab,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(ab);return;}this.sendSticker(ab,event);},_prepareForAttachedStickerPreview:function(ab){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:true});new i(ya).setData({sticker_id:ab}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(ab,event){var bb={encodedValue:'',visibleValue:''};this.props.contextArgs.attachedsticker={fbid:ab};this.props.onCommentSubmit(bb,event);},_insertEmoticonIntoCommentText:function(ab){k.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(bb,cb,db,eb){var fb=bb.symbols[ab];if(!fb)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(fb);return;}if(!this._selectionPosition)this._selectionPosition=new eb(aa.findDOMNode(this.refs.mentionsinput.refs.textarea));var gb=this.refs.mentionsinput.refs.getTextFieldDOM(),hb=db.getInstance(gb),ib=hb.getValue(),jb=cb.insertEmoticon(fb,ib,this._selectionPosition.getPos());hb.setValue(jb.result);this._selectionPosition.setPos(jb.start,jb.end);}.bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});e.exports=za;},null);
__d("UFIAddCommentController",["Arbiter","MentionsInputUtils","Parent","UFIAddComment.react","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUIEvents","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._contextArgs.feedbackID=u;this._replyCommentID=v;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();m.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));m.subscribe('feedback-updated',function(x,y){var z=y.updates;if(this.id in z)this.render();}.bind(this));}m.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}Object.assign(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,attachedsticker:this._contextArgs.attachedsticker,feedcontext:this._contextArgs.feedcontext});this._contextArgs.attachedphoto=null;this._contextArgs.attachedsticker=null;o.getFeedbackTarget(this.id,function(u){var v=i.byTag(this.root,'form');if(v)g.inform('ufi/comment',{form:v,isinverted:u.isranked||this._contextArgs.isstreaming});if(u.showtopicconversationcreationpivot)g.inform(q.UFIActionAddComment,{feedback:u,target:event.target});}.bind(this));return false;},_onTypingStateChange:function(t,u){r.typingChange(this.id,u);},renderAddComment:function(t,u,v,w,x,y,z,aa,ba,ca){var da=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ea=null,fa=p.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;o.getFeedbackTarget(this.id,function(ga){this._contextArgs.feedbackisranked=ga.isranked;}.bind(this));return (k.createElement(j,{hide:fa,replyCommentID:this._replyCommentID,viewerActor:t,targetID:u,initialData:ea,ref:x,withoutSeparator:y,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:v,onTypingStateChange:da,showSendOnEnterTip:w,allowPhotoAttachments:aa&&!this._contextArgs.isstreaming,allowStickerAttachments:ba&&!this._contextArgs.isstreaming,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z,isQAndA:ca,isSnowlift:this._contextArgs.issnowlift,feedbackIsRanked:this._contextArgs.feedbackisranked}));},renderEditComment:function(t,u,v,w,x,y,z,aa,ba){var ca=n.getComment(v),da;if(ca.attachment)da=ca.attachment.type=='sticker'?ca.attachment:null;var ea=h.generateDataFromTextWithEntities(ca.body);return (k.createElement(j,{viewerActor:t,targetID:u,initialData:ea,onCommentSubmit:x,onCancel:y,mentionsDataSource:w,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingCommentID:v,attachedPhoto:ca.photo_comment,attachedSticker:da,allowPhotoAttachments:z,allowStickerAttachments:aa,isQAndA:ba}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');o.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)l.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.ownerid,t.mentionsdatasource,t.showsendonentertip,null,null,t.subtitle,t.allowphotoattachments,t.allowstickerattachments,t.isqanda);this._addComment=k.render(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;},null);
__d("ShareNowConstants",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={error:g._("This post could not be shared at this time. Please try again later."),success:g._("Your share was posted.")};},null);
__d("UFIAddCommentLink.react",["React","UFIClassNames","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"UFIAddCommentLink",propTypes:{'data-ft':m.string,isFirstCommentComponent:m.bool,isFirstComponent:m.bool,isLastCommentComponent:m.bool,isLastComponent:m.bool,isQAndA:m.bool,onClick:m.func},render:function(){var o=k(h.ROW,(("UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),p;if(this.props.isQAndA){p=j._("Ask a question...");}else p=j._("Write a comment...");return (g.createElement("li",{className:o,"data-ft":this.props['data-ft']},g.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},p)));}});e.exports=n;},null);
__d("UFICommentLikeCount.react",["NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=function(q,r){var s=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:q.fbid,comment_from:q.author,comment_likecount:q.likecount||0,comment_id:q.id,cache_buster:q.likeconfirmhash||0});if(r)s.addQueryData({viewas:r});return s;},p=j.createClass({displayName:"UFICommentLikeCount",propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var q=this.props.comment,r=g.formatIntegerWithDelimiter(q.likecount||0,this.props.contextArgs.numberdelimiter),s=i.LIKES,t={id:q.fbid},u=o(this.props.comment,this.props.contextArgs.viewas),v=j.createElement("i",{className:"UFICommentLikeIcon"}),w=j.createElement("span",null,r),x=(("UFICommentLikeButton")+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''));return (j.createElement("a",{ajaxify:h.constructDialogURI(s,t).toString(),className:x,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":u.toString(),href:h.constructPageURI(s,t).toString(),rel:"dialog",role:"button"},v,w));}});e.exports=p;},null);
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b('UFISpamCountImpl').module||{enabled:false};},null);
__d("UFICommentActions.react",["React","ReactFragment","TrackingNodes","UFICommentLikeCount.react","UFICommentMetadata.react","UFIConstants","UFIPrivateReplyLink.react","UFIReplyLink.react","UFISpamCount","cx","fbt","PagesPrivateReplyConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();'use strict';var r=b('PagesPrivateReplyConstants').Status,s=g,t=s.PropTypes,u=l.UFIStatus,v=' \u00b7 ',w="fsm fwn fcg UFICommentActions",x="UFIDeletedMessageIcon",y="UFIDeletedMessage",z=g.createClass({displayName:"UFICommentActions",propTypes:{comment:t.object.isRequired,contextArgs:t.object.isRequired,feedback:t.object.isRequired,hideAsSpamForPageAdmin:t.bool,markedAsSpamHere:t.bool,onCommentLikeToggle:t.func,onCommentReply:t.func,onMarkAsNotSpam:t.func,onPreviewRemove:t.func,onRetrySubmit:t.func,permalink:t.string,shareLink:t.string,shortenTimestamp:t.bool,showPermalink:t.bool,isStreaming:t.bool,showReplyLink:t.bool,viewerCanMarkNotSpam:t.bool},render:function(){var aa=this.props,ba=aa.comment,ca=aa.permalink,da=aa.feedback,ea=aa.markedAsSpamHere,fa=ba.status===u.SPAM_DISPLAY,ga=aa.showReplyLink,ha=aa.hideAsSpamForPageAdmin,ia,ja,ka,la,ma,na,oa,pa,qa=!ba.islocal&&ba.status!==u.LIVE_DELETED;if(qa){if(fa&&!ea){if(aa.viewerCanMarkNotSpam)ia=g.createElement("a",{onClick:aa.onMarkAsNotSpam,className:"UFICommentNotSpamLink",href:"#",role:"button"},q._("Unhide"));if(ha&&da.isthreaded&&ba.cancomment&&ga)na=g.createElement(n,{comment:ba,onClick:aa.onCommentReply,contextArgs:aa.contextArgs});}else{if(ba.viewercanlike){var ra=i.getTrackingInfo(ba.hasviewerliked?i.types.UNLIKE_LINK:i.types.LIKE_LINK),sa=ba.hasviewerliked?q._("Unlike this comment"):q._("Like this comment");ja=g.createElement("a",{className:"UFILikeLink","data-ft":ra,href:"#",onClick:aa.onCommentLikeToggle,role:"button",title:sa},ba.hasviewerliked?q._("Unlike"):q._("Like"));}if((this.props.contextArgs.simplereply&&this.props.feedback.cancomment)||(da.isthreaded&&ba.cancomment&&ga))na=g.createElement(n,{comment:ba,contextArgs:aa.contextArgs,onClick:aa.onCommentReply});if(ba.likecount>0)la=g.createElement(j,{comment:ba,contextArgs:aa.contextArgs});if(ba.spamcount&&o.enabled)ma=g.createElement(o,{count:ba.spamcount});if(ba.messagereply&&((ba.messagereply.hasReplyPermission&&da.actorforpost===ba.messagereply.pageID)||(ba.messagereply.status===r.ALREADY_REPLIED)))oa=g.createElement(m,{actorID:da.actorforpost,activityID:ba.id,context:ba.messagereply});}if(ba.attachment&&ba.attachment.type=="share"&&ba.canremove)pa=g.createElement("a",{href:"#",onClick:aa.onPreviewRemove,role:"button"},q._("Remove Preview"));if(this.props.contextArgs.shareablecomments)ka=g.createElement("a",{className:"share_action_link",href:aa.comment.commentshareuri,role:"button",rel:"dialog",title:q._("Share this comment")},q._("Share"));}var ta=g.createElement(k,{comment:ba,onRetrySubmit:aa.onRetrySubmit,permalink:ca,shortenTimestamp:aa.shortenTimestamp,showPermalink:aa.showPermalink}),ua;if(aa.isStreaming){ua={likeCount:la,spamCount:ma,likeToggle:ja,spamToggle:ia};}else if(da.isqanda){ua={likeCount:la,spamCount:ma,likeToggle:ja,commentReply:na,shareComment:ka,messageReply:oa,spamToggle:ia,metadata:ta,removePreview:pa};}else if(aa.contextArgs.entstream){ua={metadata:ta,likeToggle:ja,likeCount:la,commentReply:na,messageReply:oa,shareComment:ka,spamCount:ma,spamToggle:ia,removePreview:pa};}else if(da.isthreaded){ua={likeToggle:ja,commentReply:na,messageReply:oa,spamToggle:ia,removePreview:pa,shareComment:ka,likeCount:la,spamCount:ma,metadata:ta};}else ua={metadata:ta,likeToggle:ja,shareComment:ka,likeCount:la,spamCount:ma,commentReply:na,messageReply:oa,spamToggle:ia,removePreview:pa};if(ba.status===u.LIVE_DELETED){var va=g.createElement("span",{className:y},g.createElement("i",{className:x,"data-hover":"tooltip","aria-label":q._("Comment deleted")}));ua.deletionWarning=va;}var wa=true,xa={};for(var ya in ua){var za=ua[ya];if(za){xa[ya]=wa?za:h.create({MIDDOT:v,action:za});wa=false;}}return (g.createElement("div",{className:w},h.create(xa)));}});e.exports=z;},null);
__d("UFICommentAttachment.react",["BootloadedComponent.react","DOM","HTML","JSResource","LitestandShareAttachment","React","XUISpinner.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=80,q='ufi_comment_sticker',r=l.createClass({displayName:"UFICommentAttachment",propTypes:{comment:o.object.isRequired},_attachmentFromCommentData:function(s){return s.photo_comment||s.attachment;},_getScaledDimensions:function(s,t){var u,v,w;if(t>s){w=p/t;u=s*w;v=t*w;}else{w=p/s;u=s*w;v=t*w;}return {height:Math.round(u),width:Math.round(v)};},componentDidMount:function(){var s=this._attachmentFromCommentData(this.props.comment);if(s)this.renderAttachment(s);},shouldComponentUpdate:function(s,t){var u=this._attachmentFromCommentData(this.props.comment),v=this._attachmentFromCommentData(s.comment);if(!u&&!v)return false;if(!u||!v||u.markup!=v.markup){return true;}else return false;},componentDidUpdate:function(s){var t=this._attachmentFromCommentData(this.props.comment);if(t.type!=='sticker')this.renderAttachment(t);},renderAttachment:function(s){if(s&&this.refs&&this.refs.contents&&s.markup){var t=s.markup;if(i.isHTML(t.markup))t=i.replaceJSONWrapper(t.markup).getRootNode();var u=t.parentNode,v=l.findDOMNode(this.refs.contents);if(u&&u!==v)t=t.cloneNode(true);h.setContent(v,t);if(s.type=="share")k.init(v);}},renderSticker:function(s){var t=this._getScaledDimensions(s.metadata.height,s.metadata.width),u=null,v=null;if(window.devicePixelRatio&&window.devicePixelRatio>1&&s.metadata.source_uri_2x){u=s.metadata.sprite_uri_2x;v=s.metadata.source_uri_2x;}else{u=s.metadata.sprite_uri;v=s.metadata.source_uri;}return (l.createElement(g,{bootloadPlaceholder:l.createElement(m,null),bootloadLoader:j('Sticker.react'),animationTrigger:"load_and_hover",frameCount:s.metadata.frameCount,frameRate:s.metadata.frameRate,framesPerCol:s.metadata.framesPerCol,framesPerRow:s.metadata.framesPerRow,spriteURI:u,sourceHeight:t.height,sourceURI:v,sourceWidth:t.width,testID:q}));},render:function(){var s=this._attachmentFromCommentData(this.props.comment);if(s)if(s&&s.type==='sticker'){return this.renderSticker(s);}else return l.createElement("div",{ref:"contents"});return l.createElement("span",null);}});e.exports=r;},null);
__d("UFISocialContext.react",["HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=27,p=j.createClass({displayName:"UFISocialContext",propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=g.constructEndpoint(q).toString(),u=j.createElement("a",{href:q.uri,"data-hovercard":t,key:"top"},q.name),v=s.name.length+q.name.length,w;if(r===0){w=l._("Friends with {name}",[l.param("name",u)]);}else if(v<o){var x;if(r==1){x=l._("1 other");}else x=l._({"*":"{count} others"},[l.param("count",r,[0])]);w=l._("Friends with {name} and {others}",[l.param("name",u),l.param("others",this.getOthersLink(x,s,q))]);}else{var y=l._({"*":"{count} mutual friends"},[l.param("count",r+1,[0])]);w=this.getOthersLink(y,s);}return (j.createElement("span",{className:"UFICommentSocialContext"},w));},getOthersLink:function(q,r,s){var t=i.MUTUAL_FRIENDS,u={uid:r.id},v=new k('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=h.constructDialogURI(t,u).toString();return (j.createElement("a",{ajaxify:w,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":v.toString(),href:h.constructPageURI(t,u).toString(),key:"others",rel:"dialog"},q));}});e.exports=p;},null);
__d("UFICommentAuthorName.react",["Badge.react","React","TrackingNodes","UFIActor.react","UFISocialContext.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"UFICommentAuthorName",propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=i.getTrackingInfo(i.types.USER_NAME);return (h.createElement(j,{author:p,showHovercard:o.showHovercard,key:"author",focusOnMount:o.focusOnMount,"data-ft":q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?h.createElement(g,{key:"badge",size:"xsmall",type:"verified"}):null,o.socialContext?h.createElement(k,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});e.exports=n;},null);
__d("UFICommentBody.react",["Locale","React","TrackingNodes","TruncatedTextWithEntities.react","UnicodeBidi","UFICommentUtils.react","UFIConfig","UFIConstants","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=h,q=p.PropTypes,r=h.createClass({displayName:"UFICommentBody",propTypes:{commentText:q.string.isRequired,commentRanges:q.array,groupOrEventID:q.number,useWhitespacesRender:q.bool,maxLength:q.number,maxLines:q.number,socialContext:q.object},render:function(){var s=this.props,t=s.commentText,u=i.getTrackingInfo(i.types.USER_MESSAGE),v=k.isDirectionLTR(t),w=!v,x=v&&g.isRTL()?'ltr':w&&!g.isRTL()?'rtl':null,y=l.getCommentBodyInterpolator(s.groupOrEventID),z=h.createElement(j,{key:"comment-body",className:(("UFICommentBody")+(this.props.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":'')),interpolator:y,ranges:s.commentRanges,text:t,truncationPercent:n.commentTruncationPercent,maxLength:s.maxLength,maxLines:s.maxLines,renderEmoticons:m.renderEmoticons,renderEmoji:m.renderEmoji,"data-ft":u,dir:x});if(s.socialContext){z=h.createElement("div",{key:"body"},z);}else{var aa=((v&&g.isRTL()?"_5wjy":'')+(v&&g.isRTL()?' '+"_5wjz":'')+(w&&!g.isRTL()?' '+"_5wj-":'')+(w&&!g.isRTL()?' '+"_5wj_":''));z=aa?h.createElement("div",{key:"body",className:aa},z):[' ',z];}return h.createElement("span",null,z);}});e.exports=r;},null);
__d("XUIEditButton.react",["XUIAbstractGlyphButton.react","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"XUIEditButton",render:function(){var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!m)m=j._("Edit");n=m;}return (h.createElement(g,h.__spread({},this.props,{label:m,title:n,"aria-label":this.props.tooltip,"data-hover":this.props.tooltip&&'tooltip',"data-tooltip-alignh":this.props.tooltip&&'center',className:k(this.props.className,"_5upq _5upr")})));}});e.exports=l;},null);
__d("UFICommentMenu.react",["Bootloader","React","XUICloseButton.react","XUIEditButton.react","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n,o,p,q,r=k({EDIT:true,CLOSE:true}),s=h.createClass({displayName:"UFICommentMenu",propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});g.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=j;}else t=i;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (h.createElement(q,{"data-testid":w.testid,key:w.value,value:w.value},w.label));}),v=h.createElement(p,{onItemClick:this.props.onAction},u);return (h.createElement(o,h.__spread({},this.props,{alignh:"right",layerBehaviors:[n],menu:v,ref:"menu"}),h.createElement(t,{href:"#",onClick:this.onClickGuard})));}return h.createElement(t,h.__spread({},this.props,{href:"#",onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;e.exports=s;},null);
__d("UFIComment.react",["Bootloader","HovercardLink","Image.react","React","TrackingNodes","TextWithEntities.react","UFIClassNames","UFICommentActions.react","UFICommentAttachment.react","UFICommentAuthorName.react","UFICommentBody.react","UFICommentMenu.react","UFICommentUtils.react","UFIConfig","UFIConstants","UFIImageBlock.react","UFITranslationConstants","URI","XUICloseButton.react","cx","joinClasses","keyMirror","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();'use strict';var da=j,ea=da.PropTypes,fa=u.UFIStatus,ga=ba({edit:true,hide:true,remove:true}),ha='ufi_comment_close_button',ia='ufi_comment_menu_delete',ja='ufi_comment_menu_edit',ka='ufi_comment_menu_hide',la="UFITranslateLink",ma="UFITranslatedText",na="UFITranslationErrorText",oa="UFITranslateAttribution",pa="fcg",qa=null,ra=function(ua){var va=ua.status;return va===fa.FAILED_ADD||va===fa.FAILED_EDIT;};function sa(ua){return ua.commenterIsFOF!==undefined&&ua.userIsMinor!==undefined&&ua.reportLink!==undefined;}var ta=j.createClass({displayName:"UFIComment",propTypes:{authorProfiles:ea.object.isRequired,comment:ea.object.isRequired,contextArgs:ea.object.isRequired,feedback:ea.object.isRequired,'data-ft':ea.string,focusOnMount:ea.bool,hasPartialBorder:ea.bool,hideAsSpamForPageAdmin:ea.bool,isFeatured:ea.bool,isFirst:ea.bool,isFirstCommentComponent:ea.bool,isFirstComponent:ea.bool,isLast:ea.bool,isLastCommentComponent:ea.bool,isLastComponent:ea.bool,isLocallyComposed:ea.bool,isReply:ea.bool,onBlingBoxClick:ea.func,onCommentLikeToggle:ea.func,onCommentReply:ea.func,onCommentTranslate:ea.func,onEdit:ea.func,onHideAsSpam:ea.func,onInlineBan:ea.func,onMarkAsNotSpam:ea.func,onPreviewRemove:ea.func,onRemove:ea.func,onRetrySubmit:ea.func,onUndoInlineBan:ea.func,permalink:ea.string,shortenTimestamp:ea.bool,showPermalink:ea.bool,isStreaming:ea.bool,showRemoveReportMenu:ea.bool,showReplyLink:ea.bool,viewerIsAuthor:ea.bool},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onRemove(event,this);},_onInlineBan:function(event){this.props.onInlineBan(event);this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.setState({isInlineBanned:false});},_onAction:function(event,ua){var va=ua.item,wa=va.getValue();setTimeout(function(){if(wa===ga.remove){this.props.onRemove(event);}else if(wa===ga.edit){this.props.onEdit(event);}else if(wa===ga.hide)this._onHideAsSpam(event);}.bind(this),0);},_createRemoveReportMenuData:function(){return [{testid:ia,value:ga.remove,label:ca._("Delete Comment...")},{testid:ka,value:ga.hide,label:ca._("Hide Comment")}];},_createEditDeleteMenuData:function(){return [{testid:ja,value:ga.edit,label:ca._("Edit...")},{testid:ia,value:ga.remove,label:ca._("Delete...")}];},_renderCloseButton:function(){if(this.props.isStreaming)return null;var ua=this.props.comment,va=this.props.feedback,wa=null,xa=null,ya=null,za=false;if(ua.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(ua.canedit){ya=ca._("Edit or Delete");xa=this._createEditDeleteMenuData();za=true;}else{ya=ca._("Remove");wa=this.props.onRemove;}}else if(va.canremoveall)if(this.props.showRemoveReportMenu){ya=ca._("Remove or Report");xa=this._createRemoveReportMenuData();}else{ya=ca._("Remove");wa=this.props.onRemove;}}else if(ua.canreport){ya=ca._("Hide");wa=this._onHideAsSpam;}var ab=(("UFICommentCloseButton")+(wa===null&&xa===null?' '+"hdn":'')),bb=null,cb=null;if(this.props.contextArgs.viewas){bb="/ajax/profile/link_disabled_in_viewas.php";cb="dialog";wa=null;}var db=za?r.MenuType.EDIT:r.MenuType.CLOSE;return (j.createElement(r,{ajaxify:bb,className:ab,"data-testid":ha,onClick:wa,rel:cb,tooltip:ya,menuData:xa,menuType:db,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (j.createElement(y,{className:"UFICommentCloseButtonFake",tabIndex:"-1"}));},componentDidMount:function(){if(this.state.isHighlighting){var ua=j.findDOMNode(this),va=parseInt(this.props.comment.scrolltopoffset||0,10);g.loadModules(["UFIScrollHighlight"],function(wa){setTimeout(wa.actOn.bind(null,ua,va),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(ua,va){var wa=this.props,xa=this.state;return (ua.comment!==wa.comment||ua.showReplyLink!==wa.showReplyLink||ua.isFirst!==wa.isFirst||ua.isLast!==wa.isLast||ua.isFirstCommentComponent!==wa.isFirstCommentComponent||ua.isLastCommentComponent!==wa.isLastCommentComponent||ua.isFirstComponent!==wa.isFirstComponent||ua.isLastComponent!==wa.isLastComponent||ua.isFeatured!==wa.isFeatured||ua.hasPartialBorder!==wa.hasPartialBorder||va.wasHighlighted!==xa.wasHighlighted||va.isHighlighting!==xa.isHighlighting||va.markedAsSpamHere!==xa.markedAsSpamHere||va.isInlinePageDeleted!==xa.isInlinePageDeleted||va.isInlineBanned!==xa.isInlineBanned);},render:function(){var ua=this.props.comment,va=this.props.feedback,wa=ua.status===fa.DELETED,xa=ua.status===fa.LIVE_DELETED,ya=ua.status===fa.SPAM_DISPLAY,za=this.state.markedAsSpamHere,ab=this.state.isInlinePageDeleted,bb=this.props.hideAsSpamForPageAdmin,cb=this.state.isInlineBanned,db=sa(ua),eb=!ua.status&&(ua.isunseen||ua.islocal);if(!ua.status&&va.lastseentime){var fb=ua.originalTimestamp||ua.timestamp.time;eb=eb||fb>va.lastseentime;}var gb=this.props.contextArgs.markedcomments;if(gb&&gb[ua.legacyid])eb=true;var hb=((this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));if(db)if(qa){var ib,jb=null,kb=null,lb=null;if(bb){kb=cb?this._onUndoInlineBan:this._onInlineBan;if(ab){ib=ca._("You've deleted this comment so no one can see it.");}else if(za){ib=ca._("Now this is only visible to the person who wrote it and their friends.");lb=this._onDeleteSpam;jb=this._onMarkAsNotSpam;}}else if(za){ib=ca._("This comment has been hidden.");lb=this._onDeleteSpam;jb=this._onMarkAsNotSpam;}if(ib)return (j.createElement("li",{className:aa(m.ROW,hb,"UFIHide")},j.createElement(qa,{notice:ib,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:jb,onBanAction:kb,onDeleteAction:lb,isInlineBanned:cb,isInlinePageDeleted:ab,hideAsSpamForPageAdmin:bb,pageID:this.props.feedback.ownerid})));}else g.loadModules(["UFICommentRemovalControls.react"],function(pb){qa=pb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this));var mb=!wa,nb=aa(m.ROW,hb,(("UFIComment")+(ra(ua)?' '+"UFICommentFailed":'')+(wa||xa||ya?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!mb?' '+"noDisplay":'')+(mb?' '+"display":'')+(' '+"UFIComponent")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":''))),ob=this.renderComment();if(eb)nb=aa(nb,m.UNSEEN_ITEM);return (j.createElement("li",{className:nb,"data-ft":this.props['data-ft']},ob));},renderComment:function(){var ua=this.props,va=ua.comment,wa=va.body.text,xa=s.shallowCopyRanges(va.body.ranges),ya=ua.permalink,za=ua.feedback,ab=ua.authorProfiles[va.author],bb=va.status===fa.SPAM_DISPLAY,cb=va.status===fa.LIVE_DELETED,db=!(bb||cb),eb=za.canremoveall||va.hiddenbyviewer;wa=s.getCommentTextWithTruncatedURIs(xa,wa);var fb=null,gb=null;if(!ua.isLocallyComposed&&!this.state.wasHighlighted){gb=u.commentTruncationLength;fb=u.commentTruncationMaxLines;}var hb=k.getTrackingInfo(k.types.SMALL_ACTOR_PHOTO),ib=k.getTrackingInfo(k.types.USER_MESSAGE),jb=null,kb=null,lb=null,mb=null;if(va.istranslatable&&(va.translatedbody===undefined))jb=j.createElement("a",{href:"#",role:"button",title:ca._("Translate this comment"),className:la,onClick:ua.onCommentTranslate},ca._("See Translation"));if(va.translatedbody!==undefined)if(va.translatedbody!==null&&va.translatedbody.text!==''){var nb=w.BING_PAGE_URL,ob=w.BING_TRANSLATOR_APP,pb=null;if(va.translatorapp===ob){var qb=new x(nb).addQueryData({text:wa});pb=j.createElement("a",{href:qb.toString(),target:"_blank",className:pa},ca._("Translated by Bing"));}else pb=ca._("Automatically Translated");mb=j.createElement("span",{className:oa},pb);var rb=s.shallowCopyRanges(va.translatedbody.ranges),sb=va.translatedbody.text,tb=va.translatedbody.dir,ub=j.createElement("span",{key:"comment-body","data-ft":ib,dir:tb},j.createElement(l,{className:(("UFICommentBody")+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":'')),interpolator:s.getCommentBodyInterpolator(ua.feedback.grouporeventid),ranges:rb,text:sb,renderEmoticons:t.renderEmoticons,renderEmoji:t.renderEmoji}));kb=j.createElement("span",{className:ma},ub);}else lb=j.createElement("span",{className:na},ca._("No Translation Available"));var vb=j.createElement(q,{socialContext:va.socialcontext,commentText:wa,commentRanges:xa,groupOrEventID:za.grouporeventid,useWhitespacesRender:this.props.contextArgs.useWhitespacesRender,maxLength:gb,maxLines:fb}),wb=ua.contextArgs.viewas?null:h.constructEndpointWithGroupAndLocation(ab,za.grouporeventid,'ufi',va.isauthorweakreference).toString(),xb=j.createElement(p,{author:ab,authorProfiles:ua.authorProfiles,showHovercard:!!wb,isAuthorWeakReference:va.isauthorweakreference,focusOnMount:ua.focusOnMount,groupOrEventID:za.grouporeventid,isFeatured:ua.isFeatured,socialContext:va.socialcontext}),yb=null;if(va.photo_comment_status)yb=j.createElement("div",{className:"_50f8"},va.photo_comment_status);var zb=null;if(va.sticker_attachment_status)zb=j.createElement("div",{className:"_50f8"},va.sticker_attachment_status);var ac=null;if(va.status!==fa.DELETED&&!ua.isStreaming)ac=j.createElement(o,{comment:ua.comment});return (j.createElement(v,{spacing:"medium"},j.createElement("a",{href:ab.uri,"data-hovercard":wb,"data-ft":hb},j.createElement(i,{src:ab.thumbSrc,className:m.ACTOR_IMAGE,alt:""})),j.createElement("div",{className:"UFICommentContentBlock"},j.createElement("div",{className:"UFICommentContent"},xb,vb,jb,kb,mb,lb,ac),yb,zb,j.createElement(n,{comment:va,feedback:za,onBlingBoxClick:ua.onBlingBoxClick,onCommentLikeToggle:ua.onCommentLikeToggle,onCommentReply:ua.onCommentReply,onPreviewRemove:ua.onPreviewRemove,onRetrySubmit:ua.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam,permalink:ya,viewerCanMarkNotSpam:eb,shortenTimestamp:ua.shortenTimestamp,showPermalink:ua.showPermalink,isStreaming:ua.isStreaming,showReplyLink:ua.showReplyLink,contextArgs:ua.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ua.hideAsSpamForPageAdmin}),db?this._renderCloseButton():null),db?this._renderFakeCloseButton():null));}});e.exports=ta;},null);
__d("UFIContainer.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"UFIContainer",render:function(){var j=null;if(this.props.hasNub)j=g.createElement("li",{className:"UFIArrow"},g.createElement("i",null));var k=((!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (g.createElement("ul",{className:k},j,this.props.children));}});e.exports=i;},null);
__d("UFIInlineShareConfirmation.react",["React","UFIClassNames","UFIImageBlock.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=[m.object,m.string],o=g.createClass({displayName:"UFIInlineShareConfirmation",propTypes:{isError:m.bool.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,message:m.oneOfType(n).isRequired},render:function(){var p=k(h.ROW,(("UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (g.createElement("li",{className:p},g.createElement(i,null,g.createElement("i",{className:"UFIConfirmationIcon"}),this._getText())));},_getText:function(){if(this.props.message.__html)return g.createElement("span",{dangerouslySetInnerHTML:this.props.message});return g.createElement("span",null,this.props.message);}});e.exports=o;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d("XUFIReactionProfileDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/reaction\/profile\/dialog\/",{ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d("UFILikeSentenceText.react",["ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=k,q=p.PropTypes;function r(t,u,v,w){if(w.count!=null){var x=j.LIKES,y={id:t.targetfbid,actorid:t.actorid},z=[],aa;for(var ba=0;ba<u.length;ba++)if(!u[ba].count){aa=u[ba];var ca=aa.entity;z.push(ca.id);}var da=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:t.targetfbid,comment_from:t.actorforpost,seen_user_fbids:z.length?z:true});da=g.create(da,t.actorforpost);var ea,fa;if(t.displayreactions){ea=o.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();ea=g.create(ea,t.actorforpost);fa=n.getURIBuilder().setString('ft_ent_identifier',t.entidentifier).getURI();fa=g.create(fa,t.actorforpost);}else{ea=i.constructDialogURI(x,y).toString();fa=i.constructPageURI(x,y).toString();}return (k.createElement("a",{"data-testid":"n_other_people_link",className:"UFINoWrap",rel:"dialog",ajaxify:ea,href:fa,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":da.toString(),role:"button"},v));}else return h(v,w,null,null,'ufi');}var s=k.createClass({displayName:"UFILikeSentenceText",propTypes:{contextArgs:q.object.isRequired,feedback:q.object.isRequired,likeSentenceData:q.object.isRequired},render:function(){var t=this.props.feedback,u=this.props.likeSentenceData,v,w=u.aggregatedranges||u.aggregated_ranges;v=r;v=v.bind(null,t,u.ranges);return (k.createElement(l,{interpolator:v,ranges:u.ranges,aggregatedRanges:w,text:u.text}));}});e.exports=s;},null);
__d("UFILikeSentence.react",["Bootloader","LeftRight.react","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassNames","UFIImageBlock.react","UFILikeSentenceText.react","URI","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=k,t=s.PropTypes,u=k.createClass({displayName:"UFILikeSentence",propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,onOrderingModeChange:t.func,onTargetLikeToggle:t.func,orderingMode:t.string,showOrderingModeSelector:t.bool},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(v){this._bootloadSelectorModule(v);},_bootloadSelectorModule:function(v){if(v.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var w=function(x){this.setState({selectorModule:x});}.bind(this);if(v.contextArgs.entstream){g.loadModules(["UFIEntStreamOrderingModeSelector.react"],w);}else g.loadModules(["UFIOrderingModeSelector.react"],w);this.setState({bootloadedSelectorModule:true});}},render:function(){var v=this.props.feedback,w=v.likesentences.current||{},x=this.props.contextArgs.entstream,y=q(l.ROW,v.likesentences.isunseen?l.UNSEEN_ITEM:'',(("UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),z=null,aa=null;if(w.text)aa=k.createElement("div",{className:"UFILikeSentenceText"},k.createElement(n,{contextArgs:this.props.contextArgs,feedback:v,likeSentenceData:w}));var ba=this.props.contextArgs.ufiexperiments||{};if(aa&&!x&&!ba.showSlimUFI){z=k.createElement("i",{className:"UFILikeIcon"});if(v.viewercanlike&&!v.hasviewerliked)z=k.createElement("a",{className:"UFILikeThumb",href:"#",tabIndex:"-1",title:r._("Like this"),onClick:this.props.onTargetLikeToggle,role:"button","aria-label":r._("Like this")},z);}var ca=aa,da=null;if(v.seencount>0&&!x){var ea=j.GROUP_MESSAGE_VIEWERS,fa={id:v.targetfbid},ga=i.constructDialogURI(ea,fa),ha=i.constructPageURI(ea,fa),ia=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:v.entidentifier,displayed_count:v.seencount}),ja;if(v.seenbyall){ja=r._("Seen by everyone");}else ja=v.seencount==1?r._("Seen by 1"):r._("Seen by {count}",[r.param("count",v.seencount)]);da=k.createElement("a",{rel:"dialog",ajaxify:ga.toString(),href:ha.toString(),"data-hover":"tooltip","data-tooltip-alignh":"left","data-tooltip-uri":ia.toString(),className:(("UFISeenCount")+(!!w.text?' '+"UFISeenCountRight":''))},k.createElement("span",{className:"UFISeenCountIcon"}),ja);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ka=this.state.selectorModule;da=k.createElement(ka,{entstream:x,orderingmodes:v.orderingmodes,onOrderChanged:this.props.onOrderingModeChange});if(!ca)ca=k.createElement("div",null);}var la=null;if(z&&aa){la=k.createElement(m,null,z,aa,da);}else if(ca){la=k.createElement(h,{direction:h.DIRECTION.right},ca,da);}else la=da;return (k.createElement("li",{className:y},la));}});e.exports=u;},null);
__d("UFIPager.react",["LeftRight.react","React","UFIClassNames","UFIImageBlock.react","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h,o=n.PropTypes,p=h.createClass({displayName:"UFIPager",propTypes:{contextArgs:o.object.isRequired,pagerLabel:o.string.isRequired,'data-ft':o.string,countSentence:o.string,isFirstCommentComponent:o.bool,isFirstComponent:o.bool,isLastCommentComponent:o.bool,isLastComponent:o.bool,isLoading:o.bool,isReply:o.bool,isUnseen:o.bool,onPagerClick:o.func},onPagerClick:function(q){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();q.nativeEvent.prevent();},render:function(){var q=this.onPagerClick,r=m(i.ROW,this.props.isUnseen?i.UNSEEN_ITEM:'',(("UFIPagerRow")+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),s=null;if(this.props.isLoading)s=h.createElement(k,{className:"mls",background:"light",size:"small"});var t=h.createElement("a",{className:"UFIPagerLink",onClick:q,href:"#",role:"button"},this.props.pagerLabel,s),u=(("fcg")+(' '+"UFIPagerCount")),v=h.createElement("span",{className:u},this.props.countSentence),w,x=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||(x.showSlimUFI&&!this.props.isReply)){w=(h.createElement(g,{direction:g.DIRECTION.right},t,v));}else w=(h.createElement(j,null,h.createElement("a",{className:"UFIPagerIcon",onClick:q,href:"#",role:"button"}),t,v));return (h.createElement("li",{className:r,"data-ft":this.props['data-ft']},w));}});e.exports=p;},null);
__d("UFIPagerLabel",["fbt","intlList","NumberFormat"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(k,l){var m;switch(k){case j.VIEW_ONE:return g._("View 1 reply");case j.VIEW_ONE_MORE:return g._("View 1 more reply");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} replies"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more replies"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more replies");case j.VIEW_PREVIOUS:return g._("View previous replies");default:return null;}},_getCommentLabel:function(k,l){if(l.commenters)return this._getCommentLabelWithCommentSentence(k,l);var m;switch(k){case j.VIEW_ONE:return g._("View 1 comment");case j.VIEW_ONE_MORE:return g._("View 1 more comment");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} comments"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more comments"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more comments");case j.VIEW_PREVIOUS:return g._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(k,l){var m=h(l.commenters),n=l.othersCount,o=i.formatIntegerWithDelimiter(n,l.delimiter),p=i.formatIntegerWithDelimiter(l.count,l.delimiter);switch(k){case j.VIEW_ONE:return g._("View 1 comment from {names}",[g.param("names",m)]);case j.VIEW_ONE_MORE:return g._("View 1 more comment from {names}",[g.param("names",m)]);case j.VIEW_ALL:switch(n){case 0:return g._({"*":"View all {count} comments from {names}"},[g.param("count",p,[0,l.count]),g.param("names",m)]);case 1:return g._({"*":"View all {count} comments from {names} and 1 other person"},[g.param("count",p,[0,l.count]),g.param("names",m)]);default:return g._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[g.param("count",p,[0,l.count]),g.param("names",m),g.param("othersCount",o,[0,n])]);}break;case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(n){case 0:return g._("View more comments from {names}",[g.param("names",m)]);case 1:return g._("View more comments from {names} and 1 other person",[g.param("names",m)]);default:return g._({"*":"View more comments from {names} and {othersCount} others"},[g.param("names",m),g.param("othersCount",o,[0,n])]);}break;case j.VIEW_PREVIOUS:switch(n){case 0:return g._("View previous comments from {names}",[g.param("names",m)]);case 1:return g._("View previous comments from {names} and 1 other person",[g.param("names",m)]);default:return g._({"*":"View previous comments from {names} and {othersCount} others"},[g.param("names",m),g.param("othersCount",o,[0,n])]);}break;default:return null;}},_getQuestionLabel:function(k,l){var m;switch(k){case j.VIEW_ONE:return g._("View 1 question");case j.VIEW_ONE_MORE:return g._("View 1 more question");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} questions"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more questions"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more questions");case j.VIEW_PREVIOUS:return g._("View previous questions");default:return null;}},getLabel:function(k,l,m,n){if(l){return j._getReplyLabel(k,n);}else if(m){return j._getQuestionLabel(k,n);}else return j._getCommentLabel(k,n);}};e.exports=j;},null);
__d("XUFIReactionTooltipController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",required:true}});},null);
__d("UFIReplySocialSentence.react",["Badge.react","LiveTimer","React","Timestamp.react","UFIClassNames","UFIConstants","UFIImageBlock.react","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=i,r=q.PropTypes,s=' \u00b7 ',t=43200,u=i.createClass({displayName:"UFIReplySocialSentence",propTypes:{author:r.object,'data-ft':r.string,isExpanded:r.bool,isFirstComponent:r.bool,isLastComponent:r.bool,isLoading:r.bool,onClick:r.func,orderingMode:r.string,replies:r.number,shortenTimestamp:r.bool,showVerified:r.bool,timestamp:r.object},render:function(){var v=((this.props.isLoading?"UFIReplySocialSentenceLoading":'')),w=o(k.ROW,(("UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),x,y;if(this.props.isExpanded){x=this.props.replies>1?p._({"*":"Hide {count} Replies"},[p.param("count",this.props.replies,[0])]):p._("Hide 1 Reply");}else{x=this.props.replies>1?p._({"*":"{count} Replies"},[p.param("count",this.props.replies,[0])]):p._("1 Reply");if(this.props.timestamp){var z=h.getApproximateServerTime()/1000-this.props.timestamp.time;if(z<t||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)y=i.createElement("span",{className:"fcg"},s,i.createElement(j,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var aa=this.props.author,ba=aa&&!this.props.isExpanded,ca=null,da;if(ba){ca=i.createElement("img",{alt:"",src:aa.thumbSrc,className:k.ACTOR_IMAGE});var ea=null;if(this.props.showVerified)ea=i.createElement(g,{size:"xsmall",type:"verified"});da=[p._("{author}{verified_badge} replied",[p.param("author",aa.name),p.param("verified_badge",ea)]),s,x];}else da=x;var fa=null,ga=false;if(!ba||this.props.contextArgs.feedcarded){if(ba)ga=true;fa=i.createElement("i",{className:((!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(ga?' '+"UFIFeedCardedIconWithActor":''))});}return (i.createElement("li",{className:w,"data-ft":this.props['data-ft']},i.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},i.createElement(m,null,i.createElement("div",{className:((ba?"UFIReplyActorPhotoWrapper":'')+(ga?' '+"UFIFeedCardedReplyActor":''))},fa,ca),i.createElement("span",{className:v},i.createElement("span",{className:(("UFIReplySocialSentenceLinkText")+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":''))},da),y)))));}});e.exports=u;},null);
__d("UFIShareRow.react",["NumberFormat","React","UFIClassNames","UFIImageBlock.react","URI","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=h,p=o.PropTypes,q=h.createClass({displayName:"UFIShareRow",propTypes:{contextArgs:p.object.isRequired,shareCount:p.number.isRequired,targetID:p.any.isRequired,isFirstComponent:p.bool,isLastComponent:p.bool},render:function(){var r=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),s=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),t;if(this.props.shareCount>1){var u=g.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');t=n._({"*":"{count} shares"},[n.param("count",u,[0,this.props.shareCount])]);}else t=n._("1 share");var v=m(i.ROW,(("UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),w=h.createElement("a",{className:"UFIShareLink",rel:"dialog",ajaxify:r.toString(),href:s.toString()},t),x=h.createElement(j,null,h.createElement("a",{className:"UFIShareIcon",rel:"dialog",ajaxify:r.toString(),href:s.toString()}),w),y=this.props.contextArgs.ufiexperiments||{};return (h.createElement("li",{className:v},y.showSlimUFI?w:x));}});e.exports=q;},null);
__d("UFISpamPlaceholder.react",["React","UFIClassNames","XUISpinner.react","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"UFISpamPlaceholder",propTypes:{numHidden:l.number.isRequired,isLoading:l.bool,onClick:l.func},render:function(){if(this.props.isLoading)return (g.createElement("li",{className:h.ROW},g.createElement("span",{className:"UFISpamCommentWrapper"},g.createElement(i,{className:"mls",background:"light",size:"small"}))));return (g.createElement("li",{className:h.ROW},g.createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,"aria-label":j._("Show comments marked as spam")},g.createElement("span",{"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":j._({"*":"{count} hidden"},[j.param("count",this.props.numHidden,[0])]),className:"UFISpamCommentWrapper"},g.createElement("i",{className:"placeholderIcon"})))));}});e.exports=m;},null);
__d("UFI.react",["Arbiter","BootloadedComponent.react","Bootloader","CommentPrelude","DOM","DOMScroll","Event","JSResource","LogHistory","NumberFormat","Parent","React","ReactFragment","ScrollableArea.react","ScrollAwareDOM","SearchableEntry","ShareNowConstants","TrackingNodes","UFIAddCommentController","UFIAddCommentLink.react","UFIComment.react","UFICommentOrdering","UFIConstants","UFIContainer.react","UFIInlineShareConfirmation.react","UFIInstanceState","UFILikeSentence.react","UFIPager.react","UFIPagerLabel","UFIReactionsFacepile.react","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholder.react","URI","Vector","XUISpinner.react","cx","getUnboundedScrollPosition","isEmpty","focusWithinLayer","throttle","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va){b.__markCompiled&&b.__markCompiled();'use strict';var wa={TOP:'top',BOTTOM:'bottom',ALL:'all'},xa=r.createClass({displayName:"UFI",getInitialState:function(){return {repliesExpandedMap:this.props.initialRepliesExpandMap||{},loadingSpamIDs:{},isActiveLoading:{},commentIDToFocusOnMount:null,replyComposerIDToFocusOnMount:null,hasPagedToplevel:false};},getDefaultProps:function(){return {inlineShare:{}};},componentDidMount:function(){this.suppressScrolls=0;this.scrollSubscription=u.subscribe('scroll',function(){if(this.suppressScrolls>0){this.suppressScrolls--;return false;}return true;}.bind(this));if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var ya=ua(this.loadMoreComments,20);this._scrollEventListener=m.listen(window,'scroll',ya);this._resizeEventListener=m.listen(window,'resize',ya);}this._resolveFocus();if(this.props.isInitialRender){var za='replycomposer-'+this.props.feedback.permalinkcommentid;if(za in this.refs)this.refs[za].focus();}},componentWillUnmount:function(){if(this.scrollSubscription){u.unsubscribe(this.scrollSubscription);this.scrollSubscription=null;}if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentWillReceiveProps:function(ya){var za=Object.assign({},this.state.isActiveLoading),ab;for(ab in this.state.isActiveLoading){var bb=this.props.ranges[this.props.id],cb=ya.ranges[this.props.id],db=this.props.availableComments.length,eb=ya.availableComments.length;if(bb.getOffset()!=cb.getOffset()||db!=eb){var fb=(cb.getOffset()<bb.getOffset())?db:0;if(fb<eb)this.setState({commentIDToFocusOnMount:ya.availableComments[fb].id});}delete za[ab];}this.setState({isActiveLoading:za});},componentDidUpdate:function(ya,za){this._resolveFocus(ya);if(this.state.replyComposerIDToFocusOnMount in this.refs){this.refs[this.state.replyComposerIDToFocusOnMount].focus();this.setState({replyComposerIDToFocusOnMount:null});}},_resolveFocus:function(ya){if(this.props.inlineShare.toggling){var za=(ya&&ya.inlineShare)||{};j.expand(r.findDOMNode(this),false,'ufi.react');if(!za.active&&!this.props.inlineShare.active)this.onComment();var ab=this.props.inlineShare.active;if(ab){var bb=!za.loaded;setTimeout(function(){return this._focusInlineShare({shouldHighlight:bb});}.bind(this),10);}fa.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}},componentWillUpdate:function(ya,za,ab){var bb,cb;for(bb in this.state.isActiveLoading){cb=this.state.isActiveLoading[bb];if(cb!==wa.TOP)this.suppressScrolls++;}},render:function(){var ya=this.props,za=ya.feedback,ab=ya.contextArgs,bb=ya.source!=ca.UFIFeedbackSourceType.ADS,cb=null;if(ya.inlineShare.message)cb=r.createElement(ea,r.__spread({},this.props.inlineShare));var db=ab.hasReactions&&!ab.hasReactionsTokens&&za.reactioncount,eb=null;if(db)eb=r.createElement(ja,{authorProfiles:this.props.authorProfiles,feedback:za});var fb=!ya.hideOrderingModeSelector&&za.orderingmodes&&ya.commentCounts[ya.id]>=ca.minCommentsForOrderingModeSelector,gb=!db;if(gb)gb=(!sa(za.likesentences.current)||(za.seencount>0&&!ab.entstream)||fb)&&ab.search!==true&&bb;var hb=null;if(gb)hb=r.createElement(ga,{contextArgs:ab,feedback:za,onTargetLikeToggle:ya.onTargetLikeToggle,onOrderingModeChange:ya.onOrderingModeChange,orderingMode:ya.orderingMode,showOrderingModeSelector:fb});var ib=null,jb=ab.showshares&&za.sharecount&&bb;if(jb&&!ab.entstream)ib=r.createElement(la,{targetID:za.targetfbid,shareCount:za.sharecount,contextArgs:ab});if(ya.loadingComments){var kb=r.createElement("li",{className:"UFICommentsLoadingSpinnerContainer UFIFirstCommentComponent UFIRow"},r.createElement(pa,{size:"large",className:"UFICommentsLoadingSpinner"}));return (r.createElement(da,{hasNub:ab.shownub&&sb},cb,eb,hb,ib,kb));}var lb=ya.availableComments&&ya.availableComments.length&&bb;ab.hasComments=lb;var mb=null;if(lb)mb=this.renderCommentMap(ya.availableComments,ya.ranges[ya.id].getOffset());var nb=null,ob=za.cancomment,pb=ob&&ab.showaddcomment&&za.actorforpost&&ya.canAddCommentMap[ya.id];if(pb){ab.orderingmodes=za.orderingmodes;var qb=new y(null,ya.id,null,ab),rb=ya.authorProfiles[za.actorforpost];nb=qb.renderAddComment(rb,za.ownerid,za.mentionsdatasource,za.showsendonentertip,'toplevelcomposer',null,za.subtitle,za.allowphotoattachments,za.allowstickerattachments,za.isqanda);}var sb=gb||jb||lb||ob,tb=ya.hideToplevelPager?{topPager:null,bottomPager:null}:this.renderPagers(ya.id,ya.ranges[ya.id].getOffset(),ya.ranges[ya.id].getLength()),ub,vb,wb=this.applyToUFIComponents([tb.topPager],mb,[tb.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true});ub=wb[0],mb=wb[1],vb=wb[2];var xb=ub,yb=xb[0],zb=vb,ac=zb[0];tb={topPager:yb,bottomPager:ac};var bc=this._hasCommentOrderInverted()?nb:null,cc=this._hasCommentOrderInverted()?null:nb,dc=null;if(pb&&this._hasCommentOrderInverted()&&this.state.hasPagedToplevel)dc=r.createElement(z,{onClick:this.onComment,isQAndA:za.isqanda});var ec=this.applyToUFIComponents([cb,eb,hb,ib,bc,tb.topPager],mb,[tb.bottomPager,cc,dc],{isFirstComponent:true},{isLastComponent:true});ub=ec[0],mb=ec[1],vb=ec[2];var fc=ub;cb=fc[0],eb=fc[1],hb=fc[2],ib=fc[3],bc=fc[4],yb=fc[5];var gc=vb;ac=gc[0],cc=gc[1],dc=gc[2];tb={topPager:yb,bottomPager:ac};var hc=[tb.topPager,mb&&s.create(mb),tb.bottomPager];if(ab.scrollcomments&&ab.scrollwidth)hc=r.createElement("li",null,r.createElement(t,{width:ab.scrollwidth},r.createElement("ul",null,hc)));if(this.props.inlineShare.active){return (r.createElement(da,{hasNub:false},r.createElement(h,r.__spread({bootloadPlaceholder:r.createElement("span",null),bootloadLoader:n('ShareDialog.react')},this.props.inlineShare.props,{onCancel:function(){return this._resetInlineShare();}.bind(this),onPost:function(ic){i.loadModules(["ShareDialogOsricController"],function(jc){jc.onPost(ic,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}.bind(this));}.bind(this),ref:"inlineShare",renderInline:true,status:this.props.inlineShare.status}))));}else return (r.createElement(da,{hasNub:ab.shownub&&sb},cb,eb,hb,ib,bc,hc,cc,dc));},applyToUFIComponents:function(ya,za,ab,bb,cb){var db=this._applyToFirstComponent(ya,za,ab,bb,false);ya=db[0],za=db[1],ab=db[2];var eb=this._applyToFirstComponent(ab,za,ya,cb,true);ab=eb[0],za=eb[1],ya=eb[2];return [ya,za,ab];},_applyToFirstComponent:function(ya,za,ab,bb,cb){var db,eb,fb;db=cb?ya.length-1:0;eb=cb?-1:ya.length;for(fb=db;fb!=eb;fb+=cb?-1:1)if(ya[fb]){ya[fb]=r.cloneElement(ya[fb],bb);return [ya,za,ab];}var gb=Object.keys(za||{});db=cb?gb.length-1:0;eb=cb?-1:gb.length;for(fb=db;fb!=eb;fb+=cb?-1:1){var hb=gb[fb];if(za[hb]&&za[hb].props.comment&&this._shouldRenderComment(za[hb].props.comment)){za[hb]=r.cloneElement(za[hb],bb);return [ya,za,ab];}}db=cb?ab.length-1:0;eb=cb?-1:ab.length;for(fb=db;fb!=eb;fb+=cb?-1:1)if(ab[fb]){ab[fb]=r.cloneElement(ab[fb],bb);return [ya,za,ab];}return [ya,za,ab];},_focusInlineShare:function(ya){ya=ya||{};var za=r.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)ta(za);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;l.ensureVisible(za);if(ya.shouldHighlight)i.loadModules(["highlight","CSS","cx"],function(ab,bb,cb){bb.addClass(za,"_5p5");var db=function(){bb.removeClass(za,"_5p5");};ab(za,db,'#f6f7f8');});},_shouldRenderComment:function(ya){return ya.status!==ca.UFIStatus.DELETED;},renderCommentMap:function(ya,za){var ab=this.props,bb={},cb=ya.length;if(!cb)return bb;var db=ya[0].parentcommentid,eb=[],fb=function(){if(eb.length>0){var rb=function(sb,tb){var ub=this.state.loadingSpamIDs;ub[sb[0]]=true;this.setState({loadingSpamIDs:ub});ab.onSpamFetch(sb,tb);}.bind(this,eb,db);bb['spam'+eb[0]]=r.createElement(ma,{onClick:rb,numHidden:eb.length,isLoading:!!this.state.loadingSpamIDs[eb[0]]});eb=[];}}.bind(this),gb=ab.instanceid,hb=fa.getKeyForInstance(gb,'editcommentid'),ib=!!ya[0].parentcommentid;for(var jb=0;jb<cb;jb++)if(ya[jb].status==ca.UFIStatus.SPAM){eb.push(ya[jb].id);}else{fb();var kb=Math.max(ab.loggingOffset-jb-za,0),lb=ya[jb],mb;if(lb.id==hb){mb=this.renderEditCommentBox(lb);}else{var nb=jb===0,ob=jb===cb-1,pb=!ib,qb=ib&&!nb;mb=this.renderComment(lb,kb,nb,ob,pb,qb);}bb['comment'+lb.id]=mb;if(lb.status!==ca.UFIStatus.DELETED)bb['replies'+lb.id]=this.renderReplyContainer(lb);}fb();return bb;},renderReplyContainer:function(ya){var za=this.props,ab=za.commentCounts[ya.id],bb=this.state.repliesExpandedMap[ya.id],cb=!bb&&ya.interestingReplyId,db,eb;if(bb||ya.interestingReplyId){db=za.repliesMap[ya.id];eb=za.ranges[ya.id].getOffset();if(cb){var fb=db.filter(function(cc){return cc.id===ya.interestingReplyId;});if(fb.length!==1){o.getInstance('ufi').error('comment '+ya.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');db=null;}else{db=fb;eb=ya.interestingReplyOffset;}}}var gb,hb,ib;if(db){var jb=za.ranges[ya.id].getOffset(),kb=za.ranges[ya.id].getLength();if(cb){jb=eb;kb=1;}var lb=this.renderPagers(ya.id,jb,kb);gb=lb.topPager;hb=lb.bottomPager;ib=this.renderCommentMap(db,eb);}var mb=Math.max(ab-ya.spamreplycount,0),nb;if(mb&&((bb&&db&&db.length>this.props.replySocialSentenceMaxReplies)||(!bb&&!db))){var ob=bb&&!gb&&(this.isLoadingPrev(ya.id)||this.isLoadingNext(ya.id)),pb=null;if(ya.replyauthors&&ya.replyauthors.length)pb=za.authorProfiles[ya.replyauthors[0]];nb=r.createElement(ka,{contextArgs:za.contextArgs,author:pb,replies:bb?db.length:mb,shortenTimestamp:za.shortenTimestamp,timestamp:ya.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,ya.id),isLoading:ob,isExpanded:bb,showVerified:this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var qb;if(bb)if(ya.cancomment&&za.canAddCommentMap[ya.id]){var rb=false,sb=Object.keys(ib);for(var tb=sb.length-1;tb>=0;tb--){var ub=sb[tb];if(ub&&ib[ub]){rb=ib[ub].props.isAuthorReply;break;}}qb=this.renderReplyComposer(ya,!rb);}var vb;if(nb||gb||ib||hb||qb){var wb,xb,yb=this.applyToUFIComponents([nb,gb],ib,[hb,qb],{isFirstComponent:true},{isLastComponent:true});wb=yb[0],ib=yb[1],xb=yb[2];var zb=wb;nb=zb[0],gb=zb[1];var ac=xb;hb=ac[0],qb=ac[1];var bc=ya.status===ca.UFIStatus.LIVE_DELETED;vb=r.createElement(da,{isParentLiveDeleted:bc,isReplyList:true},nb,gb,ib&&s.create(ib),hb,qb);}return vb;},renderReplyComposer:function(ya,za){var ab=this.props;return (new y(null,ab.id,ya.id,ab.contextArgs)).renderAddComment(ab.authorProfiles[ab.feedback.actorforpost],ab.feedback.ownerid,ab.feedback.mentionsdatasource,false,'replycomposer-'+ya.id,za,ab.feedback.subtitle,ab.feedback.allowphotoattachments,ab.feedback.allowstickerattachments,ab.feedback.isqanda);},renderEditCommentBox:function(ya){var za=new y(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),ab=za.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,ya.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,ya),this.props.onCancelEdit,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return ab;},renderComment:function(ya,za,ab,bb,cb,db){var eb=this.props,fb=eb.feedback,gb=fb.actorforpost===ya.author,hb=fa.getKeyForInstance(this.props.instanceid,'locallycomposed'),ib=ya.islocal||hb&&hb[ya.id],jb=fb.showremovemenu||(fb.viewerid===ya.author),kb=fb.canremoveall&&fb.isownerpage&&!gb,lb=eb.source!=ca.UFIFeedbackSourceType.INTERN,mb=x.getTrackingInfo(x.types.COMMENT,za),nb=!!ya.parentcommentid,ob=!!ya.isfeatured;switch(this.props.source){case ca.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (r.createElement(h,{bootloadPlaceholder:r.createElement("span",null),bootloadLoader:n('UFITopicConversationComment.react'),isFirst:ab,isLast:bb,comment:ya,authorProfiles:this.props.authorProfiles,viewerIsAuthor:gb,feedback:fb,contextArgs:this.props.contextArgs,focusOnMount:ya.id===this.state.commentIDToFocusOnMount,isLocallyComposed:ib}));default:var pb=new na(eb.commentPermalinks[ya.id]).addQueryData({comment_tracking:mb}).toString();return (r.createElement(aa,{isFirst:ab,isLast:bb,showReplyLink:cb,hasPartialBorder:db,comment:ya,authorProfiles:this.props.authorProfiles,viewerIsAuthor:gb,feedback:fb,"data-ft":mb,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:kb,isLocallyComposed:ib,isReply:nb,isFeatured:ob,permalink:pb,shortenTimestamp:eb.shortenTimestamp,showPermalink:lb,isStreaming:eb.isStreaming,showRemoveReportMenu:jb,focusOnMount:ya.id===this.state.commentIDToFocusOnMount,onCommentLikeToggle:eb.onCommentLikeToggle.bind(null,ya),onCommentReply:this.onCommentReply.bind(this,ya),onCommentTranslate:eb.onCommentTranslate.bind(null,ya),onEdit:eb.onCommentEdit.bind(null,ya),onHideAsSpam:eb.onCommentHideAsSpam.bind(null,ya),onInlineBan:eb.onCommentInlineBan.bind(null,ya),onMarkAsNotSpam:eb.onCommentMarkAsNotSpam.bind(null,ya),onPreviewRemove:eb.onPreviewRemove.bind(null,ya),onRemove:eb.onCommentRemove.bind(null,ya),onRetrySubmit:eb.onRetrySubmit.bind(null,ya),onUndoInlineBan:eb.onCommentUndoInlineBan.bind(null,ya)}));}},_toggleReplyExpandedState:function(ya){var za=this.state.repliesExpandedMap[ya],ab=this.state.repliesExpandedMap;ab[ya]=!za;this.setState({repliesExpandedMap:ab,replyComposerIDToFocusOnMount:!za?'replycomposer-'+ya:null});},onToggleReplies:function(ya){this._toggleReplyExpandedState(ya);var za=this.state.repliesExpandedMap[ya],ab=this.props.ranges[ya].getRequestedLength();ab-=this.props.deletedCounts[ya];if(za&&ab===0){var bb=this.props.commentCounts[ya],cb=Math.min(bb,this.props.pageSize),db=bb-cb;this.onPage(ya,wa.BOTTOM,{offset:db,length:cb});}},onPage:function(ya,za,ab){var bb=this.state.hasPagedToplevel||ya===this.props.id;if(ya!==this.props.id&&!this.state.repliesExpandedMap[ya]){var cb=this.state.repliesExpandedMap;cb[ya]=true;this.setState({repliesExpandedMap:cb});}var db=Object.assign({},this.state.isActiveLoading);db[ya]=za;this.setState({isActiveLoading:db,hasPagedToplevel:bb});this.props.onChangeRange(ya,ab);},isLoadingPrev:function(ya){var za=this.props;ya=ya||za.id;var ab=za.ranges[ya].getRequestedOffset(),bb=za.ranges[ya].getOffset();return ab<bb;},isLoadingNext:function(ya){var za=this.props;ya=ya||za.id;var ab=za.ranges[ya].getRequestedOffset(),bb=za.ranges[ya].getRequestedLength(),cb=za.ranges[ya].getOffset(),db=za.ranges[ya].getLength();return ab+bb>cb+db;},renderPagers:function(ya,za,ab){var bb=this.props,cb=bb.deletedCounts[ya],db=bb.commentCounts[ya],eb=db-cb,fb=ab-cb,gb=bb.contextArgs.numberdelimiter||',',hb=ya!==bb.id,ib,jb={topPager:null,bottomPager:null};if(bb.source==ca.UFIFeedbackSourceType.ADS)return jb;var kb=this.isLoadingPrev(ya),lb=this.isLoadingNext(ya);if(ab==db)return jb;var mb={delimiter:gb},nb=bb.feedback.commentsentenceinfo;if(nb){mb.commenters=nb.explicit_commenter_names;mb.othersCount=nb.other_commenter_count;}var ob=(za+ab)==db;if((db<bb.pageSize&&ob)||fb===0){ib=Math.min(db,bb.pageSize);var pb=this.onPage.bind(this,ya,this._hasCommentOrderInverted()&&!hb?wa.BOTTOM:wa.TOP,{offset:db-ib,length:ib}),qb;if(fb===0){if(eb==1){qb=ia.VIEW_ONE;}else{mb.count=eb;qb=ia.VIEW_ALL;}}else if(eb-fb==1){qb=ia.VIEW_ONE_MORE;}else{qb=ia.VIEW_MORE_EXPLICIT;mb.count=eb-fb;}var rb=x.getTrackingInfo(x.types.VIEW_ALL_COMMENTS),sb=ia.getLabel(qb,hb,bb.feedback.isqanda,mb),tb=this._hasCommentOrderInverted()&&!hb,ub=r.createElement(ha,{key:"allPager"+ya,ref:tb?"topLevelBottomPager":null,contextArgs:bb.contextArgs,isUnseen:bb.feedback.hasunseencollapsed,isLoading:kb,isReply:hb,pagerLabel:sb,onPagerClick:pb,"data-ft":rb});if(tb){jb.bottomPager=ub;}else jb.topPager=ub;return jb;}var vb=ia.getLabel(ia.VIEW_MORE,hb,bb.feedback.isqanda,mb),wb=ia.getLabel(ia.VIEW_PREVIOUS,hb,bb.feedback.isqanda,mb);if(za>0){var xb=Math.max(za-bb.pageSize,0);ib=za+ab-xb;var yb;if(!hb||fb>1){var zb=p.formatIntegerWithDelimiter(fb,gb),ac=p.formatIntegerWithDelimiter(eb,gb);yb=va._("{countshown} of {totalcount}",[va.param("countshown",zb),va.param("totalcount",ac)]);}var bc;if(this._hasCommentOrderInverted()&&!hb){bc=this.onPage.bind(this,ya,wa.BOTTOM,{offset:xb,length:ib});jb.bottomPager=r.createElement(ha,{key:"bottomPager"+ya,ref:!hb?"topLevelBottomPager":null,contextArgs:bb.contextArgs,isLoading:kb,isReply:hb,pagerLabel:vb,onPagerClick:bc,countSentence:yb});}else{bc=this.onPage.bind(this,ya,wa.TOP,{offset:xb,length:ib});jb.topPager=r.createElement(ha,{key:"topPager"+ya,contextArgs:bb.contextArgs,isLoading:kb,isReply:hb,pagerLabel:wb,onPagerClick:bc,countSentence:yb});}}if(za+ab<db){ib=Math.min(ab+bb.pageSize,db-za);var cc;if(this._hasCommentOrderInverted()&&!hb){cc=this.onPage.bind(this,ya,wa.TOP,{offset:za,length:ib});jb.topPager=r.createElement(ha,{key:"topPager"+ya,contextArgs:bb.contextArgs,isLoading:lb,isReply:hb,pagerLabel:wb,onPagerClick:cc});}else{cc=this.onPage.bind(this,ya,wa.BOTTOM,{offset:za,length:ib});jb.bottomPager=r.createElement(ha,{key:"bottomPager",ref:!hb?"topLevelBottomPager":null,contextArgs:bb.contextArgs,isLoading:lb,isReply:hb,pagerLabel:vb,onPagerClick:cc});}}return jb;},loadMoreComments:function(){if(this.scrollSubscription&&this.refs.topLevelBottomPager&&!(this.props.id in this.state.isActiveLoading)){var ya=r.findDOMNode(this.refs.topLevelBottomPager),za=ra(window).y,ab=za+document.documentElement.clientHeight+ca.infiniteScrollRangeForQANDAPermalinks;if(ya.offsetHeight&&ya.offsetTop<ab)this.refs.topLevelBottomPager.props.onPagerClick();}},_scrollToAddComment:function(){if(this.refs.toplevelcomposer){var ya=r.findDOMNode(this.refs.toplevelcomposer),za=80,ab=ya.getBoundingClientRect().top;if(ab<za||ab>oa.getViewportDimensions().y-za)l.scrollTo(ya,true,false,za);}},onCommentReply:function(ya){var za=ya.parentcommentid||ya.id;if(this.props.feedback.isthreaded&&ya.cancomment){if(!this.state.repliesExpandedMap[za]){this.onToggleReplies(ya.id);}else if(this.refs['replycomposer-'+za])this.refs['replycomposer-'+za].focus();}else if(this.props.contextArgs.simplereply&&ya.author&&this.refs.toplevelcomposer&&this.refs.toplevelcomposer.insertMention){var ab=this.props.authorProfiles[ya.author].type,bb=new v({uniqueID:ya.author,title:this.props.authorProfiles[ya.author].name,type:ab==='friend'?'user':ab});this.refs.toplevelcomposer.insertMention(bb);this._scrollToAddComment();}},onComment:function(){var ya=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();ya=r.findDOMNode(this.refs.toplevelcomposer);}else{var za=q.byTag(r.findDOMNode(this),'form');ya=k.scry(za,'[name="add_comment_text_text"]').concat(k.scry(za,'[name="add_comment_text"]')).find(function(ab){return !q.byClass(ab,'UFIReplyList');});ya&&ya.focus();}ya&&g.inform('comment/focus',{element:ya});},_beforePostInlineShare:function(){fa.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(ya){var za=ya.payload.message||w.success;this._resetInlineShare({message:za,isError:false});},_onInlineShareError:function(ya){var za=ya.errorDescription||w.error;this._resetInlineShare({message:za,isError:true});},_resetInlineShare:function(ya){fa.updateState(this.props.instanceid,'inlineShare',ya||{});},_hasCommentOrderInverted:function(){return ba.inverted(this.props.orderingMode);}});e.exports=xa;},null);
__d("UFIFeaturedReplyCommentList",["UFIReplyCommentList"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;j.getCommentList=function(k,l){};function j(k,l,m,n){g.call(this,k,l);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};e.exports=j;},null);
__d("UFIFeaturedToplevelCommentList",["UFIConstants","UFIToplevelCommentList"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;k.getCommentList=function(l,m){};k.getCommentListsForFeedbackTargetID=function(l){};k.getCommentListForFeedbackTargetID_UNSAFE=function(l){};k.resetCommentListsForFeedbackTargetID=function(l){};function k(l,m,n){h.call(this,l,g.UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}k.prototype.fetchComments=function(l,m,n){};e.exports=k;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true},comment_cursor:{type:"String"},comment_fbid:{type:"String"}});},null);
__d("UFILiveStreamingComments",["AsyncRequest","Map","Set","UFICentralUpdates","UFIConstants","XLiveStreamingCommentsAsyncController","clearInterval","setInterval"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=new h();function p(r,s){this.eftID=r;this.firstRequestCommentID=s;this.nextCursor=null;this.localCommentBodies=new i();this.interval=n(function(){new g().setURI(this.getNextURI()).setHandler(function(t){if(!t.payload.isStreaming){m(this.interval);return;}this.handleComments(t.payload);}.bind(this)).send();}.bind(this),1000);j.subscribe('update-comments',function(t,u){if(u.comments&&u.comments.length)u.comments.forEach(function(v){if(v.parentcommentid)return;if(v.islocal)this.trackLocalComment(v);}.bind(this));}.bind(this));}p.prototype.handleComments=function(r){if(!r.cursors||!r.ufipayload)return;this.nextCursor=r.cursors[0];var s=r.ufipayload.comments[0];if(this.resemblesLocalComment(s))return;j.handleUpdate(k.UFIPayloadSourceType.LIVE_SEND,r.ufipayload);};p.prototype.getNextURI=function(){var r=l.getURIBuilder().setString('eft_id',this.eftID);if(this.nextCursor!==null){r.setString('comment_cursor',this.nextCursor);}else if(this.firstRequestCommentId!==null)r.setString('comment_fbid',this.firstRequestCommentID);return r.getURI();};p.prototype.trackLocalComment=function(r){var s=p.hashCommentData(r);this.localCommentBodies.add(s);};p.prototype.resemblesLocalComment=function(r){var s=p.hashCommentData(r);return this.localCommentBodies.has(s);};p.hashCommentData=function(r){var s=r.author+r.body.text;if(r.attachment)s+=':'+r.attachment.fbid;return s;};var q={start:function(r,s){if(o.get(r))return;o.set(r,new p(r,s));}};e.exports=q;},null);
__d("UFIRange",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){this.offset=h||0;this.length=i||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}g.prototype.getOffset=function(){return this.offset;};g.prototype.getLength=function(){return this.length;};g.prototype.updateRange=function(h,i){this.offset=h;this.length=i;if(this.requestedLength>0){var j=Math.min(this.offset,this.requestedOffset),k=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=j;this.requestedLength=k-j;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};g.prototype.getRequestedOffset=function(){return this.requestedOffset;};g.prototype.getRequestedLength=function(){return this.requestedLength;};g.prototype.updateRequestedRange=function(h,i){this.requestedOffset=h;this.requestedLength=i;};e.exports=g;},null);
__d("UFIRetryActions",["JSLogger","UFICentralUpdates","UFIConstants","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.create('UFIRetryActions');function l(o,p){var q={actiontype:i.UFIActionType.DELETE_COMMENT,commentid:o.id};h.handleUpdate(i.UFIPayloadSourceType.USER_ACTION,{actions:[q]});var r=o.body.text,s=o.body.mentionstext;p.replyid=o.parentcommentid;p.attachedphoto=o.body.mentionsphoto;j.addComment(o.ftentidentifier,r,s,p);}function m(o,p){var q=o.body.text,r=o.body.mentionstext;p.attachedPhoto=o.body.mentionsphoto;p.attachedSticker=o.attachment;j.editComment(o.id,q,r,p);}var n={retrySubmit:function(o,p){switch(o.status){case i.UFIStatus.FAILED_ADD:l(o,p);break;case i.UFIStatus.FAILED_EDIT:m(o,p);break;default:k.error('retrysubmitstatus',{status:o.status});break;}}};e.exports=n;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();"use strict";var h={getURI:function(i){return g.getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1644137705809392";}};e.exports=h;},null);
__d("BaseGraphQLSubscription",["CurrentUser","CurrentLocale","RTISubscriptionManager","WebGraphQLSubscriptionsConfig"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={subscribe:function(l,m){if(!j.subscriptionsEnabled)return null;return i.subscribe(this.getTopic(l),function(n){m(JSON.parse(n.payload));},{transformContext:JSON.stringify(this._getTransformContext(l))});},_getTransformContext:function(l){var m=155160167952447;return {viewerID:g.getID(),appID:m,locale:h.get(),queryID:this.getQueryID(),serializedQueryParameters:JSON.stringify(this.getQueryParameters(l))};}};e.exports=k;},null);
__d("UFILikeSubscription",["FeedbackLikeSubscriptionWebGraphQLQuery","BaseGraphQLSubscription","uuid"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=Object.assign({},h,{getTopic:function(k){return 'graphql-sample/feedback_like_subscribe;feedback_id_'+k;},getQueryID:function(){return g.getQueryID();},getQueryParameters:function(k){return {input:JSON.stringify({client_subscription_id:i(),feedback_id:k})};}});e.exports=j;},null);
__d("UFISubscriptionsController",["UFICentralUpdates","UFIConstants","UFILikeSubscription"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};function k(o,p,q){if(!(o in j))j[o]={};j[o][p]=q;}function l(o,p){if(!(o in j))return null;return j[o][p];}function m(o,p,q){var r=q.feedback_like_subscribe.feedback;g.handleUpdate(h.UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:h.UFIActionType.LIKE_ACTION,actorid:q.feedback_like_subscribe.liker.id,entidentifier:o,likesentences:{current:r.does_viewer_like?r.viewer_likes_sentence:r.viewer_does_not_like_sentence,alternate:r.does_viewer_like?r.viewer_does_not_like_sentence:r.viewer_likes_sentence},hasviewerliked:r.does_viewer_like,likecount:r.likers.count}]});}var n={subscribe:function(o,p){var q=i.subscribe(o,m.bind(this,o,p));k(o,p,q);},unsubscribe:function(o,p){var q=l(o,p);if(q)q.unsubscribe();}};e.exports=n;},null);
__d("UFIController",["Arbiter","Bootloader","CommentPrelude","DOM","LayerRemoveOnHide","LiveTimer","PageAdminSignatureSettings","Parent","React","ReactMount","ShortProfiles","UFI.react","UFIActionLinkController","UFICentralUpdates","UFICollapse","UFIFeaturedReplyCommentList","UFIFeaturedToplevelCommentList","UFICommentTemplates","UFIConfig","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFILiveStreamingComments","UFIRange","UFIReplyCommentList","UFIRetryActions","UFISubscriptionsController","UFIToplevelCommentList","UFIUserActions","URI","forEachObject","isEmpty","onEnclosingPageletDestroy","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){b.__markCompiled&&b.__markCompiled();'use strict';var oa=z,pa=oa.UFIPayloadSourceType,qa=function(ua,va,wa,xa,ya){var za=ua+va===wa;return {offset:ua,length:(za&&ra(ya))?xa-ua:va};},ra=function(ua){return ua==pa.USER_ACTION||ua==pa.LIVE_SEND;},sa=function(ua,va){for(var wa=0;wa<va.length;wa++){var xa=va[wa];if(xa.author)ua.push(xa.author);if(xa.socialcontext)ua.push(xa.socialcontext.topmutualid);if(xa.replyauthors&&xa.replyauthors.length)for(var ya=0;ya<xa.replyauthors.length;ya++)ua.push(xa.replyauthors[ya]);}};ta.preload=function(){};ta.prototype.$UFIController0=function(ua,va){if(!this.$UFIController1||va!==pa.INITIAL_SERVER)return;this.$UFIController1.startClock(ua);};ta.prototype.$UFIController2=function(ua,va){if(!this.$UFIController1||va!==pa.INITIAL_SERVER)return;this.$UFIController1.log(ua,va,{num_comments:(this.comments&&this.comments.length)||0,num_likes:(this.feedback&&this.feedback.likecount)||0,features:{is_featured:!!this.featuredToplevelCommentList,is_streaming:this.$UFIController3()&&this.$UFIController4.isstreaming,is_lazy_fetch:this.$UFIController4.lazyFetch,is_disable_css_hiding:this.$UFIController4.disableCSSHiding}});};function ta(ua,va,wa){this.id=va.ftentidentifier;this.$UFIController1=va.perfLogger?new (va.perfLogger)(this.id):null;this.$UFIController0('construct',pa.INITIAL_SERVER);this.root=ua;this.source=va.source;this.$UFIController5=va.instanceid;this.$UFIController6=false;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController4=va;this.$UFIController4.rootid=this.root.id;this.$UFIController7=this.$UFIController4.feedbackMode!=='expanded';var xa=wa.feedbacktargets[0];new s(ua,this.$UFIController4,xa,this.$UFIController5);if(xa.ll)ga.subscribe(this.id,this.$UFIController5);this.$UFIController4.pagesAdminSignatureSettings=new m(this.$UFIController4.initAdminSignatureContext,xa.actorforpost);this.orderingMode=xa.defaultcommentorderingmode;var ya=null;if(wa.featuredcommentlists&&wa.featuredcommentlists.comments&&wa.featuredcommentlists.comments[this.id]){ya=wa.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new w(this.id,ya.values,wa.comments);}else ya=wa.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.shortenTimestamp=va.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();var za=xa.orderingmodes||[{value:this.orderingMode}];za.forEach(function(eb){this.ranges[eb.value]=new da(ya.range.offset,ya.range.length);}.bind(this));var ab,bb,cb;if(wa.commentlists.replies)for(ab=0;ab<ya.values.length;ab++){bb=ya.values[ab];cb=wa.commentlists.replies[bb];if(cb){this.commentcounts[bb]=this.getReplyCommentList(bb).getCommentCount();this.getReplyRange(bb).updateRange(cb.range.offset,cb.range.length);}}if(wa.featuredcommentlists)if(wa.featuredcommentlists.replies)for(ab=0;ab<ya.values.length;ab++){bb=ya.values[ab];cb=wa.featuredcommentlists.replies[bb];if(cb){this.featuredReplyCommentLists[bb]=new v(this.id,bb,cb.values,wa.comments);this.commentcounts[bb]=this.getReplyCommentList(bb).getCommentCount();this.getReplyRange(bb).updateRange(cb.range.offset,cb.range.length);}}this.$UFIController8=null;this.$UFIController9=null;this.ufiCentralUpdatesSubscriptions=[t.subscribe('feedback-updated',function(eb,fb){var gb=fb.updates,hb=fb.payloadSource;if(hb!=pa.COLLAPSED_UFI&&this.id in gb)this.fetchAndUpdate(this.render.bind(this),hb);}.bind(this)),t.subscribe('feedback-id-changed',function(eb,fb){var gb=fb.updates;if(this.id in gb)this.id=gb[this.id];}.bind(this)),t.subscribe('instance-updated',function(eb,fb){var gb=fb.updates;if(this.$UFIController5 in gb){var hb=gb[this.$UFIController5];if(hb.editcommentid||hb.inlineShare)this.render(fb.payloadSource);}}.bind(this)),t.subscribe('actor-changed',function(eb,fb){this.$UFIControllerb();}.bind(this))];this.clearPageletSubscription=ma(this.root,this.$UFIControllerc.bind(this));this.clearPageSubscription=g.subscribe('ufi/page_cleared',this.$UFIControllerd.bind(this));t.handleUpdate(pa.INITIAL_SERVER,wa);if(this.$UFIController4.viewas)this.viewasUFICleanSubscription=g.subscribe('pre_page_transition',function(eb,fb){if(this.$UFIController4.viewas!==new ja(fb.to).getQueryData('viewas'))ha.resetCommentListsForFeedbackTargetID(this.id);}.bind(this));this.collapseSubscription=u.subscribe(this.$UFIController5,function(eb){switch(eb.action){case 'show':this.$UFIController7=false;break;case 'hide':this.$UFIController7=true;break;case 'toggle':this.$UFIController7=!this.$UFIController7;break;default:throw new Error('Invalid collapse action');}this.render(pa.COLLAPSE_ACTION);}.bind(this));h.loadModules(["ScrollAwareDOM"],function(eb){p.scrollMonitor=eb.monitor;});if(this.$UFIController3()&&this.$UFIController4.isstreaming){var db=null;if(this.comments&&this.comments.length>0)db=this.comments[0].fbid;ca.start(this.id,db);}this.$UFIController2('construct',pa.INITIAL_SERVER);}ta.prototype.$UFIController3=function(){if(this.$UFIController4.feedcarded)return y.enableStreamingCommentsInFeed;return true;};ta.prototype.$UFIControllere=function(){if(!this.$UFIControllerf)this.$UFIControllerf=n.byTag(this.root,'form');return this.$UFIControllerf;};ta.prototype.$UFIControllerg=function(event){var ua=!this.feedback.hasviewerliked;ia.changeLike(this.id,ua,{source:this.source,target:event.target,rootid:this.$UFIController4.rootid});event.preventDefault();};ta.prototype.$UFIControllerh=function(ua,event){var va=!ua.hasviewerliked;ia.changeCommentLike(ua.id,va,{source:this.source,target:event.target});};ta.prototype.$UFIControlleri=function(ua){ba.updateState(this.$UFIController5,'isediting',true);ba.updateState(this.$UFIController5,'editcommentid',ua.id);};ta.prototype.$UFIControllerj=function(ua,va,event){if(!va.visibleValue&&!va.attachedPhoto&&!va.attachedSticker){this.$UFIControllerk(ua,event);}else ia.editComment(ua.id,va.visibleValue,va.encodedValue,{source:this.$UFIController4.source,target:event.target,attachedPhoto:va.attachedPhoto,attachedSticker:va.attachedSticker});ba.updateStateField(this.$UFIController5,'locallycomposed',ua.id,true);this.$UFIControllerb();};ta.prototype.$UFIControllerb=function(){ba.updateState(this.$UFIController5,'isediting',false);ba.updateState(this.$UFIController5,'editcommentid',null);};ta.prototype.$UFIControllerk=function(ua,event,va){this.$UFIControllerl(ua,false,event,va);};ta.prototype.$UFIControllerl=function(ua,va,event,wa){var xa=x[':fb:ufi:hide-dialog-template'].build();j.setContent(xa.getNode('body'),na._("Are you sure you want to delete this comment?"));j.setContent(xa.getNode('title'),na._("Delete Comment"));h.loadModules(["DialogX"],function(ya){var za=new ya({modal:true,width:465,addedBehaviors:[k]},xa.getRoot());za.subscribe('confirm',function(){ia.removeComment(ua.id,{source:this.source,oneclick:va,target:event.target});if(wa)wa.setState({isInlinePageDeleted:true});za.hide();}.bind(this));za.show();}.bind(this));};ta.prototype.$UFIControllerm=function(ua,event){ia.setHideAsSpam(ua.id,true,{source:this.source,target:event.target});};ta.prototype.$UFIControllern=function(ua,event){ia.setHideAsSpam(ua.id,false,{source:this.source,target:event.target});};ta.prototype.$UFIControllero=function(ua,event){ia.translateComment(ua,{source:this.source,target:event.target});};ta.prototype.$UFIControllerp=function(ua,va,event){ia.banUser(ua,this.feedback.ownerid,va,{source:this.source,target:event.target});};ta.prototype.$UFIControllerq=function(ua,event){this.$UFIControllerp(ua,true,event);};ta.prototype.$UFIControllerr=function(ua,event){this.$UFIControllerp(ua,false,event);};ta.prototype.$UFIControllers=function(ua,va){ia.fetchSpamComments(this.id,ua,va,this.$UFIController4.viewas);};ta.prototype.$UFIControllert=function(ua,event){ia.removePreview(ua,{source:this.source,target:event.target});};ta.prototype.$UFIControlleru=function(ua){fa.retrySubmit(ua,{source:this.source});};ta.prototype.$UFIControllerv=function(){this.$UFIController7=false;i.expand(this.root,false,'ufi_controller');};ta.prototype.$UFIControllerw=function(){var ua=this.getToplevelCommentList().count,va=Math.min(ua,this.$UFIController4.numLazyComments);ka(this.ranges,function(wa){return wa.updateRequestedRange(ua-va,va);});this.$UFIController6=true;this.fetchAndUpdate(this.render.bind(this),pa.USER_ACTION);};ta.prototype.setRange=function(ua){this.getRange().updateRange(ua.offset,ua.length);};ta.prototype.setReplyRange=function(ua,va){this.getReplyRange(ua).updateRange(va.offset,va.length);};ta.prototype.render=function(ua){this.$UFIController0('render',ua);var va=ba.getKeyForInstance(this.$UFIController5,'inlineShare')||{},wa=this.comments.length||!la(this.feedback.likesentences.current);if((wa&&ra(ua))||va.toggling)this.$UFIControllerv();if(this.$UFIController4.disableCSSHiding&&this.$UFIController7){this.$UFIController2('render',ua);return o.unmountComponentAtNode(this.root);}if(this.$UFIController4.lazyFetch&&!this.$UFIController6&&!va.active){o.render(this.$UFIControllerx(),this.root);this.$UFIController2('render',ua);return this.$UFIControllerw();}var xa=this.getRange();if(this.$UFIController8===null)this.$UFIController8=xa.getOffset()+xa.getLength()-1;var ya=this.feedback.replysocialsentencemaxreplies||-1,za={};za[this.id]=this.getToplevelCommentList().getDeletedCount();var ab={},bb={},cb={};bb[this.id]=!this.featuredToplevelCommentList;this.comments.forEach(function(ib){var jb=ib.id;za[jb]=this.getReplyCommentList(jb).getDeletedCount();ab[jb]=this.getToplevelCommentList().getPermalinkForComment(jb);bb[jb]=!this.featuredReplyCommentLists[jb];if(this.repliesMap[jb]){var kb=this.repliesMap[jb].length;cb[jb]=jb===this.feedback.permalinkcommentid||kb>1||(kb>0&&ib.interestingReplyOffset===undefined);this.repliesMap[jb].forEach(function(lb){var mb=lb.id;ab[mb]=ea.getCommentList(this.id,jb).getPermalinkForComment(mb);}.bind(this));}}.bind(this));var db={};db[this.id]=new da(xa.offset,xa.length);for(var eb in this.replyRanges)db[eb]=new da(this.replyRanges[eb].offset,this.replyRanges[eb].length);var fb=!!this.featuredToplevelCommentList,gb=this.getToplevelCommentList().getForceNotPageable(),hb=o.createElement(r,{feedback:this.feedback,id:this.id,onTargetLikeToggle:this.$UFIControllerg.bind(this),onCommentLikeToggle:this.$UFIControllerh.bind(this),onCommentRemove:this.$UFIControllerk.bind(this),onCommentHideAsSpam:this.$UFIControllerm.bind(this),onCommentMarkAsNotSpam:this.$UFIControllern.bind(this),onCommentEdit:this.$UFIControlleri.bind(this),onCommentTranslate:this.$UFIControllero.bind(this),onCommentInlineBan:this.$UFIControllerq.bind(this),onCommentUndoInlineBan:this.$UFIControllerr.bind(this),onEditAttempt:this.$UFIControllerj.bind(this),onCancelEdit:this.$UFIControllerb.bind(this),onChangeRange:this.$UFIControllery.bind(this),onSpamFetch:this.$UFIControllers.bind(this),onPreviewRemove:this.$UFIControllert.bind(this),onRetrySubmit:this.$UFIControlleru.bind(this),onOrderingModeChange:this.$UFIControllerz.bind(this),contextArgs:this.$UFIController4,repliesMap:this.repliesMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:za,availableComments:this.comments,source:this.source,ranges:db,pageSize:this.$UFIController4.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController5,loggingOffset:this.$UFIController8,replySocialSentenceMaxReplies:ya,orderingMode:this.orderingMode,hideOrderingModeSelector:fb,commentPermalinks:ab,canAddCommentMap:bb,isInitialRender:ua===pa.INITIAL_SERVER,inlineShare:va,initialRepliesExpandMap:cb,hideToplevelPager:gb,isStreaming:this.$UFIController4.isstreaming});o.render(hb,this.root);l.updateTimeStamps();if(this.$UFIControllere())g.inform('ufi/changed',{form:this.$UFIControllere()});if(ua!=pa.INITIAL_SERVER&&ua!=pa.COLLAPSED_UFI)g.inform('reflow');this.$UFIController2('render',ua);};ta.prototype.deferredCallback=function(ua,va,wa,xa){ua.callbackCount++;if(ua.callbackCount<ua.expectedCallbackCount)return;q.getMulti(va,function(ya){this.authorProfiles=ya;xa(wa);if(wa==pa.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));};ta.prototype.fetchAndUpdate=function(ua,va){aa.getFeedbackTarget(this.id,function(wa){this.feedback=wa;var xa=this.getToplevelCommentList().getCommentCount(),ya=this.getRange(),za=null;if(this.$UFIController4.isstreaming){var ab=this.$UFIController4.feedcarded?4:300;za={offset:Math.max(0,xa-ab),length:Math.min(ab,xa)};}else za=qa(ya.getRequestedOffset(),ya.getRequestedLength(),this.commentcounts[this.id],xa,va);var bb=[];if(this.feedback.reactorids)bb=bb.concat(this.feedback.reactorids);if(this.feedback.actorforpost)bb.push(this.feedback.actorforpost);var cb={expectedCallbackCount:0,callbackCount:0},db=za.offset,eb=za.length,fb={viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext};this.getToplevelCommentList().getComments(db,eb,fb,function(gb,hb,ib){this.commentcounts[this.id]=hb;this.setRange(gb);this.comments=[];for(var jb in ib)this.comments.push(ib[jb]);sa(bb,this.comments);if(this.feedback.isthreaded&&this.comments.length){cb.expectedCallbackCount=this.comments.length;}else cb.expectedCallbackCount=1;for(var kb in ib){var lb=ib[kb],mb=lb.id;if(this.feedback.isthreaded){var nb=this.getReplyCommentList(mb).getCommentCount(),ob;if(this.replyRanges[mb]){var pb=this.getReplyRange(mb);ob=qa(pb.getRequestedOffset(),pb.getRequestedLength(),this.commentcounts[mb],nb,va);}else if(lb.interestingReplyOffset!==undefined){ob={offset:lb.interestingReplyOffset,length:1};}else{var qb=this.feedback.isranked?0:Math.min(nb,2);ob={offset:0,length:qb};}var rb=ob.offset,sb=ob.length;this.getReplyCommentList(mb).getComments(rb,sb,fb,function(tb,ub,vb,wb){this.commentcounts[tb]=vb;this.setReplyRange(tb,ub);this.repliesMap[tb]=[];for(var xb in wb)this.repliesMap[tb].push(wb[xb]);sa(bb,this.repliesMap[tb]);this.deferredCallback(cb,bb,va,ua);}.bind(this,mb,ob,nb));}}if(!this.feedback.isthreaded||!this.comments.length)this.deferredCallback(cb,bb,va,ua);}.bind(this,za,xa));}.bind(this));};ta.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return ha.getCommentList(this.id,this.orderingMode);};ta.prototype.getReplyCommentList=function(ua){if(ua in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[ua];return ea.getCommentList(this.id,ua);};ta.prototype.getRange=function(){if(!(this.orderingMode in this.ranges))this.ranges[this.orderingMode]=new da();return this.ranges[this.orderingMode];};ta.prototype.getReplyRange=function(ua){if(!(ua in this.replyRanges))this.replyRanges[ua]=new da();return this.replyRanges[ua];};ta.prototype.$UFIControllery=function(ua,va){if(ua==this.id){this.getRange().updateRequestedRange(va.offset,va.length);}else this.replyRanges[ua].updateRequestedRange(va.offset,va.length);this.fetchAndUpdate(this.render.bind(this),pa.USER_ACTION);};ta.prototype.$UFIControllerc=function(){o.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(t.unsubscribe.bind(t));var ua=[this.viewasUFICleanSubscription,this.collapseSubscription,this.clearPageSubscription];ua.map(function(va){return va&&g.unsubscribe(va);});ga.unsubscribe(this.id,this.$UFIController5);};ta.prototype.$UFIControllerd=function(){this.$UFIControllerc();g.unsubscribe(this.clearPageletSubscription);};ta.prototype.$UFIControllerx=function(){var ua=ba.getKeyForInstance(this.$UFIController5,'inlineShare');return (o.createElement(r,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController4,commentCounts:this.commentcounts,onOrderingModeChange:this.$UFIControllerz.bind(this),onTargetLikeToggle:this.$UFIControllerg.bind(this),orderingMode:this.orderingMode,inlineShare:ua,loadingComments:true,isStreaming:this.$UFIController4.isstreaming}));};ta.prototype.$UFIControllerz=function(ua){this.orderingMode=ua;o.render(this.$UFIControllerx(),this.root);this.fetchAndUpdate(this.render.bind(this),pa.USER_ACTION);};e.exports=ta;},null);
__d("MentionsTypeaheadViewItem.react",["Badge.react","ImageBlock.react","React","TypeaheadViewItem","cssURL","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"MentionsTypeaheadViewItem",mixins:[j.Mixin],propTypes:Object.assign({},j.propTypes,{ariaDescribedBy:n.string}),render:function(){var p=this.props.entry,q=p.getAuxiliaryData(),r=null;if(q)if(q.verified){r=i.createElement(g,{type:"verified",size:"xsmall"});}else if(q.workUser)r=i.createElement(g,{type:"work",size:"xsmall"});var s=p.getPhoto()?i.createElement("span",{className:"_5u93",style:{backgroundImage:k(p.getPhoto())}}):i.createElement("span",null),t=null;if(p.getSubtitle())t=i.createElement("div",{className:"_5u95"},p.getSubtitle());var u=(("_5u91")+(this.props.highlighted?' '+"_5u92":''));return (i.createElement("li",{role:"option",className:u,"aria-label":p.getTitle(),"aria-selected":this.props.highlighted,"aria-describedby":this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},i.createElement(h,{spacing:"medium"},s,i.createElement("div",null,i.createElement("div",{className:"_5u94"},p.getTitle(),r),t))));}});e.exports=o;},null);
__d("GroupMentionsTypeaheadView.react",["Image.react","MentionsTypeaheadViewItem.react","React","cx","fbt","ix","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=k._("No Results"),q=i.createClass({displayName:"GroupMentionsTypeaheadView",propTypes:{id:o.string,viewProps:o.object,highlightedEntry:o.object,entries:o.array.isRequired,onSelect:o.func.isRequired,onHighlight:o.func,onRenderHighlight:o.func},getInitialState:function(){return {emptyMembersHeaderID:m(),membersHeaderID:m(),nonMembersHeaderID:m()};},_renderItem:function(r,s){var t=r===this.props.highlightedEntry;return (i.createElement(h,{key:r.getUniqueID(),ariaDescribedBy:s,entry:r,highlighted:t,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_renderHashtagItem:function(r){var s=r===this.props.highlightedEntry;return (i.createElement(h,{key:r.getUniqueID(),entry:r,highlighted:s,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},_renderMembers:function(r){var s,t=null;if(r.length){t=r.map(function(w,x){var y=x===0?this.state.membersHeaderID:null;return this._renderItem(w,y);}.bind(this));}else t=[i.createElement("li",{className:"_2ph-",key:this.state.emptyMembersHeaderID,role:"option","aria-describedby":this.state.membersHeaderID,"aria-label":p},p)];var u=null;if(this.props.viewProps.member.aux)u=i.createElement("span",{className:"_1knr"},' \u00b7 ',this.props.viewProps.member.aux);var v=[i.createElement("li",{key:this.state.membersHeaderID,className:"_1kns"},this.props.viewProps.member.title,u)];(s=v).push.apply(s,t);return v;},_renderNonMembers:function(r){var s;if(!r.length)return null;var t=null;if(this.props.viewProps.nonMember.aux)t=i.createElement("span",{className:"_1knr"},' \u00b7 ',this.props.viewProps.nonMember.aux);var u=[i.createElement("li",{key:this.state.nonMembersHeaderID,className:"_1kns"},i.createElement(g,{src:l('/images/groups/secret-tag.png'),className:"_1knt"}),this.props.viewProps.nonMember.title,t)];(s=u).push.apply(s,r.map(function(v,w){var x=w===0?this.state.nonMembersHeaderID:null;return this._renderItem(v,x);}.bind(this)));return u;},render:function(){var r=[],s=[],t=[];this.props.entries.forEach(function(x){var y=x.getAuxiliaryData(),z=y.renderType;if(z==='member'){r.push(x);}else if(z==='hashtag'){t.push(x);}else s.push(x);});var u=(("_5u8_")+(!r.length&&!s.length&&!t.length?' '+"_5u90":'')),v=r.length===0&&s.length===0&&t.length>0,w=v?this.props.entries.map(this._renderHashtagItem):this._renderMembers(r).concat(this._renderNonMembers(s));return (i.createElement("ul",{className:u,role:"listbox",id:this.props.id},w));}});e.exports=q;},null);
__d("UFIMentionsInputProxy.react",["Bootloader","React","cx","emptyFunction","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"UFIMentionsInputProxy",getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(m){this._fillCmdBuffer({fn:'setSignature',args:[m]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(m){this._fillCmdBuffer({fn:'insertMention',args:[m]});},insertEmoticon:function(m){this._fillCmdBuffer({fn:'insertEmoticon',args:[m]});},_bootload:function(){g.loadModules(["UFIMentionsInput.react"],function(m){return this.setState({component:m});}.bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(m){if(this.refs.mentionsinputchild){return this._execCmd(m);}else this._cmdBuffer=this._cmdBuffer.concat([m]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var m=this._cmdBuffer[0];this._execCmd(m);this._cmdBuffer=this._cmdBuffer.slice(1);k(this._drainFnBuffer);}},_execCmd:function(m){var n=this.refs.mentionsinputchild;return n[m.fn].apply(n,m.args);},_renderProxyInput:function(){var m="_1osa mentionsHidden";return (h.createElement("input",{className:m,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus,tabIndex:"-1"}));},_renderDummy:function(){var m="UFIAddCommentInput _1osb _1osc";return (h.createElement("div",{onFocus:this.focus,onClick:this.focus,onTouchStart:j,onMouseOver:this._bootload},h.createElement("div",{className:m},this._renderProxyInput(),this.props.placeholder)));},render:function(){var m=this.state.component;if(!m)return this._renderDummy();return (h.createElement(m,h.__spread({key:"mentionsinputchild",ref:"mentionsinputchild"},this.props),this.props.children));}});e.exports=l;},null);
__d("MentionsInputTypeaheadView.react",["MentionsTypeaheadViewItem.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h,k=j.PropTypes,l=h.createClass({displayName:"MentionsInputTypeaheadView",propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (h.createElement(g,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m=(("_5u8_")+(!this.props.entries.length?' '+"_5u90":''));return (h.createElement("ul",{className:m,role:"listbox",id:this.props.id},this.props.entries.map(this._renderItem)));}});e.exports=l;},null);
__d("FbFeedHighlight",["JSXDOM","CSS","DOM","DOMScroll","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=1000,m=1000,n=null;function o(){return (g.div({className:"_1usz"},g.div({className:"_1us-"}),g.div({className:"_1us_"}),g.div({className:"_1ut0"}),g.div({className:"_1ut1"})));}var p={highlightAndScrollTo:function(q){p.highlight(q);p.scrollTo(q);},highlightSingle:function(q){var r=o();i.appendContent(q,r);setTimeout(function(){if(n)i.remove(n);n=r;h.addClass(q,"_1ut2");},0);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(function(){i.remove(r);if(r==n)n=null;},l+m);},l+m);},highlight:function(q){var r=p.highlightPermanent(q);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(i.remove.bind(null,r),l+l);},l+m);},highlightPermanent:function(q){var r=o();i.appendContent(q,r);setTimeout(h.addClass.bind(null,q,"_1ut2"),0);return r;},scrollTo:function(q){setTimeout(j.scrollTo.bind(null,q),0);}};e.exports=p;},null);