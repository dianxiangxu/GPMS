// CIS - fixes for elsevier.com
// Manual replacements on the original code. Necessary to avoid searching in www.elsevier.com for scripts and resources
var r_windowLocation = 'elsevier-uk1.neolane.net'				//replaces:	window.location.host

var xtk_core={
add:function(){return"Add"},
create:function(){return"Create"},
unsupported_browser:function(){return"<b>Warning</b>: your browser isn't supported by Neolane. <br/>To be able to use Neolane to its full potential, you need to update your browser."},
reauthenticate:function(){return"Session expired"},
reauthenticateDesc:function(){return"The session has expired. Please log in again."},
login:function(){return"Login:"},
password:function(){return"Password:"},
ui_unsavedData:function(){return"Your changes were not saved."},
ui_whatToDo:function(){return"What do you want to do before navigating away from this screen?"},
ui_mandatoryValue:function(){return"Mandatory value"},
newImport:function(){return"New import"},
newExport:function(){return"New export"},
newWorkflow:function(){return"New workflow"},
noData:function(){return"No data."},
loadingData:function(){return"Loading data..."},
loadingDataShort:function(){return"Loading..."},
navigation_getCount:function(){return"Recover the total number of results."},
navigation_getNumberOfPages:function(){return"Recover the total number of pages."},
navigation_totalUnknown:function(){return"??"},
navigation_scrollingNext:function(){return"Display next results"},
navigation_scrollingNextShort:function(){return"Next results"},
navigation_paginationFirst:function(){return"First page"},
navigation_paginationPrevious:function(){return"Previous page"},
navigation_paginationNext:function(){return"Next page"},
navigation_paginationNextLabel:function(){return"Next"},
navigation_paginationLast:function(){return"Last page"},
navigation_paginationPage:function(){return"Page"},
navigation_paginationOf:function(){return"of"},
list_actionLabel:function(){return"Actions"},
duplicateActionLabel:function(){return"Duplicate"},
deleteActionLabel:function(){return"Delete"},
list_errorLoadingMsg:function(){return"An error occurred while loading the list."},
list_errorLink:function(){return"Error detail"},
list_expand_header:function(){return"Show more"},
list_collapse_header:function(){return"Show less"},
list_group_default_header:function(){return"Others"},
list_errorLine:function(){return"A rendering error occurred for this line."},
list_err_noKeyAttributes:function(){return"The list must be configured with keyAttributes."},
list_selectItem:function(){return"Select an element"},
list_layout_default:function(){return"List"},
list_layout_default_large:function(){return"Large list"},
list_layout_link:function(){return"List"},
list_layout_link_large:function(){return"Large list"},
list_layout_bloc:function(){return"Details"},
list_layout_bloc_large:function(){return"Large details"},
list_layout_grid:function(){return"Thumbnail"},
list_layout_grid_medium:function(){return"Average thumbnail"},
list_layout_grid_large:function(){return"Large thumbnail"},
list_search_button_help:function(){return"Search"},
list_refresh_button_help:function(){return"Refresh"},
treeList_display_advanced_fields_help:function(){return"Display advanced fields"},
treeList_hide_advanced_fields_help:function(){return"Hide advanced fields"},
list_delete_title:function(){return"Confirm deletion"},
list_delete_msg:function(a){return"Delete '"+a+"' record?"},
select_sortMostRecentFirstLabel:function(){return"Newest first"},
select_sortMostRecentLastLabel:function(){return"Oldest first"},
select_sortLabelAZLabel:function(){return"Label from A to Z"},
select_sortLabelZALabel:function(){return"Label from Z to A"},
select_sortReportOrderLabel:function(){return"By relevance"},
select_sortReportNoCategoryFilter:function(){return"(No filter on a category)"},
search_placeHolder:function(){return"Search..."},
navigator_home:function(){return"Home"},
navigator_back:function(){return"Back"},
navigator_elementNoneSelected:function(){return"(no element selected)"},
navigator_folderFilterNoneSelected:function(){return"(No filter on folders)"},
listRefresh:function(){return"Refresh list"},
folderSelectorLabel:function(){return"Choose a folder"},
folderAll:function(){return"All"},
folderSelectorTitle:function(){return"Please select a folder"},
folderNoneSelected:function(){return"(No folder selected)"},
folderIsView:function(){return" (view)"},
folderUseSubTree:function(){return"include subfolders"},
navtreeSharedFolder:function(){return" (shared)"},
fileUploading:function(){return"Uploading files..."},
notAnInteger:function(a){return"'"+a+"' cannot be converted to an integer."},
notAReal:function(a){return"'"+a+"' cannot be converted to a floating point number."},
schema_processing:function(a){return"Schema generation of the '"+a+"' table"},
schema_packageLabel:function(){return"Automatic table discovery"},
schema_installing:function(){return"Install package containing the generated schemas"},
linkEditFilter:function(){return"Filter the list"},
button_create:function(){return"Create"},
button_cancel:function(){return"Cancel"},
creation_availableModels:function(){return"Available templates"},
dialog_ok:function(){return"OK"},
dialog_cancel:function(){return"Cancel"},
dialog_error:function(){return"Error"},
dialog_success:function(){return"Success"},
dialog_warning:function(){return"Warning"},
dialog_loading:function(){return"Loading..."},
dialog_confirm:function(){return"Confirmation"},
dialog_doConfirm:function(){return"Confirm"},
dialog_info:function(){return"Information"},
dialog_detail:function(){return"Detail"},
dialog_save:function(){return"Save"},
dialog_dontSave:function(){return"Do not save"},
dialog_close:function(){return"Close"},
dialog_navigatingLabel:function(){return"Browsing in progress..."},
dialog_loadingLabel:function(){return"Operation in progress..."},
gridEditor_createGridActionDlg_title:function(){return"Existing content"},
gridEditor_createGridActionDlg_drop:function(){return"Replace the existing content with the table."},
gridEditor_createGridActionDlg_one:function(){return"Include the existing content in a single cell of the table."},
gridEditor_createGridActionDlg_adapt:function(){return"Include the existing content in several cells of the table."},
gridEditor_addAbove:function(){return"Add one line above"},
gridEditor_addBelow:function(){return"Add one line below"},
gridEditor_addRight:function(){return"Add one column to the right"},
gridEditor_addLeft:function(){return"Add one column to the left"},
gridEditor_merge:function(){return"Merge with the column on the right"},
gridEditor_merge2Steps:function(){return"Merge..."},
gridEditor_split:function(){return"Divide the cell into two"},
gridEditor_deleteRow:function(){return"Delete a line"},
gridEditor_deleteCol:function(){return"Delete a column"},
gridEditor_check:function(){return"Check"},
gridEditor_confirmationTitle:function(){return"Confirmation"},
gridEditor_confirmationContent:function(){return"The content will be overwritten. Continue?"},
editBox_toolbar_gridOptions:function(){return"Grid..."},
editBox_toolbar_griddify:function(){return"Change into a grid"},
editBox_toolbar_delete:function(){return"Delete"},
editBox_toolbar_addOptions:function(){return"Insert..."},
editBox_toolbar_addPerso:function(){return"Add a merge field"},
editBox_toolbar_addIncludeView:function(){return"Add a personalization block"},
editBox_toolbar_increasefontsize:function(){return"Enlarge font"},
editBox_toolbar_decreasefontsize:function(){return"Reduce font"},
editBox_toolbar_bold:function(){return"Bold"},
editBox_toolbar_italic:function(){return"Italic"},
editBox_toolbar_underline:function(){return"Underline"},
editBox_toolbar_justifyright:function(){return"Align right"},
editBox_toolbar_justifyleft:function(){return"Align left"},
editBox_toolbar_justifycenter:function(){return"Center"},
editBox_toolbar_bgcolor:function(){return"Change the background color"},
editBox_toolbar_fontcolor:function(){return"Change the font color"},
editBox_toolbar_edit:function(){return"Edit"},
editBox_toolbar_conditional:function(){return"Conditional content"},
editBox_toolbar_translatable:function(){return"Localizable content"},
editBox_toolbar_image:function(){return"Image"},
editBox_toolbar_offer:function(){return"Offer"},
editBox_toolbar_link:function(){return"Link"},
exprEdit_simple:function(){return"Field:"},
exprEdit_advanced:function(){return"Expression:"},
exprEdit_mode:function(){return"Mode:"},
exprEdit_simpleRadio:function(){return"Simple"},
exprEdit_advancedRadio:function(){return"Advanced"},
linkEdit_Erase:function(){return"Delete"},
linkEdit_Details:function(){return"Details"},
linkEdit_noData:function(){return"(No data)"},
linkEdit_NoSelection:function(){return"(No selection)"},
linkEdit_titleField:function(){return"Merge field"},
linkEdit_titleSubscription:function(){return"Select a subscription"},
linkEdit_titleWebApp:function(){return"Available Web application"},
linkEdit_titleSocialApp:function(){return"Available social applications"},
linkEdit_titlePUrl:function(){return"Available pURLs"},
linkEdit_titleIncludeView:function(){return"Select a personalization block"},
colorPicker_dialogTitle:function(){return"Color"},
borderEdit_dialogTitle:function(){return"Borders"},
borderEdit_none:function(){return"None"},
borderEdit_solid:function(){return"Solid"},
borderEdit_dotted:function(){return"Dotted line"},
borderEdit_dashed:function(){return"Dash"},
borderEdit_double:function(){return"Double"},
borderEdit_groove:function(){return"Groove"},
borderEdit_ridge:function(){return"Ridge"},
borderEdit_inset:function(){return"Inset"},
borderEdit_outset:function(){return"Outset"},
borderEdit_style:function(){return"Style"},
borderEdit_size:function(){return"Size"},
borderEdit_color:function(){return"Color"},
borderEdit_preview:function(){return"Preview"},
borderEdit_background:function(){return"Back"},
borderEdit_transparent:function(){return"Transparent"},
borderEdit_light:function(){return"Light"},
borderEdit_dark:function(){return"Dark"},
backgroundEdit_dialogTitle:function(){return"Back"},
backgroundEdit_none:function(){return"None"},
backgroundEdit_horizontal:function(){return"Horizontal"},
backgroundEdit_vertical:function(){return"Vertical"},
backgroundEdit_both:function(){return"Both"},
backgroundEdit_left_top:function(){return"Top left"},
backgroundEdit_center_top:function(){return"Top middle"},
backgroundEdit_right_top:function(){return"Top right"},
backgroundEdit_left_center:function(){return"Centre left"},
backgroundEdit_center_center:function(){return"Centered"},
backgroundEdit_right_center:function(){return"Centre right"},
backgroundEdit_left_bottom:function(){return"Bottom left"},
backgroundEdit_center_bottom:function(){return"Bottom middle"},
backgroundEdit_right_bottom:function(){return"Bottom right"},
backgroundEdit_color:function(){return"Color"},
backgroundEdit_image:function(){return"Image"},
backgroundEdit_position:function(){return"Position"},
backgroundEdit_repeat:function(){return"Repetition"},
backgroundEdit_preview:function(){return"Preview"},
backgroundEdit_background:function(){return"Back"},
backgroundEdit_transparent:function(){return"Transparent"},
backgroundEdit_light:function(){return"Light"},
backgroundEdit_dark:function(){return"Dark"},
exprEditor_dialogTitle:function(){return"Expression editor"},
exprEditor_defaultRenderingValue:function(){return"No value"},
geometryEdit_dialogTitle:function(){return"Dimensions"},
geometryEdit_top:function(){return"Top"},
geometryEdit_left:function(){return"Left"},
geometryEdit_width:function(){return"Width"},
geometryEdit_height:function(){return"Height"},
formDataBinder_Data:function(){return"Data"},
formDataBinder_noDatePart:function(){return"None"},
formDataBinder_mandatory:function(){return"Mandatory"},
formDataBinder_true:function(){return"True"},
formDataBinder_false:function(){return"False"},
formDataBinder_nlField:function(){return"Field"},
formDataBinder_mapping:function(){return"Association"},
formDataBinder_mappingType:function(){return"Mapping type"},
formDataBinder_dataPolicy:function(){return"Data approval"},
formDataBinder_noMapping:function(){return"No association"},
formDataBinder_noSubscription:function(){return"No subscription"},
formDataBinder_nlServiceSubscribtion:function(){return"Subscription to a service"},
formDataBinder_Service:function(){return"Service"},
formDataBinder_requiredLog:function(){return"Error message"},
formDataBinder_minValue:function(){return"Minimum value"},
formDataBinder_maxValue:function(){return"Maximum value"},
formDataBinder_noDataFields:function(){return"No field found."},
formDataBinder_valueIfChecked:function(){return"Value if checked"},
formDataBinder_whichDatePart:function(){return"Edited section"},
formDataBinder_yearOn4:function(){return"Year (4 digits)"},
formDataBinder_yearOn2:function(){return"Year (2 digits)"},
formDataBinder_month:function(){return"Month"},
formDataBinder_day:function(){return"Day"},
formDataBinder_whichTimePart:function(){return"Part of the time"},
formDataBinder_hoursOn24:function(){return"Hours (24 hours)"},
formDataBinder_hoursOn12:function(){return"Hours (24 hours)"},
formDataBinder_minutes:function(){return"Minutes"},
formDataBinder_seconds:function(){return"Seconds"},
formDataBinder_msg_noFieldSelected:function(){return"No field selected"},
formDataBinder_err_cantBindTextToBool:function(){return"You cannot link a text entry with a boolean field. "},
jobProgressIndicator_listEmptyTextLabel:function(){return"Click 'Start' to launch the process."},
jobProgressIndicator_jobLogLabel:function(){return"Log of the process"},
jobProgressIndicator_titleLabel:function(){return"Process"},
jobProgressIndicator_startLabel:function(){return"Start"},
jobProgressIndicator_stopLabel:function(){return"Cancel"},
jobProgressIndicator_closeLabel:function(){return"Close"},
jobProgressIndicator_resumeLabel:function(){return"Continue"},
jobProgressIndicator_displayLogLabel:function(){return"view log"},
jobProgressIndicator_hideLogLabel:function(){return"hide log"},
jobProgressIndicator_initMsgLabel:function(){return"You are about to launch a process."},
jobProgressIndicator_inProgressLabel:function(){return"Processing..."},
jobProgressIndicator_doneLabel:function(){return"Process complete."},
jobProgressIndicator_doneWarningLabel:function(){return"Process complete (with warnings)"},
jobProgressIndicator_doneErrorLabel:function(){return"Process finished (with errors)."},
jobProgressIndicator_errorLabel:function(){return"Process failed."},
jobProgressIndicator_cancelLabel:function(){return"Process canceled."},
jobProgressIndicator_execErrorLabel:function(){return"Error when launching the process."},
jobProgressIndicator_cancelErrorLabel:function(){return"Error when canceling the process."},
jobProgressIndicator_getStatusErrorLabel:function(){return"Error during the process status analysis."},
jobProgressIndicator_currentSectionTitle_S:function(a){return"Processing job: "+a},
jobProgressIndicator_currentSectionNoTitle_I:function(a){return"Processing job # "+a+"."},
jobProgressIndicator_warningRunningJobConfirmClose:function(){return"Some jobs are currently being processed. Cancel and close? "},
htmlStylist_msg_noElementSelected:function(){return"No element selected."},
htmlStylist_Font:function(){return"Font"},
htmlStylist_Color:function(){return"Color"},
htmlStylist_Size:function(){return"Size"},
htmlStylist_Family:function(){return"Surname"},
htmlStylist_Border:function(){return"Border"},
htmlStylist_Dimensions:function(){return"Dimensions"},
htmlStylist_Width:function(){return"Width"},
htmlStylist_Height:function(){return"Height"},
htmlStylist_Background:function(){return"Back"},
htmlStylist_BorderAndBackground:function(){return"Border and Background"},
htmlStylist_Borders:function(){return"Borders"},
htmlStylist_Preview:function(){return"Preview"},
htmlStylist_Uniform:function(){return"Uniforms"},
htmlStylist_Different:function(){return"Different"},
htmlStylist_Style:function(){return"Style"},
htmlStylist_Top:function(){return"Top"},
htmlStylist_Right:function(){return"Right"},
htmlStylist_Bottom:function(){return"Bottom"},
htmlStylist_Left:function(){return"Left"},
htmlStylist_Image:function(){return"Image"},
htmlStylist_Alt:function(){return"Caption"},
htmlStylist_tooltip_Bold:function(){return"Bold"},
htmlStylist_tooltip_Italic:function(){return"Italic"},
htmlStylist_tooltip_Underline:function(){return"Underline"},
htmlStylist_tooltip_TextColor:function(){return"Change text colour"},
optionSwitcher_on:function(){return"Yes"},
optionSwitcher_off:function(){return"No"},
optionSwitcher_true:function(){return"True"},
optionSwitcher_false:function(){return"False"},
optionSwitcher_yes:function(){return"Yes"},
optionSwitcher_no:function(){return"No"},
loader_running_operations:function(){return"campaign(s) in progress"},
loader_default_text:function(){return"In progress..."},
load_more:function(){return"Show more entries"},
KPI_not_available:function(){return"N/D"},
dateSelector_noDateFound:function(){return"No date was found."},
dateSelector_chooseAYear:function(){return"Select a year"},
dateSelector_chooseAQuarter:function(){return"Select a quarter"},
dateSelector_chooseAMonth:function(){return"Select a month"},
dateSelector_chooseADate:function(){return"Select a date"},
dateSelector_searchInProgress:function(){return"Searching..."},
hyperLinkEdit_WebApp:function(){return"Web application"},
hyperLinkEdit_PUrl:function(){return"pUrl"},
hyperLinkEdit_target:function(){return"Open"},
hyperLinkEdit_target_self:function(){return"Normal"},
hyperLinkEdit_target_blank:function(){return"New window"},
hyperLinkEdit_webAppChoice:function(){return"Web application"},
hyperLinkEdit_Action:function(){return"Action"},
hyperLinkEdit_pUrlChoice:function(){return"pUrl"},
hyperLinkEdit_externalLinkChoice:function(){return"URL"},
hyperLinkEdit_mode:function(){return"Mode"},
hyperLinkEdit_label:function(){return"Label"},
hyperLinkEdit_ExternalLink:function(){return"External link"},
hyperLinkEdit_LabelTooComplex:function(){return"The content of the link is too complex to be edited here."},
commandBar_err_commandNullOrUndefined:function(){return"One command is null or undefined."},
colorPicker_Opacity:function(){return"Opacity"},
list_reportTitle:function(){return"Reports"},
explorer:function(){return"Explorer"},
disconnect:function(){return"Log off"},
welcome_S:function(a){return"Welcome "+a},
backLabel:function(){return"Back"},
dashboardBlock_labelOtherChoice:function(){return"More"},
dashboardBlock_labelSeeAll:function(){return"View all"},
dashboardBlock_labelSeeAllTooltip:function(){return"Browse to the full list"},
listConf_opSecurityTitle:function(){return"Operators or groups"},
more_lessText:function(){return"<< show less"},
more_moreText:function(){return">> show more"},
grid_moveRowUp:function(){return"Move up"},
grid_moveRowDown:function(){return"Move down"},
grid_addRow:function(){return"Add"},
grid_removeRow:function(){return"Delete line"},
grid_config:function(){return"Configuration"},
preview:function(){return"Preview"},
monoContentLabel:function(){return"Content"},
soap_bad_message_format:function(a,b){return"Unable to analyze error returned by server during the call of SOAP method '"+a+"' of service '"+b+"'."},
soap_failed:function(a,b){return"Error while calling SOAP method '"+a+"' of service '"+b+"'):"},
soap_string_part:function(a){return" '"+a+"'"},
soap_code_part:function(a){return"\nCode: '"+a+"'"},
soap_missing_response:function(a,b,c){return"Invalid XML response message from SOAP method '"+a+"' of service '"+a+"' (no node of path '"+c+"')."},
soap_bad_content_type:function(a,b,c,d){return"Error during SOAP call to the '"+a+"' URL (method '"+b+"' of service '"+c+"'). The '"+d+"' type of the response is invalid."},
soap_empty_response:function(a,b,c){return"Error during SOAP call to the '"+a+"' URL (method '"+b+"' of service '"+c+"'). The response is invalid."},
soap_no_fault_message:function(a,b,c){return"Error while calling SOAP method to URL '"+a+"' (method '"+b+"' of service '"+c+"'). The server has sent a HTTP response of code '%s' without any error message."},
soap_bad_response_code:function(a,b,c,d){return"Error while calling SOAP method to URL '"+a+"' (method '"+b+"' of service '"+c+"'). HTTP response code '"+d+"' is not a valid response code for a SOAP request."},
soap_invalid_soap_router:function(a){return"Invalid SOAP '"+a+"' router. Protocol not supported."},
soap_xml_parsing_failed:function(a,b){return"Unable to parse XML response message of SOAP method '"+a+"' of service '"+b+"'."},
soap_missing_out_param:function(a,b){return"Missing return parameter during call of SOAP method '"+a+"' of service '"+b+"'."},
soap_msg_type_mismatch:function(a,b){return"Argument of type '"+a+"' does not match expected type ('"+b+"') during the call of SOAP method '%s' of service '%s'."},
soap_bad_boolean:function(a){return"Text '"+a+"' Is not a valid Boolean"},
soap_toomany_out_param:function(a,b){return"Too many return parameters in SOAP message for the method '"+a+"' of service '"+b+"'."},
ajaxhelper_norendering:function(a){return"Unable to find the '"+a+"' HTML block to insert rendering."},
soap_exception:function(){return"Error when processing the SOAP call."},
soap_method:function(){return"Method"},
soap_service:function(){return"Service"},
soap_message:function(){return"Message"},
soap_details:function(){return"Details"},
ajax_empty:function(a){return"Empty response during call to the "+a+" URL."},
xml_dom_implementation_not_found:function(){return"Cannot create a DOM document since no implementation has been found"}}
var xtk_formbase={
missingParameter_s:function(a){return"Parameter '"+a+"' is invalid or missing."},
prefillFailed_s:function(a){return"Failed to preload data: "+a},
logIdRequiredUUID:function(){return"The _logId parameter also requires the _uuid parameter."},
menu_swap:function(){return"Pivot"},
menu_sort:function(){return"Sort from A to Z"},
menu_sortDesc:function(){return"Sort from Z to A"},
menu_up:function(){return"Up"},
menu_down:function(){return"Down"},
menu_left:function(){return"Move left"},
menu_right:function(){return"Move right"},
menu_rotate:function(){return"Turn"},
empty:function(){return"(empty)"},
total:function(){return"TOTAL"},
statistics:function(){return"Statistics"},
linkEdit_title_s:function(a){return"Please select a document '"+a+"'"},
dialog_defaultOk:function(){return"OK"},
dialog_cancel:function(){return"Cancel"},
data_missing:function(){return"One or more parameters are missing to display the table"}}
;(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function F(){return!1}function I(){return!0}function $(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function J(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(z.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function K(e){var t=Q.split(" "),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function ct(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ht(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function pt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function dt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function vt(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function mt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?vt(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),vt)}function gt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(at,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Ot(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?Nt:Ct;if(r>0)return n!=="border"&&s.each(i,function(){n||(r-=parseFloat(s.css(e,"padding"+this))||0),n==="margin"?r+=parseFloat(s.css(e,n+this))||0:r-=parseFloat(s.css(e,"border"+this+"Width"))||0}),r+"px";r=kt(e,t,t);if(r<0||r==null)r=e.style[t]||0;return r=parseFloat(r)||0,n&&s.each(i,function(){r+=parseFloat(s.css(e,"padding"+this))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+this+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+this))||0)}),r+"px"}function Zt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(zt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function en(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===$t,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=en(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=en(e,n,r,i,"*",o)),c}function tn(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function nn(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||_t.test(e)?r(e,i):nn(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)nn(e+"["+i+"]",t[i],n,r);else r(e,t)}function rn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function sn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function cn(){try{return new e.XMLHttpRequest}catch(t){}}function hn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function En(){return setTimeout(Sn,0),wn=s.now()}function Sn(){wn=t}function xn(e,t){var n={};return s.each(bn.concat.apply([],bn.slice(0,t)),function(){n[this]=e}),n}function Tn(e){if(!pn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){dn||(dn=n.createElement("iframe"),dn.frameBorder=dn.width=dn.height=0),t.appendChild(dn);if(!vn||!dn.createElement)vn=(dn.contentWindow||dn.contentDocument).document,vn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),vn.close();r=vn.createElement(e),vn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(dn)}pn[e]=i}return pn[e]}function kn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function j(e){if(e===null||e===t)return!1;if(e.constructor!==B)return!1;for(var n in e)if(!e.hasOwnProperty(n))return!1;return!0}function F(e){return e!==null&&e!==t&&e.constructor===B&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function q(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(q,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/\d/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,d=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,g=/(?:^|:|,)(?:\s*\[)+/g,y=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,w=/(msie) ([\w.]+)/,E=/(mozilla)(?:.*? rv:([\w.]+))?/,S=/-([a-z]|[0-9])/ig,x=/^-ms-/,T=function(e,t){return(t+"").toUpperCase()},N=r.userAgent,C,k,L,A=Object.prototype.toString,O=Object.prototype.hasOwnProperty,M=Array.prototype.push,_=Array.prototype.slice,D=String.prototype.trim,P=Array.prototype.indexOf,H={};i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=p.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return _.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return r instanceof i.fn.init||(r=new i.fn.init),i.isArray(e)?M.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),k.add(e),this},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(_.apply(this,arguments),"slice",_.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:M,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a};var B={}.constructor,I=Object.getPrototypeOf?F:j;return i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;k.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").unbind("ready")}},bindReady:function(){if(k)return;k=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",L,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",L),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&q()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return e!=null&&h.test(e)&&!isNaN(e)},type:function(e){return e==null?String(e):H[A.call(e)]||"object"},isPlainObject:I,isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(d.test(t.replace(v,"@").replace(m,"]").replace(g,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(x,"ms-").replace(S,T)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:D?function(e){return e==null?"":D.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?M.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(P)return P.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=_.call(arguments,2),o=function(){return e.apply(n,s.concat(_.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=y.exec(e)||b.exec(e)||w.exec(e)||e.indexOf("compatible")<0&&E.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()}),C=i.uaMatch(N),C.browser&&(i.browser[C.browser]=!0,i.browser.version=C.version),i.browser.webkit&&(i.browser.safari=!0),f.test("\u00a0")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?L=function(){n.removeEventListener("DOMContentLoaded",L,!1),i.ready()}:n.attachEvent&&(L=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",L),i.ready())}),typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments)},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var e=n.createElement("div"),t=n.documentElement,r,i,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w;e.setAttribute("className","t"),e.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>",r=e.getElementsByTagName("*"),i=e.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=e.getElementsByTagName("input")[0],l={leadingWhitespace:e.firstChild.nodeType===3,tbody:!e.getElementsByTagName("tbody").length,htmlSerialize:!!e.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,unknownElems:!!e.getElementsByTagName("nav").length,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:e.className!=="t",enctype:!!n.createElement("form").enctype,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,l.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,l.optDisabled=!u.disabled;try{delete e.test}catch(E){l.deleteExpando=!1}!e.addEventListener&&e.attachEvent&&e.fireEvent&&(e.attachEvent("onclick",function(){l.noCloneEvent=!1}),e.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),l.radioValue=a.value==="t",a.setAttribute("checked","checked"),e.appendChild(a),c=n.createDocumentFragment(),c.appendChild(e.lastChild),l.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="",e.style.width=e.style.paddingLeft="1px",h=n.getElementsByTagName("body")[0],d=n.createElement(h?"div":"body"),v={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&s.extend(v,{position:"absolute",left:"-999px",top:"-999px"});for(b in v)d.style[b]=v[b];d.appendChild(e),p=h||t,p.insertBefore(d,p.firstChild),l.appendChecked=a.checked,l.boxModel=e.offsetWidth===2,"zoom"in e.style&&(e.style.display="inline",e.style.zoom=1,l.inlineBlockNeedsLayout=e.offsetWidth===2,e.style.display="",e.innerHTML="<div style='width:4px;'></div>",l.shrinkWrapBlocks=e.offsetWidth!==2),e.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",m=e.getElementsByTagName("td"),w=m[0].offsetHeight===0,m[0].style.display="",m[1].style.display="none",l.reliableHiddenOffsets=w&&m[0].offsetHeight===0,e.innerHTML="",n.defaultView&&n.defaultView.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",e.appendChild(f),l.reliableMarginRight=(parseInt((n.defaultView.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(e.attachEvent)for(b in{submit:1,change:1,focusin:1})y="on"+b,w=y in e,w||(e.setAttribute(y,"return;"),w=typeof e[y]=="function"),l[b+"Bubbles"]=w;return s(function(){var e,t,r,i,o,u,a=1,f="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",c="visibility:hidden;border:0;",p="style='"+f+"border:5px solid #000;padding:0;'",v="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>";h=n.getElementsByTagName("body")[0];if(!h)return;e=n.createElement("div"),e.style.cssText=c+"width:0;height:0;position:static;top:0;margin-top:"+a+"px",h.insertBefore(e,h.firstChild),d=n.createElement("div"),d.style.cssText=f+c,d.innerHTML=v,e.appendChild(d),t=d.firstChild,r=t.firstChild,o=t.nextSibling.firstChild.firstChild,u={doesNotAddBorder:r.offsetTop!==5,doesAddBorderForTableAndCells:o.offsetTop===5},r.style.position="fixed",r.style.top="20px",u.fixedPosition=r.offsetTop===20||r.offsetTop===15,r.style.position=r.style.top="",t.style.overflow="hidden",t.style.position="relative",u.subtractsBorderForOverflowNotVisible=r.offsetTop===-5,u.doesNotIncludeMarginInBodyOffset=h.offsetTop!==a,h.removeChild(e),d=e=null,s.extend(l,u)}),d.innerHTML="",p.removeChild(d),d=c=o=u=h=f=e=a=null,l}(),s.boxModel=s.support.boxModel;var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[s.expando]:e[s.expando]&&s.expando,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[s.expando]=p=++s.uuid:p=s.expando),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[s.expando]:s.expando;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)?t=t:t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" "));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[s.expando]:e.removeAttribute?e.removeAttribute(s.expando):e[s.expando]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length)return o?(n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r)):t;return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;return!e||f===3||f===8||f===2?t:i&&n in s.attrFn?s(e)[n](r):"getAttribute"in e?(a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S)),r!==t?r===null?(s.removeAttr(e,n),t):u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r):u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)):s.prop(e,n,r)},removeAttr:function(e,t){var n,r,i,o,u=0;if(e.nodeType===1){r=(t||"").split(v),o=r.length;for(;u<o;u++)i=r[u].toLowerCase(),n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1)}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;return!e||a===3||a===8||a===2?t:(u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n])},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/\.(.*)$/,C=/^(?:textarea|input|select)$/i,k=/\./g,L=/ /g,A=/[^\w\s.|`]/g,O=/^([^\.]*)?(?:\.(.+))?$/,M=/\bhover(\.\S+)?/,_=/^key/,D=/^(?:mouse|contextmenu)|click/,P=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,H=function(e){var t=P.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},B=function(e,t){return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||e.id===t[2])&&(!t[3]||t[3].test(e.className))},j=function(e){return s.event.special.hover?e:e.replace(M,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=j(n).split(" ");for(l=0;l<n.length;l++){c=O.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,namespace:p.join(".")},v),o&&(d.quick=H(o),!d.quick&&s.expr.match.POS.test(o)&&(d.isPositional=!0)),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r){var i=s.hasData(e)&&s._data(e),o,u,a,f,l,c,h,p,d,v,m;if(!i||!(h=i.events))return;t=j(t||"").split(" ");for(o=0;o<t.length;o++){u=O.exec(t[o])||[],a=u[1],f=u[2];if(!a){f=f?"."+f:"";for(c in h)s.event.remove(e,c+f,n,r);return}p=s.event.special[a]||{},a=(r?p.delegateType:p.bindType)||a,v=h[a]||[],l=v.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(n||f||r||p.remove)for(c=0;c<v.length;c++){m=v[c];if(!n||n.guid===m.guid)if(!f||f.test(m.namespace))if(!r||r===m.selector||r==="**"&&m.selector)v.splice(c--,1),m.selector&&v.delegateCount--,p.remove&&p.remove.call(e,m)}else v.length=0;v.length===0&&l!==v.length&&((!p.teardown||p.teardown.call(e,f)===!1)&&s.removeEvent(e,a,i.handle),delete h[a])}s.isEmptyObject(h)&&(d=i.handle,d&&(d.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"",(o||!i)&&n.preventDefault();if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,p=null;for(h=i.parentNode;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length;c++){h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r);if(n.isPropagationStopped())break}return n.type=u,n.isDefaultPrevented()||(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=(s.event.special[n.type]||{}).handle,f=[],l,c,h,p,d,v,m,g,y,b,w;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click"))for(h=n.target;h!=this;h=h.parentNode||this){d={},m=[];for(l=0;l<i;l++)g=r[l],y=g.selector,b=d[y],g.isPositional?b=(b||(d[y]=s(y))).index(h)>=0:b===t&&(b=d[y]=g.quick?B(h,g.quick):s(h).is(y)),b&&m.push(g);m.length&&f.push({elem:h,matches:m})}r.length>i&&f.push({elem:this,matches:r.slice(i)});for(l=0;l<f.length&&!n.isPropagationStopped();l++){v=f[l],n.currentTarget=v.elem;for(c=0;c<v.matches.length&&!n.isImmediatePropagationStopped();c++){g=v.matches[c];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=(a||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},focus:{delegateType:"focusin",noBubble:!0},blur:{delegateType:"focusout",noBubble:!0},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?I:F):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=I;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=I;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=I,this.stopPropagation()},isDefaultPrevented:F,isPropagationStopped:F,isImmediatePropagationStopped:F},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]=s.event.special[t]={delegateType:t,bindType:t,handle:function(e){var t=this,n=e.relatedTarget,r=e.handleObj,i=r.selector,o,u;if(!n||r.origType===e.type||n!==t&&!s.contains(t,n))o=e.type,e.type=r.origType,u=r.handler.apply(this,arguments),e.type=o;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(C.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;C.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),C.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=F;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=F),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.bind(t,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),_.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),D.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw"Syntax error, unrecognized expression: "+e};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var q=/Until$/,R=/^(?:parents|prevUntil|prevAll)/,U=/,/,z=/^.[^:#\[\.,]*$/,W=Array.prototype.slice,X=s.expr.match.POS,V={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(J(this,e,!1),"not",e)},filter:function(e){return this.pushStack(J(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?X.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=X.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack($(n[0])||$(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n),o=W.call(arguments);return q.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!V[e]?s.unique(i):i,(this.length>1||U.test(r))&&R.test(e)&&(i=i.reverse()),this.pushStack(i,e,o.join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var Q="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",G=/ jQuery\d+="(?:\d+|null)"/g,Y=/^\s+/,Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,et=/<([\w:]+)/,tt=/<tbody/i,nt=/<|&#?\w+;/,rt=/<(?:script|style)/i,it=/<(?:script|object|embed|option|style)/i,st=new RegExp("<(?:"+Q.replace(" ","|")+")","i"),ot=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/\/(java|ecma)script/i,at=/^\s*<!(?:\[CDATA\[|\-\-)/,ft={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},lt=K(n);ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,s.support.htmlSerialize||(ft._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){s(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s(arguments[0]).toArray()),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(G,""):null;if(typeof e=="string"&&!rt.test(e)&&(s.support.leadingWhitespace||!Y.test(e))&&!ft[(et.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Z,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&ot.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?ct(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,gt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!it.test(f)&&(s.support.checkClone||!ot.test(f))&&!s.support.unknownElems&&st.test(f)&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r=e.cloneNode(!0),i,o,u;if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){pt(e,r),i=dt(e),o=dt(r);for(u=0;i[u];++u)o[u]&&pt(i[u],o[u])}if(t){ht(e,r);if(n){i=dt(e),o=dt(r);for(u=0;i[u];++u)ht(i[u],o[u])}}return i=o=null,r},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!nt.test(l))l=t.createTextNode(l);else{l=l.replace(Z,"<$1></$2>");var c=(et.exec(l)||["",""])[1].toLowerCase(),h=ft[c]||ft._default,p=h[0],d=t.createElement("div");t===n?lt.appendChild(d):K(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=tt.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&Y.test(l)&&d.insertBefore(t.createTextNode(Y.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)mt(l[a]);else mt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||ut.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var yt=/alpha\([^)]*\)/i,bt=/opacity=([^)]*)/,wt=/([A-Z]|^ms)/g,Et=/^-?\d+(?:px)?$/i,St=/^-?\d/,xt=/^([\-+])=([\-+.\de]+)/,Tt={position:"absolute",visibility:"hidden",display:"block"},Nt=["Left","Right"],Ct=["Top","Bottom"],kt,Lt,At;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=kt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=xt.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(kt)return kt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Ot(e,t,r):(s.swap(e,Tt,function(){i=Ot(e,t,r)}),i)},set:function(e,t){if(!Et.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return bt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(yt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=yt.test(o)?o.replace(yt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=kt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Lt=function(e,n){var r,i,o;n=n.replace(wt,"-$1").toLowerCase();if(!(i=e.ownerDocument.defaultView))return t;if(o=i.getComputedStyle(e,null))r=o.getPropertyValue(n),r===""&&!s.contains(e.ownerDocument.documentElement,e)&&(r=s.style(e,n));return r}),n.documentElement.currentStyle&&(At=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;s===null&&o&&(i=o[t])&&(s=i);if(!Et.test(s)&&St.test(s)){n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left;try{r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)}catch(u){return s}}return s===""?"auto":s}),kt=Lt||At,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var Mt=/%20/g,_t=/\[\]$/,Dt=/\r?\n/g,Pt=/#.*$/,Ht=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Bt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,jt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,It=/^\/\//,qt=/\?/,Rt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ut=/^(?:select|textarea)/i,zt=/\s+/,Wt=/([?&])_=[^&]*/,Xt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Vt=s.fn.load,$t={},Jt={},Kt,Qt,Gt=["*/"]+["*"];try{Kt=i.href}catch(Yt){Kt=n.createElement("a"),Kt.href="",Kt=Kt.href}Qt=Xt.exec(Kt.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Vt)return Vt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(Rt,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ut.test(this.nodeName)||Bt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.bind(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?tn(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),tn(e,t),e},ajaxSettings:{url:Kt,isLocal:jt.test(Qt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Gt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Zt($t),ajaxTransport:Zt(Jt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?rn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=sn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Ht.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(Pt,"").replace(It,Qt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(zt),r.crossDomain==null&&(g=Xt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Qt[1]&&g[2]==Qt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Qt[3]||(Qt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),en($t,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Ft.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(qt.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Wt,"$1_="+x);r.url=T+(T===r.url?(qt.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Gt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=en(Jt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){y<2?S(-1,N):s.error(N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)nn(o,e[o],n,i);return r.join("&").replace(Mt,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var on=s.now(),un=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+on++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(un.test(t.url)||i&&un.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(un,c),t.url===f&&(i&&(l=l.replace(un,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var an=e.ActiveXObject?function(){for(var e in ln)ln[e](0,1)}:!1,fn=0,ln;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&cn()||hn()}:cn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,an&&delete ln[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++fn,an&&(ln||(ln={},s(e).unload(an)),ln[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var pn={},dn,vn,mn=/^(?:toggle|show|hide)$/,gn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,yn,bn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],wn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(xn("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Tn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(xn("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(xn("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Tn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],mn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=gn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:xn("show",1),slideUp:xn("hide",1),slideToggle:xn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=wn||En(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!yn&&(yn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=wn||En(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(yn),yn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now))}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var Nn=/^t(?:able|d|h)$/i,Cn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=kn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!Nn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Cn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Cn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=kn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=kn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s})(window)
;"use strict";var NL=this.NL||{};NL._loaded||function(){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.getPrototypeOf&&Object.getPrototypeOf({}),r={NL:NL};NL.ns=function(e){var t=r;if(typeof e!="string")throw new Error("Can only create a namespace from a string");var n=e.split(".");for(var i=0;i<n.length;i++){var s=n[i];typeof t[s]=="undefined"&&(t[s]={}),t=t[s]}return t},NL.side=function(e){var t;return typeof window!="undefined"?t="client":typeof process=="undefined"?t="server":t="node",e===undefined?t:e===t},NL.isDevDebug=function(){var e=!1;return!NL.side("client")&&typeof getEnv!="undefined"&&getEnv("XTK_BUILD_DIR","none")!=="none"&&(e=!0),function(){return e}}(),NL.isEmpty=function(e){return typeof e=="undefined"||e===null||e.toString()===""||typeof e=="XML"&&e.length===0},NL.nvl=function(){if(arguments.length===0)return null;for(var e=0;e<arguments.length;e++)if(!NL.isEmpty(arguments[e]))return arguments[e];return arguments[arguments.length-1]},NL.coalesce=function(){for(var e=0;e<arguments.length;e++)if(!NL.isEmpty(arguments[e]))return arguments[e];return null},NL.isNundef=function(e){return e===null||e===undefined},NL.isDate=function(e){return t.call(e)==="[object Date]"},NL.isBoolean=function(e){return e===!0||e===!1||t.call(e)==="[object Boolean]"},NL.isString=function(e){return t.call(e)==="[object String]"},NL.isNumber=function(e){return t.call(e)==="[object Number]"},NL.isFinite=function(e){return NL.isNumber(e)&&isFinite(e)},NL.isNaN=function(e){return e!==e},NL.isFunction=function(e){return t.call(e)==="[object Function]"},NL.isXML=function(e){return typeof e=="xml"};var i={}.constructor,s=[].constructor;NL.isArray=function(e){return e===null||e===undefined?!1:e.constructor===s},NL.isObject=function(e){return e===null||e===undefined?!1:t.call(e)==="[object Object]"},NL.isPlainObject=function(e){if(e===null||e===undefined||e.constructor!==i)return!1;if(Object.getPrototypeOf)return Object.getPrototypeOf(e)===n;for(var t in e)if(!e.hasOwnProperty(t))return!1;return!0},NL.is=function(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"},NL.ns("NL.Utils"),NL.Utils.isArray=NL.isArray,NL.Utils.isObject=NL.isObject,NL.Utils.isPlainObject=NL.isPlainObject,NL.Utils.each=function(e,t){var n=e.length;if(e.length===+e.length)for(var r=0;r<n;r++){var i=e[r];if(t.call(i,r,i)===!1)break}else for(var s in e){var o=e[s];if(t.call(o,s,o)===!1)break}},NL.Utils.filter=function(e,t){var n=[];return NL.Utils.each(e,function(e,r){t.call(r,e,r)&&(n[n.length]=r)}),n},NL.Utils.find=function(e,t){var n;return NL.Utils.each(e,function(e,r){return t.call(r,e,r)?(n=r,!1):undefined}),n},NL.Utils.map=function(e,t){var n=[];return NL.Utils.each(e,function(e,r){var i=t.call(r,e,r);i!==undefined&&(n[n.length]=i)}),n.concat.apply([],n)},NL.Utils.extend=function(){var e=!1,t=arguments[0]||{},n=1,r=arguments.length;typeof t=="boolean"&&(e=t,t=arguments[1]||{},n=2);var i=null,s=!1;for(;n<r;n++){var o=arguments[n];if(o)for(var u in o){var a=o[u];if(a===t)continue;if(e&&a&&(NL.Utils.isPlainObject(a)||(s=NL.Utils.isArray(a)))){var f=t[u];s?(i=NL.Utils.isArray(f)?f:[],s=!1):i=f&&NL.Utils.isPlainObject(f)?f:{},t[u]=NL.Utils.extend(!0,i,a)}else a!==undefined&&(t[u]=a)}}return t},NL.Utils.indexOf=function(e,t){if(this==null)throw new TypeError;var n=Object(t),r=n.length>>>0;if(r===0)return-1;var i=0;arguments.length>0&&(i=Number(arguments[2]),i!=i?i=0:i!=0&&i!=Infinity&&i!=-Infinity&&(i=(i>0||-1)*Math.floor(Math.abs(i))));if(i>=r)return-1;var s=i>=0?i:Math.max(r-Math.abs(i),0);for(;s<r;s++)if(s in n&&n[s]===e)return s;return-1},NL.Utils.fastIndexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},NL.Utils.isEqual=function(e,t){if(e===t)return!0;if(e===undefined||t===undefined)return!1;if(e===null||t===null)return!1;if(NL.isDate(e)&&NL.isDate(t))return e.getTime()===t.getTime();if(e.isEqual&&NL.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&NL.isFunction(t.isEqual))return t.isEqual(e);var n=!1;if(NL.isPlainObject(e)||NL.isPlainObject(t)){n=!0;var r=0,i=0;return NL.Utils.each(e,function(e,i){return++r,n&=NL.Utils.isEqual(i,t[e]),n?!0:!1}),n&&(NL.Utils.each(t,function(){++i}),n=r===i),n}return NL.isArray(e)||NL.isArray(t)?e.length!==t.length?!1:(n=!0,NL.Utils.each(e,function(e,r){return n=n&&NL.Utils.isEqual(r,t[e]),n?!0:!1}),n):n},NL.Utils.count=function(e){var t,n=0;if(NL.isArray(e)||NL.isString(e))n=e.length;else{if(!NL.isObject(e))throw typeof e+" is not supported for count";for(t in e)n++}return n},NL.Utils.getValueFromObj=function(t,n,r){var i,s,o=t,u=r;NL.isString(n)&&(n=[n]);if(!NL.isNundef(o)){i=0;while(i<n.length&&o!==!1)s=n[i],!NL.isNundef(o)&&o.hasOwnProperty(s)?o=o[s]:o=!1,i++;o&&(u=o)}return u},NL.Utils.debounce=function(e,t,n){var r;return function(){function u(){n||e.apply(s,o),r=null}var s=this,o=arguments;r?clearTimeout(r):n&&e.apply(s,o),r=setTimeout(u,t||100)}},NL.ns("NL.OO"),NL.OO.extend=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.baseConstructor=t,e.superClass=t.prototype},function(){var e={};NL.OO.defineProtocol=function(t,n){NL.assert(e[t]===undefined);var r={methods:[]};e[t]=r,NL.Utils.each(n,function(e,t){r.methods.push(t)})},NL.OO.implementsProtocol=function(t,n){var r=e[n];if(NL.isNundef(r))return NL.assert(!1),!1;var i=r.methods,s=!0;return NL.Utils.each(i,function(e,n){return NL.isFunction(t[n])?!0:(s=!1,!1)}),s}}();var o=function(){this.reset()};o.prototype.nextVal=function(){return this.current++,this.prefix+this.current},o.prototype.reset=function(){this.current=0,this.prefix="seq"};var u=function(){var e=new o;return{nextVal:function(){return e.nextVal()},reset:function(){return e.reset()}}}();NL.Utils.sequence=function(){return u},NL.toDebugString=function(e){function t(e,t){return NL.isFunction(t)?t.toSource():t}return e?NL.side("server")?NL.isString(e)?e:typeof e=="xml"?e.toXMLString():JSON.stringify(e,t,2):e:e};if(NL.side("server"))this.console={log:function(e){logWarning("!console.log: "+e)},error:function(e){logWarning("!console.error: "+e)},warn:function(e){logWarning("!console.warn: "+e)}};else if(NL.side("client")){try{window.frameElement&&window.parent.hookConsole&&window.parent.hookConsole(window)}catch(a){}this.console===undefined&&(this.console={log:function(e){},error:function(e){},warn:function(e){}})}var f,l,c;if(NL.side("server"))NL.log=f={error:logError,err:logError,warn:logWarning,info:logInfo,verbose:logVerbose,debug:function(e){return NL.isDevDebug()?logWarning("(DEBUG) "+NL.toDebugString(e)):!0}};else{c=console,l=c,NL.log=f={error:function(){return h(null,"error",arguments)},err:function(){return h(null,"error",arguments)},warn:function(){return h(null,"warn",arguments)},info:function(){return h(null,"log",arguments)},verbose:function(){return h("(VERBOSE) ","log",arguments)},debug:function(){return h("(DEBUG) ","log",arguments)}};var h=function(e,t,n){var r=e?[e]:[];for(var i=0;i<n.length;i++)r.push(n[i]);var s=l[t],o;s.apply?o=s.apply(l,r):l[t](r.join(" "));if(t==="error")throw new Error(r.join(" "));return o}}NL._hookConsole=function(e){var t=l;return l=e?e:c,t},NL._hookLogger=function(e){var t=_activeLogger;return NL.log=e?e:f,t},NL.route=function(e,t){switch(t){case"reverse_img":return"/"+e.toString().replace(/:/,"/img/");case"reverse":return"/"+e.toString().replace(/:/,"/");default:var n=e.replace(/^\/nl\/(core|tp)\/(.*)$/,"xtk:$2").replace(/^\/(\w+)\/(.*)$/,"$1:$2");return n}},NL.assert=function(e,t){return e||NL.log.err(t||'The value "'+e+'" failed an NL assertion'),!0},NL.assert(NL.side("client")||NL.side("server")&&!NL.session,"nl.js loaded twice?"),NL.ns("NL.session"),NL.side("server")&&(NL.session.buildNumber=application.buildNumber,NL.session.instanceName=application.instanceName,NL.session.operator={},NL.session.operator.id=application.operator.id,NL.session.operator.login=application.operator.login,NL.session.operator.CS=application.operator.computeString,NL.session.hasCampaign=application.hasPackage("nms:campaign"),NL.session.hasInteraction=application.hasPackage("nms:interaction"),NL.session.hasCentralLocal=application.hasPackage("nms:centralLocal"),NL.session.hasMRM=application.hasPackage("nms:mrm"),NL.session.hasMessageCenter=application.hasPackage("nms:messageCenter"),NL.session.hasPURL=application.hasPackage("nms:purl"),NL.session.hasLead=application.hasPackage("crm:lead"),NL.session.hasSocial=application.hasPackage("nms:social"),NL.session.hasMobileApp=application.hasPackage("nms:mobileApp"),NL.session.hasSurvey=application.hasPackage("nms:survey"));if(NL.side("client")){NL.ConfigManager=function(e,t,n){this._separator="#",this._prefix=e+"#"+t+"#",this._localStorage=n,this._cache={}},NL.ConfigManager.prototype._getNormalizedKey=function(e){return NL.isEmpty(e)&&this._invalidKey(e),NL.isArray(e)?e=e.join(this._separator):NL.isString(e)||this._invalidKey(e),this._prefix+e},NL.ConfigManager.prototype._invalidKey=function(e){throw new Error("Invalid key used in NL.ConfigManager ["+e+"]")},NL.ConfigManager.prototype.get=function(e,t){if(!this._localStorage)return t;e=this._getNormalizedKey(e);var n=this._cache[e];if(n===undefined){try{n=JSON.parse(this._localStorage.getItem(e))||t}catch(r){n=t}this._cache[e]=n}return n},NL.ConfigManager.prototype.set=function(e,t){if(!this._localStorage)return;if(!NL.isPlainObject(t))throw new Error("Invalid value used in NL.ConfigManager.set ["+t+"] for key ["+e+"]");e=this._getNormalizedKey(e),this._cache[e]=t,this._localStorage.setItem(e,JSON.stringify(t))},NL.ConfigManager.prototype.unset=function(e){if(!this._localStorage)return;e=this._getNormalizedKey(e),delete this._cache[e],this._localStorage.removeItem(e)},NL.ConfigManager.prototype.reset=function(){if(!this._localStorage)return;for(var e in this._localStorage){if(!this._localStorage.hasOwnProperty(e))continue;e.indexOf(this._prefix)===0&&this._localStorage.removeItem(e)}this._cache={}};var p=this;NL.session.initConfManager=function(){NL.session.confManager=new NL.ConfigManager(NL.session.hostName,NL.session.operator.login,p.localStorage)}}}.call(this),NL._loaded||NL.side("server")&&(NL.server=function(){return NL.server},NL.server._libsLoaded={},NL.server.require=function(e){return this._libsLoaded[e]||(this._libsLoaded[e]=!0,loadLibrary(e)),this},NL.server.reset=function(){return logWarning("6.1pre-GA compat - You can drop calls to NL.server.reset() (or redeploy report/webapp)"),this}),NL._loaded||(NL.side("server")?NL.require=function(e){return NL.server.require(e)}:NL.require=function(){return this}),NL._loaded||NL.side("server")&&(NL._initClientSupport=function(){NL.require("/nl/core/srvloader.js")},NL.init=function(){NL.session.setLocale&&NL.session.setLocale(getCurrentLocale()),NL.session.setTimezone&&NL.session.setTimezone(application.getCurrentTimezone())}),NL._loaded=!0
;"use strict";function IEFixImage(){if(this.src.indexOf(".png")!==-1){var e=this.src;this.src="/xtk/img/blank.gif",this.runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')"}else this.src.indexOf(".bmp")!==-1&&(this.style.filter="progid:DXImageTransform.Microsoft.Chroma(color=#FF00FF)")}function Navigator(){}function DateIsDateTime(e){return typeof e!="string"?!1:e.length>10}function UIController(){this.ctx=null,this.aFileXPath=[],this.soapRouterUrl=window.location.protocol+"//"+r_windowLocation+"/nl/jsp/soaprouter.jsp",this.workingTimeZone=null,this.formId=null,this.observers=new NL.Utils.Hash,this.childrenObservers=[];if(typeof Spinner=="function"){var e={lines:12,length:7,width:6,radius:10,color:"#8CAAE6",speed:1,trail:100,shadow:!1};this.spinner=new Spinner(e)}else this.spinner=null}function HelpBubble(e,t,n){this.parentElement=e,this.helpBubbleContent=t,this.options=n;var r=this.NormaliseParameters();if(!r)throw"Wrong parameters. Check them before calling the HelpBubble constructor.";var i=this;if(i.options.eAttachmentMode===HelpBubbleOptions.EAttachmentMode.ON_CLICK)i.helpBubbleContent.link=e,e.onclick=function(t){var n=HelpBubbleHelper.getHelpBubble();return!n.bIsDisplayed||n.link!==e?(n.helpBubbleContainer.onmouseout=null,HelpBubbleHelper.setClassNames(i.options.strClassNames),HelpBubbleHelper.displayHelpBubble(t,i.helpBubbleContent,i.options)):HelpBubbleHelper.hideHelpBubble(),!1};else{var s,o=function(e){s=MouseEventHelper.getCoordinates(e)},u=function(t){var n=HelpBubbleHelper.getHelpBubble();if(n.bIsDisplayed&&n.bWasDisplayedOnOver){var r=MouseEventHelper.getCoordinates(t),o=MouseEventHelper.getDistance(s,r);o>i.options.iRedrawingDistance&&(HelpBubbleHelper.displayHelpBubble(t,i.helpBubbleContent,i.options),s=r)}HelpBubbleHelper.timerRef=setTimeout(function(){e.onmousemove=u},200),e.onmousemove=null};e.onmouseover=function(t){var n=HelpBubbleHelper.getHelpBubble();clearTimeout(HelpBubbleHelper.timerRef),n.bIsDisplayed||(HelpBubbleHelper.setClassNames(i.options.strClassNames),s=MouseEventHelper.getCoordinates(t),HelpBubbleHelper.timerRef=setTimeout(function(){n.helpBubbleContainer.onmouseout=e.onmouseout,HelpBubbleHelper.displayHelpBubble(s,i.helpBubbleContent,i.options),i.options.bFollowMouse?e.onmousemove=u:e.onmousemove=null},i.options.iTimeout),e.onmousemove=o)},e.onmouseout=function(t){var n=MouseEventHelper.getEventOutTarget(t),r=HelpBubbleHelper.getHelpBubble();while(n&&n!==e&&n!==r)n=n.parentNode;n||(clearTimeout(HelpBubbleHelper.timerRef),e.onmousemove=null,r.bWasDisplayedOnOver&&HelpBubbleHelper.hideHelpBubble())}}}function HelpBubblePair(e,t,n,r){this.onOverBubble=new HelpBubble(e,t,n);var i=e.lastChild;while(i&&i.nodeName!=="img"&&i.nodeName!=="IMG")i=i.previousSibling;i&&(this.onClickBubble=new HelpBubble(i,t,r))}function ShowLoading(e){var t=document.getElementById("overToDisable");t!==null&&(t.style.display=e?"":"none");var n=document.getElementById("divLoading");n!==null&&(n.style.display=e?"":"none"),e&&document.controller&&document.controller.spinner&&document.getElementById("jsSpinner")&&document.controller.spinner.spin(document.getElementById("jsSpinner"))}var isGecko=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("gecko")!==-1&&e.indexOf("safari")===-1;return function(){return t}}(),isAppleWebKit=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("applewebkit")!==-1;return function(){return t}}(),isKonqueror=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("konqueror")!==-1;return function(){return t}}(),isSafari=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("safari")!==-1;return function(){return t}}(),isIOs=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1;return function(){return t}}(),isOmniweb=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("omniweb")!==-1;return function(){return t}}(),isOpera=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("opera")!==-1;return function(){return t}}(),isAol=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("aol")!==-1;return function(){return t}}(),isIE=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("msie")!==-1&&!isOpera()&&e.indexOf("webtv")===-1;return function(){return t}}(),getIEVersion=function(){var e=-1;if(isIE()){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(navigator.userAgent)!==null&&(e=parseFloat(RegExp.$1))}return function(){return e}}(),isMozilla=function(){var e=navigator.userAgent.toLowerCase(),t=isGecko()&&e.indexOf("gecko/")+14===e.length;return function(){return t}}(),isNS=function(){var e=navigator.userAgent.toLowerCase(),t=isGecko()?e.indexOf("netscape")!==-1:e.indexOf("mozilla")!==-1&&!isOpera()&&!isSafari()&&e.indexOf("spoofer")===-1&&e.indexOf("compatible")===-1&&e.indexOf("webtv")===-1&&e.indexOf("hotjava")===-1;return function(){return t}}();Navigator.prototype.fixImage=function(e){isIE()&&(e.onload=IEFixImage)},UIController.prototype=new Navigator,UIController.prototype.OBSERVE_XPATH=1,UIController.prototype.OBSERVE_CHILDREN=2,UIController.prototype.registerObserver=function(e,t,n,r,i){var s={object:t,method:n,name:r,mode:i};if(i===this.OBSERVE_XPATH){var o=this.observers.get(e);typeof o=="undefined"?(o=new Array(s),this.observers.set(e,o)):o.push(s)}else s.xpath=e,this.childrenObservers.push(s);return s},UIController.prototype.notifyAllObservers=function(e,t,n){for(var r in this.observers.items)if(this.observers.items.hasOwnProperty(r)){if(typeof e!="undefined"&&r.indexOf(e)!==0)continue;var i=this.observers.get(r),s=t;if(typeof s=="undefined"||r!==e)s=getXPathValue(this.ctx,r),typeof e=="undefined"&&this.setValue(r+"_init",s);for(var o=0;o<i.length;o++){var u=i[o];u&&n!==u.name&&u.method.call(u.object,r,s)}}var a=this.childrenObservers.length;for(var o=0;o<a;o++){var u=this.childrenObservers[o],s=t;if(typeof s=="undefined"||u.xpath!==e)s=findElement(this.ctx,u.xpath);n!==u.name&&(typeof e=="undefined"||e.indexOf(u.xpath)===0)&&u.method.call(u.object,e?e:u.xpath,s)}},UIController.prototype.resetObservers=function(){for(var e in this.observers.items)if(this.observers.items.hasOwnProperty(e)){var t=getXPathValue(this.ctx,e+"_init");this.setValue(e,t)}},UIController.prototype.isModifiedObservers=function(){for(var e in this.observers.items)if(this.observers.items.hasOwnProperty(e)){var t=getXPathValue(this.ctx,e),n=getXPathValue(this.ctx,e+"_init");if(t!==n)return!0}return!1},UIController.prototype.setTimeZone=function(e){NL.session.setTimezone(e),this.workingTimeZone=NL.session.timezone},UIController.prototype.setNumberValue=function(e,t){var n=NL.Locale.parseNumber(t,"");setXPathValue(this.ctx.documentElement,e,n),this.notifyAllObservers(e,n)},UIController.prototype.setValue=function(e,t,n,r){setXPathValue(this.ctx.documentElement,e,t,r),this.notifyAllObservers(e,t,n)},UIController.prototype.setTimestamp=function(e,t,n){var r=this.workingTimeZone.browserToLocale(t);this.setValue(e,NL.XTK.formatDateTime(r,""),n)},UIController.prototype.getTimestamp=function(e){if(!DateIsDateTime(e))return NL.XTK.parseDateOnly(e,null);var t=NL.XTK.parseDateTime(e,null);if(t!==null)return this.workingTimeZone.localeToBrowser(t)},UIController.prototype.setDateValue=function(e,t,n,r){var i=getXPathValue(this.ctx,e),s=null;try{s=NL.XTK.parseDateTime(i,"")}catch(o){}if(s&&t!==""){var u=["H4","H2","MI","DD","MM","MN","Y2","Y4"];for(var a=0;a<u.length;a++){var f=document.getElementById(r+"_"+u[a]);f&&NL.Date.setDatePart(s,u[a],f.value)}this.setTimestamp(e,s,r)}else{var l,c;if(i!==null&&i.length>0){var h=i.split(/[ T]/);l=h[0].split(/[\/\-]/);var c=null;h[1]?c=h[1].split(":"):c=["XX","XX","XX"]}else l=["XXXX","XX","XX"],c=["XX","XX","00"];t===""&&(t="XX");if(n==="Y4"||n==="Y2")t==="XX"?l[0]="XXXX":l[0]=t;else{var p=NL.String.padLeft(t,"0",2);n==="MN"||n==="MM"?l[1]=p:n==="DD"?l[2]=p:n==="H4"||n==="H2"?c[0]=p:n==="MI"&&(c[1]=p)}var d=l.join("-")+" "+c.join(":");if(d.indexOf("X")===-1)d=NL.XTK.formatDateTime(NL.XTK.parseDateTime(d,null),"");else{var v=d.indexOf("Z");v>-1&&(d=d.substring(0,v))}this.setValue(e,d,r)}},UIController.prototype.getValue=function(e){return getXPathValue(this.ctx,e)},UIController.prototype.setCellVisibility=function(e,t){function n(e,t){e!==null&&typeof e.style!="undefined"&&(e.style.display=t?"":"none")}n(document.getElementById(e+"-label-left"),t),n(document.getElementById(e+"-cell"),t),n(document.getElementById(e+"-label-right"),t)},UIController.prototype.submit=function(e,t,n,r,i){for(var s in this.observers.items)if(this.observers.items.hasOwnProperty(s)){var o=this.observers.get(s);for(var u=0;u<o.length;u++)if(typeof o[u].object.onSubmit=="function"&&o[u].object.onSubmit.call(o[u].object)===!1)return!1}var a=this.childrenObservers.length;for(var u=0;u<a;u++){var f=this.childrenObservers[u];if(typeof f.object.onSubmit=="function"&&f.object.onSubmit.call(f.object)===!1)return!1}var l=document.getElementById(this.formId?this.formId:"page-form"),c=!1;if(!r)for(var h in this.aFileXPath)if(this.aFileXPath.hasOwnProperty(h)&&l[h].value.toString().length>0){c=!0;break}l.userAction?l.userAction.value=e:l.action.value=e,typeof n=="string"&&(l.transition.value=n);if(!c||e!=="next"&&e!=="submit")typeof t=="string"&&t.length>0&&(l.target=t),l.ctx.value=toXMLString(this.ctx),!i&&(!t||t==="_self"||t==="_parent")&&ShowLoading(!0);else{var p=new HtmlDialog(xtk_core.fileUploading(),"OK",this,!0);p.buttonOk.style.display="none",p.buttonCancel.style.display="none",p.setSize("30em"),p.show(),l.enctype="multipart/form-data",isIE()&&(l.setAttribute("enctype","multipart/form-data"),l.setAttribute("encoding","multipart/form-data")),l.action="/nl/jsp/uploadFile.jsp",l.target="uploadFileTarget",this.formTarget=t}return l.submit(),!0},UIController.prototype.addFileInput=function(e,t){this.aFileXPath[e]=t},UIController.prototype.uploadFileCallBack=function(e){var t=document.getElementById("page-form");for(var n in this.aFileXPath)this.aFileXPath.hasOwnProperty(n)&&(t[n].value="");if(e)for(var r=0;r<e.length;r++){var i=this.aFileXPath[e[r].paramName];this.setValue(i+"/@md5",e[r].md5),this.setValue(i+"/@originalName",e[r].fileName),this.setValue(i+"/@id",0)}t.action="",t.target="",isIE()?(t.setAttribute("enctype","application/x-www-form-urlencoded"),t.setAttribute("encoding","application/x-www-form-urlencoded")):t.enctype="",this.submit(t.userAction.value,this.formTarget,t.transition.value,!0,!0)},UIController.prototype.changeFileInputVisibiliy=function(e,t){t?(document.getElementById(e).style.display="inline",document.getElementById(e).disabled=!1,document.getElementById(e+"-edit").style.display="none",document.getElementById(e+"-fileName").style.display="inline"):document.getElementById(e).value.length===0&&(document.getElementById(e).style.display="none",document.getElementById(e).disabled=!0,document.getElementById(e+"-edit").style.display="inline",document.getElementById(e+"-fileName").style.display="none",document.getElementById(e+"-downloadLink")&&(document.getElementById(e+"-downloadLink").style.display="inline"))};var MouseEventHelper={};MouseEventHelper.getEvent=function(e){return e||window.event||{pageX:0,pageY:0}},MouseEventHelper.getEventTarget=function(e){var t=this.getEvent(e);return t.target||t.srcElement},MouseEventHelper.getEventOutTarget=function(e){var t=this.getEvent(e);return t.relatedTarget||t.toElement},MouseEventHelper.getCoordinates=function(e){var t=this.getEvent(e),n=t.pageX||t.x+document.documentElement.scrollLeft||0,r=t.pageY||t.y+document.documentElement.scrollTop||0;return{pageX:n,pageY:r}},MouseEventHelper.getDistance=function(e,t){return Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))},MouseEventHelper.stopBubbling=function(e){var t=this.getEvent(e);t&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())};var HTMLHelper={};HTMLHelper.getAbsolutePosition=function(e){var t=0,n=0;while(e.offsetParent)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{x:t,y:n}},HTMLHelper.getStyle=function(e,t){var n;e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t));if(!n&&t.search(/-/)===-1){var r=function(e){return"-"+e.toLowerCase()};t=t.replace(/[A-Z]/,r),n=HTMLHelper.getStyle(e,t)}return n},HTMLHelper.setChild=function(e,t,n){if(typeof t!="string"||t===""&&!!n){if(typeof t!="object")throw"HTMLHelper.setChild : wrong parameters";e.innerHTML="",e.appendChild(t)}else e.innerHTML=t},HTMLHelper.setStyle=function(e,t){if(typeof t!="string")return;isIE()&&e.style.setAttribute?e.style.setAttribute("cssText",t):e.setAttribute("style",t)};var clone=function(e){if(!e||typeof e!="object")return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=clone(e[n]));return t},HelpBubbleHelper={};HelpBubbleHelper.setHelpBubbleSkeletonParent=function(e){if(!e||typeof e!="object")throw"HelpBubbleHelper.setHelpBubbleSkeletonParent : Wrong parameter";this.ndHelpBubbleSkeletonParent=e},HelpBubbleHelper.getHelpBubbleSkeletonParent=function(){return this.ndHelpBubbleSkeletonParent||document.getElementsByTagName("body")[0]},HelpBubbleHelper.getHelpBubble=function(){if(!this.helpBubbleSkeleton){var e=this.getHelpBubbleSkeletonParent();if(!e)throw"No suitable parent was found to attach the skeleton to. Please specify one by calling setHelpBubbleSkeletonParent with an appropriate html element.";var t=e.onclick;e.onclick=function(e){t&&t(e),HelpBubbleHelper.hideHelpBubble()},this.helpBubbleSkeleton=this.createHelpBubble(e);if(!this.helpBubbleSkeleton)throw"Couldn't attach the helpBubble skeleton to its parent node!"}return this.helpBubbleSkeleton},HelpBubbleHelper.createHelpBubble=function(e){var t=document.createElement("div");t.className="helpBubbleContainer",t.onclick=function(e){MouseEventHelper.stopBubbling()};var n=document.createElement("div");n.className="pointer",t.pointer=t.appendChild(n);var r=document.createElement("div");r.className="title",t.optionalTitle=t.appendChild(r);var i=document.createElement("div");i.className="helpBubble",t.content=t.appendChild(i),isIE()&&typeof HTMLHelper.getStyle(t,"minWidth")=="undefined"&&(t.style.width="200px");var s=e.appendChild(document.createElement("div"));return s.style.position="absolute",s.style.display="none",s.helpBubbleContainer=s.appendChild(t),s},HelpBubbleHelper.setClassNames=function(e){var t=this.getHelpBubble();t.helpBubbleContainer.className="helpBubbleContainer "+e},HelpBubbleHelper.displayHelpBubble=function(e,t,n){var r=HelpBubbleHelper.getHelpBubble();this.hideHelpBubble();var i=n.eAttachmentMode===HelpBubbleOptions.EAttachmentMode.ON_CLICK,s=function(e,t){try{HTMLHelper.setChild(e,t,!0),e.style.display="block"}catch(n){e.style.display="none"}},o=r.helpBubbleContainer;s(o.optionalTitle,t.title),s(o.content,t.content);var u,a;r.style.display="block";var f=!1;if(i){var l=HTMLHelper.getAbsolutePosition(t.link);u=l.x,a=l.y}else{var c=MouseEventHelper.getCoordinates(e),h=HTMLHelper.getStyle(o,"marginTop")||0;h=parseInt(h,10),u=c.pageX,a=c.pageY-h;var p=o.offsetWidth,d=o.offsetHeight,v=document.documentElement.clientWidth+document.documentElement.scrollLeft,m=document.documentElement.clientHeight+document.documentElement.scrollTop,g=a+h+d-m;if(g>0){if(d>document.documentElement.clientHeight-g)a=m-d-h;else{var y=20;a=Math.max(0,a-d-y)}f=!0}u+p>v&&(u=Math.max(0,v-p),f=!0)}r.style.left=u+"px",r.style.top=a+"px",(i||n.bForcePointer)&&!f?o.pointer.style.visibility="visible":o.pointer.style.visibility="hidden",r.bIsDisplayed=!0,r.bWasDisplayedOnOver=!i,r.link=t.link,MouseEventHelper.stopBubbling(e)},HelpBubbleHelper.hideHelpBubble=function(){var e=HelpBubbleHelper.getHelpBubble();clearTimeout(HelpBubbleHelper.timerRef),e&&e.parentNode&&(e.style.display="none",e.bIsDisplayed=!1,e.bWasDisplayedOnOver=!1)};var HelpBubbleOptions={};HelpBubbleOptions.EAttachmentMode={ON_CLICK:1,ON_OVER:2},HelpBubbleOptions.baseOptions={eAttachmentMode:HelpBubbleOptions.EAttachmentMode.ON_OVER,strClassNames:"",iTimeout:500,bForcePointer:!1,bFollowMouse:!0,iRedrawingDistance:10},HelpBubble.prototype.destroy=function(){this.parentElement&&(this.options.eAttachmentMode===HelpBubbleOptions.EAttachmentMode.ON_CLICK?this.parentElement.onclick=null:(this.parentElement.onmouseover=null,this.parentElement.onmousemove=null,this.parentElement.onmouseout=null))},HelpBubble.prototype.NormaliseParameters=function(){if(!this.parentElement||typeof this.parentElement!="object")return!1;if(typeof this.helpBubbleContent=="string")this.helpBubbleContent={content:this.helpBubbleContent};else if(typeof this.helpBubbleContent=="object"&&!this.helpBubbleContent.content)this.helpBubbleContent={content:this.helpBubbleContent};else if(!this.helpBubbleContent||typeof this.helpBubbleContent!="object")return!1;return this.options=this.options&&typeof this.options=="object"?clone(this.options):{},this.options.eAttachmentMode!==HelpBubbleOptions.EAttachmentMode.ON_OVER&&this.options.eAttachmentMode!==HelpBubbleOptions.EAttachmentMode.ON_CLICK&&(this.options.eAttachmentMode=HelpBubbleOptions.baseOptions.eAttachmentMode),typeof this.options.strClassNames!="string"&&(this.options.strClassNames=HelpBubbleOptions.baseOptions.strClassNames),typeof this.options.iTimeout!="number"&&(this.options.iTimeout=HelpBubbleOptions.baseOptions.iTimeout),typeof this.options.bForcePointer!="boolean"&&(this.options.bForcePointer=HelpBubbleOptions.baseOptions.bForcePointer),typeof this.options.bFollowMouse!="boolean"&&(this.options.bFollowMouse=HelpBubbleOptions.baseOptions.bFollowMouse),typeof this.options.iRedrawingDistance!="number"&&(this.options.iRedrawingDistance=HelpBubbleOptions.baseOptions.iRedrawingDistance),!0},HelpBubblePair.prototype.destroy=function(){this.onOverBubble&&this.onOverBubble.destroy(),this.onClickBubble&&this.onClickBubble.destroy()},NL.ns("NL.Facebook"),NL.Facebook.login=function(e,t){function n(t){if(t.status==="connected"||t.authResponse){var n=t.authResponse.accessToken;document.controller.setValue("/ctx/facebook/@accessToken",n),document.controller.setValue("/ctx/facebook/@applicationID",e),FB.api("/app",function(e){document.controller.setValue("/ctx/facebook/@applicationName",e.name),FB.api("/me",function(e){document.controller.setValue("/ctx/visitor/@firstName",e.first_name),document.controller.setValue("/ctx/visitor/@lastName",e.last_name),document.controller.setValue("/ctx/visitor/@email",e.email),document.controller.setValue("/ctx/visitor/@externalId",e.id),document.controller.setValue("/ctx/visitor/@accessToken",n);var t=null;if(e.birthday){var r=e.birthday.split("/");t=r[2]+"/"+r[0]+"/"+r[1]}document.controller.setValue("/ctx/visitor/@birthDate",t),document.controller.setValue("/ctx/visitor/@gender",e.gender==="female"?2:1),document.controller.setValue("/ctx/visitor/@origin",2),document.controller.submit("next","_self")})})}else t.status==="not_authorized"?r():r()}function r(){FB.login(function(e){e.authResponse&&n(e)},{scope:t})}if(NL.isFunction(window.fbAsyncInit)){FB.getLoginStatus(function(e){e.status==="connected"?(document.controller.setValue("/ctx/facebook/@accessToken",e.authResponse.accessToken),document.controller.submit("next","_self")):e.status==="not_authorized"?r():r()});return}window.fbAsyncInit=function(){FB.init({appId:e,channelUrl:"",status:!0,cookie:!0,xfbml:!0}),FB.getLoginStatus(n)},function(e){var t,n="facebook-jssdk",r=e.getElementsByTagName("script")[0];if(e.getElementById(n))return;t=e.createElement("script"),t.id=n,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(t,r)}(document)}
;//fgnass.github.com/spin.js#v1.2.7
!function(e,t,n){function o(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function u(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function f(e,t,n,r){var o=["opacity",t,~~(e*100),n,r].join("-"),u=.01+n/r*100,f=Math.max(1-(1-e)/t*(100-u),e),l=s.substring(0,s.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return i[o]||(a.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+u+"%{opacity:"+e+"}"+(u+.01)+"%{opacity:1}"+(u+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",a.cssRules.length),i[o]=1),o}function l(e,t){var i=e.style,s,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<r.length;o++){s=r[o]+t;if(i[s]!==n)return s}}function c(e,t){for(var n in t)e.style[l(e,n)||n]=t[n];return e}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var r=["webkit","Moz","ms","O"],i={},s,a=function(){var e=o("style",{type:"text/css"});return u(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"},v=function m(e){if(!this.spin)return new m(e);this.opts=h(e||{},m.defaults,d)};v.defaults={},h(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),i=n.radius+n.length+n.width,u,a;e&&(e.insertBefore(r,e.firstChild||null),a=p(e),u=p(r),c(r,{left:(n.left=="auto"?a.x-u.x+(e.offsetWidth>>1):parseInt(n.left,10)+i)+"px",top:(n.top=="auto"?a.y-u.y+(e.offsetHeight>>1):parseInt(n.top,10)+i)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!s){var f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines;(function m(){f++;for(var e=n.lines;e;e--){var i=Math.max(1-(f+e*v)%h*d,n.opacity);t.opacity(r,n.lines-e,i,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/l))})()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function i(e,r){return c(o(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.corners*t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=c(o(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:s&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&u(r,c(i("#000","0 0 4px #000"),{top:"2px"})),u(e,u(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),function(){function e(e,t){return o("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(o("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(a.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function s(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,o){u(a,u(c(s(),{rotation:360/n.lines*t+"deg",left:~~i}),u(c(e("roundrect",{arcsize:n.corners}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,o=-(n.width+n.length)*2+"px",a=c(s(),{position:"absolute",top:o,left:o}),f;if(n.shadow)for(f=1;f<=n.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)l(f);return u(t,a)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):s=l(t,"animation")}(),typeof define=="function"&&define.amd?define(function(){return v}):e.Spinner=v}(window,document);

;"use strict";NL.ns("NL.View"),NL.require("/nl/core/shared/nl.js").require("/nl/core/shared/xtk.js"),NL.View._ERROR=function(){},NL.View.toUrl=function(elView,bConsole,bEscapeAmpersands,bDontUseParam){var strUrl="#",strAmpersand=bEscapeAmpersands?"&amp;":"&";try{typeof elView!="xml"&&(elView={elView:elView},elView.attribute=function(e){return E4XStyleAttribute(this.elView,e)});if(bConsole)NL.XTK.parseBoolean(elView.attribute("noDock"),!1)&&elView.attribute("url").length()>0?strUrl=elView.attribute("url").toString():elView.attribute("editForm").length()>0?(strUrl="xtk://open/?form="+elView.attribute("editForm"),elView.attribute("editSchema").length()>0&&(strUrl+=strAmpersand+"schema="+elView.attribute("editSchema")),!bDontUseParam&&elView.attribute("editParam").length()>0&&(strUrl+=strAmpersand+elView.attribute("editParam"))):strUrl="xtk://navigate/?view="+elView.attribute("name");else{var strViewUrl=elView.attribute("url").toString();strViewUrl!==""&&strViewUrl[0]==="'"&&(strViewUrl=eval(strViewUrl),strViewUrl=strViewUrl?strViewUrl.toString():""),strViewUrl!==""&&!strViewUrl.match("^/nl/core///")?strUrl=strViewUrl:elView.attribute("webApp").length()>0?strUrl="/webApp/"+elView.attribute("webApp"):elView.attribute("report").length()>0?strUrl="/report/"+elView.attribute("report"):strUrl=null;var strParams=elView.attribute("parameters").toString();strUrl&&strParams&&(strUrl.indexOf("?")===-1?strUrl+="?"+strParams:strUrl+="&"+strParams)}}catch(e){}return strUrl},NL.View.buildBreadCrumb=function(e){if(!e)return"";var t=String(e),n=0;t.charAt(0)==="/"&&n++;var r=t.length-1;return t.charAt(r)==="/"&&r--,t.substring(n,r+1).replace(/\//g," > ")},NL.View.number=function(e,t,n){NL.isEmpty(n)&&(n="#,##0");var r=e;if(t!==undefined){r=NL.XTK.parseNumber(r,NL.View._ERROR);if(r===NL.View._ERROR)return t}else r=NL.XTK.parseNumber(r);var i="Unable to format the value '$1' as a number",s=NL.Locale.formatNumber(r,n,NL.View._ERROR);return s===NL.View._ERROR?NL.XTK.handleError(i,r,t):s},NL.View.int=function(e,t,n){NL.isEmpty(n)&&(n="#,##0");var r=e;if(t!==undefined){r=NL.XTK.parseInt(r,NL.View._ERROR);if(r===NL.View._ERROR)return t}else r=NL.XTK.parseInt(r);var i="Unable to format the value '$1' as an integer",s=NL.Locale.formatInt(r,n,NL.View._ERROR);return s===NL.View._ERROR?NL.XTK.handleError(i,r,t):s},NL.View._privateDateHelper=function(e,t,n,r,i,s,o){var u=e;u&&u.valueOf&&NL.isString(u)&&(u=u.valueOf());if(u===null||u===undefined||String(u)==="")return t!==undefined?t:"";if(t!==undefined){u=r(u,NL.View._ERROR);if(u===NL.View._ERROR)return t}else u=r(u);NL.isEmpty(n)&&(n=s);var a=i(u,n,NL.View._ERROR);return a===NL.View._ERROR?NL.XTK.handleError(o,e,t):a},NL.View.dateTime=function(e,t,n){return NL.View._privateDateHelper(e,t,n,NL.XTK.parseDateTime,NL.Locale.formatDateTime,"shortDateTime","Unable to format the value '$1' as a date+time")},NL.View.dateOnly=function(e,t,n){return NL.View._privateDateHelper(e,t,n,NL.XTK.parseDateOnly,NL.Locale.formatDateOnly,"shortDate","Unable to format the value '$1' as a date only")},NL.View.time=function(e,t,n){return NL.View._privateDateHelper(e,t,n,NL.XTK.parseTime,NL.Locale.formatTime,"time","Unable to format the value '$1' as a time")},NL.View.boolean=function(e,t){var n=e;if(t!==undefined){n=NL.XTK.parseBoolean(n,NL.View._ERROR);if(n===NL.View._ERROR)return t}else n=NL.XTK.parseBoolean(n);var r=NL.Locale.formatBoolean(n,undefined,NL.View._ERROR);return r===NL.View._ERROR?NL.XTK.handleError("Unable to format the value '$1' as a boolean",e,t):r},NL.View.timespan=function(e,t){var n=NL.Locale.formatTimeSpan(e,undefined,NL.View._ERROR);return n===NL.View._ERROR?NL.XTK.handleError("Unable to format the value '$1' as a timespan",e,t):n},NL.View.getResURL=function(e){return"/res/"+encodeURIComponent(e)},NL.View.isConsole=function(e){return NL.side("client")?NL.XTK.parseBoolean((new NL.Cookie("_console")).getValue(),!1):e&&e.cookies&&e.cookies._console?NL.XTK.parseBoolean(e.cookies._console.value,!1):!1},NL.View.genImage=function(e,t,n,r){function i(){var t={};if(e){var r=e;r.indexOf(".")>=0?(!NL.String.startsWith(r,"/")&&!NL.String.startsWith(r,"http")&&(r=NL.route(""+r,"reverse_img")),t.src=r,NL.side("server")&&n?(t.type="html",t.src=getOption("NmsServer_URL")+t.src):t.type="background"):(t.type="class",t.src=r)}return t}var s=i();if(NL.side("server")){var o="";if(n&&s.type==="html"){var o='<img border="0" alt="" src="'+NL.XML.escapeAttribute(s.src)+'" ';NL.isNundef(r)&&(r=4),o+='style="margin-right: '+r+'px;float: left;"',o+=" />"}return o}var u=null;return s.type==="background"?u=$('<span class="nlui-icon"></span>').css("background-image","url("+s.src+")"):s.type==="class"&&(u=$("<span></span>").addClass("nlui-icon").addClass(s.src),t===20&&u.addClass("nlui-icon20")),u&&(NL.isNundef(r)?u.addClass("nlui-icon-margin"):u.css("margin-right",r+"px")),u},NL.View.genLinkView=function(e){var t=NL.XTK.parseBoolean(e.html,!1),n=NL.View.genImage(e.icon,e.iconSize,t,e.iconMargin),r=!1,i=e.label,s="";typeof e.ellipsis=="number"&&e.ellipsis>0&&(i=NL.String.ellipsis(i,e.ellipsis,e.ellipsisSymbol),r=i!==e.label);if(e.title||r)s=e.title||e.label;var o="#";e.url?o=e.url:e.view&&(o="/view/"+e.view);var u=e.cssClass,a=!1;if(u){var f=u.split(" ");if(f&&f.length){for(var l=0;l<f.length;l++){var c=f[l];if(c==="nlui-button"||c==="ui-button")a=!0,c+=" nlui-button-gradient";if(c==="ui-button"||c==="ui-button-success"||c==="ui-button-primary"||c==="ui-button-error"||c==="ui-button-warning"||c==="ui-button-info")c="nl"+c;c==="ui-button-text-only"&&(c=""),f[l]=c}u=f.join(" ")}}if(NL.side("server")){if(t){NL.String.startsWith(o,"http")||(e.externalLink?o=getOption("NmsServer_URL")+o:o=getOption("NmsServer_IntranetURL")+o);if(e.params){var h="",p=0;for(var d in e.params)NL.isEmpty(e.params[d])||(p===0?h+="?":h+="&",h+=d+"="+encodeURIComponent(NL.XML.escape(e.params[d])),p++);o+=h}var v="",m='<a href="'+NL.XML.escapeAttribute(o)+'" '+'   title="'+NL.XML.escapeAttribute(s)+'" ';return u&&(m+='   class="'+NL.XML.escapeAttribute(u)+'"'),m+=">",n?(v='<table cellSpacing="0" cellPadding="0" border="0"><tr>',v+="<td>"+m,v+=n,v+="</a></td>",v+="<td>"+m,v+=NL.XML.escape(i),v+="</a></td>",v+="</tr></table>"):v=m+NL.XML.escape(i)+"</a>",v}return'<script type="nl-widget/nlLinkView">'+NL.JS.escapeCode(JSON.stringify(e))+"</script>"}var g;g=$("<a></a>").attr({href:o,target:e.target,title:s}).addClass(u);var y=$("<span></span>").addClass("nlui-anchor-content-wrapper");return a&&y.addClass("nlui-button-wrapper"),g.append(y),i?$("<span></span>").text(i).appendTo(y):(y.addClass("nlui-content-icon-only"),n instanceof jQuery&&n.css("margin-right","")),{img:n,link:g}},NL.View.buildUrlResFile=function(e,t,n){function r(e){if(NL.isEmpty(e))return"";var t=e.lastIndexOf(".");if(t!==-1)return e.substring(t+1)}return"/nl/jsp/previewFile.jsp?md5="+encodeURIComponent(e)+"&ext="+encodeURIComponent(r(t))+"&contentType="+encodeURIComponent(n)},NL.View.extractFileName=function(e){if(e===undefined||e===null)return"";var t=e.lastIndexOf("/");return t!==-1?e.substring(t+1):(t=e.lastIndexOf("\\"),t!==-1?e.substring(t+1):e)},NL.View.date=function(e,t){NL.log.warn("NL.View.date is deprecated. Use NL.View.dateTime or NL.View.dateOnly instead");try{return NL.View.dateTime(e,t)}catch(n){return NL.View.dateOnly(e,t)}},NL.View.imgPathToClass=function(e){var t=e.match(/^\.*(\w{2,3}):(.+)/);if(!t)return e;var n=t[1],r=t[2],i=["nlui-img",n,r.replace(/\//g,"-").replace(/\.\w+$/,"")];return i.join("-")}
;"use strict";NL.require("/nl/core/shared/json2.js"),function(e){e.ns("NL.String"),e.String.ACCENT_MAP={"\u00e7":"c","\u00e0":"a","\u00e2":"a","\u00e4":"a","\u00e9":"e","\u00eb":"e","\u00e8":"e","\u00ea":"e","\u00ee":"i","\u00ef":"i","\u00f4":"o","\u00f6":"o","\u00fb":"u","\u00fc":"u","\u00f9":"u"},e.String.ALPHA_NUM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.String.isAlphaNum=function(t){return t.toUpperCase()!==t.toLowerCase()||e.String.isDigit(t)},e.String.startsWith=function(e,t){return e.substring(0,t.length)===t},e.String.endsWith=function(e,t){return e.substring(e.length-t.length)===t},e.String.contains=function(e,t){return e.indexOf(t)!==-1&&t.length},e.String.removePrefix=function(t,n){return e.String.startsWith(t,n)?t.substring(n.length,t.length):t},e.String.padLeft=function(e,t,n){var r=""+t;if(r.length!==1)throw new Error("Must pad with a one-character string");e+="";while(e.length<n)e=r+e;return e},e.String.padRight=function(e,t,n){var r=""+t;if(r.length!==1)throw new Error("Must pad with a one-character string");e+="";while(e.length<n)e+=r;return e},e.String.toSmartCase=function(t){var n,r="",i=!0;for(var s=0;s<t.length;s++)n=t.charAt(s),r+=i?n.toUpperCase():n.toLowerCase(),i=!e.String.isAlphaNum(n);return r},e.String.trim=function(e){return typeof String.prototype.trim!="function"?e===null?null:e.replace(/^\s+|\s+$/g,""):e.trim()},e.String.toIdentifier=function(t){var n,r,i=t.length,s="";for(n=0;n<i;n++)r=t.charAt(n),e.String.ALPHA_NUM.indexOf(r)===-1?s+="_":s+=r;return n>0&&"0123456789".indexOf(s.charAt(0))!==-1?"_"+s:s},e.String.canonize=function(t){var n={" ":"_","'":"_","-":"_","/":"_"};return t.toString().replace(/([\s'\-\u00e7\u00e0\u00e2\u00e4\u00e9\u00eb\u00e8\u00ea\u00ee\u00ef\u00f4\u00f6\u00fb\u00fc\u00f9\/])/g,function(t){return e.String.ACCENT_MAP[t]?e.String.ACCENT_MAP[t]:n[t]})},e.String.ellipsis=function(e,t,n){if(!e)return e;var r=e.toString();if(r.length<=t)return r;var i=n||"...",s=t-i.length;if(r.length>s){var o=Math.floor(s/2),u=r.length-Math.ceil(s/2);return r.substr(0,o)+i+r.substr(u,r.length)}return r},e.String.truncate=function(e,t,n){var r=e.toString(),i=n||"...";return r.length>t?r.substr(0,t-i.length)+i:r},e.String.isDigit=function(e){var t=e.charCodeAt(0);return 48<=t&&t<=57||1632<=t&&t<=1641||1776<=t&&t<=1785||2406<=t&&t<=2415||2534<=t&&t<=2543||2662<=t&&t<=2671||2790<=t&&t<=2799||2918<=t&&t<=2927||3046<=t&&t<=3055||3174<=t&&t<=3183||3302<=t&&t<=3311||3430<=t&&t<=3439||3664<=t&&t<=3673||3792<=t&&t<=3801||3872<=t&&t<=3881||4160<=t&&t<=4169||6112<=t&&t<=6121||6160<=t&&t<=6169||6470<=t&&t<=6479||6608<=t&&t<=6617||65296<=t&&t<=65305||66720<=t&&t<=66729||120782<=t&&t<=120831},e.String.wordwrap=function(e,t,n){t=t||75,n=n||!1,e=String(e);if(!e)return e;var r=".{1,"+t+"}(\\s|$)"+(n?"|.{"+t+"}|.+$":"|\\S+?(\\s|$)");return e.match(new RegExp(r,"g"))},e.String.uppercaseFirst=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},e.String.stripSlashesStr=function(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}})},e.ns("NL.Number"),e.Number.padLeft=function(t,n){return e.String.padLeft(String(t),"0",n)},function(t){e.Locale=function(){throw new Error("NL.Locale can not be instantiated")};var n={de:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%2D.%2M.%4Y",longDate:"%A, %D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D.%2M.%4Y %2H:%2N:%2S",AmPm:["AM","PM"],shortQuarter:"Q%C %4Y",longQuarter:"%Q %4Y",shortMonth:"%2M.%4Y",longMonth:"%B %4Y",shortWeek:"KW %2W/%4V",shortHour:"%2H Uhr",longHour:"%2H Uhr",longWeek:"Kalenderwoche %2W/%4V",daysName:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDaysName:["So","Mo","Di","Mi","Do","Fr","Sa"],monthsName:["Januar","Februar","M\u00e4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],quartersName:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"],timeSpanUnits:{seconds:"s",minutes:"min",hours:"h",days:"T",months:"M",years:"J"},percentSeparator:"\u2009",currencySymbol:"\u20ac",booleanStrings:{"true":"wahr","false":"falsch"},units:{dataSize:[{symbol:"B",factor:1},{symbol:"kB",factor:1024},{symbol:"MB",factor:1048576},{symbol:"GB",factor:1073741824}],count:[{symbol:"",factor:1},{symbol:"Tsd.",factor:1e3},{symbol:"Mio.",factor:1e6},{symbol:"Mrd.",factor:1e9}]},colonSuffix:":"},"en-us":{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2M/%2D/%4Y",longDate:"%A, %D %B, %4Y",time:"%I:%2N:%2S %P",shortDateTime:"%2M/%2D/%4Y %I:%2N:%2S %P",AmPm:["AM","PM"],shortQuarter:"Q%C %4Y",longQuarter:"%Q %4Y",shortMonth:"%2M/%4Y",longMonth:"%B %4Y",shortWeek:"%4V-W%2W",longWeek:"%4V - Week %2W",shortHour:"%2Hh",longHour:"%2Hh",daysName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDaysName:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthsName:["January","February","March","April","May","June","July","August","September","October","November","December"],quartersName:["1st quarter","2nd quarter","3rd quarter","4th quarter"],timeSpanUnits:{seconds:"s",minutes:"mn",hours:"h",days:"d",months:"m",years:"y"},percentSeparator:"",currencySymbol:"$",booleanStrings:{"true":"true","false":"false"},units:{dataSize:[{symbol:"B",factor:1},{symbol:"kB",factor:1024},{symbol:"MB",factor:1048576},{symbol:"GB",factor:1073741824}],count:[{symbol:"",factor:1},{symbol:"k",factor:1e3},{symbol:"M",factor:1e6},{symbol:"G",factor:1e9}]},colonSuffix:":"},"en-gb":{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2D/%2M/%4Y",longDate:"%A %D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"],currencySymbol:"\u00a3"},ar:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D. %B %4Y",time:"%2I:%2N:%2S %P",shortDateTime:"%2D/%2M/%4Y %2I:%2N:%2S %P",AmPm:["\u0635","\u0645"]},zh:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%4Y-%M-%D",longDate:"%A, %D. %B %4Y",time:"%P%I:%2N:%2S",shortDateTime:"%4Y-%M-%D %P%I:%2N:%2S",AmPm:["\u4e0a\u5348","\u4e0b\u5348"]},ko:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2D.%2M.%4Y",longDate:"%A, %D. %B %4Y",time:"%P %2I:%2N:%2S",shortDateTime:"%4Y. %M. %D %P %2I:%2N:%2S",AmPm:["\uc624\uc804","\uc624\ud6c4"]},da:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D-%2M-%4Y",longDate:"%D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D-%2M-%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},es:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D de %B de %4Y",time:"%H:%2N:%2S",shortDateTime:"%2M-%2D-%4Y %H:%2N:%2S",AmPm:["AM","PM"]},et:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%D.%2M.%4Y",longDate:"%D %B %4Y. a.",time:"%H:%2N:%2S",shortDateTime:"%D.%2M.%4Y %H:%2N:%2S",AmPm:["AM","PM"]},fi:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%D.%M.%4Y",longDate:"%D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D.%M.%4Y %H:%2N:%2S",AmPm:["AM","PM"]},"fr-fr":{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A %D %B %4Y",partialDate:"%B, %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"],daysName:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDaysName:["dim","lun","mar","mer","jeu","ven","sam"],shortWeek:"%4V-S%2W",longWeek:"%4V - Semaine %2W",monthsName:["janvier","f\u00e9vrier","mars","avril","mai","juin","juillet","ao\u00fbt","septembre","octobre","novembre","d\u00e9cembre"],quartersName:["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],percentSeparator:" ",currencySymbol:"\u20ac",timeSpanUnits:{seconds:"s",minutes:"mn",hours:"h",days:"j",months:"m",years:"a"},booleanStrings:{"true":"vrai","false":"faux"},units:{dataSize:[{symbol:"o",factor:1},{symbol:"ko",factor:1024},{symbol:"Mo",factor:1048576},{symbol:"Go",factor:1073741824}],count:[{symbol:"",factor:1},{symbol:"k",factor:1e3},{symbol:"M",factor:1e6},{symbol:"G",factor:1e9}]},colonSuffix:"\u00a0:"},"fr-be":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%D/%2M/%4Y",longDate:"%A %D %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D/%2M/%4Y %H:%2N:%2S",AmPm:["AM","PM"],daysName:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDaysName:["dim","lun","mar","mer","jeu","ven","sam"],monthsName:["janvier","f\u00e9vrier","mars","avril","mai","juin","juillet","ao\u00fbt","septembre","octobre","novembre","d\u00e9cembre"],quartersName:["1er trimestre","2e trimestre","3e trimestre","4e trimestre"],percentSeparator:" "},el:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%D/%M/%4Y",longDate:"%A, %D %B %4Y",time:"%I:%2N:%2S %P",shortDateTime:"%D/%M/%4Y %I:%2N:%2S %P",AmPm:["\u03c0\u03bc","\u03bc\u03bc"]},he:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},hu:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%4Y.%2M.%2D.",longDate:"%4Y. %B %D.",time:"%H:%2N:%2S",shortDateTime:"%4Y.%2M.%2D. %H:%2N:%2S",AmPm:["DE","DU"]},id:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},ga:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%4Y/%2M/%2D",longDate:"%A, %D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%4Y/%2M/%2D %2H:%2N:%2S",AmPm:["a.m.","p.m."]},"it-it":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A %D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},"it-ch":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %H:%2N:%2S",AmPm:["AM","PM"]},ja:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%4Y/%2M/%2D",longDate:"%A, %D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%4Y/%2M/%2D. %H:%2N:%2S",AmPm:["\u5348\u524d","\u5348\u5f8c"]},lv:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%4Y.%2M.%2D.",longDate:"%A, %4Y. gada %D. %B",time:"%2H:%2N:%2S",shortDateTime:"%4Y.%2M.%2D. %2H:%2N:%2S",AmPm:["AM","PM"]},lt:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%4Y.%D.%M.",longDate:"%4Y m. %B %D d.",time:"%2H:%2N:%2S",shortDateTime:"%4Y.%D.%M %2H:%2N:%2S",AmPm:["AM","PM"]},mt:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D ta' %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["QN","WN"]},"nl-nl":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%D-%M-%4Y",longDate:"%A %D %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D-%M-%4Y %H:%2N:%2S",AmPm:["AM","PM"]},"nl-be":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%D/%2M/%4Y",longDate:"%A %D %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D/%2M/%4Y %H:%2N:%2S",AmPm:["AM","PM"]},no:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%2D.%2M.%4Y",longDate:"%A %D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D.%2M.%4Y %2H:%2N:%2S",AmPm:["AM","PM"],daysName:["sundag","m\u00e5ndag","tysdag","onsdag","torsdag","fredag","laurdag"],monthsName:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],percentSeparator:" "},pl:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%4Y-%2M-%2D",longDate:"%D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%4Y-%2M-%2D %2H:%2N:%2S",AmPm:["AM","PM"]},"pt-pt":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D-%2M-%4Y",longDate:"%A, %D de %B de %4Y",time:"%H:%2N:%2S",shortDateTime:"%2D-%2M-%4Y %H:%2N:%2S",AmPm:["AM","PM"]},"pt-br":{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D de %B de %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2D/%2M/%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},ru:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%2D.%2M.%4Y",longDate:"%D %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%2D.%2M.%4Y %H:%2N:%2S",AmPm:["AM","PM"]},sl:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%D.%M.%4Y",longDate:"%D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D.%M.%4Y %H:%2N:%2S",AmPm:["AM","PM"]},sk:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%D.%M.%4Y",longDate:"%D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D.%M.%4Y %H:%2N:%2S",AmPm:["AM","PM"]},"sv-se":{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%4Y-%2M-%2D",longDate:"%A %D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%4Y-%2M-%2D %2H:%2N:%2S",AmPm:["AM","PM"]},"sv-fi":{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%D.%M.%4Y",longDate:"%A %D %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%D.%M.%4Y %2H:%2N:%2S",AmPm:["AM","PM"]},cs:{digitGroupingSymbol:" ",decimalSymbol:",",shortDate:"%D.%M.%4Y",longDate:"%D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D.%M.%4Y %H:%2N:%2S",AmPm:["dop.","odp."]},th:{digitGroupingSymbol:",",decimalSymbol:".",shortDate:"%M/%D/%4Y",longDate:"%A, %D. %B %4Y",time:"%I:%2N:%2S %P",shortDateTime:"%M/%D/%4Y %I:%2N:%2S %P",AmPm:["\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07","\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"]},vi:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D/%2M/%4Y",longDate:"%A, %D. %B %4Y",time:"%2H:%2N:%2S",shortDateTime:"%2H:%2N:%2S %2D/%2M/%4Y",AmPm:["SA","CH"]},wa:{digitGroupingSymbol:".",decimalSymbol:",",shortDate:"%2D.%2M.%4Y",longDate:"%A, %D. %B %4Y",time:"%H:%2N:%2S",shortDateTime:"%D/%2M/%4Y %H:%2N:%2S",AmPm:["AM","PM"]}},r={$:{before:!0,space:!1},"\u00a3":{before:!0,space:!1},"\u20ac":{before:!1,space:!1}},i=function(e){this.setLanguage(e)};e.OO.defineProtocol("Locale",["getSettings","getFormat","setLanguage","getLanguage","getLocale","get","set"]),i.prototype.getSettings=function(){if(!this.settings)throw new Error("No language defined");return e.Utils.extend(!0,{},this.settings)},e.Locale.getFormat=function(t,n){return e.session.locale.getFormat(t,n)},i.prototype.getFormat=function(t,n){var r=this.settings[t];if(e.isEmpty(r))throw new SyntaxError("Invalid format ["+t+"]");return(t==="time"||t==="shortDateTime")&&e.isBoolean(n)&&(n||(r=r.replace(/.%2S/,""))),r},i.prototype.setLanguage=function(t){if(!t)return!1;this.locale=t.toLowerCase().replace("_","-"),this.language=this.locale.substr(0,2);var r;this.settings=n[this.locale];var i=e.Locale.defaultLanguage,s=!0;if(this.settings)r=this.locale;else{this.settings=n[this.language];if(this.settings)r=this.language;else{for(var o in n)if(o.substr(0,2)===this.language){this.settings=n[o],r=o;break}this.settings||(this.settings=n[i],s=!1,r=i)}}r&&document&&(document.formatLanguage=r);if(this.settings!==null){var u=["daysName","monthsName","quartersName","digitGroupingSymbol","decimalSymbol","shortDate","longDate","time","shortDateTime","AmPm","shortWeek","longWeek","shortMonth","longMonth","shortQuarter","longQuarter","shortHour","longHour","units","booleanStrings","percentSeparator","timeSpanUnits","colonSuffix"];for(var a=0;a<u.length;a++)this.settings[u[a]]===undefined&&(this.settings[u[a]]=n[i][u[a]]);this.settings.digitGroupingSymbol==="."?this.settings.digitGroupingRegEx=/\./g:this.settings.digitGroupingRegEx=new RegExp(this.settings.digitGroupingSymbol,"g")}return s},i.prototype.getLanguage=function(){return this.language},i.prototype.getLocale=function(){var e=this.locale.split("-");if(e.length===1){var t="";return e[0]==="en"?t="US":t=e[0].toUpperCase(),e[0]+"_"+t}return e.length===2?e[0]+"_"+e[1].toUpperCase():this.locale},i.prototype.setLanguageFromHttpHeader=function(t,n){var r=e.Locale.getValidLanguageFromHttpHeader(t,n);return r!==null?(this.setLanguage(r),!0):!1},i.prototype.get=function(e){var t=this.getSettings();return t[e]?t[e]:""},i.prototype.set=function(e,t){var n=this.getSettings();n[e]=t},e.Locale.defaultLanguage="en-us",e.Locale.getLocale=function(t){return new i(t||e.Locale.defaultLanguage)},e.Locale.getValidLanguageFromHttpHeader=function(t,n){var r=[],i=t.split(/[;,=]/),s=[],o=i.length;for(var u=0;u<o;++u){var a=e.String.trim(i[u]);if(a==="q"){if(s.length>0){var f=e.XTK.parseInt(i[u+1],0)||1;r.push({quality:f,locales:s}),s=[]}++u}else a&&s.push(a)}s.length>0&&r.push({quality:1,locales:s}),r=r.sort(function(e,t){return e.quality<t.quality});for(var u=0;u<r.length;++u){var l=r[u].locales;for(var c=0;c<l.length;++c){var h=n(e.session.locale.getLocale(),l[c]);if(h)return l[c]}}return null},e.session.setLocale=function(t){e.session.locale=e.Locale.getLocale(t),!e.side("server")},e.ns("NL.Timezone"),e.Timezone=function(t,n){if(typeof t=="undefined"){var r=new Date,i=r.getTimezoneOffset(),s=i%60,o=(Math.abs(i)-s)/60,u=i>0?"-":"+";u+=e.Number.padLeft(o,2),u+=e.Number.padLeft(s,2),this.m_strName=u}else this.m_strName=t;this.m_vRange=[];var a=this.m_strName.match(/^([+\-])?(\d{2})(\d{2})?$/);if(a){a.shift();var f=a.shift()||"+",l=a.shift()||"00",c=a.shift()||"00",h=f+l+c,i=(parseInt(c,10)+parseInt(l,10)*60)*6e4*(f==="+"?1:-1);this.m_vRange.push({startDate:-Number.MAX_VALUE,offset:i})}else this._load(this.m_strName,n)},e.Timezone.prototype._getOffset=function(e){var t=this.m_vRange.length,n=-1,r=e,i=null;while(t-n>1){var s=Math.floor((t+n)/2);if(this.m_vRange[s].startDate>r)t=s;else{if(this.m_vRange[s].startDate===r||s+1>=this.m_vRange.length||this.m_vRange[s+1].startDate>r){i=this.m_vRange[s].offset;break}n=s}}return i},e.Timezone.GMT="Etc/GMT",e.Timezone.GMT_PLUS_0100="Etc/GMT-1",e.Timezone.GMT_PLUS_0200="Etc/GMT-2",e.Timezone.GMT_MINUS_0100="Etc/GMT+1",e.Timezone.GMT_MINUS_0200="Etc/GMT+2",e.Timezone.prototype.offset=function(e,t){var n=e.getTime(),r=this._getOffset(n);return r===null?e:t?new Date(n+r):new Date(n-r)},e.Timezone.prototype.browserToLocale=function(e){return this.offset(new Date(e.getTime()+e.getTimezoneOffset()*60*1e3),!0)},e.Timezone.prototype.localeToBrowser=function(e){return this.offset(new Date(e.getTime()-e.getTimezoneOffset()*60*1e3),!1)},function(){var t={};e.Timezone.prototype._load=function(e,n){try{if(typeof window=="undefined"||typeof window.XMLHttpRequest!="function"&&typeof window.ActiveXObject!="function")if(typeof application!="undefined"&&typeof application.getTimezoneJson=="function"){var r=application.getTimezoneJson(this.m_strName||"");this.m_vRange=JSON.parse(r)}else this.m_vRange=[];else t[e]?this.m_vRange=t[e]:n?(t[e]=n,this.m_vRange=n):this.m_vRange=this._fetchAsClient(e)}catch(i){this.m_vRange=[]}this.m_vRange.sort(function(e,t){return e.startDate-t.startDate})},e.Timezone.prototype._fetchAsClient=function(e){var n=e||"__default__",r;if(window.XMLHttpRequest)r=new XMLHttpRequest;else if(window.ActiveXObject)try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){r=new ActiveXObject("Microsoft.XMLHTTP")}var s="//" + r_windowLocation + "/xtk/zoneJson.jssp?name="+encodeURIComponent(e);
if(r.status!==200)throw r.statusText;var o=JSON.parse(r.responseText);return t[n]=o.data,o.data}}(),e.Timezone.prototype.getName=function(){return this.m_strName},e.session.setTimezone=function(t,n){if(e.isEmpty(t)){e.session.timezone=undefined;return}e.session.timezone=new e.Timezone(t,n),e.side("server")&&application.setTimezone(t)},e.side("server")&&e.session.setTimezone(application.getCurrentTimezone()),e.Locale.parseBoolean=function(t,n){return e.session.locale.parseBoolean(t,n)},i.prototype.parseBoolean=function(t,n){var r=n;n===undefined&&(n=!1),t&&t.valueOf&&e.isString(t)&&(t=t.valueOf());if(t===undefined||t===null||t==="")return n;var i=e.XTK.parseBoolean(t,null,!0);if(i!==null)return i;var s=(""+t).toLowerCase();if(this.settings.booleanStrings){if(s===this.settings.booleanStrings["true"])return!0;if(s===this.settings.booleanStrings["false"])return!1}return e.XTK.handleError("Cannot parse boolean '$1': not a valid boolean",t,r)},e.Locale.formatBoolean=function(t,n,r){return e.session.locale.formatBoolean(t,n,r)},i.prototype.formatBoolean=function(t,n,r){return e.isEmpty(t)||!e.isBoolean(t)?e.XTK.handleError("Cannot format XTK boolean '$1': not a boolean",t,r):this.settings.booleanStrings[t?"true":"false"]},e.Locale.parseString=function(t,n){return e.session.locale.parseString(t,n)},i.prototype.parseString=function(t,n){if(e.isEmpty(t)&&t!==""){if(n!==undefined)return n;throw new Error("Cannot parse string",t)}return t+""},e.Locale.parseNumber=function(t,n){return e.session.locale.parseNumber(t,n)},i.prototype.parseNumber=function(t,n){if(e.isEmpty(t)){if(n!==undefined)return n;throw new Error("Cannot parse number",t)}if(e.isNumber(t))return t;var r=t+"";if(r===""){if(n!==undefined)return n;throw new Error("Cannot parse number",t)}var i=r.replace(this.settings.digitGroupingRegEx,"");this.settings.decimalSymbol!=="."&&(i=i.replace(this.settings.decimalSymbol,"."));var s=parseFloat(i);if(isNaN(s)){if(n!==undefined)return n;throw new Error("Cannot parse number",t)}return s},e.Locale.parseInt=function(t,n){return e.session.locale.parseInt(t,n)},i.prototype.parseInt=function(t,n){if(e.isEmpty(t)){if(n!==undefined)return n;throw new Error("Cannot parse integer",t)}if(e.isNumber(t))return isFinite(t)?Math.floor(t):t;var r=t+"";if(r===""){if(n!==undefined)return n;throw new Error("Cannot parse integer",t)}var i=r.replace(this.settings.digitGroupingRegEx,"");this.settings.decimalSymbol!=="."&&(i=i.replace(this.settings.decimalSymbol,"."));var s=parseInt(i,10);if(isNaN(s)){if(n!==undefined)return n;throw new Error("Cannot parse integer",t)}return s},e.Locale.formatNumber=function(t,n,r){return e.session.locale},i.prototype.formatNumber=function(e,t,n){return this._formatNumber(e,t,n,!1)},e.Locale.formatInt=function(t,n,r){return e.session.locale.formatInt(t,n,r)},i.prototype.formatInt=function(e,t,n){return this._formatNumber(e,t,n,!0)},i.prototype._formatNumber=function(t,n,i,s){if(e.isEmpty(t))return e.XTK.handleError("Unable to format number $1",t,i);e.isString(t)&&(t=e.XTK.parseNumber(t,null));if(!e.isNumber(t)||!e.isFinite(t))return e.XTK.handleError("Unable to format number $1",t,i);var o={},u=t;if(e.isNumber(n)){if(n!==0&&s)return e.XTK.handleError("Unable to format an integer with decimal places",undefined,i);o.decimalPlaces=n}else e.isString(n)?o.pattern=n:e.isNundef(n)||(o=JSON.parse(JSON.stringify(n)));s&&(o.decimalPlaces=0);if(!e.isNundef(o.significantFigures)){if(!e.isNumber(o.significantFigures))throw new SyntaxError('Cannot format number, the parameter "significantFigures" ['+o.significantFigures+"] is not a number");if(o.significantFigures<1)throw new SyntaxError('Cannot format number, the parameter "significantFigures" ['+o.significantFigures+"] is not valid");var a=Math.pow(10,o.significantFigures-1),f=1,l=0,c=!1;if(t!==0){t<0&&(t=-t,c=!0);while(t<a||t>=a*10)t<a?(t*=10,f/=10,l+=1):(t/=10,f*=10)}t=Math.round(t),t*=f,c&&(t=-t),t%1!==0&&e.isNundef(o.pattern)&&e.isNundef(o.decimalPlaces)&&(o.decimalPlaces=l)}if(!e.isNundef(o.decimalPlaces)){var h="#,##0";if(o.decimalPlaces>0){h+=".";for(var p=0;p<o.decimalPlaces;p++)h+="0"}o.pattern=h}o.pattern||(o.pattern="#,##0");if(o.addSymbol&&o.pattern.indexOf("\u00a4")===-1){var d=" ";e.isNundef(o.symbol)?e.isNundef(this.settings.currencySymbol)||(d=this.settings.currencySymbol):d=o.symbol;var v=r[d];v||(v={before:!1,space:!0});var m=v.space?" ":"";v.before?o.pattern="\u00a4"+m+o.pattern:o.pattern=o.pattern+m+"\u00a4"}return this._formatNumber2(t,o.pattern,{decimalSymbol:o.decimalSymbol,groupSymbol:o.groupSymbol,symbol:o.symbol,minusSign:o.minusSign,plusSign:o.plusSign})},i.prototype._formatNumber2=function(t,n,r){var i=t.toString(),s=this.settings,o="",u,a,f,l,c,h,p,d;h=r.decimalSymbol||s.decimalSymbol||".",p=r.groupSymbol||s.digitGroupingSymbol||" ",d=e.isNundef(r.symbol)?e.isNundef(s.currencySymbol)?" ":s.currencySymbol:r.symbol;var v=n.indexOf("."),m=0;if(v!==-1){l=n.substr(0,v),c=n.substr(v+1);var g=c.length,y;for(var b=0;b<g;b++){y=c.charAt(b);if(y!=="#"&&y!=="0")break;m++}}else l=n;v=i.indexOf(".");if(v!==-1){a=i.substr(v+1);if(a.charAt(m)!==undefined&&a.charAt(m)>=5){var w=t+Math.pow(10,-m)*(t<0?-1:1);v=i.indexOf("."),i=w.toString(),v=i.indexOf("."),a=i.substr(v+1)}u=i.substr(0,v)}else u=i;u.charAt(0)==="-"?(f=r.minusSign!==undefined?r.minusSign:"-",u=u.substr(1)):f=r.plusSign!==undefined?r.plusSign:"";var E,y,S=l.length,x,T=!1,N=u.length,C=!1;for(var b=N;b>0;b--){E=u.charAt(b-1),y=l.charAt(--S);if(y===" "||y===",")o=p+o,S=l.length,C=!0,y=l.charAt(--S);if(y==="\u00a4")T||(T=!0,o=d+o,S>0&&l.charAt(S-1)===" "&&(S--,d=="%"&&"percentSeparator"in s?o=s.percentSeparator+o:o=" "+o)),S--,o=E+o;else if(y==="0"||y==="#")o=E+o,x===undefined&&(x=S+1);S===0&&(S=x,C=!0)}while(!C&&S>0)y=l.charAt(--S),y==="0"&&(o="0"+o);if(c!==undefined){var k="",L=!1,g=c.length;for(var b=0;b<g;b++){var A=c.charAt(b);(A==="#"||A==="0")&&a!==undefined&&b<a.length?(k+=a.charAt(b),L=!0):A==="0"?(k+="0",L=!0):A===" "?d=="%"&&"percentSeparator"in s?k+=s.percentSeparator:k+=" ":A==="\u00a4"&&(k+=d)}o+=(L?h:"")+k}var O=parseFloat(o.replace(/ /g,"").replace(/,/g,"."),10);return O===0&&(f=""),l.charAt(0)==="\u00a4"&&(o=d+o),o=f+o,o},e.Locale.formatPercent=function(t,n,r){return e.session.locale.formatPercent(t,n,r)},i.prototype.formatPercent=function(t,n,r){if(e.isEmpty(t)){if(r!==undefined)return r;throw new Error("Unable to format as a percentage",t)}e.isNundef(n)&&(n=0),e.assert(e.isNumber(n));var i="#,##0";if(n>0){i+=".";for(var s=0;s<n;s++)i+="0"}i+=" ",i+="\u00a4";var o={pattern:i,symbol:"%"};return this.formatNumber(t*100,o,r)},e.Locale.formatDataSize=function(t,n,r){return e.session.locale.formatWithUnit(t,n,"dataSize",r)},i.prototype.formatDataSize=function(e,t,n){return this.formatWithUnit(e,t,"dataSize",n)},e.Locale.formatWithUnit=function(t,n,r,i){return e.session.locale.formatWithUnit(t,n,r,i)},i.prototype.formatWithUnit=function(t,n,r,i){if(e.isEmpty(t)){if(i!==undefined)return i;throw new Error("Unable to format number with units",t)}e.isNundef(n)&&(n=1),e.isString(t)&&(t=e.XTK.parseNumber(t,0)),e.assert(e.isNumber(n));var s=this.settings.units[r];if(s===undefined)throw new Error("Invalid unit '"+r+"'");var o=!1;t<0&&(t=-t,o=!0);var u=s.length-1;while(u>0&&t<s[u].factor)u--;var a={significantFigures:n,addSymbol:!0,symbol:s[u].symbol};o&&(t=-t);var f=e.Locale;return e.String.trim(f)},e.ns("NL.Date"),e.Date.ISO8601={date:"%4Y-%2M-%2D",dateTime:"%4Y-%2M-%2DT%2H:%2N:%2SZ"},e.Date.newUTCDateOnly=function(e,t,n){var r=new Date(Date.UTC(e,t-1,n));return e<1900&&r.setUTCFullYear(e),r},e.Date.newDatePartial=function(t,n,r,i,s){var o=e.XTK.formatDatePartial(t,n,r,i,s),u=e.XTK.parseDatePartial(o,null);return u!=null?u:null},e.Date.newUTCDateTime=function(e,t,n,r,i,s,o){var u=new Date(Date.UTC(e,t-1,n,r||0,i||0,s||0,o||0));return e<1900&&u.setUTCFullYear(e),u},e.Date.newTimeOnly=function(e,t,n,r){e=e||0,t=t||0,n=n||0,r=r||0;var i=new Date(Date.UTC(0,0,1,e,t,n,r));i.setUTCFullYear(0);if(isNaN(i.getTime())||i.getUTCFullYear()!==0||i.getUTCMonth()!==0||i.getUTCDate()!==1||i.getUTCHours()!==e||i.getUTCMinutes()!==t||i.getUTCSeconds()!==n||i.getUTCMilliseconds()!==r)throw new Error("Attempt to create an invalid Time Only.");return i},e.Date.getAMPMHour=function(e,t){var n=Math.floor(t?e.getUTCHours():e.getHours());return n>12?n-=12:n<1&&(n=12),n},e.Date.setDatePart=function(e,t,n){var r=parseInt(n,10);if(isNaN(r))throw new Error("The value "+n+" is not a number.");switch(t){case"H4":case"H2":e.setHours(r);break;case"MI":e.setMinutes(r);break;case"DD":e.setDate(r);break;case"MM":case"MN":e.setMonth(r-1);break;case"Y2":e.setYear(r);break;case"Y4":e.setFullYear(r)}return e},e.Date.getDatePart=function(t,n){return e.Locale.formatDateTime(t,"%"+n,null)},e.Date.weekBeginsAt=function(e,t){if(t>=0&&t<=6)for(var n=0;n<t;n++){var r=e.shift();e.push(r)}},e.Date.getWeekNumber=function(e){var t,n,r;return t=new Date(e),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7)),r=new Date(t.getFullYear(),0,1),n=Math.ceil(((t-r)/864e5+1)/7),{year:t.getFullYear(),week:n}},e.Date.getMonthName=function(t){e.Locale.getMonthName(t)},e.Locale.getMonthName=function(t){return t instanceof Date?t=t.getMonth()+1:t=parseInt(t,10),e.session.locale.get("monthsName")[t-1]},e.Locale._splitFormat=function(e){typeof e=="undefined"&&(e="");var t=[],n=null,r=!1,i=0;for(var s=0;s<e.length;s++){var o=e.charAt(s);o==="%"?(n&&n.length>0&&t.push({token:n,length:i}),r=!0,n="%",i=0):(n===null&&(n="",i=0),r&&(o==="2"?i=2:o==="4"&&(i=4),"0123456789ABDHILMNPQSY".indexOf(o)===-1&&(t.push({token:n,length:i}),n="",i=0,r=!1)),n+=o,r||i++)}n&&n.length>0&&t.push({token:n,length:i});for(s=0;s<t.length;s++){var u=t[s];u.length===0&&u.token.charAt(0)==="%"&&u.token.length===3&&u.token.charAt(1)===u.token.charAt(2)&&(u.length=2)}return t},e.Locale.parseDateTime=function(t,n,r){return e.session.locale.parseDateTime(t,n,r)},e.Locale.parseDateOnly=function(t,n,r){return e.session.locale.parseDateOnly(t,n,r)},e.Locale.parseTime=function(t,n,r){return e.session.locale.parseTime(t,n,r)},i.prototype.parseDateTime=function(e,t,n){return this._parseDate(e,t,n,0)},i.prototype.parseDateOnly=function(e,t,n){return this._parseDate(e,t,n,1)},i.prototype.parseTime=function(e,t,n){return this._parseDate(e,t,n,2)},i.prototype._parseDate=function(t,n,r,i){if(e.isEmpty(t)){if(r!==undefined)return r;throw new Error("Unable to parse date",t)}if(e.isDate(t))return t;var s=t+"";if(s===""){if(r!==undefined)return r;throw new Error("Unable to parse date",t)}e.isString(n)&&(n={pattern:n});var o=n.pattern,u=this.settings[o];if(!u||typeof u!="string"||u==="")u=o;var a=n.utc;if(typeof a=="undefined"){a=!1,u.length>0&&u.charAt(u.length-1)==="Z"&&(u=u.substring(0,u.length-1),a=!0);if(i===1||i===2)a=!0}var f=e.Locale._splitFormat(u),l=e.Date.newUTCDateTime(0,1,1,0,0,0),c=this.settings.AmPm,h=0,p=!1;for(var d=0;d<f.length;d++){var v=f[d],m=v.token,g=v.length,y="";if(m.charAt(0)==="%"){if(g===0)if(d===f.length-1)y=s,s="";else{var b=f[d+1],w=b.token;if(w.charAt(0)==="%")throw new Error("Invalid format ["+u+"]");var E=s.indexOf(w.charAt(0));if(E===-1||E===0)throw new Error("Invalid format ["+u+"]");y=s.substring(0,E),s=s.substring(E)}else y=s.substring(0,g),s=s.substring(g);var S=!1;if(i===0||i===1){var x,T,N;switch(m){case"%A":S=!0;break;case"%B":for(var C=0;C<this.settings.monthsName.length;C++){var k=this.settings.monthsName[C];if(k&&k.toLowerCase()===y.toLowerCase()){l.setUTCMonth(C),S=!0;break}}S=!0;break;case"%DD":case"%2D":case"%D":x=Number(y),x>=1&&x<=31&&(l.setUTCDate(x),S=!0);break;case"%MM":case"%2M":case"%MN":case"%M":T=Number(y),T>=1&&T<=12&&(l.setUTCMonth(T-1),S=!0);break;case"%Y2":case"%2Y":N=Number(y)+1900,l.setUTCFullYear(N),S=!0;break;case"%Y4":case"%4Y":N=Number(y),l.setUTCFullYear(N),S=!0;break;case"%Y":N=Number(y),y.length<=2&&(N+=1900),l.setUTCFullYear(N),S=!0}}if(i===0||i===2){var L,A,O,M;switch(m){case"%L":M=Number(y),M>=0&&M<=999&&(l.setUTCMilliseconds(M),S=!0);break;case"%S":case"%2S":O=Number(y),O>=0&&O<=60&&(l.setUTCSeconds(O),S=!0);break;case"%MI":case"%N":case"%2N":A=Number(y),A>=0&&A<=60&&(l.setUTCMinutes(A),S=!0);break;case"%H2":case"%2H":case"%H4":case"%H":L=Number(y),L>=0&&L<=60&&(l.setUTCHours(Number(y)),S=!0);break;case"%I":case"%2I":L=Number(y),L>0&&L<=12&&(L===12&&(L=0),p=!0,h===1&&(L+=12),l.setUTCHours(L),S=!0);break;case"%P":y.toLowerCase()===c[0].toLowerCase()?(h=0,S=!0):y.toLowerCase()===c[1].toLowerCase()&&(h=1,p&&l.setUTCHours(l.getUTCHours()+12),S=!0)}}if(!S){if(r!==undefined)return r;throw new SyntaxError("Invalid token ["+m+"] with value "+y)}}else{y=s.substring(0,g),s=s.substring(g);if(y!==m){if(r!==undefined)return r;throw new Error("String does not match format: value=["+t+"] format=["+JSON.stringify(n)+"] token=["+m+"] tokenValue=["+y+"]")}}}if(isNaN(l.getTime())){if(r!==undefined)return r;throw new Error("The string to parse doesn't fit with the required format")}return a||(l=e.session.timezone.offset(l,!1)),l},e.Locale.formatDateTime=function(t,n,r){return e.session.locale.formatDateTime(t,n,r)},i.prototype.formatDateTime=function(e,t,n){return this._formatDate(e,t,n,0)},e.Locale.formatDateOnly=function(t,n,r){return e.session.locale.formatDateOnly(t,n,r)},i.prototype.formatDateOnly=function(e,t,n){return this._formatDate(e,t,n,1)},e.Locale.formatTime=function(t,n,r){return e.session.locale.formatTime(t,n,r)},i.prototype.formatTime=function(e,t,n){return this._formatDate(e,t,n,2)},i.prototype.formatDatePartial=function(t,n,r){return e.Locale.formatDateTime(e.XTK.completeDatePartial(t,n),r,null)},e.Locale.formatDatePartial=function(t,n,r){return e.session.locale.formatDatePartial(t,n,r)},i.prototype._formatDate=function(t,n,r,i){if(e.isEmpty(t)){if(r!==undefined)return r;throw new Error("Unable to format the value as a date",t)}e.isDate(t)||(i===0?t=e.XTK.parseDateTime(t,null):i===1?t=e.XTK.parseDateOnly(t,null):i===2&&(t=e.XTK.parseDateTime(t,null)));if(t===null){if(r!==undefined)return r;throw new Error("Unable to format the value as a date",t)}var s=t,o=this.settings;e.isString(n)?(o[n]&&(n=o[n]+""),n={pattern:n}):e.isNundef(n)&&(i===1?n={pattern:o.shortDate}:i===0&&(n={pattern:o.shortDateTime}));var u=n.pattern,a=n.utc||!1;i===0&&u.length>0&&u.charAt(u.length-1)==="Z"&&(u=u.substring(0,u.length-1),a=!0);if(i===1||i===2)a=!0;var f=n.pattern;if(!a){var l=n.timezone||e.session.timezone;l&&(s=l.offset(s,!0))}var c,h,p,d,v,m,g,y,b,w;if(i===0||i===1)c=s.getUTCDate(),h=s.getUTCMonth()+1,p=s.getUTCFullYear(),d=s.getUTCDay(),v=e.Date.getWeekNumber(s),f=f.replace(/%DD/g,c),f=f.replace(/%2D/g,e.Number.padLeft(c,2)),f=f.replace(/%MN/g,e.Number.padLeft(h,2)),f=f.replace(/%MM/g,e.Number.padLeft(h,2)),f=f.replace(/%2M/g,e.Number.padLeft(h,2)),f=f.replace(/%Y2/g,e.Number.padLeft(p%100,2)),f=f.replace(/%2Y/g,e.Number.padLeft(p%100,2)),f=f.replace(/%4Y/g,e.Number.padLeft(p%1e4,4)),f=f.replace(/%Y4/g,e.Number.padLeft(p%1e4,4)),f=f.replace(/%4V/g,v.year),f=f.replace(/%2W/g,v.week);if(i===0||i===2)m=s.getUTCHours(),g=s.getUTCMinutes(),y=s.getUTCSeconds(),b=s.getUTCMilliseconds(),w=e.Date.getAMPMHour(s,!0),f=f.replace(/%H4/,e.Number.padLeft(m,2)),f=f.replace(/%H2/,e.Number.padLeft(m,2)),f=f.replace(/%2H/,e.Number.padLeft(m,2)),f=f.replace(/%2H/,e.Number.padLeft(m,2)),f=f.replace(/%2I/,e.Number.padLeft(w,2)),f=f.replace(/%2N/,e.Number.padLeft(g,2)),f=f.replace(/%MI/,e.Number.padLeft(g,2)),f=f.replace(/%2S/,e.Number.padLeft(y,2));if(i===0||i===1)f=f.replace(/%D/g,c),f=f.replace(/%M/g,h),f=f.replace(/%Y/g,p%100);if(i===0||i===2)f=f.replace(/%H/,m),f=f.replace(/%I/,w),f=f.replace(/%P/,o.AmPm[Math.floor(m/12)]),f=f.replace(/%N/,g),f=f.replace(/%S/,y),f=f.replace(/%L/,e.Number.padLeft(b,4));return o.daysName!==null?f=f.replace(/%A/g,o.daysName[d]):f=f.replace(/%A/g,""),o.monthsName!==null?f=f.replace(/%B/g,o.monthsName[h-1]):f=f.replace(/%B/g,h),o.quartersName!==null?f=f.replace(/%Q/g,o.quartersName[Math.floor((h-1)/3)]):f=f.replace(/%Q/g,""),f=f.replace(/%C/g,Math.floor(1+(h-1)/3)),f},e.Locale.formatTimeSpan=function(t,n,r){return e.session.locale.formatTimeSpan(t,n,r)},i.prototype.formatTimeSpan=function(e,t,n){var r=e;if(isNaN(r)){if(n!==undefined)return n;throw new Error("The value could not be converted to a time interval: "+r)}r=parseInt(r,10);var i=this.settings.timeSpanUnits||{},s=this.settings.timeSpanUnits,o="",u=0,a=3,f={seconds:i.seconds||s.seconds,minutes:i.minutes||s.minutes,hours:i.hours||s.hours,days:i.days||s.days,months:i.months||s.months,years:i.years||s.years};Date.SEC_PER_MIN=60,Date.SEC_PER_HOUR=3600,Date.SEC_PER_DAY=86400,Date.SEC_PER_MONTH=2592e3,Date.SEC_PER_YEAR=31104e3;var l=Math.floor(r/Date.SEC_PER_YEAR);r%=Date.SEC_PER_YEAR;var c=Math.floor(r/Date.SEC_PER_MONTH);r%=Date.SEC_PER_MONTH;var h=Math.floor(r/Date.SEC_PER_DAY);r%=Date.SEC_PER_DAY;var p=Math.floor(r/Date.SEC_PER_HOUR);r%=Date.SEC_PER_HOUR;var d=Math.floor(r/Date.SEC_PER_MIN),v=Math.floor(r%Date.SEC_PER_MIN);l>0&&(u++,o+=l+f.years),c>0&&(u++,o+=(o.length===0?"":" ")+c+f.months),h>0&&u<a&&(u++,o+=(o.length===0?"":" ")+h+f.days),p>0&&u<a&&(u++,o+=(o.length===0?"":" ")+p+f.hours),d>0&&u<a&&(u++,o+=(o.length===0?"":" ")+d+f.minutes);if(u===0||v>0&&u<a)o+=(o.length===0?"":" ")+v+f.seconds;return o},t==="server"&&e.session.setLocale(getCurrentLocale())}(e.side())}(NL)
;"use strict";var JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i;default:return""}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()
;"use strict";(function(){var e=new RegExp("^#Date\\([0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?Z\\)#$"),t=/^([0-9]{4}|[0-9]{2})[\-\/]([0-9]{2})[\-\/]([0-9]{2})[ T]([0-9]{2}):([0-9]{2}):([0-9]{2})(\.[0-9]{3})?(.*)$/,n=/^([0-9]{4}|[0-9]{2})[\-\/]([0-9]{2})[\-\/]([0-9]{2})$/,r=/^([0-9]{2}):([0-9]{2}):([0-9]{2})(\.[0-9]{3})?$/,i=/^([0-9]|\.|\+|-|e)+$/,s=/^([0-9]|\+|-|e)+$/,o=/^(\[)?((\/)?(([a-zA-Z0-9]|-|@|_)+(\/)?)+|\.)(\])?$/;NL.ns("NL.XTK"),NL.require("/nl/core/shared/dataTypes.js"),NL.XTK.handleError=function(e,t,n){if(n!==undefined)return n;var r=e.replace("$1",t);throw new Error(r)},NL.XTK.escape=function(e,t){return e===null||e===undefined||e===""?"":(e=NL.XTK.toString(e,null),e===null?NL.XTK.handleError("Cannot escape non-strings: '$1'",e,t):e.replace(/\\/g,"\\\\").replace(/'/g,"\\'"))},NL.XTK.escapeForLikeCond=function(e,t){return e===null||e===undefined||e===""?"":(e=NL.XTK.toString(e,null),e===null?NL.XTK.handleError("Cannot escape non-strings: '$1'",e,t):e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/%/g,"\\%").replace(/_/g,"\\_"))},NL.XTK._privateTypeFamilies={int64:["string"],string:["string"],memo:["string"],cdata:["string"],html:["string"],"enum":["string"],mntoken:["string"],uuid:["string"],date:["date","dateonly"],datetimenotz:["date","datetime"],datetimetz:["date","datetime"],datetime:["date","datetime"],"byte":["number","int"],"short":["number","int"],"int":["number","int"],"long":["number","int"],"float":["number"],"double":["number"],number:["number"],money:["number"],percent:["number"],"boolean":["boolean"]},NL.XTK.isType=function(e,t){if(e==="")return!1;if(e===null||e===undefined)return!1;var n=NL.XTK._privateTypeFamilies[String(e)];if(!n)return!1;for(var r=0;r<n.length;r++)if(t===n[r])return!0;return!1},NL.XTK.isStringType=function(e){return NL.XTK.isType(e,"string")},NL.XTK.isDateType=function(e){return NL.XTK.isType(e,"date")},NL.XTK.isNumberType=function(e){return NL.XTK.isType(e,"number")},NL.XTK.isDateTimeType=function(e){return NL.XTK.isType(e,"datetime")},NL.XTK.isDateOnlyType=function(e){return NL.XTK.isType(e,"dateonly")},NL.XTK.isIntType=function(e){return NL.XTK.isType(e,"int")},NL.XTK.isBooleanType=function(e){return NL.XTK.isType(e,"boolean")},NL.XTK.cast=function(e,t,n){switch(t){case"int64":case"string":case"memo":case"cdata":case"html":case"enum":case"mntoken":case"uuid":return NL.XTK.toString(e,n);case"date":return NL.XTK.parseDateOnly(e,n);case"datetime":case"datetimetz":case"datetimenotz":return NL.XTK.parseDateTime(e,n);case"byte":case"short":case"int":case"long":return NL.XTK.parseInt(e,n);case"float":case"double":case"number":case"money":case"percent":return NL.XTK.parseNumber(e,n);case"boolean":return NL.XTK.parseBoolean(e,n);default:if(n!==undefined)return n;throw new Error("Invalid type to cast in: "+t)}},NL.XTK.toXTKString=function(e,t,n){if(e!==""&&NL.isEmpty(e)){var r=null;if(NL.XTK.isBooleanType(t))r=NL.XTK.formatBoolean(e,null);else if(NL.XTK.isDateOnlyType(t)){var i=NL.XTK.formatDateOnly(e,null);i!==null&&(r="#"+i+"#")}else if(NL.XTK.isDateTimeType(t)){var i=NL.XTK.formatDateTime(e,null);i!==null&&(r="#"+i+"#")}else NL.XTK.isIntType(t)?r=NL.XTK.formatInt(e,null):NL.XTK.isNumberType(t)&&(r=NL.XTK.formatNumber(e,null));if(r===null){if(n!==undefined)return n;throw new Error("Cannot format to XTK string : invalid type '"+t+"' or value '"+e+"'")}return r}var s=e;if(t!==undefined){s&&s.valueOf&&NL.isString(s)&&(s=s.valueOf());if(s===null||s===undefined||s===""){if(n!==undefined)return n;if(NL.XTK.isBooleanType(t))return"false";if(NL.XTK.isDateType(t))return"##";if(NL.XTK.isNumberType(t))return"0";if(NL.XTK.isStringType(t))return"";throw new Error("Cannot format to XTK string : invalid type '"+t+"'")}s=NL.XTK.cast(e,t,null),s===null&&NL.XTK.handleError("Cannot format to XTK string : invalid value '$1'",e,n)}var r=null;if(NL.isBoolean(s))r=NL.XTK.formatBoolean(s,null);else if(NL.isDate(s)){var i=NL.XTK.isDateOnlyType(t)?NL.XTK.formatDateOnly(s,null):NL.XTK.formatDateTime(s,null);i!==null&&(r="#"+i+"#")}else if(t&&t==="int64")r=NL.XTK.toString(s,null);else if(NL.XTK.isIntType(t))r=NL.XTK.formatInt(s,null);else if(NL.isNumber(s))r=NL.XTK.formatNumber(s,null);else if(NL.isString(s)){var o=NL.XTK.escape(NL.XTK.toString(s,null),null);o!==null&&(r="'"+o+"'")}if(r===null){if(n!==undefined)return n;throw new Error("Cannot format to XTK string : invalid type '"+t+"' or value '"+e+"'")}return r},NL.XTK.toString=function(e,t){var n=t;t===undefined&&(t="");if(e===undefined||e===null)return t;if(NL.isString(e)||NL.isBoolean(e))return String(e);if(NL.isDate(e))return e.getUTCFullYear()===0?NL.XTK.formatTimeOnly(e):NL.XTK.formatDateTime(e);var r="The value $1 cannot be converted to a string";return NL.isNumber(e)?NL.isNaN(e)||!NL.isFinite(e)?NL.XTK.handleError(r,e,n):String(e):NL.isArray(e)||NL.isPlainObject(e)?NL.XTK.handleError(r,e,n):(e=e.toString(),NL.isString(e)?String(e):NL.XTK.handleError(r,e,n))},NL.XTK.formatDateTime=function(e,t){var n=e;return n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n)),n===null||n===undefined||n===""?t!==undefined?t:"":(n=NL.XTK.parseDateTime(n,null),n===null?NL.XTK.handleError("Cannot format XTK date+time '$1': not a date+time",e,t):NL.Number.padLeft(n.getUTCFullYear(),4)+"-"+NL.Number.padLeft(n.getUTCMonth()+1,2)+"-"+NL.Number.padLeft(n.getUTCDate(),2)+"T"+NL.Number.padLeft(n.getUTCHours(),2)+":"+NL.Number.padLeft(n.getUTCMinutes(),2)+":"+NL.Number.padLeft(n.getUTCSeconds(),2)+"Z")},NL.XTK.formatDateOnly=function(e,t){var n=e;return n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n)),n===null||n===undefined||n===""?t!==undefined?t:"":(n=NL.XTK.parseDateOnly(n,null),n===null?NL.XTK.handleError("Cannot format XTK date '$1': not a valid date",e,t):NL.Number.padLeft(n.getUTCFullYear(),4)+"-"+NL.Number.padLeft(n.getUTCMonth()+1,2)+"-"+NL.Number.padLeft(n.getUTCDate(),2))},NL.XTK.completeDatePartial=function(e,t,n){var r=[31,null,31,30,31,30,31,31,30,31,30,31],i=function(e){return(e&3)===0&&e%100!==0||e%400===0},s=null;NL.isNundef(n)||(s=n);var o=NL.XTK.parseDatePartial(e,null);if(o!==null){var u=e.year,a=null,f=null,l=null;i(u)===!0?r[1]=29:r[1]=28;switch(e.type){case"Y":a=0,l=0,f="year";break;case"Q":a=parseInt(e.quarter,10)*3-3,l=0,f="quarter";break;case"M":a=parseInt(e.month,10)-1,l=0,f="month";break;case"D":a=parseInt(e.month-1,10),l=parseInt(e.day,10);var f="day"}if(t==="left"){var c=new Date;return c.setUTCFullYear(u),c.setUTCMonth(a,1),f==="day"&&c.setUTCMonth(a,l),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c}var c=new Date;switch(f){case"year":c.setUTCFullYear(u),c.setUTCMonth(11,r[a]);break;case"quarter":c.setUTCFullYear(u);var h=a+2;c.setUTCMonth(h,r[h]);break;case"month":c.setUTCFullYear(u),c.setUTCMonth(a,r[a]);break;case"day":c.setUTCFullYear(u),c.setUTCMonth(a,l)}return c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),c.setUTCMilliseconds(0),c}return s},NL.XTK.formatDatePartial=function(e,t,n,r){if(!NL.isNumber(t))throw new SyntaxError("Cannot format partial date : not a valid year",t);switch(e){case"Y":return{type:"Y",year:parseInt(t,10)};case"Q":return{type:"Q",year:parseInt(t,10),quarter:parseInt(n,10)};case"M":return{type:"M",year:parseInt(t,10),month:parseInt(n,10)};case"D":return{type:"D",year:parseInt(t,10),month:parseInt(n,10),day:parseInt(r,10)}}throw new SyntaxError("Cannot format partial date : bad type",e)},NL.XTK.formatTime=function(e,t){var n=e;return n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n)),n===null||n===undefined||n===""?t!==undefined?t:"":(n=NL.XTK.parseTime(n,null),n===null?NL.XTK.handleError("Cannot format XTK time only '$1': not a valid time only",e,t):NL.Number.padLeft(n.getUTCHours(),2)+":"+NL.Number.padLeft(n.getUTCMinutes(),2)+":"+NL.Number.padLeft(n.getUTCSeconds(),2))},NL.XTK.formatTimeOnly=NL.XTK.formatTime,NL.XTK.formatBoolean=function(e,t){var n=e;n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n));if(n===null||n===undefined||n===""){if(t!==undefined)return t;n=!1}return n=NL.XTK.parseBoolean(n,null),n===null?NL.XTK.handleError("Cannot format XTK boolean '$1': not a boolean",e,t):n?"true":"false"},NL.XTK.formatInt=function(e,t){var n=e;n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n));if(n===null||n===undefined||n===""){if(t!==undefined)return t;n=0}return n=NL.XTK.parseInt(n,null),n===null?NL.XTK.handleError("Cannot format XTK integer '$1': not a integer",e,t):""+n},NL.XTK.formatNumber=function(e,t){var n=e;n&&n.valueOf&&NL.isString(n)?n=n.valueOf():typeof e=="xml"&&(n=String(n));if(n===null||n===undefined||n===""){if(t!==undefined)return t;n=0}return n=NL.XTK.parseNumber(n,null),n===null?NL.XTK.handleError("Cannot format XTK number '$1': not a number",e,t):""+n},NL.XTK.significantNumber=function(e,t){var n=Math.pow(10,t-1),r=1,i=0,s=!1;if(e!==0){e<0&&(e=-e,s=!0);while(e<n||e>=n*10)e<n?(e*=10,r/=10,i+=1):(e/=10,r*=10)}return e=Math.round(e),e*=r,s&&(e=-e),e},NL.XTK.roundNumber=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},NL.XTK.parseDateTime=function(e,n){var r=n;n===undefined&&(n=null),e&&e.valueOf&&NL.isString(e)&&(e=e.valueOf());if(e===undefined||e===null||e==="")return n;if(NL.isDate(e))return e;var i=NL.XTK.toString(e);if(i==="")return n;var s="Cannot parse XTK Date+Time '$1': not a valid XTK value",o=t.exec(i);if(!o)return NL.XTK.handleError(s,e,r);var u=parseInt(o[1],10);o[1].length<=2&&(u+=1900);var a=parseInt(o[2],10),f=parseInt(o[3],10),l=parseInt(o[4],10),c=parseInt(o[5],10),h=parseInt(o[6],10),p=o[7]?parseInt(o[7].substring(1),10):0,d=o[8];if(a<1||a>12||f<1||f>31||l<0||l>24||c<0||c>60||h<0||h>60)return NL.XTK.handleError(s,e,r);var v=new Date;v.setUTCFullYear(u),v.setUTCMonth(a-1,f),v.setUTCHours(l),v.setUTCMinutes(c),v.setUTCSeconds(h),v.setUTCMilliseconds(p);if(a!==v.getUTCMonth()+1)return NL.XTK.handleError(s,e,r);if(d&&d.length>0){var m=0;if(d!=="Z"){var g=1;d[0]==="-"&&(g=-1);var y=0,b=0;d=d.substring(1,d.length);if(d.length===2)y=parseInt(d,10);else if(d.length===4)y=parseInt(d.substring(0,2),10),b=parseInt(d.substring(2,4),10);else{if(d.length!==5)return NL.XTK.handleError(s,e,r);var w=d.split(":");if(w.length!==2)return NL.XTK.handleError(s,e,r);y=parseInt(w[0],10),b=parseInt(w[1],10)}m=g*(y*60+b)}v=new Date(v.getTime()-m*60*1e3)}else{var E=NL.session.timezone;if(!E)throw new Error("No default timezone is defined");v=E.offset(v,!1)}return v},NL.XTK.parseDateOnly=function(e,t){var r=t;t===undefined&&(t=null),e&&e.valueOf&&NL.isString(e)&&(e=e.valueOf());if(e===undefined||e===null||e==="")return t;var i="Cannot parse XTK Date '$1': not a valid XTK value";if(NL.isDate(e))return e.getUTCHours()!==0||e.getUTCMinutes()!==0||e.getUTCSeconds()!==0?NL.XTK.handleError(i,e,r):e;var s=NL.XTK.toString(e);if(s==="")return t;var o=n.exec(s);if(!o)return NL.XTK.handleError(i,e,r);var u=parseInt(o[1],10);o[1].length<=2&&(u+=1900);var a=parseInt(o[2],10),f=parseInt(o[3],10);if(a<1||a>12||f<1||f>31)return NL.XTK.handleError(i,e,r);var l=new Date;return l.setUTCFullYear(u),l.setUTCMonth(a-1,f),l.setUTCHours(0),l.setUTCMinutes(0),l.setUTCSeconds(0),l.setUTCMilliseconds(0),a!==l.getUTCMonth()+1?NL.XTK.handleError(i,e,r):l},NL.XTK.parseDatePartial=function(e,t){var n=t;t===undefined&&(t=null);var r=0;if(NL.isNundef(e)||e==="")return t;if(!NL.isObject(e))try{if(!JSON.parse(e))return t;e=JSON.parse(e)}catch(i){return t}switch(e.type){case"Y":NL.isNumber(e.year)||r++;break;case"Q":NL.isNumber(e.year)||r++,NL.isNumber(e.quarter)||r++;break;case"M":NL.isNumber(e.year)||r++,NL.isNumber(e.month)||r++;break;case"D":NL.isNumber(e.year)||r++,NL.isNumber(e.month)||r++,NL.isNumber(e.day)||r++;break;default:r++}return r>0?n:e},NL.XTK.parseTime=function(e,t){var n=t;t===undefined&&(t=null),e&&e.valueOf&&NL.isString(e)&&(e=e.valueOf());if(e===undefined||e===null||e==="")return t;var i="Cannot parse XTK Time '$1': not a valid XTK value";if(NL.isDate(e))return e.getUTCFullYear()!==0||e.getUTCMonth()!==0||e.getDate()!==1?NL.XTK.handleError(i,e,n):e;var s=NL.XTK.toString(e);if(s==="")return t;var o=r.exec(s);if(!o)return NL.XTK.handleError(i,e,n);var u=parseInt(o[1],10),a=parseInt(o[2],10),f=parseInt(o[3],10),l=o[4]?parseInt(o[4].substring(1),10):0;if(u<0||u>24||a<0||a>60||f<0||f>60)return NL.XTK.handleError(i,e,n);var c=NL.Date.newUTCDateTime(0,1,1,0,0,0);return c.setUTCHours(u),c.setUTCMinutes(a),c.setUTCSeconds(f),c.setUTCMilliseconds(l),c},NL.XTK.parseBoolean=function(e,t,n){var r=t;t===undefined&&(t=!1);if(e===undefined||e===null||e==="")return t;if(e===!0||e===!1)return e;NL.isBoolean(e)&&(e=e.toString());var i="Cannot parse XTK boolean '$1': not a valid XTK boolean";if(NL.isNumber(e))return e.valueOf&&(e=e.valueOf()),NL.isFinite(e)?e!==0:NL.XTK.handleError(i,e,r);var s=NL.XTK.toString(e,null);if(s==="")return t;if(s===null)return NL.XTK.handleError(i,e,r);s=s.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(!n){if(s==="on"||s==="yes")return!0;if(s==="off"||s==="no")return!1}var o=parseInt(s,10);return NL.isNumber(o)&&NL.isFinite(o)?o!==0:NL.XTK.handleError(i,e,r)},NL.XTK.parseInt=function(e,t){var n=t;t===undefined&&(t=0);if(e===undefined||e===null||e==="")return t;var r="Cannot parse XTK number '$1'";if(NL.isNumber(e)){e.valueOf&&(e=e.valueOf());if(!NL.isFinite(e))return NL.XTK.handleError(r,e,n);var i=Math.floor(e);return i!==e?NL.XTK.handleError(r,e,n):i}var o=NL.XTK.toString(e);if(o==="")return t;var u=s.exec(o);return u?parseInt(e,10):NL.XTK.handleError(r,e,n)},NL.XTK.parseNumber=function(e,t){var n=t;t===undefined&&(t=0);if(e===undefined||e===null||e==="")return t;var r="Cannot parse XTK number '$1'";if(NL.isNumber(e))return e.valueOf&&(e=e.valueOf()),NL.isFinite(e)?e:NL.XTK.handleError(r,e,n);var s=NL.XTK.toString(e);if(s==="")return t;var o=i.exec(s);return o?parseFloat(e):NL.XTK.handleError(r,e,n)},NL.XTK.likeCond=function(e,t){var n=NL.XTK.escapeForLikeCond(NL.XTK.toString(e)+"%",null);if(n===null){if(t!==undefined)return t;throw new SyntaxError("Cannot escape for like condition: "+e)}return n},NL.XTK.folderLikeCond=function(e,t){var n=NL.XTK.likeCond(e,null);if(n===null){if(t!==undefined)return t;throw new SyntaxError("Cannot escape for folder like condition: "+e)}return"$(homeDir) + "+n},NL.XTK.inCond=function(e,t){var n=[],r=[];NL.isArray(e)?n=e:NL.isString(e)&&(n=e.split(","));for(var i=0;i<n.length;i++){var s=NL.XTK.toXTKString(n[i],undefined,null);if(s===null){if(t!==undefined)return t;throw new Error("Cannot generate XTK IN condition with value "+e)}r.push(s)}return r.join(",")},NL.XTK.expandXPath=function(e){if(e===null||e===undefined||e==="")throw new Error("Invalid xpath '"+e+"'");e=NL.XTK.toString(e);var t=o.exec(e);if(!t)throw new Error("Invalid xpath '"+e+"'");return e==="."?"[.]":NL.String.startsWith(e,"[")?e:e.indexOf("/")>=0||e.indexOf("-")>=0?"["+e+"]":e},NL.XTK.unexpandXPath=function(e){if(e===null||e===undefined||e==="")throw new Error("Invalid xpath '"+e+"'");e=NL.XTK.toString(e);var t=o.exec(e);if(!t)throw new Error("Invalid xpath '"+e+"'");if((e.indexOf("/")>=0||e.indexOf("-")>=0)&&!NL.String.startsWith(e,"["))throw new Error("Invalid xpath '"+e+"'");return NL.String.startsWith(e,"[")?e.substring(1,e.length-1):e},NL.XTK.XPath2JPath=function(e){var t=NL.XTK.unexpandXPath(e);return t=NL.String.removePrefix(t,"/"),t.replace("@","").replace("/",".")},NL.ns("NL.NLSON"),NL.NLSON.stringify=function(e){if(e===undefined)return undefined;if(e===null)return"null";if(e===!0)return"true";if(e===!1)return"false";if(NL.isString(e))return JSON.stringify(e);if(NL.isNumber(e))return JSON.stringify(e);if(NL.isDate(e))return'"#Date('+NL.XTK.formatDateTime(e)+')#"';var t;return NL.isArray(e)?(t=NL.Utils.map(e,function(e,t){return t===undefined?"null":NL.NLSON.stringify(t)}),"["+t.join(",")+"]"):(t=NL.Utils.map(e,function(e,t){return JSON.stringify(e)+":"+NL.NLSON.stringify(t)}),"{"+t.join(",")+"}")},NL.NLSON.parse=function(t){if(t===null||t===undefined)return t;var n=JSON.parse(t,function(n,r){if(r===null)return null;if(NL.isString(r)){var i=e.test(r);i&&(r=r.substring(6,r.length-2),r=NL.XTK.parseDateTime(r))}return r});return n}})()
;"use strict";NL.ns("NL.transport"),function(){function t(e,t){var n=NL.Utils.fastIndexOf(e,t);return n===-1?!1:(e[n]=e[e.length-1],e.pop(),!0)}NL.transport.AJAX=function(e){this._xhr=null,this._config=e,this.loaderOff=!1,NL.assert(!e.success&&!e.error&&!e.complete),NL.assert(!e.onSuccess&&!e.onError&&!e.onComplete),NL.assert(e.context===undefined),e.context=this},NL.transport.AJAX.prototype.start=function(t){if(this._xhr!==null)throw new Error("The AJAX query has already been started");this._callbacks=t,this.loaderOff=NL.Utils.getValueFromObj(t,"loaderOff",this.loaderOff);if(e.maybeEnqueueRequest(this))return;this._config.error=function(e,t,n){this._handleAny(e,t,null,n)},this._config.success=function(e,t,n){this._handleAny(n,t,e,null)},this._config.headers||(this._config.headers={}),this._config.headers["X-Security-Token"]=document.__securitytoken,this._xhr=$.ajax(this._config)},NL.transport.AJAX.prototype._handleAny=function(t,n,r,i){if(n==="abort"){this._callbacks.onCancel&&this._callbacks.onCancel(this),e.handleCompletion(this);return}if(i!==null){var s=t.responseText,o=s?s.split("\n")[0]:s;NL.isEmpty(s)&&(s=xtk_core.ajax_empty(this._config.url));var u={code:t.status,message:o,details:s,jqStatus:n};if(t.status===403){e.handleAuthError(this);return}this._callbacks.onError?this._callbacks.onError(u):e.showError(u)}else this._callbacks.onSuccess&&this._callbacks.onSuccess(r,t);this._callbacks.onComplete&&this._callbacks.onComplete(),e.handleCompletion(this)},NL.transport.AJAX.prototype.restart=function(){this._xhr=null,this.start(this._callbacks)},NL.transport.AJAX.prototype.cancel=function(){this._xhr&&this._xhr.abort()},NL.transport.SOAP=function(e){if(!e.urn)throw new Error("No URN provided. Cannot perform SOAP request.");if(!e.method)throw new Error("SOAP method not provided. Cannot perform SOAP request.");this._currentResponseElement=null,this._xhr=null,this._isFinalized=!1,this._config=e,this.loaderOff=!1,this._urn=e.urn,this._method=e.method,this._serverUrl=e.url||NL.session.serverURL+"/nl/jsp/soaprouter.jsp";var t=e.nsEncoding||NL.transport.SOAP.ENCODING_NATIVE,n="http://www.w3.org/2001/XMLSchema",r="http://www.w3.org/2001/XMLSchema-instance",i="http://schemas.xmlsoap.org/soap/envelope/";this._request="<?xml version='1.0' encoding='UTF-8'?>\n<SOAP-ENV:Envelope xmlns:xsd='"+n+"'"+" xmlns:xsi='"+r+"'"+" xmlns:SOAP-ENV='"+i+"'"+">\n"+"<SOAP-ENV:Body>\n"+"<m:"+this._method+" xmlns:m='urn:"+this._urn+"'"+" SOAP-ENV:encodingStyle='"+t+"'"+">",(!e.url||e.url===NL.session.serverURL+"/nl/jsp/soaprouter.jsp")&&this.writeString("sessiontoken","");if(e.params)for(var s in e.params){var o=e.params[s];if(!o.type)throw new Error('Missing param "type" in SOAP call for param '+s);if(typeof o.value=="undefined")throw new Error('Missing param "value" in SOAP call for param '+s);this.addParameter(s,o.type,o.value)}},NL.transport.SOAP.ENCODING_NATIVE="http://schemas.xmlsoap.org/soap/encoding/",NL.transport.SOAP.ENCODING_XML="http://xml.apache.org/xml-soap/literalxml",NL.transport.SOAP.prototype.getMethodName=function(){return this._method},NL.transport.SOAP.prototype._finalize=function(){this._request+="\n</m:"+this._method+">\n</SOAP-ENV:Body>\n</SOAP-ENV:Envelope>",this._isFinalized=!0},NL.transport.SOAP.prototype.start=function(t){this._isFinalized||this._finalize(),NL.assert(t),this._options=t;if(this._xhr!==null)throw new Error("The SOAP query has already been started.");this.loaderOff=NL.Utils.getValueFromObj(t,"loaderOff",this.loaderOff);if(e.maybeEnqueueRequest(this))return;var n={async:!t||t.async!==!1,url:this._serverUrl,type:"POST",processData:!1,headers:{"Content-Type":"application/soap+xml;action="+this._urn+"#"+this._method+"; charset=utf-8","If-Modified-Since":"Wed, 15 Nov 1995 00:00:00 GMT","X-Security-Token":document.__securitytoken},context:this,data:this._request,dataType:"xml",error:function(e,t,n){this._handleAny(e,t,null,n)},success:function(e,t,n){this._handleAny(n,t,e,null)}};this._xhr=$.ajax(n)},NL.transport.SOAP.prototype._handleAny=function(t,n,r,i){if(n==="abort"){this._options.onCancel&&this._options.onCancel(this),e.handleCompletion(this);return}if(t.status===403){e.handleAuthError(this);return}var s=null;try{s=this._parseHTTPReply(t)}catch(o){var u=o.message;s={message:u?u.split("\n"):"",details:u}}s?this._options.onError?this._options.onError(s):e.showError(s):this._options.onSuccess&&this._options.onSuccess(this),this._options.onComplete&&this._options.onComplete(),e.handleCompletion(this)},NL.transport.SOAP.prototype.restart=function(){this._xhr=null,this.start(this._options)},NL.transport.SOAP.prototype.cancel=function(){this._xhr&&this._xhr.abort()},NL.transport.SOAP.prototype._parseHTTPReply=function(e){var t=e.status;if(e.responseText&&e.responseText.length===0)return{code:t,message:xtk_core.soap_empty_response(this._serverUrl,this._method,this._urn),details:xtk_core.soap_empty_response(this._serverUrl,this._method,this._urn)};if(!e.responseXML)return{code:t,message:xtk_core.soap_xml_parsing_failed(this._method,this._urn),details:e.responseText};var n=e.responseXML,r=firstChildElement(n),i=null;r&&(i=findChildElement(r,"SOAP-ENV:Body"));if(!i)return{code:t,message:xtk_core.soap_missing_out_param(this._method,this._urn),details:e.responseText};var s=findChildElement(i,"SOAP-ENV:Fault");if(s){var o={code:t,message:xtk_core.soap_no_fault_message(this._serverUrl,this._method,this._urn,t),details:e.responseText},u=findChildElement(s,"faultcode");return u!==null&&(o.code=elementValue(u)),u=findChildElement(s,"detail"),u!==null&&(o.details=elementValue(u)||o.details),u=findChildElement(s,"faultstring"),u!==null&&(o.message=elementValue(u)||(o.details?o.details.split("\n")[0]:o.message)),o}var a=this._method+"Response",f=firstChildElement(i);return f.nodeName===a?(this._currentResponseElement=firstChildElement(f),null):{code:t,message:xtk_core.soap_missing_response(this._method,this._urn,"SOAP-ENV:Body/"+a),details:e.responseText}},NL.transport.SOAP.prototype.addParameter=function(e,t,n){switch(t){case"string":this.writeString(e,n);break;case"byte":this.writeByte(e,n);break;case"boolean":this.writeBoolean(e,n);break;case"short":this.writeShort(e,n);break;case"int":this.writeInt(e,n);break;case"long":case"int64":this.writeInt64(e,n);break;case"float":this.writeFloat(e,n);break;case"double":this.writeDouble(e,n);break;case"element":this.writeElement(e,n);break;case"document":this.writeDocument(e,n);break;default:throw new Error("The type '"+t+"' is not a valid datatype for SOAP messages")}},NL.transport.SOAP.prototype._addNode=function(e,t,n,r){if(this._isFinalized)throw new Error("You cannot add parameters to the SOAP query since it is finalized");this._request+="\n<"+e+" xsi:type='"+t+"'",r&&(this._request+=" SOAP-ENV:encodingStyle='"+r+"'"),this._request+=">"+n+"</"+e+">"},NL.transport.SOAP.prototype.writeString=function(e,t){NL.isEmpty(t)?this._addNode(e,"xsd:string","",NL.transport.SOAP.ENCODING_NATIVE):this._addNode(e,"xsd:string",NL.XML.escapeAttribute(""+t),NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeByte=function(e,t){this._addNode(e,"xsd:byte",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeBoolean=function(e,t){this._addNode(e,"xsd:boolean",t?"true":"false",NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeShort=function(e,t){this._addNode(e,"xsd:short",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeInt=function(e,t){this._addNode(e,"xsd:int",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeInt64=function(e,t){this._addNode(e,"xsd:long",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeFloat=function(e,t){this._addNode(e,"xsd:float",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeDouble=function(e,t){this._addNode(e,"xsd:double",t,NL.transport.SOAP.ENCODING_NATIVE)},NL.transport.SOAP.prototype.writeDocument=function(e,t){if(typeof t=="undefined")throw new Error("Empty document added to the SOAP payload");t instanceof NL.XML.Node?this._addNode(e,"",t.toString(),NL.transport.SOAP.ENCODING_XML):this._addNode(e,"",toXMLString(t),NL.transport.SOAP.ENCODING_XML)},NL.transport.SOAP.prototype.writeElement=function(e,t){if(typeof t=="undefined")throw new Error("Empty element added to the SOAP payload");if(typeof t=="string"||t instanceof String)this._addNode(e,"xsd:element",t,NL.transport.SOAP.ENCODING_XML);else if(t instanceof NL.XML.Node)this._addNode(e,"xsd:element",t.toString(),NL.transport.SOAP.ENCODING_XML);else{var n=newDOMDocument("xml");n.removeChild(n.documentElement),n.appendChild(importNode(n,t,!0)),this._addNode(e,"xsd:element",toXMLString(n),NL.transport.SOAP.ENCODING_XML)}},NL.transport.SOAP.prototype.getResults=function(e){var t={};for(var n in e){var r=e[n];t[n]=this.getNextParameter(r)}return this.checkNoMoreArgs(),t},NL.transport.SOAP.prototype.getNextParameter=function(e){switch(e){case"string":return this.getNextString();case"byte":return this.getNextByte();case"boolean":return this.getNextBoolean();case"short":return this.getNextShort();case"int":return this.getNextInt();case"long":case"int64":return this.getNextInt64();case"float":return this.getNextFloat();case"double":return this.getNextDouble();case"datetime":return this.getNextDatetime();case"date":return this.getNextDate();case"time":return this.getNextTime();case"element":return this.getNextElement();default:throw new Error("The type '"+e+"' is not a valid datatype for SOAP messages")}},NL.transport.SOAP.prototype._checkTypeMatch=function(e){if(this._currentResponseElement==null)throw new Error(xtk_core.soap_missing_out_param(this._method,this._urn));var t=this._currentResponseElement.getAttribute("xsi:type");if(t.length>0&&t!==e)throw new Error(xtk_core.soap_msg_type_mismatch(e,t,this.strMethodName,this.strUrn))},NL.transport.SOAP.prototype.getNextInt=function(){this._checkTypeMatch("xsd:int");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextInt64=function(){this._checkTypeMatch("xsd:long");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextString=function(){this._checkTypeMatch("xsd:string");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextByte=function(){this._checkTypeMatch("xsd:byte");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextBoolean=function(){this._checkTypeMatch("xsd:boolean");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),NL.XTK.parseBoolean(e,!1)},NL.transport.SOAP.prototype.getNextShort=function(){this._checkTypeMatch("xsd:short");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextFloat=function(){this._checkTypeMatch("xsd:float");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextDouble=function(){this._checkTypeMatch("xsd:double");var e=elementValue(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.getNextDatetime=function(){this._checkTypeMatch("xsd:dateTime");var e=elementValue(this._currentResponseElement),t=NL.XTK.formatDateTime(e,new Date(0,0,0));return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),t},NL.transport.SOAP.prototype.getNextDate=function(){this._checkTypeMatch("xsd:date");var e=elementValue(this._currentResponseElement),t=NL.XTK.formatDateOnly(e,new Date(0,0,0));return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),t},NL.transport.SOAP.prototype.getNextTime=function(){this._checkTypeMatch("xsd:time");var e=elementValue(this._currentResponseElement),t=NL.XTK.formatTime(e,new Date(0,0,0,0,0,0));return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),t},NL.transport.SOAP.prototype.getNextElement=function(){var e=firstChildElement(this._currentResponseElement);return this._currentResponseElement=nextSiblingElement(this._currentResponseElement),e},NL.transport.SOAP.prototype.skip=function(){this._currentResponseElement!=null&&(this._currentResponseElement=nextSiblingElement(this._currentResponseElement))},NL.transport.SOAP.prototype.checkNoMoreArgs=function(){if(this._currentResponseElement!==null)throw this.error(xtk_core.soap_toomany_out_param(this._method,this._urn))};var e={waiting:[],running:[],loader:null,dialog:null,edPass:null,completionCallbacks:[],maybeEnqueueRequest:function(t){var n;return this.waiting.length!==0?(this.waiting.push(t),n=!0):(this.running.push(t),t.loaderOff!==!0&&this.showLoader(!0),n=!1),n},handleCompletion:function(e){t(this.running,e);if(this.running.length===0){this.showLoader(!1);var n=this.completionCallbacks;this.completionCallbacks=[];for(var r=0;r<n.length;r++)n[r]()}},handleAuthError:function(e){t(this.running,e),this.waiting.push(e);if(this.waiting.length!==1)return;this.showLoader(!1),NL.preventDelayedMsgBox(!0);var n=this,r=$("<div></div>").nlDialog({title:xtk_core.reauthenticate(),modal:!0,autoOpen:!1,width:370,height:270,dialogClass:"nlui-container nlui-loginForm",buttons:[{text:xtk_core.dialog_ok(),click:function(){n.doLogon()}},{text:xtk_core.dialog_cancel(),click:function(){window.location.reload()}}]});r.$contentMsg=$("<div></div>"),$("<div></div>").nlActionMessage({message:xtk_core.reauthenticateDesc(),state:"info",displayIcon:"none"}).appendTo(r.$contentMsg);var i=$("<form name='loginForm'></form>").appendTo(r.$contentMsg),s=$("<p class='input'>").appendTo(i);$("<label for='login'></label>").text(xtk_core.login()).appendTo(s),$('<input name="login" type="text" readonly/>').val(NL.session.operator.login).appendTo($("<span></span>").appendTo(s)),s=$("<p class='input first'>").appendTo(i),$("<label for='password'></label>").text(xtk_core.password()).appendTo(s),this.edPass=$('<input name="password" type="password"/>').appendTo($("<span></span>").appendTo(s)),r.keydown(function(e){e.keyCode===13&&n.doLogon()}),r.$contentMsg.appendTo(r),r.nlDialog("open"),this.edPass.focus(),this.dialog=r},doLogon:function(){var e=this,t=$.ajax({url:"/nl/jsp/logon.jsp",type:"POST",data:{login:NL.session.operator.login,password:this.edPass.val(),action:"submit",popup:"1"},success:function(t,n){if(t.length>100){NL.log.warn("Got full JSP ANS");return}document.__securitytoken=t,e.resumeWaitingCalls()},error:function(t,n){e.dialog.$errorMsg.text(t.message)},complete:function(){NL.preventDelayedMsgBox(!1)}})},showLoader:function(e){if(e){if(this.loader!==null)return;var t=this;this.loader=$("<div/>").nlMessageBox({type:"loading",delay:3,onCancel:function(){t.doCancel()}})}else this.loader!==null&&($(this.loader).nlMessageBox("close"),this.loader=null)},showError:function(e){$("<div></div>").nlMessageBox({error:e})},resumeWaitingCalls:function(){this.dialog.nlDialog("close");var e=this.waiting;this.waiting=[];for(var t=0;t<e.length;t++)e[t].restart()},doCancel:function(){this.showLoader(!1);var e=this.running;for(var t=0;t<e.length;t++)e[t].cancel()}};NL.transport.queueCompletion=function(t){e.waiting.length===0&&e.running.length===0?t():e.completionCallbacks.push(t)}}()
;"use strict";function newDOMDocument(e){var t=null;if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");if(e!=null&&e.length>0){var n=t.createElement(e);t.documentElement=n}}else document.implementation&&document.implementation.createDocument&&(typeof e=="undefined"&&(e=""),t=document.implementation.createDocument("",e,null));if(t==null)throw Error(xtk_core.xml_dom_implementation_not_found());return t}function firstChildElement(e){var t=e.firstChild;while(t!=null){if(t.nodeType==1)break;t=t.nextSibling}return t}function nextSiblingElement(e){var t=e.nextSibling;while(t!=null){if(t.nodeType==1)break;t=t.nextSibling}return t}function findNodes(e,t,n){function r(e,t,i,s){if(t==null)return;var o,u=firstChildElement(t);while(u!=null)o=e+u.nodeName,o==i||n==1&&o.toLowerCase()==i.toLowerCase()?s.push(u):r(o+"/",u,i,s),u=nextSiblingElement(u)}var i=[];return t==="."?i.push(e):r("",e,t,i),i}function findElement(e,t){function n(e,t,r,i){if(t==null)return null;var s,o,u=firstChildElement(t),a=0;while(u!=null){s=e+u.nodeName;if(s==r){if(++a==i)return u}else{o=n(s+"/",u,r,i);if(o!=null)return o}u=nextSiblingElement(u)}return null}var r="";if(t===".")return e;t.charAt(0)==="/"&&(e.ownerDocument!=null&&(e=e.ownerDocument),r="/");var i=1,s=t.indexOf("[");return s!==-1&&(i=parseInt(t.substring(s+1,t.indexOf("]")),10),t=t.substring(0,s)),n(r,e,t,i)}function findChildElement(e,t){var n=e.firstChild;while(n!=null){if(n.nodeType==1&&n.nodeName===t)return n;n=n.nextSibling}return null}function elementValue(e){var t="",n=e.firstChild;while(n!=null){if(n.nodeType==3||n.nodeType==4)t+=n.nodeValue;n=n.nextSibling}return t}function getXPathValue(e,t){function n(e,t,r){if(t.length===0){var i,s="";for(var o=0;o<e.childNodes.length;o++){i=e.childNodes.item(o);if(i.nodeType==XML.TEXT_NODE||i.nodeType==XML.CDATA_SECTION_NODE)s+=i.nodeValue}return s}if(t.charAt(0)==="@")return e.nodeType==XML.DOCUMENT_NODE&&(e=e.documentElement),e.getAttribute(t.substring(1));var u=t.indexOf("/");if(u!==0){var a,f="",l=0,c=1;u===-1?a=t:(a=t.substring(0,u),f=t.substring(u+1));var h=a.indexOf("[");h!==-1&&(c=parseInt(a.substring(h+1,a.indexOf("]")),10),a=a.substring(0,h));var p=e.childNodes.length;for(var o=0;o<p;o++)if(e.childNodes[o].nodeType==1&&(r==XML.XPATH_AXE_DESCENDANT_OR_SELF||e.childNodes[o].nodeName==a&&++l===c))return n(e.childNodes[o],f,r)}return""}var r=XML.XPATH_AXE_NONE;return t.charAt(0)==="."?t.charAt(1)==="."?r=XML.XPATH_AXE_PARENT:r=XML.XPATH_AXE_SELF:t.charAt(0)==="/"&&t.charAt(1)==="/"?(r=XML.XPATH_AXE_DESCENDANT_OR_SELF,t=t.substring(2)):t.charAt(0)==="/"&&(e.ownerDocument!=null&&(e=e.ownerDocument),t=t.substring(1)),n(e,t,r)}function setXPathValue(e,t,n,r){if(t.charAt(0)==="/")e.ownerDocument!=null&&(e=e.ownerDocument),t=t.substring(1);else if(t.length===0){while(e.firstChild!=null)e.removeChild(e.firstChild);typeof r!=undefined&&r?e.appendChild(e.ownerDocument.createCDATASection(n)):e.appendChild(e.ownerDocument.createTextNode(n));return}if(t.charAt(0)==="@"){if(n!=undefined&&n.length!==0||e.attributes.getNamedItem(t.substring(1))!=undefined){e.setAttribute(t.substring(1),n);return}return}var i=t.indexOf("/");if(i!==0){var s,o="",u=0,a=1;i===-1?s=t:(s=t.substring(0,i),o=t.substring(i+1));var f=s.indexOf("[");f!==-1&&(a=parseInt(s.substring(f+1,s.indexOf("]")),10),s=s.substring(0,f));var l=e.childNodes.length;for(var c=0;c<l;c++)if(e.childNodes[c].nodeType==1&&e.childNodes[c].nodeName==s&&++u===a){setXPathValue(e.childNodes[c],o,n,r);return}if(s.length>0){if(n==undefined||n.length===0)return;var h;do h=e.appendChild(e.ownerDocument.createElement(s));while(++u<a);setXPathValue(h,o,n,r)}}}function internalCopyAttributes(e,t,n){for(var r=0;r<t.attributes.length;r++)n==null?e.setAttribute(t.attributes[r].name,t.attributes[r].value):n(e,t.attributes[r].name,t.attributes[r].value)}function internalImportNode(ndMainDocument,ndNode,bDeep,bUseNativeAPI,applyAttribute,bEvalScriptNodes){if(!ndMainDocument.importNode||!bUseNativeAPI){var ndNew;ndNode.nodeType==1?(ndNode.nodeName.toLowerCase()==="input"&&ndNode.getAttribute("type").toLowerCase()==="radio"&&document.all?ndNew=ndMainDocument.createElement('<input type="radio" name="'+ndNode.getAttribute("name")+'" value="'+ndNode.getAttribute("value")+'">'):ndNew=ndMainDocument.createElement(ndNode.nodeName),internalCopyAttributes(ndNew,ndNode,applyAttribute)):ndNode.nodeType==3&&(ndNew=ndMainDocument.createTextNode(ndNode.nodeValue));if(bDeep&&ndNode.hasChildNodes())for(var ndChild=ndNode.firstChild;ndChild!=null;ndChild=ndChild.nextSibling){if(bEvalScriptNodes&&ndChild.nodeName.toLowerCase()==="script"){ndChild.childNodes.length>=2?eval(ndChild.textContent):eval(ndChild.firstChild.nodeValue);continue}if(!bUseNativeAPI&&ndNew.nodeName.toLowerCase()==="a"&&ndChild.nodeName.toLowerCase()===" p"){internalCopyAttributes(ndNew,ndChild,applyAttribute);var ndNewChild=internalImportNode(ndMainDocument,ndChild,bDeep,bUseNativeAPI,applyAttribute,bEvalScriptNodes);for(var ndTextChild=ndNewChild.firstChild;ndTextChild!=null;ndTextChild=ndTextChild.nextSibling)ndNew.appendChild(ndTextChild);continue}var ndNewChild=internalImportNode(ndMainDocument,ndChild,bDeep,bUseNativeAPI,applyAttribute,bEvalScriptNodes);ndNewChild!=undefined&&ndNewChild!=null&&ndNew.appendChild(ndNewChild)}return ndNew}return ndMainDocument.importNode(ndNode,bDeep)}function importNode(e,t,n){return internalImportNode(e,t,n,!0,null,!1)}function importNodeAsHTML(e,t){return internalImportNode(document,e,t,!1,applyHTMLAttribute,!0)}function applyHTMLAttribute(ndHTMLElement,sAttribute,sAttributeValue){sAttribute=="style"&&document.all?ndHTMLElement.style.setAttribute("cssText",sAttributeValue):sAttribute=="class"?ndHTMLElement.className=sAttributeValue:sAttribute=="dataBind"?(ndHTMLElement.getAttribute("type").toLowerCase()==="checkbox"||ndHTMLElement.getAttribute("type").toLowerCase()==="radio"?(ndHTMLElement.onValueChange=new Function("xpath","newValue","if( xpath == '"+sAttributeValue+"' ) this.checked = NL.XTK.parseBoolean(newValue, false);"),ndHTMLElement.onSubmit=new Function("document.controller.setValue('"+sAttributeValue+"', this.checked);")):(ndHTMLElement.onValueChange=new Function("xpath","newValue","if( xpath == '"+sAttributeValue+"' ) this.value = newValue;"),ndHTMLElement.onSubmit=new Function("document.controller.setValue('"+sAttributeValue+"', this.value);")),document.controller.registerObserver(sAttributeValue,ndHTMLElement,ndHTMLElement.onValueChange,"valueChanged",document.controller.OBSERVE_XPATH)):sAttribute=="onclick"?ndHTMLElement.onclick=function(){eval(sAttributeValue)}:sAttribute=="onmouseover"?ndHTMLElement.onmouseover=function(){eval(sAttributeValue)}:sAttribute=="onmouseout"&&(ndHTMLElement.onmouseout=function(){eval(sAttributeValue)}),ndHTMLElement.setAttribute(sAttribute,sAttributeValue)}function replaceContent(e,t,n){var r=null;n!=null&&(r=importNode(e,n,!0));var i=findElement(e,t);if(typeof i=="undefined"||i===null)setXPathValue(e,t,1),i=findElement(e,t);var s=i.parentNode;s!=null&&(r!=null&&s.insertBefore(r,i),s.removeChild(i))}function escapeXmlString(e){return NL.XML.escape(e)}function parseXMLString(e){if(document.implementation.createDocument==undefined){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}var n=new DOMParser;if(n.parseFromString==undefined){var r=new XMLHttpRequest;return r.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent('<?xml version="1.0"?>'+e),!1),r.send(null),r.responseXML}return n.parseFromString(e,"text/xml")}function toXMLString(e){if(typeof e=="undefined"||e===null)throw"Unable to serialize xml document.";if(typeof e.xml!="undefined")return e.xml;if(typeof XMLSerializer=="function"||typeof XMLSerializer=="object"){var t=new XMLSerializer;return t.serializeToString(e)}throw"Unable to serialize XML documents on that browser."}function createPOJsO(e,t){if(firstChildElement(t)==null&&(e==null||e.attributes.length==0&&firstChildElement(e)==null))return e==null?"":elementValue(e);var n={},r="",i=firstChildElement(t);while(i!=null)r=i.nodeName.replace(/-/g,"_"),NL.XTK.parseBoolean(i.getAttribute("attribute"),!1)===!0&&(e!=null&&e.getAttribute(i.nodeName)!=null?n[r]=e.getAttribute(i.nodeName):n[r]=""),i=nextSiblingElement(i);i=firstChildElement(t);while(i!=null){if(NL.XTK.parseBoolean(i.getAttribute("element"),!1)===!0){r=i.nodeName.replace(/-/g,"_");var s=null;e!=null&&(s=findChildElement(e,i.nodeName));if(NL.XTK.parseBoolean(i.getAttribute("unbound"),!1)===!1)n[r]=createPOJsO(s,i);else{n[r]==null&&(n[r]=[]);if(s!=null)do s.nodeName==i.nodeName&&n[r].push(createPOJsO(s,i));while((s=nextSiblingElement(s))!=null)}}i=nextSiblingElement(i)}return n}function convertToPOJsO(e){var t={},n;for(var r=0;r<e.attributes.length;r++)t[e.attributes[r].name]=e.attributes[r].value;n=firstChildElement(e);while(n)t[n.nodeName]=convertToPOJsO(n),nextSiblingElement(n);return t}function E4XStyleAttribute(e,t){var n={};return n.value=e.getAttribute(t),n.length=function(){return this.value?1:0},n.toString=function(){return this.value?this.value:""},n}NL.require("/nl/core/core.js").require("/nl/core/shared/xtk.js");var XML={XPATH_AXE_NONE:0,XPATH_AXE_CHILD:1,XPATH_AXE_DESCENDANT:2,XPATH_AXE_DESCENDANT_OR_SELF:3,XPATH_AXE_PARENT:4,ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}
;"use strict";function XtkIEEvent(){this.data=event}function XtkGeckoEvent(e){this.data=e}function NewEvent(e){return typeof event=="undefined"?new XtkGeckoEvent(e):new XtkIEEvent}function findXtkObject(e){return e==null?null:e.xtkObject!=undefined?e.xtkObject:findXtkObject(e.parentNode)}function openView(e){var t=document.getElementById("divLoading");t&&(t.style.display=""),window.location=addSecurityToken(e,document.__securitytoken)}function addSecurityToken(e,t,n){return(n||e.charAt(0)=="/"&&e.charAt(1)!="/")&&t&&(e.indexOf("?")==-1?e+="?":e+="&",e+="__securitytoken="+t),e}function isNeolaneConsole(){return NL&&NL.Cookie?(new NL.Cookie("_console")).getValue():(new Cookie("_console")).value}NL.ns("NL"),XtkIEEvent.prototype.getSource=function(){return this.data.srcElement},XtkGeckoEvent.prototype.getSource=function(){return this.data.target},NL.XtkContext=function(){this.timers=[],this.tooltipManager=null,this.uniqueID=0,this.includes=[],this.baseURI=null,this.mouseCapture=null,this.vecDelayLoading=[],this.tmrDelayLoading=null,this.eventManager={beforeGarbage:100,map:[],dispatcher:function(e){var t=NewEvent(e),n=t.data.type,r=g_xtkContext.eventManager.map[n];if(r!=null){var i;g_xtkContext.mouseCapture!=null?i=g_xtkContext.mouseCapture:i=t.getSource();var s=r[i.uniqueID];if(s==null||typeof s=="undefined"){var o=i;do o=o.parentNode,o.uniqueID&&(s=r[o.uniqueID]);while((s==null||typeof s=="undefined")&&o!=null)}var u=s.obj;if(u!=null){var a;return typeof s.mth!="undefined"?a=u[s.mth]:a=u["on"+n],a.call(u,t)}}return null}}},NL.XtkContext.prototype.onTimer=function(e){if(e==this.tmrDelayLoading){var t=this.vecDelayLoading.length,n;for(var r=0;r<t;r++)n=this.vecDelayLoading[r],n.onLoad.call(n);this.tmrDelayLoading.stop()}},NL.XtkContext.prototype.addEventListener=function(e,t,n,r){var i=this.eventManager.map[e],s=this.eventManager.dispatcher;i==null&&(i=[],this.eventManager.map[e]=i),t.uniqueID==null&&(t.uniqueID="gk_"+this.uniqueID++),i[t.uniqueID]={obj:n,mth:r};if(t.attachEvent)t.attachEvent("on"+e,s);else{if(!t.addEventListener)throw"Unable to attach object to the given element: '"+t.tagName+"'";t.addEventListener(e,s,!1)}this.eventManager.beforeGarbage--,this.eventManager.beforeGarbage<=0&&this.garbageEventListener()},NL.XtkContext.prototype.garbageEventListener=function(){for(var e in this.eventManager.map){var t=this.eventManager.map[e];for(var n in t){var r=t[n];(typeof r.obj.htmlElement.parentElement!="undefined"&&r.obj.htmlElement.parentElement==null||r.obj.htmlElement.parentNode==null)&&delete t[n]}}this.eventManager.beforeGarbage=100},NL.XtkContext.prototype.captureMouse=function(e){this.mouseCapture=e,e.setCapture()},NL.XtkContext.prototype.releaseMouse=function(){this.mouseCapture.releaseCapture(),this.mouseCapture=null},NL.XtkContext.prototype.getUniqueId=function(){return this.uniqueID++},NL.XtkContext.prototype.getBaseURI=function(){if(this.baseURI==null)if(core.isIE){var e,t=document.scripts.length,n="xtk/js/shared/core.js";for(var r=0;r<t;r++){e=document.scripts[r].src;if(e.indexOf(n)!=-1){this.baseURI=e.substring(0,e.length-n.length);break}}if(this.baseURI==null||this.baseURI.length==0){var i=document.getElementsByTagName("base");i!=null&&i[0]!=null&&(this.baseURI=i[0].href)}}else this.baseURI=document.location.protocol+"//"+document.location.host;return this.baseURI},NL.XtkContext.prototype.getXMLValue=function(e,t){if(t.charAt(0)=="@")return e.getAttribute(t.substring(1));var n=t.indexOf("/");if(n!=0){var r=t.substring(0,n),i=t.substring(n+1),s=e.childNodes.length;for(var o=0;o<s;o++)if(e.childNodes[o].nodeName==r)return this.getXMLValue(e.childNodes[o],i)}throw"NL.XtkContext.getXMLValue: '"+t+"' xpath to complex. Not yet supported"};var g_xtkContext=new NL.XtkContext;NL.XtkTimer=function(e,t,n){this.target=e,this.firstTimeout=t,this.timeout=typeof n=="undefined"?t:n,this.started=!1,this.nextExpiration=0},NL.XtkTimer.doTimeout=function(){var e=(new Date).getTime(),t=g_xtkContext.timers,n=t.length,r=null;for(var i=0;i<n;i++){if(t.length<n)break;r=t[i],r.nextExpiration<=e&&(r.target.onTimer(r),r.nextExpiration=Math.max(e,r.nextExpiration+r.timeout))}NL.XtkTimer.resetTimer()},NL.XtkTimer.resetTimer=function(){var e=g_xtkContext.timers,t=e.length;if(t>0){var n=e[0].nextExpiration,r=e[0].target;for(var i=1;i<t;i++)e[i].nextExpiration<n&&(n=e[i].nextExpiration,r=e[i].target);setTimeout("NL.XtkTimer.doTimeout()",Math.max(0,n-(new Date).getTime()))}},NL.XtkTimer.prototype.start=function(e,t,n){typeof e!="undefined"&&(this.target=e,typeof t!="undefined"&&(this.firstTimeout=t,typeof n!="undefined"?this.timeout=n:this.timeout=t)),this.started==0&&(g_xtkContext.timers.push(this),this.started=!0),this.nextExpiration=(new Date).getTime()+this.firstTimeout,NL.XtkTimer.resetTimer()},NL.XtkTimer.prototype.stop=function(){if(this.started){var e=NL.Utils.indexOf(this,g_xtkContext.timers);e!==-1&&g_xtkContext.timers.splice(e,1),this.started=!1}};var REPORT_COLORS=new Array("#3B87A2","#FF8012","#8CA23B","#A23B5E","#004A62","#FFCCA0","#C75400","#CAD4A5","#A5C8D4","#6D0026","#D4A5B4","#4F6400")
;"use strict";NL.ns("NL.XML"),NL.require("/nl/core/shared/nl.js").require("/nl/core/shared/xtk.js"),function(){function e(e){if(e.split(/[\s+<>\'\"]/).length>1)throw new Error('The name "'+e+'" for an tag name is invalid')}function t(e){if(e.split(/[\s+<>\'\"]/).length>1)throw new Error('The name "'+e+'" for an attribute is invalid')}NL.XML.NODE_TYPES={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},NL.XML.XPATH_AXIS={XPATH_AXE_NONE:0,XPATH_AXE_CHILD:1,XPATH_AXE_DESCENDANT:2,XPATH_AXE_DESCENDANT_OR_SELF:3,XPATH_AXE_PARENT:4},NL.XML.Node=function(e,t,n){NL.assert(!NL.isEmpty(e),"The tag name of an element must not be empty."),this.tagName=e,this.attributes={},this.children=[],this._parent=undefined,this.value=n,this._type=t||NL.XML.NODE_TYPES.ELEMENT_NODE},NL.XML.Node.prototype.attr=function(e,n){return n===undefined?this.attributes[e]:(t(e),this.attributes[e]=n,this)},NL.XML.Node.prototype.parent=function(){return this._parent},NL.XML.Node.prototype.append=function(t){return NL.assert(this._type===NL.XML.NODE_TYPES.ELEMENT_NODE,"You can only append a node to a Element node."),NL.isString(t)?(e(t),t=new NL.XML.Node(t)):t instanceof NL.XML.Node||NL.assert(!1,"NL.XML.prototype.append only accepts strings or NL.XML instances as parameters"),t.parent=this,this.children.push(t),this._type=NL.XML.NODE_TYPES.ELEMENT_NODE,this},NL.XML.Node.prototype.appendTo=function(e){return NL.assert(e instanceof NL.XML.Node,"NL.XML.prototype.appendTo only accepts NL.XML instances as parameters"),e.append(this),this},NL.XML.Node.prototype.tag=function(t){return t===undefined?this.tagName:(e(t),this.tagName=t,this)},NL.XML.Node.prototype.type=function(){return this._type},NL.XML.Node.prototype.val=function(e,t){return typeof e=="undefined"?this.value:(NL.assert(NL.isArray(this.children)&&this.children.length===0,"You cannot set data in a non empty node."),this.value=e,t?this._type=NL.XML.NODE_TYPES.CDATA_SECTION_NODE:this._type=NL.XML.NODE_TYPES.TEXT_NODE,this)},NL.XML.Node.prototype.toString=function(){var e=[this.tagName];NL.Utils.each(this.attributes,function(t,n){e.push(t+'="'+NL.XML.escapeAttribute(n)+'"')});var t="<"+e.join(" ")+">",n=[];NL.Utils.each(this.children,function(e,t){n.push(t.toString())}),t+=n.join("");var r=this.val();if(!NL.isNundef(r)){var i=NL.XTK.toString(r);this._type===NL.XML.NODE_TYPES.CDATA_SECTION_NODE?t+=NL.XML.escapeCDATA(i):t+=NL.XML.escape(i)}return t+="</"+this.tagName+">",t},NL.XML.Node.prototype.empty=function(){this.children=[],this.value=undefined,this._type=NL.XML.NODE_TYPES.ELEMENT_NODE},NL.XML.Node.prototype._PrivateXPathValue=function(e,t,n){if(t.length===0){var r,i="";if(e._type===NL.XML.NODE_TYPES.TEXT_NODE||e._type===NL.XML.NODE_TYPES.CDATA_SECTION_NODE)return e.val();for(var s=0;s<e.children.length;s++){r=e.children[s];if(r._type===NL.XML.NODE_TYPES.TEXT_NODE||r._type===NL.XML.NODE_TYPES.CDATA_SECTION_NODE)i+=r.val()}return i}if(t.charAt(0)==="@")return e.attr(t.substring(1));var o=t.indexOf("/");if(o!==0){var u,a="",f=0,l=1;o===-1?u=t:(u=t.substring(0,o),a=t.substring(o+1));var c=u.indexOf("[");c!==-1&&(l=NL.XTK.parseInt(u.substring(c+1,u.indexOf("]")),10),u=u.substring(0,c));var h=e.children.length;for(var s=0;s<h;s++){var p=e.children[s];if((p._type===NL.XML.NODE_TYPES.ELEMENT_NODE||p._type===NL.XML.NODE_TYPES.TEXT_NODE||p._type===NL.XML.NODE_TYPES.CDATA_SECTION_NODE)&&(n==NL.XML.XPATH_AXIS.XPATH_AXE_DESCENDANT_OR_SELF||p.tag()==u&&++f===l))return this._PrivateXPathValue(p,a,n)}}return""},NL.XML.Node.prototype.getXPathValue=function(e){var t=this,n=NL.XML.XPATH_AXIS.XPATH_AXE_NONE;if(e.charAt(0)===".")e.charAt(1)==="."?n=NL.XML.XPATH_AXIS.XPATH_AXE_PARENT:n=NL.XML.XPATH_AXIS.XPATH_AXE_SELF;else if(e.charAt(0)==="/"&&e.charAt(1)==="/")n=NL.XML.XPATH_AXIS.XPATH_AXE_DESCENDANT_OR_SELF,e=e.substring(2);else if(e.charAt(0)==="/"){while(t.parent())t=t.parent();e=e.substring(1)}return this._PrivateXPathValue(t,e,n)},NL.XML.Node.prototype.setXPathValue=function(e,t,n){var r=this;if(e.charAt(0)==="/"){while(r.parent())r=r.parent();e=e.substring(1)}else if(e.length===0){r.children=[],typeof n!=undefined&&n?(r.val(t),r._type=NL.XML.NODE_TYPES.CDATA_SECTION_NODE):(r.val(t),r._type=NL.XML.NODE_TYPES.TEXT_NODE);return}if(e.charAt(0)==="@"){if(NL.isEmpty(t)&&r.attr(e.substring(1))===undefined)return;r.attr(e.substring(1),t);return}var i=e.indexOf("/");if(i!==0){var s,o="",u=0,a=1;i===-1?s=e:(s=e.substring(0,i),o=e.substring(i+1));var f=s.indexOf("[");f!==-1&&(a=NL.XTK.parseInt(s.substring(f+1,s.indexOf("]")),10),s=s.substring(0,f));var l=r.children.length;for(var c=0;c<l;c++)if(r.children[c].tag()==s&&++u===a){r.children[c].setXPathValue(o,t,n);return}if(s.length>0){if(NL.isEmpty(t))return;var h;do h=new NL.XML.Node(s),r.append(h);while(++u<a);h.setXPathValue(o,t,n)}}},NL.XML.escape=function(e){return e===undefined?"":String(e).replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;")},NL.XML.escapeAttribute=function(e){return e?String(e).replace(/\r/g,"").replace(/\n/g,"").replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},NL.XML.escapeCDATA=function(e){var t="",n,r=0,i=-1;for(;;){i=e.indexOf("]]>",r),i===-1?n=e.substr(r):n=e.substr(r,i-r+1),t+="<![CDATA["+n+"]]>";if(i===-1)break;r=i+1}return t},NL.XML.toString=function(e){if(!NL.side("client"))return e.toString();var t=navigator.userAgent.toLowerCase(),n=t.indexOf("opera")!==-1,r=t.indexOf("msie")!==-1&&!n&&t.indexOf("webtv")===-1;return r&&!NL.isNundef(e.xml)?e.xml:typeof XMLSerializer!="undefined"?(new XMLSerializer).serializeToString(e):window.ActiveXObject?e.xml:document.implementation&&document.implementation.createDocument?(new XMLSerializer).serializeToString(e):null}}()
;"use strict";NL.ns("NL.Cookie"),NL.Cookie=function(e){this._name=e,this._value=null;var t=document.cookie.indexOf(e+"=");if(t===-1)return;if(!t&&e!==document.cookie.substring(0,e.length))return;var n=t+e.length+1,r=document.cookie.indexOf(";",n);r===-1&&(r=document.cookie.length),this._value=unescape(document.cookie.substring(n,r))},NL.Cookie.prototype.getValue=function(){return this._value},NL.Cookie.prototype.setValue=function(e,t){var n=new Date;n.setTime(n.getTime()+86400*t),document.cookie=this._name+"="+e+"; expires="+n.toUTCString()+"; path=/",this._value=e},NL.Cookie.prototype.erase=function(){this.setValue(null,-1)}
;"use strict";NL.ns("NL.Utils.Hash"),NL.require("/nl/core/shared/nl.js"),NL.Utils.Hash=function(){this.length=0,this.items=[];for(var e=0;e<arguments.length;e+=2)typeof arguments[e+1]!="undefined"&&(this.items[arguments[e]]=arguments[e+1],this.length++)},NL.Utils.Hash.prototype.clear=function(){this.length=0,this.items=[]},NL.Utils.Hash.prototype.remove=function(e){var t=this.items[e];return typeof t!="undefined"&&(this.length--,delete this.items[e]),t},NL.Utils.Hash.prototype.get=function(e){return this.items[e]},NL.Utils.Hash.prototype.set=function(e,t){return typeof t!="undefined"&&(typeof this.items[e]=="undefined"&&this.length++,this.items[e]=t),t},NL.Utils.Hash.prototype.hasItem=function(e){return typeof this.items[e]!="undefined"}
;"use strict";function DebugConsole(e){this.controller=e,e.registerObserver("/",this,this.onNodeChange,"DebugConsole",e.OBSERVE_CHILDREN)}function richTextArea(e,t,n,r){this.controller=e,this.htmlParent=document.getElementById(t),this.id=t+"_richTextArea",this.xpath=n,this.toolbarPosition=r,this.countTrigger=0,this.countCurrent=0,this.isTimer=!1,this.tableIframe=0,this.divTextArea=0,this.iframe=0,this.divToolBar=0,this.arrayFct=[],this.init(),e.registerObserver(n,this,this.onNodeChange,this.id,e.OBSERVE_XPATH)}function AutoAdjustMatrixColumns(e){var t=document.getElementById(e),n=t.getElementsByTagName("TH"),r=0;for(var i=1;i<n.length;i++)r<n[i].offsetWidth&&(r=n[i].offsetWidth);if(r>0)for(var i=1;i<n.length;i++)n[i].width=r+"px"}function onEnterPressed(e,t){var n=e?e:window.event?window.event:null;if(n){var r=n.charCode?n.charCode:n.keyCode?n.keyCode:n.which?n.which:0;if(r==13)return t()}return!0}function PerformClickAction(ctx,action,target,transition,option,param,event){function addInputValue(e,t,n){var r=document.createElement("input");r.type="hidden",r.name=t,r.value=n,e.appendChild(r)}if(action==="url"){if(document.getElementById("URLForm")!==null){var ndForm=document.getElementById("URLForm"),ndFormChild=ndForm.firstChild;while(ndFormChild!==null)ndFormChild.tagName==="INPUT"&&(ndFormChild=ndForm.removeChild(ndFormChild)),ndFormChild=ndFormChild.nextSibling}var ndURLForm=document.createElement("form");ndURLForm.setAttribute("id","URLForm"),ndURLForm.method="GET",ndURLForm.action=option,ndURLForm.target=target;for(var i=0;i<param.length;i++)addInputValue(ndURLForm,param[i].name,param[i].value);document.body.appendChild(ndURLForm),ndURLForm.submit()}else{for(var i=0;i<ctx.length;i++)document.controller.setValue(ctx[i].xpath,ctx[i].value);if(action==="refreshData"){var jsString="";for(var i in option)option.hasOwnProperty(i)&&(jsString+="document.lstData"+option[i]+".load(true);");eval(jsString)}else action==="javascript"?eval(option):document.controller.submit(action,target,transition)}}function HtmlDialog(e,t,n,r){this.htmlElement=document.createElement("div"),isIE()?this.htmlElement.onselectstart=function(){return!1}:this.htmlElement.onmousedown=function(e){typeof e.preventDefault!="undefined"&&e.preventDefault()},this.htmlElement.className="dialog",this.htmlElement.style.display="none",this.divOverToDisable=document.getElementById("overToDisable"),this.dialogsCallBacks=n,this.bCenter=r,this.titleTable=document.createElement("table"),this.titleTable.cellPadding=0,this.titleTable.cellSpacing=4,this.titleTable.width="100%",this.titleTable.className="dialogHeader",this.titleTable.style.fontSize="9pt";var i=this.titleTable.appendChild(document.createElement("tbody")),s=i.appendChild(document.createElement("tr")),o=s.appendChild(document.createElement("td"));this.title=o.appendChild(document.createElement("table")),this.title.cellSpacing=0,this.title.cellPadding=0,this.title.className="title";var u=this.title.appendChild(document.createElement("tbody")),a=u.appendChild(document.createElement("tr")),f=a.appendChild(document.createElement("td"));f.className="top-left-corner",f=a.appendChild(document.createElement("td")),f.className="top",f=a.appendChild(document.createElement("td")),f.className="top-right-corner";var l=u.appendChild(document.createElement("tr"));f=l.appendChild(document.createElement("td")),f.className="left",f=l.appendChild(document.createElement("td"));var c=f.appendChild(document.createElement("table"));c.cellSpacing=0,c.cellPadding=0,c.style.width="100%",a=c.appendChild(document.createElement("tbody")).appendChild(document.createElement("tr")),this.tdLeftImg=a.appendChild(document.createElement("td")),this.tdTitle=a.appendChild(document.createElement("td")),this.tdTitle.style.width="100%",this.tdTitle.align="left",this.tdTitle.appendChild(document.createTextNode(e)),this.tdTitle.className="title",this.tdClose=a.appendChild(document.createElement("td")),this.tdClose.className="close";var h=this.tdClose.appendChild(document.createElement("img"));h.src="/xtk/img/close.png",h.className="close",h.dialog=this,f=l.appendChild(document.createElement("td")),f.className="right",a=u.appendChild(document.createElement("tr")),f=a.appendChild(document.createElement("td")),f.className="bottom-left-corner",f=a.appendChild(document.createElement("td")),f.className="bottom",f=a.appendChild(document.createElement("td")),f.className="bottom-right-corner",this.htmlElement.appendChild(this.titleTable),this.divContent=document.createElement("div"),this.divContent.className="content",this.divContent.style.display="none",this.htmlElement.appendChild(this.divContent),this.divLoading=document.createElement("div"),this.divLoading.className="loading",this.divLoading.innerHTML="<div><object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,65,0' width='48' height='48' id='preload48x48' align='middle'>  <param name='movie' value='/xtk/img/form/classic/preload48x48.swf'/>  <param name='quality' value='high' /><param name='bgcolor' value='#ffffff' />  <embed src='/xtk/img/form/classic/preload48x48.swf' quality='high' bgcolor='#ffffff' width='48' height='48' name='preload48x48' align='middle' type='application/x-shockwave-flash' pluginspage='https://www.macromedia.com/go/getflashplayer'/></object></div>",this.htmlElement.appendChild(this.divLoading);var p=document.createElement("div");p.className="command",this.htmlElement.appendChild(p),this.buttonOk=document.createElement("input"),this.buttonOk.type="button";if(t===""||t===null)t=xtk_formbase.dialog_defaultOk();this.buttonOk.value=t,this.buttonOk.dialog=this,p.appendChild(this.buttonOk),this.buttonCancel=document.createElement("input"),this.buttonCancel.type="button",this.buttonCancel.value=xtk_formbase.dialog_cancel(),this.buttonCancel.dialog=this,p.appendChild(this.buttonCancel),document.getElementById("dialogsLib").appendChild(this.htmlElement),this.buttonCancel.onclick=function(){this.dialog.show(!1)},this.buttonOk.onclick=function(){var e=!0;this.dialog.dialogsCallBacks&&typeof this.dialog.dialogsCallBacks.onValidDialog=="function"&&(e=this.dialog.dialogsCallBacks.onValidDialog()),e&&this.dialog.show(!1)},h.onclick=function(){this.dialog.htmlElement.style.display="none";var e=document.getElementById("overToDisable");e!==null&&(e.style.display="none")}}NL.ns("NL"),DebugConsole.prototype.onNodeChange=function(){if(this.htmlElement===null||this.htmlElement===undefined)this.htmlElement=document.getElementById("DebugConsole"),this.htmlElement===null&&(this.htmlElement=document.body.appendChild(document.createElement("pre")),this.htmlElement.id="DebugConsole");var e=toXMLString(this.controller.ctx);this.htmlElement.innerHTML="",this.htmlElement.appendChild(document.createTextNode(e))},richTextArea.prototype.onNodeChange=function(e,t){this.setContent(t)},richTextArea.prototype.onSubmit=function(){return this.controller.setValue(this.xpath,this.getContent(),this.id),!0},richTextArea.prototype.init=function(){this.initFunction(),richTextArea.prototype.getMyArea(this.id,this),this.initTextArea(),document.designMode&&!isOpera()&&!isIOs()?(this.divTextArea.style.display="none",this.initBuildTable(),this.iframe=document.getElementById(this.id),this.initAfterLoad()):(isOpera()||isIOs())&&this.setContent(this.controller.getValue(this.xpath))},richTextArea.prototype.initFunction=function(){this.arrayFct.bold=this.makeButton,this.arrayFct.italic=this.makeButton,this.arrayFct.underline=this.makeButton,this.arrayFct.justifyleft=this.makeButton,this.arrayFct.justifyfull=this.makeButton,this.arrayFct.justifycenter=this.makeButton,this.arrayFct.justifyright=this.makeButton,this.arrayFct.source=this.makeSource},richTextArea.prototype.initTextArea=function(){this.divTextArea=document.createElement("div"),this.htmlParent.appendChild(this.divTextArea),this.textArea=document.createElement("textarea"),this.textArea.id=this.id+"_textarea",this.textArea.onblur=this.makeEvent(this.id,this.refresh),this.textArea.className="textarea",this.divTextArea.appendChild(this.textArea)},richTextArea.prototype.initBuildTable=function(){this.tableIframe=document.createElement("table"),this.tableIframe.appendChild(document.createElement("tbody")),this.tableIframe.lastChild.appendChild(document.createElement("tr")),this.toolbarPosition===0?(this.divBar=this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")),this.tableIframe.lastChild.appendChild(document.createElement("tr")),this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")).appendChild(this.makeIframe("type"))):this.toolbarPosition===1?(this.divBar=this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")),this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")).appendChild(this.makeIframe("type"))):this.toolbarPosition===2?(this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")).appendChild(this.makeIframe("type")),this.tableIframe.lastChild.appendChild(document.createElement("tr")),this.divBar=this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td"))):this.toolbarPosition===3?(this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")).appendChild(this.makeIframe("type")),this.divBar=this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td"))):(this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")).appendChild(this.makeIframe("type")),this.divBar=this.tableIframe.lastChild.lastChild.appendChild(document.createElement("td")),this.divBar.style.display="none"),this.divBar.className="richAreaToolbar",this.htmlParent.appendChild(this.tableIframe)},richTextArea.prototype.initAfterLoad=function(){var e,t=!0;this.iframe.contentDocument!==undefined?e=this.iframe.contentDocument:this.iframe.contentWindow!==undefined&&(e=this.iframe.contentWindow,t=!1);if(e===null||e===undefined)window.setTimeout(this.makeEvent(this.id,this.initAfterLoad),250);else{if(t===!1){e=e.document;if(window[this.id].document.body===null||typeof window[this.id].document.body=="undefined"){window.setTimeout(this.makeEvent(this.id,this.initAfterLoad),500);return}}e.open(),e.close(),e.designMode=t?"on":"On",this.setContent(this.controller.getValue(this.xpath)),this.addEvents(),this.initIframeStyle(e)}},richTextArea.prototype.initIframeStyle=function(e){var t;for(var n=0;n<document.styleSheets.length;n++){var r;isIE()?r=document.styleSheets[n].rules:r=document.styleSheets[n].cssRules;for(var i=0;i<r.length;i++)r[i].selectorText===".richTextArea_Body"&&(t=r[i])}var s=e.createElement("style");s.setAttribute("type","text/css"),s.setAttribute("media","screen");if(isSafari()){var o=e.createElement("head");e.firstChild.insertBefore(o,e.firstChild.firstChild)}if(e.getElementsByTagName("head").length>0){e.getElementsByTagName("head")[0].appendChild(s);if(isIE()&&e.styleSheets&&e.styleSheets.length>0){var u=e.styleSheets[e.styleSheets.length-1];typeof u.addRule=="object"&&(u.addRule(".richTextArea_Body",t.style.cssText),u.addRule("P","margin: 0;"))}else s.appendChild(document.createTextNode(t.cssText))}e.body&&(e.body.className="richTextArea_Body")},richTextArea.prototype.addElement=function(e){document.designMode&&this.arrayFct[e]!==undefined&&(this.divBar.appendChild(this.arrayFct[e].call(this,e)),this.toolbarPosition&1&&this.divBar.appendChild(document.createElement("br")))},richTextArea.prototype.setWidth=function(e){this.textArea.style.width=e,document.designMode&&!isOpera()&&!isIOs()&&(this.iframe.style.width=e)},richTextArea.prototype.setRows=function(e){this.textArea.rows=e},richTextArea.prototype.setHeight=function(e){this.textArea.style.height=e,document.designMode&&!isOpera()&&!isIOs()&&(this.iframe.style.height=e)},richTextArea.prototype.setAlign=function(e){this.htmlParent.style.align=e,this.divTextArea.style.align=e,document.designMode&&!isOpera()&&!isIOs()&&(this.tableIframe.lastChild.firstChild.firstChild.style.align=e,this.tableIframe.lastChild.lastChild.firstChild.style.align=e,this.tableIframe.lastChild.lastChild.lastChild.style.align=e,this.tableIframe.lastChild.firstChild.lastChild.style.align=e)},richTextArea.prototype.setVAlign=function(e){this.htmlParent.style.valign=e,this.divTextArea.style.valign=e,document.designMode&&!isOpera()&&!isIOs()&&(this.tableIframe.lastChild.firstChild.firstChild.style.valign=e,this.tableIframe.lastChild.lastChild.firstChild.style.valign=e,this.tableIframe.lastChild.lastChild.lastChild.style.valign=e,this.tableIframe.lastChild.firstChild.lastChild.style.valign=e)},richTextArea.prototype.makeButton=function(e){var t=document.createElement("img");t.src="/xtk/img/form/"+e+".png",t.className=e,t.id=this.id+"_"+e,t.onmousedown=this.makeEvent(this.id,this.buttonOnMouseDown),t.onclick=this.makeEvent(this.id,this.buttonOnClick);var n=document.createElement("div");return n.className="button",n.appendChild(t),n},richTextArea.prototype.makeSource=function(e){var t=document.createElement("img");t.className=e,t.src="/xtk/img/form/"+e+".png",t.id=this.id+"_"+e,t.onmousedown=this.makeEvent(this.id,this.buttonOnMouseDown),t.onclick=this.makeEvent(this.id,this.SourceOnClick);var n=t.cloneNode(!0);this.divTextArea.appendChild(n),n.onmousedown=this.makeEvent(this.id,this.buttonOnMouseDown),n.onclick=this.makeEvent(this.id,this.SourceOnClick);var r=document.createElement("div");return r.className="button",r.appendChild(t),r},richTextArea.prototype.makeIframe=function(e){return this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.className="richTextArea_Frame",this.iframe},richTextArea.prototype.addEvents=function(){this.iframe.contentDocument&&this.iframe.contentDocument.addEventListener?(this.iframe.contentDocument.addEventListener("keyup",this.makeEvent(this.id,this.askRefresh),!1),this.iframe.contentDocument.addEventListener("mouseup",this.makeEvent(this.id,this.askRefresh),!1)):this.iframe.contentWindow&&this.iframe.contentWindow.document&&this.iframe.contentWindow.document.attachEvent&&(this.iframe.contentWindow.document.attachEvent("onkeyup",this.makeEvent(this.id,this.askRefresh)),this.iframe.contentWindow.document.attachEvent("onmouseup",this.makeEvent(this.id,this.askRefresh)))},richTextArea.prototype.buttonOnMouseDown=function(e){var t=e?e:window.event;return t.returnValue?t.returnValue=!1:t.preventDefault&&t.preventDefault(),!1},richTextArea.prototype.buttonOnClick=function(e){var t,n=e||window.event;return n.target?t=n.target:t=n.srcElement,window[this.id]?window[this.id].document.execCommand(t.className,!1,null):document.getElementById(this.id).contentWindow.document.execCommand(t.className,!1,null),this.askRefresh(e),!1},richTextArea.prototype.SourceOnClick=function(e){var t,n=e||window.event;n.target?t=n.target:t=n.srcElement;var r=this.getContent(),i=this.tableIframe.style.display;return this.tableIframe.style.display=this.divTextArea.style.display,this.divTextArea.style.display=i,this.setContent(r),this.askRefresh(e),!1},richTextArea.prototype.getContent=function(){if(document.designMode&&!isOpera()&&!isIOs()&&this.divTextArea.style.display==="none"){var e;return window[this.id]&&window[this.id].document?e=window[this.id].document.body.innerHTML:e=document.getElementById(this.id).contentWindow.document.body.innerHTML,!isIE()||e!=="<P>&nbsp;</P>"&&e!=="<DIV>&nbsp;</DIV>"?isGecko()&&e==="<br>"?e="":isSafari()&&(e==="<div><br></div>"||e==="<br>")&&(e=""):e="",e}return document.getElementById(this.id+"_textarea").value},richTextArea.prototype.setContent=function(e){return document.designMode&&!isOpera()&&!isIOs()&&this.divTextArea.style.display==="none"?this.iframe.contentDocument&&this.iframe.contentDocument.body?this.iframe.contentDocument.body.innerHTML=e:this.iframe.contentWindow&&this.iframe.contentWindow.document&&this.iframe.contentWindow.document.body?this.iframe.contentWindow.document.body.innerHTML=e:this.initAfterLoad(this.id):document.getElementById(this.id+"_textarea").value=e,!0},richTextArea.prototype.getMyArea=function(e,t){return this.hashRichTextArea===undefined&&(this.hashRichTextArea=[]),t===undefined?this.hashRichTextArea[e]:(this.hashRichTextArea[t.id]=t,null)},richTextArea.prototype.refresh=function(e){this.countCurrent!==this.countTrigger?(this.isTimer=!0,this.countTrigger=this.countCurrent,window.setTimeout(this.makeEvent(this.id,this.refresh),500)):(this.isTimer=!1,this.controller.setValue(this.xpath,this.getContent(),this.id))},richTextArea.prototype.askRefresh=function(e){return this.countCurrent++,this.isTimer===!1&&(this.isTimer=!0,this.countTrigger=this.countCurrent,window.setTimeout(this.makeEvent(this.id,this.refresh),500)),!1},richTextArea.prototype.makeEvent=function(e,t){return function(n){return t.call(richTextArea.prototype.getMyArea(e),n),!1}},HtmlDialog.prototype.setTitle=function(e){this.tdTitle.innerHTML=e,this.tdTitle.style.width="100%",this.tdTitle.className="title"},HtmlDialog.prototype.setLeftImg=function(e){this.tdLeftImg.innerHTML="<img style='margin-right: 4px;margin-left: 4px' src='"+e+"'/>"},HtmlDialog.prototype.setSize=function(e,t){typeof e=="string"?this.htmlElement.style.width=e:e&&(this.htmlElement.style.width=e+"px"),typeof t=="string"?this.htmlElement.style.height=t:t&&(this.htmlElement.style.height=t+"px")},HtmlDialog.prototype.show=function(e){function t(){var e;return window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e}if(e!==!1){this.htmlElement.style.display="block";if(this.bCenter){var n=document.documentElement.scrollLeft||document.body.scrollLeft||0,r=document.documentElement.scrollTop||document.body.scrollTop||0;this.htmlElement.style.left=n+Math.floor((t()-this.htmlElement.offsetWidth)/2)+"px",this.htmlElement.style.top=50+r+"px"}}else this.htmlElement.style.display="none";this.divOverToDisable&&(this.divOverToDisable.style.display=this.htmlElement.style.display,this.divOverToDisable.style.height=document.body.clientHeight+"px",this.divOverToDisable.style.width=document.body.clientWidth+"px"),e!==!1&&this.dialogsCallBacks&&typeof this.dialogsCallBacks.onShowDialog=="function"&&this.dialogsCallBacks.onShowDialog()},HtmlDialog.prototype.addContent=function(e){this.divContent.appendChild(e)},HtmlDialog.prototype.setLoading=function(e){e?(this.divContent.style.display="none",this.divLoading.style.display="block"):(this.divContent.style.display="block",this.divLoading.style.display="none")},HtmlDialog.prototype.deleteContent=function(){this.divContent&&(this.divContent.innerHtml="",delete this.divContent)};var traverseXMLTree=function(e,t){if(!e)return!1;var n,r=e.firstChild,i=e.nextSibling;return e.nodeType===1&&(n=t(e)),n||(n=traverseXMLTree(r,t)),n||(n=traverseXMLTree(i,t)),n};NL.XtkLinkEdit=function(e,t,n,r,i,s,o,u,a,f,l,c){this.controller=e,this.id=t,this.xpath=n,this.isFolder=!1,this.iSelectedFolderId=0,this.strSchemaId=r,this.isFolder=u,this.strFolderModel=i,this.strFolderLinkId=s,this.strFolderLink=o;if(this.strFolderModel!==""||this.isFolder)this.xtkNavigationTree=new NL.XtkNavigationTree(this.controller,this.strFolderModel,"/ctx/"+this.id+"/folder",this),a!==undefined&&(a=="true"||a==1)&&(this.xtkNavigationTree.isWriteAccess=!0);this.ndSysFilter=null,this.aJoinPath=[],this.aSelectionData=null,this.bNavtreeLoaded=!1,this.strEnumImagePath=typeof f=="string"?f:"",this.strInputTableWidth=l||"",this.inlineStyleValue=c?c.inlineStyleValue:null},NL.XtkLinkEdit.prototype.setSysFilter=function(e){if(this.isFolder&&this.xtkNavigationTree)this.xtkNavigationTree.setSysFilter(e);else{this.ndSysFilter=e;var t=function(e){var t=e.getAttribute("expr");return t&&t.indexOf("$([@_filterInput])")!==-1};this.bUseFiltering=traverseXMLTree(this.ndSysFilter.documentElement,t);if(this.bUseFiltering){this.strFilterValue="",this.filterDiv=document.createElement("div"),this.filterDiv.className="filter";var n=this.filterDiv.appendChild(document.createElement("div"));n.appendChild(document.createTextNode(xtk_core.linkEditFilter()));var r=this.filterDiv.appendChild(document.createElement("input"));this.filterDiv.input=r,r.onclick=function(){this.focus()};var i=this,s=function(){return i.strFilterValue!==r.value&&(i.strFilterValue=r.value,i.loadList()),!0};r.onkeypress=function(e){return onEnterPressed(e,s)}}}},NL.XtkLinkEdit.prototype.addJoinPath=function(e){this.aJoinPath.push(e)},NL.XtkLinkEdit.prototype.initNavtree=function(){this.bNavtreeLoaded||this.xtkNavigationTree.init(this.iSelectedFolderId,this.strSelectedFolderFullName),this.bNavtreeLoaded=!0},NL.XtkLinkEdit.prototype.onShowDialog=function(){this.aSelection=[];for(var e in this.aJoinPath)if(this.aJoinPath.hasOwnProperty(e)){var t=this.aJoinPath[e],n=this.controller.getValue(this.xpath+"/"+t);n&&n!=0&&this.aSelection.push({xpath:t,value:n})}if(this.aSelection.length>0&&this.strFolderModel!==""){var r=new NL.QueryDef(this.strSchemaId,"getIfExists");r.action="getEntityFolder",r.addSelectExpr("["+this.strFolderLinkId+"]"),r.addSelectExpr("["+this.strFolderLink+"/@fullName]");for(var e in this.aSelection)this.aSelection(e)&&r.addWhereConditionExpr("["+this.aSelection[e].xpath+"] = "+NL.XTK.toXTKString(this.aSelection[e].value));r.execute(this.controller.soapRouterUrl,"",this)}else if(this.aSelection.length>0&&this.isFolder)this.iSelectedFolderId=this.aSelection[0].value,this.initNavtree(),this.dialog.setLoading(!1);else if(!this.bNavtreeLoaded&&(this.strFolderModel!==""||this.isFolder)){var i=new NL.transport.SOAP({urn:"xtk:folder",method:"FindFirstAuthorized",url:this.controller.soapRouterUrl}),s="";if(this.strFolderModel.indexOf(",")!==-1){s="@model IN (";var o=this.strFolderModel.split(",");for(var u=0;u<o.length;u++)u!==0&&(s+=","),s+=NL.XTK.toXTKString(o[u]);s+=")"}else s="@model = "+NL.XTK.toXTKString(this.strFolderModel);var a=this;i.writeString("folderFilter",s),i.writeBoolean("writeAccess",!1),i.writeInt("orgUnit",0),i.start({onSuccess:function(e){a.onSoapRequestCompleted(e,null)},onError:function(e){a.onSoapRequestCompleted(null,e)}})}else this.isFolder||this.loadList()},NL.XtkLinkEdit.prototype.onValidDialog=function(){if(this.isFolder)this.controller.setValue(this.xpath+"/@_cs",getXPathValue(this.selectedItem,"@label")),this.controller.setValue(this.xpath+"/@id",getXPathValue(this.selectedItem,"@id"));else{this.controller.setValue(this.xpath+"/@_cs",getXPathValue(this.selectedItem,"@_cs"));if(this.aJoinPath.length>0){for(var e in this.aJoinPath)if(this.aJoinPath.hasOwnProperty(e)){var t=this.aJoinPath[e];this.controller.setValue(this.xpath+"/"+t,getXPathValue(this.selectedItem,t))}}else this.controller.setValue(this.xpath+"/@id",getXPathValue(this.selectedItem,"@id"))}return!0},NL.XtkLinkEdit.prototype.onXtkQueryCompleted=function(e,t,n){if(n===null||n===undefined){if(e.action==="loadList"){var r=firstChildElement(t);this.list.innerHTML="";while(r){var i=this.list.appendChild(document.createElement("a"));i.href="javascript:;",i.className="linkEditListItem",i.itemKeys=r;if(this.aSelection.length>0){var s=!0;for(var o in this.aSelection)this.aSelection.hasOwnProperty(o)&&(s=s&&this.aSelection[o].value===getXPathValue(r,this.aSelection[o].xpath));s&&(this.selection=i,i.className="linkEditListItemSelected")}i.linkEdit=this,i.onclick=function(){this.linkEdit.selection&&(this.linkEdit.selection.className="linkEditListItem"),this.className="linkEditListItemSelected",this.linkEdit.selectedItem=this.itemKeys,this.linkEdit.selection=this,this.linkEdit.dialog.buttonOk.disabled=!1};if(this.strEnumImagePath!==""){var u=getXPathValue(r,this.strEnumImagePath+"Img");if(u!==""){var a=i.appendChild(document.createElement("img"));a.className="raw",a.src=NL.route(u,"reverse_img")}}i.appendChild(document.createTextNode(getXPathValue(r,"@_cs"))),r=nextSiblingElement(r)}}else if(e.action==="getEntityFolder"){var f=getXPathValue(t,this.strFolderLinkId);Number(f)||(f=0),this.iSelectedFolderId=f,this.strSelectedFolderFullName=getXPathValue(t,this.strFolderLink+"/@fullName"),this.initNavtree(),this.loadList()}this.dialog.setLoading(!1)}else alert(n.message)},NL.XtkLinkEdit.prototype.onSoapRequestCompleted=function(e,t){if(!t){if(e.getMethodName()==="FindFirstAuthorized"){var n=e.getNextElement();e.checkNoMoreArgs(),n!==null?(this.strSelectedFolderFullName=n.getAttribute("fullName"),this.iSelectedFolderId=parseInt(n.getAttribute("id"),10),this.initNavtree(),this.loadList()):this.isFolder&&this.initNavtree(),this.dialog.setLoading(!1)}}else alert(t.details)},NL.XtkLinkEdit.prototype.onFolderChange=function(e,t){this.iSelectedFolderId=parseInt(getXPathValue(t,"@id"),10),this.isFolder?(this.selectedItem=t,this.dialog.buttonOk.disabled=!1):this.loadList()},NL.XtkLinkEdit.prototype.render=function(e,t){var n=document.createElement("table");this.strInputTableWidth!==""?n.style.width=this.strInputTableWidth:n.style.width="125px",n.style.borderCollapse="collapse";var r=n.appendChild(document.createElement("tbody")),i=r.appendChild(document.createElement("tr"));this.input=document.createElement("input"),this.input.id=this.id,this.input.name=this.id,this.input.className="linkEdit",this.input.readOnly="true",this.input.style.width="100%",HTMLHelper.setStyle(this.input,this.inlineStyleValue);var s=document.createElement("td");s.style.width="100%",s.appendChild(this.input),i.appendChild(s);var o=document.createElement("td");o.linkEdit=this,o.className="button",e.appendChild(o),o.onclick=function(){this.linkEdit.dialog.show()};var u=document.createElement("img");u.src="/xtk/img/form/xawchoice.png",o.appendChild(u),i.appendChild(o),e.appendChild(n),this.dialog=new HtmlDialog(t,"OK",this,!0),this.dialog.buttonOk.disabled=!0,this.dialog.setSize("40em","auto");var a=document.createElement("table");a.style.width="100%";var i=a.appendChild(document.createElement("tbody")).appendChild(document.createElement("tr"));if(this.strFolderModel!==""||this.isFolder){var f=document.createElement("td");f.className="linkEditFolderTree",this.isFolder&&(f.style.width="100%"),i.appendChild(f);var l=document.createElement("div");f.appendChild(l),l.className="linkEditFolderTree",this.xtkNavigationTree.render(l)}if(!this.isFolder){var c=i.appendChild(document.createElement("td"));c.className="linkEditList",this.list=c.appendChild(document.createElement("div")),this.list.className="linkEditList";var h=this.list.appendChild(document.createElement("div"));h.className="loading",h.innerHTML="<div><object classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000' codebase='https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,65,0' width='48' height='48' id='preload48x48' align='middle'>  <param name='movie' value='/xtk/img/form/classic/preload48x48.swf'/>  <param name='quality' value='high' /><param name='bgcolor' value='#ffffff' />  <embed src='/xtk/img/form/classic/preload48x48.swf' quality='high' bgcolor='#ffffff' width='48' height='48' name='preload48x48' align='middle' type='application/x-shockwave-flash' pluginspage='https://www.macromedia.com/go/getflashplayer'/></object></div>";if(this.bUseFiltering){this.dialog.addContent(this.filterDiv);try{this.filterDiv.input.focus()}catch(p){}}}else this.dialog.divContent.style.padding="0";this.dialog.addContent(a),this.dialog.titleTable.style.fontSize="0.8em"},NL.XtkLinkEdit.prototype.loadList=function(){var e=new NL.QueryDef(this.strSchemaId,"select");if(this.aJoinPath.length>0){for(var t in this.aJoinPath)if(this.aJoinPath.hasOwnProperty(t)){var n=this.aJoinPath[t];e.addSelectExpr("["+n+"]")}}else e.addSelectExpr("@id");e.addSelectExpr("[/]"),e.addOrderByExpr("[/]"),this.strEnumImagePath!==""&&e.addSelectExpr(this.strEnumImagePath,null,!0),e.setLineCount(100),this.iSelectedFolderId!=0&&this.strFolderLinkId!=""&&this.strFolderModel!=""&&e.addWhereConditionExpr("["+this.strFolderLinkId+"] = "+this.iSelectedFolderId);if(this.ndSysFilter!==null){var r=importNode(this.ndSysFilter,this.ndSysFilter.documentElement,!0),i=this,s=function(e,t){var n=e.getAttribute(t);if(n){var r=n.match(/\$\(\[(.+)\]\)/);if(r){var s=r[1]==="@_filterInput"?i.strFilterValue:i.controller.getValue(r[1]);typeof s!="string"||s===""?e.getAttribute("enabledIf")||e.setAttribute("enabledIf","false"):(s=s.replace(/\\/g,"\\\\").replace(/'/g,"\\'"),e.setAttribute(t,n.replace(r[0],s)))}}},o=function(e){return s(e,"enabledIf"),s(e,"expr"),!1};traverseXMLTree(r,o),e.addWhereCondition(r,"",!0),e.setExpandParam(!0)}e.action="loadList",e.execute(this.controller.soapRouterUrl,"",this)}
;"use strict";NL.ns("NL"),NL.QueryDef=function(e,t){this.xmlQuery=newDOMDocument("queryDef"),this.ndRoot=this.xmlQuery.documentElement,this.ndSelect=this.ndRoot.appendChild(this.xmlQuery.createElement("select")),this.ndOrderBy=null,this.ndWhere=null,this.ndGroupBy=null,this.ndRoot.setAttribute("xtkschema","xtk:queryDef"),this.ndRoot.setAttribute("schema",e),this.ndRoot.setAttribute("operation",t)},NL.QueryDef.prototype.OPERATION_GET="get",NL.QueryDef.prototype.OPERATION_GETIFEXISTS="getIfExists",NL.QueryDef.prototype.OPERATION_SELECT="select",NL.QueryDef.prototype.OPERATION_COUNT="count",NL.QueryDef.prototype.setDefinition=function(e){for(var t=0;t<e.attributes.length;t++)this.ndRoot.setAttribute(e.attributes[t].name,e.attributes[t].value);replaceContent(this.xmlQuery,"/queryDef/select",findElement(e,"select")),replaceContent(this.xmlQuery,"/queryDef/orderBy",findElement(e,"orderBy")),replaceContent(this.xmlQuery,"/queryDef/where",findElement(e,"where")),replaceContent(this.xmlQuery,"/queryDef/sysFilter",findElement(e,"sysFilter")),replaceContent(this.xmlQuery,"/queryDef/groupBy",findElement(e,"groupBy")),this.ndSelect=findElement(this.ndRoot,"select"),this.ndOrderBy=findElement(this.ndRoot,"orderBy"),this.ndWhere=findElement(this.ndRoot,"where"),this.ndGroupBy=findElement(this.ndRoot,"groupBy");var n=findElement(e,"conditionLink");if(n!=null&&this.ndSelect!=null){var r=n.getAttribute("xpath");if(r!=""&&r!=undefined){var i=findElement(e,r);i==null&&(i=this.ndSelect.appendChild(this.xmlQuery.createElement("node")),i.setAttribute("expr",r)),i.setAttribute("noComputeString","true"),i.setAttribute("conditionLink","true"),i.setAttribute("lineCount",n.getAttribute("lineCount"));var s=n.getAttribute("singleRow");s!=null&&typeof s!="undefined"&&i.setAttribute("singleRow",s);var o=findElement(n,"where");o!=null&&i.appendChild(importNode(this.xmlQuery,o,!0));var u=findElement(n,"orderBy");u!=null&&i.appendChild(importNode(this.xmlQuery,u,!0))}}},NL.QueryDef.prototype.getSchema=function(){return this.ndRoot.getAttribute("schema")},NL.QueryDef.prototype.setLineCount=function(e){this.ndRoot.setAttribute("lineCount",e),this.ndRoot.setAttribute("firstRows","true")},NL.QueryDef.prototype.getLineCount=function(){return this.ndRoot.getAttribute("lineCount")},NL.QueryDef.prototype.setStartLine=function(e){this.ndRoot.setAttribute("startLine",e)},NL.QueryDef.prototype.getStartLine=function(){return this.ndRoot.getAttribute("startLine")},NL.QueryDef.prototype.setFirstRows=function(e){this.ndRoot.setAttribute("firstRows",this.booleanString(e))},NL.QueryDef.prototype.setOperation=function(e){this.ndRoot.setAttribute("operation",e)},NL.QueryDef.prototype.setFullLoad=function(e){this.ndRoot.setAttribute("fullLoad",this.booleanString(e))},NL.QueryDef.prototype.setDistinct=function(e){this.ndRoot.setAttribute("distinct",this.booleanString(e))},NL.QueryDef.prototype.setNewAutoPk=function(e){this.ndRoot.setAttribute("newAutoPk",this.booleanString(e))},NL.QueryDef.prototype.setIgnoreDeleteStatus=function(e){this.ndRoot.setAttribute("ignoreDeleteStatus",this.booleanString(e))},NL.QueryDef.prototype.setUnExpandMemoData=function(e){this.ndRoot.setAttribute("unExpandMemoData",this.booleanString(e))},NL.QueryDef.prototype.setShowSQL=function(e){this.ndRoot.setAttribute("showSQL",this.booleanString(e))},NL.QueryDef.prototype.setExpandParam=function(e){this.ndRoot.setAttribute("expandParam",this.booleanString(e))},NL.QueryDef.prototype.setCheckActiveEnabledIf=function(e){this.ndRoot.setAttribute("checkActiveEnabledIf",this.booleanString(e))},NL.QueryDef.prototype.startLine=function(){var e=this.ndRoot.getAttribute("startLine");return typeof e=="undefined"||e==null?0:parseInt(e,10)},NL.QueryDef.prototype.addSelectExpr=function(e,t,n,r){var i=this.xmlQuery.createElement("node");return i.setAttribute("expr",e),typeof t!="undefined"&&t!=null&&i.setAttribute("alias",t),typeof n!="undefined"&&n!=null&&i.setAttribute("analyze",this.booleanString(n)),typeof r!="undefined"&&r!=null&&i.setAttribute("anyType",this.booleanString(r)),this.ndSelect.appendChild(i)},NL.QueryDef.prototype.addSelectElement=function(e){return this.ndSelect.appendChild(e)},NL.QueryDef.prototype.createRootConditionIfNeeded=function(e,t){var n=null;if(typeof t!="undefined"){var r=firstChildElement(this.ndRoot);while(r!=null&&n==null)r.getAttribute("name")==t&&(e&&r.nodeName=="sysFilter"||!e&&r.nodeName=="where")&&(n=r),r=nextSiblingElement(r)}else e==0&&(n=this.ndWhere);return n==null&&(n=this.ndRoot.appendChild(this.xmlQuery.createElement(e?"sysFilter":"where")),typeof t!="undefined"?n.setAttribute("name",t):e==0&&this.ndWhere==null&&(this.ndWhere=n)),n},NL.QueryDef.prototype.addWhereConditionExpr=function(e,t,n,r,i,s){typeof t=="undefined"&&(t=!1);var o=this.createRootConditionIfNeeded(t,n),u=o.appendChild(this.xmlQuery.createElement("condition"));return u.setAttribute("expr",e),typeof r!="undefined"&&u.setAttribute("boolOperator",r),typeof i!="undefined"&&u.setAttribute("enabledIf",i),typeof s!="undefined"&&s&&u.setAttribute("constAsText","true"),u},NL.QueryDef.prototype.addWhereCondition=function(e,t,n,r){typeof n=="undefined"&&(n=!1);var i=this.createRootConditionIfNeeded(n,r),s=i.appendChild(this.xmlQuery.createElement("condition"));typeof t!="undefined"&&t!=""&&(s.setAttribute("xpath",t),s.setAttribute("noComputeString","true"));for(var o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType==1&&s.appendChild(importNode(this.xmlQuery,e.childNodes[o],!0));return s},NL.QueryDef.prototype.addGroupByExpr=function(e){this.ndGroupBy==null&&(this.ndGroupBy=this.ndRoot.appendChild(this.xmlQuery.createElement("groupBy")));var t=this.xmlQuery.createElement("node");t.setAttribute("expr",e),this.ndGroupBy.appendChild(t)},NL.QueryDef.prototype.addOrderByExpr=function(e,t){this.ndOrderBy==null&&(this.ndOrderBy=this.ndRoot.appendChild(this.xmlQuery.createElement("orderBy")));var n=this.xmlQuery.createElement("node");n.setAttribute("expr",e),t!=undefined&&t!=0&&n.setAttribute("sortDesc","1"),this.ndOrderBy.appendChild(n)},NL.QueryDef.prototype.booleanString=function(e){return e?"true":"false"},NL.QueryDef.prototype.execute=function(e,t,n){var r=!1;n!=undefined&&n!=null&&(r=!0,this.asyncTarget=n);var i=new NL.transport.SOAP({urn:"xtk:queryDef",method:"ExecuteQuery",url:e});i.writeDocument("queryDef",this.xmlQuery);if(r){var s=this;return i.start({onSuccess:function(e){var t=e.getNextElement();e.checkNoMoreArgs(),s.asyncTarget.onXtkQueryCompleted(s,t,null)}}),null}i.start({async:!1});var o=i.getNextElement();return i.checkNoMoreArgs(),o}
;"use strict";function ReportList(e,t,n,r){this.data=t,this.htmlTable=e,this.styles=[],this.rowNum=0;var i=n.documentElement.firstChild;while(i!=null)i.nodeType==XML.ELEMENT_NODE&&this.compileStyle(i,r),i=i.nextSibling}function formatAndSetValue(e,t,n,r){if(t==null)return;if(e.compiledStyle.format=="enum"){var i=e.compiledStyle.enumFormat,s={rawValue:t,htmlNodeRef:e};i=="label"?s.labelValue=getXPathValue(n.ctx,r+"Label"):i=="image"?s.imageValue=getXPathValue(n.ctx,r+"Img"):i!=""&&(s.labelValue=getXPathValue(n.ctx,r+"Label"),s.imageValue=getXPathValue(n.ctx,r+"Img")),t=s}t=FormatHelper.format[e.compiledStyle.format].call(n,t,e.compiledStyle),e.appendChild(typeof t=="string"?document.createTextNode(t):t)}function FormatHelper(){}function compileStyle(e,t,n){var r=e.getAttribute("format");r==null&&(r="string");var i={format:r,negativeNumberRed:e.getAttribute("negativeNumberRed")=="true"?!0:!1};t.style.textAlign="left";if(r=="number"||r=="currency"||r=="percentage"){var s;e.getAttribute("use1000Sep")=="true"?s="#,###":s="#";var o=e.getAttribute("decimalPlaces");o=o==null?2:o;if(o>0){s+=".";for(var u=0;u<o;u++)s+="0"}r=="percentage"&&(s+="\u00a4",i.symbol=NL.session.locale.getSettings().percentSeparator+"%"),r==="currency"&&(i.symbol=e.getAttribute("currency")),i.pattern=s,t.style.textAlign="right"}else r=="date"||r=="time"?(i.useTime=e.getAttribute("useTime")=="true",i.useSec=e.getAttribute("useSec")=="true"):r=="enum"&&(i.enumFormat=e.getAttribute("enumFormat"));e.getAttribute("alignment")!=null&&e.getAttribute("alignment")!="auto"&&(t.style.textAlign=e.getAttribute("alignment")),e.getAttribute("verticalAlignment")!=null&&e.getAttribute("verticalAlignment")!="default"&&(t.style.verticalAlign=e.getAttribute("verticalAlignment"));var a=e.getAttribute("widthMode");a=="max"?t.style.width=e.getAttribute("width")+"%":a=="manual"&&(t.style.width=e.getAttribute("width")+"em"),e.getAttribute("wrapText")!=null&&e.getAttribute("wrapText")=="true"?t.style.whiteSpace="normal":t.style.whiteSpace="nowrap";var f=e.firstChild;while(f!=null){if(f.nodeType==XML.ELEMENT_NODE)if(f.nodeName=="font"){var l=f.getAttribute("style");if(l=="bold"||l=="boldItalic")t.style.fontWeight="bold";if(l=="italic"||l=="boldItalic")t.style.fontStyle="italic";l=="normal"&&(t.style.fontWeight="normal",t.style.fontStyle="normal");var c=f.getAttribute("size");c!=undefined&&c!="0"&&c!=""&&(isNaN(n)?t.style.fontSize="1em":t.style.fontSize=c/n+"em");var h=f.getAttribute("color");h!=undefined&&(t.style.color=h)}else if(f.nodeName=="extra"){var p=f.getAttribute("visual");if(p=="bargraph"){var d=document.createElement("div");d.className="bargraph";var v=document.createElement("div");v.className="container",d.appendChild(v);var m=document.createElement("div");m.className="blue",v.appendChild(m),i.bargraph=d}else p=="rating"?(i.rating=!0,i.ratingMax=parseInt(f.getAttribute("ratingMax"),10)):p=="color"&&(i.color=!0,i.hideValue=!0);f.getAttribute("hideValue")=="true"&&(i.hideValue=!0)}else if(f.nodeName=="onclick"&&f.getAttribute("action")!="none"){var g=document.createElement("a");g.href="#",g.className="linkAction",i.onclick=!0,i.onclickAction=f.getAttribute("action"),i.onclickTarget=f.getAttribute("target"),i.onclickTransition=f.getAttribute("transition");if(i.onclickAction=="url")i.onclickOption=f.getAttribute("href");else if(i.onclickAction=="javascript")i.onclickOption=getXPathValue(f,"javascript");else if(i.onclickAction=="refreshData"){i.onclickOption=[];var y=f.firstChild;while(y!=null)y.nodeName=="objectTarget"&&i.onclickOption.push(y.getAttribute("identifier")),y=y.nextSibling}t.appendChild(g),i.onclickAction=="transition"&&(i.onclickAction="next")}else if(f.nodeName=="border"){var b=f.firstChild,w="";while(b!=null){if(b.nodeType==XML.ELEMENT_NODE)try{t.style[b.nodeName]=b.attributes[0].nodeValue}catch(E){}b=b.nextSibling}}f=f.nextSibling}return i}ReportList.prototype.COLORS=new Array("#3B87A2","#FF8012","#8CA23B","#A23B5E","#004A62","#FFCCA0","#C75400","#CAD4A5","#A5C8D4","#6D0026","#D4A5B4","#4F6400"),ReportList.prototype.IMG_PLUS="/xtk/img/plus.png",ReportList.prototype.IMG_MINUS="/xtk/img/minus.png",ReportList.prototype.compileStyle=function(e,t){var n=document.createElement("td"),r=compileStyle(e,n,t);r.td=n,this.styles.push(r)},ReportList.prototype.render=function(){while(this.htmlTable.firstChild!=null)this.htmlTable.removeChild(this.htmlTable.firstChild);var e=document.createElement("tbody");this.renderNode(this.data,e),this.htmlTable.appendChild(e)},ReportList.prototype.onCellClick=function(e,t,n,r,i,s,o){PerformClickAction(e,t,n,r,i,s,o)},ReportList.prototype.makeOnClickEvent=function(e,t,n,r,i,s,o){return function(u){return ReportList.prototype.onCellClick.call(e,t,n,r,i,s,o,u)}},ReportList.prototype.renderNode=function(e,t){var n=[];for(var r=0;r<e.length;r++){var i=e[r],s=document.createElement("tr");s.className=i.t,s.className+=++this.rowNum%2==0?" even":" odd",t.appendChild(s);for(var o=0;o<i.d.length;o++){var u=i.d[o],a=null,f={};f.title="",f.content="",typeof u.de=="string"&&(f.content=u.de.toString());var l,c;if(typeof u!="undefined"&&typeof u.s!="undefined"){var h=u.v,p=this.styles[u.s];l=p.td.cloneNode(!0),c=l;var d=e[r+1];if(s.className.indexOf("header")!=-1&&o==0&&this.getLevel(s.className)>0&&this.canBeCollapsed(d!=undefined?d.t:null,this.getLevel(s.className))){addTable(l,p),c=l.getMainTD();var v=document.createElement("img");v.src=this.IMG_MINUS,v.onclick=function(){ReportList.prototype.toggleCollapsing(this)},v.className="collapse";var m=l.addInnerCell(p,"first");m.appendChild(v),i.c&&n.push(v)}if(typeof u.di=="string"&&f.content!=""&&(u.di=="right"||u.di=="left")){l.innerTable||(addTable(l,p),c=l.getMainTD());var g;u.di=="right"?g=l.addInnerCell(p,"after"):g=l.addInnerCell(p,"before");var y=document.createElement("a");y.className="helpBubble",y.href="#",f.link=y,y.innerHTML="&nbsp;",g.appendChild(y)}if(p.hideValue!=1){var b=h;if(p.format=="enum"){var w={rawValue:h,labelValue:u.vl,imageValue:u.vi,htmlNodeRef:c};b=w}a=FormatHelper.format[p.format].call(this,b,p)}if(p.onclick==1){var E=[],S=[],x=!1;if(typeof u.l!="undefined")for(var T=0;T<u.l.length;T++)u.l[T].t=="set"?E.push({xpath:u.l[T].xpath,value:u.l[T].v}):u.l[T].t=="param"?S.push({name:u.l[T].name,value:u.l[T].v}):u.l[T].t=="notClickableIf"&&(x=u.l[T].v);x=="false"||x==0?c.onclick=this.makeOnClickEvent(this,E,p.onclickAction,p.onclickTarget,p.onclickTransition,p.onclickOption,S):c.firstChild!=null&&c.removeChild(c.firstChild)}if(p.bargraph!=undefined){var N=p.bargraph.cloneNode(!0),C=Math.min(Math.max(parseFloat(h)*100,0),100);isNaN(C)&&(C=0),N.firstChild.firstChild.style.width=C.toString()+"%",c.appendChild(N)}else if(p.rating==1){var k=parseFloat(h);for(var T=1;T<=p.ratingMax;T++){var L=document.createElement("div");L.className="rating"+(k>=T?"On":"Off"),c.appendChild(L)}}else if(p.color==1&&h!=""&&h!="none"){var A=h;if(!isNaN(A)){var O=parseInt(A,10);A=this.COLORS[O%this.COLORS.length]}var L=document.createElement("div");L.className="color";try{L.style.backgroundColor=A}catch(M){L.style.backgroundColor="transparent"}c.appendChild(L)}}else l=document.createElement("td");if(a!=null){var _;typeof a=="string"?_=document.createTextNode(a):_=a;var D=c||l;f.title=a;if(p.onclick==1){var P=D.firstChild;while(P!=null&&P.nodeName!="A")P=P.nextSibling;P==null?D.appendChild(_):P.appendChild(_)}else D.appendChild(_)}typeof u.cs!="undefined"&&(l.colSpan=u.cs);if(f.content!=""){f.link&&new HelpBubble(f.link,f,{eAttachmentMode:HelpBubbleOptions.EAttachmentMode.ON_CLICK});var H=l.innerTable?l.getMainTD():l;new HelpBubble(H,f)}s.appendChild(l)}}for(var r=0;r<n.length;r++)this.toggleCollapsing(n[r])},ReportList.prototype.getLevel=function(e){return e.match(/level(\d+)/)[1]},ReportList.prototype.canBeCollapsed=function(e,t){var n=!0;return e!=undefined&&(e.indexOf("header")!=-1&&this.getLevel(e)<=t?n=!1:e.indexOf("footer")!=-1&&this.getLevel(e)<t&&(n=!1)),n},ReportList.prototype.toggleCollapsing=function(e){var t;e.src.indexOf(ReportList.prototype.IMG_PLUS)==-1?(t=function(e){e.style.display="none"},e.src=ReportList.prototype.IMG_PLUS):(t=function(e){e.style.display="";var t=e.getElementsByTagName("img")[0];t!=undefined&&t.src.indexOf(ReportList.prototype.IMG_PLUS)!=-1&&(t.src=ReportList.prototype.IMG_MINUS)},e.src=ReportList.prototype.IMG_MINUS);var n=e.parentNode;while(n!=undefined&&(n.nodeName!="TR"||n.tryAgain==1))n=n.parentNode;var r=this.getLevel(n.className);n=n.nextSibling;while(n!=undefined&&this.canBeCollapsed(n.className,r))t(n),n=n.nextSibling;typeof resizeParentFrame=="function"&&resizeParentFrame()};var addTable=function(e,t){if(e.innerTable)return e.innerTable;var n=document.createElement("table"),r=document.createElement("tbody");n.appendChild(r),e.appendChild(n),e.innerTable=n;var i=function(e,t,n,r){n=="first"?e.insertBefore(t,e.firstChild):n=="last"?e.appendChild(t):n=="before"?e.insertBefore(t,r):n=="after"&&(r.nextSibling?e.insertBefore(t,r.nextSibling):e.appendChild(t))};e.addInnerRow=function(t,n){if(!e.innerTable)throw"You can't add a row into a table you destroyed..";var r=document.createElement("tr");return r.tryAgain=!0,e.getMainTR()?n&&i(e.innerTable.firstChild,r,n,e.getMainTR()):(e.innerTable.firstChild.appendChild(r),e.innerTable.mainTR=r),r.addInnerCell=function(t,n){if(!e.innerTable)throw"You can't add a cell into a table you destroyed..";var s;return t&&t.td?s=t.td.cloneNode(!0):s=document.createElement("td"),s.className="collapse",s.style.border="none",r.mainTD?n&&i(r,s,n,r.mainTD):(s.style.width="100%",r.appendChild(s),r.mainTD=s),s},r.mainTD=r.addInnerCell(t),r.getMainTD=function(){return r.mainTD},r},e.getMainTR=function(){return e.innerTable.mainTR},e.getMainTD=function(){return e.getMainTR().getMainTD()},e.addInnerCell=function(t,n){return e.getMainTR().addInnerCell(t,n)},e.addInnerRow(t)};FormatHelper.format={number:function(e,t){var n=parseFloat(e),r={pattern:t.pattern};return NL.View.number(n,"",r)},percentage:function(e,t){var n=parseFloat(e)*100,r={pattern:t.pattern,symbol:t.symbol};return NL.View.number(n,"",r)},currency:function(e,t){var n=parseFloat(e),r={pattern:t.pattern,addSymbol:!0,symbol:t.symbol};return NL.View.number(n,"",r)},date:function(e,t){return t.useTime?NL.View.dateTime(e,"",NL.session.locale.getFormat("shortDateTime",t.useSec)):DateIsDateTime(e)?NL.View.dateTime(e,"","shortDate"):NL.View.dateOnly(e,"","shortDate")},time:function(e,t){return NL.View.dateTime(e,"","time")},timespan:function(e,t){return NL.View.timespan(parseFloat(e),"")},string:function(e){return e},image:function(e){if(e){var t=document.createElement("img");return t.className="raw",t.src=NL.route(e,"reverse_img"),t}},"enum":function(e,t){if(typeof e=="string")return FormatHelper.format.string(e);var n=t.enumFormat,r="";if(n=="label"&&e.labelValue)r=FormatHelper.format.string(e.labelValue);else if(n=="image"&&e.imageValue)r=FormatHelper.format.image(e.imageValue);else if(n!=""&&e.labelValue&&e.imageValue){var i=e.htmlNodeRef;i.innerTable||addTable(i,t),i.getMainTD().appendChild(document.createTextNode(FormatHelper.format.string(e.labelValue)));var s;n=="HLabelImage"?s=i.addInnerCell(t,"after"):n=="HImageLabel"?s=i.addInnerCell(t,"before"):n=="VLabelImage"?s=i.addInnerRow(t,"after").getMainTD():n=="VImageLabel"&&(s=i.addInnerRow(t,"before").getMainTD());var o=FormatHelper.format.image(e.imageValue);s.appendChild(o),e.htmlNodeRef=i.getMainTD(),r=i.innerTable}return r}}
var xtk_dashboard={
homeTitle:function(){return"Welcome to Neolane v6"},
explorer:function(){return"Explorer"},
disconnect:function(){return"Log off"},
instanceName_S:function(a){return"Instance name: "+a},
welcome_S:function(a){return"Welcome "+a},
newCommand:function(){return"Create"},
backHome:function(){return"Home"},
backLabel:function(){return"Back"},
iframeNotSupported:function(){return"Your browser does not support frames, or they have been disabled."},
refresh:function(){return"Refresh"},
productionPageTitle:function(){return"Instance monitoring"},
versionLabel:function(){return"Version:"},
instanceLabel:function(){return"Instance:"},
serverLabel:function(){return"Server:"},
dbcnxLabel:function(){return"Data source:"},
packageLabel:function(){return"Installed packages:"},
processusLabel:function(){return"Processes list"},
displayLabel:function(){return"Display"},
commandLabel:function(){return"Order:"},
pidLabel:function(){return"PID:"},
threadIdLabel:function(){return"Thread Id:"},
pidParentLabel:function(){return"Parent PID:"},
startDateLabel:function(){return"Start date:"},
lastAliveLabel:function(){return"Last activity:"},
restartDateLabel:function(){return"Next restart:"},
missingProcessLabel:function(){return"(missing process)"},
exploitatTitle1Label:function(){return"Monitoring"},
exploitatTitle2Label:function(){return" instance"},
processTooLogLabel:function(){return"Workflow task too long: "},
productionInactiveLabel:function(){return"Some workflows require your attention. See below."},
indicatorLabel:function(){return"System indicators:"},
deliverabilityLabel:function(){return"Deliverability:"},
smtpMonitoringLabel:function(){return"SMTP Monitoring"},
emailErrorLink:function(){return"SMTP errors per domain"},
smtpStatisticsLink:function(){return"SMTP sending statistics"},
openEventMonitoring:function(){return"Event tracking"},
file:function(){return"File:"},
textSearch:function(){return"Search:"},
nbLines:function(){return"Number of lines:"},
levelType:function(){return"Level type:"},
fromDate:function(){return"From:"},
toDate:function(){return"To:"},
message:function(){return"Message"},
createDate:function(){return"Creation date"},
instanceHeader:function(a){return"Journal of the '"+a+" instance logs"},
openLogs:function(){return"Open the log journal"},
productionLogsTitle:function(){return"Log journal"},
all:function(){return"All"},
info:function(){return"Info"},
warning:function(){return"Alert"},
error:function(){return"Error"},
verbose:function(){return"Verbose"},
homeStartButton:function(){return"Start your campaigns"},
homeWelcomeLabel:function(){return"Welcome to <strong>Neolane 6.1</strong>"},
homePara1:function(){return"Neolane offers the only conversational marketing technology that enables companies to create and optimize sustained one-to-one conversations with each of their customers and prospects across all channels available to them."},
homePara2:function(){return"Say yes to Conversational Marketing!"},
homeDocDesc:function(){return"For more on using and configuring Neolane, please check out our"},
homeDocUrlLabel:function(){return"online documentation"},
homeSupportDesc:function(){return"If you need help solving a software issue, you can visit our "},
homeSupportUrlLabel:function(){return"support website"},
homeEmptyCache:function(){return"Clear local cache"},
homeEmptyCacheConfirm:function(){return"Do you really want to clear the local cache?\nYou will lose your user configuration (last pages viewed, list personalization, etc.)."},
navigationError:function(){return"The object which you are trying to access is either unavailable or you don't have the required rights to view it; "}}
var nms_campaign={
startPostProcess:function(a,b,c){return"Starting workflow with internal name '"+a+"' on delivery '"+b+"' for campaign '"+c+"'"},
spawnPostProcess:function(a,b){return"Creating workflow on delivery '"+a+"' for campaign '"+b+"'"},
limitProcessReached:function(a,b){return"Maximum concurrent processes reached ('"+a+"' running / '"+b+"' max)"},
startPrepareMessageProcess:function(a,b){return"Starting message preparation for delivery '"+a+"' for campaign '"+b+"'"},
startTargetProcess:function(a,b){return"Starting targeting workflow '"+a+"' for campaign '"+b+"'"},
startDeliveryLabel:function(a,b){return"Starting delivery '"+a+"' for campaign '"+b+"'"},
startSimulationProcess:function(a){return"Starting simulation '"+a+"'"},
startHypothesisProcess:function(a){return"Starting hypothesis '"+a+"'"},
cancelInvalidInputParam:function(){return"Input parameter for workflow missing or invalid ('iOperationId')"},
startWorkflow:function(a,b){return"Request start of workflow '"+a+"' by operator '"+b+"'"},
validationTaskLabel:function(a){return"Approval of extraction file for delivery '"+a+"'"},
launchEmailFCP:function(a){return"Launching email proof for delivery ID '"+a+"'"},
newRecurrentWorkflow:function(a,b){return"Create workflow for recurring campaign '"+a+"' for period '"+b+"'"},
newRecurrentWorkflowError:function(a,b,c){return"Unable to create a workflow for recurrent campaign '"+a+"' over '"+b+"' period with '"+c+"' operator"},
newPeriodicOperation:function(a,b){return"Create periodic campaign '"+a+"' for period '"+b+"'"},
startRecurrentWorkflow:function(a,b){return"Starting workflow for recurring campaign '"+a+"' for period '"+b+"'"},
startRecurrentWorkflowError:function(a,b,c){return"Unable to start the workflow for recurrent campaign '"+a+"' over '"+b+"' period with '"+c+"' operator"},
errorCatalogState:function(){return"The state of the catalog entry makes this operation impossible."},
loadingError:function(){return"An error occurred during page loading. <br/>If this problem persists, please contact your Neolane administrator."},
budgetInvalidInputParam:function(){return"Invalid input parameters for workflow ('iId / strSchema')"},
expenseLineDeliveryCalculation:function(a,b){return"Calculating expense line for delivery '"+a+"' of campaign '"+b+"'"},
expenseLineTaskCalculation:function(a,b){return"Calculating expense line for task '"+a+"' of campaign '"+b+"'"},
budgetSupplierNotExists:function(){return"A service provider must be specified in the delivery/task"},
budgetNotExists:function(){return"A budget must be specified in the delivery/task"},
budgetUnkownMessageType:function(a){return"Channel unknown '"+a+"'"},
budgetUnkownStructureType:function(a){return"Structure type unknown '"+a+"'"},
startRoutingEmail:function(a,b){return"Creating email for the router for delivery '"+a+"' for campaign '"+b+"'"},
startTaskNotify:function(a){return"Starting task '"+a+"'"},
startTaskReminder:function(a){return"Task reminder '"+a+"'"},
startTaskNotification:function(a){return"'"+a+"' notification task"},
startTaskAlert:function(a){return"'"+a+"' warning task"},
endTaskNotify:function(a){return"Finished processing task '"+a+"'"},
noDeliveryTask:function(a){return"Unable to retrieve a delivery template to notify the task '"+a+"'"},
noDeliveryValidation:function(a){return"The delivery is not specified for the notification of task '"+a+"'"},
launchTaskEmail:function(a){return"Send notification email for task '"+a+"'"},
extractDeliveryNotExists:function(a){return"Unable to retrieve the delivery associated with workflow ID '"+a+"'"},
computationCost:function(a){return"Calculate provisional cost ('"+a+"')"},
startElementaryCost:function(){return"Start calculation of elementary costs"},
endElementaryCost:function(){return"End calculation of elementary costs"},
entityNotExists:function(a,b){return"Entity not found in the database (schema '"+a+"' ID '"+b+"')."},
operationStatusAll:function(){return"All"},
operationStatusEdition:function(){return"Being edited"},
operationStatusStarted:function(){return"Started"},
operationStatusFinished:function(){return"Finished"},
operationStatusCanceling:function(){return"Cancel in progress"},
operationStatusCanceled:function(){return"Canceled"},
filterOperationStatusAll:function(){return"All"},
filterOperationStatusEdition:function(){return"Being edited"},
filterOperationStatusStarted:function(){return"Started"},
filterOperationStatusFinished:function(){return"Finished"},
filterOperationStatusCanceled:function(){return"Canceled"},
messageTypeAll:function(){return"All"},
messageTypeEmail:function(){return"Email"},
messageTypeMobile:function(){return"Mobile"},
messageTypePhone:function(){return"Phone"},
messageTypePaper:function(){return"Paper"},
messageTypeFax:function(){return"Fax"},
messageTypeAgency:function(){return"Agency"},
dlvStateAll:function(){return"All"},
dlvStateEdition:function(){return"Being edited"},
dlvStatePrepare:function(){return"In preparation"},
dlvStateReady:function(){return"Ready to be delivered"},
dlvStateInprocess:function(){return"In progress"},
dlvStatePaused:function(){return"Paused"},
dlvStateFinished:function(){return"Finished"},
dlvStateError:function(){return"Failed"},
dlvStateTargetProcess:function(){return"Target calculation"},
dlvStateRetry:function(){return"Retry in progress"},
dlvStateWaiting:function(){return"Pending"},
dlvStateCancel:function(){return"Canceled"},
dlvStateWaitingDesc:function(a){return"(start scheduled for "+a+")"},
dlvStateErrorDesc:function(){return"(error during the analysis)"},
dlvStateInprocessDesc:function(a){return"(started on "+a+")"},
dlvStateCancelDesc:function(a){return"(canceled on "+a+")"},
dlvStatePausedDesc:function(a){return"(paused since "+a+")"},
dlvStateFinishedDesc:function(a){return"(finished on "+a+")"},
dlvStateTargetPrepPendingDesc:function(){return"(targeting pending)"},
dlvStateTargetSelectionDesc:function(){return"(counting in progress)"},
dlvStateTargetArbitrationDesc:function(){return"(arbitration in progress)"},
dlvStateTargetReadyDesc:function(){return"(target ready)"},
dlvStateMessagePrepPendingDesc:function(){return"(personalization pending)"},
dlvStateMessagePreparationDesc:function(){return"(personalization in progress)"},
dlvStateMessageReadyDesc:function(){return"(message finalized)"},
dlvStateReadyDesc:function(){return"(ready for delivery)"},
dlvStateDelayedDesc:function(){return"(start pending)"},
dlvPubStateDeployedEditionDesc:function(a){return"(last published on "+a+")"},
dlvPubStateDeployedDesc:function(a){return"(published on "+a+")"},
dlvPubStateFailedDesc:function(){return"(error during publication)"},
dlvSandboxNone:function(){return"Do not display"},
dlvSandboxPlanning:function(){return"Included in the schedule"},
dlvSandboxAll:function(){return"All"},
durationTodayLabel:function(){return"today"},
durationDayLabel:function(){return"one day ago"},
durationDaysLabel:function(a){return""+a+" days ago"},
durationMonthsLabel:function(a){return""+a+" months ago"},
durationMoreOneYearLabel:function(){return"over one year"},
durationTodayDesc:function(){return"Last modified today"},
durationDayDesc:function(){return"Last modified 1 day ago"},
durationDaysDesc:function(a){return"Last modified "+a+" days ago"},
durationMonthsDesc:function(a){return"Last modified "+a+" months ago"},
durationMoreOneYearDesc:function(){return"Last modified over one year ago"},
wkfStateAll:function(){return"All"},
wkfStateEdition:function(){return"Being edited"},
wkfStateInprocess:function(){return"In progress"},
wkfStateStarted:function(){return"Started"},
wkfStatePaused:function(){return"Paused"},
wkfStateFinished:function(){return"Finished"},
wkfStateError:function(){return"Failed"},
wkfStateStopped:function(){return"Stopped (production)"},
wkfStateAction:function(){return"Action required"},
scaleHourDay:function(){return"hour-day"},
scaleDayWeek:function(){return"day-week"},
scaleWeekMonth:function(){return"week-month"},
scaleMonthYear:function(){return"month-year"},
increaseTimelineHeight:function(){return"Increase the displayed height"},
operationDeliveryLabel:function(){return"Deliveries:"},
newOperationUrl:function(){return"Add a campaign"},
newDeliveryUrl:function(){return"Add a delivery"},
newTaskUrl:function(){return"Add a task"},
newExportUrl:function(){return"New export"},
newImportUrl:function(){return"New import"},
newProgramUrl:function(){return"Add a program"},
newPlanUrl:function(){return"New plan"},
newOpRelTaskUrl:function(){return"Assign a task"},
newEventUrl:function(){return"New event"},
operationFilterLabel:function(){return"Show campaigns"},
calendarFilterLabel:function(){return"Workloads/Absences"},
programFilterLabel:function(){return"Display programs"},
planFilterLabel:function(){return"Display plans"},
extractionFilterLabel:function(){return"Extractions"},
deliveryFilterLabel:function(){return"Deliveries"},
messageTypeFilterLabel:function(){return"Channel: "},
deliveryStateFilterLabel:function(){return"State: "},
taskFilterLabel:function(){return"Tasks"},
statusOperationFilterLabel:function(){return"Campaigns: "},
statusTaskFilterLabel:function(){return"Tasks: "},
labelFilterLabel:function(){return"Label: "},
labelSearch:function(){return"Search: "},
natureFilterLabel:function(){return"Nature: "},
labelFilterDeliveryCode:function(){return"Delivery code: "},
labelOfferCode:function(){return"Offer code: "},
labelOfferLastModified:function(){return"Last modification: "},
startDateFilterLabel:function(){return"Start: "},
endDateFilterLabel:function(){return"End: "},
startDateLabel:function(){return"Start date: "},
endDateLabel:function(){return"End date: "},
stateLabel:function(){return"Status: "},
priorityLabel:function(){return"Priority: "},
statusLabel:function(){return"Status: "},
natureLabel:function(){return"Nature: "},
durationLabel:function(){return"Duration: "},
planningLabel:function(){return"Schedule: "},
planningOperationLabel:function(){return"Campaign schedule: "},
descriptionLabel:function(){return"Description: "},
programLabel:function(){return"Program: "},
planLabel:function(){return"Plan: "},
supplierLabel:function(){return"Service provider: "},
supplierModelLabel:function(){return"Service template: "},
folderLabel:function(){return"Choose a folder"},
operationLabel:function(){return"Campaign: "},
mainOperationLabel:function(){return"Main campaign: "},
deliveryLabel:function(){return"Delivery: "},
workflowLabel:function(){return"Targeting: "},
workflowTitle:function(){return"Workflow: "},
assetLinkLabel:function(){return"Marketing resource:"},
deliveryLinkLabel:function(){return"Delivery to approve:"},
proofLabel:function(){return"Proof(s): "},
routingEmailLabel:function(){return"Routing email: "},
proofListLabel:function(){return"Proof rendering..."},
proofListEmailLabel:function(){return"Email rendering..."},
proofListMobileLabel:function(){return"SMS rendering..."},
proofListPaperLabel:function(){return"Direct mail..."},
proofListPhoneLabel:function(){return"Preview of telephone files..."},
proofListFaxLabel:function(){return"Preview of FAX files..."},
inboxrenderingLabel:function(){return"Display rendering of the proof"},
noRenderingAvailable:function(a){return"No content is available for identifier delivery "+a},
noRenderingLabel:function(){return"No content is available"},
operatorLabel:function(){return"Operator: "},
emailLabel:function(){return"Email:"},
externalIdLabel:function(){return"External ID:"},
mobilePhoneLabel:function(){return"Mobile:"},
departmentLabel:function(){return"Department:"},
parentFolderLabel:function(){return"Parent folder: "},
managerLabel:function(){return"Manager: "},
scaleLabel:function(){return"Scale: "},
progressLabel:function(){return"Progress: "},
plannedDurationLabel:function(){return"Scheduled workload: "},
realizedDurationLabel:function(){return"Workload performed: "},
refreshPlanLabel:function(){return"Refresh plan"},
filterPlanLabel:function(){return"Filter"},
refreshPlanningLabel:function(){return"Refresh"},
filterPlanningLabel:function(){return"Filter the schedule"},
refreshCalendarLabel:function(){return"Refresh calendar"},
filterCalendarLabel:function(){return"Filter the calendar"},
displayLinkedOperation:function(){return"Show associated campaigns"},
folderSelectionLabel:function(){return"Choose a plan or program"},
planningOperationTitle:function(){return"Campaign schedule"},
planningOperatorTitle:function(){return"Operator schedule"},
planningProgramTitle:function(){return"Program schedule"},
planningProgramsTitle:function(){return"Program schedule"},
planningCampaignTitle:function(){return"Campaign calendar"},
planningMRMPlanTitle:function(){return"Marketing plan schedule"},
planningMRMPlansTitle:function(){return"Marketing plans"},
planningCampaignPlanTitle:function(){return"Campaign plan schedule"},
planningCampaignsPlanTitle:function(){return"Campaign plans"},
planningDeliveryTitle:function(){return"Delivery calendar"},
planningFixedTitle:function(){return"Schedule"},
dayLabel:function(){return"d"},
hourLabel:function(){return"h"},
minuteLabel:function(){return"min"},
secondLabel:function(){return"s"},
operationTypeLabel:function(){return"Campaign type:"},
mutualizedParticipative:function(){return"Shared participative"},
mutualizedNoParticipative:function(){return"Shared non participative"},
localCentralControl:function(){return"Local with central handling"},
localNoCentralControl:function(){return"Local autonomous"},
cancelLocalOrderFromCatalog:function(a){return"Order canceled at the central level from catalog '"+a+"'"},
cancelOperationFromLocalOrder:function(a){return"Campaign canceled from the order '"+a+"'"},
cancelOperationFromCatalog:function(a){return"Campaign canceled from the catalog '"+a+"'"},
reserveFromProof:function(){return"Reservation from an order being evaluated"},
completedTask:function(){return"End of execution: "},
invalidInputParam:function(){return"Input parameter of the missing or invalid page."},
startOperationStock:function(a){return"Processing stock management for campaign '"+a+"'"},
endOperationStock:function(a){return"End of processing stock management for campaign '"+a+"'"},
stockInvalidInputParam:function(){return"Invalid input parameters for workflow ('iOperationId')"},
stockOperationNotExists:function(){return"No campaign is linked to the delivery"},
stockConsumed:function(a,b,c,d){return"Update stock with quantity "+a+" for stock line '"+b+"' for delivery '"+c+"' for campaign '"+d+"'"},
stockOrdered:function(a,b){return"Update initial stock with quantity '"+a+"' on stock line '"+b+"'"},
stockAlertLevel:function(a,b){return"Alert level '"+a+"' on stock line '"+b+"' exceeded"},
stockAlertModelNotExists:function(){return"Delivery template 'notifyStockAlert' not found in the database."},
stockAlertRemaining:function(a,b){return"Stock status '"+a+"' insufficient '"+b+"'"},
stockLineListTitle:function(){return"Stock lines"},
newgroupTitle:function(){return"Discussion forum"},
newgroupListTitle:function(){return"List of discussions"},
newsgroupRefresh:function(){return"Refresh list"},
newMessageUrl:function(){return"Add a discussion"},
subscribeUrl:function(){return"Follow discussions"},
replyMessageUrl:function(){return"Click here to answer the message"},
newsgroupEmpty:function(){return"No message"},
replyLabel:function(){return"Reply"},
newsgroupDate:function(){return"Date:"},
newsgroupReplyLabel:function(a){return"Re: "+a},
newsgroupSubject:function(){return"Subject"},
newsgroupAuthor:function(){return"Author"},
newsgroupLabel:function(){return"Forum"},
newsgroupLabelWithMsg:function(a){return"Forum ("+a+")"},
newsgroupSubscribeTitle:function(){return"Follow discussions"},
newsgroupSubscribeMsg:function(){return"Please confirm your subscription to the discussion forum"},
newsgroupUnsubscribeMsg:function(){return"Please confirm your unsubscription from the discussion forum"},
newsgroupHasSubscribe:function(){return"You are subscribed to discussions on this forum."},
newsgroupNoSubscribe:function(){return"To follow discussions on this forum, please subscribe."},
newsgroupHasUnsubscribeTitle:function(){return"Unsubscribe"},
displaySubscriptionLabel:function(a){return"Subscriptions to discussion forums ("+a+")"},
displayFollowerLabel:function(a){return"List of subscribers to this discussion forum ("+a+")"},
newMessageSubject:function(a){return"[Message] "+a},
replyMessageSubject:function(a){return"[Answer][Message] "+a},
newMessageTitle:function(){return"New message"},
replyMessageTitle:function(){return"Answer to a message"},
answerMessageLabel:function(){return"Reply"},
newsgroupTitle:function(){return"Forum:"},
newsgroupAuthorTitle:function(){return"Author:"},
messageTitle:function(){return"Message:"},
messageReplyTitle:function(){return"Answer:"},
operationLogStarting:function(){return"Request to start the campaign"},
startOperationLogCanceled:function(a){return"Processing canceling of campaign '"+a+"'"},
endOperationLogCanceled:function(a){return"End of canceling process for campaign '"+a+"'"},
deliveryTargetRefuseLog:function(a,b){return"Target of main delivery rejected '"+a+"' by operator '"+b+"'"},
deliveryContentRefuseLog:function(a,b){return"Content of main delivery rejected '"+a+"' by operator '"+b+"'"},
deliveryBudgetRefuseLog:function(a,b){return"Budget of main delivery rejected '"+a+"' by operator '"+b+"'"},
deliveryExtractionRefuseLog:function(a,b){return"Extraction for main delivery rejected  '"+a+"' by operator '"+b+"'"},
deliveryFCPRefuseLog:function(a,b){return"Proof for main delivery rejected  '"+a+"' by operator '"+b+"'"},
deliverySandboxRefuseLog:function(a,b){return"Inclusion in the provisional calendar rejected for the main delivery '"+a+"' by operator '"+b+"'"},
deliveryExternalRefuseLog:function(a,b){return"External approval of content for main delivery '"+a+"' by operator '"+b+"'"},
operationCancelTask:function(){return"Operation cancelled"},
noData:function(){return"No data."},
detailRefresh:function(){return"Refresh detail"},
deliveryStateToValidate:function(){return"To approve"},
deliveryStateValidationInwaiting:function(){return"To submit"},
deliveryStateSandbox:function(){return"To include"},
deliveryStateToStart:function(){return"Pending confirmation"},
deliveryStateRefused:function(){return"Rejected"},
deliveryToEdit:function(){return"To submit"},
inWaitingLabel:function(){return"Pending"},
deliveryExtractionInWaiting:function(){return"Extraction pending"},
deliveryPreparationInWaiting:function(){return"Preparation pending"},
deliveryExtractionToValidate:function(){return"File to approve"},
deliveryFinishedDesc:function(a){return"The delivery ended on "+a},
preparationFailedDesc:function(){return"Delivery analysis failed."},
cancelAnalysisDesc:function(){return"Delivery analysis canceled."},
deliveryStateToStartDesc:function(){return"Please confirm sending to start the delivery."},
deliveryStateDelayedStartDesc:function(a){return"Please confirm the start of the delivery deferred to "+a},
deliveryValidityPeriodOverDesc:function(){return"The delivery cannot be started because the resources are not available. Please restart the analysis process."},
deliveryStateRefusedDesc:function(){return"Approval was rejected."},
deliveryContentRefusedDesc:function(){return"Content approval was rejected."},
deliveryTargetRefusedDesc:function(){return"Target approval was rejected."},
deliveryBudgetRefusedDesc:function(){return"Budget approval was rejected."},
deliveryExtractionRefusedDesc:function(){return"File approval was rejected."},
deliverySandboxRefusedDesc:function(){return"Approval of the provisional calendar has been rejected."},
deliveryStateValidationInwaitingDesc:function(){return"The delivery is pending approval submission."},
deliveryStateToValidateDesc:function(){return"The delivery is pending approval."},
deliveryExtractionWaitingDesc:function(){return"The delivery is pending extraction."},
deliveryValidationLateDesc:function(){return"Delivery approval is late."},
deliveryTargetEmptyDesc:function(){return"The main delivery target is missing."},
deliveryContentEmptyDesc:function(){return"The delivery content has not been entered yet."},
deliveryDelayedDesc:function(){return"The delivery is pending start."},
deliveryStartedDesc:function(a){return"The delivery was started on "+a+"."},
deliveryInProcessDesc:function(){return"Delivery is in progress."},
deliveryDelayedForecastedDesc:function(a){return"The delivery is scheduled for "+a+" and awaiting start"},
deliveryIsDeleted:function(){return"The delivery has been deleted and will be automatically purged."},
previewLabel:function(){return"Preview"},
displayLogsLabel:function(){return"Hide/display logs"},
deliveryFcpToValidate:function(){return"Proof to approve"},
blockGeneral:function(){return"General"},
blockDelivery:function(){return"Deliveries"},
blockDeliverySingle:function(){return"Delivery"},
blockTask:function(){return"Tasks"},
blockTaskSingle:function(){return"Task"},
blockExtraction:function(){return"Extraction file(s)"},
blockLog:function(){return"Activity journal"},
blockLinkedOperation:function(){return"Linked campaign(s)"},
openLabel:function(){return"Open"},
openRecurrence:function(){return"Open the series..."},
reportLabel:function(){return"Reports..."},
multiSelectionReportListTitle:function(){return"Report list"},
validateLabel:function(){return"Approve"},
validateLabelMenu:function(){return"Approval"},
validateTask:function(){return"Approve"},
validateTaskDesc:function(){return"Approve the task"},
submitValidationLabel:function(){return"Submit for approval"},
refuseLabel:function(){return"Reject"},
validateBudget:function(){return"Approve budget"},
validateFile:function(){return"Approve file"},
validateFcp:function(){return"Approve proof"},
formatLabel:function(){return"Change format and restart extraction"},
launchPreparationMsg:function(){return"Restart message preparation"},
targetValidateLabel:function(){return"Approve targeting"},
contentValidateLabel:function(){return"Approve content"},
sandboxValidateLabel:function(){return"Include in provisional calendar"},
availableContentLabel:function(){return"Submit content"},
contentLaunchFcpLabel:function(){return"Relauch proof"},
launchValidationLabel:function(){return"Submit targeting"},
launchBudgetToValidate:function(){return"Submit budget"},
launchFCPValidationLabel:function(){return"Submit proofs"},
launchContentToValidate:function(){return"Submit content"},
submitEdition:function(){return"Submit content editing"},
externalValidation:function(){return"External content approval"},
contentStateLabel:function(){return"Content status:"},
targetStateLabel:function(){return"Targeting state:"},
extractionStateLabel:function(){return"Extraction state:"},
budgetStateLabel:function(){return"Budget state:"},
sandboxStateLabel:function(){return"Calendar inclusion state:"},
columnLabel:function(){return"Label"},
columnLocalOrgUnit:function(){return"Organizational entity"},
columnState:function(){return"State"},
columnStatus:function(){return"Status"},
columnFileName:function(){return"File name"},
columnDate:function(){return"Date"},
columnStart:function(){return"Start"},
columnEnd:function(){return"End"},
columnType:function(){return"Type"},
columnMessage:function(){return"Message"},
columnValidatedBy:function(){return"Approved by"},
columnAction:function(){return"Action"},
cancelLabel:function(){return"Cancel"},
finishTaskLabel:function(){return"Finish"},
notifyTaskConfirm:function(){return"Do you want to confirm sending notification of the task?"},
cancelTaskConfirm:function(){return"Are you sure you want to cancel the task?"},
finishTaskConfirm:function(){return"Are you sure you want to finish the task?"},
refuseTaskConfirm:function(){return"Are you sure you want to reject the task?"},
validateTaskConfirm:function(){return"Are you sure you want to approve the task?"},
wakeupOperationMgtConfirm:function(){return"Do you really want to restart message preparation?"},
labelTaskStart:function(){return"Start: "},
labelTaskEnd:function(){return"End: "},
labelTaskDepending:function(){return"Depends on:"},
labelTaskLinked:function(){return"Linked to:"},
labelTaskStatus:function(){return"State: "},
labelTaskValidationState:function(){return"Approval status: "},
labelTaskValidationType:function(){return"Approval type: "},
labelTaskNature:function(){return"Nature: "},
labelTask:function(){return"Task: "},
labelTaskPlanned:function(){return"Number of days scheduled:"},
labelTaskRealized:function(){return"Number of actual days: "},
nextForecastedTask:function(a){return"The next task is planned for in "+a+" day(s)."},
inLateTask:function(a,b,c){return""+a+" task(s) are late: impact on "+b+" campaign(s) and "+c+" program(s)."},
inLateTaskSingular:function(){return"A task is late."},
taskToday:function(a){return""+a+" task(s) are to be performed from today onwards."},
taskTodaySingular:function(){return"A task is to be performed from today onwards."},
validateResource:function(){return"Carry out the task"},
taskLasteDesc:function(a){return"The task is "+a+" day(s) late."},
taskLasteTodayDesc:function(){return"The task is late today."},
taskToValidateDesc:function(a){return"The task is being carried out (deadline is in "+a+" day(s))."},
taskToValidateTodayDesc:function(){return"The task is being carried out (deadline is today)."},
taskRefusedDesc:function(){return"The task was rejected."},
taskValidationPendingDesc:function(){return"The task has been completed and is now pending approval."},
taskValidationLateDesc:function(a){return"Task approval is "+a+" day(s) late."},
taskPendingDesc:function(){return"The task is pending implementation."},
taskForecastedDesc:function(a){return"The task is scheduled to be carried out in "+a+" day(s)."},
taskForecastedTodayDesc:function(){return"The task is scheduled for today."},
taskForecastedNtf:function(a){return"The task is scheduled for "+a},
operationForecastedDesc:function(a){return"The campaign will be available in "+a+" day(s)."},
operationStartedDesc:function(a){return"The campaign was started on "+a},
operationCanceledDesc:function(a){return"The operation was canceled on "+a},
validateAssetLabel:function(){return"Approve the resource"},
cancelAssetTitle:function(){return"Cancel"},
labelAssetType:function(){return"Resource type:"},
inErrorProcess:function(a){return""+a+" campaigns have errors."},
inErrorProcessSingular:function(){return"A campaign has an error."},
welcomeTaskLabel:function(a,b){return"Today <b>"+a+"</b> for operator <b>"+b+"</b>:"},
welcomeOperationLabel:function(a){return"Today <b>"+a+"</b>:"},
welcomeDeliveryLabel:function(a){return"Today <b>"+a+"</b>:"},
welcomeAssetLabel:function(a){return"Today <b>"+a+"</b>:"},
welcomeCatalogLabel:function(a){return"Today <b>"+a+"</b>:"},
welcomeOfferLabel:function(a){return"Today <b>"+a+"</b>:"},
inLateAsset:function(a){return""+a+" resources are late."},
inLateAssetSingular:function(){return"A resource is late."},
inLateOrder:function(a){return""+a+" orders are late."},
inErrorOrderSingular:function(){return"An order has an error."},
inErrorOrder:function(a){return""+a+" orders have errors."},
inLateOrderSingular:function(){return"An order is late."},
inLateCatalog:function(a){return""+a+" catalog entries are late."},
inLateCatalogSingular:function(){return"A catalog entry is late."},
inLateOffer:function(a){return""+a+" offers are late."},
inLateOfferSingular:function(){return"An offer is late."},
labelTaskDays:function(){return"Number of days scheduled:"},
labelExtractionValidated:function(){return"Extraction approved on:"},
labelExtractionRefused:function(){return"Extraction rejected on:"},
labelTargetValidated:function(){return"Targeting approved on:"},
labelTargetRefused:function(){return"Targeting rejected on:"},
labelContentValidated:function(){return"Content approved on:"},
labelContentRefused:function(){return"Content rejected on:"},
labelBudgetValidated:function(){return"Budget approved on:"},
labelBudgetRefused:function(){return"Budget rejected on:"},
labelPublished:function(){return"Publication date:"},
labelExtractionFileName:function(){return"Path: "},
labelExtractionDate:function(){return"Extraction date: "},
labelExtractionNbRecord:function(){return"Number of lines: "},
labelExtractionFileSize:function(){return"File size: "},
labelOperationName:function(){return"Campaign: "},
labelCanceledBy:function(){return"Canceled by:"},
labelOperationStatus:function(){return"State: "},
labelOperationType:function(){return"Type: "},
documentLabel:function(){return"Document(s): "},
documentSingle:function(){return"Document:"},
webAppLabel:function(){return"Microsite(s): "},
labelOperationNature:function(){return"Nature: "},
labelOwner:function(){return"Assigned to: "},
labelOperationLinked:function(){return"Linked campaign: "},
labelLocalOrgUnit:function(){return"Organizational entity:"},
labelLocalEntity:function(){return"Local entity:"},
routingEmailToSend:function(){return"Email to launch"},
extractionToValidate:function(){return"Extraction to approve"},
extractionInProcess:function(){return"Extraction in progress"},
cellExtraction:function(){return"Extraction request: "},
emptyExtraction:function(){return"(immediately)"},
cellExtracted:function(){return"Extraction date: "},
cellDeliveryOutline:function(){return"Delivery outline: "},
cellBudget:function(){return"Budget: "},
cellSupplier:function(){return"Service provider: "},
cellContactDate:function(){return"Contact date: "},
cellQuantity:function(){return"Quantity requested: "},
cellDeliveryCode:function(){return"Delivery code: "},
cellLinkedDelivery:function(){return"Main delivery: "},
cellMessageType:function(){return"Channel: "},
cellEventType:function(){return"Event type:"},
cellPublishStatus:function(){return"Publication state: "},
cellOffserSpace:function(){return"Offer space:"},
cellSandboxMode:function(){return"Delivery mode: "},
cellMainMessageType:function(){return"Main channel:"},
cellToDeliver:function(){return"Messages to send: "},
cellToValidate:function(){return"Messages to approve: "},
cellExpectedTarget:function(){return"Target approval deadline: "},
cellExpectedEdition:function(){return"Content editing deadline:"},
cellTotalTarget:function(){return"Target population: "},
cellProcessed:function(){return"Messages processed: "},
cellSuccess:function(){return"Success: "},
cellControl:function(){return"Control group:"},
cellDelivery:function(){return"Delivery: "},
cellDocument:function(){return"Document(s): "},
labelProcess:function(){return"Job(s) in progress"},
labelPostProcess:function(){return"post-processing"},
labelCfgProcess:function(){return"Operation settings"},
labelDocument:function(){return"Document(s)"},
labelExport:function(){return"export"},
labelExtraction:function(){return"extraction"},
refreshDashBoard:function(){return"Refresh"},
showAllReports:function(){return"Display all reports"},
fileSizeKb:function(){return"kB"},
filterTaskAll:function(){return"All"},
filterTaskNone:function(){return"None"},
filterTaskLate:function(){return"Late"},
filterTaskFinished:function(){return"Finished"},
filterTaskEdition:function(){return"Being edited"},
filterTaskStarted:function(){return"In progress"},
filterTaskCanceled:function(){return"Canceled"},
filterTaskForecasted:function(){return"Scheduled"},
KPI_not_available:function(){return"N/D"},
cellTotalTargetKPI:function(){return"Targeted"},
cellToDeliverKPI:function(){return"To send"},
cellProcessedKPI:function(){return"Processed"},
cellSuccessKPI:function(){return"Success"},
filterTaskValidated:function(){return"Approved"},
filterTaskRefused:function(){return"Rejected"},
filterTaskToday:function(){return"To do today"},
filterTaskWeek:function(){return"To do this week"},
filterTaskToValidate:function(){return"To approve"},
filterDeliveryAll:function(){return"All"},
filterDeliveryEdition:function(){return"Being edited"},
filterDeliveryToValidate:function(){return"To approve"},
filterDeliveryStarted:function(){return"Started"},
filterDeliveryFinished:function(){return"Finished"},
filterDeliveryFailed:function(){return"With errors"},
filterDeliveryCanceled:function(){return"Canceled"},
loadingList:function(){return"Loading the list"},
estimatedCategoryLabel:function(){return"Provisional revenue"},
marginCategoryLabel:function(){return"Provisional margin"},
messageTypeLabel:function(){return"Channel: "},
pauseDelivery:function(){return"Pause"},
stopDelivery:function(){return"Stop"},
cancelDelivery:function(){return"Cancel"},
playDelivery:function(){return"Start"},
confirmDelivery:function(){return"Confirm delivery"},
replayDelivery:function(){return"Restart"},
execPlanning:function(){return"Execution schedule"},
orderLabel:function(){return"Orders"},
orderListLabel:function(){return"Order tracking"},
propertiesEdit:function(){return"Properties"},
downloadFile:function(){return"Download file"},
cancelAsk:function(){return"Cancel delivery"},
cancelOperation:function(){return"Cancel the campaign"},
persoLabel:function(){return"Re-start the extraction of customization data"},
lateLabel:function(){return"(late)"},
messageTypeWithLabel:function(a){return"Channel: "+a},
contentLabel:function(){return"Content"},
editContentLabel:function(){return"Edit content"},
editContentShort:function(){return"Edit"},
editParamsLabel:function(){return"Advanced editing"},
simulationOverviewTitle:function(){return"Simulations"},
simulationOverviewNew:function(){return"New simulation"},
simulationStateCancelDesc:function(a){return"(canceled on "+a+")"},
simulationStateFinishedDesc:function(a){return"(finished on "+a+")"},
simulationStatePausedDesc:function(a){return"(paused since "+a+")"},
simulationStatePendingDesc:function(){return"(waiting)"},
simulationStateRunningDesc:function(){return"(execution in progress)"},
simulationTypeWithLabel:function(a){return"Simulation type: "+a},
simulationStateAllFlt:function(){return"All"},
simulationStateEditionFlt:function(){return"Being edited"},
simulationStatePendingFlt:function(){return"In progress"},
simulationStateFinished:function(){return"Finished"},
simulationStateErrorFlt:function(){return"With errors"},
simulationStateCanceledFlt:function(){return"Canceled"},
simulationStatePausedFlt:function(){return"Paused"},
socialOverviewTitle:function(){return"Communities"},
serviceOverviewTitle:function(){return"Services and Subscriptions"},
serviceOverviewNew:function(){return"New service"},
kpiFanValue:function(){return"Fans"},
kpiFriendValue:function(){return"Friends"},
kpiRegisteredValue:function(){return"Subscribers"},
socialTypeLabel:function(a){return"Social network: "+a},
serviceTypeAllFlt:function(){return"All"},
serviceTypeEmailFlt:function(){return"Email"},
serviceTypeMobileFlt:function(){return"Mobile (SMS)"},
serviceTypeFacebookFlt:function(){return"Facebook"},
serviceTypeTweeterFlt:function(){return"Twitter"},
serviceTypeAppFlt:function(){return"Mobile applications"},
groupOverviewTitle:function(){return"Lists"},
groupOverviewNew:function(){return"New list"},
groupOverviewImport:function(){return"Import a list"},
schemaWithLabel:function(a){return"Schema: "+a},
groupExpirationDesc:function(a){return"This list expires on "+a+". On this date, the list and its data will be deleted."},
groupTypeAllFlt:function(){return"All"},
groupIdFlt:function(){return"List of identifiers"},
groupLstFlt:function(){return"List"},
groupImportFlt:function(){return"Imported from a file"},
dataTransferOverviewTitle:function(){return"Jobs"},
dataTransferOverviewImport:function(){return"Import"},
dataTransferOverviewExport:function(){return"Export"},
dataTransferTypeWithLabel:function(a){return"Job type: "+a},
dataTransferStateCancelDesc:function(a){return"(canceled on "+a+")"},
dataTransferStateFinishedDesc:function(a){return"(finished on "+a+")"},
dataTransferStatePausedDesc:function(a){return"(paused since "+a+")"},
dataTransferStateRunningDesc:function(){return"(execution in progress)"},
dataTransferStateAllFlt:function(){return"All"},
dataTransferStateEditionFlt:function(){return"Being edited"},
dataTransferStatePendingFlt:function(){return"In progress"},
dataTransferStateFinished:function(){return"Finished"},
dataTransferStateErrorFlt:function(){return"With errors"},
dataTransferStateCanceledFlt:function(){return"Canceled"},
dataTransferStatePausedFlt:function(){return"Paused"},
localOrderOverviewTitle:function(){return"Order tracking"},
localOrderStateReservedDesc:function(){return"(pending approval)"},
localOrderStateAvailableInDesc:function(a){return"(available on "+a+")"},
localOrderStateInProcessDesc:function(){return"(pending campaign creation)"},
localOrderStateAvailableDesc:function(a){return"(available since "+a+")"},
localOrderStateCancelDesc:function(a){return"(canceled on "+a+")"},
localOrderValidationLateDesc:function(a){return"Order approval is "+a+" day(s) late."},
localOrderValidationDesc:function(){return"The order is pending approval."},
localOrderRefusedDesc:function(){return"Order approval was rejected."},
localOrdeParticipativeDesc:function(a){return"The catalog campaign is available on "+a+"."},
localOrderAvailableDesc:function(a){return"The campaign has been available since "+a+"."},
localOrderAvailableInDesc:function(a){return"The campaign will be available in "+a+" day(s)."},
localOrderInProcessDesc:function(){return"The campaign is being created."},
localOrgWithLabel:function(a){return"Local entity: "+a},
localOrderStateAllFlt:function(){return"All"},
locaLOrderStateToEvaluate:function(){return"Being evaluated"},
localOrderStateReserved:function(){return"Reserved"},
localOrderStateValidatedFlt:function(){return"Approved"},
localOrderStateRefusedFlt:function(){return"Rejected"},
localOrderStateAvailableFlt:function(){return"Available"},
localOrderStateCanceledFlt:function(){return"Canceled"},
localOrderStateErrorFlt:function(){return"With errors"},
catalogOverviewTitle:function(){return"Catalog entries"},
catalogOverviewNew:function(){return"New catalog entry"},
catalogTypeWithLabel:function(a){return"Campaign type: "+a},
catalogOnLine:function(){return"Published"},
catalogUnvailableLabel:function(){return"Unavailable"},
catalogStateCancelDesc:function(a){return"(canceled on "+a+")"},
catalogStatePublishedDesc:function(a){return"(published on "+a+")"},
catalogStatePublisheIndDesc:function(a){return"(available on "+a+")"},
catalogStateUnvailableDesc:function(a){return"(unavailable since "+a+")"},
catalogStateValidationPendingDesc:function(){return"(pending approval)"},
catalogStateInProcessDesc:function(){return"(approval in progress)"},
catalogValidationInwaitingDesc:function(){return"The catalog entry is pending submission for approval."},
catalogRefusedDesc:function(){return"The catalog entry was rejected."},
catalogValidationDesc:function(){return"The catalog entry is pending approval."},
catalogValidationLateDesc:function(a){return"Catalog entry approval is "+a+" day(s) late."},
catalogOperationAvailableDesc:function(a){return"The catalog campaign has been available since "+a+"."},
catalogOpAvailableInDesc:function(a){return"The catalog campaign will be available in "+a+" day(s)."},
catalogPublishedDesc:function(a){return"The catalog entry has been available since "+a+"."},
catalogAvailableInDesc:function(a){return"The catalog entry will be available in "+a+" day(s)."},
catalogAvailableDesc:function(a){return"The catalog entry is scheduled for "+a},
catalogUnvailableDesc:function(a){return"The catalog entry has been unavailable since "+a+"."},
catalogToReserveWithLimitDesc:function(a){return"The catalog entry will be available for reservation until "+a+"."},
catalogToReserveDesc:function(){return"The catalog entry is pending reservation."},
catalogReservedDesc:function(){return"The catalog entry has been reserved."},
orderListTitle:function(){return"Linked commands"},
catalogCancelLabel:function(){return"Cancel the catalog"},
catalogStateAllFlt:function(){return"All"},
catalogStateEditionFlt:function(){return"Being edited"},
catalogStatePendingFlt:function(){return"Pending approval"},
catalogStateValidatedFlt:function(){return"Approved"},
catalogStateRefusedFlt:function(){return"Rejected"},
catalogStatePublishedFlt:function(){return"Published"},
catalogStateCanceledFlt:function(){return"Canceled"},
cancelCatalogLabel:function(){return"Catalog entry canceled"},
validateCatalogLabel:function(){return"Approve the catalog entry"},
createdStateDesc:function(a){return"(created on "+a+")"},
recipientOverviewTitle:function(){return"Recipients"},
recipientOverviewNew:function(){return"New recipient"},
stockOverviewTitle:function(){return"Stocks"},
stockOverviewNew:function(){return"New stock"},
visitorOverviewTitle:function(){return"Visitors"},
visitorSocialOverviewTitle:function(){return"Fans / Subscribers"},
visitorOverviewNew:function(){return"New visitor"},
originWithLabel:function(a){return"Origin: "+a},
workflowOverviewTitle:function(){return"Workflows"},
targetingWorkflowOverviewTitle:function(){return"Targeting workflows"},
workflowOverviewNew:function(){return"New workflow"},
workflowStartWaitingDesc:function(){return"(pending start)"},
workflowStateInprocessDesc:function(a){return"(started on "+a+")"},
workflowStatePausedDesc:function(a){return"(paused since "+a+")"},
workflowStateFinishedDesc:function(a){return"(finished on "+a+")"},
assetOverviewTitle:function(){return"Marketing resources"},
assetOverviewNew:function(){return"New resource"},
assetOnLine:function(){return"Published"},
assetValidatedLabel:function(){return"Approved"},
assetValidatedDesc:function(){return"(pending publication)"},
assetValidationPendingDesc:function(){return"(pending approval)"},
assetInProcessDesc:function(){return"(approval in progress)"},
assetPublishPendingDesc:function(){return"(being published)"},
assetStateCancelDesc:function(a){return"(canceled on "+a+")"},
assetStatePublishedDesc:function(a){return"(published on "+a+")"},
assetStateAllFlt:function(){return"All"},
assetStateEditionFlt:function(){return"Being edited"},
assetStatePendingFlt:function(){return"Approval in progress"},
assetStateValidatedFlt:function(){return"Approved"},
assetStateRefusedFlt:function(){return"Rejected"},
assetStatePublicationPendingFlt:function(){return"Pending publication"},
assetStatePublishedFlt:function(){return"Available"},
assetStateCanceledFlt:function(){return"Canceled"},
offerOverviewTitle:function(){return"Offer catalog"},
offerOverviewNew:function(){return"New offer"},
offerStatePublishedDesc:function(a){return"(online since "+a+")"},
offerStateProductionDesc:function(a){return"(last published on "+a+")"},
offerStatePendingdDesc:function(a){return"(to be approved before "+a+")"},
offerStateCancelDesc:function(a){return"(canceled on "+a+")"},
offerStateInProcessDesc:function(){return"(approval in progress)"},
offerStateValidationPendingDesc:function(){return"(pending approval)"},
offerStateProductionPendingDesc:function(){return"(pending deployment)"},
offerStateCancelPendingDesc:function(){return"{pending de-activation)"},
offerEnvWithLabel:function(a){return"Environment: "+a},
offerCategoryNoneSelected:function(){return"(No filter on categories)"},
offerStateAllFlt:function(){return"All"},
offerStateEditionFlt:function(){return"Being edited"},
offerStatePendingFlt:function(){return"Approval in progress"},
offerStatePublicationPendingFlt:function(){return"Pending deployment"},
offerStatePublishedFlt:function(){return"Published"},
offerStateCanceledFlt:function(){return"Disabled"},
offerEnvironmentAllFlt:function(){return"All"},
deliveryOverviewTitle:function(){return"Deliveries"},
deliveryOverviewNew:function(){return"New delivery"},
reportOverviewTitle:function(){return"Global reports"},
reportOverview_edit:function(){return"Edit"},
reportOverview_schema:function(a){return"Fact schema: "+a},
operationOverviewTitle:function(){return"Marketing campaigns"},
operationOverviewNew:function(){return"New campaign"},
operationStartedLabel:function(){return"In progress"},
operationStateEditionDesc:function(a){return"(scheduled on "+a+")"},
operationStateInprocessDesc:function(a){return"(started on "+a+")"},
operationStateCancelDesc:function(a){return"(canceled on "+a+")"},
operationStateFinishedDesc:function(a){return"(finished on "+a+")"},
operationProgramNoneSelected:function(){return"(No filter on programs)"},
taskOverviewTitle:function(){return"Tasks"},
taskOverviewNew:function(){return"New task"},
taskStateForecastedDesc:function(a){return"(scheduled on "+a+")"},
taskStatePendingDesc:function(a){return"(scheduled on "+a+")"},
priorityWithLabel:function(a){return"Priority: "+a},
kpiProgressLabel:function(){return"Progress"},
kpiProgressValue:function(a){return""+a+" %"},
taskStatePending:function(){return"Pending"},
taskStatePendingdDesc:function(a){return"(to be approved before "+a+")"},
taskStateStartedDesc:function(a){return"(to be finished before "+a+")"},
taskStateCancelDesc:function(a){return"(canceled on "+a+")"},
sortTaskPriorityLabel:function(){return"By priority"},
webAppOverviewTitle:function(){return"Web applications"},
webAppSocialOverviewTitle:function(){return"Applications"},
webAppOverviewNew:function(){return"New Web Application"},
webAppChooseExisting:function(){return"Select a Web application template"},
webAppNoModelSelected:function(){return"Please select a Web application template."},
webAppNewTitle:function(){return"New Web application"},
editWebAppView:function(){return"Edit"},
webAppChooseApplicationTitle:function(){return"Applications"},
purlURLLabel:function(a){return"URL: "+a},
webAppSchemaLabel:function(){return"Schema:"},
publicURL:function(){return"Public URL:"},
webAppPublished:function(a){return"The web application has been live since "+a},
webAppNotPublished:function(){return"The Web application must be published to be accessed online."},
webAppForecasted:function(a){return"The Web application will be available in "+a+" day(s)."},
preload:function(){return"Preloading:"},
planningActiveWaitingLabel:function(a){return"(Activation in "+a+" day(s))"},
newPURL:function(){return"Add a pURL"},
addFacebookPageTab:function(){return"Add a page tab"},
addFacebookPageTabHelp:function(){return"Link this application to a Facebook page tab"},
webAppPublishTitle:function(){return"Web application publication"},
socialWebAppNoExtAccount:function(){return"The application linked to the Facebook account is missing."},
socialWebAppExtAccountNotConfigured:function(){return"The application linked to the Facebook account isn't properly configured."},
webAppExtAccountNotConfigurableInConsole:function(){return"In the console, the application can be configured in the Properties section of the 'Edit' tab."},
webAppPublishLabel:function(){return"Publication"},
editWebAppButton:function(){return"Edit content"},
natureWithLabel:function(a){return"Nature: "+a},
filterNatureAll:function(){return"All"},
filterNatureUnsub:function(){return"Unsubscription"},
filterNatureSub:function(){return"Registration"},
filterNatureMicrosite:function(){return"Microsite"},
filterNatureViral:function(){return"Sharing"},
filterNatureSurvey:function(){return"Survey"},
filterNatureTechnical:function(){return"Technical"},
filterNatureList:function(){return"Overview"},
webAppOverview_offLine:function(){return"Being edited"},
webAppOverview_onLine:function(){return"Online"},
webAppOverview_toPublish:function(){return"Pending"},
webAppOverview_inWaiting:function(){return"(pending publication)"},
webAppOverview_published:function(a){return"(published on "+a+")"},
webApp_publicationInitLabel_S:function(a){return"You are about to put the '"+a+"' web application into production. Click 'Start' to run the process."},
purlListTitle:function(){return"List of pURLs"},
socialwebAppPropertiesTitle:function(){return"Facebook properties"},
mandatorySocialwebApp:function(){return"Please select an application."},
packageOverview_exported:function(){return"Exported"},
packageOverview_no_exported:function(){return"Being edited"},
packageOverview_exportedDesc:function(a){return"(last executed on "+a+")"},
packageOverview_no_exportedDesc:function(){return"(this package hasn't been exported yet)"},
kpiObjectsLabel:function(){return"Objects"},
webAppCreation_label:function(){return"You are now creating a new web application."},
webAppCreation_desc:function(){return"Select a template from the list and enter the information below."},
webAppCreation_windowTitle:function(){return"New Web application"},
webAppCreation_newTitle:function(){return"Creating a new Web application"},
webAppCreationConfig_label:function(){return"Label"},
webAppCreationConfig_desc:function(){return"Description"},
webAppCreationConfig_create:function(){return"Create"},
webAppCreationConfig_cancel:function(){return"Cancel"},
serviceHeaderTitle:function(a){return"Service "+a+"'"},
labelServiceType:function(){return"Type: "},
labelServiceMode:function(){return"Mode:"},
labelServiceValidity:function(){return"Expiration date:"},
multiSelectionServiceTitle:function(){return"Reports of the selected services"},
newStockLine:function(){return"Add a stock line"},
stockInitialHeader:function(){return"Initial"},
stockLineHeader:function(){return"Stock lines"},
stockOrderHeader:function(){return"On order"},
stockConsumedHeader:function(){return"Consumed"},
stockRemainingHeader:function(){return"In stock"},
stockTargetEmpty:function(a){return"No nottification group specified for alert on stock line '"+a+"'"},
imageLabel:function(){return"Image"},
wordLabel:function(){return"Word"},
excelLabel:function(){return"Excel"},
pdfLabel:function(){return"PDF"},
pptLabel:function(){return"PowerPoint"},
assetTitle:function(){return"Marketing resources"},
assetListLabel:function(){return"List of marketing resources"},
assetLabel:function(){return"Label"},
assetStatus:function(){return"Status"},
assetNature:function(){return"Nature"},
assetStock:function(){return"Stock"},
assetStockLine:function(){return"Stock line"},
assetRemaining:function(){return"In stock"},
newAsset:function(){return"New resource..."},
previewHTMLLabel:function(a){return"E-mail received by '"+a+"'"},
unlockLabel:function(){return"Unlock"},
lockLabel:function(){return"Lock"},
publicationAssetLabel:function(){return"Publish"},
unlockDesc:function(){return"Resource locked"},
cancelAssetLabel:function(){return"Resource cancelled"},
cancelOrderLabel:function(){return"Order cancelled"},
cancelOfferLabel:function(){return"Cancelled offer"},
offerViewToValidate:function(){return"To approve"},
offerViewValidated:function(){return"Enabled"},
expectedUnlockLabel:function(){return"Return date:"},
unlockConfirm:function(){return"Do you want to cancel the resource reservation?"},
lockConfirm:function(){return"Do you want to lock the resource for your account?"},
assetValidationConfirm:function(){return"Do you want to start the resource approval process?"},
assetPublicationConfirm:function(){return"Do you want to start publication of the resource?"},
assetTaskPublication:function(a){return"Publish resource via '"+a+"' task"},
assetRefusedDesc:function(){return"Resource approval was rejected."},
assetValidationInwaitingDesc:function(){return"The resource is pending approval submission."},
assetValidationDesc:function(){return"The resource is pending approval."},
assetValidationLateDesc:function(a){return"Resource approval is "+a+" day(s) late."},
assetPublicationInwaitingDesc:function(){return"Please publish the resource to make it available."},
assetUnlockDesc:function(a){return"The resource has been locked by '"+a+"'."},
assetPublishedDesc:function(a){return"The resource has been available since "+a},
assetExpirationDesc:function(a){return"The resource expired on "+a},
assetPublicationWaitingDesc:function(a){return"The resource will be available in "+a+" day(s)."},
startDelivery:function(a){return"Start reaction calculation on delivery '"+a+"'"},
endDelivery:function(a){return"End reaction calculation for delivery '"+a+"'"},
startHypothesis:function(a,b){return"Start hypothesis calculation '"+a+"' on delivery '"+b+"'"},
endHypothesis:function(a,b){return"End hypothesis calculation '"+a+"' for delivery '"+b+"'"},
duplicateLines:function(a){return"'"+a+"' transaction(s) duplicated in the work table"},
reactedLines:function(a){return"'"+a+"' reaction(s) found"},
deliveryNotifInvalidInputParam:function(){return"Input parameters for workflow invalid ('deliveryId', 'operationId', 'assigneeId')"},
deliveryTargetValidation:function(a){return"Launch approval notification for targeting for delivery '"+a+"'"},
deliveryContentValidation:function(a){return"Launch approval notification for content for delivery '"+a+"'"},
deliveryBudgetValidation:function(a){return"Launch approval notification for budget for delivery '"+a+"'"},
deliveryExtractionValidation:function(a){return"Launch approval notification for extraction for delivery '"+a+"'"},
validationTypeTargetLabel:function(){return"Target approval"},
validationTypeContentLabel:function(){return"Content approval"},
validationTypeBudgetLabel:function(){return"Budget approval"},
validationTypeExtractionLabel:function(){return"Approval of extraction file"},
validationTypeFCPLabel:function(){return"Proof approval"},
validationTypeSandboxLabel:function(){return"Approval of inclusion in the provisional calendar"},
validationTypeEditionLabel:function(){return"Content editing"},
validationTypeExternalLabel:function(){return"External approval of content"},
deliveryTargetValidationLog:function(a,b){return"Approval of target for main delivery '"+a+"' by operator '"+b+"'"},
deliveryContentValidationLog:function(a,b){return"Approval of content for main delivery '"+a+"' by operator '"+b+"'"},
deliveryBudgetValidationLog:function(a,b){return"Approval of budget for main target '"+a+"' by operator '"+b+"'"},
deliveryExtractionValidationLog:function(a,b){return"Approval for extraction file on main delivery '"+a+"' by operator '"+b+"'"},
deliveryFCPValidationLog:function(a,b){return"Approval of proof for main target '"+a+"' by operator '"+b+"'"},
deliverySandboxValidationLog:function(a,b){return"Inclusion in the provisional calendar approved for the main delivery '"+a+"' by operator '"+b+"'"},
deliverContentAvailableLog:function(a,b){return"Availability of content for main delivery '"+a+"' by operator '"+b+"'"},
deliveryExternalValidationLog:function(a,b){return"External approval of content for main delivery '"+a+"' by operator '"+b+"'"},
deliverySubmitEditionValidationLog:function(a,b){return"Content editing of main delivery submitted '"+a+"' by operator '"+b+"'"},
deliverySubmitContentValidationLog:function(a,b){return"Approval content of main delivery submitted '"+a+"' by operator '"+b+"'"},
deliverySubmitBudgetValidationLog:function(a,b){return"Approval budgeting of main delivery submitted '"+a+"' by operator '"+b+"'"},
deliverySubmitFCPValidationLog:function(a,b){return"Approval proof of main delivery submitted '"+a+"' by operator '"+b+"'"},
deliveryManualValidationLog:function(a,b){return"Approval targeting of main delivery submitted '"+a+"' by operator '"+b+"'"},
deliveryStartingLog:function(a,b){return"Start of main delivery '"+a+"' by operator '"+b+"'"},
emptyExtractionDate:function(){return"(immediately)"},
validationTaskSubject:function(a){return"[Approve task] "+a},
validationTaskTitle:function(){return"Task approval"},
validationDeliveryTitle:function(){return"Action on delivery"},
validationSimulationTitle:function(){return"Action on the simulation"},
startDeliveryReminder:function(a,b){return"Reminder for delivery '"+a+"' for approval '"+b+"'"},
startAssetNotify:function(a){return"Notification of marketing resource '"+a+"' pending approval"},
startAssetReminder:function(a){return"Notification of marketing resource '"+a+"' for approval reminder"},
startAssetPublishReminder:function(a){return"Notification of marketing resource '"+a+"' for publication reminder"},
assetTargetEmpty:function(a){return"No notification group populated to notify marketing resource '"+a+"'"},
startAssetPublication:function(a){return"Publication of marketing resource '"+a+"'"},
startOfferNotify:function(a){return"Notification of offer '"+a+"' pending approval ('"+a+"')"},
startOfferReminder:function(a){return"Notification of marketing offer '"+a+"' for approval reminder ('"+a+"')"},
offerTargetEmpty:function(a){return"No notification group specified to notify the offer '"+a+"'"},
offerValidationTitle:function(a){return"[Approve offer  eligibility] "+a},
offerValidationLabel:function(){return"Approve offer eligibility"},
validationOfferLabel:function(){return"Approve or reject offer eligibility"},
contentValidationOfferLabel:function(){return"Approve or reject the offer content"},
offerContentValidationLabel:function(){return"Approval of the offer content"},
offerContentValidationTitle:function(a){return"[Approval of offer content] "+a},
startCatalogPublication:function(a){return"Publiction on entry in catalog: "+a},
startCatalogPublicationReminder:function(a){return"Publication of entry in catalog '"+a+"' for reminder"},
startCatalogNotify:function(a){return"Notification of entry in catalog '"+a+"' pending approval"},
startCatalogNotifyReminder:function(a){return"Notification of entry in catalog '"+a+"' for approval reminder"},
catalogTargetEmpty:function(a){return"No notification group specified to notify entry in catalog '"+a+"'"},
catalogLabelHeader:function(){return"Catalog entry:"},
startCreateLocalOperation:function(a){return"Campaign created following order '"+a+"'"},
startOrderReminder:function(a){return"Notification of order '"+a+"' for approval reminder"},
processHypothesis:function(a){return"Error while processing hypothesis '"+a+"'"},
undefHypothesis:function(a){return"Unable to find hypothesis definition of ID '"+a+"'"},
createLocalOperation:function(a,b){return"Creating campaign (type '"+a+"') for organizational entity '"+b+"'"},
createLocalOperationSuccess:function(a,b){return"Campaign type '"+a+"' created for organizational entity '"+b+"'"},
assetValidationTitle:function(a){return"[Approval of resource] "+a},
assetPublicationTitle:function(a){return"[Publication of resource] "+a},
assetPublicationLabel:function(){return"Resource publication"},
assetValidationLabel:function(){return"Resource approval"},
assetActionLabel:function(){return"Action on the resource"},
remindLabel:function(){return"[Reminder]"},
approvalLabel:function(){return"[Confirmation] "},
refusedLabel:function(){return"[Refused] "},
cancellationLabel:function(){return"[Cancellation] "},
alertLateLabel:function(){return"[Late]"},
deliveryValidationTitle:function(a){return"[Approval of resource] "+a},
operationAction:function(){return"Action(s) on the campaign"},
submitJobOpMgtError:function(a){return"An error occurred during the preparation of the messages for the '"+a+"' delivery. For more details, check the delivery log."},
categoryLabel:function(){return"Category: "},
incompatibleOfferTargetSchema:function(a,b){return"The targeting dimension of the environment isn't compatible with the selected offer template ('"+a+"' expected '"+b+"')."},
invalidOfferContext:function(){return"One of the offer contexts references a space which isn't compatible with the current environment."},
invalidEnvForOfferCreation:function(){return"You may not make changes to an offer in production."},
fldDlvLabel:function(){return"Folder: "},
labelDeliveryName:function(){return"Delivery name: "},
multiSelectionDeliveryTitle:function(){return"Reports of the selected deliveries"},
catalogActionLabel:function(){return"Action on catalog entry"},
catalogValidation:function(){return"Approval of entry in catalog"},
catalogPublication:function(){return"New catalog entry"},
catalogMutualizedPublication:function(){return"Registration in catalog"},
catalogCancellation:function(){return"Cancellation of catalog entry"},
orderValidation:function(){return"Approval of order"},
operationAvalaible:function(){return"Campaign available"},
stockTitle:function(){return"Stock alert notification"},
stockName:function(){return"Stock name:"},
stockOrderedHeader:function(){return"On order"},
stockAlertLevelHeader:function(){return"Alert level"},
assetValidation:function(){return"Resource approval"},
assetContentHeader:function(){return"Resource:"},
assetFileHeader:function(){return"File:"},
assetNatureHeader:function(){return"Nature:"},
assetVerisonHeader:function(){return"Version:"},
assetAvailabilityHeader:function(){return"Availability date:"},
assetExpirationHeader:function(){return"Expiry date:"},
assetEditedByHeader:function(){return"Locked by:"},
offerContentHeader:function(){return"Offer: "},
expectedHeader:function(){return"Approval deadline: "},
availabilityHeader:function(){return"Availability of the campaign:"},
operationAvailabilityHeader:function(){return"Available on:"},
operationInWaitingLabel:function(){return"Pending campaign availability..."},
taskNameHeader:function(){return"Task name:"},
taskPlanningHeader:function(){return"Schedule: "},
taskOperationHeader:function(){return"Campaign:"},
planningHeader:function(a,b){return"From "+a+" to "+b},
taskExecutionHeader:function(){return"Execution date:"},
fromHeader:function(){return"From "},
fromHeaderAlone:function(a){return"From "+a},
toHeader:function(){return" to "},
toHeaderAlone:function(a){return"To "+a},
orderHeader:function(){return"Order:"},
catalogHeader:function(){return"Catalog:"},
validateOrderLabel:function(){return"Approve the order"},
validateOrderMutualizedLabel:function(){return"Approve catalog subscription"},
orderValidationLabel:function(){return"Approve or reject the order"},
orderValidationMutualizedLabel:function(){return"Approve or reject catalog subscription"},
reserveOperationLabel:function(){return"Reserve the campaign"},
validationCatalogLabel:function(){return"Approve or reject the catalog entry"},
proofOperationLabel:function(){return"Evaluate the campaign"},
subscribeOperationLabel:function(){return"Register for the campaign"},
validationAssetLabel:function(){return"Approve or reject the resource"},
publishAssetLabel:function(){return"Publish the resource"},
subjectCatalogValidationLabel:function(a){return"[Approval of the entry in the catalog] "+a},
subjectCatalogPublicationLabel:function(a){return"[New entry in the catalog] "+a},
subjectCatalogMutualizedPublicationLabel:function(a){return"[Catalog subscription] "+a},
subjectOrderValidationLabel:function(a){return"[Approval of order] "+a},
subjectCatalogCancellationLabel:function(a){return"[Cancellation of catalog entry] "+a},
subjectOrderAvailableLabel:function(a){return"[Campaign available] "+a},
editionTaskLabel:function(){return"Enter the task once complete"},
taskToEditDesc:function(){return"The task is pending implementation."},
validateTaskLabel:function(){return"Approve or reject the task"},
validationDeliveryTargetLabel:function(){return"Approve or reject delivery targeting "},
validationDeliveryContentLabel:function(){return"Approve or reject the delivery content"},
validationDeliveryExternalLabel:function(){return"Approve or reject the final delivery content"},
validationDeliveryExtractionLabel:function(){return"Approve or reject the delivery extraction file"},
validationDeliveryBudgetLabel:function(){return"Approve or reject the delivery budget"},
validationDeliveryFCPLabel:function(){return"Approve or reject the external delivery proof"},
validationDeliverySansboxLabel:function(){return"Approve or reject inclusion in the provisional calendar"},
clickLabel:function(){return"click here"},
taskNewSubject:function(a){return"[New task] "+a},
taskNotifSubject:function(a){return"[Task completion] "+a},
notifNotificationSubject:function(a){return"[Notification] "+a},
waitTaskLabel:function(){return"The task is pending "},
taskNewTitle:function(){return"New task"},
taskNotifTitle:function(){return"Task completion"},
notificationTitle:function(){return"Notification"},
deliveryMainHeader:function(){return"Delivery:"},
deliveryContactHeader:function(){return"Contact date:"},
deliveryPlanningHeader:function(){return"Approval schedule:"},
deliveryCodeHeader:function(){return"Delivery code:"},
deliveryOperationHeader:function(){return"Campaign:"},
deliveryExtractionHeader:function(){return"Extraction request:"},
deliveryPostalHeader:function(){return"Postal send date:"},
deliveryToDeliveryHeader:function(){return"Messages to send:"},
deliveryBudgetHeader:function(){return"Budget:"},
deliveryCommitmentHeader:function(){return"Commitment level:"},
deliveryCostHeader:function(){return"Amount:"},
deliveryContentHeader:function(){return"Delivery content:"},
deliveryExtractedHeader:function(){return"Extraction date:"},
deliveryNbLineHeader:function(){return"Number of lines:"},
deliveryStockAlertHeader:function(){return"Stock alert:"},
substituteStockLabel:function(){return"Substitute stock:"},
stockLabel:function(){return"Stocks:"},
consumedStockList:function(){return"List of stocks consumed..."},
taskDescHeader:function(){return"Description of the task to perform:"},
catalogDescHeader:function(){return"Description of the campaign:"},
orderDescHeader:function(){return"Comment:"},
stopDeliveryActionTitle:function(){return"Stop"},
startDeliveryActionTitle:function(){return"Start delivery"},
cancelDeliveryActionTitle:function(){return"Cancel delivery"},
pauseDeliveryActionTitle:function(){return"Pause the delivery"},
submitEditionActionTitle:function(){return"Submit content editing"},
startDeliveryAction:function(){return"Are you sure you wish to start the delivery?"},
pauseDeliveryAction:function(){return"Are you sure you wish to pause the delivery?"},
stopDeliveryAction:function(){return"Are you sure you wish to stop the delivery?"},
cancelDeliveryAction:function(){return"Do you really want to cancel the delivery?"},
submitEditionAction:function(){return"Submit delivery content editing?"},
submitContentAction:function(){return"Submit delivery content for approval?"},
submitTargetAction:function(){return"Submit delivery targeting for approval?"},
submitBudgetAction:function(){return"Submit delivery budget for approval?"},
submitProofAction:function(){return"Submit delivery proofs for approval?"},
deliveryToValidate:function(a){return""+a+" deliveries are pending approval."},
deliveryToValidateSingular:function(){return"A delivery is pending approval."},
deliveryInLate:function(a){return""+a+" deliveries are late."},
deliveryInLateSingular:function(){return"A delivery is late."},
deliveryRefused:function(a){return""+a+" deliveries are rejected."},
deliveryRefusedSingular:function(){return"A delivery is rejected."},
deliveryInError:function(a){return""+a+" deliveries have errors."},
deliveryInErrorSingular:function(){return"A delivery has an error."},
assetLocked:function(a){return""+a+" resources are locked."},
assetLockedSingular:function(){return"A resource is locked"},
assetToValidate:function(a){return""+a+" resources are pending approval."},
assetRefusedSingular:function(){return"A resource was rejected."},
assetRefused:function(a){return""+a+" resources have been rejected."},
assetToValidateSingular:function(){return"A resource is pending approval."},
orderToValidate:function(a){return""+a+" orders are pending approval."},
orderToValidateSingular:function(){return"An order is pending approval."},
orderRefusedSingular:function(){return"An order was rejected."},
orderRefused:function(a){return""+a+" orders have been rejected."},
catalogToValidate:function(a){return""+a+" catalog entries are pending approval."},
catalogToValidateSingular:function(){return"A catalog entry is pending approval."},
catalogToPublish:function(a){return""+a+" catalog entries are pending publication."},
catalogToPublishSingular:function(){return"A catalog entry is pending publication."},
catalogRefusedSingular:function(){return"A catalog entry has been rejected."},
catalogRefused:function(a){return""+a+" catalog entries have been rejected."},
offerRefusedSingular:function(){return"An offer was rejected."},
offerRefused:function(a){return""+a+" offers have been rejected."},
offerToValidate:function(a){return""+a+" offers are pending approval."},
offerToValidateSingular:function(){return"An offer is pending approval."},
operationToValidate:function(a){return""+a+" campaigns require one or more approvals."},
operationToValidateSingular:function(){return"A campaign requires one or more approvals."},
taskToValidate:function(a){return""+a+" tasks are pending approval."},
taskToValidateSingular:function(){return"JA task is pending approval."},
linkedOperationUrl:function(){return"List of linked campaigns..."},
orderListUrl:function(){return"List of active orders..."},
toValidateContent:function(){return"Content to approve"},
toValidateBudget:function(){return"Budget to approve"},
toValidateExtraction:function(){return"Extraction to approve"},
toValidateTarget:function(){return"Targeting to approve"},
toValidateFCP:function(){return"Proof to approve"},
editionInProgress:function(){return"Being edited"},
toValidateSandbox:function(){return"Inclusion in the provisional calendar to approve"},
validatedContent:function(){return"Content approved"},
validatedBudget:function(){return"Budget approved"},
validatedExtraction:function(){return"Extraction approved"},
validatedTarget:function(){return"Targeting approved"},
validatedFCP:function(){return"Proof approved"},
validatedSandbox:function(){return"Inclusion in the provisional calendar approved"},
refusedContent:function(){return"Content rejected"},
refusedBudget:function(){return"Budget rejected"},
refusedExtraction:function(){return"Extraction rejected"},
refusedTarget:function(){return"Targeting rejected"},
refusedFCP:function(){return"Proof rejected"},
refusedSandbox:function(){return"Inclusion in the provisional calendar rejected"},
expectedValidationDate:function(){return"Approval deadline: "},
expectedPublicationDate:function(){return"Publication deadline: "},
subscriptionLimitDate:function(){return"Registration deadline:"},
persoLimitDate:function(){return"Personalization deadline:"},
linkedDeliveryList:function(){return"List of related deliveries..."},
providerLabel:function(){return"Routing:"},
categoryExternal:function(){return"External file configuration"},
categoryEmail:function(){return"Email configuration"},
categoryValidation:function(){return"Approvals"},
categorySMS:function(){return"Mobile configuration"},
categoryExecution:function(){return"Execution"},
categoryReport:function(){return"Reports"},
categoryTask:function(){return"Assigned tasks"},
categoryAccess:function(){return"Access rights"},
categoryGrouping:function(){return"List of tasks"},
linkedDeliveryParameter:function(){return"The file extraction is performed from the main delivery."},
linkedDeliveryEmailParameter:function(){return"The content of the email is made from the main delivery."},
quantityLabel:function(){return"Quantity requested:"},
contactLabel:function(){return"Contact date:"},
outputFileLabel:function(){return"Output file:"},
outputFilePreviewLabel:function(){return"Expected file name:"},
scriptFileLabel:function(){return"File name script:"},
targetingLabel:function(){return"Calculating the target..."},
preparingLabel:function(){return"Message personalization in progress..."},
startedLabel:function(){return"Delivery in progress..."},
canceledLabel:function(){return"Delivery canceled."},
toValidateLabel:function(){return"Pending approval..."},
toPublishLabel:function(){return"Pending publication..."},
taskLateLabel:function(){return"The task is late"},
taskPending:function(){return"The task is pending approval..."},
canceledTaskLabel:function(){return"Task cancelled"},
cancelAnalysis:function(){return"Analysis canceled..."},
forecastedLabel:function(){return"Delivery scheduled..."},
forecastedDateLabel:function(){return"Scheduled for:"},
successRateLabel:function(){return"Success rate:"},
senderAddressLabel:function(){return"Sender address:"},
replyAddressLabel:function(){return"Reply address:"},
subjectLabel:function(){return"Subject:"},
senderNameLabel:function(){return"Sender:"},
smsTypeLabel:function(){return"Message type:"},
validityDateLabel:function(){return"Delivery limit date:"},
validityDurationLabel:function(){return"Delivery limit:"},
durationDay:function(a){return""+a+" day(s)"},
durationHour:function(a){return""+a+" hour(s)"},
progressStateLabel:function(){return"Progress status..."},
smsContentLabel:function(){return"Subject:"},
cellProofDelivery:function(){return"Parent delivery:"},
midSourcingLabel:function(){return"Delivery submitted in mid-sourcing mode"},
cellRecurringDelivery:function(){return"Recurring delivery:"},
errorFCPLabel:function(a){return"An error occurred while generating the Proof. Please "+a+" to consult the delivery log."},
evaluatedLabel:function(){return"To evaluate"},
toEvaluateLabel:function(){return"Being evaluated"},
toReserveLabel:function(){return"To reserve"},
reservedLabel:function(){return"Reserved"},
validatedLabel:function(){return"Approved"},
orderCanceledLabel:function(){return"Canceled"},
orderErrorLabel:function(){return"With errors"},
orderRefusedLabel:function(){return"Rejected"},
availableLabel:function(){return"Available"},
editOrder:function(){return"Edit..."},
documentHeader:function(){return"Document(s):"},
displayPlanning:function(){return"Schedule..."},
displayReport:function(){return"Reports"},
displayNewsgroup:function(){return"Discussion forum"},
addTaskActionLabel:function(){return"Add a task"},
addDeliveryActionLabel:function(){return"Add a delivery"},
addTargetActionLabel:function(){return"A targeting..."},
addTargetDocumentLabel:function(){return"Add a document"},
addWebAppActionLabel:function(){return"Add a Microsite"},
shortcutSeed:function(){return"Seed addresses..."},
shortcutCtrl:function(){return"Control group..."},
shortcutValidation:function(){return"Approvals..."},
shortcutDlvOutline:function(){return"Delivery outlines..."},
shortcutAsset:function(){return"Marketing resources..."},
availableFromLabel:function(){return"Available since:"},
lastErrorLabel:function(){return"Error message:"},
labelOverload:function(){return"This operator has already been assigned a task for this period."},
taskHeaderTitle:function(a){return"Task '"+a+"'"},
assetHeaderTitle:function(a){return"Resource '"+a+"'"},
groupHeaderTitle:function(a){return"List '"+a+"'"},
stockHeaderTitle:function(a){return"Stock '"+a+"'"},
workflowHeaderTitle:function(a){return"Workflow '"+a+"'"},
catalogHeaderTitle:function(a){return"Catalog '"+a+"'"},
orderHeaderTitle:function(a){return"Order '"+a+"'"},
simulationHeaderTitle:function(a){return"Simulation '"+a+"'"},
offerHeaderTitle:function(a){return"Offer '"+a+"'"},
operatorHeaderTitle:function(a){return"Operator '"+a+"'"},
createTitle:function(){return"Created on:"},
schemaTitle:function(){return"Schema: "},
noPlanning:function(){return"Not specified"},
insertLabel:function(){return"Add"},
deliverySimulationStart:function(a){return"Starting simulation '"+a+"'"},
deliverySimulationWarning:function(a,b){return"Delivery '"+a+"' is not ready to be simulated (status "+b+"). It has been excluded."},
deliverySimulationEmptyWarning:function(a){return"Simulation '"+a+"' is empty: No delivery is selected."},
deliverySimulationError:function(a,b){return"Simulation failed '"+a+"' ("+b+")"},
deliverySimulationCollectingLogs:function(){return"Collecting messages to process in the work table"},
deliverySimulationPrioritizeLogs:function(){return"Message prioritization"},
deliverySimulationProcessedSuccessfully:function(a){return"Simulation '"+a+"' completed with success"},
deliverySimulationResLabelContact:function(){return"Contact date"},
deliverySimulationResLabelCount:function(){return"Count"},
deliverySimulationResLabelRevenue:function(){return"Revenue"},
deliverySimulationResLabelMargin:function(){return"Margin"},
deliverySimulationResLabelResponse:function(){return"Answer"},
deliverySimulationResLabelEstimatedCost:function(){return"Cost"},
deliverySimulationResLabelDeliveryLink:function(){return"Simulation result"},
deliverySimulationResLabelDelId:function(){return"Delivery identifier"},
deliverySimulationResLabelRuleId:function(){return"Rule ID"},
deliverySimulationResLabelReason:function(){return"Reason for rejection"},
deliverySimulationEmptyLoginErr:function(a){return"The login on behalf of which the simulation '"+a+"' is to be run is not found."},
simulationType:function(){return"Simulation type:"},
simulationToStartDesc:function(){return"The simulation is ready to be started."},
simulationInProcessDesc:function(){return"The simulation is in progress."},
simulationPausedDesc:function(){return"The simulation has been paused. Please click start to continue with the process."},
simulationFinishedTitle:function(){return"The simulation is finished."},
simulationFinishedDesc:function(){return"You can now start it again."},
hypothesisError:function(a,b){return"Hypothesis failed '"+a+"' ("+b+")"},
hypothesisStart:function(a){return"Starting hypothesis '"+a+"'"},
hypothesisEnd:function(a){return"End of processing hypothesis '"+a+"'"},
hypothesisEmptyLoginErr:function(a){return"The login on behalf of which the hypothesis '"+a+"' is to be calculated is not found."},
uselessStartDateCondition:function(a,b){return"The start date of '"+a+"' is less restrictive that given for '"+b+"'"},
uselessEndDateCondition:function(a,b){return"The end date of '"+a+"' is less restrictive than that given for '"+b+"'"},
simulationStart:function(a){return"Starting simulation (schema '"+a+"')"},
discardInactiveCategory:function(a,b){return"Category '"+a+"' is inactive ("+b+")"},
discardOutOfTimeCategory:function(a,b){return"Category '"+a+"' falls outside of the time range ("+b+")"},
populatingTable:function(a){return"Populating table '"+a+"'"},
simulationDone:function(){return"Simulation finished"},
simulationMissingCategory:function(){return"No offer category is specified"},
simulationMissingOfferSpace:function(){return"No offer space specified"},
missingStartDate:function(){return"The start date for the simulation period is not specified"},
missingEndDate:function(){return"The end date for the simulation period is not specified"},
simulationParamError:function(){return"The simulation cannot be executed with the current parameters"},
noCategoryError:function(){return"Unable to perform the job without a category"},
startDateAfterEndDate:function(){return"The start date of the simulation period is later than the end date"},
countForCategory:function(a,b){return"Category '"+a+"', number of targets: "+b},
envMismatch:function(a,b){return"Folder '"+a+"' has been ignored because its environment is not as expected ("+b+")"},
contextNoWeight:function(a,b){return"The context '"+a+"' of the offer '"+b+"' has been ignored because no weight-calculation expression is specified"},
noActiveCategoryFound:function(){return"All the selected offer categories are inactive"},
noCategoryFound:function(){return"No offer category found"},
propositionsGenerated:function(a,b,c){return""+a+" proposition(s) generated for offer '"+b+"' (context '"+c+"')"},
keepBestPropositions:function(a){return"Retaining "+a+" proposition(s) per target"},
applyingCoherencyRule:function(a){return"Applying rule: "+a+"."},
propositionsKept:function(a,b){return""+a+" proposition(s) kept, "+b+" deleted"},
keepBestContextPerOffer:function(){return"Keeping the best context for each proposition"},
normalizeWeights:function(){return"Standardize offer weight"},
buildAggregateTables:function(){return"Building aggregate tables"},
schemaTitleTarget:function(){return"Offer simulation targeting"},
schemaTitleTargetPkOnly:function(){return"Selected targets"},
schemaTitleResultAggCustomized:function(){return"Propositions by customized dimensions"},
schemaTitleResultAggPerOffer:function(){return"Propositions per offer"},
rankMaxLabel:function(){return"Rank max"},
rankMinLabel:function(){return"Rank min"},
rankSumLabel:function(){return"Rank sum"},
rankCountLabel:function(){return"Total number of offers"},
rankPosLabel:function(a){return"Number of offers in rank "+a},
envNoTargetSchema:function(){return"The environment does not specify the targeting schema"},
envNoPropositionSchema:function(){return"The environment does not specify the storage schema"},
envNoTypology:function(){return"No offer proposition typology is specified in the environment"},
envNoDeliveryMapping:function(){return"No delivery mapping is available for the environment. Implicit identification is disabled."},
envTargetSchemaNotConsistent:function(){return"The targeting dimension entered in the environment doesn't match the one specified in the delivery mapping. Implicit identification has been disabled. "},
envDeliveryMappingIncomplete:function(){return"The target mapping for the environment is incomplete. Implicit identification has been disabled."},
ruleBadThreshold:function(a,b){return"The cutoff number in rule '"+a+"' for the number of propositions is not valid ('"+b+"')"},
ruleNoEligibleOffer:function(a){return"Rule '"+a+"' has been skipped becasue none of the offers to which it applies have been selected"},
categoryNoEligibleTheme:function(a){return"No proposition is eligible in category '"+a+"' because there is no matching theme"},
noSuchStoragePathInPropositionSchema:function(a){return"The storage path '"+a+"' defined in the environment is not valid"},
errorAccessLabel:function(){return"You are not authorized to perform this operation."},
warningViewlessOffer:function(a){return"The offer "+a+" does not have a representation for the requested space."},
folderMismatch:function(a,b){return"Folder path '"+a+"' is not a subfolder of folder path '"+b+"'."},
folderShouldFollowNamingConvention:function(a){return"Folder with internal name '"+a+"' does not adhere to the naming convention."},
envHierarchyMismatch:function(a,b){return"Folder hierarchies of environments '"+a+"' and '"+b+"' do not match. Please correct the differences in order to perform the deployment."},
environmentTargetSchemaNotCompatible:function(){return"The targeting dimension of the target environment and of the source environment are different. Deployment failed."},
deploymentDone:function(){return"Deployment finished"},
deployingPublishingEnvOnProdEnv:function(a,b,c,d){return"Go live of '"+a+"' ("+b+") offers on '"+c+"' ("+d+")"},
consistencyCheckRevokedOffer:function(a){return"The '"+a+"' live offer has been disabled because there are no linked design offers. "},
deployingAnonEnvNoProd:function(a,b){return"The anonymous switch-over of '"+a+"' ("+b+") could not be adapted during deployment. Please configure it again on the deployed offer space."},
deployingObject:function(a,b){return"Deployment of '"+a+"' ("+b+")"},
deployingFolder:function(a){return"Deployment of folder '"+a+"'"},
errorDeployingFolder:function(a,b){return"Failed deployment of the folder of identifier '"+a+"'. The error is '"+b+"'"},
deployingTypo:function(a,b){return"Deploying '"+a+" ("+b+") typology"},
errorOfferWiew:function(a,b){return"Error while processing the representation of offer '"+a+"': "+b+". Please check the offer representation."},
errorRootTargetDoesNotMatchEnvTarget:function(a,b){return"The targeting dimension '"+a+"' does not match the targeting dimension of the environment: '"+b+"'."},
warningMissingObjectWhileCopying:function(a){return"The offer '"+a+"' could not be deployed since an object could not be found. Please check that the necessary offer spaces have been deployed and the necessary rights are set."},
offerRenamed:function(a,b){return"The offer '"+a+"' has been renamed to '"+b+"' to satisfy the naming convention."},
contextRenamed:function(a,b){return"The offer context '"+a+"' has been renamed to '"+b+"' to satisfy the naming convention."},
folderRenamed:function(a,b){return"The folder '"+a+"' has been renamed to '"+b+"' to satisfy the naming convention."},
hypothesisRenamed:function(a,b){return"The hypothesis '"+a+"' has been renamed to '"+b+"' to satisfy the naming convention."},
noOfferCanBeProposed:function(){return"No offer can be proposed"},
errorNoPropositionToTargetLink:function(a,b){return"Cannot find the link from the storage dimension '"+a+"' to the targeting dimension '"+b+"'"},
interactionPathInContext:function(a){return"Context '"+a+"' is ignored since it references interaction data non available during a simulation or a preview."},
warnAboutUsingCollectionLinks:function(a,b){return"The link '"+b+"' should use an exist operator, since it references a collection."},
errorExprTranslation:function(a,b){return"Error when converting the '"+a+"' expression into javaScript: "+b},
errorUntranslatableXtkExpr:function(a){return"The '"+a+"' expression cannot be converted into JavaScript"},
errorUnsupportedOperatorXtkExpr:function(a){return"The '"+a+"' operator isn't supported on XML collections"},
errorDuringTranslation:function(){return"An error occurred when converting expressions into JavaScript"},
errorLinkPropToTgtNotFound:function(a,b){return"Missing link between '"+a+"' and '"+b+"'"},
errorCantFindExclusionJoin:function(){return"Unable to find the join condition for the exclusion rule"},
errorLinkNotFound:function(a,b){return"Unable to find the link '"+a+"' in schema '"+b+"'"},
errorUnsupportedCollectionJoinKeyType:function(a,b){return"Join condition to linked schema uses key '"+a+"' with unsupported type '"+b+"'"},
errorUnsupportedTargetPrimaryKeyType:function(a){return"Unsupported type '"+a+"' for the primary key"},
errorUnsupportedJoinKeyTypeStorageLink:function(a){return"Join condition between storage and target schemas uses key conds with unsupported type '"+a+"'"},
errorUnsupportedJoinKeyType:function(a,b){return"The join condition between the target schema and the 1-N schema referenced in the '"+a+"' expression uses a type '"+b+"' key that is not supported."},
errorUnsupportedJoinKeyTypePropToTarget:function(a){return"The target schema uses a key with an unsupported type '"+a+"'"},
errorUnsupportedJoinKeyTypeTlToTarget:function(a,b){return"The target schema uses an unsupported '"+b+"' type '"+a+"' key"},
errorUnsupportedDestinationFieldType:function(a){return"The proposition storage schema uses a key with an unsupported type '"+a+"'"},
errorKeyPathNotFound:function(a){return"The '"+a+"' path specified for the key was not found"},
errorComplexKeyPathNotSupported:function(a){return"The elements of the target schema key must be at the root of the schema (this isn't the case for the '"+a+"' path)."},
errorInHtmlRenderingFunction:function(a){return"Error assessing the HTML rendering function on the '"+a+"' space:"},
errorInTextRenderingFunction:function(a){return"Error assessing the text rendering function on the '"+a+"' space:"},
errorInXmlRenderingFunction:function(a){return"Error assessing the XML rendering function on the '"+a+"' space:"},
errorInMicroEngineHook:function(){return"[Dynamic offer]"},
errorPostPropHook:function(){return"[Proposition post-processing]"},
errorEnrichTargetHook:function(){return"[Target enrichment]"},
offerActive:function(){return"Approved"},
offerUnactive:function(){return"Not activated"},
deploymentLabel:function(){return"Deploy"},
offerActionLabel:function(){return"Action on the offer"},
offerEligibilityStateLabel:function(){return"Offer eligibility"},
offerContentStateLabel:function(){return"Representations content"},
offerSubmitEligibilityLabel:function(){return"Submit eligibility for approval"},
offerSubmitEligibilityTitle:function(){return"Submit  eligibility"},
offerStartEligibilityConfirm:function(){return"Do you want to start the offer eligibility approval process?"},
offerStartContentConfirm:function(){return"Do you want to start the offer content approval process?"},
offerValidationContentConfirm:function(){return"Confirm offer content approval?"},
offerValidationEligibilityConfirm:function(){return"Confirm offer eligibility approval?"},
offerValidateContent:function(){return"Approve content"},
offerCancelContentConfirm:function(){return"Do you really want to disable the offer content?"},
offerCancelEligibilityConfirm:function(){return"Do you really want to disable offer eligibility?"},
offerCancelContent:function(){return"Disable content"},
offerCancelEligibility:function(){return"Disable eligibility"},
offerCancel:function(){return"Disable offer"},
offerValidateEligibility:function(){return"Approve eligibility"},
offerCancelConfirm:function(){return"Do you really want to disable the offer?"},
offerViewStateEdition:function(){return"Design"},
offerViewStateLive:function(){return"Live"},
offerHelperOfferSpace:function(){return"Offer space"},
offerHelperFields:function(){return"List of fields"},
offerHelperRequired:function(){return"Mandatory"},
offerHelperDesc:function(){return"Description"},
offerHelperYes:function(){return"Yes"},
offerHelperNo:function(){return"No"},
offerValidationInwaitingDesc:function(){return"The offer is pending approval submission."},
offerValidationDesc:function(){return"The offer is pending approval."},
offerValidationInProdDesc:function(a){return"The offer has been modified since it was last published on "+a+"."},
offerInProdDesc:function(){return"Approval lets you update the published offer."},
offerContentRefusedDesc:function(){return"Content approval was rejected."},
offerTargetRefusedDesc:function(){return"Eligibility approval was rejected."},
offerContentLateDesc:function(a){return"The content approval is "+a+" day(s) late."},
offerTargetLateDesc:function(a){return"Eligibility approval is "+a+" day(s) late."},
offerNoOfferSpaceDesc:function(){return"The offer content has not been entered yet."},
offerProductionDesc:function(a){return"The offer was deployed on "+a},
offerProductionPendingDesc:function(){return"The offer is pending deployment to the live environment."},
offerCancelPendingDesc:function(){return"Offer pending de-activation."},
offerDisableDesc:function(a){return"The offer was disabled on "+a+"."},
categoryOfferView:function(){return"Representation status on the offer spaces"},
categoryEligibility:function(){return"Eligibility"},
offerProdLabel:function(){return"Offers online:"},
offerPublishLabel:function(){return"last published on:"},
offerLastModified:function(){return"Last modified on:"},
offerPublishedUpToDateLabel:function(){return"Published representation"},
offerNotPublishedLabel:function(){return"Non-published representation"},
offerViewPublished:function(a){return"(Published on "+a+")"},
offerViewNoneLabel:function(){return"Unavailable."},
offerStateEdition:function(a){return""+a+" being edited"},
offerStateInWaiting:function(a){return""+a+" pending approval"},
offerStateValidated:function(a){return""+a+" approved"},
offerStateRefused:function(a){return""+a+" rejected"},
offerStateCanceled:function(a){return""+a+" disabled"},
offerEligibilityLabel:function(){return"Eligibility"},
offerContentLabel:function(){return"Content"},
detailRules:function(){return"Schedule and eligibility rules"},
queryStartLabel:function(){return"Query: "},
elibilityPlanning:function(){return"Overall schedule:"},
inactiveOfferCategory:function(a){return"Offer disabled by '"+a+"' category"},
inactiveCategory:function(){return"Disabled category."},
offerContextWeigth:function(a,b){return"Weight: '"+a+"' "+b},
offerTotalWeigth:function(a,b){return"Total multiplication weight: '"+a+"' "+b},
commentLabel:function(){return"Comment:"},
messageAvailableNtf:function(){return"Please enter the delivery content and submit it for approval."},
messageContentNtf:function(){return"The delivery content was submitted for approval."},
messageTargetNtf:function(){return"Delivery targeting was submitted for approval."},
messageBudgetNtf:function(){return"The delivery budget was submitted for approval."},
messageExtractionNtf:function(){return"The delivery extraction file was submitted for approval."},
messageFCPNtf:function(){return"The delivery proof was submitted for approval."},
taskNotifNtf:function(){return"Please enter the task implementation status."},
offerContentNtf:function(){return"The offer content was submitted for approval."},
offerTargetNtf:function(){return"Offer eligibility was submitted for approval."},
assetTargetNtf:function(){return"The resource was submitted for approval."},
localOrderTargetNtf:function(){return"The order was submitted for approval."},
localOrderAvailableNtf:function(){return"The marketing campaign is available locally."},
catalogTargetNtf:function(){return"The catalog entry was submitted for approval."},
catalogLocalPublicationNtf:function(){return"The campaign in the catalog is available."},
catalogMutualizedPublicationNtf:function(){return"The shared campaign is pending catalog entry."},
catalogCancellationNtf:function(a){return"The shared campaign was canceled centrally on "+a+"."},
newsgroupNewMsgNtf:function(){return"A new message has been posted to the forum."},
newsgroupResponseNtf:function(){return"A response was posted to the forum."},
errorReservedPropositionPath:function(a){return"Unable to use the reserved '"+a+"' attribute for proposition storage"},
errorEmptyOpGroup:function(a){return"The '"+a+"' operator group does not contain any operators."},
labelContentValidatedNtf:function(a,b){return"The delivery content was approved on "+a+" by "+b},
labelContentRefusedNtf:function(a,b){return"The delivery content was rejected on "+a+" by "+b},
labelContentAvailableNtf:function(a,b){return"The delivery content was made available on "+a+" by "+b},
labelTargetValidatedNtf:function(a,b){return"The delivery targeting was approved on "+a+" by "+b},
labelTargetRefusedNtf:function(a,b){return"The delivery targeting was rejected on "+a+" by "+b},
labelBudgetValidatedNtf:function(a,b){return"The delivery budget was approved on "+a+" by "+b},
labelBudgetRefusedNtf:function(a,b){return"The delivery budget was rejected on "+a+" by "+b},
labelExtractionValidatedNtf:function(a,b){return"The delivery extraction file was approved on "+a+" by "+b},
labelExtractionRefusedNtf:function(a,b){return"The delivery extraction file was rejected on "+a+" by "+b},
labelFCPValidatedNtf:function(a,b){return"The delivery proof was approved on "+a+" by "+b},
labelFCPRefusedNtf:function(a,b){return"The delivery proof was rejected on "+a+" by "+b},
labelSandboxValidatedNtf:function(a,b){return"Inclusion in the calendar was approved on "+a+" by "+b},
labelSandboxRefusedNtf:function(a,b){return"Inclusion in the calendar was rejected on "+a+" by "+b},
labelAssetValidatedNtf:function(a,b){return"The resource was approved on "+a+" by "+b+"<br/> Please publish the resource to make it available."},
labelAssetRefusedNtf:function(a,b){return"The resource was rejected on "+a+" by "+b},
labelAssetPublishedNtf:function(a,b){return"The resource was published on "+a+" by "+b},
labelOfferValidatedNtf:function(a,b){return"Offer eligibility was approved on "+a+" by "+b},
labelOfferRefusedNtf:function(a,b){return"Offer eligibility was rejected on "+a+" by "+b},
labelOfferViewValidatedNtf:function(a,b){return"The offer content was approved on "+a+" by "+b},
labelOfferViewRefusedNtf:function(a,b){return"The offer content was rejected on "+a+" by "+b},
labelCatalogRefusedNtf:function(a,b){return"The catalog entry was rejected on "+a+" by "+b},
labelCatalogValidateNtf:function(a,b){return"The catalog entry was approved on "+a+" by "+b},
labelOrderRefusedNtf:function(a,b){return"The order was rejected on "+a+" by "+b},
labelOrderRefusedMutualizedNtf:function(a,b){return"The catalog entry was rejected on "+a+" by "+b},
labelOrderValidatedNtf:function(a,b){return"The order was approved on "+a+" by "+b},
labelOrderValidatedMutualizedNtf:function(a,b){return"The catalog entry was approved on "+a+" by "+b},
labelTaskRealizedNtf:function(a,b){return"The task was carried out on "+a+" by "+b},
taskValidationPendingNtf:function(a,b){return"The task was carried out on "+a+" by "+b+" and is pending approval."},
labelTaskValidatedNtf:function(a,b){return"The task was approved on "+a+" by "+b},
labelTaskRefusedNtf:function(a,b){return"The task was rejected on "+a+" by "+b},
labelTaskCanceldNtf:function(a,b){return"The task was cancelled on "+a+" by "+b},
labelTaskLateNtf:function(a){return"The task is late since "+a+"."},
labelTaskLateTodayNtf:function(){return"The task is late as of today."},
labelTaskAction:function(){return"Action(s) on the task: "},
closeReport:function(){return"Close the report"},
operationReport:function(){return"Campaign reports"},
deliveryReport:function(){return"Delivery reports"},
groupReport:function(){return"List reports"},
webAppReport:function(){return"Web application reports"},
reportHeader:function(){return"Reports"},
serviceReport:function(){return"Service reports"},
simulationReport:function(){return"Simulation reports"},
offerReport:function(){return"Offer reports"},
programReport:function(){return"Program reports"},
planReport:function(){return"Plan reports"},
deliveryAnalysisContent:function(){return"Analyzed"},
providerGroupLabel:function(){return"Provider:"},
acquisitionTypeGroupLabel:function(){return"Acquisition type:"},
workflowLeadLabel:function(){return"Import workflow: "},
loading:function(){return"Loading..."},
playSimuConfirm:function(){return"Are you sure you want to start the simulation?"},
playSimulation:function(){return"Start simulation"},
stopSimuConfirm:function(){return"Are you sure you want to stop the simulation?"},
fldEnvLabel:function(){return"Environment:"},
validationWorkflowTitle:function(){return"Action on the workflow"},
loginOperator:function(){return"Login:"},
stopLabel:function(){return"Stop"},
pauseLabel:function(){return"Pause"},
backToDeliveries:function(){return"Back to the list of deliveries"},
backToOperations:function(){return"Back to the list of campaigns"},
backToPrograms:function(){return"Back to the program calendar"},
backToPlans:function(){return"Back to the plan calendar"},
backToSocialWebApps:function(){return"Back to the list of applications"},
backToWebApps:function(){return"Back to the list of Web applications"},
backToOffers:function(){return"Back to the list of offers "},
backToAssets:function(){return"Back to the list of resources"},
backToCatalogs:function(){return"Back to the list of catalog entries"},
backToLocalOrders:function(){return"Back to order tracking"},
backToStocks:function(){return"Back to the list of stocks"},
backToSimulations:function(){return"Back to the list of simulations"},
backToworkflows:function(){return"Back to the list of workflows"},
backToGroups:function(){return"Back to the list of lists"},
backToTasks:function(){return"Back to the list of tasks"},
backToCommunities:function(){return"Back to the list of communities"},
backToServices:function(){return"Back to the list of services"},
backToProduction:function(){return"Back to the main view"},
labelFailed:function(){return"Failed"},
processusIdLabel:function(){return"Process (PID): "},
hostNameLabel:function(){return"Execution server: "},
affinityLabel:function(){return"Default affinity"},
processDateLabel:function(){return"Last processing: "},
nextProcessingDateLabel:function(){return"Next processing: "},
processStateLabel:function(){return"Execution status: "},
startStateLabel:function(){return"Start status: "},
loginLabel:function(){return"Execution login: "},
activityCell:function(){return"Activity"},
playWorkflowConfirm:function(){return"Are you sure you want to start this workflow?"},
pauseWorkflowConfirm:function(){return"Are you sure you want to pause this workflow?"},
pauseWorkflowTitle:function(){return"Pause the workflow?"},
stopWorkflowConfirm:function(){return"Are you sure you want to stop this workflow?"},
restartworkflowConfirm:function(){return"Are you sure you want to restart this workflow?"},
playWorkflowLabel:function(){return"Start the workflow"},
playWorkflowTitle:function(){return"Start the workflow"},
stopWorkflowLabel:function(){return"Stop"},
stopWorkflowTitle:function(){return"Stop the workflow"},
workflowStartInWaiting:function(){return"Start the workflow as soon as possible..."},
workflowStartedDesc:function(a){return"The workflow has been running since "+a+"."},
workflowStartInWaitingDesc:function(){return"The workflow is waiting to be started..."},
workflowToStartDesc:function(){return"The workflow is ready to be started."},
workflowPausedDesc:function(){return"The workflow has been paused. Please click start to continue with the process."},
workflowFinishedTitle:function(){return"The workflow is finished."},
workflowFinishedDesc:function(){return"You can now start it again."},
workflowFailedDesc:function(a){return"(since "+a+")"},
failedWkfLabel:function(){return"The workflow has failed"},
failedDlvLabel:function(){return"The delivery has failed"},
failedSimuLabel:function(){return"The simulation failed."},
failedOrderLabel:function(){return"Error during local campaign creation"},
validationConfirm:function(){return"Do you want to start the catalog entry approval process?"},
publicationConfirm:function(){return"Do you want to start campaign publication?"},
proofOrderLabel:function(){return"Evaluate"},
reserveOrderLabel:function(){return"Reserve the order"},
reserveConfirm:function(){return"Please confirm order reservation"},
validationOrderTitle:function(){return"Action on the order"},
orderCatalogList:function(){return"Linked commands"},
localOrderEditionLabel:function(){return"Order parameters"},
browserStats:function(a,b){return"Created "+a+" record(s) in the user agent statistics table in "+b+"."},
leadImportLeads:function(){return"Import activities or leads..."},
leadLandingPageCreation:function(){return"Add a landing page..."},
landingPageTitle:function(){return"Landing page(s):"},
importTitle:function(){return"Import(s):"},
registered:function(){return"Number of followers:"},
fanNumber:function(){return"Number of fans:"},
urlExternal:function(){return"Web link:"},
disableOperator:function(){return"The account is disabled."},
noConsoleCnxOp:function(){return"Access to the Neolane client console prohibited"},
disableOperatorDesc:function(){return"This account is disabled. The operator no longer has access to the application."},
noConsoleCnxOpDesc:function(){return"This operator may not use the client console (Web and API access only)."},
noRights:function(){return"No rights."},
noSecurityZone:function(){return"No security zone specified."},
noSecurityZoneDesc:function(){return"Access to the Neolane platform is prohibited for this operator."},
enableOperatorDesc:function(a){return"Active operator on safety zone '"+a+"'."},
taskListTitle:function(){return"List of tasks"},
taskOpListTitle:function(){return"Tasks assigned to operator"},
invalidAccessToken:function(a){return"The access token of the (id: "+a+") visitor is no longer valid. This visitor will no longer be synchronized."},
realtimeFacebookNotifSubsSuccess:function(a){return"The subscription to real-time Facebook notifications is confirmed for the "+a+" external account."},
realtimeFacebookNotifSubsFailed:function(a,b){return"Failed to subscribe to real-time Facebook notification for the "+a+" external account. Facebook error message ("+b+")."},
FacebookAppIdOrSecretInvalid:function(){return"The application ID or the secret key are not recognized by Facebook."},
realtimeFacebookNotifSubsRequested:function(){return"The real-time notification subscription request received by Facebook."},
realtimeFacebookNotifUnknownUser:function(a){return"A real-time update was received for an unknown visitor (External ID: "+a+")."},
realtimeFacebookNotifUnknownField:function(a){return"A real-time update was received for an unknown field ("+a+")."},
facebookConnectorNoHttpResponse:function(a){return"HTTP response absent during a request to Facebook, access token concerned: "+a+"."},
facebookConnectorError:function(a){return"Error connecting to Facebook: "+a+"."},
facebookConnectorHttpUnknownError:function(a,b){return"Error during call to "+a+": "+b+"."},
mcPublishLabel:function(){return"Publish"},
mcPublishEditionLongDesc:function(){return"The template hasn't been published on the execution instances."},
mcPublishDeployedTitleDesc:function(a){return"The template was published on "+a+"."},
mcPublishDeployedLongDesc:function(){return"Publishing updates the template on the execution instances."},
mcPublishModifiedTitleDesc:function(a){return"The template has been changed since it was last published on "+a+"."},
mcPublishModifiedLongDesc:function(){return"You need to publish the template again for changes to be taken into account."},
mcPublishTitle:function(){return"Publishing the template"},
mcPublishInitMsgLabel:function(a){return"You are about to publish the '"+a+"' template. Click 'Start' to run the process."},
offerStartSynchExecInstance:function(a){return"Uploading offers on execution instance '"+a+"'."},
offerInstallPackageOnExecInstance:function(a){return"Deploying offers on execution instance '"+a+"'."},
offerPublicationOnExecInstance:function(a){return"Publishing of offers on execution instance '"+a+"'."},
offerEndSynchExecInstance:function(a){return"End of offer upload on execution instance '"+a+"'."},
execInstanceWithDifferentOperator:function(){return"Execution instances are configured with different operators."},
errorSynchExecInstance:function(a,b){return"Error while uploading offers on execution instance '"+a+"': '"+b+"'."},
errorMissingSchemaOnExecutionInstance:function(a,b){return"Schema '"+a+"' is not present on execution instance '"+b+"'."},
errorSynchronizatingExecutionInstances:function(a){return"Error while synchronizing environment '"+a+"' on its related execution instances."},
existingCategoryError:function(a,b){return"A folder with the same name '"+a+"' exists in the production environment with a different internal name '"+b+"'. Please change the label or internal name of this folder."},
errorFolderEnvironmentOwner:function(a,b){return"Offer or folder '"+a+"' does not belong to environment '"+b+"'."}}
var xtk_report={
report_closeHistory:function(){return"Current data"},
report_export:function(){return"Export"},
report_export_excel_2007:function(){return"Excel 2007 workbook"},
report_export_excel:function(){return"Excel 97-2003 workbook"},
report_export_pdf:function(){return"PDF file"},
report_export_calc:function(){return"OpenDocument workbook"},
report_save:function(){return"Save"},
report_print:function(){return"Print"},
report_err_no_folder:function(){return"You don't have the required rights to save this descriptive analysis."},
report_back:function(){return"Back"},
report_back_title:function(){return"Back to the list of reports"},
report_saveDialogTitle:function(){return"Saving descriptive analysis..."},
report_saveDialogLabel:function(){return"Label"},
report_saveDialogData:function(){return"Also save data"},
report_saveDialogShare:function(){return"Share this report"},
report_saveDialogSave:function(){return"Save"},
report_saveDialogCancel:function(){return"Cancel"},
report_noData:function(){return"No data."},
showAllReports:function(){return"Show all reports"},
executionSwitch:function(){return"View"},
editionSwitch:function(){return"Edit"},
allReports:function(){return"All reports"},
xawreport_list:function(){return"Available reports"},
xawreport_history:function(){return"History"},
xawreportPublisher_title:function(){return"Display reports"},
displayHistory:function(){return"Display"},
lastHistory_s:function(a){return"Last history ("+a+")"},
historyList:function(){return"Available history"},
defaultCategory:function(){return"Others"},
newHistoryTitle:function(){return"New history"},
defaultAllReportsLabel:function(){return"Global reports"},
defaultAllReportsDesc:function(){return"Display all available reports."},
find:function(){return"Search:"},
confirmSaving:function(){return"Do you really want to save this report?"},
save:function(){return"An error occurred while saving the report."},
bad_export_format:function(a){return"Format '"+a+"' not supported"},
export_err_flatReportIsNotXml:function(){return"Failed to export the report. Check data volume."},
err_export:function(){return"An error occurred when exporting the report"}}
var xtk_olap={
adHocReport_chooseExisting:function(){return"Select an analysis cube"},
adHocReport_windowTitle:function(){return"New report"},
adHocReport_newTitle:function(){return"Creating a new report"},
adHocReport_defaultPageTitle:function(){return"Report"},
adHocReport_panelEditMsg:function(){return"The report is currently being edited."},
adHocReport_noModelSelected:function(){return"Please select a template."},
adHocReport_listCubeTitle:function(){return"Available cube templates"},
adHocReport_label:function(){return"You are creating a new report."},
adHocReport_desc:function(){return"Select a cube from the left-hand list and enter the information below."},
adHocReport_save:function(){return"Save"},
adHocReport_loadingContent:function(){return"Loading..."},
adHocReport_backToTheList:function(){return"Back to the list of reports"},
adHocReport_cartModified:function(){return"Your cart has been changed."},
adHocReport_modified:function(){return"The report has been changed, please save it to confirm changes."},
adHocReport_saveConfirmTitle:function(){return"Report save"},
adHocReport_saveConfirmWarnMsg:function(){return"The record makes changes available for all report users."},
adHocReport_saveConfirmMsg:function(){return"Confirm save?"},
adHocReport_saveForAll:function(){return"Save (shared)"},
adHocReport_exportPdf:function(){return"Export in PDF format"},
adHocReport_exportExcel:function(){return"Export in Excel format (XLS)"},
adHocReport_exportWait:function(){return"Please wait..."},
adHocReport_warningNoMeasures:function(){return"Please create at least one measure in this cube."},
adHocReport_warningNoDimension:function(){return"Please create at least one dimension in this cube."},
adHocReport_propertyTitle:function(){return"Report properties"},
adHocReport_propertyOwnerMsg_S:function(a){return"The report was created by '"+a+"'. You may not make changes to its properties."},
adHocReport_propertyTooltip:function(){return"Display the report properties"},
adHocReport_reportLabel:function(){return"Label"},
adHocReport_reportCategory:function(){return"Category"},
adHocReport_reportCategoryNone:function(){return"(None specified)"},
adHocReport_reportOrder:function(){return"Relevance"},
adHocReport_reportOrderHelp:function(){return"Used in the reports list when sorted by relevance."},
adHocReport_reportShare:function(){return"Share the report"},
adHocReport_reportShareHelp:function(){return"Sharing occurs in read-only mode."},
adHocReport_reportShareWarn:function(){return"If no operator or group is selected, the report will be available to all operators."},
adHocReport_reportShareList:function(){return"Operator or group"},
adHocReportConfig_label:function(){return"Report label"},
adHocReportConfig_desc:function(){return"Description"},
adHocReportConfig_create:function(){return"Create"},
adHocReportConfig_cancel:function(){return"Cancel"},
action_selectionFilter:function(){return"Filter on the selection"},
action_run:function(){return"Refresh data"},
action_runGlobal:function(){return"Click here to display the pivot table."},
action_maximizePivot:function(){return"Enlarge the pivot table"},
action_settings:function(){return"Edit the pivot table configuration"},
action_showHideFilters:function(){return"Show/Hide filters"},
action_addFilter:function(){return"Add a filter"},
action_cartAddElement:function(){return"Add to cart"},
action_cartView:function(){return"Show cart"},
action_cartHide:function(){return"Return to the report"},
query_warnTooManyData:function(){return"Warning: the number of cells to display in the table is high. This may slow down your machine. We recommend altering dimension configuration to solve this issue and generate clearer results."},
query_errTooManyData:function(){return"Warning: the number of cells to display in the table is very high. This may slow down your machine. We recommend altering dimension configuration to solve this issue and generate clearer results."},
query_cancelCurrent:function(){return"Cancel the query in progress"},
global_settingsEdition:function(){return"Pivot table configuration"},
legend_title:function(){return"Caption"},
legend_show:function(){return"Display"},
legend_value:function(){return"Text"},
color_title:function(){return"Coloring"},
color_enable:function(){return"Activate"},
color_enableHelp:function(){return"Activate coloring for the pivot table cells"},
color_measure:function(){return"Measure used "},
color_undefinedMeasure:function(){return"Not defined"},
color_minValue:function(){return"Lower limit"},
color_maxValue:function(){return"Upper limit"},
color_order:function(){return"Color scale"},
color_orderAsc:function(){return"From red to green"},
color_orderDesc:function(){return"From green to red"},
measure_title:function(){return"Measures"},
measure_select:function(){return"Select an existing measure"},
measure_new:function(){return"Create a measure"},
measure_config:function(){return"Configure measures"},
measure_add:function(){return"Use a measure"},
measure_add2:function(){return"Add an existing measure to the pivot table"},
measure_config2:function(){return"Configure measures"},
measure_config3:function(){return"Configure measurement"},
measure_format:function(){return"Formatting"},
measure_decimalplaces:function(){return"Number of decimal places"},
measure_formatNumber:function(){return"Number"},
measure_formatPercentage:function(){return"Percentage"},
measure_percentRow:function(){return"Breakdown by line"},
measure_percentColumn:function(){return"Breakdown by column"},
measure_percentTotal:function(){return"Global breakdown"},
measure_percentRow2:function(a){return""+a+" (line %)"},
measure_percentColumn2:function(a){return""+a+" (column %)"},
measure_percentTotal2:function(a){return""+a+" (total %)"},
measure_label:function(){return"Label"},
measure_unit:function(){return"Unit"},
measure_unitFormat:function(){return"Unit placement"},
measure_unitFormatAfterSpace:function(){return"After, with a space"},
measure_unitFormatAfter:function(){return"After, without a space"},
measure_unitFormatBeforeSpace:function(){return"Before, with a space"},
measure_unitFormatBefore:function(){return"Before, without a space"},
measure_cellOrientation:function(){return"Orientation"},
measure_cellOrientationHelp:function(){return"Define cell orientation"},
measure_rowlabel:function(){return"In rows"},
measure_columnlabel:function(){return"In columns"},
measure_showLabel:function(){return"Labels"},
measure_showLabelHelp:function(){return"Hide or show measure labels"},
measure_configuration:function(a){return"Configure measurement \""+a+"\""},
measure_configNoMeasures:function(){return"Please add at least one measure."},
measure_pivotTitle:function(){return"Measures and cells"},
measure_cellAlignment:function(){return"Alignment"},
measure_cellAlignmentHelp:function(){return"Define cell alignment"},
measure_leftLabel:function(){return"Left"},
measure_rightLabel:function(){return"Right"},
measure_centerLabel:function(){return"Centre"},
dynMeasure_create:function(){return"Create a dynamic measure"},
dynMeasure_creation:function(){return"Creating a dynamic measure"},
dynMeasure_edit:function(){return"Edit the dynamic measure"},
dynMeasure_edition:function(){return"Editing the dynamic measure"},
dynMeasure_commonPart:function(){return"General"},
dynMeasure_label:function(){return"Label"},
dynMeasure_help:function(){return"Configure the dynamic measure by defining the type of measure to be used, then define the calculation settings."},
dynMeasure_strategy:function(){return"Type"},
dynMeasure_strategyCombine:function(){return"Combination of measures"},
dynMeasure_strategyRate:function(){return"Proportion"},
dynMeasure_strategyComparison:function(){return"Variation"},
dynMeasure_strategyDispersion:function(){return"Standard deviation"},
dynMeasure_combineTitle:function(){return"Combination of measures"},
dynMeasure_combineHelp:function(){return"Select two measures. Combine them by selecting an operator that will make up a third measure. For instance, you can define the average value of purchases as the sum of purchases divided by the number of purchases. "},
dynMeasure_combineOperator:function(){return"Operator"},
dynMeasure_combineOperatorSum:function(){return"Sum (+)"},
dynMeasure_combineOperatorDiff:function(){return"Difference (-)"},
dynMeasure_combineOperatorMult:function(){return"Multiplication (*)"},
dynMeasure_combineOperatorRate:function(){return"Rate (%)"},
dynMeasure_combineOperatorDiv:function(){return"Division (/)"},
dynMeasure_combineMeasure1:function(){return"First measure"},
dynMeasure_combineMeasure2:function(){return"Second measure"},
dynMeasure_comparisonTitle:function(){return"Variation"},
dynMeasure_comparisonHelp:function(){return"Define the granularity of the comparison to be made. The variation will be calculated for each cell that matches this level. For instance, you could observe the evolution of the turnover over several months. "},
dynMeasure_comparisonOperator:function(){return"Expressed in"},
dynMeasure_comparisonOperatorDiff:function(){return"Value"},
dynMeasure_comparisonOperatorDiffRate:function(){return"Rate"},
dynMeasure_comparisonMeasure:function(){return"Measure"},
dynMeasure_comparisonDimension:function(){return"Dimension"},
dynMeasure_comparisonLevel:function(){return"Level"},
dynMeasure_comparisonCrossLevel:function(){return"Cross parent levels"},
dynMeasure_dispersionTitle:function(){return"Standard deviation"},
dynMeasure_dispersionHelp:function(){return"Define the granularity of the cells to be analyzed. Deviations will be calculated within each group of matching cells. For instance, you can compare the sales volumes of your customer segments. "},
dynMeasure_dispersionOperator:function(){return"Expressed in"},
dynMeasure_dispersionOperatorDiff:function(){return"Value"},
dynMeasure_dispersionOperatorDiffRate:function(){return"Rate"},
dynMeasure_dispersionOperatorStdDevDiff:function(){return"Number of standard deviations"},
dynMeasure_dispersionMeasure:function(){return"Measure"},
dynMeasure_dispersionDimension:function(){return"Dimension"},
dynMeasure_dispersionLevel:function(){return"Level"},
dynMeasure_rateTitle:function(){return"Proportion"},
dynMeasure_rateHelp:function(){return"Define the granularity of the reference values. The rate will be calculated by dividing cell values by these references. For instance, you can calculate which customer segments contribute the most to your turnover. "},
dynMeasure_rateLevelType:function(){return"Divider"},
dynMeasure_rateLevelTypeLevel:function(){return"One level of a dimension"},
dynMeasure_rateLevelTypeDimension:function(){return"The total of a dimension"},
dynMeasure_rateLevelTypeLine:function(){return"The total in lines or columns"},
dynMeasure_rateLevelTypeGlobal:function(){return"The overall total"},
dynMeasure_rateMeasure:function(){return"Measure used"},
dynMeasure_rateDimension:function(){return"Dimension"},
dynMeasure_rateLevel:function(){return"Level"},
dimension_add:function(){return"Add"},
dimension_addRow:function(){return"Add a dimension to the row"},
dimension_addColumn:function(){return"Add a dimension to the column"},
dimension_total:function(a){return""+a+" (total)"},
dimension_totalAlone:function(){return"Total"},
dimension_addTitle:function(){return"Add a dimension to the pivot table."},
dimension_addSubtitle:function(){return"Select one of the following dimensions."},
dimension_addNoLevel:function(){return"This dimension has no sub-levels."},
dimension_confMultiLevels:function(){return"Select the settings for each level of this dimension. To hide a level, simply uncheck it."},
dimension_confOneLevel:function(){return"Select the settings for this dimension"},
dimension_dragAndDrop:function(){return"Drag here"},
dimension_configuration:function(a){return"Dimension: "+a},
dimension_listTitle:function(){return"Dimensions"},
level_configure:function(a){return"Configuration of level "+a},
level_showSum:function(){return"Show the total at the end of the line"},
level_label:function(){return"Label"},
level_defaultOpen:function(){return"Expand during loading"},
level_sortMode:function(){return"Sort data"},
level_sortModeValue:function(){return"By value"},
level_sortModeLabel:function(){return"By label"},
level_sortModeNone:function(){return"None"},
level_sortByMeasure:function(a){return"By "+a},
level_sortOrder:function(){return"Show in the following order"},
level_sortOrderAsc:function(){return"Ascending"},
level_sortOrderDesc:function(){return"Descending"},
level_rowCount:function(){return"Number of lines shown"},
level_columnCount:function(){return"Number of columns shown"},
level_linkFormat:function(){return"Format"},
level_dateFormat:function(){return"Format"},
level_dateFormatShort:function(){return"Short"},
level_dateFormatLong:function(){return"Long"},
level_showEnumImages:function(){return"Display images"},
level_linkDefaultValue:function(){return"Default"},
level_defaultString:function(a){return""+a+" unknown"},
newFilter_subtitle:function(){return"Select one of the dimensions below. The filter will be created based on this dimension."},
filter_humanCondAnd:function(a,b){return""+a+" and "+b},
filter_humanCondOr:function(a,b){return""+a+" or "+b},
filter_shortCondAnd:function(a,b){return""+a+", "+b},
filter_shortCondOr:function(a,b){return""+a+"/"+b},
filterDate_help:function(){return"Configure the filter for the date by defining a type and a precision. "},
filterDate_date:function(){return"Date"},
filterDate_inclusive:function(){return"Included"},
filterDate_type:function(){return"Filter type"},
filterDate_typeSimple:function(){return"Solid"},
filterDate_typeRange:function(){return"Range"},
filterDate_typeRelative:function(){return"Relative"},
filterDate_precision:function(){return"Selection"},
filterDate_year:function(){return"Year"},
filterDate_quarter:function(){return"Quarter"},
filterDate_month:function(){return"Month"},
filterDate_day:function(){return"Date"},
filterDate_oneYear:function(){return"One year"},
filterDate_oneQuarter:function(){return"One quarter"},
filterDate_oneMonth:function(){return"One month"},
filterDate_oneDate:function(){return"A date"},
filterDate_perYear:function(){return"By year"},
filterDate_perQuarter:function(){return"By quarter"},
filterDate_perMonth:function(){return"By month"},
filterDate_perDate:function(){return"By date"},
filterDate_noYearSelected:function(){return"No year selected"},
filterDate_noQuarterSelected:function(){return"No quarter selected"},
filterDate_noMonthSelected:function(){return"No month selected"},
filterDate_wrongInterval:function(){return"The end date must be later than the start date"},
filterDate_from:function(){return"Since"},
filterDate_to:function(){return"To"},
filterDate_from_i:function(a,b){return""+a+" since "+b+" (included)"},
filterDate_from_e:function(a,b){return""+a+" since "+b+" (excluded)"},
filterDate_equals:function(a,b){return""+a+" equal to "+b},
filterDate_to_i:function(a,b){return""+a+" until "+b+" (included)"},
filterDate_to_e:function(a,b){return""+a+" until "+b+" (excluded)"},
filterDate_between_ee:function(a,b,c){return""+a+" between "+b+" and "+c+" (excluded)"},
filterDate_between_ei:function(a,b,c){return""+a+" between "+b+" (excluded) and "+c+" (included)"},
filterDate_between_ie:function(a,b,c){return""+a+" between "+b+" (included) and "+c+" (excluded)"},
filterDate_between_ii:function(a,b,c){return""+a+" between "+b+" and "+c+" (included)"},
filterDate_latest3years:function(){return"The last 3 years"},
filterDate_latest3quarters:function(){return"The last 3 quarters"},
filterDate_latest3months:function(){return"The last 3 months"},
filterDate_latest3days:function(){return"The last 3 days"},
filterDate_lastyear:function(){return"Last year"},
filterDate_lastquarter:function(){return"Last quarter"},
filterDate_lastmonth:function(){return"Last month"},
filterDate_yesterday:function(){return"Yesterday"},
filterDate_thisyear:function(){return"This year"},
filterDate_thisquarter:function(){return"This quarter"},
filterDate_thismonth:function(){return"This month"},
filterDate_today:function(){return"Today"},
filterDate_nth_lastyears:function(a){return"The last "+a+" years"},
filterDate_nth_lastquarters:function(a){return"The last "+a+" quarters"},
filterDate_nth_lastmonths:function(a){return"The last "+a+" months"},
filterDate_nth_lastdays:function(a){return"The last "+a+" days"},
filterImmutable_title:function(){return"Complex filter (non-editable)"},
filterImmutable_summary:function(){return"Advanced filter"},
filterImmutable_humanCond:function(){return"Condition"},
filterImmutable_customLabel:function(){return"Label to display"},
filterEnum_help:function(){return"Check the boxes relevant to the data you want to keep."},
filterBinning_help:function(){return"Check the cells relevant to the data you want to keep."},
filterBinning_other:function(){return"Other"},
filterLink_help:function(){return"Select the entity based on which the report will be filtered."},
filterLinks_help:function(){return"Add one or more entities which the report will be filtered based on."},
filterLink_chose:function(){return"Choose an entity"},
filterLink_entity:function(){return"Entity"},
filterLink_entities:function(){return"Entities"},
filterLink_context:function(){return"Current selection"},
filterNumber_help:function(){return"Select the value or the range to be kept. "},
filterNumber_type:function(){return"Filter type"},
filterNumber_simple:function(){return"Solid filter"},
filterNumber_range:function(){return"Range filter"},
filterNumber_inclusive:function(){return"Included"},
filterNumber_exclusive:function(){return"Exluded"},
filterNumber_between_ii:function(a,b,c){return""+a+" between "+b+" (included) and "+c+" (included)"},
filterNumber_between_ie:function(a,b,c){return""+a+" between "+b+" (included) and "+c+" (excluded)"},
filterNumber_between_ei:function(a,b,c){return""+a+" between "+b+" (excluded) and "+c+" (included)"},
filterNumber_between_ee:function(a,b,c){return""+a+" between "+b+" (excluded) and "+c+" (excluded)"},
filterNumber_value:function(){return"Value"},
filterNumber_operator:function(){return"Operator"},
filterNumber_equalsTo:function(){return"Equal to"},
filterNumber_equalsTo2:function(a,b){return""+a+" equal to "+b},
filterNumber_lowerThan:function(){return"Less than"},
filterNumber_lowerThan_i:function(a,b){return""+a+" less than "+b+" (inclu)"},
filterNumber_lowerThan_e:function(a,b){return""+a+" less than "+b},
filterNumber_higherThan:function(){return"Greater than"},
filterNumber_higherThan_i:function(a,b){return""+a+" greater than "+b+" (included)"},
filterNumber_higherThan_e:function(a,b){return""+a+" greater than "+b},
filterString_help:function(){return"Define the filter to be applied to the string of characters."},
filterString_equalsTo:function(){return"Equal to"},
filterString_beginsWith:function(){return"Starts with"},
filterString_endsWith:function(){return"Ends with"},
filterString_contains:function(){return"Contains"},
filterString_caseSensitive:function(){return"Case sensitive"},
filterString_operator:function(){return"Operator"},
filterString_value:function(){return"Value"},
filterString_addPart:function(){return"Add an item"},
filterString_or:function(){return"OR"},
filterString_delete:function(){return"Delete"},
filterString_humanContains:function(a,b){return""+a+" contains "+b},
filterString_shortContains:function(a){return"Contains "+a},
filterString_humanEnds:function(a,b){return""+a+" ends with "+b},
filterString_shortEnds:function(a){return"Ends with "+a},
filterString_humanBegins:function(a,b){return""+a+" starts with "+b},
filterString_shortBegins:function(a){return"Starts with "+a},
filterString_humanEquals:function(a,b){return""+a+" equals "+b},
filterString_shortEquals:function(a){return""+a},
filterBool_help:function(){return"Select the value to be kept."},
filterBool_value:function(){return"Value"},
cart_cart:function(){return"Cart"},
cart_close:function(){return"Close"},
cart_closeAndEmpty:function(){return"Close and empty cart"},
cart_closeAndKeep:function(){return"Close and save cart"},
cart_cartDetailTitle:function(){return"Cart details"},
cart_cartExportTitle:function(){return"Export cart 1/2"},
cart_cartExportingTitle:function(){return"Export cart 2/2"},
cart_cartItems:function(){return"Cart items"},
cart_population:function(){return"Objects"},
cart_title:function(){return"Content"},
cart_saveTitle:function(){return"Save cart"},
cart_empty:function(){return"Empty cart"},
cart_emptyConfirm:function(){return"Do you really want to empty the cart?"},
cart_deleteElement:function(){return"Remove item from the cart"},
cart_disableElement:function(){return"Disable item"},
cart_enableElement:function(){return"Enable item"},
cart_measureLabel:function(a){return""+a+" :"},
cart_listType:function(){return"Action"},
cart_listActions:function(){return"Actions"},
cart_newList:function(){return"Export into a new list"},
cart_existingList:function(){return"Export into an existing list (if it exists, its content will be deleted)"},
cart_listLabel:function(){return"Label"},
cart_listList:function(){return"List"},
cart_listModel:function(){return"Template"},
cart_listChoose:function(){return"Select a list"},
cart_exportAvailableLists:function(){return"Available lists"},
cart_exportListTitle:function(){return"Select a list"},
cart_folderChoose:function(){return"Select a folder"},
cart_modelChose:function(){return"Select a template"},
cart_exportAvailableModels:function(){return"Export templates"},
cart_allData:function(){return"All data"},
cart_exportReminder_S:function(a){return"You are exporting from the schema: ["+a+"]"},
cart_exportReminderCount_IS:function(a,b){return"You are exporting "+a+" record(s) from the schema: ["+b+"]"},
cart_exportFolder:function(){return"Folder"},
cart_exportDefaultFolder:function(){return"(Default folder)"},
cart_exportAvailableFolders:function(){return"Available folders"},
cart_exportFolderTitle:function(){return"Select a folder"},
cart_export:function(){return"Export"},
cart_backExport:function(){return"Back"},
cart_beginExport:function(){return"Start"},
cart_count:function(){return"Count"},
cart_clickUpdateCount:function(){return"Click to update"},
cart_exportTypeLabel:function(){return"What would you like to export?"},
cart_exportWhere:function(){return"Where would you like to export these items to?"},
cart_exportWhat:function(){return"What data would you like to export?"},
cart_columnMode:function(){return"Export type"},
cart_columnModeHelper:function(){return"Export identifiers: saves a reference to the items in the cart.\nUse an export template: saves the value of the fields defined in the template to the list. Values are frozen at the time of export."},
cart_columnModeId:function(){return"Export identifiers"},
cart_columnModeModel:function(){return"Use an export template"},
cart_progressStopBtn:function(){return"Stop"},
cart_progressRestartBtn:function(){return"Restart"},
cart_progressInProgressMsg:function(){return"Exporting..."},
cart_progressSuccessMsg:function(){return"Export finished."},
cart_progressErrorMsg:function(){return"Export failed."},
cart_progressWarningMsg:function(){return"Export finished with warning(s)."},
cart_progressCancelMsg:function(){return"Export cancelled."},
dimensions_total:function(a){return""+a+" (Total)"}}
var crm_lead={
incomingLeadOverviewTitle:function(){return"Activities"},
outgoingLeadOverviewTitle:function(){return"Lead tracking"},
opportunityOverviewTitle:function(){return"Opportunities"},
landingPageOverviewTitle:function(){return"Landing pages"},
marketingHistoryTitle:function(){return"Marketing history"},
company:function(a){return"Company: "+a},
type:function(a){return"Type: "+a},
nature:function(a){return"Nature: "+a},
status:function(a){return"Status: "+a},
stage:function(a){return"Stage: "+a},
rating:function(a){return"Lead rating: "+a},
salesAccount:function(){return"Account: "},
expectedRevenue:function(a){return"Expected revenue: "+a},
latestActivity:function(a){return"(last activity "+a+")"},
latestCRMModification:function(a){return"(last CRM modification "+a+")"},
opportunityRunningSinceDesc:function(a){return"(since "+a+")"},
importIncomingLeads:function(){return"Import"},
opportunityStateAll:function(){return"All"},
opportunityStateInProgress:function(){return"In progress"},
opportunityStateClosedWon:function(){return"Closed - Won"},
opportunityStateClosedLost:function(){return"Closed - Lost"},
outgoingLeadStageAll:function(){return"All stages"},
outgoingLeadRatingAll:function(){return"All classes"},
outgoingLeadDestinationAll:function(){return"All destinations"},
outgoingLeadKpiScoreLabel:function(){return"Total score"},
outgoingLeadSortByRating:function(){return"By class"},
outgoingLeadSortByScoreDesc:function(){return"In descending order"},
homeTitle:function(){return"Neolane Leads"},
homeLeadAcquisition:function(){return"<strong>Lead</strong> acquisition"},
homeImportLeads:function(){return"Import activities or leads"},
homeImportLeadsDesc:function(){return"Import leads from a file, or other information representing lead activity."},
homeMiscellaneous:function(){return"Tools"},
homeCampaigns:function(){return"Marketing <strong>Campaigns</strong>"},
homeGlossary:function(){return"Glossary"},
homeGlossaryDesc:function(){return"Display the definition of terms specific to Neolane Leads."},
homeExplorer:function(){return"Explorer"},
homeExplorerDesc:function(){return"Browse all functions managed by the application."},
homeGoHome:function(){return"Standard home page"},
homeNewSeminar:function(){return"New seminar"},
homeNewSeminarDesc:function(){return"Create and organize a seminar."},
homeNewTradeshow:function(){return"New trade show"},
homeNewTradeshowDesc:function(){return"Create and organise a trade show."},
homeNewCampaign:function(){return"New campaign"},
homeNewCampaignDesc:function(){return"Launch the marketing campaign creation wizard."},
homeCampaignDashboard:function(){return"Campaign Dashboard"},
homeCampaignDashboardDesc:function(){return"Access current campaigns and operational reports."},
homeNewLandingPage:function(){return"New landing page"},
homeNewLandingPageDesc:function(){return"Launch the landing page creation wizard."},
homeLandingPageDashboard:function(){return"Landing page dashboard"},
homeLandingPageDashboardDesc:function(){return"Browse the available landing pages."},
homeMainReport:function(){return"Lead generation"},
homeMainReportDesc:function(){return"Display the overall lead generation report."},
homeGlobalReport:function(){return"Reports"},
homeGlobalReportDesc:function(){return"Access the various reports of the Neolane platform."},
incorrectParam_1:function(a){return"There is an error in the customization. Please contact your Neolane administrator. (Error: '"+a+"')"},
listModelUndefinedErr:function(){return"Import list template undefined"},
importWorkflowUndefinedErr:function(){return"Import workflow undefined"},
structureTitle:function(){return"Structure report"},
colNumber:function(){return"#"},
colTitle:function(){return"Column"},
comment:function(){return"Identification"},
colIdentified_2:function(a,b){return"'"+a+"' ("+b+")."},
colNotFound:function(){return"Ignored column."},
colMultiMatchInModel:function(a){return"Several fields match: "+a+"."},
listColMatchSameColInModel_3:function(a,b,c){return"Columns with title: '"+a+"' seem to match field: '"+b+"'("+c+")."},
mandatoryColsMissing:function(){return"Unable to identify the following columns: "},
unknownModelCol_1:function(a){return"The value '"+a+"' does not match a valid value in the model"},
addSynonymError_1:function(a){return"The addition of synonym '"+a+"' failed."},
synonymAlreadyDefined_2:function(a,b){return"Failed to add the '"+a+"' synonym as it is already defined and referenced in '"+b+"'."},
andLogicalOperator:function(){return"and"},
orLogicalOperator:function(){return"or"},
reconciliationRulesError:function(){return"Npn-compliant reconciliation rules."},
ignoredColumnsSummary_1:function(a){return"The following columns will be ignored: "+a},
simulationReportInformation:function(){return"Additional information"},
simulationReportOperatorAndOrgUnit:function(a){return"Operator: '"+a+"'"},
simulationImportListTitle:function(){return"--- Importing data into a work list ---"},
simulationTitle:function(){return"--- Starting the simulation ---"},
simulationInProgress:function(){return"Simulation in progress..."},
simulationError_1:function(a){return"An error occurred during the simulation. You can obtain further information from the workflow logs (ID: '"+a+"')."},
simulationDone:function(){return"Simulation successful."},
simulationReportTitle:function(){return"Import simulation"},
simulationReportTableTitle:function(){return"Result of file import simulation: "},
simulationReportFileExists:function(){return"This file has already been included in an import."},
simulationReportFileExistsScoring:function(){return"Reimporting these leads will invalidate the prior calculated score."},
simulationReportFileTitle:function(){return"Analysis of file"},
simulationReportFileLineCount:function(){return"Number of lines in the file: "},
simulationReportFileRejects:function(){return"Number of bad lines in the file: "},
simulationReportFileRejectsDesc:function(){return"Dowload the rejects file"},
simulationReportFileRejectsDownload:function(){return"Click here to download the file"},
simulationReportUpsertsTitle:function(){return"Creations / updates"},
simulationReportIncomingLead:function(){return"Activities created: "},
simulationReportContactsCreated:function(){return"Number of contacts created: "},
simulationReportContactsUpdated:function(){return"Number of contacts updated: "},
simulationReportCompanyCreated:function(){return"Companies created: "},
simulationReportIncomingLeadConcerned:function(){return"Number of individuals concerned: "},
simulationReportRejectsTitle:function(){return"Unusable activities"},
simulationReportBogus:function(){return"Activities identified as unusable: "},
simulationReportTest:function(){return"Activities identified as tests: "},
simulationReportNoFolder:function(){return"Activities without a folder: "},
simulationReportCompetitor:function(){return"Activities identified as competitive:"},
importTitle:function(){return"--- Data import execution ---"},
importInProgress:function(){return"Import in progress..."},
importError_1:function(a){return"An error occurred during the import. You can obtain further information from the workflow logs (ID: '"+a+"')."},
importDone:function(){return"Import successfully completed."},
scoringSummaryHeader:function(a){return"Lead generated by Neolane on "+a},
scoringSummaryScoredAs:function(a){return"Rated as "+a+"."},
scoringSummaryLastActivity:function(a){return"This lead includes activities up to "+a},
scoringSummaryDetailBelow:function(){return"Score details:"},
scoringSummaryTotal:function(){return"Total:"},
progressBehavioral:function(){return"Updating behavioral rule aggregates"},
progressOrgUnit:function(a){return"Processing entity '"+a+"'..."},
progressMain:function(a){return"Progress: "+a+"%"},
progressDone:function(a){return"Scoring and routing finished: "+a+" leads written"},
progressDoneWithError:function(){return"The job was interrupted because of too many errors. Please correct these before continuing."},
warnErrorWithTarget:function(a,b){return"An error occurred with recipient "+b+": "+a},
behavioralScoreCapped:function(a){return"The behavioral score was capped at "+a},
errorProcessingRule:function(a,b,c,d,e){return"Process failed: "+a+" (stage '"+b+"', entity '"+c+"', partition '"+d+"', rule '"+e+"')"},
errorProcessingPartition:function(a,b,c,d){return"Process failed: "+a+" (stage '"+b+"', entity '"+c+"', partition '"+d+"')"},
errorProcessingOrgUnit:function(a,b,c){return"Process failed: "+a+" (stage '"+b+"', entity '"+c+"')"},
errorProcessingStep:function(a,b){return"Process failed: "+a+" (stage '"+b+"')"},
targetSchemaLabel:function(){return"Scoring targets"},
resultSchemaLabel:function(){return"Scoring results"},
leadAggregateSchemaLabel:function(){return"Leads building aggregates"},
noPriorityRuleSet:function(a){return"The rule "+a+" does not have a priority rule set"},
priorityRuleNotFound:function(a,b){return"The priority rule identified by '"+b+"' could not be loaded while processing rule '"+a+"'. Please check that it is activated."},
warnSeveralPartitionKeys:function(a){return"Several partition keys are defined for schema '"+a+"'. Only the first key will be taken into account."},
errUnsupportedPartitionKeyType:function(a){return"The partition key type '"+a+"' is not supported. Please use a 'string' or 'long' key."},
errPartitionKeyInvalidXpath:function(a,b){return"The '"+a+"' partition key is not valid in the '"+b+"' schema."},
errPartitionKeyNotSQL:function(a,b){return"The '"+a+"' partition key in the '"+b+"' schema is not an SQL field. Please use an SQL attribute."},
errMissingPartitionKey:function(a){return"The partition key does not define a partition key for schema '"+a+"'. Please define one."},
errAggRuleNoSourceExpr:function(a){return"Aggregation rule '"+a+"' does not define the source expression of the aggregated field. Please define it."},
errPriorityRuleNoPriority:function(a){return"The '"+a+"' priority rule does not define a priority expression. Please correct this rule."},
errPriorityRuleEmptyExpr:function(a){return"The '"+a+"' priority rule defines an empty priority expression. Please correct this rule."},
errorListSchemaMismatch:function(a,b){return"The list has the schema: '"+a+"' instead of the expected schema '"+b+"'"},
errorUnknownBehavioralRuleType:function(a){return"Rule type unknown: '"+a+"'"},
warnIgnoreExportLead:function(a){return"The 'Export the lead' function is ignored for the '"+a+"' distribution rule because it defines an expression for the '@progressStatus' additional attribute."},
warnIgnoreQualifyLead:function(a){return"The 'Qualify the lead' function is ignored for the '"+a+"' distribution rule because it defines an expression for the '@toSend' additional attribute."},
landingPageCannotDecryptDes:function(){return"Parameter error (DES)."},
landingPageNotFound:function(){return"Unable to find the requested landing page."},
labelActivities:function(){return"Total number of activities"},
labelUsableActivities:function(){return"Total number of usable activities"},
labelLeads:function(){return"Number of generated leads"},
labelQualifiedLeads:function(){return"Number of leads qualified by marketing"},
labelRoutedLeads:function(){return"Number of routed leads"},
labelAcceptedLeads:function(){return"Number of accepted leads"},
labelAbandonedLeads:function(){return"Number of abandoned leads"},
labelRejectedLeads:function(){return"Number of rejected leads"},
labelConvertedLeads:function(){return"Number of converted leads"},
labelOpportunities:function(){return"Number of opportunities generated"},
labelOrders:function(){return"Number of opportunities won"},
labelLostOpportunities:function(){return"Number of opportunities lost"},
labelAvgQualificationTime:function(){return"Average qualification time"},
labelAvgSalesTime:function(){return"Average sales time"},
labelAvgConversionTime:function(){return"Average conversion time"},
labelGeneratedRevenue:function(){return"Generated revenue"},
labelAssessedRevenue:function(){return"Estimated revenue"},
labelOperation:function(){return"campaign"},
labelLandingPage:function(){return"landing page"},
labelWebApp:function(){return"web application"},
labelFileImport:function(){return"file import"},
labelDelivery:function(){return"delivery"},
labelOrgUnit:function(){return"organizational entity"},
labelProgram:function(){return"program"},
labelGlobalAgg:function(a){return"Lead indicators per "+a},
labelRollingAgg:function(a){return"Rolling lead indicators per "+a},
labelPerQuarterAgg:function(a){return"Lead indicators per "+a+" per quarter"},
labelActualCost:function(){return"Actual cost"},
labelROI:function(){return"Return on Investment"},
labelROIRate:function(){return"Return on investment rate"},
labelConversionRate:function(){return"Conversion rate"},
labelQualificationRate:function(){return"Qualification rate"},
labelOrderRate:function(){return"Order rate"},
indicatorSchemaLabel:function(){return"Targeting dimension"},
primaryKeyLabel:function(){return"Primary key"},
yearLabel:function(){return"Year"},
quarterLabel:function(){return"Quarter"},
welcomeLabel:function(a){return"Today <b>"+a+"</b>:"},
proxyCheckDefaultWebAppFolder_1:function(a){return"Please make sure the '"+a+"' folder is present."},
proxyNewWebAppFolderForOrgUnit_2:function(a,b){return"--- Folder '"+a+" ("+b+")' created. ---"},
proxyLandingPagesToProcess_1:function(a){return"Landing pages to process: '"+a+"'."},
proxyWebAppCreated_1:function(a){return"Web application '"+a+"' processed."},
proxyLandingPagesBadProxy_1:function(a){return"The proxy isn't properly configured for '"+a+"'."}}
var crm_embeddedPage={
ERR_AUTH_FAILED_UNK_USER:function(){return"Authentication failed. User unknown."},
ERR_NO_EXTACCOUNT_1:function(a){return"Unable to find external account '"+a+"'."},
ERR_CANNOT_FIND_REMOTE_OBJECT_2:function(a,b){return"Unable to find object '"+a+"' of remote identifier '"+b+"' in Neolane. It may not have been synchronized yet."},
ERR_REMOTE_ID_AND_OBJECT_MISSING:function(){return"The query must define the object and remote ID."},
TOO_MANY_CANDIDATE_2:function(a,b){return"There are "+a+" different entries with the same identifier, in "+b+" different account(s)."},
ERROR:function(){return"Error"},
ERR_DATABASE:function(){return"Error while querying the database."},
MARKETING_HISTORY_1:function(a){return"Marketing history of "+a},
MARKETING_HISTORY:function(){return"Marketing history"},
ERR_NOT_CONTACT_NOR_LEAD_1:function(a){return"'"+a+"' is neither a contact nor a lead."},
ERR_NO_INFORMATION:function(){return"No information."},
NOT_YET_PROCESSED_CONTACT:function(){return"This contact has not yet been processed"},
NOT_YET_PROCESSED_LEAD:function(){return"This Lead has not yet been processed"},
REQUEST_TAKEN_INTO_ACCOUNT:function(){return"Your request has been registered"},
LAST_ACTIVITY:function(){return"Last alive"},
NO_DATA:function(){return"No data"},
MODIFY:function(){return"Modify"},
CANCEL:function(){return"Cancel"},
CHECKED:function(){return"Checked"},
NOT_CHECKED:function(){return"Not checked"},
DATE:function(){return"Date"},
EVENT:function(){return"Event"},
DETAIL:function(){return"Details"},
SHOW_LOGS:function(){return"Display the tracking logs"},
EMAIL:function(){return"Email"},
PHONE:function(){return"Phone"},
MOBILE:function(){return"Mobile"},
POSTAL_MAIL:function(){return"Direct Mail"},
FAX:function(){return"Fax"},
WEB:function(){return"Web"},
ALL_CHANNELS:function(){return"All channels"},
NOT_APPLICABLE:function(){return"Not applicable"},
IGNORED:function(){return"Ignored"},
SENT:function(){return"Sent"},
FAILED:function(){return"Failed"},
TAKEN_INTO_ACCOUNT:function(){return"Taken into account by the service provider"},
RECEIVED:function(){return"Received on mobile"},
PENDING:function(){return"Pending"},
CANCELLED:function(){return"Delivery canceled"},
PREPARED:function(){return"Prepared"},
HANDEDOVER:function(){return"Sent to the service provider"},
UNDEFINED:function(){return"Not defined"},
UNKNOWNUSER:function(){return"User unknown"},
INVALIDDOMAIN:function(){return"Invalid domain"},
UNREACHABLE:function(){return"Unreachable"},
DISABLED:function(){return"Account disabled"},
MAILBOXFULL:function(){return"Mailbox full"},
NOTCONNECTED:function(){return"Not connected"},
ADDRESSUNDEFINED:function(){return"Address not specified"},
BLACKLISTED:function(){return"Blacklisted address"},
QUARANTINE:function(){return"Address in quarantine"},
DUPLICATE:function(){return"Double"},
TYPOLOGYRULE:function(){return"Excluded by a SQL rule"},
BUSINESSRANKING:function(){return"Excluded after arbitration"},
QUALITY:function(){return"Bad-quality address"},
UNCHECKED:function(){return"Unqualified address"},
REJECTED:function(){return"Rejected"},
ERRORIGNORED:function(){return"Error ignored"},
CLICK_EMAIL:function(){return"Email clicks: "},
OPEN:function(){return"Open"},
OPEN_LABEL:function(){return"Open: "},
TRANSACT:function(){return"Transaction"},
MIRRORPAGE:function(){return"Mirror page"},
UNSUBSCRIPTION:function(){return"Unsubscription"},
SUBSCRIPTION:function(){return"Subscription"},
YES:function(){return"Yes"},
NO:function(){return"No"},
OPTOUT:function(){return"No longer contact this recipient"},
OPTOUTFAX:function(){return"No longer contact this recipient by fax"},
OPTOUTEMAIL:function(){return"No longer contact this recipient by email"},
OPTOUTMOBILE:function(){return"No longer contact this recipient by SMS/MMS"},
OPTOUTPHONE:function(){return"No longer contact this recipient by telephone"},
OPTOUTPOSTALMAIL:function(){return"No longer contact this recipient by direct mail"},
OPTIN:function(){return"Contact this recipient"},
OPTINFAX:function(){return"Contact this recipient by fax"},
OPTINEMAIL:function(){return"Contact this recipient by email"},
OPTINMOBILE:function(){return"Contact this recipient by SMS/MMS"},
OPTINPHONE:function(){return"Contact this recipient by telephone"},
OPTINPOSTALMAIL:function(){return"Contact this recipient by direct mail"},
MY_OPTOUT:function(){return"No longer contact me"},
MY_OPTOUTFAX:function(){return"No longer contact me by fax"},
MY_OPTOUTEMAIL:function(){return"No longer contact me by email"},
MY_OPTOUTMOBILE:function(){return"No longer contact me by SMS/MMS"},
MY_OPTOUTPHONE:function(){return"No longer contact me by phone"},
MY_OPTOUTPOSTALMAIL:function(){return"No longer contact me by direct mail"},
MARKETING_SUBSCRIPTION:function(){return"Registration management"},
HANDLE_SUBSCRIPTION:function(){return"Subscription management"},
HANDLE_CHANNEL:function(){return"Communication channels management"},
TIMESPAN:function(){return"Period: "},
STATE:function(){return"State: "},
OPERATIONTYPE:function(){return"Type: "},
CHANNEL:function(){return"Main channel: "},
OPERATION_OWNER:function(){return"Assigned to: "},
OPERATION_NATURE:function(){return"Nature: "},
STARTED:function(){return"Started"},
FINISHED:function(){return"Finished"},
CANCELPENDING:function(){return"Cancel in progress"},
CANCELED:function(){return"Canceled"},
EVALUATION:function(){return"Evaluation"},
EDITING:function(){return"Being edited"},
UNIQUE:function(){return"Unique"},
RECURRENT:function(){return"Recurring"},
PERIODIC:function(){return"Periodic"},
CAMPAIGN:function(){return"Campaign"},
EVENTREGISTRATION:function(){return"Registration to an event"},
DOCDOWNLOAD:function(){return"Document download"},
REGISTRATION:function(){return"Registration"},
DESCRIPTION:function(){return"Description: "},
LANDING_PAGE:function(){return"Landing page: "},
FIRSTNAME:function(){return"First name: "},
LASTNAME:function(){return"Last name: "},
COMPANY:function(){return"Company: "},
EMAIL_ADDRESS:function(){return"Email: "},
BUSINESSPHONE:function(){return"Work telephone: "},
MOBILEPHONE:function(){return"Mobile telephone: "},
DEPARTEMENT:function(){return"Department: "},
PARTICIPATIONDATE:function(){return"Visit date: "},
PARTICIPATIONDURATION:function(){return"Visit duration: "},
CONNECTIONONTIME:function(){return"Connected at time: "},
USEDCHAT:function(){return"Used the chat: "},
QUESTIONSASKED:function(){return"Number of questions asked: "},
LABEL:function(){return"Label"},
URL:function(){return"Document preview"},
SERVICE:function(){return"Service"},
TYPE:function(){return"Type"},
OWNER:function(){return"Manager: "},
OPPORTUNITY:function(){return"Opportunity"},
OPPORTUNITY_WON:function(){return"Opportunity won"},
OPPORTUNITY_LOST:function(){return"Opportunity lost"},
OPPORTUNITY_NAME:function(){return"Opportunity name: "},
OPPORTUNITY_STATUS:function(){return"Opportunity status: "},
EXPECTEDREVENUE:function(){return"Expected revenue: "},
OPPORTUNITYSTATUS_LOST:function(){return"Lost"},
OPPORTUNITYSTATUS_WON:function(){return"Won"},
OPPORTUNITYSTATUS_INPROGRESS:function(){return"In progress"},
STATUS:function(){return"State"},
STATUS_LABEL:function(){return"State: "},
ACCOUNT_NAME:function(){return"Customer account name: "},
CRMSTATUS:function(){return"Status in the CRM"},
ERRORREASON:function(){return"Error state"},
ABANDONREASON:function(){return"Reason for abandoning: "},
BUDGET:function(){return"Budget: "},
AUTHORITY:function(){return"Authority: "},
NEED:function(){return"Need: "},
TIMEFRAME:function(){return"Timeframe: "},
TOTALSCORE:function(){return"Total score: "},
BANTSCORE:function(){return"BANT score: "},
DEMOGRAPHICSCORE:function(){return"Demographic score: "},
BEHAVIORALSCORE:function(){return"Behavioral score: "},
OUTGOINGLEAD:function(){return"Export"},
LEAD_SENT_TO_CRM:function(){return"Lead sent"},
LEAD_SENT_TO_CRM_1:function(a){return"Lead sent to "+a},
WEB_TRACKING:function(){return"Web tracking"},
HIDE_DETAILS:function(){return"Hide details"},
SHOW_DETAILS:function(){return"Show details"},
FOLDER_LABEL:function(){return"Folder"},
COMPUTED_AT:function(){return"Computed on: "},
REFRESH:function(){return"Refresh information"},
ADDRESS:function(){return"Address"},
WEB_SITE:function(){return"Web site: "},
LEAD_STAGE:function(){return"Stage: "},
LEAD_RATING:function(){return"Lead rating: "},
JOB_TITLE:function(){return"Job title: "},
NUMBER_OF_EMPLOYEE:function(){return"Number of employees: "},
ANNUAL_REVENUE:function(){return"Annual revenue: "},
INDUSTRY:function(){return"line of business: "},
OTHER_ACTIVE_LEADS:function(){return"Other active lead(s): "},
ORGUNIT:function(){return"Organizational entity"},
STARTDATE:function(){return"Start date: "},
ENDDATE:function(){return"End date: "},
CREATION_DATE:function(){return"Creation date: "},
ABANDON_DATE:function(){return"Abandon date: "},
ACCEPTANCE_DATE:function(){return"Acceptance date: "},
SENDING_TO_CRM_DATE:function(){return"CRM routing date: "},
CONVERTION_DATE:function(){return"Conversion date: "},
GENERATION_DATE:function(){return"Generation date: "},
QUALIFICATION_DATE:function(){return"Qualification date: "},
REJECTION_DATE:function(){return"Rejection date: "},
LAST_ACTIVITY_DATE:function(){return"Last activity date: "},
CURRENTLY_LOADING:function(){return"Loading..."},
DELIVERY_LABEL:function(){return"Delivery:"},
OPERATION_LABEL:function(){return"Campaign:"},
LIST_LABEL:function(){return"List:"},
SUM_DATA_UPDATE:function(){return"Update data"},
SUM_IMPORT_LIST:function(){return"Data imported from the list"},
SUM_FROM_CRM_1:function(a){return"Data imported from "+a},
SUM_INVITED_1:function(a){return"Invited to the event "+a},
SUM_REGITERED_1:function(a){return"Registered for the event "+a},
SUM_CONFIRMED_1:function(a){return"Confirmed registration for the event "+a},
SUM_ATTENDED_1:function(a){return"Attended the event "+a},
SUM_EVENT_ATTEND_2:function(a,b){return"Took part in the event "+a+" "+b},
SUM_ACCEPTANCE_2:function(a,b){return"Approved by "+a+" from "+b},
SUM_CONVERSION_2:function(a,b){return"Converted by "+a+" from "+b},
SUM_REJECTION_2:function(a,b){return"Rejected by "+a+" from "+b},
SUM_ABANDON_2:function(a,b){return"Abandoned by "+a+" from "+b},
EVT_LEAD_DATA:function(){return"Update"},
EVT_LEAD_EVENT:function(){return"Marketing event"},
EVT_LEAD_DOCDOWNLOAD:function(){return"Document request"},
EVT_LEAD_SUBSCRIPTION:function(){return"Subscription"},
EVT_LEAD_UNSUBSCRIPTION:function(){return"Unsubscription"},
EVT_LEAD_LANDINGPAGE:function(){return"Landing page"},
EVT_LEAD_ACCEPTANCE:function(){return"Approval"},
EVT_LEAD_CONVERSION:function(){return"Conversion"},
EVT_LEAD_REJECTION:function(){return"Reject"},
EVT_LEAD_ABANDON:function(){return"Abandonment"},
EVT_LEAD_BANT:function(){return"BANT qualification"},
EVT_LEAD_OTHER:function(){return"Other"},
TAB_OVERVIEW:function(){return"Overview"},
TAB_EVERYTHING:function(){return"All"},
TAB_ACTIVITIES:function(){return"Activities"},
TAB_LEADS:function(){return"Leads"},
TAB_OPPORTUNITIES:function(){return"Opportunities"},
TAB_ACTIONS:function(){return"Actions"},
STAGE_UNQUALIFIED:function(){return"Unqualified"},
STAGE_MARKETINGQUALIFIED:function(){return"Qualified"},
STAGE_OPPORTUNITY:function(){return"Opportunity"},
STAGE_WON:function(){return"Won"}}
;(function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i=this.options[t];n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r=r||{};if(n.originalEvent)for(var s=e.event.props.length,o;s;)o=e.event.props[--s],n[o]=n.originalEvent[o];return this.element.trigger(n,r),!(e.isFunction(i)&&i.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s=e.fn.position,o=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return s.apply(this,arguments);t=e.extend({},t);var o=e(t.of),u=o[0],a=(t.collision||"flip").split(" "),f=t.offset?t.offset.split(" "):[0,0],l,c,h;return u.nodeType===9?(l=o.width(),c=o.height(),h={top:0,left:0}):u.setTimeout?(l=o.width(),c=o.height(),h={top:o.scrollTop(),left:o.scrollLeft()}):u.preventDefault?(t.at="left top",l=c=0,h={top:t.of.pageY,left:t.of.pageX}):(l=o.outerWidth(),c=o.outerHeight(),h=o.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),a.length===1&&(a[1]=a[0]),f[0]=parseInt(f[0],10)||0,f.length===1&&(f[1]=f[0]),f[1]=parseInt(f[1],10)||0,t.at[0]==="right"?h.left+=l:t.at[0]===i&&(h.left+=l/2),t.at[1]==="bottom"?h.top+=c:t.at[1]===i&&(h.top+=c/2),h.left+=f[0],h.top+=f[1],this.each(function(){var n=e(this),r=n.outerWidth(),s=n.outerHeight(),o=parseInt(e.curCSS(this,"marginLeft",!0))||0,u=parseInt(e.curCSS(this,"marginTop",!0))||0,p=r+o+(parseInt(e.curCSS(this,"marginRight",!0))||0),d=s+u+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},h),m;t.my[0]==="right"?v.left-=r:t.my[0]===i&&(v.left-=r/2),t.my[1]==="bottom"?v.top-=s:t.my[1]===i&&(v.top-=s/2),v.left=Math.round(v.left),v.top=Math.round(v.top),m={left:v.left-o,top:v.top-u},e.each(["left","top"],function(n,i){e.ui.position[a[n]]&&e.ui.position[a[n]][i](v,{targetWidth:l,targetHeight:c,elemWidth:r,elemHeight:s,collisionPosition:m,collisionWidth:p,collisionHeight:d,offset:f,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(v,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,a=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+a:s>0?o+u+a:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,a=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+a:s>0?o+u+a:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):o.call(this)})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.16"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.16"}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),this.current&&this.current.options.iframeOffset&&(r[o].element.get(0).ownerDocument&&r[o].element.get(0).ownerDocument.parentWindow&&r[o].element.get(0).ownerDocument.parentWindow.pageYOffset?(r[o].offset.top-=r[o].element.get(0).ownerDocument.parentWindow.pageYOffset,r[o].offset.left-=r[o].element.get(0).ownerDocument.parentWindow.pageXOffset):(r[o].offset.top-=r[o].element.parents().find("html,body").scrollTop(),r[o].offset.left-=r[o].element.parents().find("html,body").scrollLeft()),r[o].offset.top+=this.current.options.iframeOffset.top,r[o].offset.left+=this.current.options.iframeOffset.left),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=r||this._drop.call(this,n)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(s)&&u.css({zIndex:++n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),e.browser.opera&&/relative/.test(s.css("position"))&&s.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var c=l.apply(this,[t,a,f]),h=e.browser.msie&&e.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)c=this._updateRatio(c,t);return c=this._respectSize(c,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.16"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,i){e(t).each(function(){var t=e(this),s=e(this).data("resizable-alsoresize"),o={},a=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(s[t]||0)+(u[t]||0);n&&n>=0&&(o[t]=n||null)}),e.browser.opera&&/relative/.test(t.css("position"))&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"})),t.css(o)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.css({position:t.data("resizable-alsoresize").position})})};r._revertToRelativePosition&&(r._revertToRelativePosition=!1,typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)),e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/i.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*i.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&(t.metaKey&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.16"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var r=null,i=this,s=e(t.target).parents().each(function(){if(e.data(this,"sortable-item")==i)return r=e(this),!1});e.data(t.target,"sortable-item")==i&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){var o=!1;e(this.options.handle,r).find("*").andSelf().each(function(){this==t.target&&(o=!0)});if(!o)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],"sortable");f&&f!=this&&!f.options.disabled&&i.push([e.isFunction(f.options.items)?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],"sortable");f&&f!=this&&!f.options.disabled&&(i.push([e.isFunction(f.options.items)?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f))}}for(var o=i.length-1;o>=0;o--){var l=i[o][1],c=i[o][0];for(var a=0,h=c.length;a<h;a++){var p=e(c[a]);p.data("sortable-item",l),n.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.ui.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.items[a][this.containers[r].floating?"left":"top"];Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.16"})}(jQuery),function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var r=t.element.find("a").filter(n.navigationFilter).eq(0);if(r.length){var i=r.closest(".ui-accordion-header");i.length?t.active=i:t.active=r.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t=="active"&&this.activate(n),t=="icons"&&(this._destroyIcons(),n&&this._createIcons()),t=="disabled"&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return s?(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),!1):!0},resize:function(){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).height("").height())}).height(n));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return;if(!t.target){if(!r.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);this._toggle(o,i,s);return}var u=e(t.currentTarget||n),a=u[0]===this.active[0];r.active=r.collapsible&&a?!1:this.headers.index(u);if(this.running||!r.collapsible&&a)return;var f=this.active,o=u.next(),i=this.active.next(),s={options:r,newHeader:a&&r.collapsible?e([]):u,oldHeader:this.active,newContent:a&&r.collapsible?e([]):o,oldContent:i},l=this.headers.index(this.active[0])>this.headers.index(u[0]);this.active=a?e([]):u,this._toggle(o,i,s,a,l),f.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),a||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));return},_toggle:function(t,n,r,i,s){var o=this,u=o.options;o.toShow=t,o.toHide=n,o.data=r;var a=function(){if(!o)return;return o._completed.apply(o,arguments)};o._trigger("changestart",null,o.data),o.running=n.size()===0?t.size():n.size();if(u.animated){var f={};u.collapsible&&i?f={toShow:e([]),toHide:n,complete:a,down:s,autoHeight:u.autoHeight||u.fillSpace}:f={toShow:t,toHide:n,complete:a,down:s,autoHeight:u.autoHeight||u.fillSpace},u.proxied||(u.proxied=u.animated),u.proxiedDuration||(u.proxiedDuration=u.duration),u.animated=e.isFunction(u.proxied)?u.proxied(f):u.proxied,u.duration=e.isFunction(u.proxiedDuration)?u.proxiedDuration(f):u.proxiedDuration;var l=e.ui.accordion.animations,c=u.duration,h=u.animated;h&&!l[h]&&!e.easing[h]&&(h="slide"),l[h]||(l[h]=function(e){this.slide(e,{easing:h,duration:c||700})}),l[h](f)}else u.collapsible&&i?t.toggle():(n.hide(),t.show()),a(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.16",animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);return}var r=t.toShow.css("overflow"),i=0,s={},o={},u=["height","paddingTop","paddingBottom"],a,f=t.toShow;a=f[0].style.width,f.width(parseInt(f.parent().width(),10)-parseInt(f.css("paddingLeft"),10)-parseInt(f.css("paddingRight"),10)-(parseInt(f.css("borderLeftWidth"),10)||0)-(parseInt(f.css("borderRightWidth"),10)||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:a,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._move("previous",n),n.preventDefault();break;case i.DOWN:t._move("next",n),n.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,i;e.isArray(this.options.source)?(r=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(i=this.options.source,this.source=function(r,s){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:r,dataType:"json",autocompleteRequest:++n,success:function(e,t){this.autocompleteRequest===n&&s(e)},error:function(){this.autocompleteRequest===n&&s([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.propAttr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.buttonElement.html()),this.element.is(":disabled")&&(u.disabled=!0),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click.button",function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(h)}).bind("blur.button",function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change.button",function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup.button",function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,e(document).one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(u.disabled)return!1;(t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments);if(t==="disabled"){n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){t==="disabled"&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(t?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},s=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,r=t.options,i=r.title||"&#160;",s=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),a=(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),f=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){f.addClass("ui-state-hover")},function(){f.removeClass("ui-state-hover")}).focus(function(){f.addClass("ui-state-focus")}).blur(function(){f.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a),l=(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(f),c=e("<span></span>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(a);e.isFunction(r.beforeclose)&&!e.isFunction(r.beforeClose)&&(r.beforeClose=r.beforeclose),a.find("*").add(a).disableSelection(),r.draggable&&e.fn.draggable&&t._makeDraggable(),r.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!1===n._trigger("beforeClose",t))return;return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):(n.uiDialog.hide(),n._trigger("close",t)),e.ui.dialog.overlay.resize(),n.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),n},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?r._trigger("focus",n):(i.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=i.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",n),r)},open:function(){if(this._isOpen)return;var t=this,n=t.options,r=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),r.show(n.show),t.moveToTop(!0),n.modal&&r.bind("keypress.ui-dialog",function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),e(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);n.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e('<button type="button"></button>').click(function(){r.click.apply(n.element[0],arguments)}).appendTo(o);e.each(r,function(e,t){if(e==="click")return;e in s?i[e](t):i.attr(e,t)}),e.fn.button&&i.button()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){function s(e){return{position:e.position,offset:e.offset}}var t=this,n=t.options,r=e(document),i;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,o){i=n.height==="auto"?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),t._trigger("dragStart",r,s(o))},drag:function(e,n){t._trigger("drag",e,s(n))},stop:function(o,u){n.position=[u.position.left-r.scrollLeft(),u.position.top-r.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),t._trigger("dragStop",o,s(u)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=r.options,s=r.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:r._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i=this,s=i.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(r);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(n+r);break;case"disabled":r?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!r&&s.draggable("destroy"),!o&&r&&i._makeDraggable();break;case"position":i._position(r);break;case"resizable":var u=s.is(":data(resizable)");u&&!r&&s.resizable("destroy"),u&&typeof r=="string"&&s.resizable("option","handles",r),!u&&r!==!1&&i._makeResizable(r);break;case"title":e(".ui-dialog-title",i.uiDialogTitlebar).html(""+(r||"&#160;"))}e.Widget.prototype._setOption.apply(i,arguments)},_size:function(){var t=this.options,n,r,i=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),n=this.uiDialog.css({height:"auto",width:t.width}).height(),r=Math.max(0,t.minHeight-n);if(t.height==="auto")if(e.support.minHeight)this.element.css({minHeight:r,height:"auto"});else{this.uiDialog.show();var s=this.element.css("height","auto").height();i||this.uiDialog.hide(),this.element.height(Math.max(s,r))}else this.element.height(Math.max(t.height-n,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.16",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);n!=-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var a=i.length;a<o;a+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=!0,s=e(this).data("index.ui-slider-handle"),o,u,a,f;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:i=!1;if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),o=t._start(r,s);if(o===!1)return}}f=t.options.step,t.options.values&&t.options.values.length?u=a=t.values(s):u=a=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:a=t._valueMin();break;case e.ui.keyCode.END:a=t._valueMax();break;case e.ui.keyCode.PAGE_UP:a=t._trimAlignValue(u+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:a=t._trimAlignValue(u-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(u===t._valueMax())return;a=t._trimAlignValue(u+f);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(u===t._valueMin())return;a=t._trimAlignValue(u-f)}return t._slide(r,s,a),i}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,a,f,l,c;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),a=t)}),n.range===!0&&this.values(1)===n.min&&(a+=1,o=e(this.handles[a])),f=this._start(t,a),f===!1?!1:(this._mouseSliding=!0,u._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,a,f,l;this.options.values&&this.options.values.length?this.handles.each(function(t,a){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(a=this.value(),f=this._valueMin(),l=this._valueMax(),s=l!==f?(a-f)/(l-f)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.16"})}(jQuery),function(e,n){function s(){return++r}function o(){return++i}var r=0,i=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+s()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+o());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function h(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var r=this,i=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var o=e(n).attr("href"),u=o.split("#")[0],a;u&&(u===location.toString().split("#")[0]||(a=e("base")[0])&&u===a.href)&&(o=n.hash,n.href=o);if(s.test(o))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(o)));else if(o&&o!=="#"){e.data(n,"href.tabs",o),e.data(n,"load.tabs",o.replace(/#.*$/,""));var f=r._tabId(n);n.href="#"+f;var l=r.element.find("#"+f);l.length||(l=e(i.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),l.data("destroy.tabs",!0)),r.panels=r.panels.add(l)}else i.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),i.selected===n?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return i.selected=e,!1}),typeof i.selected!="number"&&i.cookie&&(i.selected=parseInt(r._cookie(),10)),typeof i.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),i.selected=i.selected||(this.lis.length?0:-1)):i.selected===null&&(i.selected=-1),i.selected=i.selected>=0&&this.anchors[i.selected]||i.selected<0?i.selected:0,i.disabled=e.unique(i.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return r.lis.index(e)}))).sort(),e.inArray(i.selected,i.disabled)!=-1&&i.disabled.splice(e.inArray(i.selected,i.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),i.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(i.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[i.selected],r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash))[0]))}),this.load(i.selected)),e(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[i.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),i.cookie&&this._cookie(i.selected,i.cookie);for(var o=0,u;u=this.lis[o];o++)e(u)[e.inArray(o,i.disabled)!=-1&&!e(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");i.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(i.event!=="mouseover"){var a=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},f=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){a("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){f("hover",e(this))}),this.anchors.bind("focus.tabs",function(){a("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){f("focus",e(this).closest("li"))})}var l,c;i.fx&&(e.isArray(i.fx)?(l=i.fx[0],c=i.fx[1]):l=c=i.fx);var p=c?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(c,c.duration||"normal",function(){h(n,c),r._trigger("show",null,r._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,n[0]))},d=l?function(e,t){t.animate(l,l.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),h(t,l),r.element.dequeue("tabs")})}:function(e,t,n){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(i.event+".tabs",function(){var t=this,n=e(t).closest("li"),s=r.panels.filter(":not(.ui-tabs-hide)"),o=r.element.find(r._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!i.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,o[0]))===!1)return this.blur(),!1;i.selected=r.anchors.index(this),r.abort();if(i.collapsible){if(n.hasClass("ui-tabs-selected"))return i.selected=-1,i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){d(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),this.blur(),!1}i.cookie&&r._cookie(i.selected,i.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&r.element.queue("tabs",function(){d(t,s)}),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,r,i){i===n&&(i=this.anchors.length);var s=this,o=this.options,u=e(o.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,r)),a=t.indexOf("#")?this._tabId(e("a",u)[0]):t.replace("#","");u.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=s.element.find("#"+a);return f.length||(f=e(o.panelTemplate).attr("id",a).data("destroy.tabs",!0)),f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(u.appendTo(this.list),f.appendTo(this.list[0].parentNode)):(u.insertBefore(this.lis[i]),f.insertBefore(this.panels[i])),o.disabled=e.map(o.disabled,function(e,t){return e>=i?++e:e}),this._tabify(),this.anchors.length==1&&(o.selected=0,u.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[0],s.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();return r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},enable:function(t){t=this._getIndex(t);var n=this.options;if(e.inArray(t,n.disabled)==-1)return;return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this,n=this.options;return e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){e=this._getIndex(e);if(e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}return this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){n.element.find(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(e,s,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.error(e,s,t,i)}catch(o){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.16"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,n){var r=this,i=this.options,s=r._rotate||(r._rotate=function(t){clearTimeout(r.rotation),r.rotation=setTimeout(function(){var e=i.selected;r.select(++e<r.anchors.length?e:0)},e),t&&t.stopPropagation()}),o=r._unrotate||(r._unrotate=n?function(e){t=i.selected,s()}:function(e){e.clientX&&r.rotate(null)});return e?(this.element.bind("tabsshow",s),this.anchors.bind(i.event+".tabs",o),s()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",s),this.anchors.unbind(i.event+".tabs",o),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var n=$(e.target).closest(t);if(!n.length)return;n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(n){var r=$(n.target).closest(t);if($.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||!r.length)return;r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),r.addClass("ui-state-hover"),r.hasClass("ui-datepicker-prev")&&r.addClass("ui-datepicker-prev-hover"),r.hasClass("ui-datepicker-next")&&r.addClass("ui-datepicker-next-hover")})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}function isArray(e){return e&&($.browser.safari&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.16"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._datepickerShowing&&$.datepicker._triggerOnClose($.datepicker._curInst),$.datepicker._curInst.dpDiv.stop(!0,!0));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i}),i&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var n=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e));var r=e.dpDiv.find("iframe.ui-datepicker-cover");!r.length||r.css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),s=i[1],o=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(i[0]!=1||i[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var u=e.yearshtml;setTimeout(function(){u===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),u=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+$(document).scrollLeft(),a=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_triggerOnClose:function(e){var t=this._get(e,"onClose");t&&t.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e])},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t),this._curInst=null};$.effects&&$.effects[n]?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),$.datepicker._triggerOnClose(t),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target);t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length)throw"Extra/unparsed characters found in date: "+t.substring(g);a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var w=this._getDaysInMonth(a,f-1);if(l<=w)break;f++,l-=w}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', -"+a+", 'M');\""+' title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', +"+a+", 'M');\""+' title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+e.id+"');\""+">"+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+e.id+"',"+G.getMonth()+","+G.getFullYear()+', this);return false;"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" "+">";for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" "+">";for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.16",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){t==="value"&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.16"})}(jQuery),jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=e.curCSS(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}function u(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},n,r;if(e&&e.length&&e[0]&&e[e[0]]){var i=e.length;while(i--)n=e[i],typeof e[n]=="string"&&(r=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),t[r]=e[n])}else for(n in e)typeof e[n]=="string"&&(t[n]=e[n]);return t}function a(t){var n,r;for(n in t)r=t[n],(r==null||e.isFunction(r)||n in o||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(r)))&&delete t[n];return t}function f(e,t){var n={_:0},r;for(r in t)e[r]!=t[r]&&(n[r]=t[r]);return n}function l(t,n,r,i){typeof t=="object"&&(i=n,r=null,n=t,t=n.effect),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n=n||{},r=r||n.duration,r=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,i=i||n.complete,[t,n,r,i]}function c(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects[t]?!0:!1}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=n(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,r,i){return e.isFunction(r)&&(i=r,r=null),this.queue(function(){var o=e(this),l=o.attr("style")||" ",c=a(u.call(this)),h,p=o.attr("class");e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),h=a(u.call(this)),o.attr("class",p),o.animate(f(c,h),{queue:!1,duration:n,easing:r,complete:function(){e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),typeof o.attr("style")=="object"?(o.attr("style").cssText="",o.attr("style").cssText=l):o.attr("style",l),i&&i.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.apply(this,[r?{add:n}:{remove:n},i,s,o]):this._toggleClass(n,r):e.effects.animateClass.apply(this,[{toggle:n},r,i,s])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}}),e.extend(e.effects,{version:"1.8.16",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;return t.wrap(r),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(n).show()},removeWrapper:function(t){var n,r=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n):t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(i[n]=unit[0]*r+unit[1])}),i}}),e.fn.extend({effect:function(t,n,r,i){var s=l.apply(this,arguments),o={options:s[1],duration:s[2],callback:s[3]},u=o.options.mode,a=e.effects[t];return e.fx.off||!a?u?this[u](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):a.call(this,o)},_show:e.fn.show,show:function(e){if(c(e))return this._show.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(c(e))return this._hide.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(c(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=l.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*(n/=s)*n*((o+1)*n-o)+r},easeOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*((n=n/s-1)*n*((o+1)*n+o)+1)+r},easeInOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),(n/=s/2)<1?i/2*n*n*(((o*=1.525)+1)*n-o)+r:i/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+r},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e,t){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=s=="vertical"?"height":"width",f=s=="vertical"?u.height():u.width();i=="show"&&u.css(a,0);var l={};l[a]=i=="show"?f:0,u.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",u=t.options.distance||20,a=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",u=t.options.distance||(l=="top"?n.outerHeight({margin:!0})/3:n.outerWidth({margin:!0})/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-u:u),i=="hide"&&(u/=a*2),i!="hide"&&a--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+u,n.animate(h,f/2,t.options.easing),u/=2,a--}for(var p=0;p<a;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),u=i=="hide"?u*2:u/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+u,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=n[0].tagName=="IMG"?u:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?a.height():a.width();i=="show"&&(a.css(f.size,0),a.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,a.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0})/2:n.outerWidth({margin:!0})/2);i=="show"&&n.css("opacity",0).css(u,a=="pos"?-f:f);var l={opacity:i=="show"?1:0};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var u=i.outerWidth(!0),a=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(u/r),top:-f*(a/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:u/r,height:a/n,left:s.left+l*(u/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(u/r):0),top:s.top+f*(a/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(a/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(u/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(u/r)),top:s.top+f*(a/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(a/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e,t){e.effects.fade=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,u=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=u,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(u?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,a,t.options.easing).animate(v,a,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s={backgroundColor:n.css("backgroundColor")};i=="hide"&&(s.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show");times=(t.options.times||5)*2-1,duration=t.duration?t.duration/2:e.fx.speeds._default/2,isVisible=n.is(":visible"),animateTo=0,isVisible||(n.css("opacity",0).show(),animateTo=1),(r=="hide"&&isVisible||r=="show"&&!isVisible)&&times--;for(var i=0;i<times;i++)n.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;n.animate({opacity:animateTo},duration,t.options.easing,function(){animateTo==0&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),function(e,t){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide"),i=parseInt(t.options.percent,10)||150,s=i/100,u={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:r,percent:r=="hide"?i:100,from:r=="hide"?u:{height:u.height*s,width:u.width*s}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),u=t.options.direction||"both",a=t.options.origin;i!="effect"&&(r.origin=a||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:u!="horizontal"?s/100:1,x:u!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],s=["width","height","overflow"],u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(a),n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),s=r.concat(a).concat(f),n.find("*[width]").each(function(){child=e(this),c&&e.effects.save(child,s);var n={height:child.height(),width:child.width()};child.from={height:n.height*m.from.y,width:n.width*m.from.x},child.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,a,m.from.y,child.from),child.to=e.effects.setTransition(child,a,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,f,m.from.x,child.from),child.to=e.effects.setTransition(child,f,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){c&&e.effects.restore(child,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){n.to.opacity===0&&n.css("opacity",n.from.opacity),l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",u=t.options.distance||20,a=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+u,p[l]=(c=="pos"?"+=":"-=")+u*2,d[l]=(c=="pos"?"-=":"+=")+u*2,n.animate(h,f,t.options.easing);for(var v=1;v<a;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0}):n.outerWidth({margin:!0}));i=="show"&&n.css(u,a=="pos"?isNaN(f)?"-"+f:-f:f);var l={};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:u.top,left:u.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery)
;"use strict";NL.ns("NL.Widgets"),NL.Widgets.callWidgetMethod=function(e,t,n){var r=null;return NL.Utils.each(e.data(),function(e,i){if(NL.isFunction(i[t]))return r=i[t].apply(i,n===undefined?[]:n),!1}),r},$(function(){NL.Widgets._layoutsPresent=!1,NL.Widgets.LayoutManager={_managedWidgets:{},_isWorking:!1,registerWidget:function(e){if(!NL.isNundef(e)){var t="layoutManagerId"+NL.Utils.sequence().nextVal();e._layoutManagerId=t,this._managedWidgets[t]=e}},unRegisterWidget:function(e){!NL.isNundef(e)&&!NL.isNundef(e._layoutManagerId)&&this._managedWidgets.hasOwnProperty(e._layoutManagerId)&&delete this._managedWidgets[e._layoutManagerId]},rebuildLayout:function(e){if(this._isWorking){NL.log.warn("rebuildLayout called during another rebuild layout!");return}this._isWorking=!0,NL.isNundef(e)?e=$("body"):e=$(e);var t=this,n=[];NL.Utils.each(this._managedWidgets,function(t,r){r._depth=null,r.element.removeData("data-nl-widget-depth");var i=0,s=[],o;s.push(r.element);while(s.length>0){o=$(s.shift());if(o.data("data-nl-widget-depth")){i+=o.data("data-nl-widget-depth"),r._depth=i,r.element.data("data-nl-widget-depth",i),n.push(r);continue}if(o.is(e)){r._depth=i,r.element.data("data-nl-widget-depth",i),n.push(r);continue}if(!o.is(":visible"))continue;if(!o||o.is($("body")))continue;s.push(o.parent()),i++}}),n.sort(function(e,t){return e._depth>t._depth}),NL.Utils.each(n,function(e,t){t.rebuildLayout()}),this._isWorking=!1}},$(window).on("resize",NL.Utils.debounce(function(e,t){var n;NL.isNundef(t)||(n=t.element),NL.Widgets.LayoutManager.rebuildLayout(n)},20,!1))}()),$.widget("NL.nlLayout",{options:{delegate:undefined},_createWidget:function(t,n){$.Widget.prototype._createWidget.apply(this,arguments),NL.Widgets._layoutsPresent=!0,this.options.delegate=t.delegate},rebuildLayout:function(){this.options.delegate.rebuildLayout()}}),$.widget("NL.nlWidget",{_getCreateOptions:function(){var e=$.Widget.prototype._getCreateOptions.apply(this,arguments)||{};return e.locale=NL.session.locale,e.confManager=NL.session.confManager,e.operator=NL.session.operator,e.popableManager=NL.UI.getGlobalPopableManager(),e},_getConfManagerKey:function(){return this.options.confId?[this.widgetName,this.options.confId]:[this.widgetName]},_setOption:function(e,t){if(e==="confManager")throw new Error("You cannot change the local configuration once initialized");return $.Widget.prototype._setOption.apply(this,arguments)},getConf:function(){return this.options.confManager?this.options.confManager.get(this._getConfManagerKey(),{}):{}},saveConf:function(e){this.options.confManager&&this.options.confManager.set(this._getConfManagerKey(),e)},rebuildLayout:function(){},setFocus:function(){},stopPropagation:function(e){NL.UI.getGlobalPopableManager().stopPropagation(e)},preventDefault:function(e){NL.UI.getGlobalPopableManager().preventDefault(e)}}),$(function(){var e=$('script[type|="nl"]');e.each(function(){var e=$(this).attr("type").substr(3),t=e.split("/",2),n=t[0],r=t[1];switch(n){case"widget":if($(this).data("status")==="done")break;var i=$(this).attr("selector"),s;if(i&&$(":not(script)"+i).length)$(this).removeAttr("id"),s=$(i);else{s=$("<div>");var o=$(this).attr("data-widget-id");o&&s.attr("id",o),$(this).after(s)}var u=new Function("return "+$.trim($(this).html())+";");s[r](u()),$(this).data("status","done");break;default:throw new Error('Unknown type of Neolane script: "'+t[0]+'"')}})}),function(e){e.fn.nlData=function(e,t){return e="nl-"+e,t===undefined?(t=this.attr("data-"+e)||this.data(e)||undefined,t):t===null?(this.removeData(e),this.removeAttr("data-"+e),this):(t=t.toString(),this.data(e,t),this.attr("data-"+e,t),this)}}(jQuery)
;"use strict";NL.ns("NL.UI"),NL.OO.defineProtocol("Popable",["collapse","isOwnerOf"]),NL.UI.PopableManager=function(){var e=this;this._popableWidgets={},$(document).on("mousedown",function(t){e.handle(t)})},NL.UI.PopableManager.prototype={addPopable:function(e){NL.assert(NL.OO.implementsProtocol(e,"Popable"),"A popable widget cannot be instanciated without valid methods.");if(!NL.isNundef(e)){var t="popableWidget"+NL.Utils.sequence().nextVal();e._nlPopableManagerId=t,this._popableWidgets[t]=e}},removePopable:function(e){var t=this;!NL.isNundef(e)&&!NL.isNundef(e._nlPopableManagerId)&&t._popableWidgets.hasOwnProperty(e._nlPopableManagerId)&&delete t._popableWidgets[e._nlPopableManagerId]},handle:function(e){var t=$(e.currentTarget);if(t.length===0||e.target&&(t.is(document)||t.is("body")||t.is("html")))t=$(e.target);NL.Utils.each(this._popableWidgets,function(n,r){r.isOwnerOf(t,e)||r.collapse.apply(r)})},collapseAll:function(){NL.Utils.each(this._popableWidgets,function(e,t){t.collapse.apply(t)})},stopPropagation:function(e){this.handle(e||window.event),e===undefined?window.event.cancelBubble=!0:e.stopPropagation()},preventDefault:function(e){this.handle(e||window.event),e===undefined?window.event.returnValue=!0:e.preventDefault()}},$(function(){var e=null;NL.UI.getGlobalPopableManager=function(){return e===null&&(e=new NL.UI.PopableManager),e}}())
;"use strict";(function(e){e.widget("NL.nlDialog",e.NL.nlWidget,{options:{parent:"body",header:!0,position:"center center",width:300,height:"auto",minWidth:150,minHeight:50,maxWidth:!1,maxHeight:!1,resizable:!0,draggable:!0,closeThick:!0,buttons:{},closeOnEscape:!0,title:"",content:"",buttonsAlign:"right",modal:!1,autoOpen:!0,zIndex:1001,noPrimaryFirstButton:!1,dialogClass:"",closeText:"",commandBarConfig:null,resizeStart:null,resizeStop:null,resize:null,dragStart:null,dragStop:null,drag:null,open:null,close:null,cancel:null,fullHeightElement:!1,destroyOnClose:!1,removeOnClose:!1,adaptable:!0},_create:function(){return this._$dialog=null,this._$header=null,this._$footer=null,this._$body=null,this._$title=null,this._$modalDiv=null,this._cmdBar=null,this._cmdController=null,this._$closeBt=null,this._isOpen=!1,this._isReady=!1,this._tmpSizePos={height:null,width:null,left:null,top:null},this._render(),this.options.create&&this.options.create.call(this),this.element.addClass("nlui-uiDialog"),NL.Widgets.LayoutManager.registerWidget(this),this},_render:function(){var n,r,i,s,o,u,a,f;return n=this,this._$dialog=e('<div class="nlui-dialog"></div>').show().on("mousedown",function(t){n.focus(t)}).appendTo(this.options.parent),this._setResizable(),r=this.element.attr("title"),this.options.title&&(r=this.options.title),this.options.header&&(this._addHeader(),this.setTitle(r)),this.options.commandBarConfig!==null?this._addCmdBar(this.options.commandBarConfig.controller,this.options.commandBarConfig.commands,this.options.commandBarConfig.commandConfigs,this.options.commandBarConfig.onRefreshVisibility):e.each(this.options.buttons,function(e,t){var r;typeof t=="function"?r={label:e,onClick:t}:r=t,n.addButton(r,!0)}),this.options.closeThick&&this._addCloseButton(),this._addBody(),this.options.content&&(i=this.options.content,this.setContent(i)),this.options.draggable&&this._$dialog.draggable({containment:"window",handle:this._$header,start:function(t,r){n._$dialog.removeClass("nlui-dialog-fittoright nlui-dialog-fittobottom"),n.options.dragStart&&n.options.dragStart.call(n,t,r)},drag:function(t,r){n.options.drag&&n.options.drag.call(n,t,r)},stop:function(t,r){n.options.dragStop&&n.options.dragStop.call(n,t,r),n._tmpSizePos.top=r.position.top,n._tmpSizePos.left=r.position.left}}),this._$dialog.attr("tabIndex",-1).keydown(function(e,t){n.options.closeOnEscape&&e.keyCode===27&&n.cancel(e,t)}),this.options.autoOpen===!1&&(this._initSize(),this._$dialog.hide()),this.options.dialogClass&&this._$dialog.addClass(this.options.dialogClass),this},_initPosition:function(){var n,r,i,s,o,u,a;n=this.options.position,a=e(window);try{if(typeof n=="string"){r=n.split(" ");switch(r[0]){case"center":i=a.outerWidth()/2-this._$dialog.outerWidth(!0)/2,s=null;break;case"right":i=null,s=0;break;case"left":i=0,s=null;break;default:i=parseInt(r[0],10),s=null}switch(r[1]){case"center":o=a.outerHeight()/2-this._$dialog.outerHeight(!0)/2,u=null;break;case"bottom":o=null,u=0;break;case"top":o=0,u=null;break;default:o=parseInt(r[1],10),u=null}}o=o<0?e("body").scrollTop():o,i=i<0?0:i,this._$dialog.css({top:o,left:i,bottom:u,right:s})}catch(f){}return this._tmpSizePos.top=o,this._tmpSizePos.left=i,this},_initSize:function(){var t,n,r,i,s,o;return s=this._$header?this._$header.outerHeight(!0):0,o=this._$footer?this._$footer.outerHeight(!0):0,i=20,n=Math.max(this.options.width,this.options.minWidth),this.option.minHeight===undefined&&this._$dialog.css("minHeight",s+o),this._$dialog.width(n),this.options.height==="auto"?(r=this._$body.outerHeight(!0)-this._$body.height(),t=this.element.outerHeight(!0)+r+s+o):t=this.options.height,t!==undefined&&this.options.minHeight>t&&(t=this.options.minHeight),this._$dialog.height(t),this._$body.css({top:this._$header?this._$header.outerHeight(!0):0,bottom:this._$footer?this._$footer.outerHeight(!0):0}),this._tmpSizePos.height=t,this._tmpSizePos.width=n,this},_addHeader:function(){return this._$header=e('<div class="nlui-dialog-header"></div>').appendTo(this._$dialog),this._$dialog.removeClass("nlui-dialog-noheader"),this._$header},_addFooter:function(){return this._$footer=e('<div class="nlui-dialog-footer"></div>').css({"text-align":this.options.buttonsAlign}).appendTo(this._$dialog),this._$footer},_addBody:function(){var n=["nlui-dialog-element"];return this._$body=e('<div class="nlui-dialog-body"></div>').append(this.element.show()).appendTo(this._$dialog),this.options.fullHeightElement&&n.push("nlui-dialog-fullHeight"),this.element.addClass(n.join(" ")),this._$body},_addCloseButton:function(){var n;return n=this,this._$closeBt=e('<span class="nlui-dialog-header-close"></span>').nlButton({icon:"ui-icon-closethick",onClick:function(t,r){n.cancel(t,r)},flat:!0}).appendTo(this._$header),this._$closeBt},_addCmdBar:function(n,r,i,s){this._$footer===null&&this._addFooter(),this._cmdController=n,this._cmdBar=e('<div class="nlui-dialog-cmdbar"></div>').nlCmdBar({separators:!1,rightSeparator:!1,leftSeparator:!1,commands:r,commandConfigs:i,controller:n,onRefreshVisibility:s}).appendTo(this._$footer)},_init:function(){return this._isOpen===!1&&this.options.autoOpen!==!1&&(this.open(),this._isReady=!0),this},_setOption:function(n,r){var i,s,o;i=this,o=this.options.dialogClass,e.Widget.prototype._setOption.apply(this,arguments);switch(n){case"position":this._initPosition();break;case"closeThick":r===!1&&this._$closeBt?(this._$closeBt.remove(),this._$closeBt=null):r===!0&&this._$closeBt===null&&this._addCloseButton();break;case"modal":r===!1&&this._$modalDiv?(this._$modalDiv.remove(),this._$modalDiv=null):r===!0&&this._$modalDiv===null&&this._addModalDiv();break;case"noPrimaryFirstButton":s=this.getButtons(),s.length>0&&r===!0?e.each(s,function(e,t){t.removeClass("nlui-button-primary")}):s.length>0&&s[0].addClass("nlui-button-primary");break;case"buttons":this._cmdBar&&(this._cmdBar.nlCmdBar("destroy"),this._cmdBar=null,this._tmpBt=null),e.each(r,function(e,t){var n;typeof t=="function"?n={label:e,onClick:t}:n=t,i.addButton(n)});break;case"title":this.setTitle(r);break;case"minWidth":case"minHeight":this._setResizable(),this._initPosition();break;case"width":case"height":this._initSize(),this._initPosition();break;case"dialogClass":this._$dialog.removeClass(o).addClass(r);break;case"header":r===!1&&this._$header?(this._$body.css("top",0),this._$header.remove(),this._$header=null,this._$dialog.addClass("nlui-dialog-noheader")):r===!0&&this._$header===null&&this._addHeader(),this._initSize(),this._initPosition()}return this},_setResizable:function(){var t=this;return this.options.resizable&&this._$dialog.resizable({handles:"all",minWidth:this.options.minWidth,minHeight:this.options.minHeight,maxWidth:this.options.maxWidth,maxHeight:this.options.maxHeight,start:function(n,r){t.options.resizeStart&&t.options.resizeStart.call(t,n,r)},resize:function(n,r){t.options.resize&&t.options.resize.call(t,n,r)},stop:function(n,r){t._tmpSizePos={width:r.size.width,height:r.size.height,top:r.position.top,left:r.position.left},t.options.resizeStop&&t.options.resizeStop.call(t,n,r)}}),this},_addModalDiv:function(){return this._$modalDiv=e('<div class="nlui-dialog-modaldiv"></div>').css("z-index",this.options.zIndex-1).appendTo(this.options.parent),this._$modalDiv},open:function(t){var n;return n=this,this._$dialog.show(),this.options.modal===!0&&this._$modalDiv===null?this._addModalDiv():this._$modalDiv&&this._$modalDiv.show(),this._initSize(),this._isOpen=!0,this._isReady===!1&&this._initPosition(),n.focus(t),n.options.open&&n.options.open.call(n,t),NL.Widgets.LayoutManager.rebuildLayout(this.element),this},_getMaxZindex:function(){var n=Math.max.apply(null,e.map(e("body > .nlui-dialog, body > .nlui-interceptor-hoveringElement"),function(t,n){if(e(t).css("position")==="absolute")return parseInt(e(t).css("z-index"),10)||1}));return n},isOpen:function(){return this._isOpen},rebuildLayout:function(){var n,r,i,s;return this.options.adaptable&&(n=e(window),i=n.outerHeight(),s=n.outerWidth(),r=this._$dialog.offset(),i<=this._tmpSizePos.height?(this._$dialog.removeClass("nlui-dialog-fittobottom"),this.setAdaptable("vertical",!0)):this._tmpSizePos.top+this._tmpSizePos.height+10>i?(this._$dialog.addClass("nlui-dialog-fittobottom"),this.setAdaptable("vertical",!1)):(this._$dialog.removeClass("nlui-dialog-fittobottom"),this.setAdaptable("vertical",!1)),s<=this._tmpSizePos.width?(this._$dialog.removeClass("nlui-dialog-fittoright"),this.setAdaptable("horizontal",!0)):this._tmpSizePos.left+this._tmpSizePos.width+10>s?(this._$dialog.addClass("nlui-dialog-fittoright"),this.setAdaptable("horizontal",!1)):(this._$dialog.removeClass("nlui-dialog-fittoright"),this.setAdaptable("horizontal",!1))),this},setAdaptable:function(t,n){var r=t==="vertical"?"nlui-dialog-vadaptable":"nlui-dialog-hadaptable";return n=n===undefined?!0:n,n?this._$dialog.addClass(r).resizable("destroy"):(this._$dialog.removeClass(r),this._setResizable()),this},focus:function(n){var r,i,s;return n=n||{},r=e(n.target),i=this._getMaxZindex(),r.length>0&&(r.is(":focus")||r.parent().is(":focus"))?!1:(r.length===0&&this._$dialog.focus(),i>=this.options.zIndex&&(s=this._$modalDiv?2:1,i+=s,this.options.zIndex=i),this._$dialog.css("z-index",this.options.zIndex),this._$modalDiv&&this._$modalDiv.css("z-index",this.options.zIndex-1),this.options.focus&&this.options.focus.call(this,n),this)},destroy:function(){return this.element.detach(),this._$dialog.draggable("destroy").resizable("destroy").removeClass("nlui-dialog").remove(),e.NL.nlWidget.prototype.destroy.call(this),this._$modalDiv&&(this._$modalDiv.remove(),this._$modalDiv=null),this.element&&this.options.removeOnClose?this.element.remove():this.element&&e("body").append(this.element.hide()),this},close:function(t,n,r){return this.options.beforeClose&&!1===this.options.beforeClose.call(this,t,n,r)?this:(this._isOpen=!1,this._$dialog.hide(),this._$modalDiv&&this._$modalDiv.hide(),this.options.close&&this.options.close.call(this,t,n,r),this.options.removeOnClose&&this._$dialog&&this._$dialog.length>0?this._$dialog.remove():this.options.destroyOnClose&&this.destroy(),this)},cancel:function(t,n){return this.close(t,n,"cancel"),this.options.onCancel&&(this.options.cancel=this.options.onCancel),this.options.cancel&&this.options.cancel.call(this,t,n),this},setTitle:function(n,r){return r===undefined&&(r=!1),this._$header===null&&(this._addHeader(),r=!0),NL.isNundef(n)||(this._$title===null&&(this._$title=e('<span class="nlui-dialog-title"></span>').appendTo(this._$header)),this._$title.text(n)),r&&(this._initSize(),this._initPosition()),this},addButton:function(n,r){var i,s,o,u,a,f,l,c,h,p,d;i=this,a=n.name||"nlui-dialog-cmd"+NL.Utils.sequence().nextVal(),c=n.click||n.onClick||n.command,o=n.label||n.text,p=!1,d=!1,n.preset==="cancel"&&(o=xtk_core.dialog_cancel(),p=!0),n.preset==="ok"&&(u="primary",o=xtk_core.dialog_ok(),d=!0),c&&(s=function(t,n){c.call(i.element,t,this)});if(n.cancelMode||n.cancels)p=!0;return n.closeMode&&(d=!0),s=function(t,n){c&&c.call(i.element,t,this),p?i.cancel(t,n):d&&i.close(t,n)},this._cmdBar===null&&this._addCmdBar(new NL.UI.Controller),this._cmdBar.nlCmdBar("getCommands").length===0&&this.options.noPrimaryFirstButton===!1?u="primary":n.mode==="primary"&&this.options.noPrimaryFirstButton===!0&&(u=!1),n.command=s,h=e.extend({label:o,mode:u},n),this._cmdController.registerCommand(a,h),this._cmdBar.nlCmdBar("addCommand",a,!1),f=this._cmdBar.nlCmdBar("getCommands"),l=f[f.length-1],n.id&&l.prop("id",n.id),i._tmpBt=i._tmpBt||[],i._tmpBt.push(n),e.each(i._tmpBt,function(e,t){f[e].addClass(t["class"]).prop("id",t.id)}),r=r===undefined?!1:!0,r||(this._initSize(),this._initPosition()),l},setContent:function(t){return this.element.empty().append(t),this._initSize(),this._initPosition(),this},getHeader:function(){return this._$header},getBody:function(){return this._$body},getFooter:function(){return this._$footer},getCommandBar:function(){return this._cmdBar},getButton:function(n){var r;return e.each(this.getButtons(),function(e,t){if(t.prop("id")===n)return r=t,!1}),r},getButtons:function(){return this.getCommandBar().nlCmdBar("getCommands")},getContentZone:function(){return this.getBody()}})})(jQuery)
;"use strict";(function(e){e.widget("NL.nlCmdBar",e.NL.nlWidget,{options:{controller:null,onRefreshVisibility:undefined,commandConfigs:{},commands:[],rendering:"bar",autoOpenMenu:!1,iconSize:undefined,mode:undefined,separators:undefined,rightSeparator:undefined,leftSeparator:undefined,maxButtons:null,overflowMode:undefined,overflowLeftIcon:undefined,overflowRightIcon:undefined,overflowLabel:undefined,minButtonWidth:undefined},_create:function(){var n,r;r=this,this._$buttonContainer=null,this._currentId=0,this._commands=[],NL.Utils.each(this.options.commandConfigs,function(e,t){r.options.controller.registerCommand(e,t)});for(n=0;n<this.options.commands.length;n++)this.addCommand(this.options.commands[n],!0);return this.options.controller.registerViewObserver(this,this.options.onRefreshVisibility),this._$buttonContainer=e("<div></div>").appendTo(this.element).addClass("nlui-cmdbar-nav"),this.options.rendering==="bar"&&this._$buttonContainer.nlButtonBar({autoOpenMenu:this.options.autoOpenMenu,iconSize:this.options.iconSize,mode:this.options.mode,separators:this.options.separators,rightSeparator:this.options.rightSeparator,leftSeparator:this.options.leftSeparator,maxButtons:this.options.maxButtons,overflowMode:this.options.overflowMode,overflowLeftIcon:this.options.overflowLeftIcon,overflowRightIcon:this.options.overflowRightIcon,overflowLabel:this.options.overflowLabel}),this.refresh(),this.options.controller.observerReady(this),this},refresh:function(){var t=this._extendConfiguration(this._commands);return this._currentId=0,this.options.rendering==="bar"&&this._$buttonContainer.nlButtonBar("setButtons",t),this},_extendConfiguration:function(n){var r,i,s,o,u;i=[];for(r=0;r<n.length;r++)s=n[r],s===null?i.push(null):(NL.isString(s)?(u=this.options.controller.getCommandConfiguration(s),u.name=s,o=this._generateButtonConfig(u)):(u={},s.name!==undefined&&(u=e.extend(u,this.options.controller.getCommandConfiguration(s.name))),u=e.extend(u,s.config,{name:s.name,menuPosition:s.menuPosition,params:s.params}),o=this._generateButtonConfig(u),s.subCommands&&(o.subButtons=this._extendConfiguration(s.subCommands),o.menuPosition=u.menuPosition,o.rightIcon===undefined&&(o.rightIcon="ui-icon-triangle-1-s"))),i.push(o));return i},_generateButtonConfig:function(t){var n,r;return n=this,r={icon:t.icon,rightIcon:t.rightIcon,label:t.label,mode:t.mode,flat:t.flat,help:t.help,isPushed:t.isPushed,disabled:t.disabled,hidden:t.hidden,badgerValue:t.badgerValue,minWidth:t.minWidth===undefined?this.options.minButtonWidth:t.minWidth},t.name!==undefined?r.onClick=function(e,r,i){n.triggerCommand(t.name,t.params)}:r.onClick=function(e,t,n){},r.uid="button"+this._currentId,this._currentId+=1,r},addCommand:function(t,n){return this._commands.push(t),n||this.refresh(),this},reset:function(t){return this._commands=[],t||this.refresh(),this},triggerCommand:function(n,r){var i,s,o,u,a,f,l,c;return s=this.options.controller,o=s.getCommandConfiguration(n),i=this,u=e("<div></div>"),a={message:xtk_core.dialog_loadingLabel(),onCancel:null,open:function(){o.command(s,r,function(){u.nlMessageBox("close")})}},f=function(t){u.nlMessageBox({type:"loading",message:t.message,delay:t.delay,onCancel:t.onCancel,onOpen:t.open})},l=function(n,r){o.waitBox?f(e.extend({},a,o.waitBox)):o.command(n,r)},c=function(){o.confirmSave?s._confirmSave(function(e){e&&l(s,r)}):o.checkSave?s._checkSave(function(e){e&&l(s,r)}):l(s,r)},o&&o.command&&(o.confirmDialog?e("<div></div>").nlMessageBox({type:"confirm",message:o.confirmDialog.message,onConfirm:c}):c()),this},_setLocalAttribute:function(t,n,r,i){var s,o;for(s=0;s<t.length;s++)o=t[s],o&&!NL.isString(o)&&(o.name===n&&o.config!==undefined&&o.config[r]!==undefined&&(o.config[r]=i),o.subCommands&&this._setLocalAttribute(o.subCommands,n,r,i));return this},getCommandAttribute:function(t,n){return this.options.controller.getCommandAttribute(t,n)},setCommandAttribute:function(t,n,r,i){var s=this.options.controller.getCommandAttribute(t,n);return s!==r&&(this.options.controller.setCommandAttribute(t,n,r),this._setLocalAttribute(this._commands,t,n,r),i||this.refresh()),this},hideAllCommands:function(t){var n;return n=function(t,r){var i,s;for(i=0;i<r.length;i++)s=r[i],s!==null&&(NL.isString(s)?t.setCommandAttribute(s,"hidden",!0,!0):(s.name!==undefined&&t.setCommandAttribute(s.name,"hidden",!0,!0),s.subCommands&&n(t,s.subCommands)))},n(this,this._commands),t||this.refresh(),this},destroy:function(){return this.options.controller.unregisterViewObserver(this),this._$buttonContainer.remove(),e.Widget.prototype.destroy.call(this),this},getCommands:function(){return this._$buttonContainer.nlButtonBar("getButtons")}})})(jQuery)
;"use strict";(function(e,t,n,r){var i={mainMenu:{className:"mainMenu",separator16:"mainMenu-separator",separator20:"mainMenu-separator",leftBorder:"",rightBorder:"",separators:!0,leftSeparator:!1,rightSeparator:!0},navMenu:{className:"navMenu",separator16:"navMenu-separator",separator20:"navMenu-separator",leftBorder:"",rightBorder:"",leftSeparator:!1,rightSeparator:!1},toolbar:{className:"toolbar",separator16:"toolbar-separator",separator20:"toolbar-separator",leftBorder:"",rightBorder:"",separators:!0,leftSeparator:!1,rightSeparator:!1},flatToolbar:{className:"flatToolbar",separator16:"flatToolbar-separator16",separator20:"flatToolbar-separator20",leftBorder:"",rightBorder:"",separators:!0,leftSeparator:!1,rightSeparator:!1}},s={options:{buttons:[],iconSize:r,autoOpenMenu:!1,mode:r,separators:r,rightSeparator:r,leftSeparator:r,maxButtons:null,overflowMode:r,overflowLeftIcon:r,overflowRightIcon:r,overflowLabel:r},_create:function(){this._lastCompiledConfiguration=r,this._buttons=[],this._nlButtons=[],this._buttonCache=[],this._$ul=e("<ul></ul>").appendTo(this.element).addClass("nlui-buttonbar-list");var t=i[this.options.mode];t!==r&&(this._$ul.addClass(t.className),this.options.separators=this.options.separators!==r?this.options.separators:t.separators,this.options.leftSeparator=this.options.leftSeparator!==r?this.options.leftSeparator:t.leftSeparator,this.options.rightSeparator=this.options.rightSeparator!==r?this.options.rightSeparator:t.rightSeparator);for(var n=0;n<this.options.buttons.length;n++)this.addButton(this.options.buttons[n],!0);this.refresh()},_setOption:function(e,t){this.options[e]=t;if(e==="rightSeparator"||e==="leftSeparator")this._lastCompiledConfiguration=r},addButton:function(e,t){this._buttons.push(e),t||this.refresh()},setButtons:function(e){this._buttons=e,this.refresh()},empty:function(){this._buttons=[],this.refresh()},_compileConfiguration:function(){var t=[];if(this.options.maxButtons!==null&&this._buttons.length>this.options.maxButtons){for(var n=0;n<this.options.maxButtons-1;n++)t.push(this._buttons[n]);var i=[];for(var s=this.options.maxButtons-1;s<this._buttons.length;s++)i.push(e.extend({},{iconSize:this.options.iconSize,mode:this.options.overflowMode,isPushed:!1},this._buttons[s]));var o={icon:this.options.overflowLeftIcon,rightIcon:this.options.overflowRightIcon,label:this.options.overflowLabel,mode:this.options.mode,subButtons:i};t.push(o)}else t=this._buttons;var u=[];for(var s=0;s<t.length;s++)t[s]===null?u.push(null):u.push(e.extend({iconSize:this.options.iconSize,mode:this.options.mode},t[s]));t=u;if(this.options.separators){var a=[];for(var f=0;f<t.length;f++)a.push(t[f]),a.push(null);t=a}for(var s=0;s<t.length;s++){var l=t[s];if(l===null)continue;if(l.subButtons){var c=!1;for(var n=0;!c&&n<l.subButtons.length;n++){if(l.subButtons[n]===null)continue;c=c||l.subButtons[n].isPushed}l.isPushed=c;if(l.disabled===r){var h=!0;for(var n=0;h&&n<l.subButtons.length;n++){if(l.subButtons[n]===null)continue;h=h&&l.subButtons[n].disabled}l.disabled=h}if(l.hidden===r){var p=!0;for(var n=0;p&&n<l.subButtons.length;n++){if(l.subButtons[n]===null)continue;p=p&&l.subButtons[n].hidden}l.hidden=p}}}t=this._collapseSeparators(t);var d=!0;for(var f=0;f<t.length;f++)t[f]!==null?t[f].hidden||(t[f].leftRounded=d,d=!1):d=!0;var v=!0;for(var f=t.length-1;f>=0;f--)t[f]!==null?t[f].hidden||(t[f].rightRounded=v,v=!1):v=!0;return t},_collapseSeparators:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(r!==null)r.subButtons&&(r.subButtons=this._collapseSeparators(r.subButtons)),t.push(r);else{var i=t.length===0?null:t[t.length-1];i!==null&&t.push(null)}}return t[t.length-1]===null&&t.splice(t.length-1,1),t},_compatibleCompiledConfs:function(e,t){if(e===r)return!1;if(e.length!==t.length)return!1;for(var n=0;n<t.length;n++){var i=e[n],s=t[n];if(!i&&!s)continue;if(!i||!s)return!1;if(!i.uid||!s.uid||i.uid!==s.uid)return!1}return!0},_drawButton:function(e,t){t.nlButton("destroy"),t.nlSubmenu("destroy"),t.children().remove(),t.empty(),t.addClass("nlui-buttonbar-item");if(e.subButtons&&!e.disabled&&!e.hidden)if(this.options.autoOpenMenu)e.help=null,t.nlSubmenu({menuItems:e.subButtons,autoClose:!0});else{var n=!0,r=function(t,r,i){n?t.nlSubmenu({menuItems:e.subButtons,autoOpen:!0,onMenuHide:function(){setTimeout(function(){t.nlSubmenu("destroy")},0),n=!0}}):t.nlSubmenu("destroy"),n=!n},i=e.menuPosition||"all",s=i==="all"||i==="leftIcon",o=i==="all"||i==="rightIcon",u=i==="all";u&&(e.onClick=r),s&&e.icon&&(e.onLeftIconClick=r),o&&e.rightIcon&&(e.onRightIconClick=r)}var a=!1;return e.hidden||(t.nlButton(e),a=!0),a},_drawSeparator:function(){var t="separator ";this.options.mode===r?t+="default-separator":i[this.options.mode]!==r&&(this.options.iconSize===20?t+=i[this.options.mode].separator20:t+=i[this.options.mode].separator16);var n=e('<li class="'+t+'"></li>');return n},_drawLeftSeparator:function(){var e=this._drawSeparator();e.appendTo(this._$ul),e.addClass("left-separator")},_drawRightSeparator:function(){var e=this._drawSeparator();e.appendTo(this._$ul),e.addClass("right-separator")},_fullBuild:function(t){this._$ul.children().remove(),this._buttonCache=[],this.options.leftSeparator&&this._drawLeftSeparator();var n=!0;for(var r=0;r<t.length;r++){var i=t[r];if(i!==null){var s=e("<li></li>");i.hidden?s.hide():n=!1,this._$ul.append(s);var o=this._drawButton(i,s);this._buttonCache.push({container:s,created:o})}else{var u=this._drawSeparator();n&&u.hide(),this._$ul.append(u),this._buttonCache.push({container:u,created:!0}),n=!0}}this.options.rightSeparator&&this._drawRightSeparator()},_changeButtonOptions:function(e,t){if(e.subButtons){t.children().remove(),this._drawButton(e,t);return}t.nlButton("changeOptions",e)},_diffBuild:function(e){var t=!0,n=null;for(var r=0;r<e.length;r++){var i=e[r],s=this._buttonCache[r];if(i!==null)if(!i.hidden){if(s.created)this._changeButtonOptions(i,s.container);else{var o=this._drawButton(i,s.container);s.created=o}s.container.show().css("display",""),t=!1}else s.container.hide();else s.container.toggle(!t),t||(n=s.container),t=!0}t&&n&&n.hide()},refresh:function(){var e=this._compileConfiguration();this._compatibleCompiledConfs(this._lastCompiledConfiguration,e)?this._diffBuild(e):this._fullBuild(e),this._lastCompiledConfiguration=e,this._nlButtons=[];for(var t=0;t<e.length;t++){var n=e[t];n&&!n.hidden&&this._nlButtons.push(this._buttonCache[t].container)}},destroy:function(){},getButtons:function(){return this._nlButtons}};e.widget("NL.nlButtonBar",e.NL.nlWidget,s)})(jQuery,window,document)
;"use strict";(function(e,t,n,r){var i={"default":{buttonClass:"nlui-button",pushedClass:"nlui-button pushed",disabledClass:"nlui-button disabled",iconsClass:r},primary:{buttonClass:"nlui-button nlui-button-primary",pushedClass:"nlui-button nlui-button-primary pushed",disabledClass:"nlui-button nlui-button-primary disabled",iconsClass:"nlui-icon-inverse"},error:{buttonClass:"nlui-button nlui-button-error",pushedClass:"nlui-button nlui-button-error pushed",disabledClass:"nlui-button nlui-button-error disabled",iconsClass:"nlui-icon-inverse"},success:{buttonClass:"nlui-button nlui-button-success",pushedClass:"nlui-button nlui-button-success pushed",disabledClass:"nlui-button nlui-button-success disabled",iconsClass:"nlui-icon-inverse"},warning:{buttonClass:"nlui-button nlui-button-warning",pushedClass:"nlui-button nlui-button-warning pushed",disabledClass:"nlui-button nlui-button-warning disabled",iconsClass:"nlui-icon-inverse"},info:{buttonClass:"nlui-button nlui-button-info",pushedClass:"nlui-button nlui-button-info pushed",disabledClass:"nlui-button nlui-button-info disabled",iconsClass:"nlui-icon-inverse"},inverse:{buttonClass:"nlui-button nlui-button-inverse",pushedClass:"nlui-button nlui-button-inverse pushed",disabledClass:"nlui-button nlui-button-inverse disabled",iconsClass:"nlui-icon-inverse"},white:{buttonClass:"nlui-button nlui-button-white",pushedClass:"nlui-button nlui-button-white",disabledClass:"nlui-button nlui-button-white disabled",iconsClass:r},transparent:{buttonClass:"nlui-button nlui-button-transparent",pushedClass:r,disabledClass:"nlui-button nlui-button-transparent disabled",iconsClass:r},mainMenu:{buttonClass:"nlui-button-mainMenu",pushedClass:"nlui-button-mainMenu-pushed",disabledClass:r,iconsClass:r},navMenu:{buttonClass:"nlui-button-navMenu",pushedClass:"nlui-button-navMenu-pushed",leftIconPushedClass:"nlui-icon-primary",disabledClass:r,iconsClass:r},submenu:{buttonClass:"nlui-button nlui-button-submenu",pushedClass:"nlui-button nlui-button-submenu pushed",disabledClass:"nlui-button nlui-button-submenu disabled",iconsClass:r},backToTheList:{buttonClass:r,pushedClass:r,disabledClass:r,iconsClass:r},toolbar:{buttonClass:"nlui-button nlui-button-toolbar",pushedClass:"nlui-button nlui-button-toolbar pushed",disabledClass:"nlui-button nlui-button-toolbar disabled",iconsClass:r},flatToolbar:{buttonClass:"nlui-button nlui-button-flatToolbar",pushedClass:"nlui-button nlui-button-flatToolbar pushed",disabledClass:"nlui-button nlui-button-flatToolbar disabled",iconsClass:r}},s={small:60,medium:100,large:150},o={options:{icon:r,rightIcon:r,iconSize:r,minWidth:r,label:r,help:r,mode:r,flat:!1,isPushed:!1,disabled:!1,isLink:!1,href:"",xtkDelegated:!1,newWindow:!1,leftRounded:!0,rightRounded:!0,badgerValue:null,onClick:function(e,t,n){n()},onLeftIconClick:null,onRightIconClick:null},_create:function(){this.currentButtonClass=r,this.currentPushedClass=r,this.currentDisabledClass=r,this.currentLeftIconPushedClass=r,this.currentRightIconPushedClass=r,this.currentIconsClass=r,this.leftPointedCornerClass="left-pointed",this.rightPointedCornerClass="right-pointed",this._options=NL.Utils.extend({},this.options),this._$contentWrapper=null,this._$labelWrapper=null,this._$label=null,this._$leftIcon=null,this._$rightIcon=null,this._$a=null,this._$badger=null,this._refresh()},_resetContainers:function(){this._$contentWrapper=null,this._$labelWrapper=null,this._$label=null,this._$leftIcon=null,this._$rightIcon=null},_setIconSize:function(e){e=parseInt(e,10)||0,this._options.iconSize=e===20?20:16},_refreshIconClasses:function(){this._$leftIcon&&this.currentIconsClass&&this._$leftIcon.children(".nlui-icon").addClass(this.currentIconsClass),this._$rightIcon&&this.currentIconsClass&&this._$rightIcon.children(".nlui-icon").addClass(this.currentIconsClass),this._options.iconSize===20?this._$contentWrapper.addClass("has-icon20"):this._$contentWrapper.removeClass("has-icon20")},_setIcon:function(t,n){var r=this,i,s,o,u,a;if(n==="left")o="nlui-button-icon",u=r._options.onLeftIconClick,a="icon";else{if(n!=="right")throw"Icon must be left or right";o="nlui-button-righticon",u=r._options.onRightIconClick,a="rightIcon"}s="has-"+n+"Icon",i="_$"+n+"Icon",r._options[a]=t,NL.isEmpty(t)?r[i]&&(r[i].remove(),r[i]=null,r._$labelWrapper.removeClass(s)):(r[i]?(r._$contentWrapper.nlTooltip("hide"),r[i].children().remove()):(r[i]=e("<span></span>").addClass(o),r._$contentWrapper.prepend(r[i]),r._$labelWrapper&&r._$labelWrapper.addClass(s),this._setIconCallback(u,n)),r[i].html(NL.View.genImage(t,r._options.iconSize,!1,0)),r._refreshIconClasses())},_setIconCallback:function(n,r){var i=this,s,o,u;if(r==="left")o=i._options.onLeftIconClick,u="onLeftIconClick";else{if(r!=="right")throw"Icon must be left or right";o=i._options.onRightIconClick,u="onRightIconClick"}i._options[u]=n,s="_$"+r+"Icon";if(i[s])if(n!==null){var a=o||i._options.onClick;i[s].off("click"),this._options.disabled||i[s].on("click",function(n){i._$contentWrapper.nlTooltip("hide");if(n.ctrlKey||n.button===1||n.currentTarget.target==="_blank")return!0;if(!!NL.View.isConsole()&&!!i._options.xtkDelegated)return!0;i.preventDefault(n),i.stopPropagation(n),a(e(i.element),n,function(){i._options.isLink&&(i._options.newWindow?t.open(i.option.href,"_blank"):t.location=i._options.href)}),i.stopPropagation(n)})}else i[s].off("click")},setMode:function(e){this._options.mode=e,this._updateClasses()},_setFlat:function(e){this._options.flat=e,!e&&this._options.mode!=="white"?this.element.addClass("nlui-button-gradient"):this.element.removeClass("nlui-button-gradient")},_setLeftRoundedCorners:function(e){this._options.leftRounded=e,this.element.toggleClass(this.leftPointedCornerClass,!this._options.leftRounded)},_setRightRoundedCorners:function(e){this._options.rightRounded=e,this.element.toggleClass(this.rightPointedCornerClass,!this._options.rightRounded)},_updateClasses:function(){var t=this;this._setLeftRoundedCorners(t._options.leftRounded),this._setRightRoundedCorners(t._options.rightRounded),t._setFlat(t._options.flat),e.each([this.currentButtonClass,this.currentPushedClass,this.currentDisabledClass,this.currentLeftIconPushedClass,this.currentRightIconPushedClass,this.currentIconsClass],function(e,n){n!==r&&t.element.removeClass(n)});var n;NL.isEmpty(this._options.mode)?n="default":n=this._options.mode,this.currentButtonClass=r,this.currentPushedClass=r,this.currentDisabledClass=r,this.currentLeftIconPushedClass=r,this.currentRightIconPushedClass=r,this.currentIconsClass=r,i[n]!==r&&(this.currentButtonClass=i[n].buttonClass,this.currentPushedClass=i[n].pushedClass,this.currentDisabledClass=i[n].disabledClass,this.currentLeftIconPushedClass=i[n].leftIconPushedClass,this.currentRightIconPushedClass=i[n].rightIconPushedClass,this.currentIconsClass=i[n].iconsClass),this.currentPushedClass===r&&(this.currentPushedClass=this.currentButtonClass),this.currentDisabledClass===r&&(this.currentDisabledClass=this.currentButtonClass),this._refreshIconClasses(),this._options.isPushed&&this._setPushed(!0);var s=this.currentButtonClass;this._options.disabled&&(s=this.currentDisabledClass),this.element.addClass(s)},_setPushed:function(e){this._options.isPushed=e,e?(this._$leftIcon&&this.currentLeftIconPushedClass&&this._$leftIcon.children(".nlui-icon").addClass(this.currentLeftIconPushedClass),this._$rightIcon&&this.currentRightIconPushedClass&&this._$rightIcon.children(".nlui-icon").addClass(this.currentRightIconPushedClass),this._options.disabled||this.element.addClass(this.currentPushedClass)):(this.element.removeClass(this.currentPushedClass).addClass(this.currentButtonClass),this._$leftIcon&&this.currentLeftIconPushedClass&&this._$leftIcon.children(".nlui-icon").removeClass(this.currentLeftIconPushedClass),this._$rightIcon&&this.currentRightIconPushedClass&&this._$rightIcon.children(".nlui-icon").removeClass(this.currentRightIconPushedClass))},_setTooltip:function(e){this._options.help=e,!NL.isEmpty(this._options.help)&&!this._options.disabled?(this._$contentWrapper.nlTooltip({gravity:"s"}),this._$contentWrapper.nlTooltip("setTitle",this._options.help),this._$contentWrapper.nlTooltip("enable")):(this._$contentWrapper.nlTooltip("setTitle",null),this._$contentWrapper.nlTooltip("disable"))},_setLabel:function(t){this._options.label=t,NL.isEmpty(this._options.label)?this._$labelWrapper&&(this._$labelWrapper.remove(),this._$labelWrapper=null,this._$label=null):(!this._$labelWrapper&&!this._$label&&(this._$labelWrapper=e('<span class="nlui-button-text"></span>').appendTo(this._$contentWrapper),this._$label=e('<span class="label"></span>').appendTo(this._$labelWrapper)),this._$label.text(this._options.label))},_hover:function(t,n){var i=this;t.hover(function(){if(i._options.disabled)return;n===r?t.addClass("nlui-state-hover"):e.each(n,function(e,t){NL.isNundef(t)||t.addClass("nlui-state-hover")})},function(){if(i._options.disabled)return;n===r?t.removeClass("nlui-state-hover"):e.each(n,function(e,t){NL.isNundef(t)||t.removeClass("nlui-state-hover")})})},_setWidth:function(e){var t;this._options.minWidth=e,e&&(NL.isString(e)?t=s[this._options.minWidth]:t=e,this.element.css("min-width",t))},_setLink:function(t){this._options.isLink=t,t===!1&&this._$a&&(this._$contentWrapper.unwrap(),this._$a=null),t===!0&&(this._$a||(this._$a=e('<a class="nlui-button-anchor"></a>')),NL.isEmpty(this._options.href)||(this._$a.attr("href",this._options.href),this._options.newWindow&&this._$a.attr("target","_blank")),this._$contentWrapper.wrap(this._$a))},_refresh:function(){this._$rightIcon&&this._$rightIcon.remove(),this._$leftIcon&&this._$leftIcon.remove(),this._$label&&this._$label.remove(),this._$labelWrapper&&this._$labelWrapper.remove(),this._$contentWrapper&&this._$contentWrapper.remove(),this._resetContainers(),this._$contentWrapper=e('<span class="nlui-button-wrapper"></span>'),this.element.append(this._$contentWrapper),this._setWidth(this._options.minWidth),this._setLabel(this._options.label),this._setLink(this._options.isLink),this._setButtonCallback(this._options.onClick),this._setIconSize(this._options.iconSize),NL.isEmpty(this._options.icon)||this._setIcon(this._options.icon,"left"),NL.isEmpty(this._options.rightIcon)||this._setIcon(this._options.rightIcon,"right"),this._setTooltip(this._options.help),this._setBadgerValue(this._options.badgerValue),this._updateClasses(),this._options.mode==="submenu"?this._options.icon&&this._options.onLeftIconClick?this._options.rightIcon&&this._options.onRightIconClick?(this._hover(this._$label),this._hover(this._$leftIcon),this._hover(this._$rightIcon)):(this._hover(this._$labelWrapper,[this._$label,this._$rightIcon]),this._hover(this._$leftIcon)):this._options.rightIcon&&this._options.onRightIconClick?(this._hover(this._$labelWrapper,[this._$label,this._$leftIcon]),this._hover(this._$rightIcon)):this._hover(this._$labelWrapper):this._hover(this.element)},_setButtonCallback:function(n){var r=this,i;this._$labelWrapper&&(this._options.onLeftIconClick||this._options.onRightIconClick)?i=this._$labelWrapper:i=this.element,r._options.onClick=n,n!==null?(i.off("click"),this._options.disabled||i.on("click",function(n){r._$contentWrapper.nlTooltip("hide");if(n.ctrlKey||n.button===1||n.currentTarget.target==="_blank")return!0;if(!!NL.View.isConsole()&&!!r._options.xtkDelegated)return!0;r.preventDefault(n),r.stopPropagation(n),r._options.onClick(e(r.element),n,function(){r._options.isLink&&(r._options.newWindow?t.open(r._options.href,"_blank"):t.location=r._options.href)})})):i.off("click")},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments);var r={};r[t]=n,this.changeOptions(r)},_setXtkDelegated:function(e){this._options.xtkDelegated=e},_setBadgerValue:function(e){NL.isEmpty(e)?this._$badger&&(this.element.nlBadger("destroy"),this._$badger=null):(this._options.badgerValue=e,this._$badger?this.element.nlBadger("setValue",e):this._$badger=this.element.nlBadger({value:this._options.badgerValue}))},changeOptions:function(e){var t=NL.Utils.extend({},this._options);NL.Utils.extend(this._options,e);if(e.disabled!==r&&e.disabled!==t.disabled)e.disabled===!0?this.disable():this.enable();else{e.label!==r&&e.label!==t.label&&this._setLabel(e.label),e.minWidth!==r&&e.minWidth!==t.minWidth&&this._setWidth(e.minWidth),e.help!==r&&e.help!==t.help&&this._setTooltip(e.help);if(e.isLink!==r||e.href!==r||e.newWindow!==r)e.isLink!==r&&e.isLink!==t.isLink&&(this._options.isLink=e.isLink),e.href!==r&&e.href!==t.href&&(this._options.href=e.href),e.newWindow!==r&&e.newWindow!==t.newWindow&&(this._options.newWindow=e.newWindow),this._setLink(this._options.isLink);e.onClick!==r&&e.onClick!==t.onClick&&this._setButtonCallback(e.onClick),e.flat!==r&&e.flat!==t.flat&&this._setFlat(e.flat),e.leftRounded!==r&&e.leftRounded!==t.leftRounded&&this._setLeftRoundedCorners(e.leftRounded),e.rightRounded!==r&&e.rightRounded!==t.rightRounded&&this._setRightRoundedCorners(e.rightRounded),e.isPushed!==r&&e.isPushed!==t.isPushed&&this._setPushed(e.isPushed),e.iconSize!==r&&e.iconSize!==t.iconSize?(this._setIconSize(this._options.iconSize),this._setIcon(this._options.icon,"left"),this._setIcon(this._options.rightIcon,"right")):(e.icon!==r&&e.icon!==t.icon?this._setIcon(e.icon,"left"):e.onLeftIconClick!==r&&e.onLeftIconClick!==t.onLeftIconClick&&this._setIconCallback(e.onLeftIconClick,"left"),e.rightIcon!==r&&e.rightIcon!==t.rightIcon?this._setIcon(e.rightIcon,"right"):e.onRightIconClick!==r&&e.onRightIconClick!==t.onRightIconClick&&this._setIconCallback(e.onRightIconClick,"right")),e.badgerValue!==r&&this._setBadgerValue(e.badgerValue)}e.mode!==r&&e.mode!==t.mode&&this.setMode(e.mode),e.xtkDelegated!==r&&e.xtkDelegated!==t.xtkDelegated&&this._setXtkDelegated(e.xtkDelegated)},disable:function(){this._options.disabled=!0,this._refresh()},enable:function(){this._options.disabled=!1,this._refresh()},destroy:function(){var t=this;this._setIconCallback(null,"left"),this._setIconCallback(null,"right"),this._setButtonCallback(null),this.element.removeClass(function(){var e="",n=["nlui-button-gradient",t.currentButtonClass,t.currentPushedClass,t.currentDisabledClass,t.currentLeftIconPushedClass,t.currentRightIconPushedClass,t.currentIconsClass,t.leftPointedCornerClass,t.rightPointedCornerClass];for(var i=0;i<n.length;i++)n[i]!==r&&(e+=n[i]+" ");return e}),this._setBadgerValue(null),this._$contentWrapper.remove(),e.NL.nlWidget.prototype.destroy.call(this)}};e.widget("NL.nlButton",e.NL.nlWidget,o)})(jQuery,window,document)
;"use strict";(function(e){e.widget("NL.nlTooltip",e.NL.nlWidget,{options:{gravity:"autoNS",margin:75,fade:!0,opacity:1},$tip:undefined,_create:function(){var t=this.options.title;typeof t=="string"&&(this.options.title=function(){return t}),this._handleGravity(this.options.gravity),this.element.tipsy(e.extend({},this.options,{delayIn:500}));var n=this.element.data("tipsy");this.$tip=n.tip()},show:function(){this.element.tipsy("show"),this.$tip.addClass("nlui-tooltip")},hide:function(){this.element.tipsy("hide")},enable:function(){this.element.tipsy("enable")},disable:function(){this.element.tipsy("disable")},setTitle:function(e){this.element.attr("original-title",e)},_cleverPosition:function(t){return function(){var n="",r=this,i;return t==="autoNS"?(i=e(r).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n",n="a"):t==="autoWE"?i=e(r).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w":i=t,i.charAt(0)+n}},_handleGravity:function(t){t==="autoNS"?this.options.gravity=this._cleverPosition("autoNS"):t==="autoWE"?this.options.gravity=this._cleverPosition("autoWE"):this.options.gravity=e.fn.tipsy.autoBounds(this.options.margin,this.options.gravity)},reposition:function(e){this._handleGravity(e),this.element.data("tipsy").options.gravity=this.options.gravity,this.element.tipsy("show")}}),e.widget("NL.nlPopover",e.NL.nlWidget,{options:{gravity:"w",fade:!0,html:!0,title:"A title",text:"Hello world"},$tip:undefined,_create:function(){var e=this;this.options.originalTitle=this.options.title,this.options.title=function(){return e._getHTMLInner()},this.element.tipsy(this.options);var t=this.element.data("tipsy");this.$tip=t.tip()},show:function(){this.element.tipsy("show"),this.$tip.addClass("nlui-popover")},hide:function(){this.element.tipsy("hide")},_getHTMLInner:function(){var t=this.options.originalTitle,n=this.options.text,r=e("<h3></h3>").addClass("nlui-popover-title").text(t),i=e("<div></div>").addClass("nlui-popover-text"),s=e("<p></p>").text(n);s.appendTo(i);var o=e("<div></div>").addClass("nlui-popover-inner");r.appendTo(o),i.appendTo(o);var u=e("<div></div>");return o.appendTo(u),u.html()}})})(jQuery)
;(function(e){function n(e,t){return typeof e=="function"?e.call(t):e}function r(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}var t;r.prototype={show:function(){t&&t.hide(),t=this;var r=this.getTitle();if(r&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](r),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),o=i[0].offsetWidth,u=i[0].offsetHeight,a=n(this.options.gravity,this.$element[0]),f;switch(a.charAt(0)){case"n":f={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-o/2};break;case"s":f={top:s.top-u-this.options.offset,left:s.left+s.width/2-o/2};break;case"e":f={top:s.top+s.height/2-u/2,left:s.left-o-this.options.offset};break;case"w":f={top:s.top+s.height/2-u/2,left:s.left+s.width+this.options.offset}}if(s.left===0&&s.top===0)return;if(a.length==2){if(a.charAt(1)=="a"){var l="";f.left<0?l="w":f.left+o>e(window).width()+e(document).scrollLeft()&&(l="e"),a=a.charAt(0)+l}a.charAt(1)=="w"?f.left=s.left+s.width/2-15:a.charAt(1)=="e"&&(f.left=s.left+s.width/2-o+15)}i.css(f).addClass("tipsy-"+a),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+a.charAt(0),this.options.className&&i.addClass(n(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove(),t=null},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("original-title")!="string")&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return typeof n.title=="string"?e=t.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");return i||(i=new r(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function s(){var e=i(this);e.hoverState="in",t.delayIn==0?e.show():(e.fixTitle(),setTimeout(function(){e.hoverState=="in"&&e.show()},t.delayIn))}function o(){var e=i(this);e.hoverState="out",t.delayOut==0?e.hide():setTimeout(function(){e.hoverState=="out"&&e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if(typeof t=="string"){var n=this.data("tipsy");return n&&n[t](),this}t=e.extend({},e.fn.tipsy.defaults,t),t.live||this.each(function(){i(this)});if(t.trigger!="manual"){var u=t.live?"live":"bind",a=t.trigger=="hover"?"mouseenter":"focus",f=t.trigger=="hover"?"mouseleave":"blur";this[u](a,s)[u](f,o)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,n){return function(){var r={ns:n[0],ew:n.length>1?n[1]:!1},i=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,o=e(this);return o.offset().top<i&&(r.ns="n"),o.offset().left<s&&(r.ew="w"),e(window).width()+e(document).scrollLeft()-o.offset().left<t&&(r.ew="e"),e(window).height()+e(document).scrollTop()-o.offset().top<t&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}}})(jQuery)
;"use strict";(function(e,t,n,r){e.widget("NL.nlBadger",e.NL.nlWidget,{options:{onChange:function(e){},onValueChanged:function(e){},value:"",config:{size:24,position:"top-right",mode:"default",image:null,animation:!0,autoShow:!0}},_create:function(){this._oldCssPosition=this.element.css("position"),this._oldCssOverflow=this.element.css("overflow");if(this._oldCssOverflow!=="visible"||this._oldCssPosition!=="relative")NL.log.warn("Badger widget changes parent display properties that may affect its rendering"),this.element.css("position","relative");this._value=this.options.value,this._position=this.options.config.position,this._size=this.options.config.size,this._type=typeof this.options.value,this._mode=this.options.config.mode,this._image=this.options.config.image,this._$badgeElem=n.createElement("div"),this._$badgeInner=n.createElement("div"),this._$badgeContent=n.createElement("div"),this.refreshDisplay(),this._$badgeInner.appendChild(this._$badgeContent),this._$badgeElem.appendChild(this._$badgeInner),this.element.append(e(this._$badgeElem).hide()),this.options.config.autoShow&&this.show()},_setClasses:function(t,n,r,i){var s="nlui-badger";this._$badgeElem.className=s+" "+s+"-"+n+" "+s+"-"+t+" animated",this._$badgeInner.className=s+"-inner "+s+"-"+i,this._$badgeContent.className=s+"-content "+s+"-"+r},setValue:function(t){this._image=null,this._type=typeof t,this._value=t,this.refreshDisplay()},setImage:function(t){this._value=null,this._image=NL.isEmpty(t)?null:t,this.refreshDisplay()},refreshDisplay:function(){e(this._$badgeElem).is(":visible")||this.show();var n;this._image!==null?(n=this._size>=30?"nlui-icon20":"nlui-icon",e(this._$badgeContent).html(e("<span>",{"class":"nlui-badger-image light ui-icon "+n+" nlui-icon-inverse "+this._image}))):this._$badgeContent.innerHTML=this._value,this._setClasses(this._position,this._size,this._type,this._mode),this.options.config.animation&&this._animate("pulse")},_animate:function(r,i,s){var o=this;if(!this.options.config.animation)return i&&i(o),s&&s(o),!1;i&&i(this),e(this._$badgeElem).removeClass(r).addClass(r);var u=t.setTimeout(function(){e(o._$badgeElem).removeClass(r),s&&s(o)},200)},setMode:function(t){this._mode=t,this.refreshDisplay()},hide:function(){e(this._$badgeElem).is(":visible")&&this._animate("hide",function(){},function(t){e(t._$badgeElem).hide()})},show:function(){e(this._$badgeElem).is(":visible")||this._animate("show",function(t){e(t._$badgeElem).show()})},setPosition:function(t){this._position=t,this.refreshDisplay()},setSize:function(t){this._size=t,this.refreshDisplay()},getValue:function(){return NL.isNundef(this._value)?this._image:this._value},destroy:function(){e(this._$badgeElem).remove(),this.element.css("overflow",this._oldCssOverflow).css("position",this._oldCssPosition),e.NL.nlWidget.prototype.destroy.call(this)}})})(jQuery,window,document)
;"use strict";(function(e,t,n){e.widget("NL.nlSubmenu",e.NL.nlWidget,{options:{menuItems:[],style:"",addAnchorClass:!1,autoOpen:!1,autoClose:!1,standalone:!1,onMenuDisplay:function(e){},onMenuHide:function(e){}},_$menus:n,_menuEntries:n,_dockingPosition:"",_unbindOnDestroy:n,_buildMenuFlat:function(t,n){var r=this,i=e("<li></li>"),s=e.extend({},t,{rightIcon:"",mode:"submenu"});i.on("mouseover",function(){e(this).addClass("nlui-state-hover")}).on("mouseout",function(){e(this).removeClass("nlui-state-hover")}),i.addClass("ui-menu-item nlui-submenu-noPadding");var o=e("<span></span>").nlButton(s).appendTo(i);return{item:i,button:o}},_buildMenuEntry:function(t,r,i){var s=this,o=e("<li></li>"),u=null;r||o.addClass("ui-menu-item"),t=t!==null&&t.separator?null:t;if(t===null)o=e('<li class="nlui-horizontal-separator ui-menu-item"> </li>');else{o.addClass("nlui-submenu-noPadding");var a=e.extend({},t,{mode:"submenu"});t.subCommands&&(a=e.extend({},a,{rightIcon:"ui-icon-triangle-1-e"})),i===1&&(a=e.extend({},a,{minWidth:this.element.width()}));if(a.onClick){var f=a.onClick;a.onClick=function(e,t,n){f(e,t,n),s.collapse()}}u=e("<span></span>").nlButton(a).appendTo(o)}return t&&t.id!==n&&(o.data("commandId",t.id),this._menuEntries[t.id]=o),{item:o,button:u}},_disableCommand:function(e,t){e.addClass("ui-state-disabled")},_buildSubMenu:function(e,t,n,r,i){var s=this,o=null;return NL.isArray(r)?(o=this._buildMenuPanel(r,null,i+1).appendTo(e).css("position","absolute"),i>0&&o.addClass("nlui-submenu-submenu"),s._bindMouseEvents(e,o,i)):NL.isFunction(n.subCommands)&&(s._bindItemMouseEvents(e,i),t.addClass("nlui-submenu-asyncRightArrow"),t.nlButton("option","onRightIconClick",function(t,r){var o=t.nlButton("option","rightIcon");t.nlButton("option","rightIcon","/xtk/img/loading.gif"),n.subCommands.call(s,n,function(r){t.nlButton("option","rightIcon",o),e.find(".nlui-submenu").remove();var u=s._buildMenuPanel(r,null,i+1).appendTo(e).addClass("nlui-submenu-submenu").css("position","absolute");s._clearBinding(e),s._bindMouseEvents(e,u,i);var a=s._getSubMenuPosition(e,i);(s.options.autoOpen&&i===0||i>0)&&s._mouseOverCB(null,e,u,a,i)}),r.stopPropagation()})),o},_buildMenuPanel:function(t,n,r){var i=this,s,o="li",u=this;s=e("<ul></ul>"),s.addClass("nlui-submenu ui-menu ui-widget ui-widget-content"),this.options.standalone&&s.addClass("nlui-submenu-standalone"),n?(s.appendTo(n),s.css("position","absolute"),s.css("left",n.width()+"px")):s.appendTo(this.element);var a=t.length,f=[],l,c=function(t){u.options.controller?u.options.controller.executeCommand(e(this),function(n){n&&(u._$commandClicked=e(this),t.data.call(),t.preventDefault())}):(u._$commandClicked=e(this),t.data.call(),t.preventDefault())},h=[],p=!0;for(l=0;l<t.length;l++){var d=t[l];if(!d){if(p)continue;h.push(null),p=!0}else{if(d.hidden)continue;h.push(d),p=!1}}h[h.length-1]===null&&h.splice(h.length-1,1),t=h;for(l=0;l<t.length;l++){var d=t[l],v,m;i.options.style==="flat"?m=i._buildMenuFlat(d,l):m=i._buildMenuEntry(d,null,r),v=m.item,d!==null&&(NL.isNundef(d.subCommands)?i._bindItemMouseEvents(v,r):i._buildSubMenu(v,m.button,d,d.subCommands,r),d.activationState==="disabled"&&i._disableCommand(v,d)),f.push(v)}for(l=0;l<f.length;l++)s.append(f[l]);return this._$menus.push(s),s.toggle(!1),s},_computeStyle:function(){var e="ui-corner-all",t="",n;for(n=0;n<this._$menus.length;n++)this._$menus[n].removeClass(e),this._$menus[n].addClass(t)},_create:function(){var t=this,r=this.element;this._$menus=[],this._menuEntries=[],this._dockingPosition="",this._unbindOnDestroy=[],this._$root=n,this.options.popableManager.addPopable(this),r.css("pointer","cursor"),this.options.addAnchorClass&&r.addClass("nlui-submenu-anchor"),t._computeStyle();var i=t._buildSubMenu(r,null,null,this.options.menuItems,0);this.options.autoOpen&&i&&this._mouseOverCB(null,e(this.element),i,this._getSubMenuPosition(e(this.element),0),0),this._$root=i},_getSubMenuPosition:function(t,n){var r=this,i={my:"left top",at:"right top",of:t,collision:"flip"},s=i;return n===0&&(i={my:"left top",at:"left bottom",collision:"flip",of:t},s=e.extend({using:function(t){t.top<0?r._dockingPosition="top":r._dockingPosition="bottom",e(this).position(i)}},i)),s},isOwnerOf:function(t,n){var r=this;return NL.DOMUtils.isDescendantOf(t,e(r.element))||t.is(this.element)},collapse:function(t){var n=e(this.element);t&&(n=t),n.find(".nlui-submenu").hide(),n.removeClass("nlui-state-hover nlui-submenu-opened"),n.is(this.element)&&this.options.onMenuHide.call(this.element)},_mouseOverCB:function(t,n,r,i,s){var o=this;n.siblings().each(function(t,n){e(n).data("out",!0)}),n.data("out",!1),r.data("out",!1),setTimeout(function(){r.data("out")||(s===0&&(n.removeClass("ui-corner-all"),n.addClass("nlui-state-hover ui-corner-top")),n.siblings().each(function(t,n){o.collapse(e(n))}),r.position(i).show().position(i).hide().show(),o.options.onMenuDisplay.call(o.element))},1)},_bindMouseEvents:function(t,r,i){var s=this,o=e(this.element),u=this._getSubMenuPosition(t,i);r.mouseover(function(e){i===0&&t.removeClass("ui-corner-all"),t.data("hoverson",!0),r.data("out",!1),s.options.onMenuDisplay.call(s.element)}),r.mouseout(function(i){t.data("hoverson",!1),r.data("out",!0),setTimeout(function(){if(r.data("out")){var o=!1,u=r.parents(".nlui-submenu");s.options.autoClose&&(o=!0),u.find(".ui-menu-item").each(function(t,r){if(e(r).data("hoverson")||e(r).data("out")!==n&&!e(r).data("out"))return o=!0,!1}),o?s.collapse(t):e(i.target).is(r)&&s.collapse(r)}},252)}),r.click(function(e){t.data("hoverson",!1),r.data("out",!0),s.collapse(),t.removeClass("nlui-state-hover nlui-submenu-opened")});var a=function(e){s._mouseOverCB(e,t,r,u,i)};t.mouseover(a),this._unbindOnDestroy.push({obj:t,evt:"mouseover",fun:a});var f=function(r){t.data("out",!0),setTimeout(function(){if(!t.data("hoverson")&&t.data("out")){var r=!1;s.options.autoClose&&(r=!0),t.siblings().each(function(t,i){if(e(i).data("hoverson")||e(i).data("out")!==n&&!e(i).data("out"))return r=!0,!1}),r&&(s.collapse(t),i===0&&t.removeClass("nlui-state-hover nlui-submenu-opened"))}},252)};t.mouseout(f),this._unbindOnDestroy.push({obj:t,evt:"mouseout",fun:f})},_clearBinding:function(e){e.unbind("mouseover"),e.unbind("mouseout")},_bindItemMouseEvents:function(t,n){var r=this,i=e(this.element),s=function(s){t.siblings().each(function(t,n){e(n).data("out",!0),r.collapse(e(n))}),t.data("out",!1),n===0&&(i.removeClass("ui-corner-all"),i.addClass("nlui-state-hover nlui-submenu-opened"))};t.mouseover(s),this._unbindOnDestroy.push({obj:t,evt:"mouseover",fun:s});var o=function(e){t.data("out",!0),r.collapse(t)};t.mouseout(o),this._unbindOnDestroy.push({obj:t,evt:"mouseout",fun:o})},dockingPosition:function(){return this._dockingPosition},getMenuItem:function(e){return this._menuEntries[e]},destroy:function(){var t,n=e(this.element);this.options.popableManager.removePopable(this);for(t=this._$menus.length-1;t>=0;t--)this._$menus[t].remove();this._$root.remove(),this._$menus=[],n.removeClass("nlui-submenu-anchor"),n.removeClass("nlui-state-hover nlui-submenu-opened"),NL.Utils.each(this._unbindOnDestroy,function(t,n){n.obj&&n.evt&&n.fun&&e(n.obj).unbind(n.evt,n.fun),n.obj&&delete n.obj}),this._unbindOnDestroy=null,e.Widget.prototype.destroy.call(this)}})})(jQuery,window)
;"use strict";NL.ns("NL.HTMLUtils"),NL.OO.defineProtocol("Clonable",["clone"]),function(){function e(e){return NL.String.endsWith(e,"px")&&(e=e.substr(0,e.length-2)),Number(e)}NL.HTMLUtils.closestLiteralFontSize=function(e){var t={"xx-small":9,"x-small":9,small:13,medium:16,large:18,"x-large":24,"xx-large":32},n="medium",r=0;for(var i in t)if(t.hasOwnProperty(i)){if(!(e>=t[i])){t[i]-e<r&&(n=i);break}n=i,r=e-t[i]}return n},NL.HTMLUtils.intFromLiteralFontSize=function(e){var t={"xx-small":1,"x-small":2,small:3,medium:4,large:5,"x-large":6,"xx-large":7};return t.hasOwnProperty(e)?t[e]:4},NL.HTMLUtils.getFontSizeEquivalents=function(e){var t={px:16,em:1,"%":100,pt:12,literal:"medium"},n={"xx-small":9,"x-small":9,small:13,medium:16,large:18,"x-large":24,"xx-large":32};if(typeof e=="string"&&e!==""){var r=new RegExp("^(([0-9]*)?((.?)([0-9]+))?)([a-z-%]+)$",""),i=r.exec(e);if(i){var s=parseFloat(i[1]),o=i[6];if(t.hasOwnProperty(o)&&o!=="literal"){var u=NL.HTMLUtils.closestLiteralFontSize(s*t.px/t[o]);return{type:o,px:s*t.px/t[o],em:s*t.em/t[o],"%":s*t["%"]/t[o],pt:s*t.pt/t[o],literal:u,literalInt:NL.HTMLUtils.intFromLiteralFontSize(u)}}if(n.hasOwnProperty(o))return{type:"literal",px:n[o],em:n[o]*t.em/t.px,"%":n[o]*t["%"]/t.px,pt:n[o]*t.pt/t.px,literal:o,literalInt:NL.HTMLUtils.intFromLiteralFontSize(o)}}}return null},NL.HTMLUtils.htmlEncode=function(e){return $("<div></div>").text(e).html()},NL.HTMLUtils.htmlDecode=function(e){return $("<div></div>").html(e).text()},NL.HTMLUtils.borderLeftWidth=function(t){return e(t.css("border-left-width"))},NL.HTMLUtils.borderTopWidth=function(t){return e(t.css("border-top-width"))},NL.HTMLUtils.borderRightWidth=function(t){return e(t.css("border-right-width"))},NL.HTMLUtils.borderBottomWidth=function(t){return e(t.css("border-bottom-width"))},NL.HTMLUtils.paddingLeft=function(t){return e(t.css("padding-left"))},NL.HTMLUtils.paddingTop=function(t){return e(t.css("padding-top"))},NL.HTMLUtils.paddingRight=function(t){return e(t.css("padding-right"))},NL.HTMLUtils.paddingBottom=function(t){return e(t.css("padding-bottom"))},NL.HTMLUtils.marginLeft=function(t){return e(t.css("margin-left"))},NL.HTMLUtils.marginTop=function(t){return e(t.css("margin-top"))},NL.HTMLUtils.marginRight=function(t){return e(t.css("margin-right"))},NL.HTMLUtils.marginBottom=function(t){return e(t.css("margin-bottom"))}}(),NL.ns("NL.DOMUtils"),function(){NL.DOMUtils.isDescendantOf=function(e,t){return $(e).parents().filter(t).length!==0},NL.DOMUtils.eventPositionIsInside=function(e,t){var n=e.pageX,r=e.pageY,i=!1;return t.each(function(e,t){var s=$(t).offset(),o=s.left,u=s.top,a=o+$(t).outerWidth(!0),f=u+$(t).outerHeight(!0);return i=!(n>a||n<o||r>f||r<u),!i}),i}}(),NL.ns("NL.CSS"),function(){NL.CSS.Color=function(e,t,n,r){this._forceHex=!1,arguments.length===1?e===undefined?(this._hexValue=null,this._forceHex=!0):this.parse(e):arguments.length===2?this.parse(e,t):(this._red=e,this._green=t,this._blue=n,this._alpha=r,this._colorChanged())},NL.CSS.Color.prototype={toCssString:function(e){$.browser.msie&&$.browser.version>=8&&$.browser.version<9&&(e="hex");if(!e)return this._alpha===0?"transparent":this._alpha!==undefined&&this._red!==undefined&&this._green!==undefined&&this._blue!==undefined?"rgba("+this._red+", "+this._green+", "+this._blue+", "+this._alpha+")":this._origin!==undefined?this._origin:this._alpha===undefined&&this._red!==undefined&&this._green!==undefined&&this._blue!==undefined?this.getHex():undefined;switch(e){case"hex":return this.getHex();case"rgb":return"rgb("+this._red+", "+this._green+", "+this._blue+")";case"rgba":return"rgba("+this._red+", "+this._green+", "+this._blue+", "+this._alpha+")";default:return this._origin!==undefined?this._origin:null}},_colorChanged:function(){this._hexValue=null},parse:function(e,t){this._origin=e;var n=e||"";this._colorChanged();if(e=="transparent")this._red=255,this._green=255,this._blue=255,this._hexValue="#FFFFFF",this._alpha=0;else if(n.charAt(0)=="#")n.length===4?(this._red=parseInt(n.charAt(1)+n.charAt(1),16),this._green=parseInt(n.charAt(2)+n.charAt(2),16),this._blue=parseInt(n.charAt(3)+n.charAt(3),16),this._hexValue="#"+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)+n.charAt(3)+n.charAt(3)):(this._red=parseInt(n.charAt(1)+n.charAt(2),16),this._green=parseInt(n.charAt(3)+n.charAt(4),16),this._blue=parseInt(n.charAt(5)+n.charAt(6),16),this._hexValue="#"+n.charAt(1)+n.charAt(2)+n.charAt(3)+n.charAt(4)+n.charAt(5)+n.charAt(6));else if(n.search("rgb")!=-1){var r,i=!1;n.search("rgba")!=-1?(i=!0,r=/(.*?)rgba\((\d+), (\d+), (\d+), ([-+]?[0-9]*\.?[0-9]*)\)/.exec(n)):r=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(n),r?(this._red=parseInt(r[2],10),this._green=parseInt(r[3],10),this._blue=parseInt(r[4],10),i&&(this._alpha=parseFloat(r[5],10)),this._hexValue=this.getHex()):(this._hexValue=e,this._forceHex=!0)}else this._hexValue=e,this._forceHex=!0;arguments.length===2&&(this._alpha=t)},getAlpha:function(){return this._alpha===undefined?null:this._alpha},getHex:function(){if(this._hexValue||this._forceHex)return this._hexValue;var e=this._red!==undefined?this._red.toString(16):undefined,t=this._green!==undefined?this._green.toString(16):undefined,n=this._blue!==undefined?this._blue.toString(16):undefined;return NL.isNundef(e)||NL.isNundef(t)||NL.isNundef(n)?undefined:(e=e.length===1?0+e:e,t=t.length===1?0+t:t,n=n.length===1?0+n:n,this._hexValue="#"+e+t+n,this._hexValue)},clone:function(){return new NL.CSS.Color(this._red,this._green,this._blue,this._alpha)},isEqual:function(e){return this._alpha===e._alpha&&this._blue===e._blue&&this._forceHex===e._forceHex&&this._green===e._green&&this._hexValue===e._hexValue&&this._origin===e._origin&&this._red===e._red}},NL.CSS.Border=function(e,t,n){this._borderColor=new NL.CSS.Color(null),this._borderWidth=0,this._borderStyle="none",arguments.length===1?typeof e=="object"&&this.getAttributesFrom(e):arguments.length===3&&(this.set("borderColor",n),this.set("borderWidth",e),this.set("borderStyle",t))},NL.CSS.Border.prototype={_getBorderColor:function(){return this._borderColor},_setBorderColor:function(e){e instanceof NL.CSS.Color&&(this._borderColor=e),typeof e=="string"&&(this._borderColor=new NL.CSS.Color(e))},_getBorderWidth:function(){return this._borderWidth},_setBorderWidth:function(e){typeof e=="string"?this._borderWidth=parseInt(e.replace("px",""),10):this._borderWidth=parseInt(e,10)},_getBorderStyle:function(){return this._borderStyle},_setBorderStyle:function(e){var t=["none","solid","dotted","dashed","double","groove","ridge","inset","outset"];this._borderStyle=$.inArray(e,t)>-1?e:null},get:function(e){switch(e){case"borderColor":return this._getBorderColor();case"borderWidth":return this._getBorderWidth();case"borderStyle":return this._getBorderStyle()}},set:function(e,t){switch(e){case"borderColor":this._setBorderColor(t);break;case"borderWidth":this._setBorderWidth(t);break;case"borderStyle":this._setBorderStyle(t)}},getAttributesFrom:function(e){var t=e[0].style.borderLeftWidth!==""?e[0].style.borderLeftWidth.replace("px",""):0,n=e[0].style.borderLeftStyle!==""?e[0].style.borderLeftStyle:"none";this._borderColor=new NL.CSS.Color(e.css("border-left-color")),this._borderWidth=parseInt(t,10),this._borderStyle=n},applyAttributesTo:function(e){var t=["left","top","right","bottom"],n=this;NL.Utils.each(t,function(t,r){e.css("border-"+r+"-color",n._borderColor.toCssString("hex")),e.css("border-"+r+"-width",n._borderWidth+"px"),e.css("border-"+r+"-style",n._borderStyle)})},toCssString:function(){return this._borderColor!==null&&this._borderWidth!==null&&this._borderStyle!==null&&this._borderColor.toCssString("hex")!==null?this._borderWidth+"px "+this._borderColor.toCssString("hex")+" "+this._borderStyle:null},clone:function(){return new NL.CSS.Border(this._borderWidth,this._borderStyle,this._borderColor)},isEqual:function(e){return this._borderColor===e._borderColor&&this._borderStyle===e._borderStyle&&this._borderWidth===e._borderWidth}},NL.CSS.Background=function(e,t,n,r){this._color=new NL.CSS.Color(null),this._image=null,this._position=null,this._tiling=null,arguments.length===1?typeof e=="object"&&this.getAttributesFrom(e):arguments.length===4&&(this.set("color",e),this.set("image",t),this.set("position",n),this.set("tiling",r))},NL.CSS.Background.prototype={_getColor:function(){return this._color},_setColor:function(e){e instanceof NL.CSS.Color&&(this._color=e),typeof e=="string"&&(this._color=new NL.CSS.Color(e))},_getImage:function(){return this._image},_setImage:function(e){typeof e=="object"?this._image=e:this._image=e===null?"none":e},_getPosition:function(){return this._position},_setPosition:function(e){var t=/(\d+)% (\d+)%/.exec(e);if(t){var n=!1,r=!1,i,s;switch(t[1]){case"0":i="left",n=!0;break;case"50":i="center",n=!0;break;case"100":i="right",n=!0}switch(t[2]){case"0":s="top",r=!0;break;case"50":s="center",r=!0;break;case"100":s="bottom",r=!0}n&&r&&(this._position=i+" "+s)}else{var o=["left","right","top","bottom","center"],u=!0;NL.isEmpty(e)||($.each(e.split(" "),function(e,t){u=$.inArray(t,o)>-1}),this._position=u?e:null)}},_getTiling:function(){return this._tiling},_setTiling:function(e){if(e.search("repeat")!=-1)switch(e){case"repeat":this._tiling="both";break;case"repeat-y":this._tiling="vertical";break;case"repeat-x":this._tiling="horizontal";break;case"no-repeat":this._tiling="none"}else{var t=["horizontal","vertical","both","none"],n=!0;n=$.inArray(e,t)>-1,this._tiling=n?e:null}},get:function(e){switch(e){case"color":return this._getColor();case"image":return this._getImage();case"position":return this._getPosition();case"tiling":return this._getTiling()}},set:function(e,t){switch(e){case"color":this._setColor(t);break;case"image":this._setImage(t);break;case"position":this._setPosition(t);break;case"tiling":this._setTiling(t)}},getAttributesFrom:function(e){this._setColor(e.css("background-color")),this._setImage(e.css("background-image")),this._setPosition(e.css("background-position")),this._setTiling(e.css("background-repeat"))},applyAttributesTo:function(e){if(e!==null){e.css("background-color",this._color.toCssString()),this._image!=="none"&&e.css("background-image","url('"+this._image+"')"),e.css("background-position",this._position);var t;switch(this._tiling){case"both":t="repeat";break;case"vertical":t="repeat-y";break;case"horizontal":t="repeat-x";break;case"none":t="no-repeat"}e.css("background-repeat",t)}},clone:function(){return new NL.CSS.Background(this._color,this._image,this._position,this._tiling)},isEqual:function(e){return this._color===e._color&&this._image===e._image&&this._position===e._position&&this._tiling===e._tiling}},NL.CSS.Geometry=function(e,t,n,r){this._top=0,this._left=0,this._width=0,this._height=0,arguments.length===1?typeof n=="object"&&this.getAttributesFrom(n):arguments.length===4&&(this.set("width",n),this.set("height",r),this.set("top",e),this.set("left",t))},NL.CSS.Geometry.prototype={set:function(e,t){typeof t=="string"&&t.toLowerCase()!=="auto"&&(t=parseInt(t.replace("px",""),10)||0);switch(e){case"width":this._setWidth(t);break;case"height":this._setHeight(t);break;case"top":this._setTop(t);break;case"left":this._setLeft(t)}},get:function(e){switch(e){case"width":return this._getWidth();case"height":return this._getHeight();case"top":return this._getTop();case"left":return this._getLeft()}},_getWidth:function(){return this._width},_getHeight:function(){return this._height},_getLeft:function(){return this._left},_getTop:function(){return this._top},_setWidth:function(e){this._width=e},_setHeight:function(e){this._height=e},_setLeft:function(e){this._left=e},_setTop:function(e){this._top=e},getAttributesFrom:function(e){this.set("width",e.css("width")),this.set("height",e.css("height")),this.set("left",e.css("left")),this.set("top",e.css("top"))},applyAttributesTo:function(e){e!==null&&(this._top>0||this._left>0?e.css("position","relative"):e.css("position","static"),e.css("width",this._width+"px"),e.css("height",this._height+"px"),e.css("left",this._left+"px"),e.css("top",this._top+"px"))},clone:function(){return new NL.CSS.Geometry(this._top,this._left,this._width,this._height)},isEqual:function(e){return this._top===e._top&&this._left===e._left&&this._width===e._width&&this._height===e._height}}}()
;"use strict";(function(e,t){var n={$_bottomZone:null,_bottomZoneButtonMargin:80,_defaultButtonWidth:74,options:{noTitleBar:!1,noPrimaryFirstButton:!1,width:320,onCancel:function(e,t){}},_create:function(){this.locale=NL.session.locale,this.options.minWidth<this.options.width&&(this.options.minWidth=this.options.width),this.options.minHeight<this.options.height&&(this.options.minHeight=this.options.height),this._attachCancelOnClose(),this._handleButtons(),e.ui.dialog.prototype._create.call(this),this.element.addClass("nlui-uiDialog");var t=this.uiDialog.find(".ui-dialog-buttonpane");this.$_bottomZone=e("<div></div>").addClass("nlui-uiDialog-bottom-zone").appendTo(t),this._refreshTitleBar(),this._refreshBottomZone()},_setOption:function(t,n){switch(t){case"buttons":this.options.buttons=n,this._handleButtons();break;case"close":this.options.close=n,this._attachCancelOnClose()}e.ui.dialog.prototype._setOption.apply(this,arguments);switch(t){case"buttons":case"noPrimaryFirstButton":this._refreshButtons();break;case"bottomZone":this._refreshBottomZone();break;case"noTitleBar":this._refreshTitleBar()}},_attachCancelOnClose:function(){var t=this,n=this.options.close;this.options.close=function(r,i){n&&n.apply(this,arguments);var s=r.originalEvent?e(r.originalEvent.currentTarget):null;s&&s.is("button")&&(s.attr("nl-data-cancels")||s.is(":not(button)"))&&t.options.onCancel.apply(this,arguments)}},_handleButtons:function(){var e=this,t,n=this.options.buttons;if(NL.isObject(n))this._buttonsAsArray=!1;else if(NL.isArray(n)){this._buttonsAsArray=!0;for(t=0;t<n.length;t++)n[t].cancels&&(n[t].click&&NL.log.warn("A cancelling button can't have a click callback defined."),n[t].click=function(t){e.close(t)})}},destroy:function(){e.ui.dialog.prototype.destroy.call(this),this.$_bottomZone.remove()},getButtonSet:function(){return this.uiDialog.find(".ui-dialog-buttonpane .ui-dialog-buttonset")},getButton:function(e){return this.getButtonSet().find("#"+e)},getButtons:function(){return this.getButtonSet().find("button")},getBottomZone:function(){return this.uiDialog.find(".ui-dialog-buttonpane .nlui-uiDialog-bottom-zone")},getContentZone:function(){return this.uiDialog.find(".ui-dialog-content")},open:function(){e.ui.dialog.prototype.open.apply(this,arguments),this._refreshButtons(),this._refreshBottomZone()},cancel:function(){this.close(),this.options.onCancel&&this.options.onCancel()},_refreshButtons:function(){var t=this,n=this;this.getButtons().each(function(r,i){var s=e(this);s.removeClass("nlui-button-primary"),r===0&&!n.options.noPrimaryFirstButton&&s.addClass("nlui-button-primary"),s.outerWidth(!0)<n._defaultButtonWidth&&s.width(n._defaultButtonWidth),t._buttonsAsArray&&n.options.buttons[r]&&s.attr("nl-data-cancels",n.options.buttons[r].cancels===!0),s.blur()})},_refreshBottomZone:function(){var e=this.uiDialog.find(".ui-dialog-buttonpane"),t=this.getButtonSet();e.length>0&&this.$_bottomZone.width(e.width()-t.width()-this._bottomZoneButtonMargin).height(t.height()).appendTo(e)},_refreshTitleBar:function(){typeof this.options.noTitleBar!="undefined"&&this.options.noTitleBar&&this.uiDialogTitlebar.remove()}};e.widget("NL.nlUiDialog",e.ui.dialog,n)})(jQuery)
;"use strict";(function(e,t,n){var r=!1;NL.preventDelayedMsgBox=function(e){r=e},e.widget("NL.nlMessageBox",e.NL.nlWidget,{options:{type:"info",delay:0,timeout:0,message:"",details:"",onOpen:function(){},onCancel:function(){},onConfirm:function(){},error:null},_create:function(){var t=this;this._timer=null,this._timeout=null,this._delay=null,this._$body=null,this._$spinner=null,this._$message=null,this._$messageContent=null,this._$timer=null,this._$details=null,this.options.error&&(this.options.type="error",this.options.message=NL.String.ellipsis(this.options.error.message,120),this.options.details=this.options.error.details),this._dialogConfig={closeThick:!1,dialogClass:"nlui-messagebox nlui-messagebox-"+this.options.type,draggable:this.options.type==="confirm",resizable:!1,header:!0,modal:!0,minHeight:70,noPrimaryFirstButton:!0,title:xtk_core["dialog_"+this.options.type],removeOnClose:!0,open:this.options.onOpen,cancel:this.options.onCancel},this.options.delay?this.option("delay",this.options.delay):this._renderMessageBox()},_renderMessageBox:function(){this.element.nlDialog(this._dialogConfig),this.options.type==="loading"&&!this.options.message&&(this.options.message=xtk_core.dialog_loadingLabel()),this.option({type:this.options.type,message:this.options.message,details:this.options.details,timeout:this.options.timeout})},_showDetails:function(){var n=this.element.nlDialog("option","buttons");this._$details?this._$details.toggle():(this._$details=e("<pre></pre>",{"class":"nlui-messagebox-details",text:this.options.details}),this._$message.append(this._$details)),this.element.nlDialog("option","width",500)},_setButtons:function(t){var n=this,r=[];t==="confirm"?(r.push({label:xtk_core.dialog_doConfirm(),mode:"primary",click:function(){n.close(),NL.isFunction(n.options.onConfirm)&&n.options.onConfirm()}}),r.push({text:xtk_core.dialog_cancel(),cancels:!0})):t==="loading"?this.options.onCancel&&r.push({mode:"default",label:xtk_core.dialog_cancel(),cancels:!0}):r.push({mode:this.options.type,label:xtk_core.dialog_close(),cancels:!0}),r.length>0&&this.element.nlDialog("option",{buttons:r,noPrimaryFirstButton:t!=="confirm"})},_setMessage:function(n,r){this._$body=e("<div></div>"),this._$message=e("<div></div>",{"class":"nlui-messagebox-message"}),NL.isNundef(this._$messageContent)?(this._$messageContent=e("<span></span>",{html:r+"<br />"}),this._$message.append(this._$messageContent),this._$body.append(this._$message)):this._$messageContent.html(r+"<br />"),n==="loading"&&this._setTimer(),this.element.nlDialog("setContent",this._$body),n==="loading"&&this._setSpinner()},_setSpinner:function(){this._$spinner=e("<div></div>").addClass("nlui-messagebox-spinner").prependTo(this._$body),this.element.nlDialog("option",{header:!1,minWidth:260,width:260}),this._spinner=new Spinner({lines:13,length:7,width:3,radius:8}),this._spinner.spin(this._$spinner.get(0))},_setTimer:function(){var n=this,r=+(new Date),i=function(t){var n=Math.floor(t/60),r=t-n*60;return n<10&&(n="0"+n),r<10&&(r="0"+r),n+":"+r};this._$timer=e("<span></span>").text("(00:00)").appendTo(this._$message),this._timer&&clearInterval(this._timer),this._timer=setInterval(function(){var e=Math.floor((+(new Date)-r)/1e3);n._$timer.text("("+i(e)+")")},250)},_setOption:function(n,i){var s=this;switch(n){case"type":this._setButtons(i),i==="loading"&&this._setSpinner();break;case"message":this._setMessage(this.options.type,i);break;case"details":if(!NL.isEmpty(i)){var o=this.element.nlDialog("option","buttons");o.unshift({text:xtk_core.dialog_detail(),mode:"default",click:function(){s._showDetails()}}),this.element.nlDialog("option","buttons",o)}break;case"delay":i>0&&(this._delay=setTimeout(function(){r||s._renderMessageBox()},i*1e3));break;case"timeout":i>0&&(this._timeout=setTimeout(function(){s.close()},i*1e3))}e.Widget.prototype._setOption.apply(this,arguments)},isOpen:function(){this.element.nlDialog("isOpen")},close:function(){this.element.nlDialog("close"),clearInterval(this._timer),clearTimeout(this._timeout),clearTimeout(this._delay)}})})(jQuery,window)
;"use strict";NL.ns("NL.UI"),NL.UI.Actions=function(e){return{_source:e,refresh:function(e){e===undefined&&location.reload(!0)},back:function(){history.back()},soap:function(e){if(e.provider===undefined){NL.log.warn("Missing provider for soap call.");return}if(e.action===undefined){NL.log.warn("Missing action for soap call.");return}var t=new NL.transport.SOAP({urn:e.provider,method:e.action});$.each(e.parameters,function(e,n){typeof n.value=="string"?t.writeString(n.name,n.value):typeof n.value=="boolean"?t.writeBoolean(n.name,n.value):n.type==="byte"?t.writeByte(n.name,n.value):t.writeInt(n.name,n.value)});try{t.start({async:e.async||!1,onSuccess:this._createAction(e.onSuccess,function(){location.reload(!0)})})}catch(n){var r;typeof n=="string"?r=n:n.message!==undefined?r=n.message:r=xtk_core.soap_exception(),this._createAction(e.onError,function(){throw r}).call()}},confirmDialog:function(e){var t=this;e===undefined&&(e={});var n=$("<div></div>"),r=e.isError?xtk_core.dialog_error():xtk_core.dialog_confirm(),i=e.isError?xtk_core.dialog_error():xtk_core.dialog_confirm(),s=!0,o=e.okLabel!==undefined?e.okLabel:xtk_core.dialog_ok(),u=e.cancelLabel!==undefined?e.cancelLabel:xtk_core.dialog_cancel();r=e.title!==undefined?e.title:r,i=e.msg!==undefined?e.msg:i,s=e.modal!==undefined?e.modal:s,n.$contentMsg=$("<div></div>").appendTo(n),n.$contentError=$('<div id="" class="ui-state-error ui-corner-all" style="display: none;padding: 8px; margin-top: 6px"><p><span class="ui-icon ui-icon-alert" style="float:left; margin-right: .3em"></span><strong><div id="errMsg"></div></strong></p></div>').appendTo(n);var a=$.extend(e,{title:r,modal:s,autoOpen:!1,minWidth:350,minHeight:150,width:100,buttons:[{id:"ok",text:o,click:function(){try{t._createAction(e.onConfirm).call(),$(this).nlDialog("close")}catch(r){n.$contentError.show(),n.$contentError.html('<p><span id="message">'+r+"</span></p>")}}},{id:"cancel",text:u,click:function(){t._createAction(e.onCancel).call(),$(this).nlDialog("close")}}]});$("body").prepend(n),n.nlDialog(a);if(e.isError===!0)n.$contentError.show(),n.$contentError.html('<p><span id="message">'+i+"</span></p>");else if(e.isWarning===!0){var f=$("<p></p>");if(e.warnMsg!==undefined)var l=$('<span id="message"></span>').nlActionMessage({message:e.warnMsg,state:"warning",displayIcon:"message"}).appendTo(f);var c=$('<p style="margin-top: 8px"></p>').append($("<span></span>").text(i));n.$contentMsg.append(f).append(c)}else n.$contentMsg.html('<p><span id="message">'+i+"</span></p>");n.nlDialog("open")},webAppDialog:function(e){var t=!1;t=e.modal!==undefined?e.modal:t;var n=$("<div></div>");$("body").prepend(n);var r=$.extend(e,{modal:t,customBtn:".ui-button:visible",webApp:e.name,onClose:e.onClose!==undefined?this._createAction(e.onClose):null,webAppParams:e.params});n.webAppDialog(r),n.webAppDialog("open")},alert:function(e){alert(e)},customCall:function(e){var t=window,n;if($.isArray(e.call)&&e.call.length>0){var t=window;for(var r=0;r<e.call.length-1;r++)t=t[e.call[r]];n=e.call[e.call.length-1]}else typeof e.call=="string"&&(n=e.call);if(n===undefined)throw"No function call set.";if(!$.isFunction(t[n]))throw"No function ["+n+"] found.";t[n].apply(t,e.callArgs)},_createAction:function(e,t){var n=this,r,i=this._source!==undefined?this._source:this;if($.isFunction(e))r=function(t){e.call(i)};else if($.isPlainObject(e)){var s;this._source&&$.isFunction(this._source[e.method])?s=this._source[e.method]:$.isFunction(this[e.method])&&(s=this[e.method]),$.isFunction(s)?$.isPlainObject(e.args)?r=function(t){s.call(n,e.args)}:$.isArray(e.args)?r=function(t){s.apply(n,e.args)}:r=function(e){s.call(n)}:NL.log.warn("No action found (name: "+e.method+")")}else $.isFunction(t)?r=function(e){t.call(n)}:r=function(e){};return r},createActionCommand:function(e){if(e.action!==undefined)return this._createAction(e.action);if(e.url!==undefined)return function(t){document.location.href=e.url}}}},NL.UI.Actions.disable=function(e){var t=e.attr("nluiActionState");if(t===undefined||t=="enabled"){var n=e.data("events");if(n){var r={};$.each(n,function(t,n){r[t]=[];while(n.length)r[t].push(n[0].handler),e.unbind(t,n[0])}),e.data("storedEventsHandlers",r)}e.attr("nluiActionState","disabled")}},NL.UI.Actions.enable=function(e){var t=e.attr("nluiActionState");if(t===undefined||t=="disabled"){if(e.data("storedEventsHandlers")!==undefined){var n=e.data("storedEventsHandlers");$.each(n,function(t,n){var r=n.length;for(var i=0;i<r;i++)e.bind(t,n[i])})}e.attr("nluiActionState","enabled")}},NL.UI.Controller=function(e){e=e||{},this._model=e.model||{},this._commands=e.commandConfigs||{},this._views=e.views||{},this._viewObservers=[],this._dataObservers=[],this._transaction=null,this._recursionLevel=0,this._pageController=e.pageController||!1,this._unsavedText=e.unsavedText||xtk_core.ui_unsavedData(),this._dirty=!1;var t=this,n={onCheck:function(e){return!0},onChange:function(e,t,n,r){},onSave:function(e){return e.success&&e.success(),!0},onCancel:function(){},onBeforeExecuteCommand:function(e,t){},onDirtyChanged:function(e){}},r={onCheck:e.onCheck,onChange:e.onChange,onSave:e.onSave,onCancel:e.onCancel,onBeforeExecuteCommand:e.onBeforeExecuteCommand,onDirtyChanged:e.onDirtyChanged};this._callbacks=$.extend({},n,r),this._callbacks.onRefreshVisibility=[],e.onRefreshVisibility&&this._callbacks.onRefreshVisibility.push({method:e.onRefreshVisibility,observer:null}),this._pageController&&$(window).on("beforeunload",function(){if(t.isDirty())return xtk_core.ui_unsavedData()})},NL.UI.Controller.prototype={setModel:function(e){this._model=e,this.setDirty(!1)},getModel:function(){return NL.log.warn("The controller 'getModel' method is deprecated. Please use the controller 'getValue' method on each item instead."),this._model},startTransaction:function(){NL.assert(!this._transaction,"Controller is already in transaction"),this._transaction={created:new Date,model:$.extend(!0,{},this._model)}},commit:function(){NL.assert(this._transaction,"Controller is not in transaction"),this._transaction=null,this.refresh()},rollback:function(){NL.assert(this._transaction,"Controller is not in transaction"),this._transaction&&(this._model=this._transaction.model),this._transaction=null,this._refreshVisibility(),this.refresh()},isInTransaction:function(){return!!this._transaction},getItem:function(e){return this._model[e]?this._model[e]:undefined},getItemErrors:function(e){var t=this.getItemAttribute(e,"error");return NL.isEmpty(t)?null:t},setItemErrors:function(e,t){NL.isEmpty(t)&&(t=null),NL.isString(t)&&(t=[t]),this.setItemAttribute(e,"error",t)},getItemAttribute:function(e,t){var n=this._model[e]?this._model[e]:undefined;return n===null||n===undefined?null:n[t]},setItemAttribute:function(e,t,n,r){var i=this.getItem(e),s=i[t];if(r){if(s===null||s===undefined)i[t]=n}else i[t]=n},setItemAttributes:function(e,t,n){var r=this;$.each(t,function(t,i){r.setItemAttribute(e,t,i,n)})},_setValue:function(e,t,n,r){var i=!1;if(this._recursionLevel>10)return NL.log.warn("Too many levels of recursion"),i;this._recursionLevel++,this._model[e]||(this._model[e]={value:undefined});var s=this._model[e],o=!!n;if(o||!NL.Utils.isEqual(s.value,t)){i=!0;var u=s.value;s.value=t,this.setDirty(!0);var a=NL.isDevDebug()?NL.log.error:NL.log.warn;try{this._checkItem(e)}catch(f){a("Error while checking the item "+e)}try{this._onChange(e,t,u,r)}catch(f){a("Error while processing the custom onChange method for item "+e)}}return this._recursionLevel--,i},setValue:function(e,t,n,r){var i=this._setValue(e,t,n,r);if(i)try{this._refreshVisibility()}catch(s){var o=NL.isDevDebug()?NL.log.error:NL.log.warn;o("Error while processing the custom onRefreshVisibility methods for item "+e)}},setValues:function(e,t){var n=this,r=!1;NL.Utils.each(e,function(e,i){var s=n._setValue(e,i,!1,t);r=r||s});if(r)try{this._refreshVisibility()}catch(i){var s=NL.isDevDebug()?NL.log.error:NL.log.warn;s("Error while processing the custom onRefreshVisibility methods for items "+e)}},_onChange:function(e,t,n,r){var i=this;NL.Utils.each(i._dataObservers,function(n,r){(r.options.all||e===r.options.jpath)&&r.handler.call(i,e,t,i)}),r||this._callbacks.onChange.call(i,e,t,i,n)},observerReady:function(e){this._refreshVisibility(e)},_refreshVisibility:function(e){for(var t=0;t<this._callbacks.onRefreshVisibility.length;t++){var n=this._callbacks.onRefreshVisibility[t].method,r=this._callbacks.onRefreshVisibility[t].observer;(e===undefined||r===e||r===null)&&n(this)}},getValue:function(e){return this._model[e]?this._model[e].value:undefined},isDirty:function(){return this._dirty},setDirty:function(e){e!==this._dirty&&this._callbacks.onDirtyChanged(e),this._dirty=e},_checkModel:function(){var e=!0;for(var t in this._model)this._checkItem(t)||(e=!1);return e},_checkItem:function(e){if(!this._model[e])return;var t=this._model[e];t.error=[],t.mandatory&&(t.value===undefined||t.value===null||t.value==="")&&t.error.push(xtk_core.ui_mandatoryValue());if($.isFunction(t.isValid)){var n=t.isValid(t,this._model);n!==null&&n!==undefined&&t.error.push(n)}return t.error.length===0},check:function(){var e=this._checkModel();return e&&(e=this._callbacks.onCheck(this._model)),e},registerView:function(e,t){if(this._views[e])throw new Error("The view "+e+" is already registered in the controller.");this._views[e]=t},unregisterView:function(e){if(!this._views[e])throw new Error("The view "+e+" cannot be unregistred since it does not exist in the controller.");this._views[e]=undefined},getViewConfiguration:function(e){return this._views[e]},getViewAttribute:function(e,t){return this.getViewConfiguration(e)[t]},setViewAttribute:function(e,t,n){this.getViewConfiguration(e)[t]=n},registerCommand:function(e,t){if(this._commands[e])throw new Error("The command "+e+" is already registered in the controller.");this._commands[e]=t},unregisterCommand:function(e){if(!this._commands[e])throw new Error("The command "+e+" cannot be unregistred since it does not exist in the controller.");this._commands[e]=undefined},getCommandConfiguration:function(e){if(!this._commands[e])throw new Error("The command '"+e+"' is not defined");return this._commands[e]},getCommandAttribute:function(e,t){var n=this.getCommandConfiguration(e);return n[t]},setCommandAttribute:function(e,t,n){var r=this.getCommandConfiguration(e);r[t]=n},executeCommand:function(e,t){this._callbacks.onBeforeExecuteCommand(e,this);var n=this;NL.assert(!e.hasOwnProperty("checksave")||!e.hasOwnProperty("confirmSave"),"You cannot have a checkSave and a confirmSave.");if(e.hasOwnProperty("confirmSave")){n.confirmSave(e,t);return}return n.checkSave(e,t)},_checkSave:function(e){var t=this;if(!this.isDirty()){e(!0);return}var n=$("<div></div>").text(this._unsavedText+" "+xtk_core.ui_whatToDo());n.nlDialog({title:xtk_core.dialog_confirm(),modal:!0,resizable:!1,width:400,buttons:[{text:xtk_core.dialog_save(),click:function(){n.nlDialog("close"),t.save(e)}},{text:xtk_core.dialog_dontSave(),click:function(){n.nlDialog("close"),t.setDirty(!1),e(!0)}},{text:xtk_core.dialog_cancel(),click:function(){n.nlDialog("close"),e(!1)}}],beforeClose:function(){e(!1)}})},checkSave2:function(e){return this._checkSave(e)},checkSave:function(e,t){var n=e.checkSave;n===undefined&&(n=!e.action||!e.action.method||e.action.method==="back"||e.action.method==="refresh");if(!n){t(!0);return}this._checkSave(t)},confirmSave2:function(e){return this._confirmSave(e)},_confirmSave:function(e){var t=this;if(!this.isDirty()){e(!0);return}var n=this._unsavedText+" "+xtk_core.ui_whatToDo(),r=$("<div></div>").text(n);r.nlDialog({title:xtk_core.dialog_confirm(),modal:!0,resizable:!1,width:400,buttons:[{text:xtk_core.dialog_save(),click:function(){r.nlDialog("close"),t.save(e)}},{text:xtk_core.dialog_cancel(),click:function(){r.nlDialog("close"),e(!1)}}]})},confirmSave:function(e,t){var n=e.confirmSave;if(!n){t(!0);return}this._confirmSave(t)},save:function(e){var t=this;if(this._checkModel()){var n=this._callbacks.onCheck(this._model);if(n===!0)var r=$("<div></div>").nlMessageBox({type:"loading",delay:3,onCancel:function(){i&&i.cancel&&i.cancel()}}),i=this._callbacks.onSave({controller:this,success:function(n){r.nlMessageBox("close"),t.setDirty(!1),e&&e(!0)},error:function(t){r.nlMessageBox("close"),$("<div></div>").nlMessageBox({error:t}),e&&e(!1)}});else $("<div></div>").nlMessageBox({type:"warning",message:n}),i&&i.cancel&&i.cancel(),e&&e(!1)}else this.refresh(),i&&i.cancel&&i.cancel(),e&&e(!1)},setOption:function(e,t){this._callbacks[e]=t},registerViewObserver:function(e,t){this._viewObservers.push(e),t&&this._callbacks.onRefreshVisibility.push({method:t,observer:e})},unregisterViewObserver:function(e){for(var t=0;t<this._viewObservers.length;t++)if(e===this._viewObservers[t]){this._viewObservers.splice(t,1);break}},registerDataObserver:function(e,t){var n="observer-"+NL.Utils.sequence().nextVal(),r,i=!1;e==="*"?(i=!0,r=undefined):(i=!1,r=e);var s={id:n,options:{all:i,jpath:r},handler:t};return this._dataObservers.push(s),s},unregisterDataObserver:function(e){for(var t=0;t<this._dataObservers.length;t++)if(e.id===this._dataObservers[t].id){this._dataObservers.splice(t,1);break}},refresh:function(){$.each(this._viewObservers,function(e,t){t.refresh&&t.refresh()})},rebuildLayout:function(){$.each(this._viewObservers,function(e,t){t.rebuildLayout&&t.rebuildLayout()}),$(".nlui-interceptor-intercepted").each(function(e,t){$(t).nlInterceptor("isVisible")&&$(t).nlInterceptor("rebuildLayout")})}},NL.UI.ChangeCollector=function(e){this.options=$.extend({},{onChange:function(e,t,n,r){}},e),this._controller=undefined,this._observer=undefined,this._changes={}},NL.UI.ChangeCollector.prototype.start=function(e){this._controller=e;var t=this;this._observer=function(e,n,r){var i=t._changes[e];i===undefined&&(i={},t._changes[e]=i),i.value=n,NL.isFunction(t.options.onChange)&&t.options.onChange(e,n,r,t)},this._controller.registerDataObserver("*",this._observer)},NL.UI.ChangeCollector.prototype.stop=function(){this._observer!==undefined&&(this._controller.unregisterDataObserver(this._observer),this._observer=undefined)},NL.UI.ChangeCollector.prototype.unsetChange=function(e){this._changes&&this._changes.hasOwnProperty(e)&&delete this._changes[e]},NL.UI.ChangeCollector.prototype.reset=function(){this._changes={}},NL.UI.ChangeCollector.prototype.getChanges=function(){return this._changes},NL.ns("NL.Browser"),NL.Browser.isSupportedBrowser=function(){if(!jQuery)throw new Error("jQuery is required to detect supported browsers");if(!navigator||!navigator.userAgent)throw new Error("Unable to fetch the required data for browser detection");var e=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t=e(navigator.userAgent),n={};t.browser&&(n[t.browser]=!0,n.version=t.version),n.webkit&&(n.safari=!0);var r=[{name:"msie",version:8},{name:"chrome",version:10},{name:"mozilla",version:7},{name:"safari",version:5}],i=!1;return NL.Utils.each(r,function(e,t){if(n.hasOwnProperty(t.name)){var r=n.version,s=parseInt(r.split(".").shift(),10);return s>=t.version&&(i=!0),!i}}),i},NL.Browser.isTouchScreen=function(){return"ontouchstart"in document.documentElement},NL.Browser.isGecko=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("gecko")!=-1&&e.indexOf("safari")==-1;return t},NL.Browser.isAppleWebKit=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("applewebkit")!=-1;return t},NL.Browser.isKonqueror=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("konqueror")!=-1;return t},NL.Browser.isSafari=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("safari")!=-1;return t},NL.Browser.isIOs=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("iphone")!=-1||e.indexOf("ipod")!=-1||e.indexOf("ipad")!=-1;return t},NL.Browser.isOmniweb=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("omniweb")!=-1;return t},NL.Browser.isOpera=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("opera")!=-1;return t},NL.Browser.isAol=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("aol")!=-1;return t},NL.Browser.isIE=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("msie")!=-1&&!NL.Browser.isOpera()&&e.indexOf("webtv")==-1;return t},NL.Browser.isIE9=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("msie 9")!=-1&&!NL.Browser.isOpera()&&e.indexOf("webtv")==-1;return t},NL.Browser.isIE8=function(){var e=navigator.userAgent.toLowerCase(),t=e.indexOf("msie 8")!=-1&&!NL.Browser.isOpera()&&e.indexOf("webtv")==-1;return t},function(e){e.fn.nlSticky=function(){return e(this).each(function(t,n){var r=e(n),i=r.offset().top,s=r.offset().left,o=r.outerWidth(!0),u=e(window).scrollTop();r.css({width:o+"px"}),u>i&&r.css({position:"fixed",top:0,left:s}),u===0&&r.css({position:"relative",left:0})}),this}}(jQuery)
;"use strict";(function(e,t,n){e.widget("NL.nlInterceptor",e.NL.nlWidget,{options:{hoveringElement:null,containHovering:!1,centerOver:null,autoOpen:!0,hoveringMargin:0},_$mask:null,isVisible:function(){return this._$mask&&this._$mask.is(":visible")},_create:function(){var n=this;NL.Widgets.LayoutManager.registerWidget(this),e(this.element).addClass("nlui-interceptor-intercepted"),this._$mask=e('<div class="nlui-interceptor-overlay ui-widget-overlay"></div>').hide().appendTo("body"),this.options.hoveringElement&&e(this.options.hoveringElement).addClass("nlui-interceptor-hoveringElement"),this.options.autoOpen&&this.open(),e(t).on("resize",function(){setTimeout(function(){n.isVisible()&&NL.Widgets.LayoutManager.rebuildLayout(n.element)},100)})},_positionOverlay:function(){var t=e(this.element).outerHeight(!0),n=e(this.element).outerWidth(!0);this._$mask.css({height:t+"px",width:n+"px"}).position({of:e(this.element),at:"center center",my:"center center"})},_positionHoveringElement:function(){this.options.centerOver&&!this.options.containHovering?e(this.options.hoveringElement).position({of:e(this.options.centerOver),at:"center center",my:"center center"}):e(this.options.hoveringElement).position({of:e(this._$mask),at:"center center",my:"center center"})},_setHoveringElementSize:function(){var e=this._$mask.outerWidth(!0)-this.options.hoveringMargin,t=this._$mask.outerHeight(!0)-this.options.hoveringMargin;this.options.hoveringElement.css({width:e+"px",height:t+"px"}),NL.Widgets.LayoutManager.rebuildLayout(this.options.hoveringElement)},rebuildLayout:function(){this._positionOverlay(),this.options.hoveringElement&&(this.options.containHovering&&this._setHoveringElementSize(),this._positionHoveringElement())},open:function(){var t=this;t._positionOverlay(),t._$mask.show(),t._positionOverlay(),t.options.hoveringElement&&(t._positionHoveringElement(),e(t.options.hoveringElement).show(),t._positionHoveringElement())},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this),e.Widget.prototype.destroy.call(this)},close:function(){var t=this;t._$mask.hide(),t.options.hoveringElement&&e(t.options.hoveringElement).hide()}})})(jQuery,window)
;"use strict";(function(e){var t={options:{title:"",clear:null,autoOpen:!1,height:"auto",width:100,minHeight:400,minWidth:540,webApp:null,webAppParams:null,onClose:function(){location.reload(!0)},securityToken:document.__securitytoken,spinnerOpts:{lines:12,length:3,width:2,radius:6,color:"#000",speed:1,trail:60,shadow:!1},next:"#buttonNext input",prev:"#buttonPrevious input",submit:"#buttonSubmit input",customBtn:".actionButton"},_create:function(){var t=this;e.NL.nlDialog.prototype._create.call(this),this.element.addClass("nlui-webappdialog"),this.iframe=e('<iframe height="100%" width="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolltop="0" scrollleft="0" scrolling="no"></iframe>').appendTo(this.element).attr("id",this.options.webApp).attr("name",this.options.webApp),this.spinner=new Spinner(this.options.spinnerOpts),e("body").bind("closeForm",function(){t.close({onClose:t.options.onClose})})},_setOption:function(t,n){e.NL.nlDialog.prototype._setOption.apply(this,arguments)},removeButton:function(e){var t=this.element.webAppDialog("option","buttons");delete t[e],this.element.webAppDialog("option","buttons",t)},open:function(t,n){e.NL.nlDialog.prototype.open.call(this),this.spinner.spin(this._$header[0]);var r=this,i=this.options.next,s=this.options.prev,o=this.options.submit,u=this.options.customBtn,a="/webApp/"+this.options.webApp+"?_decorate=0&_className=webAppInDialog&__securitytoken="+document.__securitytoken;this.options.webAppParams&&(a+=(""+this.options.webAppParams)[0]==="&"||"&",a+=NL.JS.escape(e.param(this.options.webAppParams))),this.iframe.attr("src",a),this.iframe.load(function(){r.spinner.stop();var t=e(this).contents().find(".nlui-dashboardSection-header").detach(),n={},a=e(this).contents().find(s),f=e(this).contents().find(i),l=e(this).contents().find(o),c=e(this).contents().find(u);e(this).contents().find("#navigation-page").css({margin:0,padding:0});var h=e(this).contents(),p=h.find("#pagebody-page"),d=p.outerHeight(!0),v=p.outerHeight(!0),m=h.find("#page").css({margin:0,padding:0}),g=h.find("#header-page");g.length>0&&g.css("margin",0);var y=t.find(".nlui-section-base-header-title").text();y&&r._setOption("title",y),e.each([a,f,l,c],function(){e.each(this,function(){var t=e(this);t.hide();var r=t.val()||t.text();n[r]=function(){t.trigger("click")}})}),n&&r._setOption("buttons",n),r.iframe.height(d),r._initSize(),r._initPosition()})},close:function(t,n){this.iframe.attr("src","about:blank"),e.NL.nlDialog.prototype.close.call(this),e.isFunction(t.onClose)&&t.onClose.call()},destroy:function(){e.NL.nlDialog.prototype.destroy.call(this)}};e.widget("NL.webAppDialog",e.NL.nlDialog,t)})(jQuery)
;"use strict";function defaultOverviewListLineRenderer(e,t){var n={controller:controller,commands:[]},r=xtk_core.deleteActionLabel()+"_"+Math.floor(Math.random()*1e8),i={label:xtk_core.deleteActionLabel(),icon:"nlui-icon-delete",command:function(e,t){var n=new NL.UI.Actions(this),r=t[0],i=t[1];n.confirmDialog({title:xtk_core.list_delete_title(),msg:xtk_core.list_delete_msg(r.cs),onConfirm:function(){var e=(new NL.XML.Node(r._schema.split(":")[1])).attr("xtkschema",r._schema).attr("id",r.id).attr("_operation","delete"),t=new NL.transport.SOAP({urn:"xtk:persist",method:"Write"});t.writeDocument("doc",e),t.start({onSuccess:function(e){i.refresh()}})}})}};return controller.registerCommand(r,i),function(i,s,o,u){var a={ellipsis:70,label:i.cs};n.commands=[],$.isFunction(e.detailLinkFn)&&(a=$.extend(!0,a,e.detailLinkFn(i,u)));var f=null,l=e.imgFn;if(l){f=$("<div class='row-icon'></div>");var c=e.imgFn(i,u);if(typeof c=="string")if(NL.isEmpty(a.view)&&NL.isEmpty(a.url))f.append(NL.View.genImage(c));else{var h=NL.Utils.extend(!0,{},a,{label:"",icon:c}),p=$("<div class='row-main-icon'></div>").nlLinkView(h);f.append(p)}else typeof c=="object"?f.append(c):l=!1}var d=$("<div></div>"),v=$("<div></div>").addClass("row-title").nlLinkView(a);d.append(v);if($.isFunction(e.contentFn)){var m=$("<div></div>").addClass("row-content");l||m.addClass("row-content-noimg"),m.append(e.contentFn(i,u)),d.append(m)}var g=$("<div></div>").addClass("row-right");if($.isFunction(e.KPIsFn)){var y=e.KPIsFn(i,u),b=[];for(var w=0;w<y.length;w++){var E=y[w];b.push({title:E.titleText,primary:E.primaryText,secondary:E.secondaryText,mode:NL.isEmpty(E.mode)?"default":E.mode})}var S=$('<div style="float: left"/>').nlKPIBar(NL.Utils.extend({},NL.Dashboard.KPI_OVERVIEW_DEFAULTS,{KPIs:b})).appendTo(g)}if($.isFunction(e.actionsFn)){var x=e.actionsFn(i,u);for(var T=0;T<x.length;T++){var N=x[T];NL.XTK.parseBoolean(N.enabledIf,!1)&&n.commands.push(N.link)}}var C=u,k=[];t||n.commands.push({name:r,params:[i,C]}),n.commands.length>0&&(n.commands=[{config:{flat:!0,label:xtk_core.list_actionLabel(),mode:"white"},subCommands:n.commands}]),g.append($("<div></div>").addClass("row-actions").nlCmdBar(n));var L=$("<div class='row-detail'></div>");L.append(g),f&&L.append(f),L.append(d);var A=$("<span></span>"),O=$("<span></span>"),M=$("<span></span>"),_={};if($.isFunction(e.bottomLineFn)){_=e.bottomLineFn(i,u),_.stateLabel&&(A.append(_.stateLabel),A.addClass(_.stateCss)),_.stateDescLabel&&(O.append(_.stateDescLabel),O.addClass(_.stateDescCss)),_.lastUpdateDate&&(M.text(_.lastUpdateDate),M.addClass("nlui-state-label-date"));var D=$("<div class='row-bottom'></div>").addClass("row-horizontal-separator").append(A).append(O).append(M);L.append(D)}return L}}function defaultGridListLineRenderer(e){return function(t,n,r,i){var s,o,u,a;$.isFunction(e.imgFn)&&(a=e.imgFn(t,i),typeof a=="string"?s=NL.View.genImage(a):s=a),$.isFunction(e.contentFn)&&(o=e.contentFn(t,i)),$.isFunction(e.detailLinkFn)&&(u=e.detailLinkFn(t,i));var f=$("<div></div>"),l=$("<table><tbody></tbody></table>").appendTo(f),c=$("<tr></tr>").append($('<td class="nlui-list-item-icon"></td>').append($("<div></div>").append(u?$("<div></div>").nlLinkView(NL.Utils.extend({},u,{icon:a,label:null})):s))).appendTo(l),h=$("<tr></tr>"),p=$('<td class="nlui-list-item-title"></td>'),d="... ",v;NL.isString(o)?v=o:v=$(o).text();var m=17,g=NL.String.wordwrap(v,m,!0),y,b=g[0],w,E;t.category||i.options.layoutSize==="medium"?(E=2,w=g.slice(1).join("")):(E=3,g[1]&&(b+=" "+g[1]),w=g.slice(2).join("")),g.length>E?(b+=" "+NL.String.ellipsis(w,m,d),y=v):g.length!==1&&(b+=" "+w);var S;NL.isString(o)?(S=$("<span></span>").text(b),y!==undefined&&(S.attr("title",y),S.nlTooltip())):S=o,p.append(S),h.append(p).appendTo(l),NL.isNundef(u)||(u.label=b,u.title=y,S.nlLinkView(u));var x=$("<tr></tr>"),T=$('<td class="nlui-list-item-bottom"></td>');if($.isFunction(e.bottomLineFn)){var N=e.bottomLineFn(t,i),C=!0;NL.Utils.isObject(N)&&N.stateLabel?$('<span class="'+N.stateCss+'"></span>').append(N.stateLabel).appendTo(T):N instanceof $?T.append(N):N!==null?$("<span></span>").text(N).appendTo(T):C=!1,C&&(T.appendTo(x),x.appendTo(l))}return f}}function defaultLinkListLineRenderer(e){return function(t,n,r,i){var s={ellipsis:30,label:t.cs};return $.isFunction(e.detailLinkFn)&&$.extend(!0,s,e.detailLinkFn(t,i)),$.isFunction(e.imgFn)&&(s.icon=e.imgFn(t,i)),$("<div></div>").nlLinkView(s)}}function defaultBlockViewListLineRenderer(e,t,n){var r=NL.session.confManager.get(NL.session.universe+"#lastView"),i=NL.isEmpty(r)?undefined:r.view;(t===1&&NL.isEmpty(i)&&NL.XTK.parseBoolean(e.storable,!1)||e.view===i&&window.location.href.match(e.view))&&n.addClass("nlui-list-selected");var s=$("<div></div>").nlLinkView({view:e.view,icon:e.icon,iconMargin:6,label:e.label,target:e.target,params:e.params,cssClass:e.cssClass||"nlui-anchor-entity nlui-view-entity",ellipsis:28});return s.click(function(){NL.XTK.parseBoolean(e.storable,!1)&&NL.session.confManager.set(NL.session.universe+"#lastView",{view:e.view})}),s}function defaultLinkEditLineRenderer(e){return function(t,n,r,i){var s,o,u,a,f;return $.isFunction(e.imgFn)&&(u=e.imgFn(t,i),NL.isEmpty(u)&&(o=null),NL.isString(u)?o=NL.View.genImage(u):o=u),$.isFunction(e.contentFn)&&(f=e.contentFn(t,i),NL.isString(f)?(a=$("<span></span>"),a.text(f)):(a=$("<div></div>"),a.append(f))),s=$("<div></div>"),o!==null&&o.appendTo(s),a.appendTo(s),s}}function initDashboard(e,t){return function(){$("#dashboardHeader").nlDashboardHeader({controller:controller,menuEntries:e,isInConsole:t}),NL.Widgets.LayoutManager.rebuildLayout()}}function dashboardNavigationBlockCreation(e,t,n){var r;return NL.isEmpty(n.selector)?r=$("<div></div>"):r=$(n.selector),r.nlDashboardNavigationBlock({content:e,overflowContent:t,name:n.name,title:n.title,otherLink:n.otherLink}),NL.isEmpty(n.parentSelector)||$(n.parentSelector).append(r),r}function getReportViewConf(){var e=$("#reportSection"),t=e.find("#reportList");return{label:nms_campaign.categoryReport(),icon:"nlui-icon-report",type:"code",name:"report",onDisplay:function(){e.show(),t.data("alreadyLoaded")||(t.nlList("refresh"),t.data("alreadyLoaded",!0))},onHide:function(){e.hide()}}}function getSwitchableViewConf(e){var t={type:"code",onDisplay:function(){$("#generalSection").show(),$("#sectionHeader").nlDashboardSection("displayPanel")},onHide:function(){$("#generalSection").hide(),$("#sectionHeader").nlDashboardSection("hidePanel")}};return t=NL.Utils.extend(t,e),t}function getGeneralViewConf(e,t,n){return getSwitchableViewConf({view:e,label:nms_campaign.blockGeneral(),icon:t,params:n})}function getUsableVerticalSpace(e){e===undefined&&(e=0);var t=0;t+=$(".nlui-dashboardNavigation-header").outerHeight(!0),t+=$(".nlui-dashboardNavigation-page").outerHeight(!0);var n=$(".nlui-dashboardNavigation-main");return t+=n.outerHeight(!0)-n.height(),t+=$(".nlui-dashboardSection-header").outerHeight(!0),t+=e,$(window).height()-t}NL.require("/nl/core/dashboardNavigation.js").require("/nl/core/jsspcontext.js").require("/nms/campaign.js").require("/nl/shared/campaign.js"),NL.ns("NL.Dashboard"),NL.Dashboard.KPI_OVERVIEW_DEFAULTS={size:"medium",style:"ribbon"},NL.Dashboard.KPI_DETAILS_DEFAULTS={size:"large",style:"ribbon"},NL.Dashboard.normalizeKPIConf=function(e){return!NL.isEmpty(e.secondaryText)&&NL.XTK.toString(e.primaryText)===NL.XTK.toString(e.secondaryText)&&(e.secondaryText="\u00a0"),e}
;"use strict";(function(e,t,n){function r(e,n){var r=e?e:t.event?t.event:null;if(r){var i=r.charCode?r.charCode:r.keyCode?r.keyCode:r.which?r.which:0;if(i=="13")return n()}return!0}e.widget("NL.commandBar",e.NL.nlWidget,{options:{controller:null,clear:null,position:"right",colsInSubCommands:1,style:"classic",iconSize:n},_actions:n,_$htmlCommandsHavingSubCommands:[],_htmlCommands:{},_configId:"init",_idToCommand:{},_appendSubCommandsTrigger:function(e){var t=NL.View.genImage("ui-icon-triangle-1-s"),n=e.children().not(".nlui-menu").filter("a");(n.hasClass("nlui-button-primary")||n.hasClass("nlui-button-success"))&&t.addClass("nlui-icon-inverse"),n.find(".nlui-anchor-content-wrapper").append(t.addClass("nlui-commandbar-dropdown"))},_buildSubCommandsAction:function(t,r){var i=this;this._appendSubCommandsTrigger(r);var s="",o=this.options.colsInSubCommands;t.menuStyle!==n&&(s=t.menuStyle),t.colsInSubCommands!==n&&(o=t.colsInSubCommands),r.nlMenu({controller:i.options.controller,menuItems:t.subCommands,cols:o,style:s,addAnchorClass:!1,standalone:t.cssClass.indexOf("ui-button-primary")!=-1||t.cssClass.indexOf("ui-button-success")!=-1,onMenuDisplay:function(){if(e(this).data("tipsy")){var t=e(this).nlMenu("dockingPosition");e(this).data("storedDockingPosition")!==t&&(e(this).data("storedDockingPosition",t),e(this).nlTooltip("reposition",t=="top"?"n":"s"))}}}),this._$htmlCommandsHavingSubCommands.push(r)},_checkCommandVisibility:function(e){var t=e.link||e,r=NL.View.isConsole()?t.enableInConsole:t.enableInWeb;return r===n||r},_buildHTMLCommand:function(t){var r=e("<span></span>"),i=this._checkCommandVisibility(t);return r.data("command",t),t.title&&(r.attr("title",t.title),r.nlTooltip(),t.title=n),t.id!==n&&r.data("commandId",t.id),i&&(t.cssClass||(t.subCommands!==n?(t.cssClass="nlui-anchor-menu",r.addClass("nlui-commandbar-menu"),this.options.iconSize&&r.css("height",this.options.iconSize+"px")):t.cssClass="nlui-anchor-action"),t.withTooltip=!1,r.nlLinkView(t.link||t)),r.addClass("nlui-commandbar-command"),t.align==="right"?r.addClass("nlui-commandbar-command-right"):r.addClass("nlui-commandbar-command-left"),t.input!==n&&t.input===!0&&r.append('<input type="text"/>'),r},_insertHTMLCommand:function(t,r,i){var s=this._configId;i!==n&&e.isArray(this._htmlCommands[i])&&(s=i),!e.isNumeric(r)||r>=this._htmlCommands[s].length?(this._htmlCommands[s].push(t),this._$contentTab.append(t),this._$contentTab.append('<span class="inlineSeparator"></span>')):(this._htmlCommands[s].splice(r,0,t),this._htmlCommands[s][r+1].before(t))},_insertSeparator:function(t,r,i){var s=this._configId;i!==n&&e.isArray(this._htmlSeparators[i])&&(s=i),!e.isNumeric(r)||r>=this._htmlSeparators[s].length?(this._htmlSeparators[s].push(t),this._$contentTab.append(t)):(this._htmlSeparators[s].splice(r,0,t),this._htmlSeparators[s][r+1].before(t))},_bindActionToCommand:function(e,t,i){var s=this,o;o=this._actions.createActionCommand(e),e.subCommands===n||i!==n&&i!==!1?o===n&&NL.log.warn("No action, link or sub-commands set for the command"):(t.children("a").click(function(e){e.preventDefault()}),s._buildSubCommandsAction(e,t)),o!==n&&(t.click(function(n){t.nlTooltip("hide"),s.options.controller?s.options.controller.executeCommand(e,function(e){e&&(s._$commandClicked=t,o.call())}):(s._$commandClicked=t,o.call()),n.preventDefault()}),t.find("input").keypress(function(e){r(e,function(){s._$commandClicked=t,o.call()})}))},_unbindAction:function(e){var t=this,n;e.unbind("click"),e.find("input").unbind("keypress")},_createCommand:function(t){var n=this._buildHTMLCommand(t).appendTo(this._$contentTab),r=e('<span class="inlineSeparator"></span>').appendTo(this._$contentTab).css("float",t.align==="right"?"right":"left");return n.toggle(!1),this._bindActionToCommand(t,n),t.activationState==="disabled"&&this._disableCommand(n),n},_createSeparator:function(){return e("<div> </div>").addClass("nlui-commandbar-separator").appendTo(this._$contentTab)},_createContent:function(t){var r=this,i={commands:[],separators:[]};return e.each(t,function(e,t){if(t===n||t===null)return NL.log.warn(xtk_core.commandBar_err_commandNullOrUndefined()),!0;if(t.separator)i.separators.push(r._createSeparator());else{var s=r._createCommand(t);s.children().length&&(i.commands.push(s),t.id!==n&&(r._idToCommand[t.id]=s))}}),i},_display:function(){var t=this;t._$contentTab.children().each(function(){e(this).toggle(!1)});var n=this._htmlCommands[this._configId],r=n.length,i=this._htmlSeparators[this._configId];for(var s=0;s<r;s++){var o=n[s];o.toggle(!0),s!==0&&o.find("img").size()===0?o.find(".leftSeparator").toggle(!0):o.find(".leftSeparator").toggle(!1),s<r-1&&t._showInlineSeparators&&o.next(".inlineSeparator").toggle(!0)}for(var s=0;s<i.length;s++)i[s].toggle(!0)},_computeStyle:function(){var t=this.options.style;this._$contentTab.removeClass("nlui-commandbar-classic nlui-commandbar-mainmenu nlui-commandbar-linklist"),this._$rightDiv.removeClass("rightTab"),this._$leftDiv.removeClass("leftTab"),this._$contentTab.find(".inlineSeparator").empty(),this._showInlineSeparators=!1;if(t==="classic")this._$contentTab.addClass("nlui-commandbar-classic"),this.options.position==="right"&&this.element.css("float","right");else if(t==="toolbar"){this.options.position==="right"&&this.element.css("float","right"),this._$contentTab.addClass("nlui-commandbar-toolbar");var n=e(">span,>div",this._$contentTab),r=null,i=!0;e.each(n,function(t,n){n=e(n),n.hasClass("nlui-commandbar-command")&&(n.addClass("ui-state-default"),n.removeClass("ui-corner-left ui-corner-right last first"),i&&n.addClass("ui-corner-left first"),r=n,i=!1),n.css("display")!="none"&&n.hasClass("nlui-commandbar-separator")&&r&&r.hasClass("nlui-commandbar-command")&&(r.addClass("ui-corner-right last"),i=!0)}),r&&r.hasClass("nlui-commandbar-command")&&r.addClass("ui-corner-right last")}else t==="links"&&(this._$contentTab.addClass("nlui-commandbar-links"),this._$contentTab.find(".inlineSeparator").append("-"),this._showInlineSeparators=!0);this._display()},_create:function(){var t=this;this._actions=new NL.UI.Actions(this),this._htmlCommands={},this._htmlSeparators={},t._idToCommand={},this._$htmlCommandsHavingSubCommands=[],this._configId=n,this._$contentTab=e("<div></div>").addClass("nlui-commandbar ui-widget"),t.options.style==="actionbar"&&this._$contentTab.addClass("nlui-commandbar-actions");if(e.isArray(t.options.commands)){this._configId="init";var r=this._createContent(this.options.commands);this._htmlCommands[this._configId]=r.commands,this._htmlSeparators[this._configId]=r.separators}else e.isPlainObject(t.options.commands)?e.each(t.options.commands,function(e,r){t._configId===n&&(t._configId=e);var i=t._createContent(r);t._htmlCommands[e]=i.commands,t._htmlSeparators[e]=i.separators}):NL.log.warn("No commands set for this command bar");this.element.append(this._$contentTab),this._$leftDiv=e("<div></div>").prependTo(this.element),this._$rightDiv=e("<div></div>").appendTo(this.element),this._computeStyle()},getActionModule:function(){return this._actions},inputValue:function(){return this._$commandClicked!==n?this._$commandClicked.find("input").val():""},addCommand:function(e,t,r){if(e.separator){var i=this._createSeparator();this._insertSeparator(i,t,r)}else{var s=this._createCommand(e);e.id!==n&&(this._idToCommand[e.id]=s),this._insertHTMLCommand(s,t,r)}this._computeStyle()},changeConfig:function(t){this._configId!==t&&e.isArray(this._htmlCommands[t])&&(this._configId=t,this._display())},changeStyle:function(e){this.options.style=e,this._computeStyle()},command:function(e){return this._idToCommand[e]!==n?this._idToCommand[e]:null},commandIcon:function(t,r){var i;if(t instanceof jQuery)i=t;else if(this._idToCommand[t]!==n)var i=this._idToCommand[t];if(i!==n){if(r===n)return i.nlLinkView("option","icon");i.nlLinkView("option","icon",r),e.inArray(i,this._$htmlCommandsHavingSubCommands)!==-1&&this._appendSubCommandsTrigger(i)}},commandLabel:function(t,r){var i;if(t instanceof jQuery)i=t;else if(this._idToCommand[t]!==n)var i=this._idToCommand[t];if(i!==n){if(r===n)return i.nlLinkView("option","label");e.extend(i.data("command"),{label:r}),i.nlLinkView("option","label",r),e.inArray(i,this._$htmlCommandsHavingSubCommands)!==-1&&this._appendSubCommandsTrigger(i)}},commandAction:function(t,r){var i;if(t instanceof jQuery)i=t;else if(this._idToCommand[t]!==n)var i=this._idToCommand[t];i!==n&&(this._unbindAction(i),r!==n&&(e.extend(i.data("command"),{action:r}),this._bindActionToCommand(i.data("command"),i)))},commandInterractionState:function(t,r){var i;if(t instanceof jQuery)i=t;else if(this._idToCommand[t]!==n)var i=this._idToCommand[t];if(i!==n){var s=["hover","active","default"];if(r===n){var o;return e.each(s,function(){if(i.hasClass("ui-state-"+this))return o=this,!1}),o}e.each(s,function(){i.removeClass("ui-state-"+this)}),e.inArray(r,s)!==-1&&i.addClass("ui-state-"+r)}},_enableCommand:function(t){NL.UI.Actions.enable(t),t.nlLinkView("enable"),e.inArray(t,this._$htmlCommandsHavingSubCommands)!==-1&&this._appendSubCommandsTrigger(t)},_disableCommand:function(t){NL.UI.Actions.disable(t),t.nlLinkView("disable").find("a").attr("href","#"),e.inArray(t,this._$htmlCommandsHavingSubCommands)!==-1&&this._appendSubCommandsTrigger(t)},commandActivationState:function(e,t){var r;if(e instanceof jQuery)r=e;else if(this._idToCommand[e]!==n)var r=this._idToCommand[e];if(r!==n){if(t===n){var i=r.data("commandBarActivationState");return i!==n?i:"enabled"}t==="disabled"?this._disableCommand(r):t==="enabled"&&this._enableCommand(r),r.data("commandBarActivationState",t)}},generalActivationState:function(e){var t=this._htmlCommands[this._configId],n=t.length;for(var r=0;r<n;r++)e==="disabled"?this._disableCommand(t[r]):e==="enabled"&&this._enableCommand(t[r])}})})(jQuery,window)
;"use strict";NL.require("/nl/core/ui.js").require("/nl/core/widgets/linkView.js"),function(e,t,n){e.widget("NL.nlMenu",e.NL.nlWidget,{options:{menuItems:[],orientation:"right",style:"",cols:1,addAnchorClass:!0,standalone:!1,onMenuDisplay:function(){}},_actions:n,_$menus:[],_dockingPosition:"",_buildMenuList:function(t,n){var r=e("<ul></ul>"),i=t.length;n===1&&r.addClass("nlui-bullet");for(var s=0;s<i;s++){var o=t[s],u=this._buildMenuEntry(o,!0,!1,null,!0).appendTo(r);e.isArray(o.subCommands)&&u.append(this._buildMenuList(o.subCommands,n+1))}return r},_buildMenuEntries:function(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(this._buildMenuEntry(e[r],t,!1));return n},_buildMenuEntry:function(t,r,i,s,o){var u=e("<li></li>");s&&typeof s=="string"&&(u=e("<"+NL.XML.escapeAttribute(s)+"></"+NL.XML.escapeAttribute(s)+">")),o||u.addClass("ui-menu-item");if(NL.XTK.parseBoolean(t.separator)&&!t.subCommands)u=e('<li class="nlui-horizontal-separator ui-menu-item"> </li>');else{if(i){var a=NL.View.genImage(t.icon);e("<span></span>").append(a).append("<h4>"+t.label+"</h4>").appendTo(u)}else t.cssClass=null,r&&(t.icon=null,t.link&&(t.link.icon=null)),e("<span></span>").nlLinkView(t.link||t).mouseover(function(){e(this).find("a").addClass("ui-state-hover")}).mouseout(function(){e(this).find("a").removeClass("ui-state-hover")}).appendTo(u);t.description&&u.append('<span class="ui-menu-item-description">'+t.description+"</span>")}return t.id!==n&&u.data("commandId",t.id),u},_disableCommand:function(e,t){NL.UI.Actions.disable(e),e.nlLinkView("disable").find("a").attr("href","#"),e.addClass("ui-state-disabled")},_buildMenuPanel:function(t,n){function r(e,t){return function(){t.toggle(!0),t.position({my:"left top",at:"right top",of:e,collision:"flip"})}}function i(e){return function(){e.toggle(!1)}}var s,o,u=this.options.cols,a=this;u===1?(s=e("<ul></ul>"),o="li"):(s=e("<table></table>"),o="td"),s.addClass("nlui-menu"),this.options.standalone&&s.addClass("nlui-menu-standalone"),n?(s.appendTo(n),s.css("position","absolute"),s.css("left",n.width()+"px")):s.appendTo(this.element),s.addClass("ui-menu ui-widget ui-widget-content");var f=t.length,l=[];for(var c=0;c<f;c++){var h=t[c],p=this.options.style==="main-large",d=this._buildMenuEntry(h,!1,p,o);if(e.isArray(h.subCommands))if(this.options.style==="main-large")this._buildMenuList(h.subCommands,1).appendTo(d).addClass("nlui-menu-main-large-submenu");else if(h.subCommands.length>0&&this.options.style==="mainmenu"){NL.XTK.parseBoolean(h.separator)&&l.push(e('<li class="nlui-horizontal-separator ui-menu-item"></li>'));var v=this._buildMenuEntries(h.subCommands,!1);for(var m=0;m<v.length;m++)l.push(v[m])}else{var g=this._buildMenuPanel(h.subCommands).appendTo(d).addClass("nlui-menu-submenu").css("position","absolute");d.mouseover(function(t){var n=this;e(t.target).is(e(n))&&e(n).siblings().each(function(t,n){e(n).data("out",!0)}),e(n).data("out",!1),g.data("out",!1),setTimeout(function(){e(n).data("out")||g.show(0,function(){g.position({my:"left top",at:"right top",of:n,collision:"flip"}).css({top:g.css("top"),left:g.css("left")})})},100)}),d.mouseout(function(t){var n=this;e(n).data("out",!0),setTimeout(function(){e(t.target).is(e(n))&&!e(n).data("hoverson")&&e(n).data("out")&&g.hide()},200)}),g.mouseover(function(t){d.data("hoverson",!0),d.data("out",!1),e(this).data("out",!1)}),g.mouseout(function(t){var n=this;d.data("hoverson",!1),e(n).data("out",!0),setTimeout(function(){if(e(n).data("out")){e(n).hide();var t=!0,r=e(n).parents(".nlui-menu");r.find(".ui-menu-item").each(function(n,r){if(e(r).data("hoverson")||e(r).data("out")===!1)return t=!1,!1}),t&&r.mouseout()}},200)}),d.find("> .nlui-anchor .nlui-anchor-content-wrapper").prepend(e("<span></span>").addClass("ui-icon ui-icon-triangle-1-e nlui-menu-icon-rightarrow").css("float","right"))}var y=this._actions.createActionCommand(h);y&&d.bind("click",y,function(t){a.options.controller?a.options.controller.executeCommand(e(this),function(n){n&&(a._$commandClicked=e(this),t.data.call(),t.preventDefault())}):(a._$commandClicked=e(this),t.data.call(),t.preventDefault())}),h.activationState==="disabled"&&this._disableCommand(d,h),(!NL.XTK.parseBoolean(h.separator)||NL.XTK.parseBoolean(h.separator)&&!h.subCommands)&&l.push(d)}if(u===1)for(var c=0;c<l.length;c++)s.append(l[c]);else{var b=0,w=e("<tr></tr>"),E=!0;for(var c=0;c<l.length;c++){w.append(l[c]),b++;if(b===u){s.append(w);if(w.find(".nlui-menu-main-large-submenu").length){var S=w.height();S-=S/3.5,w.children("td").not(":last").each(function(){e(this).after('<td><div style="height: '+S+'px" class="nlui-vertical-separator"></div></td>')})}else w.children("td").not(":last").each(function(){e(this).after("<td></td>")});if(!E){var x=w.children("td").length;w.before("<tr><td colspan="+x+'><div class="nlui-horizontal-separator"> </div></td></tr>')}else E=!1;w=e("<tr></tr>"),b=0}}if(b>0){s.append(w);if(w.find(".nlui-menu-main-large-submenu").length){var S=w.height();S-=S/6,w.children("td").not(":last").each(function(){e(this).after('<td><div style="height: '+S+'px" class="nlui-vertical-separator"></div></td>')})}else w.children("td").not(":last").each(function(){e(this).after("<td></td>")});if(!E){var x=w.children("td").length;w.before("<tr><td colspan="+x+'><div class="nlui-horizontal-separator"> </div></td></tr>')}}}return this._$menus.push(s),s.toggle(!1),s},_computeStyle:function(){var e="ui-corner-all nlui-menu-main nlui-menu-main-large",t="";this.options.style==="main"?(t="nlui-menu-main",this._$menu.find(".ui-menu-item-description").toggle(!1)):this.options.style==="main-large"?(t="nlui-menu-main-large",this._$menu.find(".ui-menu-item-description").toggle(!0)):(t="",this._$menu.find(".ui-menu-item-description").toggle(!1));for(var n=0;n<this._$menus.length;n++)this._$menus[n].removeClass(e),this._$menus[n].addClass(t)},_create:function(){var t=this;this._actions=new NL.UI.Actions(this),this._$menus=[];var n=this.element;n.css("pointer","cursor"),this.options.addAnchorClass&&n.addClass("nlui-menu-anchor");var r=this.options.menuItems,i={my:"left top",at:"left bottom",collision:"flip",of:n},s=e.extend({using:function(n){n.top<0?t._dockingPosition="top":t._dockingPosition="bottom",e(this).position(i)}},i);t._$menu=this._buildMenuPanel(r),t._computeStyle(),t._$menu.mouseover(function(){n.removeClass("ui-corner-all"),n.addClass("ui-state-hover nlui-menu-opened ui-corner-top"),t._$menu.toggle(!0),t._$menu.position(s),t.options.onMenuDisplay.call(t.element)}),t._$menu.mouseout(function(){t._$menu.toggle(!1),n.removeClass("ui-state-hover nlui-menu-opened")}),t._$menu.click(function(){t._$menu.toggle(!1),n.removeClass("ui-state-hover nlui-menu-opened")}),n.mouseover(function(){n.removeClass("ui-corner-all"),n.addClass("ui-state-hover nlui-menu-opened ui-corner-top"),t._$menu.toggle(!0).css({top:"-1000px",left:"-1000px"}).position(s),t.options.onMenuDisplay.call(t.element)}),n.mouseout(function(){t._$menu.toggle(!1),n.removeClass("ui-state-hover nlui-menu-opened")})},dockingPosition:function(){return this._dockingPosition},_destroy:function(){}})}(jQuery,window)
;"use strict";(function(e,t){var n={options:{params:null,obfuscate:!1,view:null,url:null,label:null,title:null,target:"_self",icon:null,iconMargin:null,withTooltip:!0,cssClass:"nlui-anchor-entity",ellipsis:0,ellipsisSymbol:null,enableInWeb:!0,enableInConsole:!0,html:!1,externalLink:!1,content:null},_create:function(){this.element.addClass("nlui-anchor")},_init:function(){var t=this,n=t.element.children();n.length>0&&n.not(".nlui-menu").remove();var r=NL.View.genLinkView(t.options);t.$linkImg=r.img,t.$link=r.link,t.options.withTooltip&&t.$link.nlTooltip(),t.$link.click(function(e){if(t.options.click)return t.options.click(function(n){if(n){var r=t.$link.attr("href");r!=="#"&&!NL.String.startsWith(r,"xtk:")&&!NL.String.startsWith(r,"javascript:")&&(t._patchHref.call(t.$link,t),t._displayNavigationMsg(e)),window.location=t.$link.attr("href")}}),e.preventDefault(),!1;var n=t.$link.attr("href");n!=="#"&&!NL.String.startsWith(n,"xtk:")&&!NL.String.startsWith(n,"javascript:")&&(t._patchHref.call(t.$link,t),t._displayNavigationMsg(e))}),t.$link.contextmenu&&t.$link.contextmenu(function(){t._patchHref.call(t.$link,t)});var i=e(".nlui-anchor-content-wrapper",t.$link);t.$linkImg?i.prepend(t.$linkImg):i.addClass("nlui-content-text-only"),NL.View.isConsole()&&t.options.enableInConsole||!NL.View.isConsole()&&t.options.enableInWeb?t.$link.appendTo(t.element):i.appendTo(t.element),t.options.content&&(e.isFunction(t.options.content)?t.options.content(t.$link):t.options.content instanceof e?t.$link.append(t.options.content):t.$link.append(NL.XML.escape(t.options.content)))},_patchHref:function(t){var n=e(this).attr("href");e(this).data("originalHref")?n=e(this).data("originalHref"):e(this).data("originalHref",n);if(n!=="#"){var r="?";t.options.params&&(r+=NL.JS.escape(e.param(t.options.params))),NL.isEmpty(t.options.url)&&(!t.options.params||!t.options.params.__universe)&&(r+=r!=="?"?"&":"",r+="__universe="+NL.session.universe);var i=t.options.url==="/xtk/dashboard.jssp";(i||NL.isEmpty(t.options.url))&&!NL.isEmpty(document.__securitytoken)&&(r+=r!=="?"?"&":"",r+="__securitytoken="+document.__securitytoken),r!=="?"&&(n+=r)}e(this).attr("href",n)},_displayNavigationMsg:function(t){t.currentTarget.target!=="_blank"&&t.button!==1&&!t.ctrlKey&&e("<div></div>").nlNavigationBox()},_setOption:function(){e.NL.nlWidget.prototype._setOption.apply(this,arguments),this._init()},destroy:function(){delete this.$link,delete this.$linkImg}};e.widget("NL.nlLinkView",e.NL.nlWidget,n)})(jQuery)
;"use strict";NL.ns("NL.JS"),NL.JS.escape=function(e){return NL.isEmpty(e)?"":String(e).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/"/g,'\\"').replace(/!--/g,"\\!--").replace(/\//g,"\\/").replace(/</g,"\\u003C").replace(/>/g,"\\u003E")},NL.JS.escapeCode=function(e){return NL.isEmpty(e)?"":String(e).replace(/</g,"\\u003C").replace(/>/g,"\\u003E")},NL.JS.writeEval=function(e,t){function n(e,t){document.write("var "+e+" =  ("+t.fn+")("+t.args.map(function(e){return NL.JS.escapeCode(JSON.stringify(e,null,NL.isDevDebug()?2:0))})+");");if(t&&t.subConfs&&t.subConfs.length>0)for(var r in t.subConfs){var s=t.subConfs[r],o=s.fn.apply(this,s.args),u=e+"_subConf_"+i++;n(u,o),document.write(e+"['"+NL.JS.escape(s.path)+"'] = "+u+";")}}if(NL.side("server")){var r=new Date,i=r.getTime();n(e,t)}}
;"use strict";NL.ns("NL.Cookie"),NL.Cookie.getDomain=function(e){var t=e,n=t.split(".");return n.length>2&&(t=n.slice(1).join(".")),t}
;"use strict";NL.ns("NL.Widgets"),$(function(){NL.Widgets.NavigationManager=function(){this._currentBox=null},NL.Widgets.NavigationManager.prototype={setCurrentBox:function(e){this._currentBox&&this.closeCurrentBox(),this._currentBox=e},closeCurrentBox:function(){this._currentBox&&this._currentBox.destroy(),this._currentBox=null}};var e=null;NL.Widgets.getGlobalNavigationManager=function(){return e===null&&(e=new NL.Widgets.NavigationManager),e}}()),function(e,t,n){e.widget("NL.nlNavigationBox",e.NL.nlWidget,{options:{message:xtk_core.dialog_navigatingLabel()},_create:function(){var t={closeThick:!1,dialogClass:"nlui-navigation-box",draggable:!1,header:!1,height:70,resizable:!1,width:240};this.element.nlDialog(t),this._setContent(this.options.message),NL.Widgets.getGlobalNavigationManager().setCurrentBox(this)},_setContent:function(n){var r=e("<div></div>",{"class":"nlui-navigation-box-wrapper"}),i=e("<span></span>",{"class":"nlui-navigation-box-text",text:n}),s=e("<div></div>",{"class":"nlui-messagebox-spinner"}),o=new Spinner({lines:13,length:7,width:3,radius:8});r.append(s,i),this.element.nlDialog("setContent",r),o.spin(s.get(0))},destroy:function(){this.element.nlDialog("destroy"),e.Widget.prototype.destroy.call(this)},_setOption:function(n,r){n==="message"&&NL.isString(r)&&(this.options.message=r,this._setContent(r)),e.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery,window)
;"use strict";function progressBarHtml(e,t){var n=function(e,t){var n=e.innerHTML,r=n.match(/<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>/g);if(r)for(var i=0;i<r.length;i++){var s,o=r[i],u=/\=[a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9]+[?\s+|?>]/g;r[i]=r[i].replace(/(<?\w+)|(<\/?\w+)\s/,function(e){return e.toLowerCase()}),s=r[i].match(u);if(s){var a=0,f=s.length;while(a<f){var l=/(\=)([a-zA-Z\.\:\[\]_\(\)\&\$\%#\@\!0-9]+)?([\s+|?>])/g,c=function(){var e=Array.prototype.slice.call(arguments);return'="'+(t?e[2].toLowerCase():e[2])+'"'+e[3]};r[i]=r[i].replace(s[a],s[a].replace(l,c)),a++}}n=n.replace(o,r[i])}return n},r=jQuery("<span></span>").appendTo("body").progressbar({value:Number(e),color:t,labelSetToMaxWidth:!0});return r.children().removeAttr("aria-valuemax aria-valuemin aria-valuenow"),r.removeAttr("aria-valuemax").detach(),n(r.wrap("<div></div>").parent()[0])}(function(e,t){e.widget("NL.progressbar",e.ui.progressbar,{options:{color:"blue",min:0,roundedCorners:!1,width:null,height:null,textPosition:"center",labelSetToMaxWidth:!1,labelMaxSize:13,labelMinSize:11,labelText:function(){return this.percentageString()}},_knownColors:["blue","Blue","brown","Brown","red","Red","green","Green","darkgrey","DarkGrey","orange"],_DEFAULT_VALUE_DIV_CLASS:"nlui-progressbar-block",_paint:function(){this.valueDiv.removeClass(this.valueDivClass),this.valueDivClass=this._DEFAULT_VALUE_DIV_CLASS,e.inArray(this.options.color,this._knownColors)&&(this.valueDivClass+="-"+this.options.color.toLowerCase()),this.valueDiv.addClass(this.valueDivClass+" nlui-progressbar-progress")},_setLabelText:function(t){e.isFunction(t)?this._labelText=t:this._labelText=function(){return t}},_getLabelText:function(){return this._labelText()},_create:function(){this._$widget=this.element.addClass("nlui-progressbar iefix"),this.element=e("<div></div>").appendTo(this._$widget).addClass("nlui-progressbar-container iefix");var t=!1;this._$widget.parent().length===0&&(this._$widget.appendTo("body"),t=!0),this.options.textPosition=="center"?this.label=e("<label></label>").appendTo(this.element).addClass("iefix center-label"):this.options.textPosition=="left"&&(this.label=e("<label></label>").prependTo(this._$widget).addClass("iefix side-label"),this.element.css("float","left")),this._setLabelText(this.options.labelText),e.ui.progressbar.prototype._create.call(this),this.options.roundedCorners||this.element.removeClass("ui-corner-all"),this._paint();if(this.options.textPosition=="center"){var n=parseInt(this.valueDiv.css("z-index"),10);isNaN(n)?this.label.css("z-index",2):this.label.css("z-index",n+1)}this._refreshSize(),t&&this._$widget.detach()},_setOption:function(t,n){t==="color"?(this.options.color=n,this._paint()):t==="width"?(this.options.width=n,this._refreshSize()):t==="height"?(this.options.height=n,this._refreshSize()):t==="labelText"?(this._setLabelText(n),this._refreshValue()):t==="value"?n<this.options.min?e.ui.progressbar.prototype._setOption.call(this,t,this.options.min):n>this.options.max?e.ui.progressbar.prototype._setOption.call(this,t,this.options.max):e.ui.progressbar.prototype._setOption.call(this,t,n):e.ui.progressbar.prototype._setOption.call(this,t,n),e.Widget.prototype._setOption.apply(this,arguments)},_refreshValue:function(){e.ui.progressbar.prototype._refreshValue.call(this),this.options.roundedCorners||this.valueDiv.removeClass("ui-corner-left ui-corner-right"),this.label.text(this._labelText())},_computeLabelPosition:function(){var e=this.options;if(this.label===t)return;var n;this.options.textPosition=="center"?n=this.element.height()-3:n=this.element.height()-4,this.label.css("font-size",Math.min(Math.max(n,e.labelMinSize),e.labelMaxSize)+"px");if(this.options.labelSetToMaxWidth===!0){var r=this.value();this.value(100),this.label.width(this.label.width()),this.value(r)}},_refreshSize:function(){var t=this;e.each(["height","width"],function(e,n){var r=t.options[n];r!==null&&(isNaN(r)?(t._$widget.css(n,r),n==="width"&&r==="auto"&&t._$widget.css("display","block"),n==="height"&&t.element.css(n,r)):(t._$widget.css(n,r+"px"),n==="height"&&t.element.css(n,r+"px")))}),this._computeLabelPosition(),this.options.textPosition=="left"&&(this.label.width(this.label.width()),this._$widget.width(this._$widget.width()),this.element.outerWidth(this._$widget.width()-this.label.outerWidth({margin:!0})))},percentageString:function(){return Math.round(this.value())+"%"},labelText:function(e){if(e===t)return this._getLabelText();this._setLabelText(e)},value:function(n){if(n===t)return e.ui.progressbar.prototype.value.call(this);this._setOption("value",n)},destroy:function(){this.element.removeClass("nlui-progressbar"),this.label.remove(),e.ui.progressbar.prototype.destroy.call(this)}})})(jQuery)
;"use strict";(function(e,t,n){var r=function(e,t){e.toggle(!0),e.css("height","auto");var n=e.css("height");e.height(0),e.animate({height:n,border:e.data("oldBorder")},t,function(){e.css("height","auto")})},i=function(e,t){e.is(":visible")?(e.data("oldHeight",e.css("height")),e.data("oldBorder",e.css("border")),e.animate({height:"0","border-width":0},t,function(){e.toggle(!1)})):e.toggle(!1)};e.widget("NL.nlMessage",e.NL.nlWidget,{options:{message:"",state:"normal",icon:"default",closable:!1,destroyOnClose:!1,iconExtraClass:"",messageExtraClass:"",animationDuration:500,statePriorities:["normal","info","success","warning","error"]},_hidden:!1,_classFromState:{normal:"nlui-message-normal",success:"nlui-message-success",info:"nlui-message-info",warning:"nlui-message-warning",error:"nlui-message-error"},_getClassFromState:function(e){var t=this._classFromState[e];return t?t:this._classFromState.normal},_iconClassFromState:{normal:"ui-icon-mail-closed",success:"ui-icon-check",info:"ui-icon-info",warning:"ui-icon-alert",error:"ui-icon-circle-close"},_iconFlavorClassFromState:{success:"nlui-icon-success",info:"nlui-icon-info",warning:"nlui-icon-warning",error:"nlui-icon-error"},_refreshGeneralState:function(){this._moreThanOneState=!1,this._generalState=this.options.state;var t=this.options.message,r=this.options.statePriorities,i,s=e.inArray(this._generalState,r),o=t.length;for(var u=0;u<o;u++)if(!e.isPlainObject(t[u])||!t[u].hidden)e.isPlainObject(t[u])&&t[u].state?(i!==n?i!=t[u].state&&(this._moreThanOneState=!0):i=t[u].state,e.inArray(t[u].state,r)>s&&(this._generalState=t[u].state,s=e.inArray(this._generalState,r))):i!==n?i!=this.options.state&&(this._moreThanOneState=!0):i=this.options.state},_refreshState:function(){var e=this.options.message;this._previousStateClass!==n&&this._$content.removeClass(this._previousStateClass),this._refreshGeneralState(),this._previousStateClass=this._getClassFromState(this._generalState),this._$content.addClass(this._previousStateClass)},_refreshHighlighting:function(){var t=this.options.message;if(this._moreThanOneState){var n=t.length,r=this._generalState==this.options.state;for(var i=0;i<n;i++){var s=this.element.find('.nlui-message-content[nl-message-index="'+i+'"]');this._moreThanOneState&&(this._moreThanOneState&&e.isPlainObject(t[i])&&(t[i].state&&t[i].state==this._generalState||!t[i].state&&r)||r?typeof t[i].message!="string"?s.find(".nlui-message-highlightable").addClass("nlui-message-content-highlighted"):s.addClass("nlui-message-content-highlighted"):s.find(".nlui-message-content-highlighted").removeClass("nlui-message-content-highlighted"))}}else this.element.find(".nlui-message-content-highlighted").removeClass("nlui-message-content-highlighted")},_buildIcon:function(t,n){if(!t)return"";var r=this._generalState,i=e("<span></span>").addClass("nlui-message-icon").addClass(n);if(t==="default")return i.addClass("nlui-icon").addClass(this._iconClassFromState[r]).addClass(this._iconFlavorClassFromState[r]),i;var s=this._iconClassFromState[t];if(s)return i.addClass("nlui-icon").addClass(this._iconFlavorClassFromState[r]).addClass(s),i;if(t.indexOf(".")>=0)return i.addClass("nlui-icon").css("background-image","url("+t+")"),i;i.addClass(t).addClass("nlui-icon");var s=this._iconFlavorClassFromState[r];return s&&i.addClass(s),i},_buildClose:function(){var t=this,n=e("<span></span>").addClass("nlui-icon ui-icon-close nlui-message-close"),r=this.options.state,i=this._iconFlavorClassFromState[r];return i&&n.addClass(i),n.click(function(){t.toggle(!1),t.options.destroyOnClose&&t.destroy()}),n},_buildMessage:function(t,r,i,s,o){var u=o===n?!1:o;return e("<div></div>").data("nl-message-hidden",u).toggle(!u).addClass("nlui-message-content").addClass(r).append(this._buildIcon(i,s)).append(e("<span></span>").addClass("messageText").append(t))},_refreshMessages:function(){var t=this.options.message,r=t.length;this._$messages=[];var i=this._generalState==this.options.state;for(var s=0;s<r;s++){var o="",u=this.options.icon,a=this.options.iconExtraClass,f=this.options.messageExtraClass,l=this.options.hidden,c;e.isPlainObject(t[s])?(o=t[s].message,t[s].iconExtraClass!==n&&(a=t[s].iconExtraClass),t[s].messageExtraClass!==n&&(f=t[s].messageExtraClass),t[s].icon!==n&&(u=t[s].icon),t[s].hidden!==n&&(l=t[s].hidden),t[s].id&&(this._idToIndex[t[s].id]=s)):o=t[s],c=this._buildMessage(o,f,u,a,l),c.attr("nl-message-index",s),e.isPlainObject(t[s])&&t[s].id&&c.attr("nl-message-id",t[s].id),this._$messages.push(c)}this._$content.empty();for(var s=0;s<r;s++)this._$content.append(this._$messages[s]);if(r>1){var h=this.options.animationDuration;this.options.animationDuration=0,this._checkGlobalVisibility(),this.options.animationDuration=h}this.options.closable&&this._$messages[0].prepend(this._buildClose()),this._refreshHighlighting()},_refreshIcon:function(){e.isArray(this.options.messages)?this._refreshMessages():this._$messages[0].find(".nlui-message-icon").replaceWith(this._buildIcon(this.options.icon,this.options.iconExtraClass))},_create:function(){var t=this.element;this._idToIndex={};if(!e.isArray(this.options.message)){var n={};for(var r in this.options)n[r]=this.options[r];this.options.message=[n]}t.addClass("nlui-message").addClass(this.options.messageExtraClass),this._$content=e("<div></div>").appendTo(t),this._$content.addClass("ui-widget nlui-message-wrapper ui-corner-all"),this._refreshState(),this._refreshMessages()},_init:function(){if(!e.isArray(this.options.message)){var t={};for(var n in this.options)t[n]=this.options[n];this.options.message=[t]}},_setOption:function(t,n){t==="message"?(typeof this.options.message=="string"?this.options.message=[n]:this.options.message=n,this._refreshMessages()):t==="icon"?(this.options.icon=n,this._refreshIcon()):t==="state"?(this.options.state=n,this._refreshState(),this._refreshIcon()):t==="closable"?(this.options.closable=n,this._refreshMessages()):t==="messageExtraClass"?(this.options.messageExtraClass=n,this._refreshMessages()):t==="iconExtraClass"&&(this.options.iconExtraClass=n,this._refreshMessages()),e.Widget.prototype._setOption.apply(this,arguments)},_checkGlobalVisibility:function(){var t=!0;this.element.find("[nl-message-index]").each(function(){if(!e(this).data("nl-message-hidden"))return t=!1,!1});var n=!1,r=this.options.hidden;!t&&this._hidden?(this.toggle(!0),n=!0):t&&!this._hidden&&(this.toggle(!1),n=!0),n&&(this.options.hidden=r)},addMessage:function(t,r){var i;e.isPlainObject(t)?i=t:typeof t=="string"&&(i={message:t}),r===n?this.options.message.push(i):this.options.message.splice(r,0,i),this._refreshState(),this._refreshMessages()},getMessage:function(t){return t=t||0,e.isNumeric(t)&&this.options.message[t]?this.options.message[t]:typeof t=="string"&&this._idToIndex[t]!==n&&this.options.message[this._idToIndex[t]]?this.options.message[this._idToIndex[t]]:null},deleteMessage:function(t){t=t||0,e.isNumeric(t)?this.options.message.splice(parseInt(t,10),1):typeof t=="string"&&this._idToIndex[t]!==n&&this.options.message.splice(this._idToIndex[t],1),this.options.message.length===0&&this.element.toggle(),this._refreshMessages()},changeMessage:function(e,t){t=t||0,this.getMessage(t).message=e,this._refreshMessages()},changeMessageExtraClass:function(e,t){this.getMessage(t).messageExtraClass=e,this._refreshMessages()},changeState:function(e,t){this.getMessage(t).state=e,this._refreshState(),this._refreshMessages()},changeIcon:function(e,t){this.getMessage(t).icon=e,this._refreshMessages()},changeIconExtraClass:function(e,t){this.getMessage(t).iconExtraClass=e,this._refreshMessages()},toggle:function(t,s){var o=this,u,a;arguments.length===1&&typeof t!="boolean"?a=t:(u=t,a=s);if(a!==n){var f;typeof a=="string"?f=this.element.find('[nl-message-id="'+a+'"]'):e.isNumeric(a)&&(f=this.element.find('[nl-message-index="'+a+'"]'));if(f&&f.length){var l=f.data("nl-message-hidden");u!==n?u&&l?(r(f,this.options.animationDuration),this.getMessage(a).hidden=!l,f.data("nl-message-hidden",!l)):!u&&!l&&(i(f,this.options.animationDuration),this.getMessage(a).hidden=!l,f.data("nl-message-hidden",!l)):(l?r(f,this.options.animationDuration):i(f,this.options.animationDuration),this.getMessage(a).hidden=!l,f.data("nl-message-hidden",!l))}this._checkGlobalVisibility()}else u!==n?u&&o._hidden?(r(o.element,this.options.animationDuration),o._hidden=!o._hidden,this.options.hidden=o._hidden):!u&&!o._hidden&&(i(o.element,this.options.animationDuration),o._hidden=!o._hidden,this.options.hidden=o._hidden):(o._hidden?r(o.element,this.options.animationDuration):i(o.element,this.options.animationDuration),o._hidden=!o._hidden,this.options.hidden=o._hidden);this._refreshState()}})})(jQuery,window)
;"use strict";(function(e,t,n,r){e.widget("NL.nlList",e.NL.nlWidget,{options:{source:null,title:null,headless:!1,layoutType:"default",layoutSize:"small",maxHeight:0,itemRenderer:function(e,t,n){return e.label},emptyText:xtk_core.noData(),additionalItems:[],pagination:null,autoLoad:!0,dialog:!1,onValidation:function(){},onCancel:function(){},droppable:null,draggable:null,search:!0,searchWildcard:"$1",navigator:null,folderFilter:null,plugins:[],pluginsToEnd:[],localStorage:{plugins:!0,selection:!1,settings:!0},selectionMode:"none",selection:r,keyAttributes:null,dataAttributes:null,onSelection:function(e,t){},groupByAttribute:null,groupHeadRenderer:null,headCollapse:"none",fitToParentHeight:!1,onDataLoadCallback:r,dialogWidth:600,dialogHeight:500},_defaultDraggableOptions:{draggableOptions:{cursorAt:{top:-10,left:-10}},helper:"clone"},_defaultDroppableOptions:{type:"listOfDraggables"},_createHeaderLine:function(){return e("<div></div>").nlHorizontalLayout({height:28,leftRightGutter:4}).appendTo(this._$header)},_create:function(){var i=this,s,o;this._$container=r,this._$header=r,this._$topHeader=r,this._$bottomHeader=r,this._dataLoadedOnce=!1,this._hasWidgetsOnTop=!1,this._datasourceCaps=r,this._dialogOkButton=r,this._previousClickElementRef=r,this._datasourceCaps=NL.Utils.extend({},this.options.source.getCapabilities()),NL.Widgets.LayoutManager.registerWidget(this),this.controller=new NL.Collection.Controller(this.options.source),this.currentItems=[],this.currentSelection=this.options.selection,this.plugins=[],this._$refreshPlugin=null,o=this.getListSettingsFromLocalStorage("listLayout"),NL.isNundef(o)||(s=o.split("-"),this.options.layoutType=s[0],this.options.layoutSize=s[1]),this._$container=this.options.dialog?e("<div></div>").appendTo(n.body):this.element,this._$container.addClass("nlui-list-container").addClass("nlui-list-layout-"+this.options.layoutType).addClass("nlui-list-layout-"+this.options.layoutSize),this._$header=e("<div></div>").addClass("ui-widget-header").addClass("nlui-list-header"),this._$paginationContainer=null,this.options.headless||this._$header.appendTo(this._$container),this._$topHeader=this._createHeaderLine(),this.lastGroupValue="";var u=!1;this._$title=null,this.collapseWidgetIndex=-1,this._$collapser=null;var a=this.getListSettingsFromLocalStorage("headCollapse");a!==r&&(this.options.headCollapse=a),this.options.headCollapse!=="none"&&(this.collapseWidgetIndex=this._addCollapseIcon()),!NL.isEmpty(this.options.title)&&!this.options.dialog&&(NL.isString(this.options.title)?this._$title=e("<div></div>").addClass("nlui-list-title").append(e("<span>"+this.options.title+"</span>")):this._$title=e("<div></div>").addClass("nlui-list-title").append(this.options.title),e('<span class="nlui-list-title-busy">&nbsp;</span>').appendTo(this._$title),this._$collapser!==null&&this._$title.addClass("nlui-list-title-clickable").on("click",function(e){i._toggleListHeaderHandler(e)}),u=!0,this._hasWidgetsOnTop=!0,this._$topHeader.nlHorizontalLayout("addWidget",this._$title,{position:"left",width:0})),e.each(this.options.plugins,function(e,t){i.addPlugin(t,"br")}),this._datasourceCaps.realTime||(this._$refreshPlugin=NL.Collection.newPlugin({name:"refreshPlugin"},"RefreshButtonPlugin"));if(this.options.search){var f=NL.Collection.newPlugin(e.extend({name:"searchPlugin"},this.options.search,{wildcard:this.options.searchWildcard,realTime:this._datasourceCaps.realTime,width:this._hasWidgetsOnTop?172:0,onCancel:this.options.onCancel,refreshPlugin:i._$refreshPlugin}),"SearchInputPlugin");this._$searchPlugin=f,this.addPlugin(f)}this._$refreshPlugin!==null&&this.addPlugin(this._$refreshPlugin);if(this.options.navigator){var l=NL.Collection.newPlugin(e.extend({name:"folderNavigatorFilter"},this.options.navigator,{wildcard:"$2"}),"FilterFolderNavigatorPlugin");this.addPlugin(l),u=!0}if(NL.isPlainObject(this.options.itemRenderer)&&NL.Utils.count(this.options.itemRenderer)>1){var c=NL.Collection.newPlugin(e.extend({name:"switchLayoutPlugin"},{currentLayout:this.options.layoutType+"-"+this.options.layoutSize,itemRenderers:this.options.itemRenderer,onClickCallback:function(e){i.switchLayoutTo(e),i.saveListSettingsToLocalStorage("listLayout",e)},toBottom:this._$bottomHeader!==r}),"SwitchLayoutPlugin");this.addPlugin(c)}this.options.headCollapse!=="none"&&this._$bottomHeader===r&&(this._$topHeader.nlHorizontalLayout("removeWidget",this.collapseWidgetIndex),this._$title!==null&&this._$title.removeClass("nlui-list-title-clickable").off("click"),this._$header.css("overflow",""),this._$collapser=null);var h=this._$bottomHeader===r?"tr":"br";e.each(this.options.pluginsToEnd,function(e,t){t.settings.zone=h,i.addPlugin(t)}),NL.Utils.each(this.plugins,function(e,t){t.setReady()}),this._$list=e("<ol></ol>"),this._$body=e("<div></div>").addClass("nlui-list-body").append(this._$list).appendTo(this._$container),this.options.selectionMode!=="none"&&this._$body.addClass("nlui-list-selectable"),this.options.droppable&&this._$list.nlDroppable(this.options.droppable===!0?this._defaultDroppableOptions:e.extend({},this._defaultDroppableOptions,this.options.droppable));if(this.options.dialog){var p=NL.Utils.sequence().nextVal();this._$container.nlDialog({autoOpen:!1,title:this.options.title||xtk_core.list_selectItem(),modal:!0,width:this.options.dialogWidth,height:this.options.dialogHeight,onCancel:function(){i.options.onCancel()},buttons:[{text:xtk_core.dialog_ok(),id:p,click:function(){i._validateSelection()}},{text:xtk_core.dialog_cancel(),cancels:!0}],resize:function(){NL.Widgets.LayoutManager.rebuildLayout(i.element)},open:function(){NL.Widgets.LayoutManager.rebuildLayout(i.element),i.focusSearchInput()}}),this.element.on("click",function(){i._$container.nlDialog("open"),setTimeout(function(){i._dataLoadedOnce||(i.controller.get(),i._dataLoadedOnce=!0)},0)}),this._dialogOkButton=this._$container.nlDialog("getButton",p),NL.Widgets.callWidgetMethod(this._dialogOkButton,"option",["disabled",!0])}var d=this.options.keyAttributes;e.isArray(d)?this._buildKeyFromRow=function(e){var t,n=d.length,r={};for(t=0;t<n;t++)r[d[t]]=e[d[t]];return new NL.Collection.Key(r)}:typeof d=="string"?this._buildKeyFromRow=function(e){var t={};return t[d]=e[d],new NL.Collection.Key(t)}:this._buildKeyFromRow=function(e){return r},this.controller.onBeforeGet.attach(function(t){e.each(i.plugins,function(e,n){n.applyCriteriae(t)})}),this.controller.onSuccess.attach(function(n,s){var o=0;i._$list.find(".nlui-list-info").remove();if(!s.count)if(!n.data&&typeof n=="string")NL.log.error(n);else{s.pagination&&s.pagination.page&&s.pagination.perPage&&(o=(s.pagination.page-1)*s.pagination.perPage),e.each(i.plugins,function(e,t){var n=t.applyDisplayCriteriae();NL.isNundef(n)||i.element.nlList("option",n)}),NL.isNundef(n.data)&&(n.data=[]);var u=s.refresh||!i.options.pagination;i.refreshWithData(n.data,{empty:u,baseRowIndex:o}),NL.isNundef(s.preSelection)||i.selection(s.preSelection,!0),i.options.onDataLoadCallback!==r&&i.options.onDataLoadCallback()}i.savePluginToLocalStorage()}),this.controller.onError.attach(function(t){i._$list.find(".nlui-list-info").remove(),i._$list.find(".nlui-list-item-error").remove();var n=e("<a class='nlui-anchor-entity nlui-list-item-error' href='#'></a>").text(xtk_core.list_errorLink());n.click(function(n){e("<div></div>").nlMessageBox({error:t}),n.preventDefault()}),i._$list.prepend(e("<div></div>").addClass("nlui-list-item-error").append(e("<strong>"+xtk_core.list_errorLoadingMsg()+"</strong>")).append(n).append(e("<div style='margin-top: 4px'></div>").text(NL.String.ellipsis(t.message,120))))}),this.options.pagination&&this._addPagination({}),this.element.on("click",function(e){i.element.focus()}),this.element.on("keydown",function(e){if(i.options.selectionMode!=="none")switch(e.which){case 40:e.preventDefault(),i._selectByDelta(1);break;case 38:e.preventDefault(),i._selectByDelta(-1);break;case 36:e.preventDefault(),i._selectByIndex(0);break;case 35:e.preventDefault(),i._selectByIndex(-1);break;case 34:e.preventDefault(),i._selectByDelta(10);break;case 33:e.preventDefault(),i._selectByDelta(-10)}}),this.options.fitToParentHeight&&this._$body.css("min-height","0"),NL.Widgets.LayoutManager.rebuildLayout(this._$header.element),NL.Widgets.LayoutManager.rebuildLayout(this.element),this.options.autoLoad!==!1&&setTimeout(function(){i.controller.get({preSelection:i.options.selection}),i._dataLoadedOnce=!0},0)},addDataToSelection:function(t){var n;if(this.options.dataAttributes!==null)for(n=0;n<this.options.dataAttributes.length;n++)NL.isNundef(t[this.options.dataAttributes[n]])||this.currentSelection.data(this.options.dataAttributes[n],t[this.options.dataAttributes[n]])},focusSearchInput:function(){this.options.search&&this._$searchPlugin.getView().find("input").focus().select()},_addPagination:function(n){var r=e.extend(!0,n,{controller:this.controller},this.options.pagination);this.options.layoutType==="grid"&&(r.scrollingText=xtk_core.navigation_scrollingNextShort(),r.loadingText=xtk_core.loadingDataShort()),this._$paginationContainer=e("<div></div>").nlPagination(r),this._$body.append(this._$paginationContainer)},_selectByDelta:function(t){var n=this;if(n.currentItems&&n.currentItems.length>0){var i=n._getSelectedIndex();i===r?i=0:i=(i+t)%n.currentItems.length,i<0&&(i=n.currentItems.length+i);var s=n.currentItems[i];NL.isNundef(s)||n._onItemClick(s)}},_selectByIndex:function(t){var n=this;if(n.currentItems&&n.currentItems.length>0){t===r?t=0:t%=n.currentItems.length,t<0&&(t=n.currentItems.length+t);var i=n.currentItems[t];NL.isNundef(i)||n._onItemClick(i)}},_getSelectedIndex:function(){var n=this.currentSelection;if(NL.isNundef(n))return r;var i;return e.each(this.currentItems,function(e,t){if(t&&t.source&&t.key.equals(n.key()))return i=e,!1}),i},empty:function(){this.currentItems.length=0,this.resetSelection(),this._$list.empty()},refreshWithData:function(n,r){r.empty&&this.empty();if(n.length===0&&(!NL.isArray(this.options.additionalItems)||NL.isArray(this.options.additionalItems)&&this.options.additionalItems.length===0)&&r.baseRowIndex===0){var i=e("<p></p>").append(e("<span></span>").text(this.options.emptyText)),s=e('<li class="nlui-list-item"></li>').append(e("<div></div>").append(i));this._$list.append(e('<ol class="nlui-list-info"></ol>').append(s))}else this._render(n,r.baseRowIndex);this.options.droppable&&this._$list.nlDroppable("makeInsertion"),NL.Widgets.LayoutManager.rebuildLayout(this.element)},savePluginToLocalStorage:function(){var t,n;t=[],n=this.getConf(),this.options.localStorage.plugins&&(NL.Utils.each(this.plugins,function(e,n){var r=n.conf();r&&t.push(r)}),n.plugins=t,this.saveConf(n))},saveListSettingsToLocalStorage:function(t,n){if(this.options.localStorage.settings){var r=this.getConf();r.hasOwnProperty("settings")||(r.settings={}),r.settings[t]=n,this.saveConf(r)}},getListSettingsFromLocalStorage:function(t){var n,r;return this.options.localStorage.settings&&(r=this.getConf(),r.hasOwnProperty("settings")&&r.settings.hasOwnProperty(t)&&(n=r.settings[t])),n},switchLayoutTo:function(t){var n,r,i,s,o,u;r=this._generateDataFromCurrentItems(),i=this.options.layoutType,s=this.options.layoutSize,n=t.split("-"),this.options.layoutType=n[0],this.options.layoutSize=n[1],this._$container.removeClass("nlui-list-layout-"+i).removeClass("nlui-list-layout-"+s).addClass("nlui-list-layout-"+this.options.layoutType).addClass("nlui-list-layout-"+this.options.layoutSize),this.refreshWithData(r,{empty:!0,baseRowIndex:0}),this.options.pagination&&this._$paginationContainer!==null&&(o={perPage:this._$paginationContainer.nlPagination("perPage"),page:this._$paginationContainer.nlPagination("currentPage"),numberOfRecords:this._$paginationContainer.nlPagination("records")},u=this._$paginationContainer.children().css("display"),this._$paginationContainer.remove(),this._$paginationContainer=null,this._addPagination(o),u!=="none"&&this._$paginationContainer.nlPagination("showMore",!0)),this.savePluginToLocalStorage()},_generateDataFromCurrentItems:function(){var n,r=[];for(n=0;n<this.currentItems.length;n++)r.push(e.extend(!0,{},this.currentItems[n].source));return r},rebuildLayout:function(){var t,n;if(this._$body!==null){n=this._$topHeader.outerHeight(!0),t=n,this._$bottomHeader&&(t+=this._$bottomHeader.outerHeight(!0)),this._$collapser!==null&&this._$collapser.data("current-state")==="collapsed"?n>0&&this._$header.height(n):t>0&&this._$header.height(t);if(this.options.dialog){var r=this._$header.outerHeight(!0);this._$body.height(this._$container.height()-r)}if(!this.options.dialog&&this.options.maxHeight!==0){var i=this._$body.outerHeight(!0)-this._$body.height();this._$body.css({overflow:"auto",height:this.options.maxHeight-i-this._$header.outerHeight(!0)+"px"})}if(this.options.fitToParentHeight){var s=this.element.css("overflow-y");this.element.css("overflow-y","hidden");var o,u,a;o=this._$body.outerHeight(!0)-this._$body.height(),a=this._$header.outerHeight(!0),u=this.element.height(),this._$body.css("overflow-y","auto").height(u-(a+o)),this.element.css("overflow-y",s)}}return!1},setFocus:function(){this.options.headless||this._$header.find(".nlui-search-container input").focus()},_validateSelection:function(){this.options.onValidation(this.currentSelection,this._selectedItem)!==!1&&this._$container.nlDialog("close")},close:function(){this.options.dialog&&this._$container.nlDialog("close")},_getConfManagerKey:function(){var n=e.NL.nlWidget.prototype._getConfManagerKey.apply(this,arguments);return this.option("source")&&this.option("source").settings&&this.option("source").settings.schema&&n.push(this.option("source").settings.schema),n},addPlugin:function(n,i){var s=n.getView(),o=this;if(n.isCompatibleWith(this._datasourceCaps)){n.setController(o.controller);if(s){var u=n.getPositionHints(),a=this._$bottomHeader!==r,f=!0,l=NL.Utils.extend({},{zone:"tr",width:0},u);if(!u)a&&(f=!1);else switch(l.zone){case"tl":NL.Utils.extend(l,{position:"left"});break;case"tr":NL.Utils.extend(l,{position:"right"});break;case"bl":NL.Utils.extend(l,{position:"left"}),f=!1;break;case"br":NL.Utils.extend(l,{position:"right"}),f=!1}var c;i&&i instanceof jQuery?c=i:(c=this._$topHeader,f||(a||(this._$bottomHeader=this._createHeaderLine().addClass("nlui-list-header-lineTopSeparator"),this.options.headCollapse==="collapsed"&&this._$bottomHeader.hide()),c=this._$bottomHeader)),c.nlHorizontalLayout("addWidget",s,l)}this.controller.onBeforeGet.attach(function(){o._$refreshPlugin!==null&&o._$refreshPlugin.setIconBusy(),n.setBusy(),o._$title!==null&&e(".nlui-list-title-busy",o._$title).show()}),this.controller.onComplete.attach(function(){o._$refreshPlugin!==null&&o._$refreshPlugin.setIconRefresh(),n.setIdle(),o._$title!==null&&e(".nlui-list-title-busy",o._$title).hide()});if(o.options.localStorage.plugins){var h=o.getConf();h.plugins&&NL.Utils.each(h.plugins,function(e,t){return t&&t.name===n.getName()?(n.conf(t),!1):r})}this.plugins.push(n)}},_addCollapseIcon:function(){var n=this,r;return this._$collapserIcon=e('<span class="nlui-list-head-collapse-icon nlui-icon20">&nbsp;</span>'),this._$collapser=e('<div class="nlui-list-head-collapse"></div>').append(this._$collapserIcon).on("click",function(e){n._toggleListHeaderHandler(e)}).nlTooltip({gravity:"n"}).nlTooltip("setTitle",xtk_core.list_collapse_header()),this.options.headCollapse==="uncollapsed"?(this._$collapser.data("current-state","uncollapsed"),this._$collapserIcon.addClass("nlui-icon-list-header-collapse")):(this._$collapserIcon.addClass("nlui-icon-list-header-expand"),r=this._$topHeader.outerHeight(!0),r>0&&this._$header.height(r),this._$collapser.nlTooltip("setTitle",xtk_core.list_expand_header()),this._$collapser.data("current-state","collapsed")),this.saveListSettingsToLocalStorage("headCollapse",this.options.headCollapse),this._$topHeader.nlHorizontalLayout("addWidget",this._$collapser,{width:20,isLong:!1,position:"left"})},_toggleListHeaderHandler:function(n){var r,i,s,o,u;this._$header.stop(!0,!0),o=0,s=e(".nlui-horizontalLayout",this._$header),i=this;if(this._$collapser.data("current-state")==="uncollapsed")this._$header.css("overflow","hidden"),this._$collapserIcon.removeClass("nlui-icon-list-header-collapse").addClass("nlui-icon-list-header-expand"),this._$collapser.data("current-state","collapsed"),this.saveListSettingsToLocalStorage("headCollapse","collapsed"),this._$header.animate({height:this._$topHeader.outerHeight(!0)},{duration:250,complete:function(){NL.Widgets.LayoutManager.rebuildLayout(i.element),i._$header.children().each(function(t,n){t>0&&e(n).hide()}),i._$header.css("overflow","")}}),this._$collapser.nlTooltip("setTitle",xtk_core.list_expand_header()),e(n.currentTarget).hasClass("nlui-list-head-collapse")&&(this._$collapser.nlTooltip("hide"),this._$collapser.nlTooltip("show"));else{this._$collapserIcon.removeClass("nlui-icon-list-header-expand").addClass("nlui-icon-list-header-collapse"),this._$collapser.data("current-state","uncollapsed"),this.saveListSettingsToLocalStorage("headCollapse","uncollapsed"),this._$header.css("overflow","hidden"),this._$header.children().each(function(t,n){e(n).show()}),NL.Widgets.LayoutManager.rebuildLayout(this._$header);for(r=0;r<s.length;r++)u=e(s[r]).outerHeight(!0),o+=u;this._$header.animate({height:o},{duration:250,complete:function(){i._$header.css("overflow",""),NL.Widgets.LayoutManager.rebuildLayout(i.element)}}),this._$collapser.nlTooltip("setTitle",xtk_core.list_collapse_header()),e(n.currentTarget).hasClass("nlui-list-head-collapse")&&(this._$collapser.nlTooltip("hide"),this._$collapser.nlTooltip("show"))}},_addItemToSelection:function(t){t&&t.index&&t.source&&(this.currentSelection[t.index]=t,t.element.addClass("nlui-list-selected"))},resetSelection:function(){e(".nlui-list-selected",this._$body).removeClass("nlui-list-selected"),this.currentSelection=r,this.options.dialog&&NL.Widgets.callWidgetMethod(this._dialogOkButton,"option",["disabled",!0])},selection:function(n,i){var s=this;if(n===r)return NL.isNundef(this.currentSelection)?null:this.currentSelection;s.resetSelection();if(!n||!n.key()){s.options.dialog&&NL.Widgets.callWidgetMethod(s._dialogOkButton,"option",["disabled",!0]);return}if(this.options.keyAttributes===null)throw xtk_core.list_err_noKeyAttributes();e.each(this.currentItems,function(e,t){if(t&&t.source&&t.key.equals(n.key()))return s._setSelectedItem(t),s._selectItem(t),s.options.dialog&&NL.Widgets.callWidgetMethod(s._dialogOkButton,"option",["disabled",!1]),i===!0&&(s.scrollTo(t),s._setSelectedItem(t)),!1})},scrollTo:function(t){var n,r,i;r=t.element.parent().parent(),i=t.element.position(),n=i.top-r.height(),n>0&&r.animate({scrollTop:n},500)},_setSelectedItem:function(t){this.currentSelection=new NL.Collection.Selection(t.key),this.addDataToSelection(t.source),this._selectedItem=t.source},refresh:function(t){this.lastGroupValue="",this.controller._getFromDataSource({refresh:!0,parentKey:t})},_onItemClick:function(t){this.options.selectionMode!=="none"&&(this.resetSelection(),this._setSelectedItem(t),this._selectItem(t))},_onItemDoubleClick:function(t){this.options.selectionMode!=="none"&&(this._setSelectedItem(t),this._validateSelection())},getSelectedItem:function(){return this._selectedItem},_selectItem:function(t){this.options.selectionMode!=="none"&&(this.options.dialog&&NL.Widgets.callWidgetMethod(this._dialogOkButton,"option",["disabled",!1]),NL.isNundef(t)||t.element.addClass("nlui-list-selected"),this.options.onSelection(this.currentSelection,t.source))},_renderItem:function(n,i,s,o,u){var a=this,f=e("<li></li>").addClass("nlui-list-item");if(o&&NL.isFunction(s)){var l=s(a,i,f);NL.isFunction(l.click)&&f.click(l.click),NL.isFunction(l.dblclick)&&f.dblclick(l.dblclick);var c=l.item;f.append(c),u.append(f)}else{var h,p=n+i+1;NL.isPlainObject(a.options.itemRenderer)?a.options.itemRenderer.hasOwnProperty(this.options.layoutType+"-"+this.options.layoutSize)?h=a.options.itemRenderer[this.options.layoutType+"-"+this.options.layoutSize](s,p,f,a):(NL.assert("that.options.itemRenderer["+this.options.layoutType+"-"+this.options.layoutSize+"]"),h=s.label):h=a.options.itemRenderer(s,p,f,a),typeof h=="string"?f.text(h):f.append(h);var d;s.leaf!==r&&s.leaf===!1&&(d=e("<span></span>").addClass("nlui-list-next nlui-icon20 nlui-icon-primary ui-icon-circle-arrow-e").on("click",function(){a.refresh(s.id);if(a._$navigator){var e=a._$navigator.nlNavigator("getItems");e.push(s),a._$navigator.nlNavigator("setItems",e)}}),f.prepend(d));var v=a._buildKeyFromRow(s),m=new NL.Collection.Item(p,s,f,v);a.currentItems.push(m);var g=!1;if(!NL.isNundef(this.currentSelection)&&!NL.isNundef(v)){var y=this.currentSelection.key();g=v.isEqual(y)}g&&f.addClass("nlui-list-selected"),f.click(function(t){var n;if(a._previousClickElementRef===r||a.eventNotSrcEqual(t))n=e(t.srcElement).nlData("clicked-list-item-ref"),NL.isNundef(n)&&(n="clicked-list-item-ref-"+NL.Utils.sequence().nextVal(),e(t.srcElement).nlData("clicked-list-item-ref",n)),a._previousClickElementRef=n,a.stopPropagation(t),a._onItemClick(m),setTimeout(function(){a._previousClickElementRef=r},1e3)}),s.leaf!==r&&s.leaf===!1&&d!==r?f.dblclick(function(e){d.trigger("click"),a.stopPropagation(e)}):f.dblclick(function(e){a._onItemDoubleClick(m),a.stopPropagation(e)});if(this.options.draggable){var b=this.options.draggable===!0,w={data:{source:m.source,selection:new NL.Collection.Selection(v)}};!b&&this.options.draggable.data&&e.extend(w.data,this.options.draggable.data),f.nlDraggable(b?e.extend({},this._defaultDraggableOptions,w):e.extend({},this._defaultDraggableOptions,this.options.draggable,w))}u.append(f)}return f},eventNotSrcEqual:function(n){var r=e(n.srcElement).nlData("clicked-list-item-ref");return this._previousClickElementRef!==r},_render:function(n,r){var i=this,s=0;r===0&&e.each(this.options.additionalItems,function(e,t){s++,i._renderItem(r,e,t,!0,i._$list)}),e.each(n,function(e,t){i.options.groupByAttribute!==null&&i._addGroupByHeader(t),i._renderItem(r,e+s,t,!1,i._$list)}),NL.Widgets.LayoutManager.rebuildLayout(this.element)},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this),e.Widget.prototype.destroy.call(this)},_addGroupByHeader:function(n){if(this.lastGroupValue!==n[this.options.groupByAttribute]&&!NL.isEmpty(this.options.groupByAttribute)){var r,i=e("<li></li>").addClass("nlui-list-group-header");this.options.groupHeadRenderer!==null?i.append(this.options.groupHeadRenderer(n)):(r=n[this.options.groupByAttribute],r===""&&(r=xtk_core.list_group_default_header()),i.text(r)),this._$list.append(i),this.lastGroupValue=n[this.options.groupByAttribute]}}})})(jQuery,window,document)
;"use strict";NL.ns("NL.Collection"),NL.Collection.Event=function(e){this._sender=e,this._listeners=[]},NL.Collection.Event.prototype.attach=function(e){this._listeners.push(e)},NL.Collection.Event.prototype.notify=function(e,t){for(var n=0;n<this._listeners.length;n++)this._listeners[n].call(this._sender,e,t)},NL.Collection.Controller=function(e){this.onResetState=new NL.Collection.Event(this),this.onBeforeGet=new NL.Collection.Event(this),this.onBeforeSuccess=new NL.Collection.Event(this),this.onSuccess=new NL.Collection.Event(this),this.onError=new NL.Collection.Event(this),this.onComplete=new NL.Collection.Event(this),this.dataSource=e},NL.Collection.Controller.prototype._getFromDataSource=function(e){e.filters=[],e.sorts=[];var t=this;this.currentJob&&this.currentJob.cancel(),this.onBeforeGet.notify(e),this.currentJob=this.dataSource.get({params:e,success:function(e,n){t._successCallback(e,n)},error:function(e){t.onError.notify(e)},complete:function(){t.currentJob=null,t.onComplete.notify()}})},NL.Collection.Controller.prototype._successCallback=function(e,t){e?$.isArray(e)&&(e={records:e.length,data:e}):e={},t||(t={}),this.onBeforeSuccess.notify(e,t),this.onSuccess.notify(e,t)},NL.Collection.Controller.prototype.get=function(e){e=NL.Utils.extend({},e),this._getFromDataSource(e)},NL.Collection.Controller.prototype.getNumberOfRecords=function(){this._getFromDataSource({count:!0})},NL.Collection.Controller.prototype.refresh=function(){this.onResetState.notify(),this._getFromDataSource({refresh:!0})},NL.Collection.Controller.prototype.cancel=function(){this.currentJob&&this.currentJob.cancel()},NL.Collection.Key=function(e){this._init(e)},NL.Collection.Key.prototype._init=function(e){!!$.isPlainObject(e),this._content=e;var t=0;e&&$.each(e,function(){t++}),this.length=t},NL.Collection.Key.prototype.attr=function(e,t){if(t===undefined)return this._content[e];this._content[e]=t},NL.Collection.Key.prototype.length=function(){return this.length},NL.Collection.Key.prototype.equals=function(e){if(this.length!==e.length)return!1;var t=!0,n=this;return $.each(this._content,function(n,r){if(e.attr(n)!==r)return t=!1,!1}),t},NL.Collection.Key.prototype.isEqual=NL.Collection.Key.prototype.equals,NL.Collection.Key.parse=function(e){return new NL.Collection.Key(e)},NL.Collection.Key.prototype.stringify=function(){return JSON.stringify(this._content)},NL.Collection.Selection=function(e,t){this._init(e,t)},NL.Collection.Selection.prototype._init=function(e,t){var n,r;!$.isPlainObject(e)||arguments.length!==1&&t!==undefined?(n=e,r=t):r=e,this._data=r===undefined?{}:r,this._key=n},NL.Collection.Selection.prototype.key=function(e){if(e===undefined)return this._key;this._key=e},NL.Collection.Selection.prototype.data=function(e,t){if(t===undefined)return this._data[e];this._data[e]=t},NL.Collection.Selection.parse=function(e){var t=JSON.parse(e);return new NL.Collection.Selection(NL.Collection.Key.parse(t.key),t.data)},NL.Collection.Selection.prototype.stringify=function(){return JSON.stringify({key:JSON.parse(this._key.stringify()),data:this._data})},NL.Collection.Selection.prototype.isEqual=function(e){return NL.isNundef(e)?!1:NL.Utils.isEqual(this._key,e._key)},NL.Collection.Item=function(e,t,n,r){this.index=e,this.source=t,this.element=n,this.key=r,this.children=[]},NL.Collection.Filter=function(e,t,n){this.wildcard=e,this.value=t,this.name=n},NL.Collection.Sort=function(e,t,n){this.expr=e,this.desc=t,this.name=n},NL.Collection.newPlugin=function(e,t){return NL.assert(!NL.isNundef(NL.Collection[t]),'Unsupported plugin class "'+t+'".'),NL.isEmpty(e.name)&&NL.log.warn("Missing name for plugin: "+t),e.pluginClass===undefined&&(e.pluginClass=t),new NL.Collection[t](e)},function(e,t,n){NL.Collection.Plugin=function(e){this.settings=e;var t=this.settings.name;NL.isEmpty(t)&&(NL.isEmpty(this.settings.pluginClass)?t="Plugin_"+NL.Utils.sequence().nextVal():t=this.settings.pluginClass+"_"+NL.Utils.sequence().nextVal()),this._name=t,this._$widget=null,this._collectionController=null,this._isBusy=!1,this._isReady=!1,this._model={filter:null,sort:null}},NL.Collection.Plugin.prototype.isCompatibleWith=function(e){throw"Must be implemented by subclasses"},NL.Collection.Plugin.prototype.setValue=function(e){throw"Must be implemented by subclasses"},NL.Collection.Plugin.prototype.setBusy=function(){this._isBusy=!0},NL.Collection.Plugin.prototype.setIdle=function(){this._isBusy=!1},NL.Collection.Plugin.prototype.setReady=function(){this._isReady=!0},NL.Collection.Plugin.prototype.isBusy=function(){return this._isBusy},NL.Collection.Plugin.prototype.getName=function(){return this._name},NL.Collection.Plugin.prototype.getFilter=function(){return this._model.filter},NL.Collection.Plugin.prototype.getSort=function(){return this._model.sort},NL.Collection.Plugin.prototype.getView=function(){return this._$widget},NL.Collection.Plugin.prototype.setController=function(e){this._collectionController=e},NL.Collection.Plugin.prototype.conf=function(e){if(!this._$widget)return null;if(!e)return{name:this._name,model:this._model};var t=e.model.filter?new NL.Collection.Filter(e.model.filter.wildcard,e.model.filter.value,e.model.filter.name):null,n=e.model.sort?new NL.Collection.Sort(e.model.sort.expr,e.model.sort.desc,e.model.sort.name):null;this._model={filter:t,sort:n}},NL.Collection.Plugin.prototype.applyCriteriae=function(e){throw"Must be implemented by subclasses"},NL.Collection.Plugin.prototype.applyDisplayCriteriae=function(){return null},NL.Collection.Plugin.prototype.run=function(){this._isReady&&(this.isBusy()&&this._cancel(),this._execute())},NL.Collection.Plugin.prototype._execute=function(){this._collectionController&&this._collectionController.refresh()},NL.Collection.Plugin.prototype._cancel=function(){this._collectionController&&this._collectionController.refresh()},NL.Collection.Plugin.prototype.enable=function(){this.setIdle(),NL.isNundef(this._$widget)||NL.Widgets.callWidgetMethod(this._$widget,"enable"),this._enable()},NL.Collection.Plugin.prototype.getPositionHints=function(){return{zone:"tr",width:150,isLong:!1}},NL.Collection.Plugin.prototype.disable=function(){this.setBusy(),NL.isNundef(this._$widget)||NL.Widgets.callWidgetMethod(this._$widget,"disable"),this._disable()},NL.Collection.Plugin.prototype._enable=function(){},NL.Collection.Plugin.prototype._disable=function(){}}(jQuery,window),function(e,t,n){NL.Collection.RefreshButtonPlugin=function(t){var n,r,i;i={value:"",onClick:function(){},source:null},t=NL.Utils.extend(i,t),NL.Collection.RefreshButtonPlugin.baseConstructor.apply(this,[t]),n=this,r={mode:"default",icon:"nlui-icon-list-refresh",onClick:function(){n.isBusy()?n._collectionController.cancel():n.run()},help:xtk_core.list_refresh_button_help,helpGravity:"autoNS"},this._$widget=e("<div></div>").nlButton(r)},NL.OO.extend(NL.Collection.RefreshButtonPlugin,NL.Collection.Plugin),NL.Collection.RefreshButtonPlugin.prototype.applyCriteriae=function(e){},NL.Collection.RefreshButtonPlugin.prototype.getPositionHints=function(){return{zone:"tr",width:28,isLong:!1}},NL.Collection.RefreshButtonPlugin.prototype.isCompatibleWith=function(e){return!0},NL.Collection.RefreshButtonPlugin.prototype.setIconBusy=function(){this._$widget.nlButton("option",{icon:"nlui-icon-cancel",help:xtk_core.loadingDataShort})},NL.Collection.RefreshButtonPlugin.prototype.setIconRefresh=function(){this._$widget.nlButton("option",{icon:"nlui-icon-list-refresh",help:xtk_core.list_refresh_button_help})},NL.Collection.RefreshButtonPlugin.prototype.setIconGo=function(){this._$widget.nlButton("option",{icon:"/xtk/img/list/go_arrow.png",help:xtk_core.list_search_button_help})}}(jQuery,window),function(e,t,n){function r(t){var n=t.data.plugin;e(t.target).parents().is(n._$widget)===!1&&n.hideAvailableLayout(!1)}NL.Collection.SwitchLayoutPlugin=function(t){var n,r,i,s,o,u,a,f;u={currentLayout:null,onClickCallback:function(){},itemRenderers:[],toBottom:!1},this.settings=NL.Utils.extend(u,t),NL.Collection.RefreshButtonPlugin.baseConstructor.apply(this,[this.settings]),this.currentLayout=this.settings.currentLayout,this.availableLayout=[],this.availableLayoutWidget={},this.$availableLayoutWidgetContainer=e("<ol></ol>").addClass("nlui-list-layout-widget-container"),n=this,f=function(t){var r=t.split("-");return function(){var e;for(e in n.availableLayoutWidget)NL.Widgets.callWidgetMethod(n.availableLayoutWidget[e],"option",["isPushed",e===t]);n.settings.onClickCallback(t),NL.Widgets.callWidgetMethod(n._$widget,"option",["icon","nlui-icon-layout-"+r[0]]),n.hideAvailableLayout(!1),n.currentLayout=t}};for(r in this.settings.itemRenderers)if(this.settings.itemRenderers.hasOwnProperty(r)){this.availableLayout.push(r);switch(r){case"default-small":s=xtk_core.list_layout_default();break;case"default-large":s=xtk_core.list_layout_default_large();break;case"link-small":s=xtk_core.list_layout_link();break;case"link-large":s=xtk_core.list_layout_link_large();break;case"bloc-small":s=xtk_core.list_layout_bloc();break;case"bloc-large":s=xtk_core.list_layout_bloc_large();break;case"grid-small":s=xtk_core.list_layout_grid();break;case"grid-medium":s=xtk_core.list_layout_grid_medium();break;case"grid-large":s=xtk_core.list_layout_grid_large();break;default:NL.assert("layout has an unauthorised value")}i="nlui-icon-layout-"+r,r==="grid-medium"&&(i="nlui-icon-layout-grid-large"),o={mode:"submenu",icon:i,label:s,isPushed:r===this.currentLayout,onClick:f(r)},this.availableLayoutWidget[r]=e("<div></div>").nlButton(o).addClass("nlui-list-layout-button"),this.$availableLayoutWidgetContainer.append(e("<li></li>").append(this.availableLayoutWidget[r]))}a=this.currentLayout.split("-"),o={mode:"default",icon:"nlui-icon-layout-"+a[0],rightIcon:"ui-icon-triangle-1-s",onClick:function(){n.$availableLayoutWidgetContainer.css("display")==="none"?n.isBusy()||n.showAvailableLayout():n.hideAvailableLayout(!0)}},this._$widget=e("<div></div>").nlButton(o),this._$widget.on("mouseout",function(e){n.$availableLayoutWidgetContainer.css("display")!=="none"&&n._$widget.addClass("nlui-state-hover")}),this._$widget.append(this.$availableLayoutWidgetContainer)},NL.OO.extend(NL.Collection.SwitchLayoutPlugin,NL.Collection.Plugin),NL.Collection.SwitchLayoutPlugin.prototype.applyCriteriae=function(e){},NL.Collection.SwitchLayoutPlugin.prototype.getPositionHints=function(){return{zone:this.settings.toBottom?"br":"tr",width:44,isLong:!1}},NL.Collection.SwitchLayoutPlugin.prototype.isCompatibleWith=function(e){return!0},NL.Collection.SwitchLayoutPlugin.prototype.showAvailableLayout=function(){var t=this;this.$availableLayoutWidgetContainer.show(),e("body").on("click",{plugin:t},r)},NL.Collection.SwitchLayoutPlugin.prototype.hideAvailableLayout=function(t){this.$availableLayoutWidgetContainer.hide(),e("body").off("click",r),t||this._$widget.removeClass("nlui-state-hover")},NL.Collection.SwitchLayoutPlugin.prototype.applyDisplayCriteriae=function(){return null}}(jQuery,window),function(e,t,n){NL.Collection.EmptyPlugin=function(t){var n,r;r={name:"EmptyPlugin",width:0,zone:"tr",isLong:!1,contents:[]},this.settings=NL.Utils.extend(r,t),NL.Collection.EmptyPlugin.baseConstructor.apply(this,[this.settings]),this._$widget=e("<div></div>");for(n=0;n<this.settings.contents.length;n++)this._$widget.append(this.settings.contents[n])},NL.OO.extend(NL.Collection.EmptyPlugin,NL.Collection.Plugin),NL.Collection.EmptyPlugin.prototype.applyCriteriae=function(e){},NL.Collection.EmptyPlugin.prototype.getPositionHints=function(){return{zone:this.settings.zone,width:this.settings.width,isLong:this.settings.isLong}},NL.Collection.EmptyPlugin.prototype.isCompatibleWith=function(e){return!0},NL.Collection.EmptyPlugin.prototype.add=function(e){return e.appendTo(this._$widget)}}(jQuery,window),function(e,t,n){NL.Collection.FilterPlugin=function(e){var t={wildcard:"",value:null};e=NL.Utils.extend(t,e),NL.Collection.FilterPlugin.baseConstructor.apply(this,[e]),this._model.filter=new NL.Collection.Filter(this.settings.wildcard,this.settings.value)},NL.OO.extend(NL.Collection.FilterPlugin,NL.Collection.Plugin),NL.Collection.FilterPlugin.prototype.applyCriteriae=function(e){var t=this.getFilter();NL.isNundef(t)||e.filters.push(t)},NL.Collection.FilterPlugin.prototype.isCompatibleWith=function(e){return!0},NL.Collection.FilterPlugin.prototype.setValue=function(e){this._model.filter.value=e,this.settings.value=e}}(jQuery,window),function(e,t,n){NL.Collection.SearchInputPlugin=function(t){var r,i,s;s={wildcard:"",value:"",width:0,source:null,realTime:!1,onCancel:function(){},onFilter:function(){},refreshPlugin:null},t=NL.Utils.extend(s,t),NL.Collection.SearchInputPlugin.baseConstructor.apply(this,[t]),r=this,i={wildcard:r.settings.wildcard,source:r.settings.source,realTime:r.settings.realTime,onCancel:r.settings.onCancel,onFilter:function(){r._model.filter.value=NL.Widgets.callWidgetMethod(r._$widget,"getValue"),r.run()},onChange:function(){r.settings.onChange!==n&&r.settings.onChange(),r._model.filter.value=NL.Widgets.callWidgetMethod(r._$widget,"getValue")}},this.settings.refreshPlugin!==null&&(i.onInputCallback=function(){r.settings.refreshPlugin.setIconGo()}),this._$widget=e("<div></div>").nlSearchInput(i)},NL.OO.extend(NL.Collection.SearchInputPlugin,NL.Collection.FilterPlugin),NL.Collection.SearchInputPlugin.prototype.getPositionHints=function(){return{zone:"tr",width:this.settings.width,isLong:!1}},NL.Collection.SearchInputPlugin.prototype.isCompatibleWith=function(e){return e.searchable===!0},NL.Collection.SearchInputPlugin.prototype._enable=function(){NL.Widgets.callWidgetMethod(this._$widget,"toggleResetIcon")},NL.Collection.SearchInputPlugin.prototype._disable=function(){},NL.Collection.SearchInputPlugin.prototype.conf=function(e){if(e===n)return NL.Collection.SearchInputPlugin.superClass.conf.call(this,e);NL.Collection.SearchInputPlugin.superClass.conf.call(this,e),this._$widget.nlSearchInput("setValue",this._model.filter.value)}}(jQuery,window),function(e,t,n){NL.Collection.FilterComboPlugin=function(t){var n={values:null,selected:"",listDisplaySettings:{},toBottom:!1};t=NL.Utils.extend(n,t),NL.Collection.FilterComboPlugin.baseConstructor.apply(this,[t]);var r=this,i={values:r.settings.values,selected:r.settings.selected,multiple:!1,onSelection:function(e,t){r._model.filter.value=t[0].expr,r._model.filter.name=t[0].value,r.run()}};this._$widget=e("<div></div>").nlSelect(i)},NL.OO.extend(NL.Collection.FilterComboPlugin,NL.Collection.FilterPlugin),NL.Collection.FilterComboPlugin.prototype.getPositionHints=function(){return{zone:this.settings.toBottom?"br":"tr",width:175,isLong:!1}},NL.Collection.FilterComboPlugin.prototype.applyDisplayCriteriae=function(){var e=this.settings.listDisplaySettings[this._model.filter.name];return e?e:null},NL.Collection.FilterComboPlugin.prototype.conf=function(e){if(e===n)return NL.Collection.FilterComboPlugin.superClass.conf.call(this,e);NL.Collection.FilterComboPlugin.superClass.conf.call(this,e),this._$widget.nlSelect("selection",this._model.filter.name)}}(jQuery,window),function(e,t,n){NL.Collection.FilterFolderNavigatorPlugin=function(t){var n={items:null,source:null,value:"",emptyText:""};t=NL.Utils.extend(n,t),NL.Collection.FilterFolderNavigatorPlugin.baseConstructor.apply(this,[t]);var r=this,i={emptyText:r.settings.emptyText,items:r.settings.items,source:r.settings.source,onChange:function(e,t){r._model.filter.value=e?e.data("fullName"):"",e?r._model.filter._selection=JSON.parse(e.stringify()):r._model.filter._selection=null,r.run()}};this._$widget=e("<div></div>").nlNavigator(i)},NL.OO.extend(NL.Collection.FilterFolderNavigatorPlugin,NL.Collection.FilterPlugin),NL.Collection.FilterFolderNavigatorPlugin.prototype.getPositionHints=function(){return{zone:"bl",width:0,isLong:!0}},NL.Collection.FilterFolderNavigatorPlugin.prototype.conf=function(e){if(e===n){var e=NL.Collection.FilterFolderNavigatorPlugin.superClass.conf.call(this,e);return this._model.filter._selection?e.model.filter._selection=this._model.filter._selection:e.model.filter._selection=null,e}NL.Collection.FilterFolderNavigatorPlugin.superClass.conf.call(this,e);if(e.model.filter._selection){var t=new NL.Collection.Selection(new NL.Collection.Key(e.model.filter._selection.key),e.model.filter._selection.data);this._$widget.nlNavigator("setValue",t)}}}(jQuery,window),function(e,t,n){NL.Collection.SortPlugin=function(e){var t={expr:null,sortDesc:!0};e=NL.Utils.extend(t,e),NL.Collection.SortPlugin.baseConstructor.apply(this,[e]),this._model.sort=new NL.Collection.Sort(this.settings.expr,this.settings.sortDesc)},NL.OO.extend(NL.Collection.SortPlugin,NL.Collection.Plugin),NL.Collection.SortPlugin.prototype.applyCriteriae=function(e){var t=this.getSort();NL.isNundef(t)||e.sorts.push(t)},NL.Collection.SortPlugin.prototype.isCompatibleWith=function(e){return e.sortable===!0}}(jQuery,window),function(e,t,n){NL.Collection.SortComboPlugin=function(t){var n={values:null,selected:""};t=NL.Utils.extend(n,t),NL.Collection.SortComboPlugin.baseConstructor.apply(this,[t]);var r=this,i={values:r.settings.values,selected:r.settings.selected,multiple:!1,onSelection:function(e,t){r._model.sort=new NL.Collection.Sort(t[0].expr,t[0].sortDesc,t[0].value),r.run()}};this._$widget=e("<div></div>").nlSelect(i)},NL.OO.extend(NL.Collection.SortComboPlugin,NL.Collection.SortPlugin),NL.Collection.SortComboPlugin.prototype.getPositionHints=function(){return{zone:"br",width:175,isLong:!1}},NL.Collection.SortComboPlugin.prototype.conf=function(e){if(e===n)return NL.Collection.SortComboPlugin.superClass.conf.call(this,e);NL.Collection.SortComboPlugin.superClass.conf.call(this,e),this._$widget.nlSelect("selection",this._model.sort.name)}}(jQuery,window)
;"use strict";NL.ns("NL.DataSource"),function(){NL.DataSource.dataFilter=function(t,n,r){return n&&n.filters&&n.filters.length>0&&(t=$.map(t,function(t,i){var s=!1,o=t;typeof t=="string"&&(o={label:t});var u=e;return r&&r.compareFunc&&(u=r.compareFunc),$.each(o,function(e,t){if(NL.isFunction(t))return;$.each(n.filters,function(n,r){var i=r.value.toString();if(NL.isEmpty(i))return s=!0,!1;s=u.call(this,r,e,t,i.toLowerCase());if(s===!0)return!1});if(s===!0)return!1}),s?t:null})),t};var e=function(e,t,n,r){return NL.isString(n)&&n.toLowerCase().indexOf(r)!==-1?!0:!1};NL.DataSource.Local=function(e){var t=this;this.settings=$.extend({},{data:null,dataFilter:NL.DataSource.dataFilter},e)},NL.DataSource.Local.prototype.get=function(e){return e=$.extend({},{params:{},success:function(){},error:function(){},complete:function(){}},e),new NL.DataSource.Local.Job(this.settings,e)},NL.DataSource.Local.prototype.getCapabilities=function(){return{searchable:!0,realTime:!0,sortable:!1}},NL.DataSource.Local.Job=function(e,t){var n=$.extend([],e.data);t.success(e.dataFilter(n,t.params)),t.complete()},NL.DataSource.Local.Job.prototype.cancel=function(){},NL.DataSource.Soap=function(e){this.settings=$.extend({},{url:"/",encoding:"http://schemas.xmlsoap.org/soap/encoding/",schema:null,method:null,beforeSend:function(){},dataFilter:function(){}},e)},NL.DataSource.Soap.prototype.get=function(e){return e=$.extend({},{params:{},success:function(){},error:function(){},complete:function(){}},e),new NL.DataSource.Soap.Job(this.settings,e)},NL.DataSource.Soap.prototype.getCapabilities=function(){return{searchable:!0,realTime:!1,sortable:!1}},NL.DataSource.Soap.Job=function(e,t){this.settings=e,this.options=t,this.soap=new NL.transport.SOAP({urn:this.settings.schema,method:this.settings.method,nsEncoding:this.settings.encoding});var n=this.settings.beforeSend(this.soap,this.options.params);if(n===!1){this.options.complete();return}var r=this;this.soap.start({onSuccess:function(e){var t=e.getNextElement(),n=r.settings.dataFilter(t);e.checkNoMoreArgs(),r.options.success(n,r.options.params)},onError:t.error,onComplete:t.complete})},NL.DataSource.Soap.Job.prototype.cancel=function(){this.soap.cancel(),this.options.complete()},NL.DataSource.QueryDef=function(e){this.settings=$.extend({},{operation:"select",lineCount:10,firstRows:!0,search:{attributes:[],wildcard:"$1",caseSensitive:!1},select:{node:[]},where:{condition:[]},orderBy:{node:[]},autoPk:!0},e),$.each(this.settings.select.node,function(e,t){if(t&&t.expr){if(typeof t.expr!="string")throw"No expression was set on some select nodes";if(t.expr.indexOf("/")!==-1)if(typeof t.alias!="string"||t.alias.indexOf("/")!==-1&&!NL.String.contains(t.alias,".."))throw"Select nodes which are not first order attributes or elements must have an alias that is first a order attribute or element."}})},NL.DataSource.newSearchWhereCondition=function(e,t,n){t||(t="$1");var r="";for(var i=0;i<e.length;i++){var s=e[i];i>0&&(r+=" or "),n?r+=s+" like '%"+t+"%'":r+="Lower ("+s+") like '%' + Lower('"+t+"') + '%'"}var o="'"+t+"'"+" != ''";return{expr:r,enabledIf:o}},NL.DataSource.QueryDef.prototype.get=function(e){return e=$.extend({},{params:{},success:function(){},error:function(){},complete:function(){}},e),new NL.DataSource.QueryDef.Job(this.settings,e)},NL.DataSource.QueryDef.prototype.getCapabilities=function(){return{searchable:!0,realTime:!1,sortable:!0}},NL.DataSource.QueryDef.Job=function(e,t){function o(e,t){NL.Utils.each(t,function(t,n){var r=n.wildcard,i=n.value,s=e.expr;s&&s.indexOf(r)!==-1&&(e.expr=s.split(r).join(NL.XTK.escapeForLikeCond(i)));var o=e.enabledIf;o&&o.indexOf(r)!==-1&&(e.enabledIf=o.split(r).join(NL.XTK.escape(i)))});var n=e.subQuery;n&&NL.Utils.each(n.whereExpr,function(e,n){o(n,t)});var r=e.subWhereExpr;r&&r.length>0&&NL.Utils.each(r,function(e,n){o(n,t)})}this.settings=e,this.options=t;var n=t.params,r=$.extend(!0,{},this.settings),i=this;this.xhr=null,r.operation=n.count?"count":"select";var s=r.search;s.attributes.length>0&&(r.where||(r.where={condition:[]}),r.where.condition.push(NL.DataSource.newSearchWhereCondition(s.attributes,s.wildcard,s.caseSensitive))),r.where&&n.filters&&NL.Utils.each(r.where.condition,function(e,t){o(t,n.filters)}),r.orderBy||(r.orderBy={node:[]});if(!n.count){n.sorts&&n.sorts.length>0&&(r.orderBy.node=[],$.each(n.sorts,function(e,t){r.orderBy.node.push({expr:t.expr,sortDesc:!!t.desc})}));if(n.pagination){var u=n.pagination.perPage;r.lineCount=u+1,r.startLine=(n.pagination.page-1)*u,this.settings.autoPk===!0&&n.pagination.page>1&&(r.startLine+=1)}}var a={url:"/xtk/queryList.jssp",type:"POST",data:{queryDef:encodeURIComponent(JSON.stringify(r))}};this.xhr=new NL.transport.AJAX(a),this.xhr.start({onSuccess:function(e){t.success(e,n)},onError:function(e){e.jqStatus!=="abort"&&t.error(e)},onComplete:function(){t.complete(),i.xhr=null}})},NL.DataSource.QueryDef.Job.prototype.cancel=function(){this.xhr.cancel()},NL.DataSource.Folder=function(e){var t=this;this.settings=$.extend({},{url:NL.transport.SOAP.baseUrl+"/nl/jsp/soaprouter.jsp",encoding:"http://schemas.xmlsoap.org/soap/encoding/",schema:"xtk:folder",method:"LoadChildren",filter:null,hasWriteAccess:!1,enable:!0,beforeSend:function(e,n){e.writeString("parentKey",n.parentKey),e.writeString("folderFilter",t.settings.filter),e.writeBoolean("writeAccess",t.settings.hasWriteAccess),e.writeString("fullName",""),e.writeBoolean("sort",!1)},dataFilter:function(e){var n=[];return $(e).children().each(function(e,r){var i=$(this),s="/xtk/img/folder.png";NL.isEmpty(i.attr("image-name"))||(s="/"+i.attr("image-namespace")+"/img/"+i.attr("image-name"));var o={id:i.attr("id"),label:i.attr("label"),fullName:i.attr("fullName"),icon:s,leaf:NL.Locale.parseInt(i.attr("childcount"),0)===0,xml:this};o.disabled=$.isFunction(t.settings.enable)?!t.settings.enable.apply(o.xml):!t.settings.enable,NL.XTK.parseBoolean(i.attr("_shared"),!1)&&(o.label+=xtk_core.navtreeSharedFolder()),n.push(o)}),n}},e)},NL.DataSource.Folder.prototype.get=function(e){var t=this;return e=$.extend({},{params:{},success:function(){},error:function(){},complete:function(){}},e),this.formatDataOnSuccess!==undefined?e.formatDataOnSuccess=function(e){return t.formatDataOnSuccess(e)}:e.formatDataOnSuccess=function(e){return e},new NL.DataSource.Folder.Job(this.settings,e)},NL.DataSource.Folder.prototype.getCapabilities=function(){return{searchable:!0,realTime:!1,sortable:!1}},NL.DataSource.Folder.Job=function(e,t){this.settings=e,this.options=t,this.soap=new NL.transport.SOAP({urn:this.settings.schema,method:this.settings.method,nsEncoding:this.settings.encoding});var n=this.settings.beforeSend(this.soap,this.options.params);if(n===!1){this.options.complete();return}var r=this;this.soap.start({onSuccess:function(e){var t=e.getNextElement(),n=r.settings.dataFilter(t);e.checkNoMoreArgs(),n=r.options.formatDataOnSuccess(n),r.options.success(n,r.options.params)},onError:t.error,onComplete:t.complete})},NL.DataSource.Folder.Job.prototype.cancel=function(){},NL.DataSource.SchemaWalker=function(e){this.storedResults={},this.linkedResults={};var t=e===undefined?{}:e;this.schemaName=t.schemaName?t.schemaName:"nms:recipient",this.customFilters=e.customFilters},NL.DataSource.SchemaWalker.prototype.setSchemaName=function(e){this.schemaName=e},NL.DataSource.SchemaWalker.prototype.addLinkedResults=function(t,n){this.linkedResults[t]={data:n}},NL.DataSource.SchemaWalker.prototype.refresh=function(e){var t=this;$.each(this.storedResults,function(n,r){t.storedResults[n]=null,t.setSchemaName(n),t.get(e)})},NL.DataSource.SchemaWalker.prototype.findNodeByNodePath=function(e){var t,n,r,i,s,o,u,a,f,l,c,h=[];i=this;if(this.storedResults[this.schemaName]){r=this.storedResults[this.schemaName].data,e.indexOf("/",1)!==-1?(h=e.split("/"),h[0]===""&&(h=h.slice(1)),l=h[0],h=h.slice(1)):l=e,s=r.length;for(t=0;t<s;t++){a=r[t],o=a.nodePath[0]=="/"&&l[0]!="/";if(a.nodePath==(o?"/":"")+l){if(a.target&&h.length>0)return this.findLinkedNodeByNodePath(h,a.target.schema.id,a.nodePath);if(a.type===""){n=0;while(f===undefined&&n<a.children.length)c=a.children[n],c.nodePath===a.nodePath+"/"+h[0]&&(f=c),n++}else f=a;return f}}f=null}return f},NL.DataSource.SchemaWalker.prototype.findLinkedNodeByNodePath=function(e,t,n){var r,i,s,o,u,a,f,l;s=this;if(this.linkedResults[t]){i=this.linkedResults[t].data,f=n+"/"+e[0],e=e.slice(1),o=i.length;for(r=0;r<o;r++){a=i[r],u=a.nodePath[0]=="/"&&f[0]!="/";if(a.nodePath==(u?"/":"")+f)return e.length>0?(NL.isNundef(a.target)?l=a.children.schema.id:l=a.target.schema.id,this.findLinkedNodeByNodePath(e,l,a.nodePath)):a}return null}return undefined},NL.DataSource.SchemaWalker.prototype.search=function(e){var t=this;if(this.storedResults[this.schemaName]){var n=[],r=e.toLowerCase(),i=this.storedResults[this.schemaName].data,s=i.length;for(var o=0;o<s;o++)(i[o].label.toLowerCase().indexOf(r)>=0||i[o].nodePath.toLowerCase().indexOf(r)>=0)&&n.push(i[o]);return n}return undefined},NL.DataSource.SchemaWalker.prototype.getLabel=function(e){var t=this.findNodeByNodePath(e);return t?t.label:t},NL.DataSource.SchemaWalker.prototype.getLabelSingular=function(){var e;return NL.isNundef(this.storedResults[this.schemaName])||(e=this.storedResults[this.schemaName].infos.labelSingular),e},NL.DataSource.SchemaWalker.prototype.isReady=function(){return this.storedResults[this.schemaName]!==undefined},NL.DataSource.SchemaWalker.prototype.get=function(e){e=$.extend({},{params:{},success:function(){},error:function(){},complete:function(){},flatten:!1},e);if(this.storedResults[this.schemaName]){var t=NL.Utils.extend(!0,{},this.storedResults[this.schemaName]);this._handleData(t,e,!0)}else{var n={url:"/xtk/schema.jssp",type:"POST",data:{name:this.schemaName}},r=this,i=this.callbacks,s=function(t){var n=t,i=[];if(e.flatten){var s=function(e,t,n){$.each(e,function(e,r){r.childrenCount>0?(t.push(r.label),s(r.children,t,i),t.pop()):(t.length>0&&(r.ancestors=t.slice()),n.push(r))})};s(n.root.children,[],i)}else i=$.extend(!0,[],n.root.children);var o=$.extend({},n);o.root=null,t={infos:o,data:i},r.storedResults[r.schemaName]=t,r._handleData(t,e,!1)},o=function(t){e.error(t.details)},u=function(){e.complete(),r.xhr=null};this.xhr=new NL.transport.AJAX(n),this.xhr.start({onSuccess:s,onError:o,onComplete:u})}},NL.DataSource.SchemaWalker.prototype.getCapabilities=function(){return{searchable:!0}},NL.DataSource.SchemaWalker.prototype.cancel=function(){this.xhr.cancel()},NL.DataSource.SchemaWalker.prototype._handleData=function(e,t,n){var r=!1,i=[],s=this.customFilters,o=e.data;if($.isArray(s)||$.isArray(t.params.filters)&&t.params.filters.length>0){r=!0;var u=o.length,a=$.isArray(t.params.filters)?t.params.filters.length:0,f=$.isArray(s)?s.length:0;for(var l=0;l<u;l++){var c=!1,h=o[l],p;for(p=0;p<f&&!c;p++)s[p](h)||(c=!0);for(p=0;p<a&&!c;p++){var d=t.params.filters[p];h.label.toLowerCase().indexOf(d.value.toLowerCase())===-1&&h.name.toLowerCase().indexOf(d.value.toLowerCase())===-1&&(c=!0)}c||i.push(h)}}var v=function(e,t){var n=$.isArray(e.ancestors)?e.ancestors[0]+e.label:e.label,r=$.isArray(t.ancestors)?t.ancestors[0]+t.label:t.label;return n<r?-1:n===r?0:1};r?i.sort(v):o.sort(v),typeof this.formatDataOnSuccess=="function"&&(r?i=this.formatDataOnSuccess(i):o=this.formatDataOnSuccess(o)),typeof this.onBeforeSuccess=="function"&&this.onBeforeSuccess(r?i:o,t),t.success(r?i:o,t.params),this.onSuccess&&this.onSuccess(r?i:o,t.params),n&&t.complete()},NL.DataSource.autoCompleteAdapter=function(e,t){return NL.assert(e.getCapabilities().searchable===!0,"Data source must be searchable"),t=NL.Utils.extend({searchWildcard:"$1",valueAttribute:"label"},t),function(n,r){var i=n.term,s={success:function(e,n){r(NL.Utils.map(e,function(e,n){var r=n[t.valueAttribute];return{label:r,value:r,item:n}}))},error:function(e){r([])},complete:function(){},params:{filters:[new NL.Collection.Filter(t.searchWildcard,i)]}},o=e.get(s)}},NL.DataSource.Report=function(e){var t={context:"global",selection:"",schema:"",editionMode:!1,lineCount:10,locationName:"",search:{attributes:[],wildcard:"$1"}};this.settings=NL.Utils.extend({},t,e),this.settings.method="GetAvailableReportsEx",this.settings.urn="xtk:report"},NL.DataSource.Report.prototype.get=function(e){return e=NL.Utils.extend({},{params:{},success:function(){},error:function(){},complete:function(){}},e),new NL.DataSource.Report.Job(this.settings,e)},NL.DataSource.Report.prototype.getCapabilities=function(){return{searchable:!0,realTime:!1,sortable:!0}},NL.DataSource.Report.Job=function(e,t){this.settings=NL.Utils.extend(!0,{},e),this.options=t,this.soap=new NL.transport.SOAP({method:this.settings.method,urn:this.settings.urn});var n=this,r=n.settings.whereExpr||[],i=new NL.XML.Node("where"),s=n.settings.search;s.attributes.length>0&&r.push(NL.DataSource.newSearchWhereCondition(s.attributes,s.wildcard,s.caseSensitive)),t.params.filters&&NL.Utils.each(r,function(e,n){NL.Utils.each(t.params.filters,function(e,t){var r=t.wildcard,i=t.value,s=n.expr;s&&s.indexOf(r)!==-1&&(n.expr=s.split(r).join(NL.XTK.escapeForLikeCond(i)));var o=n.enabledIf;o&&o.indexOf(r)!==-1&&(n.enabledIf=o.split(r).join(NL.XTK.escape(i)))})}),NL.Utils.each(r,function(e,t){var n=new NL.XML.Node("condition");n.attr("expr",t.expr),n.attr("enabledIf",t.enabledIf),i.append(n)}),n._xmlWhereNode=i;var o=new NL.XML.Node("orderBy");t.params.sorts&&t.params.sorts.length>0&&NL.Utils.each(t.params.sorts,function(e,t){var n=new NL.XML.Node("node");n.attr("expr",t.expr),n.attr("sortDesc",t.desc),o.append(n)}),n._xmlOrderByNode=o,n._startLine=0;if(t.params.pagination){var u=t.params.pagination.perPage;n.settings.lineCount=u,n._startLine=(t.params.pagination.page-1)*u}var a=n._beforeSend(n.soap,n.settings);if(a===!1){n.options.complete();return}n.soap.start({onSuccess:function(e){var t=e.getNextElement(),r=n._dataFilter(t);e.checkNoMoreArgs(),n.options.success(r,n.options.params)},onError:n.options.error,onComplete:n.options.complete})},NL.DataSource.Report.Job.prototype._beforeSend=function(e){e.writeString("context",this.settings.context),e.writeString("schema",this.settings.schema),e.writeString("selection",this.settings.selection),e.writeElement("where",this._xmlWhereNode),e.writeElement("orderBy",this._xmlOrderByNode),e.writeInt("editionMode",this.settings.editionMode?1:0),e.writeInt("lineCount",this.settings.lineCount),e.writeInt("startLine",this._startLine),e.writeString("locationName",this.settings.locationName)},NL.DataSource.Report.Job.prototype._dataFilter=function(e){var t={data:[],records:undefined},n=$(e);return NL.XTK.parseBoolean(n.attr("stillHasReports"),!1)&&(t.records=NaN),n.children().each(function(e,n){var r=$(this),i={id:r.attr("id"),cs:r.attr("_cs"),category:r.attr("category"),label:r.attr("label"),labelExpr:r.attr("labelExpr"),internalName:r.attr("internalName"),icon:r.attr("img"),targetReportName:r.attr("targetReportName"),schema:r.attr("schema"),publicationDate:r.attr("publicationDate"),adHocReport:r.attr("adHocReport"),xml:this};t.data.push(i)}),t},NL.DataSource.Report.Job.prototype.cancel=function(){this.soap.cancel(),this.options.complete()}}()
;"use strict";(function(e,t,n){e.widget("NL.nlTextInput",e.NL.nlWidget,{options:{value:null,enabled:!0,readOnly:!1,onValueChanged:function(e){},onValueTouched:function(e){},type:"text"},_create:function(){this._$text=null;var t=this;this.element.addClass("nlui-text"),this.options.readOnly?this._$text=e("<label></label>").appendTo(this.element):(this._$text=e("<input/>").attr("type",this.options.type),this._$text.appendTo(this.element),this._$text.blur(function(e){var n=t.getValue();t.options.onValueChanged(n)}),this._$text.keyup(function(e){var n=t.getValue();t.options.onValueTouched(n)}),this.options.enabled||this._$text.attr("disabled","disabled")),this.options.value!==null&&this.setValue(this.options.value)},setValue:function(e){if(e===null||e===n)e="";NL.assert(NL.isString(e)),this.options.readOnly?(this.options.type==="password"&&(e="\u2022\u2022\u2022\u2022\u2022\u2022"),this._$text.text(e)):this._$text.attr("value",e)},getValue:function(){var e=this._$text.attr("value");if(e===null||e===n)e="";return e}})})(jQuery,window),function(e,t,n){e.widget("NL.nlNumberInput",e.NL.nlWidget,{options:{value:null,enabled:!0,readOnly:!1,onValueChanged:function(e){},onValueTouched:function(e){},type:"integer",decimalPlaces:2,round:!1,range:null,significantFigures:null,protectInternalValue:!0},_create:function(){this._value=this.options.value,this._displayValue=this.options.value,this._format=this._getFormat(),NL.assert(NL.OO.implementsProtocol(this.options.locale,"Locale"),"a nlNumberInput widget cannot be instanciated without a valid locale"),this._$text=null,this.element.addClass("nlui-number");var t=this;this.options.readOnly?(this._$text=e("<label></label>"),this._$text.appendTo(this.element)):(this._$text=e("<input/>").attr("type","text"),this._$text.appendTo(this.element),this._$text.focusin(function(n){e(this).val(t._value)}),this._$text.focusout(function(n){var r=t._validateValue(e(this).val());t.setValue(r)}),this._$text.keyup(function(n){var r=t._validateValue(e(this).val());t.options.onValueTouched(r)}),this.options.enabled||this._$text.attr("disabled","disabled"));if(this._value!==null){var n=this._validateValue(this._value);this.setValue(n)}},setValue:function(e){NL.assert(NL.isNumber(e)),this._displayValue=e,this.options.round&&(this._displayValue=NL.XTK.roundNumber(this._displayValue,this.options.decimalPlaces)),this._displayValue=this.options.locale.formatNumber(this._displayValue,this._format),this.options.protectInternalValue?this._value=e:this._value=this.options.locale.parseNumber(this._displayValue,null),this.options.onValueChanged(this._value),this._refreshVisual()},getValue:function(){return this._value},_validateValue:function(e){var t=this.options.range;if(!NL.isNundef(t))if(t.strict){if(e>=t.max||e<=t.min)return this._value}else if(e>t.max||e<t.min)return this._value;return e.match(this._format.allowCharRegex)?this._value:(e=this.options.locale.parseNumber(e,null),e===null?this._value:e)},_refreshVisual:function(){this.options.readOnly?this._$text.text(this._displayValue):this._$text.val(this._displayValue)},_getFormat:function(){var e={};switch(this.options.type){case"integer":e.decimalPlaces=0,e.allowCharRegex=/(?:[^0-9\s-]+)/;break;case"float":e.decimalPlaces=this.options.decimalPlaces,e.allowCharRegex=/(?:[^0-9\.\,\s-]+)/,e.significantFigures=this.options.significantFigures}return e}})}(jQuery,window),function(e,t,n){e.widget("NL.nlMemoInput",e.NL.nlWidget,{options:{value:null,enabled:!0,readOnly:!1,onValueChanged:function(e){},onValueTouched:function(e){},rows:4},_create:function(){this._$area=null,this._$text=null,this.element.addClass("nlui-memo");var t=this;if(!this.options.readOnly){var n=this.options.rows;this._$area=e("<textarea></textarea>").attr("rows",n),this._$area.blur(function(e){var n=t.getValue();t.options.onValueChanged(n)}),this._$area.keyup(function(e){var n=t.getValue();t.options.onValueTouched(n)}),this._$area.appendTo(this.element),this.options.enabled||this._$area.attr("disabled","disabled")}else this._$text=this.element;this.options.value!==null&&this.setValue(this.options.value)},setValue:function(e){if(e===null||e===n)e="";NL.assert(NL.isString(e)),this.options.readOnly?this._$text.nlMore({value:e}):this._$area.attr("value",e)},getValue:function(){var e=this._$area.attr("value");if(e===null||e===n)e="";return e},rebuildLayout:function(){this.options.readOnly&&this._$text.nlMore("rebuildLayout")}})}(jQuery,window),function(e,t,n){e.widget("NL.nlComboInput",e.NL.nlWidget,{options:{value:null,enabled:!0,readOnly:!1,onValueChanged:function(e){},options:[],keyAttribute:null},_create:function(){this._$select=null;var t=this;if(this.options.readOnly)this._$text=e("<label></label>").appendTo(this.element);else{this._$select=e("<select></select>").appendTo(this.element),this.options.enabled||this._$select.attr("disabled","disabled");for(var n in this.options.options){var r=this.options.options[n],i=e("<option></option>");i.attr("value",r[this.options.keyAttribute]),i.text(r.label),i.appendTo(this._$select)}this._$select.change(function(e){var n=t.getValue();t.options.onValueChanged(n)})}this.options.value!==null&&this.setValue(this.options.value)},setValue:function(e){if(this.options.readOnly){var t=this._getFullValueFromInternalValue(e),r=t?t.label:"";this._$text.text(r)}else e!==null&&e!==n&&this._$select.val(e)},getValue:function(){var e=this._$select.val();return e},_getFullValueFromInternalValue:function(e){if(e===null||e===n)return null;for(var t=0;t<this.options.options.length;t++)if(e===this.options.options[t][this.options.keyAttribute])return this.options.options[t];return null}})}(jQuery,window),function(e,t,n){e.widget("NL.nlSearchInput",e.NL.nlWidget,{options:{realTime:!1,delay:400,onChange:n,onCancel:n,onFilter:n,onInputCallback:n},searchRequested:!1,_create:function(){var t,r,i;this.$buttonLeft=e("<div></div>").addClass("nlui-search-button nlui-search-search nlui-icon icons_16x16 ui-icon-search"),i=e("<div></div>").addClass("nlui-search-input-container"),r=e("<input/>").attr("placeholder",xtk_core.search_placeHolder()).appendTo(i),t=this,this.$buttonRight=e("<a></a>").addClass("nlui-search-button nlui-search-reset nlui-icon icons_16x16 ui-icon-circle-close").attr("href","javascript:;").hide(),this.element.addClass("ui-widget nlui-search-container").append(this.$buttonLeft).append(this.$buttonRight).append(i),this.options.realTime?r.on("input",function(e){t.searchRequested||(t.searchRequested=!0,setTimeout(function(){t.searchRequested&&(t.options.onFilter(),t.searchRequested=!1)},t.options.delay),t.toggleResetIcon(),t.options.onInputCallback!==n&&t.options.onInputCallback())}):r.on("input",function(e){t.toggleResetIcon(),t.options.onInputCallback!==n&&t.options.onInputCallback()}),r.keypress(function(e){e.which===13&&(t.options.onFilter(),t.toggleResetIcon())}).click(function(e){e.srcElement===this&&t.stopPropagation(e)}),this.options.onChange!==n&&r.on("change",function(e){t.options.onChange()}),this.$buttonRight.click(function(n){var r;return e(n.target).hasClass("nlui-search-reset")?r=t.resetSearch():r=t.options.onCancel(),r}),this.filter=r},resetSearch:function(){return this.filter.val(""),this.options.onFilter!==n&&this.options.onFilter(),this.$buttonRight.hide(),!1},toggleResetIcon:function(){this.filter.val()!==""?this.$buttonRight.show():this.$buttonRight.hide()},_destroy:function(){e.remove(this.element)},getValue:function(){return this.filter.val()},setValue:function(e){this.filter.val(e),this.options.onFilter!==n&&this.options.onFilter(),this.toggleResetIcon()}})}(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlPagination",e.NL.nlWidget,{options:{controller:null,mode:"scrolling",perPage:10,page:1,numberOfRecords:NaN,scrollingText:xtk_core.navigation_scrollingNext(),rendererFn:null,loadingText:xtk_core.loadingData()},currentPage:function(){return this.options.page},perPage:function(){return this.options.perPage},records:function(){return this.options.numberOfRecords},pages:function(){return Math.max(Math.ceil(this.records()/this.perPage()),1)},getPage:function(e){this.options.page=e,this.options.controller.get()},_create:function(){if(e.isFunction(this.options.rendererFn))this.$skeleton=this.options.rendererFn.call(this,this.options);else switch(this.options.mode){case"grid":this.$skeleton=this._createButtonFooter();break;case"scrolling":default:this.$skeleton=this._createScrollingFooter()}var t=this;t.options.controller.onResetState.attach(function(){t.options.page=1,t.options.numberOfRecords=NaN}),t.options.controller.onBeforeGet.attach(function(e){e.pagination={perPage:t.perPage(),page:t.currentPage()}}),t.options.controller.onBeforeSuccess.attach(function(e,n){NL.isNundef(e.records)?e.data&&(e.data.length<=t.options.perPage?t.options.numberOfRecords=(t.options.page-1)*t.options.perPage+e.data.length:(t.options.numberOfRecords=NaN,e.data.pop())):t.options.numberOfRecords=e.records}),this.element.html(this.$skeleton)},_createLoadingData:function(){var t,n;return n=this.options.controller,t=e("<p></p>").addClass("nlui-list-searching").append(e("<img></img>").addClass("nlui-list-loading").attr("src","/xtk/img/loading.gif")).append(e("<span></span>").text(this.options.loadingText)).hide(),n.onBeforeGet.attach(function(e){t.show(),t.css("display","table-cell")}),n.onComplete.attach(function(){t.hide()}),t},_createScrollingFooter:function(){var t,n,r;return t=this,n=this.options.controller,this._$loadMore=e("<p></p>").text(this.options.scrollingText).hide(),this._$loading=this._createLoadingData(),r=e("<li></li>").addClass("nlui-list-item nlui-list-item-pagination").click(function(e){t.getPage(t.currentPage()+1)}),e("<div></div>").append(this._$loadMore).append(this._$loading).appendTo(r),n.onBeforeGet.attach(function(e){t.onBeforeGetCallback(e)}),n.onSuccess.attach(function(e,n){t.onSuccessCallback(n)}),n.onComplete.attach(function(){t.onCompleteCallback()}),n.onError.attach(function(e,n){t.onErrorCallback(n)}),this._$nextBunch=e("<ol></ol>").addClass("nlui-list-pagination").append(r),this._$nextBunch.hide(),this._$nextBunch},_createButtonFooter:function(){var t,n;return t=this,n=this.options.controller,this._$loadMore=e('<div class="nlui-navigation-loadMore"></div>').text(this.options.scrollingText).hide(),this._$nextBunch=e('<div class="ui-button ui-state-default ui-corner-all nlui-navigation-scrollingNext"></div>'),this._$loading=this._createLoadingData(),this._$nextBunch.attr("title",this.options.scrollingText).click(function(e){t.getPage(t.currentPage()+1)}).append(this._$loadMore).append(this._$loading),n.onBeforeGet.attach(function(e){t.onBeforeGetCallback(e)}),n.onSuccess.attach(function(e,n){t.onSuccessCallback(n)}),n.onComplete.attach(function(){t.onCompleteCallback()}),n.onError.attach(function(e,n){t.onErrorCallback(n)}),this._$nextBunch.hide(),this._$nextBunch},onBeforeGetCallback:function(e){this._$nextBunch.attr("disabled","disabled"),this.showLoad(),this._$nextBunch.show(),e.refresh&&this._$nextBunch.show()},onSuccessCallback:function(e){var t=this.records();isNaN(t)||this.currentPage()<this.pages()?this._$nextBunch.show():this._$nextBunch.hide()},onCompleteCallback:function(){this._$nextBunch.removeAttr("disabled"),this.showMore(!1)},onErrorCallback:function(e){this._$loadMore.hide(),this._$nextBunch.hide()},showLoad:function(){this._$loadMore.hide(),this._$loading.show(),this._$loading.css("display","table-cell")},showMore:function(e){this._$loadMore.show(),this._$loadMore.css("display","table-cell"),this._$loading.hide(),e===!0&&this._$nextBunch.show()},destroy:function(){e.remove(this.element)}})})(jQuery)
;"use strict";(function(e,t,n){var r={options:{selected:[],multiple:!1,values:[],onSelection:function(t,n){}},_$select:null,_optionsElements:[],_selectedItems:{},_selectedKeys:[],_create:function(){var t=this;this.options.values.sort(function(e,t){return!NL.isNundef(e.order)&&!NL.isNundef(t.order)?e.order-t.order:-1}),t.element.addClass("ui-widget nlui-select"),t._$select=e("<select></select>").appendTo(t.element),t.options.multiple&&t._$select.attr("multiple","multiple"),NL.isEmpty(t.options.selected)||(NL.isString(t.options.selected)&&(t.options.selected=[t.options.selected]),t._selectedKeys=t.options.selected),t.refresh(),t._$select.change(function(){t._selectedKeys=[],NL.Utils.each(t._optionsElements,function(e,n){n.is(":selected")&&t._selectedKeys.push(n.val())}),t.selection(t._selectedKeys)}),t._$select.change()},selection:function(t){var n=this,r=[];if(NL.isNundef(t))return n._selectedItems;NL.isString(t)&&(t=[t]),n._selectedItems=[],n._selectedKeys=t,NL.Utils.each(t,function(e,t){var i=n.getItem(t);i&&(r.push(i),n._selectedItems[t]=r)}),r&&r.length>0&&(n.options.onSelection.call(n,t,r),n.refresh())},getItem:function(t){var n;return NL.Utils.each(this.options.values,function(e,r){if(r.value===t)return n=r,!1}),n},refresh:function(){var t=this;this._optionsElements=[],t._$select.children().remove(),NL.Utils.each(this.options.values,function(n,r){var i=e("<option></option>").attr("value",r.value).text(r.label);NL.Utils.indexOf(r.value,t._selectedKeys)!==-1&&i.attr("selected","selected"),t._$select.append(i),t._optionsElements.push(i)})},_setOption:function(t,n){},destroy:function(){this.element.removeClass("nlui-select").removeClass("ui-widget"),this._$select.remove()}};e.widget("NL.nlSelect",e.NL.nlWidget,r)})(jQuery,window)
;"use strict";(function(e,t,n){e.widget("NL.nlHorizontalLayout",e.NL.nlWidget,{options:{gutter:4,leftRightGutter:20,height:0},_create:function(){this.element.addClass("nlui-horizontalLayout"),NL.Widgets.LayoutManager.registerWidget(this),this._widgets={}},addWidget:function(t,n){n=e.extend({position:"left",width:0},n);var r=e("<div></div>").addClass("nlui-horizontalLayout-hcell").append(t);this.element.append(r);var i=NL.Utils.sequence().nextVal();return this._widgets[i]={$cell:r,$widget:t,constraints:n},i},removeWidget:function(e){this._widgets.hasOwnProperty(e)&&(this._widgets[e].$widget.remove(),delete this._widgets[e])},rebuildLayout:function(){var t=this;this.options.height>0&&this.element.css("height",this.options.height+"px");var r=this.options.gutter,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0;e.each(this._widgets,function(e,t){if(t!==n){var r=t.$cell,i=t.constraints;i.position==="left"&&(u++,i.width>0?o+=i.width:a++),i.position==="right"&&(l++,i.width>0?f+=i.width:c++),r.height>s&&(s=r.height)}});var h=this.element.width(),p=NL.HTMLUtils.paddingLeft(this.element),d=NL.HTMLUtils.paddingTop(this.element),v=h;u>0&&l>0&&(i=this.options.leftRightGutter,v-=i),u>1&&(v-=r*(u-1)),v-=o,l>1&&(v-=r*(l-1)),v-=f;var m=0,g=0;a>0||c>0?(m=Math.floor(v/(a+c)),g=v%(a+c)):l>0&&(i+=v);var y=p;e.each(["left","right"],function(s,o){o==="right"&&(y+=i);var u=!0;e.each(t._widgets,function(e,t){if(t!==n){var i=t.$cell,s=t.constraints;if(s.position===o){u||(y+=r,g>0&&(g--,y++)),u=!1;var a=m;s.width>0&&(a=s.width),i.css({top:d,left:y}),s.width=="auto"&&(a=t.$widget.width(),a!=0&&(t.constraints.width=a)),i.width(a),y+=a}}})}),this.options.height===0&&this.element.height(s)},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}})})(jQuery,window)
;"use strict";(function(e,t,n){e.widget("NL.nlVerticalLayout",e.NL.nlWidget,{options:{gutter:4,topBottomGutter:20,width:0},_create:function(){this.element.addClass("nlui-verticalLayout"),NL.Widgets.LayoutManager.registerWidget(this),this._widgets={}},addWidget:function(t,n){n=e.extend({position:"top",height:0},n);var r=e("<div></div>").addClass("nlui-verticalLayout-hcell").append(t);this.element.append(r);var i=NL.Utils.sequence().nextVal();return this._widgets[i]={$cell:r,$widget:t,constraints:n},i},removeWidget:function(e){this._widgets.hasOwnProperty(e)&&(this._widgets[e].$widget.remove(),delete this._widgets[e])},rebuildLayout:function(){var t=this;this.options.width>0&&this.element.css("width",this.options.width+"px");var r=this.options.gutter,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0;e.each(this._widgets,function(e,t){if(t!==n){var r=t.$cell,i=t.constraints;i.position==="top"&&(u++,i.height>0?o+=i.height:a++),i.position==="bottom"&&(l++,i.height>0?f+=i.height:c++),r.width>s&&(s=r.width)}});var h=this.element.height(),p=NL.HTMLUtils.paddingLeft(this.element),d=NL.HTMLUtils.paddingTop(this.element),v=h;u>0&&l>0&&(i=this.options.topBottomGutter,v-=i),u>1&&(v-=r*(u-1)),v-=o,l>1&&(v-=r*(l-1)),v-=f;var m=0,g=0;a>0||c>0?(m=Math.floor(v/(a+c)),g=v%(a+c)):l>0&&(i+=v);var y=d;e.each(["top","bottom"],function(s,o){o==="bottom"&&(y+=i);var u=!0;e.each(t._widgets,function(e,t){if(t!==n){var i=t.$cell,s=t.constraints;if(s.position===o){u||(y+=r,g>0&&(g--,y++)),u=!1;var a=m;s.height>0&&(a=s.height),i.height(a).css({top:y,left:p}),y+=a,NL.Widgets.callWidgetMethod(t.$widget,"rebuildLayout")}}})}),this.options.width===0&&this.element.width(s)},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}})})(jQuery,window)
;"use strict";NL.assert(NL.Widgets.drapDropManager===undefined,"The dragDrop manager was already defined."),NL.Widgets.dragDropManager=function(){var e=null,t=[],n=[],r=null,i=null,s=function(){return e?e.draggable().data("draggable"):null},o=function(e){return e?"pointer":"intersect"},u=!0,a=function(e){var t=e.offset(),n=$(e[0].contentDocument);return{left:t.left-n.scrollLeft(),top:t.top-n.scrollTop()}},f=function(e){var t=s();t&&t._mouseDown(e)},l=function(e){var t=s();if(t){if(u){var n=a(e.data.$frame);t.offset.click.left-=n.left,t.offset.click.top-=n.top,u=!1}t._mouseMove(e)}},c=function(e){var t=s();if(t){var n=a(e.data.$frame);t.offset.click.left+=n.left,t.offset.click.top+=n.top,u=!0}},h=function(e){var t=s();if(t){var n=a(e.data.$frame);t.offset.click.left+=n.left,t.offset.click.top+=n.top,u=!0,t._mouseUp(e)}$("body").trigger("mouseup")};return{initIFrameFix:function(e){var t=e===undefined?$("iframe"):e;t.each(function(){var e=$(this),t=e.contents().find("body");t.unbind("mousedown",f).unbind("mousemove",l).unbind("mouseout",c).unbind("mouseup",h).bind("mousedown",{$frame:e},f).bind("mousemove",{$frame:e},l).bind("mouseout",{$frame:e},c).bind("mouseup",{$frame:e},h)})},registerDraggingZone:function(e){i===null?(i=e.isCursorVisible(),r=!0):i!==e.isCursorVisible()&&(r=!1)},registerDroppingZone:function(e){t.push(e),r&&e._droppableOption("tolerance",o(i)),e.options.type==="listOfDraggables"&&n.push(e)},notifyDragStart:function(n){e=n.element;if(!r){var i=t.length,s=o(n.isCursorVisible());for(var u=0;u<i;u++)t[u].options.lockTolerance||t[u]._droppableOption("tolerance",s)}},notifyDragStop:function(t){e=null},notifyDOMModification:function(){var e=n.length;for(var t=0;t<e;t++)n[t].makeInsertion()},getCurrentDraggable:function(){return e},getDroppingInsertionZones:function(){return n}}}(),function(e,t,n){var r="nlDraggable-",i=r+"accept-",s=1,o=2,u=function(e){var t=e.offset();return{x:(t.left+e.outerWidth(!0))/2,y:(t.top+e.outerHeight(!0))/2}},a=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},f=function(e,t){var n=l(e,t);if(n.touching)return 0;var r=e.offset(),i=t.offset();if(n.horizontalTouching)return r.left<i.left?i.left-(r.left+e.outerWidth(!0)):r.left-(i.left+t.outerWidth(!0));if(n.verticalTouching)return r.top<i.top?i.top-(r.top+e.outerHeight(!0)):r.top-(i.top+t.outerHeight(!0));if(r.top<i.top&&r.left<i.left)return a({x:r.left+e.outerWidth(!0),y:r.top+e.outerHeight(!0)},{x:i.left,y:i.top});if(r.top<i.top&&r.left>i.left)return a({x:r.left,y:r.top+e.outerHeight(!0)},{x:i.left+t.outerWidth(!0),y:i.top});if(r.top>i.top&&r.left<i.left)return a({x:r.left+e.outerWidth(!0),y:r.top},{x:i.left,y:i.top+t.outerHeight(!0)});if(r.top>i.top&&r.left>i.left)return a({x:r.left,y:r.top},{x:i.left+t.outerWidth(!0),y:i.top+t.outerHeight(!0)})},l=function(t,n){var r=t.outerHeight(!0),i=t.outerWidth(!0),s=n.outerHeight(!0),o=n.outerWidth(!0),u=t.offset(),a=n.offset(),f=a.top,l=u.top,c=a.left,h=u.left,p=c+o,d=h+i,v=f+s,m=l+r,g=f>=l&&f<=m||v>=l&&v<=m||l>=f&&l<=v||m>=f&&m<=v,y=c>=h&&c<=d||p>=h&&p<=d||h>=c&&h<=p||d>=c&&d<=p,b=g&&y,w=b?(Math.min(v,v)-Math.max(f,l))*(Math.min(p,d)-Math.max(c,h)):0,E={right:d>p?(Math.min(v,m)-Math.max(f,l))/r:0,left:h<c?(Math.min(v,m)-Math.max(f,l))/r:0,top:l<f?(Math.min(p,d)-Math.max(c,h))/i:0,bottom:m>v?(Math.min(p,d)-Math.max(c,h))/i:0},S=0,x=null;return e.each(E,function(e,t){t>S&&(x=e,S=t)}),{overflow:x,horizontalTouching:g,verticalTouching:y,touching:b,touchingAmount:w}},c=function(t){var n=t.length,r=[],i=[],u=Number.MAX_VALUE,a=Number.MAX_VALUE,f=0,l=0;t.each(function(){var t=e(this),n=t.offset().top,s=t.offset().left;r.push(n),i.push(s),u>n&&(u=n),a>s&&(a=s)});for(var c=0;c<n;c++)f+=r[c]-u,l+=i[c]-a;return l>f?s:o};e.widget("NL.nlDraggable",e.NL.nlWidget,{options:{dragZoneId:null,helper:"original",data:{},onStart:function(e,t,n){},onDrag:function(e,t,n){},onStop:function(e,t,n){},draggableOptions:{}},_defaultOptions:{containment:"document",scroll:!1,revert:"invalid"},_create:function(){var t=this,r=this.options,s=this.element;t.manager=NL.Widgets.dragDropManager;var o={revertDuration:0};e.each(["create","start","drag","stop","helper"],function(){r.draggableOptions[this]&&NL.log.error("jQuery UI option definition is not allowed here ("+this+").")}),r.dragZoneId!==null&&r.dragZoneId!==n&&s.addClass(i+r.dragZoneId),o.start=function(n,i){t.manager.notifyDragStart(t),t._styleBeforeDragging=t.element.attr("style"),t._hideWhenDragging&&t.element.toggle(!1),e.isFunction(r.onStart)&&r.onStart.call(this,r.dragZoneId,t.options.data,i)},e.isFunction(r.onDrag)&&(o.drag=function(e,n){r.onDrag.call(this,r.dragZoneId,t.options.data,n)}),o.stop=function(n,i){t.manager.notifyDragStop(t),t._hideWhenDragging&&t.element.toggle(!0),e.isFunction(r.onStop)&&r.onStop.call(this,r.dragZoneId,t.options.data,i)},s.draggable(e.extend({},this._defaultOptions,o,r.draggableOptions)),t.manager.registerDraggingZone(t),this._setHelper(r.helper)},_setOption:function(e,t){t!==n&&e==="helper"&&this._setHelper(t)},_setHelper:function(e){this._hideWhenDragging=e==="cloneAndHide",e==="cloneAndHide"?this.element.draggable("option","helper","clone"):this.element.draggable("option","helper",e)},_draggableOption:function(e,t){return this.element.draggable("option",e,t)},isCursorVisible:function(){return this._draggableOption("cursor")!=="none"},styleBeforeDragging:function(){return this._styleBeforeDragging},data:function(e,t){if(t===n)return this.options.data[e];this.options.data[e]=t}});var h="nlui-droppable-dropzone",p=function(t,n){t.data._onHelperDrag.call(t.data,e.extend({draggable:e(this)},n))},d=function(t,n){t.data._onHelperDragStop.call(t.data,e.extend({draggable:e(this)},n))},v=function(e,t){e.data._onAfterDrop.call(e.data)};e.widget("NL.nlDroppable",e.NL.nlWidget,{options:{acceptedIds:[],type:null,draggableSelector:"*",lockTolerance:!1,onDrop:function(e,t,n){},onOver:function(e,t,n){},onOut:function(e,t,n){},isInsertionCompatible:function(e,t,n){return!0},onInsertion:function(e,t,n,r){},onMove:function(e,t,n,r){},onAfterDrop:function(){},droppableOptions:{}},_defaultOptions:{},_callbacksOverrides:{drop:"onDrop",over:"onOver",out:"onOut"},_overrideCallback:function(t,r){var i=this;return i.options[i._callbacksOverrides[t]]?function(s,o){o.draggable.data("nlDraggable")!==n&&i.options[i._callbacksOverrides[t]].call(r[0],o.draggable.nlDraggable("option","dragZoneId"),o.draggable.nlDraggable("option","data"),e.extend({},o,{event:s}))}:null},_create:function(){var t=this,n=this.options,r=this.element;t.manager=NL.Widgets.dragDropManager;var s={};t._classBefore=this.element.attr("class"),e.each(["drop","over","out"],function(e,i){n.droppableOptions[i]&&NL.log.error("jQuery UI callback definition is not allowed here ("+i+").");var o=t._overrideCallback(i,r);i==="drop"?s[i]=function(e,n){n.draggable.bind("dragstop",t,v),o&&o(e,n)}:o&&(s[i]=o)});if(n.acceptedIds.length){var o="."+i+n.acceptedIds[0];for(var u=1;u<n.acceptedIds.length;u++)o+=", ."+i+n.acceptedIds[u];s.accept=o}t.options.type==="listOfDraggables"&&t.makeInsertion(),this.element.droppable(e.extend({},this._defaultOptions,s,n.droppableOptions)),t.manager.registerDroppingZone(t)},destroy:function(){this.element.droppable("destroy"),e.Widget.prototype.destroy.call(this),this.element.attr("class",this._classBefore)},_getDraggableList:function(){return this.element.children(this.options.draggableSelector).not(".ui-draggable-dragging").not("."+h)},makeInsertion:function(){var t=this,n=t.element,r=this._getDraggableList();t._insertionItems={},t._anchors=[],t._orientation=c(r),n.children("."+h).remove(),r.unbind("drag",p).bind("drag",t,p),r.each(function(n,r){var i=e(r);t._anchors.push({point:u(i),$element:i}),i.draggable("option","revert",!0),i.nlDraggable("option","helper","cloneAndHide"),i.before(e('<div class="'+h+'"> </div>').toggle(!1)),i.nlDroppable({lockTolerance:!0,droppableOptions:{tolerance:"touch"}}).data("nlDroppable-itemIndex",n)});if(r.length===0)n.append(e('<div class="'+h+'"> </div>').toggle(!1)),this._emptyDroppingZone=!0;else{var i=e(r[0]);this._itemDisplay={display:i.css("display"),margin:i.css("margin"),"box-sizing":i.css("box-sizing"),"float":i.css("float")},e(r[r.length-1]).after(e('<div class="'+h+'"> </div>').toggle(!1)),this._emptyDroppingZone=!1}},_onAfterDrop:function(){e.isFunction(this.options.onAfterDrop)&&this.options.onAfterDrop()},_checkCompatibleInsertion:function(t,n){return!e.isFunction(this.options.isInsertionCompatible)||this.options.isInsertionCompatible.call(this.element,t.nlDraggable("option","dragZoneId"),n,t.nlDraggable("option","data"))},_refreshDropZones:function(){e("."+h).toggle(!1);var t=this.manager.getCurrentDraggable();this._insertionItems.before?this._insertionItems.before.next("."+h).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).toggle(!0).css(this._itemDisplay):this._insertionItems.after&&this._insertionItems.after.prev("."+h).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).toggle(!0).css(this._itemDisplay)},_setItemOrder:function(e,t){this._dropPossible(e!==null||t!==null),this._insertionItems={before:e,after:t},this._refreshDropZones()},_dropPossible:function(e){e?this.manager.getCurrentDraggable().draggable("option","revert",!1):this.manager.getCurrentDraggable().draggable("option","revert",!0)},_onHelperDrag:function(e){var t=this.manager.getDroppingInsertionZones(),n=null,r=0,i=e.helper;for(var s=0;s<t.length;s++){if(!t[s].element.is(":visible"))continue;t[s]._setItemOrder(null,null);var o=l(i,t[s].element);o.touching&&o.touchingAmount>r&&(r=o.touchingAmount,n=s)}if(n===null){var u=Number.MAX_VALUE;for(var s=0;s<t.length;s++){if(!t[s].element.is(":visible"))continue;var a=f(i,t[s].element);a<u&&(u=a,n=s)}}NL.assert(NL.isNumber(n),"Closest drop zone was not found."),n!==null&&t[n]._handleDrag(e)},_handleDrag:function(e){var t=this._anchors.length,n=e.draggable;n.unbind("dragstop",d).bind("dragstop",this,d);if(t===0)this.element.find("."+h).outerWidth(n.outerWidth()).outerHeight(n.outerHeight()).toggle(!0);else{var r=u(e.helper),i=Number.MAX_VALUE,f=null;for(var l=0;l<t;l++){var c=a(r,this._anchors[l].point);c<i&&(i=c,f=l)}NL.assert(NL.isNumber(f),"Closest anchor was not found.");var p=!1;f===t-1&&(p=this._orientation===s&&r.x>this._anchors[f].point.x||this._orientation===o&&r.y>this._anchors[f].point.y),f===0?t>1||!p?this._setItemOrder(null,this._anchors[f].$element):this._setItemOrder(this._anchors[f].$element,null):f===t-1&&p?this._setItemOrder(this._anchors[f].$element,null):this._setItemOrder(this._anchors[f-1].$element,this._anchors[f].$element)}},_onHelperDragStop:function(e){var t=e.draggable;t.unbind("dragstop",d);var n=this.element.find(t).length>0;if(this._anchors.length===0&&!n)this._checkCompatibleInsertion(t,null,null)&&(this.element.append(t),this._completeItemInsertion(t,0));else if(this._insertionItems.before||this._insertionItems.after){var r=!1,i=this._insertionItems.before,s=this._insertionItems.after,o=this._getInsertionIndex(i,s);n&&i&&this.element.children().index(i)>=this.element.children().index(t)&&o--;var u=n&&o===t.data("nlDroppable-itemIndex");!u&&this._checkCompatibleInsertion(t,o)&&(t.draggable("option","revertDuration",0),i?(i.after(t),r=!0):s&&(s.before(t),r=!0)),r&&(n?this._completeItemMove(t,o):this._completeItemInsertion(t,o))}this._setItemOrder(null,null)},_getInsertionIndex:function(e,t){return NL.assert(e!==n&&t!==n,"Incomplete function call ["+e+", "+t+"]"),e?this._getDraggableList().index(e)+1:t?this._getDraggableList().index(t):0},_completeItemMove:function(t,n){e.isFunction(this.options.onMove)&&this.options.onMove.call(this.element,t.nlDraggable("option","dragZoneId"),n,t.nlDraggable("option","data"),t),this._finalizeItemMove(t)},_completeItemInsertion:function(t,n){e.isFunction(this.options.onInsertion)&&this.options.onInsertion.call(this.element,t.nlDraggable("option","dragZoneId"),n,t.nlDraggable("option","data"),t),this._finalizeItemMove(t)},_finalizeItemMove:function(e){e.attr("style",e.nlDraggable("styleBeforeDragging")),this.manager.notifyDOMModification()},_droppableOption:function(e,t){return this.element.droppable("option",e,t)}})}(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlSection",e.NL.nlWidget,{options:{content:null,topright:null,style:"section"},$content:undefined,$topright:undefined,_create:function(){var t=this.element.children().detach(),n=this.options.style;if(n===null||n===undefined)n="section";n!=="none"&&n!=="section"&&n!=="subsection"&&(NL.log.warn("Invalid style ["+n+"] for section. Using default",this),n="section"),n==="none"&&(n="section-base"),e(this.element).addClass("ui-widget ui-corner-all"),e(this.element).addClass("nlui-section-base nlui-"+n),this.options.topright&&(this.$topright=e("<div></div>").addClass("nlui-section-base-topright").appendTo(this.element)),this.$content=e("<div></div>").addClass("nlui-section-base-contents nlui-"+n+"-contents").appendTo(this.element);if(this.options.content===null||this.options.content===undefined)this.options.content=t;this._refreshContent(),this._refreshTopRight()},destroy:function(){},_setOption:function(t,n){t==="content"&&(this.options.content=n,this._refreshContent()),t==="topright"&&(this.options.topright=n,this._refreshTopRight()),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_refreshContent:function(){this.options.content!==null&&this.options.content!==undefined&&(this.$content.children().remove(),e(this.options.content).appendTo(this.$content))},_refreshTopRight:function(){this.options.topright!==null&&this.options.topright!==undefined&&(this.$topright.children().remove(),e(this.options.topright).appendTo(this.$topright))}})})(jQuery)
;"use strict";(function(e,t,n){var r={options:{controller:null,actionMessage:null,title:null,maxTitleLength:100,image:null,content:null,topright:null,style:"section",noBorder:!1,navigation:null,fullWidth:!1},_create:function(){this._$header=n,this._$main=n,this._$title=n,this._$navigation=n,this._$nlActionMessage=e("<div></div>"),this.$content=n,this.$topright=n,this._style=null,NL.isNundef(this.options.content)&&(this.options.content=this.element.children().detach()),this._style=NL.isNundef(this.options.style)?"section":this.options.style,this._style!=="none"&&this._style!=="section"&&this._style!=="subsection"?this._style="section":this._style==="none"&&(this._style="section-base"),this._createMarkup(),this._updateClasses(),this._refreshContent(),this._refreshTopRight(),this._refreshPanel(),this._refreshNavigation(),this._refreshImage(),this._refreshTitle()},_createMarkup:function(){this.options.topright&&(this.$topright=e('<div class=""nlui-section-base-topright""></div>').appendTo(this.element)),this._$header=e('<div class="nlui-dashboardSection-header"></div>').appendTo(this.element),this._$main=e("<div></div>").appendTo(this.element),this.$content=e('<div class="nlui-section-base-contents"></div>').appendTo(this._$main),this.options.navigation&&this.options.navigation.length!==0&&(this._$navigation=e('<div class="nlui-dashboardSection-navigation"></div>').appendTo(this._$header));if(!NL.isNundef(this.options.title)||!NL.isNundef(this.options.image))this._$title=e('<div class="nlui-dashboardSection-title"></div>').appendTo(this._$header)},_updateClasses:function(){this.element.addClass("ui-widget nlui-section-base nlui-dashboardSection nlui-"+this._style),this.options.fullWidth&&this.element.addClass("nlui-dashboardSection-full-width"),this.options.type==="dashboard"&&this.element.addClass("nlui-dashboardSection-dashboard"),this.options.noBorder&&this._$main.addClass("nlui-dashboardSection-no-frame"),this.$content.addClass("nlui-"+this._style+"-contents")},_refreshContent:function(){NL.isNundef(this.options.content)||(this.$content.children().remove(),e(this.options.content).appendTo(this.$content))},_refreshTopRight:function(){NL.isNundef(this.options.topright)||(this.$topright.children().remove(),e(this.options.topright).appendTo(this.$topright))},destroy:function(){this.element.removeClass("nlui-dashboardSection ui-corner-all nlui-dashboardSection-full-width nlui-dashboardSection-dashboard"),this._$header.remove(),this._$main.remove()},panel:function(){return this._$nlActionMessage},header:function(){return this._$header},_setOption:function(n,r){n==="title"?(this.options.title=r,this._refreshTitle()):n==="image"?(this.options.image=r,this._refreshImage()):n==="actionMessage"?(this.options.actionMessage=r,this._refreshPanel()):n==="content"?(this.options.content=r,this._refreshContent()):n==="topright"&&(this.options.topright=r,this._refreshTopRight()),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_refreshTitle:function(){if(this.options.title!==null&&this.options.title!==n){var r=this._$title.find(".nlui-icon").detach();this._$title.children().remove();var i=0;this._$navigation!==n&&!NL.isNundef(this.options.navigation)&&(i=this._$navigation.outerWidth(!0)),this.options.image&&(i+=60);var s=e('<div class="nlui-section-base-header-title"></div>');this.options.title.length>this.options.maxTitleLength?(s.attr("title",this.options.title),s.text(NL.String.ellipsis(this.options.title,this.options.maxTitleLength)),s.nlTooltip()):s.text(this.options.title),this._$title.append(r).append(s).css("padding-right",i)}},_refreshImage:function(){if(this.options.image){var t=NL.View.genImage(this.options.image,null,!1,8).addClass("nlui-dashboardSection-title-image");this._$title.find(".nlui-icon").remove(),this._$title.prepend(t)}},_refreshNavigation:function(){function r(e){var t=e.name?e.name:e.view;i[t]={type:e.type||"navigation",name:e.name,blocks:e.blocks,view:e.view,xtkDelegated:e.xtkDelegated,label:e.label,icon:e.icon,help:e.help,mode:e.mode,checkSave:e.checkSave,checkSaveTargets:e.checkSaveTargets,confirmSave:e.confirmSave,confirmSaveTargets:e.confirmSaveTargets,onDisplay:e.onDisplay,onHide:e.onHide,params:e.params,badgerValue:e.badgerValue};var n;if(e.subViews&&e.subViews.length!==0){n={menuPosition:"rightIcon",name:e.name,config:{label:e.label,icon:e.icon},subViews:[]};for(var s=0;s<e.subViews.length;s++){var o=e.subViews[s],u=r(o);n.subViews.push(u)}}else n=t;return n}if(this._$navigation!==n&&!NL.isNundef(this.options.navigation)){this._$navigation.children().remove();var i={},s=[];if(this.options.navigation.viewConfigs!==n){NL.Utils.each(this.options.navigation.viewConfigs,function(e,t){NL.isEmpty(t.name)&&(t.name=e),r(t)});for(var o=0;o<this.options.navigation.views.length;o++){var u=this.options.navigation.views[o];s.push(u)}}else for(var o=0;o<this.options.navigation.views.length;o++){var u=this.options.navigation.views[o],a=r(u);s.push(a)}this._$navigationBar=e('<div class="nlui-dashboardNavigation-switcher"></div>').nlViewBar({controller:this.options.controller,viewConfigs:i,views:s,mode:"navMenu"}).appendTo(this._$navigation),this.options.navigation.currentView&&this._$navigationBar.nlViewBar("triggerView",this.options.navigation.currentView)}},_refreshPanel:function(){var n=NL.UI.Actions(this),r={displayIcon:"none"};this.options.actionMessage&&(this.options.actionMessage.viewBar?this.options.actionMessage.viewBar.controller=this.options.controller:this.options.actionMessage.cmdBar&&(this.options.actionMessage.cmdBar.controller=this.options.controller),this.options.actionMessage.cmdBar&&this.options.actionMessage.cmdBar.commandConfigs&&NL.Utils.each(this.options.actionMessage.cmdBar.commandConfigs,function(e,t){NL.isNundef(t.command)&&NL.isPlainObject(t.action)&&(t.command=function(){n[t.action.method](t.action.args)})}),this._$nlActionMessage=e("<div></div>").nlActionMessage(e.extend(!0,{},r,this.options.actionMessage)).prependTo(this._$main),this._$nlActionMessage.hide()),this.displayPanel()},activateMsgCommand:function(t){this.options.controller.setCommandAttribute(t,"disabled",!1),this.options.controller.refresh()},deactivateMsgCommand:function(t){this.options.controller.setCommandAttribute(t,"disabled",!0),this.options.controller.refresh()},displayMsgCommand:function(t){var n=this.options.controller,r=!!n.getCommandAttribute(t,"hidden");r&&(n.setCommandAttribute(t,"hidden",!1),n.refresh())},hideMsgCommand:function(t){var n=this.options.controller,r=!!n.getCommandAttribute(t,"hidden");r||(n.setCommandAttribute(t,"hidden",!0),n.refresh())},setBadgerCommand:function(t,n){var r=this.options.controller;r.setCommandAttribute(t,"badgerValue",n),r.refresh()},displayPanel:function(){this.options.actionMessage&&this.options.actionMessage.message&&this._$nlActionMessage.show()},hidePanel:function(){this._$nlActionMessage.hide()},getMessage:function(){return this._$nlActionMessage.nlActionMessage("option","message")},getTitle:function(){return this._$nlActionMessage.nlActionMessage("option","title")},changeMessage:function(t){if(t){this._$nlActionMessage.show();var n=this.options.actionMessage.message;t!==n&&(this.options.actionMessage.message=t,this._$nlActionMessage.nlActionMessage("option","message",t))}else this._$nlActionMessage.hide()},changeTitle:function(t){var n=this.options.actionMessage.title;t!==n&&(this.options.actionMessage.title=t,this._$nlActionMessage.nlActionMessage("option","title",t))},changeState:function(t){var n=this.options.actionMessage.state;t!==n&&(this.options.actionMessage.state=t,this._$nlActionMessage.nlActionMessage("option","state",t))},navigationBar:function(){return this._$navigationBar}};e.widget("NL.nlDashboardSection",r)})(jQuery,window)
;"use strict";(function(e,t,n,r){var i={options:{controller:null,onRefreshVisibility:r,viewConfigs:{},views:[],currentView:r,defaultView:r,rendering:"bar",mode:r,separators:r,rightSeparator:r,leftSeparator:r,maxButtons:null,overflowMode:r,overflowClass:r,overflowLeftIcon:r,overflowRightIcon:r,overflowLabel:r,minButtonWidth:r},_create:function(){var n,i,s;i=this,this._currentView=null,this._$buttonContainer=null,this._views=[],NL.Utils.each(this.options.viewConfigs,function(e,t){i.options.controller.registerView(e,t)});for(n=0;n<this.options.views.length;n++)this.addView(this.options.views[n],null,!0);return this.options.controller.registerViewObserver(this,this.options.onRefreshVisibility),this._$buttonContainer=e("<div></div>").appendTo(this.element).addClass("nlui-viewbar-nav"),this.options.rendering==="bar"&&this._$buttonContainer.nlButtonBar({mode:this.options.mode,separators:this.options.separators,rightSeparator:this.options.rightSeparator,leftSeparator:this.options.leftSeparator,maxButtons:this.options.maxButtons,overflowMode:this.options.overflowMode,overflowClass:this.options.overflowClass,overflowLeftIcon:this.options.overflowLeftIcon,overflowRightIcon:this.options.overflowRightIcon,overflowLabel:this.options.overflowLabel}),s=this.options.currentView,s===r&&(s=this.options.defaultView),s===r&&(s=this._views[0]),s!==null&&s!==r&&NL.isString(s)?(this._hideAllViews(),this._switchView(s)):this.refresh(),this.options.controller.observerReady(this),this},_extendConfiguration:function(n){var i,s,o,u,a;o=[];for(i=0;i<n.length;i++){s=n[i];if(NL.isString(s)){u=this.options.controller.getViewConfiguration(s);if(NL.View.isConsole()&&u.visibleInConsole===!1||!NL.View.isConsole()&&u.visibleInWeb===!1)continue;u.name=s,a=this._generateButtonConfig(u),o.push(a)}else if(s){u={},s.name&&(u=e.extend(u,this.options.controller.getViewConfiguration(s.name))),u=e.extend(u,s.config,{name:s.name,menuPosition:s.menuPosition});if(NL.View.isConsole()&&u.visibleInConsole===!1||!NL.View.isConsole()&&u.visibleInWeb===!1)continue;a=this._generateButtonConfig(u),s.subViews&&(a.subButtons=this._extendConfiguration(s.subViews),a.menuPosition=u.menuPosition,a.rightIcon===r&&(a.rightIcon="ui-icon-triangle-1-s")),o.push(a)}else o.push(null)}return o},_generateButtonConfig:function(t){var n,i,s;return n=this,i="",t.type==="navigation"&&(NL.isEmpty(t.url)?i=this._buildViewUrl(t.view,t.params):i=t.url),t.subViews||(s=function(e,r,i){n._triggerView(t.name,i)}),{icon:t.icon,rightIcon:t.rightIcon,label:t.label,mode:t.mode,flat:t.flat,help:t.help,isPushed:t.name===this._currentView,isLink:t.type==="navigation",href:i,xtkDelegated:t.xtkDelegated,newWindow:t.newWindow,badgerValue:t.badgerValue,minWidth:t.minWidth===r?this.options.minButtonWidth:t.minWidth,onClick:s}},_buildViewUrl:function(r,i){var s,o;s=i?e.param(i):"",NL.isEmpty(n.__securitytoken)||(s+=(NL.isEmpty(s)?"":"&")+"__securitytoken="+n.__securitytoken),o="/view/"+r,NL.isEmpty(s)||(o+="?"+s);if(!s||s.indexOf("__universe")===-1)NL.isEmpty(s)?o+="?":o+="&",o+="__universe="+NL.session.universe;return o},_triggerView:function(t,n){var i,s,o,u,a,f;i=this,s=this.options.controller.getViewConfiguration(t);if(this._currentView!==t||s.type==="navigation")o=function(){i._switchView(t),n()},NL.isString(this._currentView)?u=this.options.controller.getViewConfiguration(this._currentView):u={checkSave:!1,confirmSave:!1,checkSaveTargets:[],confirmSaveTargets:[]},a=u.checkSave,f=u.confirmSave,s.type==="navigation"&&a===r&&f===r&&(a=!0),a&&!NL.isNundef(u.checkSaveTargets)&&NL.Utils.indexOf(t,u.checkSaveTargets)===-1&&(a=!1),f&&!NL.isNundef(u.confirmSaveTargets)&&NL.Utils.indexOf(t,u.confirmSaveTargets)===-1&&(f=!1),f?this.options.controller.confirmSave2(function(e){e&&o.call()}):a?this.options.controller.checkSave2(function(e){e&&o.call()}):o.call();return this},_hideAllViews:function(){var t,n;for(t=0;t<this._views.length;t++)n=this._views[t],NL.isString(n)&&(n=this.options.controller.getViewConfiguration(n)),n&&(n.type==="block"?this._hideBlockView(n):n.type==="code"?this._hideCodeView(n):n.type==="embedded"&&this._hideEmbeddedView(n))},_switchView:function(t){var n,r;n=this.options.controller.getViewConfiguration(t);if(this._currentView!==t||n.type==="navigation")this._currentView!==null&&(r=this.options.controller.getViewConfiguration(this._currentView),r.type==="block"?this._hideBlockView(r):r.type==="code"?this._hideCodeView(r):r.type==="embedded"&&this._hideEmbeddedView(r),n.type==="navigation"&&!n.newWindow&&this._displayNavigationMessage()),this._currentView=t,n.type==="block"?this._showBlockView(n):n.type==="code"?this._showCodeView(n):n.type==="embedded"&&this._showEmbeddedView(n),this.refresh();return this},_showBlockView:function(n){var r,i;for(r=0;r<n.blocks.length;r++)i=e(n.blocks[r]),i.show();return n.onDisplay&&n.onDisplay(),this},_hideBlockView:function(n){var r,i;for(r=0;r<n.blocks.length;r++)i=e(n.blocks[r]),i.hide();return n.onHide&&n.onHide(),this},_showCodeView:function(t){return t.onDisplay&&t.onDisplay(),this},_hideCodeView:function(t){return t.onHide&&t.onHide(),this},_showEmbeddedView:function(t){return this},_hideEmbeddedView:function(t){return this},_displayNavigationMessage:function(){return e("<div></div>").nlNavigationBox(),this},_setLocalAttribute:function(t,n,i,s){var o,u;for(o=0;o<t.length;o++)u=t[o],u&&!NL.isString(u)&&(u.name===n&&u.config!==r&&u.config[i]!==r&&(u.config[i]=s),u.subViews&&this._setLocalAttribute(u.subViews,n,i,s));return this},refresh:function(){var t=this._extendConfiguration(this._views);return this.options.rendering==="bar"&&this._$buttonContainer.nlButtonBar("setButtons",t),this},addView:function(t,n,r){return this._views.push(t),n&&this.options.controller.registerView(t,n),r||this.refresh(),this},triggerView:function(n){var r,i,s;return i=this.options.controller.getViewConfiguration(n),s=function(){},r="",i.type==="navigation"&&(NL.isEmpty(i.url)?r=this._buildViewUrl(i.view,i.params):r=i.url,s=function(){t.location=r}),this._triggerView(n,s),this},getViewAttribute:function(t,n){return this.options.controller.getViewAttribute(t,n)},setViewAttribute:function(t,n,r,i){var s=this.options.controller.getViewAttribute(t,n);return s!==r&&(this.options.controller.setViewAttribute(t,n,r),this._setLocalAttribute(this._views,t,n,r),i||this.refresh()),this},destroy:function(){return this.options.controller.unregisterViewObserver(this),this._$buttonContainer.remove(),e.Widget.prototype.destroy.call(this),this}};e.widget("NL.nlViewBar",e.NL.nlWidget,i)})(jQuery,window,document)
;"use strict";(function(e,t,n){e.widget("NL.nlActionMessage",e.NL.nlWidget,{options:{title:n,message:n,state:"normal",displayIcon:"none",cmdBar:n,viewBar:n,closable:!1,keepClosed:!1,autoVanish:!1,autoVanishDelay:1500,destroyOnClose:!0},_classFromState:{normal:"nlui-action-message-normal",success:"nlui-action-message-success",info:"nlui-action-message-info",warning:"nlui-action-message-warning",error:"nlui-action-message-error"},_iconClassFromState:{normal:"ui-icon-mail-closed",success:"ui-icon-check",info:"ui-icon-info",warning:"ui-icon-alert",error:"ui-icon-circle-close"},_iconFlavorClassFromState:{normal:"",success:"nlui-icon-success",info:"nlui-icon-info",warning:"nlui-icon-warning",error:"nlui-icon-error"},_create:function(){this.options.message&&typeof this.options.message=="string"&&(this.options.message=[this.options.message]),this.element.addClass("nlui-action-message"),this._buildHTML(),this.options.autoVanish&&this._autoVanish(this.options.autoVanishDelay,this.options.destroyOnClose)},_buildHTML:function(){if(NL.session.confManager.get(this._getElementHash())==="hide")return;this.element.html(this._buildActionMessageContent(this.options))},_buildActionMessageContent:function(n){var r=e("<div>",{"class":"nlui-action-message-box"}),i=e("<div>",{"class":"nlui-action-message-content-row"}),s=e("<div>",{"class":"nlui-action-message-content-row"}),o=n.title?i:s;n.title&&i.append(this._buildTitle({title:n.title,displayIcon:n.displayIcon==="title",state:n.state})),n.message&&n.message.length&&s.append(this._buildMessage({message:n.message,displayIcon:n.displayIcon==="message",state:n.state})),n.cmdBar||n.viewBar?n.cmdBar&&n.cmdBar.commands&&n.cmdBar.commands.length>0?o.append(this._buildCmdBar(n.cmdBar)):n.viewBar&&n.viewBar.views&&n.viewBar.views.length>0&&o.append(this._buildViewBar(n.viewBar)):n.closable&&o.append(this._buildClose(n.state)),i.children().length&&r.append(i),s.children().length&&r.append(s);if(r.children().length)return e("<div>",{"class":this._getClass(this._classFromState,n.state)+" nlui-action-message-wrapper",html:r});return},_buildTitle:function(n){var r=e("<div>",{"class":"nlui-action-message-title nlui-action-message-content-cell"});return n.title&&(n.displayIcon&&r.append(this._buildIcon(n.state)),r.append(e("<span>",{text:n.title}))),r},_buildMessage:function(n){var r=e("<div>",{"class":"nlui-action-message-container nlui-action-message-content-cell"}),i=e("<div>");return n.message.length&&(n.displayIcon&&r.append(this._buildIcon(n.state)),NL.Utils.each(n.message,function(t,n){i.append(e("<div>",{"class":"nlui-action-message-text",text:n}))}),r.append(i.html())),r},_buildCmdBar:function(n){return this._$cmdBar?this._$cmdBar:(this._$cmdBar=e("<div>",{"class":"nlui-action-message-optional-container nlui-action-message-content-cell"}),this._$cmdBar.nlCmdBar(n),this._$cmdBar)},_buildViewBar:function(n){return this._$viewBar?this._$viewBar:(this._$viewBar=e("<div>",{"class":"nlui-action-message-optional-container nlui-action-message-content-cell"}),this._$viewBar.nlViewBar(n),this._$viewBar)},_buildIcon:function(n){var r=[this._getClass(this._iconClassFromState,n),this._getClass(this._iconFlavorClassFromState,n),"nlui-action-message-icon-container","nlui-icon"];return e("<span>",{"class":r.join(" ")})},_buildClose:function(n){var r=this,i=["nlui-icon","ui-icon-close","nlui-action-message-close","nlui-action-message-content-cell",this._getClass(this._iconFlavorClassFromState,n)],s=e("<div></div>",{"class":i.join(" ")});return s.click(function(){r.element.slideUp(function(){r.options.keepClosed&&NL.session.confManager.set(r._getElementHash(),"hide"),r.options.destroyOnClose&&r.destroy()})}),s},_autoVanish:function(t,n){var r=this;setTimeout(function(){r.element.slideUp(function(){n&&r.destroy()})},t)},_getClass:function(t,n){return t[n]?t[n]:t.normal},_getElementHash:function(){return["nlui-action-message",this.element.prop("nodeName"),this.element.attr("id"),this.element.attr("class"),this.element.prop("baseURI"),this.options.title,this.options.message].join()},_setOption:function(n,r){switch(n){case"cmdBar":case"viewBar":break;case"message":r&&typeof r=="string"?this.options.message=[r]:this.options.message=r,this._buildHTML();break;case"autoVanish":this.options.autoVanish=!!r,this.options.autoVanish&&this._autoVanish(this.options.autoVanishDelay,this.options.destroyOnClose);break;default:e.NL.nlWidget.prototype._setOption.apply(this,arguments),this._buildHTML()}},destroy:function(){this.element.removeClass("nlui-action-message"),this.element.empty(),e.Widget.prototype.destroy.call(this)},vanish:function(){this._autoVanish(this.options.autoVanishDelay,this.options.destroyOnClose)},show:function(){this.element.show()}})})(jQuery,window)
;"use strict";(function(e,t,n){var r={options:{controller:null,logo:"nlui-img-logo-small",homeView:"home",homeURL:null,operatorLink:{},disconnectLink:{},menuEntries:[],isInConsole:!1},_$topLine:null,_$bottomLine:null,_$logo:null,_create:function(){var t={view:"operator",params:{id:this.options.operator.id},label:xtk_core.welcome_S(this.options.operator.login),title:this.options.operator.CS,ellipsis:60,enableInWeb:this.options.operator.id!==0,enableInConsole:this.options.operator.id!==0},r={view:this.options.homeView,params:{disconnect:!0},label:xtk_core.disconnect(),icon:null};this.element.addClass("nlui-dashboardNavigation-header"),this._$topLine=e("<div></div>").addClass("nlui-dashboardNavigation-top"),this._$logo=e("<div></div>").addClass("nlui-dashboardNavigation-logo").nlLinkView({icon:this.options.logo,view:this.options.homeView,url:this.options.homeURL,params:{__universe:"home"}}),this.options.operatorLink=e.extend(!0,t,this.options.operatorLink),this.options.disconnectLink=e.extend(!0,r,this.options.disconnectLink);var i=e("<div></div>").addClass("nlui-dashboardNavigation-header-login"),s=e("<div></div>").addClass("nlui-dashboardNavigation-header-operator-link").nlLinkView(this.options.operatorLink),o=e("<div></div>").addClass("nlui-dashboardNavigation-header-disconnect-link").nlLinkView(this.options.disconnectLink),u=e("<div>|</div>").addClass("nlui-dashboardNavigation-header-separator");i.append(s),NL.XTK.parseBoolean(this.options.isInConsole)||i.append(u).append(o),this._$topLine.append(this._$logo).append(i),this._$bottomLine=e("<div></div>").addClass("nlui-dashboardNavigation-bottom");var a={style:"mainmenu",commands:this.options.menuEntries},f={},l=[];for(var c=0;c<this.options.menuEntries.length;c++){var h=this.options.menuEntries[c],p=h.universe||h.view||"view_"+c;f[p]={type:"navigation",label:h.label,view:h.view,url:h.url,icon:h.icon,params:NL.Utils.extend(h.params,{__universe:h.universe})};var d=NL.session.confManager.get(p+"#lastView"),v=NL.isEmpty(d)?n:d.view;v&&h.view!=="home"&&(f[p].view=v),l.push(p)}var m=e("<div></div>").addClass("nlui-dashboardNavigation-menu").nlViewBar({controller:this.options.controller,viewConfigs:f,views:l,mode:"mainMenu",currentView:NL.session.universe});this._$bottomLine.append(m),this.element.append(this._$topLine).append(this._$bottomLine)},_setOption:function(e,t){},destroy:function(){this.element.removeClass("nlui-dashboardNavigation-header"),this._$topLine.remove(),this._$bottomLine.remove()}};e.widget("NL.nlDashboardHeader",e.NL.nlWidget,r)})(jQuery,window)
;"use strict";(function(e,t,n){var r={options:{content:null,overflowContent:null,cssClass:"",name:"",title:"",otherLink:{label:xtk_core.dashboardBlock_labelSeeAll(),title:xtk_core.dashboardBlock_labelSeeAllTooltip()}},_$header:null,_$content:null,_$otherLink:null,_$footer:null,_$overflowPanel:null,_overflowHidden:!0,_create:function(){this.options.popableManager.addPopable(this);if(this.options.content){this.element.addClass("nlui-dashboardNavigation-block").addClass(this.options.cssClass),NL.isEmpty(this.options.name)||this.element.addClass("nlui-"+this.options.name+"-block"),this._$header=e("<div></div>").addClass("nlui-dashboardNavigation-block-header").appendTo(this.element),this._$content=e("<div></div>").addClass("nlui-dashboardNavigation-block-content").appendTo(this.element),this._$footer=e("<div></div>").addClass("nlui-dashboardNavigation-block-footer").appendTo(this.element),this._$otherLink=e("<div></div>").addClass("nlui-dashboardNavigation-block-other").appendTo(this._$footer),NL.isEmpty(this.options.title)||(this._$title=e("<div></div>").addClass("nlui-dashboardNavigation-block-title").append(this.options.title).appendTo(this._$header)),this._$content.append(this.options.content);if(this.options.overflowContent){var t=e("<a href='#'></a>").text(xtk_core.dashboardBlock_labelOtherChoice()).addClass("nlui-dashboardNavigation-block-other-panel").appendTo(this._$otherLink);this._$overflowPanel=this._createOverflowPanel();var n=this._$overflowPanel.find(".nlui-dashboardNavigation-block-overflow-panel-content");n.append(this.options.overflowContent);var r=this;t.click(function(t){r._overflowHidden=!r._overflowHidden;var i=e(".nlui-dashboardNavigation-block").not(r.element);e.each(i,function(t,n){e(n).nlDashboardNavigationBlock("hideOverflowPanel")}),n.hide(),r._$overflowPanel.animate({width:"toggle"},"fast",function(){r.element.data("overflowContent")||(r.element.data("overflowContent",r.options.overflowContent),NL.Widgets.callWidgetMethod(r.element.data("overflowContent"),"refresh")),r._overflowHidden||n.show(0,function(){NL.Widgets.LayoutManager.rebuildLayout(r.element.data("overflowContent")),NL.Widgets.callWidgetMethod(r.element.data("overflowContent"),"setFocus")})}),r._$overflowPanel.position({my:"left top",at:"right top",of:e(t.target).closest(".nlui-dashboardNavigation-block"),collision:"fit"}),r.preventDefault(t)})}else(!NL.isEmpty(this.options.otherLink.view)||!NL.isEmpty(this.options.otherLink.url))&&this._$otherLink.nlLinkView(this.options.otherLink)}},isOwnerOf:function(t,n){var r=this;return NL.DOMUtils.isDescendantOf(t,e(r.element).add(r._$overflowPanel))||NL.DOMUtils.eventPositionIsInside(n,e(r.element).add(r._$overflowPanel))},collapse:function(){this.hideOverflowPanel()},_setOption:function(e,t){},destroy:function(){this.options.popableManager.removePopable(this),this.element.removeClass("nlui-dashboardNavigation-block"),this.element.removeClass(this.options.cssClass),NL.isEmpty(this.options.name)||this.element.removeClass("nlui-"+this.options.name+"-block"),this._$header.remove(),this._$content.remove(),this._$footer.remove(),e.Widget.prototype.destroy.call(this)},hideOverflowPanel:function(){this._overflowHidden=!0,this._$overflowPanel&&(this._$overflowPanel.find(".nlui-dashboardNavigation-block-overflow-panel-content").hide(),this._$overflowPanel.animate({width:"hide"},"fast"))},_createOverflowPanel:function(){var t=this,n=e("<div></div>").addClass("nlui-dashboardNavigation-block-overflow-panel ui-corner-tr ui-corner-br").hide().appendTo("body"),r=e("<div></div>").addClass("nlui-dashboardNavigation-block-overflow-panel-header").appendTo(n),i=e("<div></div>").addClass("nlui-dashboardNavigation-block-overflow-panel-content").appendTo(n),s=e("<div></div>").addClass("nlui-dashboardNavigation-block-overflow-panel-back").append(e('<a href="#"></a>').append(NL.View.genImage("ui-icon-closethick"))).appendTo(r).click(function(e){t.hideOverflowPanel(),t.preventDefault(e)});return n}};e.widget("NL.nlDashboardNavigationBlock",e.NL.nlWidget,r)})(jQuery,window)
;"use strict";(function(e){var t={button:{classes:"nlui-KPI-style-button",isButton:!0},ribbon:{classes:"nlui-KPI-style-ribbon",isButton:!1}};e.widget("NL.nlKPI",e.NL.nlWidget,{options:{title:undefined,primary:undefined,secondary:undefined,icon:undefined,iconClasses:undefined,mode:"default",style:"button",size:"large",disabled:!1,onRefresh:undefined},_$container:undefined,_$button:undefined,_$wrapper:undefined,_$title:undefined,_$primary:undefined,_$secondary:undefined,_$icon:undefined,_spinning:!1,_create:function(){var t=this;this.element.addClass("nlui-KPI"),this._$container=e('<div class="nlui-KPI-container"></div>'),this._$button=e('<div class="nlui-KPI-button"></div>').appendTo(this._$container),this._$wrapper=e('<div class="nlui-KPI-wrapper"></div>').appendTo(this._$button),this._$title=e('<span class="nlui-KPI-title"></span>').appendTo(this._$wrapper);var n=e('<span class="nlui-KPI-primary-container"/>').appendTo(this._$wrapper);this._$primary=e('<span class="nlui-KPI-primary"></span>').appendTo(n),this._$icon=e('<div class="nlui-KPI-icon"></div>').appendTo(n),this._$secondary=e('<span class="nlui-KPI-secondary"></span>').appendTo(this._$wrapper),this._$container.appendTo(this.element),(this.options.width!==undefined||this.options.height!==undefined)&&NL.assert(!1,"Using KPI widget with width / height parameters is deprecated"),this.options.onRefresh&&(this._$container.on("click",function(){t._onRefresh()}),this._$container.hover(function(){if(t.options.disabled||t._spinning)return;t._$container.addClass("nlui-state-hover")},function(){if(t.options.disabled||t._spinning)return;t._$container.removeClass("nlui-state-hover")})),this._refresh()},_setOption:function(t,n){switch(t){case"title":this._refreshTitleText(n);break;case"primary":this._refreshPrimaryText(n);break;case"secondary":this._refreshSecondaryText(n);break;case"mode":this._refreshMode(n,this.options.style);break;case"style":this._refreshMode(this.options.mode,n);break;case"disabled":this._refreshDisabled(n);break;case"size":this._refreshSize(n);break;case"icon":this._refreshIcon(n);break;case"onRefresh":throw"Option nlKPI.onRefresh cannot be changed.";default:e.NL.nlWidget.prototype._setOption.apply(this,arguments)}},_refreshTitleText:function(e){NL.isEmpty(e)&&(e=""),this.options.title=e,this._$title.text(e)},_refreshPrimaryText:function(e){NL.isEmpty(e)&&(e=""),this.options.primary=e,this._$primary.text(e)},_refreshSecondaryText:function(e){NL.isEmpty(e)&&(e=""),this.options.secondary=e,this._$secondary.text(e)},_refreshIcon:function(e){NL.isEmpty(e)&&(e=""),this.options.icon=e,this._$icon.children().remove();if(e!==""){var t=NL.View.genImage(e,20).appendTo(this._$icon),n=this.options.iconClasses;NL.isEmpty(n)&&(this.options.style==="button"?this.options.mode!=="default"&&(n="nlui-icon-inverse"):this.options.style==="ribbon"&&this.options.mode!=="default"&&(n="nlui-icon-"+this.options.mode)),NL.isEmpty(n)||t.addClass(n)}this._$icon.toggle(e!=="")},_refreshSize:function(e){NL.assert(e==="medium"||e==="large","Invalid size for KPI: "+e),this.options.size=e;var t=e==="medium";this._$container.toggleClass("nlui-KPI-condensed",t)},_refreshDisabled:function(e){this.options.disabled=e,this._$container.toggleClass("ui-state-disabled nlui-state-disabled",e||this._spinning)},_refreshMode:function(n,r){NL.assert(n==="default"||n==="primary"||n==="success"||n==="warning"||n==="error","Invalid mode for KPI: "+n),NL.assert(r==="button"||r==="ribbon","Invalid style for KPI: "+r);var i=this;NL.isEmpty(n)&&(n="default"),NL.isEmpty(r)&&(r="default"),i.options.mode=n,i.options.style=r,i._$container.removeClass("nlui-button-primary nlui-button-success nlui-button-error"),i._$container.addClass("nlui-button-"+n),i._$container.removeClass("nlui-KPI-style-button"),e.each(t,function(e,t){i._$container.removeClass(t.classes)});var s=t[r],o=s.isButton;i._$container.addClass(s.classes),i._$container.toggleClass("nlui-button nlui-button-gradient",o),i._$button.toggleClass("nlui-button-wrapper",o),i._$primary.toggleClass("nlui-button-text",o),i._$secondary.toggleClass("nlui-button-text",o);var u=i.options.onRefresh!==undefined;return i._$container.toggleClass("nlui-KPI-refreshable",u),i._$container.toggleClass("nlui-button-gradient",u&&o),this._refreshIcon(this.options.icon),i},_refresh:function(){this._refreshTitleText(this.options.title),this._refreshPrimaryText(this.options.primary),this._refreshSecondaryText(this.options.secondary),this._refreshMode(this.options.mode,this.options.style),this._refreshDisabled(this.options.disabled),this._refreshSize(this.options.size)},destroy:function(){this.element.removeClass("nlui-KPI"),this.element.children().remove()},_onRefresh:function(){var t=this;if(!t.options.onRefresh||t._spinning)return;t._spinning=!0;var n=new Spinner({radius:4,length:6,width:3});n.spin(t._$container.get(0)),t._$wrapper.hide(),t._refreshDisabled(),t.options.onRefresh.call(t,function(r){try{e.extend(t.options,r),t._refresh()}finally{t._spinning=!1,t._refreshDisabled(),e(n.el).remove(),t._$wrapper.show(),delete n.el}})}}),e.widget("NL.nlKPIBar",e.NL.nlWidget,{options:{size:"large",disabled:!1,style:"ribbon",KPIs:[]},_$kpis:undefined,_create:function(){var t=this;t._$kpis=[];var n=this.element;n.addClass("nlui-KPIBar");var r=t.options.KPIs.length;for(var i=0;i<r;i++){var s=e.extend({},t.options,t.options.KPIs[i]),o=e("<div/>").nlKPI(s).appendTo(n);t._$kpis.push(o),i<r-1&&e('<div class="nlui-KPI-separator"></div>').appendTo(n)}this._refresh()},destroy:function(){this.element.removeClass("nlui-KPIBar"),e.each(this._$kpis,function(e,t){t.nlKPI("destroy")}),this.element.children().remove()},_setOption:function(t,n){t==="disabled"?this._refreshDisabled(n):t==="size"?this._refreshSize(n):t==="style"&&this._refreshStyle(n),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_refreshSize:function(t){var n=this;n.options.size=t;var r=t==="medium";this.element.toggleClass("nlui-KPI-condensed",r),e.each(n._$kpis,function(e,n){n.nlKPI("option","size",t)})},_refreshStyle:function(n){var r=this;r.options.style=n,e.each(t,function(e,t){r.element.removeClass(t.classes)}),this.element.addClass(t[n].classes),e.each(r._$kpis,function(e,t){t.nlKPI("option","style",n)})},_refreshDisabled:function(t){var n=this;n.options.disabled=t,e.each(n._$kpis,function(e,n){n.nlKPI("option","disabled",t)})},_refresh:function(){this._refreshStyle(this.options.style),this._refreshDisabled(this.options.disabled),this._refreshSize(this.options.size)}})})(jQuery)
;"use strict";(function(e,t,n){var r={field:{list:{title:xtk_core.linkEdit_titleField(),source:new NL.DataSource.SchemaWalker({customFilters:[function(e){return!e.isLink}]}),keyAttributes:"nodePath"},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.formDataBinder_noMapping()}},subscription:{list:{title:xtk_core.linkEdit_titleSubscription(),source:new NL.DataSource.QueryDef({schema:"nms:service",select:{node:[{expr:"@name"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@name"]},where:{condition:[{expr:"@name != ''"},{expr:"[folder/@fullName] LIKE '$2%'",enabledIf:"'$2'!=''"}]}}),itemRenderer:function(e,t){return e.label},keyAttributes:"name",pagination:{perPage:50},navigator:{source:new NL.DataSource.Folder({filter:"@model = 'nmsSetOfServices'",enable:function(){return e(this).attr("model")==="nmsSetOfServices"},hasWriteAccess:!0}),rootLabel:xtk_core.folderSelectorLabel()}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.formDataBinder_noSubscription()}},webApp:{list:{title:xtk_core.linkEdit_titleWebApp(),source:new NL.DataSource.QueryDef({schema:"nms:webApp",select:{node:[{expr:"@internalName"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@internalName"]},where:{condition:[{expr:"@internalName != ''"},{expr:"@isModel = 0 and @nature NOT IN ('overview','technical')"}]}}),itemRenderer:function(t,n){return e("<div></div>").append(NL.View.genImage("/nms/img/webApp.png")).append(t.label)},keyAttributes:"internalName",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},webAppTemplate:{list:{title:xtk_core.linkEdit_titleWebApp(),source:new NL.DataSource.QueryDef({schema:"nms:webApp",select:{node:[{expr:"@internalName"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@internalName"]},where:{condition:[{expr:"@internalName != ''"},{expr:"@isModel = 1"}]}}),itemRenderer:function(e,t){return e.label},keyAttributes:"internalName",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},pUrl:{list:{title:xtk_core.linkEdit_titlePUrl(),source:new NL.DataSource.QueryDef({schema:"nms:purl",select:{node:[{expr:"@name"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@name"]},where:{condition:[{expr:"@name != ''"},{expr:"@isModel = 0"}]}}),itemRenderer:function(e,t){return e.label},keyAttributes:"name",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},pUrlTemplate:{list:{title:xtk_core.linkEdit_titlePUrl(),source:new NL.DataSource.QueryDef({schema:"nms:purl",select:{node:[{expr:"@name"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@name"]},where:{condition:[{expr:"@name != ''"},{expr:"@isModel = 1"}]}}),itemRenderer:function(e,t){return e.label},keyAttributes:"name",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},validPUrl:{list:{title:xtk_core.linkEdit_titlePUrl(),source:new NL.DataSource.QueryDef({schema:"nms:purl",select:{node:[{expr:"@name"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@name"]},where:{condition:[{expr:"@name != ''"},{expr:"[webApp/@startDate] = '' OR [webApp/@startDate] <= $pUrlStartDate",enabledIf:"'$pUrlStartDate' != '' AND '$pUrlStartDate' != '##'"},{expr:"[webApp/@endDate] = '' OR [webApp/@endDate] >= $pUrlEndDate",enabledIf:"'$pUrlEndDate' != '' AND '$pUrlEndDate' != '##'"},{expr:"@isModel = 0"},{expr:"[webApp/@appState] = 10"}]}}),itemRenderer:function(e,t){return e.label},keyAttributes:"name",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},facebookApp:{list:{title:xtk_core.linkEdit_titleSocialApp(),source:new NL.DataSource.QueryDef({schema:"nms:extAccount",select:{node:[{expr:"@name"},{expr:"[.]",alias:"@label"}]},search:{attributes:["@label","@name"]},where:{condition:[{expr:"@name != ''"},{expr:"@type = 9"}]}}),itemRenderer:function(t,n){return e("<div></div>").append(NL.View.genImage("/nms/img/facebook.png")).append(t.label)},keyAttributes:"name",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},includeView:{list:{title:xtk_core.linkEdit_titleIncludeView(),source:new NL.DataSource.QueryDef({schema:"nms:includeView",select:{node:[{expr:"@id"},{expr:"@name"},{expr:"@label"}]},where:{condition:[{expr:"@type = 0"}]},search:{attributes:["@label","@name"]}}),itemRenderer:function(e,t){return e.label+" ("+e.name+")"},keyAttributes:"name",pagination:{perPage:50}},labelBuilder:function(e){return e.label},noLinkRenderer:function(){return xtk_core.linkEdit_noData()}}};e.widget("NL.nlLinkEdit",e.NL.nlWidget,{options:{preset:null,enabled:!0,zoomIcon:"nlui-icon ui-icon-pencil",onSelection:function(e,t){return!0},dialogWidth:600,dialogHeight:500,dialogTitle:xtk_core.list_selectItem(),type:"link",emptiable:!0},defaultPresetOptions:{list:{source:null,itemRenderer:function(e,t){return e.label}},labelBuilder:function(e){return e.cs||e.label},noLinkRenderer:function(){return xtk_core.linkEdit_NoSelection()}},_selection:null,_create:function(){this._overridePressets(),this._createHtmlMarkup(),NL.isNundef(this.options.list.selection)?this._onSelection(null):this._onSelection(this.options.list.selection)},_createHtmlMarkup:function(){var n=this;this._$inputContainer=e("<div></div>").addClass("nlui-linkedit-input-container"),this._$link=e('<input type="text" readonly="readonly"/>').addClass("nlui-linkedit-link").appendTo(this._$inputContainer).toggle(this.options.enabled).on("focus",function(){n.element.addClass("ui-state-focus")}).on("blur",function(){n.element.removeClass("ui-state-focus")}),this._$label=e('<label class="nlui-linkedit-link"></label>').appendTo(this._$inputContainer).toggle(!this.options.enabled),this._$deleteButtonContainer=e("<div></div>").addClass("nlui-linkedit-inner-button"),this._$deleteButton=e("<div></div>").addClass("ui-icon nlui-icon ui-icon-circle-close nlui-linkedit-button-delete").click(function(){n._clear()}).appendTo(this._$deleteButtonContainer),this._$zoomButtonContainer=e("<div></div>").nlButton({icon:this.options.zoomIcon,onClick:function(){n.open()}}).addClass("nlui-linkedit-button"),this.element.addClass("ui-widget nlui-linkedit").append(this._$zoomButtonContainer).append(this._$deleteButtonContainer).append(this._$inputContainer)},_overridePressets:function(){var n=this;this.options.preset?(this.options.list&&(this.options.list=e.extend({},this.defaultPresetOptions.list,r[this.options.preset].list,this.options.list)),this.options=e.extend({},this.defaultPresetOptions,r[this.options.preset],this.options)):(this.options.list&&(this.options.list=e.extend({},this.defaultPresetOptions.list,this.options.list)),this.options=e.extend({},this.defaultPresetOptions,this.options))},_initListInDialog:function(){var t=this,n;NL.isNundef(this.options.list.dialogWidth)||(this.options.dialogWidth=this.options.list.dialogWidth),NL.isNundef(this.options.list.dialogHeight)||(this.options.dialogHeight=this.options.list.dialogHeight),this.options.list.selectionMode="mono",this.options.list.onValidation=function(e,n){return t.onListValidation(e,n)},this.options.list.autoLoad=!0,this.options.list.fitToParentHeight=!0,n={dialogOptions:{autoOpen:!1,title:this.options.dialogTitle,modal:!0,width:this.options.dialogWidth,height:this.options.dialogHeight},listOptions:this.options.list},this.options.type==="link"?n.typeList="list":n.typeList="treeList",this._$listInDialog=this.element.nlListInDialog(n)},_onSelection:function(t,r){this._selection=t,r!==n&&t!==null&&t.data("linkedit_label",this.options.labelBuilder(r)),this._updateVisualState()},_updateVisualState:function(){var e=this.options.enabled,t=this._selection;this._$link.toggle(e),this._$label.toggle(!e),e?this._$zoomButtonContainer.nlButton("option","disabled",!1):this._$zoomButtonContainer.nlButton("option","disabled",!0),this._$deleteButtonContainer.toggleClass("nlui-linkedit-button-disabled",!e),this._$zoomButtonContainer.toggleClass("nlui-linkedit-button-disabled",!e),this.element.toggleClass("nlui-linkedit-disabled",!e),t?(this._$label.removeClass("nlui-linkedit-no-selection"),this._$link.removeClass("nlui-linkedit-no-selection"),this.options.type==="path"&&this.options.list.source instanceof NL.DataSource.SchemaWalker?(this._$label.text(t.data("linkedit_label")+" ("+t.key().attr("nodePath").slice(1)+")"),this._$link.val(t.data("linkedit_label")+" ("+t.key().attr("nodePath").slice(1)+")")):(this._$label.text(t.data("linkedit_label")),this._$link.val(t.data("linkedit_label")))):(this._$label.addClass("nlui-linkedit-no-selection"),this._$link.addClass("nlui-linkedit-no-selection"),this._$link.val(this.options.noLinkRenderer()),this._$label.text(this.options.noLinkRenderer())),t!==null&&e&&this.options.emptiable?this._$deleteButton.show():this._$deleteButton.hide()},selection:function(t){if(t===n)return this._selection;var r,i;this.options.list.selection=t,this._$listInDialog!==n&&(r=this._$listInDialog.nlListInDialog("getList"),this._$listInDialog.nlListInDialog("selection",t),NL.isNundef(r)||(i=NL.Widgets.callWidgetMethod(r,"getSelectedItem"))),this._onSelection(t,i)},open:function(){if(!this.options.enabled)return;this._$listInDialog===n&&this._initListInDialog(),this._$listInDialog.nlListInDialog("openDialog")},_clear:function(){if(!this.options.enabled)return;this.selection(null),this.options.onSelection(null,null)},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments),t==="enabled"&&this._updateVisualState()},onListValidation:function(t,n){return t!==null&&t.data("linkedit_label",this.options.labelBuilder(n)),this._onSelection(t,n),this._updateVisualState(),this.options.onSelection(t,n)||!1}})})(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlListInDialog",e.NL.nlWidget,{options:{typeList:"list",onDialogOpen:function(e){},onDialogClose:function(e){},dialogOptions:{autoOpen:!0,modal:!0,width:600,height:500,title:""},listOptions:{fitToParentHeight:!0},withoutButton:!1},_create:function(){this.okButtonId="listInDialogOkButton_"+NL.Utils.sequence().nextVal(),this.cancelButtonId="listInDialogCancelButton_"+NL.Utils.sequence().nextVal(),this.$okButton=null,this.$cancelButton=null,this.$dialog=null,this.$list=null,this._validateSelection=this.options.listOptions.selection,this._createDialog(),this.options.dialogOptions.autoOpen&&this._initList()},_createDialog:function(){var n=this,r,i;r=NL.Utils.extend({},this.options.dialogOptions),r.title===""&&this.options.listOptions.title!==""&&(r.title=this.options.listOptions.title),this.options.withoutButton===!1&&(this.options.listOptions.selectionMode==="mono"?(i=!0,r.buttons=[{text:xtk_core.dialog_ok(),id:this.okButtonId},{text:xtk_core.dialog_cancel(),id:this.cancelButtonId,cancels:!0}]):r.buttons=[{text:xtk_core.dialog_close(),cancels:!0}]),r.open=function(){n.options.onDialogOpen(this),n.$list!==null&&(NL.Widgets.callWidgetMethod(n.$list,"rebuildLayout"),NL.Widgets.callWidgetMethod(n.$list,"focusSearchInput"),NL.isNundef(n.options.listOptions.selection)||n.$okButton.nlButton("option","disabled",!1))},r.close=function(){n._resetToValidateSelection(),n.options.onDialogClose(this)},this.$dialog=e("<div></div>").nlDialog(r),i===!0&&this._bindValidationCallback()},_bindValidationCallback:function(){var t=this;this.$okButton=this.$dialog.nlDialog("getButton",this.okButtonId),this.$cancelButton=this.$dialog.nlDialog("getButton",this.cancelButtonId),NL.isNundef(this.options.listOptions.selection)&&this.$okButton.nlButton("option","disabled",!0),this.$okButton.nlButton("option","onClick",function(e,n,r){var i,s,o;i=t.$dialog.nlDialog("getBody"),NL.isNundef(t.options.listOptions.onValidation)||(s=NL.Widgets.callWidgetMethod(i,"selection"),o=NL.Widgets.callWidgetMethod(i,"getSelectedItem"),t._validateSelection=s,t.options.listOptions.onValidation(s,o)),t.$dialog.nlDialog("close")}),this.$cancelButton.nlButton("option","onClick",function(e,n,r){t.$dialog.nlDialog("close")})},_initList:function(){var t=this,n=NL.Utils.extend({},this.options.listOptions);this.$list===null&&(n.dialog=!1,n.onValidation=function(n,r){NL.isNundef(t.options.listOptions.onValidation)||t.options.listOptions.onValidation(n,r),t._validateSelection=n,t.$dialog.nlDialog("close")},n.onSelection=function(n,r){t.$okButton!==null&&(NL.isNundef(n)?t.$okButton.nlButton("option","disabled",!0):t.$okButton.nlButton("option","disabled",!1)),NL.isNundef(t.options.listOptions.onSelection)||t.options.listOptions.onSelection(n,r)},this.$list=this.$dialog.nlDialog("getBody"),this.options.typeList==="treeList"?this.$list=this.$list.nlTreeList(n):this.$list=this.$list.nlList(n)),NL.Widgets.callWidgetMethod(this.$list,"focusSearchInput"),NL.Widgets.callWidgetMethod(this.$list,"rebuildLayout")},_resetToValidateSelection:function(){NL.Widgets.callWidgetMethod(this.$list,"selection",[this._validateSelection])},selection:function(t){if(this.$list!==null)return NL.Widgets.callWidgetMethod(this.$list,"selection",[t]);this.options.listOptions.selection=t,this._validateSelection=t},openDialog:function(){this.$dialog.nlDialog("open"),this._initList(),NL.Widgets.callWidgetMethod(this.$list,"rebuildLayout")},getList:function(){return this.$list}})})(jQuery)
;(function(e,t,n){"use strict";function r(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d;if(t instanceof NL.DataSource.SchemaWalker){o=[],u=[],f=[],s=[],r!==null&&!NL.isNundef(n)&&(d=n._getCurrentCollectionItemByItemReference(r));for(i=0;i<e.length;i++)l=NL.Utils.extend(!0,{},e[i]),d!==undefined&&(l.nodePath=d.source.nodePath+l.nodePath),l.type===""?(l.type="struct",l.children={data:l.children},u.push(l)):l.type==="link"?(l.children=l.target,l.target=null,l.unbound?f.push(l):s.push(l)):o.push(l);a=o.concat(u,s,f)}else if(t instanceof NL.DataSource.Folder){a=[],r!==null&&!NL.isNundef(n)&&(d=n._getCurrentCollectionItemByItemReference(r));for(i=0;i<e.length;i++)l=NL.Utils.extend(!0,{},e[i]),h={name:l.id,id:l.id,nodePath:"/"+l.id,fullLabel:l.fullName.substring(0,l.fullName.lastIndexOf("/")),label:l.label,disabled:l.disabled,img:l.icon},d!==undefined&&(h.nodePath=d.source.nodePath+"/"+l.id),l.leaf===!1&&(h.children={folder:l.id}),a.push(h)}else a=NL.Utils.extend(!0,[],e);return a}function i(e,t){function c(e,t){var n,r,i=!1;for(n in e.filters)e.filters.hasOwnProperty(n)&&(r=e.filters[n].filter,r.value!==""&&t.name.toLowerCase().indexOf(r.value.toLowerCase())===-1&&t.label.toLowerCase().indexOf(r.value.toLowerCase())===-1&&(i=!0));return i}function h(e,t){var n,r,i,s,o,u;r=!1,s=!0,u=NL.Utils.extend(!0,{},t),o=[];for(n=0;n<t.children.length;n++)i=t.children[n],r=c(e,i.source),r===!0&&!NL.isNundef(i.children)&&NL.isArray(i.children)&&i.children.length>0&&(a=h(e,i),u.children[n]=a.element,r=r&&a.filter),r||o.push(u.children[n]),s=s&&r;return u.children=o,{filter:s,element:u}}var n,r,i,s,o,u,a,f,l;i=[];for(n=0;n<e.length;n++)f=e[n],l=NL.Utils.extend({},f),o=!1,o=c(t,f.source),o===!0&&!NL.isNundef(f.children)&&NL.isArray(f.children)&&f.children.length>0&&(a=h(t,f),l=a.element,o=o&&a.filter),!o&&l&&i.push(l);return t.pagination?(s=(t.pagination.page-1)*t.pagination.perPage,u=i.length,i=i.slice(s,s+t.pagination.perPage),{data:i,records:u}):{data:i}}e.widget("NL.nlTreeList",e.NL.nlList,{options:{mode:"default",subElementClosedClass:"",subElementOpenedClass:"",toggleEffect:"blind",expandAll:!1,hideExpandIcon:!1,displaySchemaAdvancedFields:!1,displayAdvancedFieldsTogglePlugin:!0,displaySchemaRootNode:!0,schemaWalkerTypeFilter:{unbound:!1,calculated:!1}},_create:function(){var n,i,s,o;this._waitingTreeSelection=[],NL.isNundef(this.options.selection)||(i=this.options.selection.key().attr("nodePath"),NL.isNundef(i)||(i=i.slice(1),this._waitingTreeSelection=i.split("/"),this.options.selection=undefined)),this.options=NL.Utils.extend(e.NL.nlList.options,this.options),this.options.pagination=null,this.options.keyAttributes!==null&&(NL.isArray(this.options.keyAttributes)?this.options.keyAttributes.push("nodePath"):this.options.keyAttributes=[this.options.keyAttributes,"nodePath"]),e.NL.nlList.prototype._create.apply(this,arguments),this._itemExpandState={},this._oldItemExpandState={},this._currentSearchItems=[],this._needToScrollAt=undefined,this._openIconClass="nlui-tree-list-open-icon",this._closeIconClass="nlui-tree-list-close-icon";switch(this.options.mode){case"default":this.options.subElementClosedClass===""&&(this.options.subElementClosedClass="nlui-icon-tree-list-more-arrow"),this.options.subElementOpenedClass===""&&(this.options.subElementOpenedClass="nlui-icon-tree-list-less-arrow");break;case"tree":this.options.subElementClosedClass===""&&(this.options.subElementClosedClass="nlui-icon-plus"),this.options.subElementOpenedClass===""&&(this.options.subElementOpenedClass="nlui-icon-minus")}this.controller.dataSource.formatDataOnSuccess=function(e){return r(e,this,null,null)},this._isSchemaWalkerSource=this.controller.dataSource instanceof NL.DataSource.SchemaWalker,this._isFolderSource=this.controller.dataSource instanceof NL.DataSource.Folder,n=this;if(this._isSchemaWalkerSource||this._isFolderSource)NL.isNundef(this._$searchPlugin)||(this._$searchPlugin.run=function(){n.filterData()}),NL.isNundef(this._$refreshPlugin)||(this._$refreshPlugin.run=function(){n.filterData()});this._isSchemaWalkerSource&&(s=new NL.Collection.EmptyPlugin({name:"DisplayAdvancedFields",width:28,zone:"tr"}),o=this.options.displaySchemaAdvancedFields?xtk_core.treeList_hide_advanced_fields_help:xtk_core.treeList_display_advanced_fields_help,s.add(e("<div></div>").nlButton({mode:"default",icon:"nlui-icon-schema-advanced",isPushed:this.options.displaySchemaAdvancedFields,onClick:function(e,t,r){var i;n.toggleAdvancedField(),n.options.displaySchemaAdvancedFields?i=xtk_core.treeList_hide_advanced_fields_help:i=xtk_core.treeList_display_advanced_fields_help,e.nlButton("option",{help:i,isPushed:n.options.displaySchemaAdvancedFields})},help:o,helpGravity:"autoNS"})),this.addPlugin(s),NL.Widgets.LayoutManager.rebuildLayout(this.element))},_renderItem:function(n,r,i,s,o){var u,a,f,l,c,h,p,d,v;l=e.NL.nlList.prototype._renderItem.apply(this,arguments);if(this.options.layoutType!=="grid"){d=o.parent().nlData("item-reference-index"),NL.isNundef(d)&&(d=""),d!==""?(c=this.currentItems.pop(),v=this._getCurrentCollectionItemByItemReference(d,this.currentItems),NL.Utils.isArray(v.children)||(v.children=[]),v.children.push(c),c.searchReference=this._addCurrentElementToSearch(c,v.searchReference),d+="_"):(c=this.currentItems[this.currentItems.length-1],c.searchReference=this._addCurrentElementToSearch(c)),l.nlData("item-reference-index",d+r),l.nlData("item-search-index",c.searchReference),l.addClass("nlui-tree-list-item"),u=l.contents(),l.children().remove(),h=e("<ol></ol>"),h.appendTo(l),p=e("<li></li>").addClass("nlui-tree-list-item-contents").appendTo(h),this._isSelectableItem(i)||p.addClass("nlui-tree-list-item-not-selectable"),this._isSchemaWalkerSource&&this.options.displaySchemaAdvancedFields?(f=i.nodePath.substr(i.nodePath.lastIndexOf("/")+1),u[0].nodeName==="#text"?p.append(e("<span></span>").append(u)).append(e("<span></span>").text(" ("+f+")")):(u.append(e("<span></span>").text(" ("+f+")")),p.append(u))):p.append(u);if(this._isSchemaWalkerSource){if(this.options.displaySchemaAdvancedFields===!1&&(i.isAdvanced||i.unbound)||this._filterFieldSchemaWalker(i)){l.remove();return}p=this._schemaRender(i,p)}else this._isFolderSource&&(p=this._folderRender(i,p));a=e("<span></span>").addClass("nlui-tree-list-icon-container").prependTo(l),this._waitingTreeSelection.length===1&&this._waitingTreeSelection[0]===i.name&&(l.addClass("nlui-list-selected"),this._waitingTreeSelection=[],this._selectItem(c),this._setSelectedItem(c),c!==undefined&&(this._needToScrollAt=c)),NL.isNundef(i.children)?e("<span>&nbsp;</span>").addClass("empty-icon").appendTo(a):this._renderItemChildren(l,a,i,r,n,d)}},_filterFieldSchemaWalker:function(t){var n,r=!1;for(n in this.options.schemaWalkerTypeFilter)if(this.options.schemaWalkerTypeFilter.hasOwnProperty(n)&&this.options.schemaWalkerTypeFilter[n]&&t[n]){r=!0;break}return r},_onItemClick:function(n){this.options.selectionMode==="none"&&!this.options.hideExpandIcon||!this._isSelectableItem(n.source)?this.toggleSubElement(n.element,!0):e.NL.nlList.prototype._onItemClick.apply(this,arguments)},_onItemDoubleClick:function(n){(this.options.selectionMode!=="none"||this.options.hideExpandIcon)&&this._isSelectableItem(n.source)&&e.NL.nlList.prototype._onItemDoubleClick.apply(this,arguments)},scrollTo:function(t){var n,r,i;return r=t.element.parents("div.nlui-list-body"),i=t.element.position(),n=i.top-r.height(),n>0?(r.animate({scrollTop:n},500),this.options.onSelection(this.currentSelection),!0):!1},_render:function(n,r){this._oldItemExpandState=NL.Utils.extend(!0,{},this._itemExpandState);var i=n;this._isSchemaWalkerSource&&this.options.displaySchemaRootNode&&(i=[{label:this.controller.dataSource.getLabelSingular(),name:this.controller.dataSource.schemaName,nodePath:"/"+this.controller.dataSource.schemaName,type:"nodeStruct",children:{data:n}}]),e.NL.nlList.prototype._render.apply(this,[i,r]),this._scrollIfNeeded()},rebuildLayout:function(){e.NL.nlList.prototype.rebuildLayout.apply(this,arguments),this.rebuildLayoutWithParent(this._$list)},selection:function(n,r){var i,s,o,u=this;if(n===undefined)return NL.isNundef(this.currentSelection)?null:this.currentSelection;u.resetSelection();if(!n||!n.key())u.options.dialog&&NL.Widgets.callWidgetMethod(u._dialogOkButton,"option",["disabled",!0]);else{if(this.options.keyAttributes===null)throw xtk_core.list_err_noKeyAttributes();i=n.key(),NL.isNundef(i.attr("nodePath"))?e.NL.nlList.prototype.selection.apply(this,arguments):NL.isNundef(i)||(o=i.attr("nodePath").split("/"),o=o.slice(1),this.currentItems.length>0?(s=this._seekElementToSelect(this.currentItems,o),NL.isNundef(s)||(this._selectItem(s),this.scrollTo(s),this._setSelectedItem(s))):this._waitingTreeSelection=o)}},_addCurrentElementToSearch:function(t,n){var r,i,s,o,u,a;u=NL.Utils.extend(!0,{},t),n===undefined?(s=this._currentSearchItems,u.searchReference=""):(a=this._getCurrentCollectionItemByItemReference(n,this._currentSearchItems),NL.Utils.isArray(a.children)||(a.children=[]),s=a.children,u.searchReference=n+"_"),i=!1,o=s.length,r=0;while(!i&&r<o){if(NL.Utils.isEqual(u.source,s[r].source)||this._isSchemaWalkerSource&&u.source.name===s[r].source.name&&u.source.nodePath===s[r].source.nodePath&&u.source.type===s[r].source.type&&u.source.label===s[r].source.label)i=!0,u.searchReference=s[r].searchReference;r++}return i===!1&&(s.push(u),u.searchReference+=s.length-1),u.searchReference},_seekElementToSelect:function(t,n){var r,i=0,s,o,u="";this._isSchemaWalkerSource&&this.options.displaySchemaRootNode&&(t=t[0].children);while(t.length>0&&i<n.length){u+="/"+n[i],r=0,s=null;while(s===null&&r<t.length)o=t[r],o.source.nodePath===u&&(s=o),r++;i++,t=s.children,i<n.length&&(this._waitingTreeSelection=n)}return s},_renderItemChildren:function(n,r,i,s,o,u){var a,f;this.options.expandAll===!0&&this.options.hideExpandIcon===!0&&n.addClass("nlui-tree-list-hide-icon"),f=this._needToExpandThisElement(i,s,u,n),f?(NL.View.genImage(this.options.subElementOpenedClass,16).appendTo(r),this._loadSubElement(n,!1),this._setExpandedState(n.nlData("item-search-index"),f)):NL.View.genImage(this.options.subElementClosedClass,16).appendTo(r),a=this,r.on("click",function(t){t.stopPropagation(),a.toggleSubElement(e(t.currentTarget).parent(),!0)}),this._alignListIcon(r)},_needToExpandThisElement:function(t,n,r,i){var s=!1,o;return this.options.expandAll||t.type==="nodeStruct"?s=!0:(s=this._getOldExpandedState(i.nlData("item-search-index")),o=this._waitingTreeSelection.length,s===!1&&o>1&&this._waitingTreeSelection[0]===t.name&&(s=!0,this._waitingTreeSelection=this._waitingTreeSelection.slice(1))),s},rebuildLayoutWithParent:function(n){var r=this;e(".nlui-tree-list-icon-container",n).each(function(t,n){r._alignListIcon(e(n))})},_getCurrentCollectionItemByItemReference:function(t,n){var r,i,s;n===undefined&&(n=this.currentItems),NL.isNumber(t)?s=[t]:s=t.split("_"),i=n[s[0]],r=1;while(r<s.length&&NL.Utils.isArray(i.children)&&i.children.length>0)i=i.children[s[r]],r++;return i},_getCurrentElementSourceByItemReference:function(t){var n,r,i;NL.isNumber(t)?i=[t]:i=t.split("_"),r=this.currentItems[i[0]].source,n=1;while(n<i.length&&NL.Utils.isArray(r.children.data)&&r.children.data.length>0)r=r.children.data[i[n]],n++;return r.children},_getAllElementsSourceByItemReference:function(t){var n,r,i,s;r=[],NL.isNumber(t)?s=[t]:s=t.split("_"),i=this._currentSearchItems[s[0]],r.push(i.source),n=1;while(n<s.length&&!NL.isNundef(i.children)&&NL.Utils.isArray(i.children)&&i.children.length>0)NL.isNundef(i.source.children.data)?i=i.children[s[n]]:i=i.source.children.data[s[n]],r.push(i.source),n++;return r},_searchExpandedStateObject:function(t,n){var r,i,s,o;i=this._getAllElementsSourceByItemReference(t),o=n;for(r=0;r<i.length;r++){s=this._getInteranalStateHash(i[r]);if(!!NL.isNundef(o)||!!NL.isNundef(s)){o=undefined;break}NL.isNundef(o[s])&&(o[s]={expanded:!1}),o=o[s]}return o},_getOldExpandedState:function(t){var n=this._searchExpandedStateObject(t,this._oldItemExpandState);return NL.isNundef(n)?!1:n.expanded},_setExpandedState:function(t,n){var r=this._searchExpandedStateObject(t,this._itemExpandState);NL.isNundef(r)||n===!1?r=undefined:r.expanded=n},_getInteranalStateHash:function(n){var r,i,s;if(n!==undefined){r="";for(i in n)n.hasOwnProperty(i)&&i!=="children"&&(s=n[i],NL.isString(s)||NL.isNumber(s)||NL.isNundef(s)?(NL.isString(s)&&n[i].replace("_","|underscore|"),r+=n[i]+"_"):NL.isBoolean(s)?r+=(n[i]?1:0)+"_":r+=e(n[i]).serialise().replace("_","|underscore|")+"_")}return r},_alignListIcon:function(t){t.next().hasClass("nlui-tree-list-sub-element")||t.css("padding-top",(t.next().height()-16)/2+"px")},_createSubElements:function(n,r,i,s){var o,u,a;u="nlui-tree-list-sub-element",this.options.layoutType==="link"&&(u+=" nlui-tree-list-link"),a=e("<ol></ol>").addClass(u),s!==!0&&a.hide(),a.appendTo(i),o=this,!NL.isNundef(r.data)&&r.data.length>0?e.each(r.data,function(e,t){o._renderItem(n,e,t,!1,a)}):!NL.isNundef(r.schema)&&s&&this._loadSchemaWalker(r,i,!s)},toggleSubElement:function(t,n){var r,i,s;s=t.children("span.nlui-tree-list-icon-container").children("span.nlui-icon"),r=t.children("ol.nlui-tree-list-sub-element");if(s.hasClass(this.options.subElementClosedClass)||s.hasClass(this.options.subElementOpenedClass))r.length===0?this._loadSubElement(t,n):(n===!1?r.toggle():r.toggle(this.options.toggleEffect,{},400),i=t.nlData("item-search-index"),s.hasClass(this._closeIconClass)?(this._setItemIconTo("open",s),this._setExpandedState(i,!0)):(this._setItemIconTo("close",s),this._setExpandedState(i,!1)))},_loadSubElement:function(t,n){var r,i,s,o,u;o=t.nlData("item-reference-index"),this._setItemIconTo("loading",t.children("span.nlui-tree-list-icon-container").children("span.nlui-icon")),u=this._getCurrentElementSourceByItemReference(o),NL.isArray(u.data)?this._loadDataCallBack(u,{$container:t,animated:n}):NL.isNundef(u.schema)?NL.isNundef(u.folder)||this._loadFolder(u,t,n):this._loadSchemaWalker(u,t,n)},_loadSchemaWalker:function(n,i,s){function c(e){l.cancel()}var o,u,a,f,l;u=n.schema.id,f=new NL.DataSource.SchemaWalker({schemaName:u,flatten:!1}),o=this,f.formatDataOnSuccess=function(e){return r(e,this,o,i.nlData("item-reference-index"))},l=new NL.Collection.Controller(f),l.onSuccess.attach(function(e,t){n.data=e.data,o._loadDataCallBack(n,{$container:i,animated:s}),o.controller.dataSource.addLinkedResults(u,e.data)}),l.onError.attach(function(t){e("<div></div>").nlMessageBox({type:"error",message:t}),o._setItemIconTo("close",i.children("span.nlui-tree-list-icon-container").children("span.nlui-icon"))}),l.onComplete.attach(function(){i.children("span.nlui-tree-list-icon-container").children("span.nlui-icon").off("click",c)}),a=l.get(),i.children("span.nlui-tree-list-icon-container").on("click",{currentJob:a},c)},_loadFolder:function(n,i,s){function h(e){l.cancel()}var o,u,a,f,l,c;c=NL.Utils.extend(!0,{},this.controller.dataSource.settings),a={parentKey:n.folder},f=new NL.DataSource.Folder(c),o=this,f.formatDataOnSuccess=function(e){return r(e,this,o,i.nlData("item-reference-index"))},l=new NL.Collection.Controller(f),l.onSuccess.attach(function(e,t){n.data=e.data,o._loadDataCallBack(n,{$container:i,animated:s})}),l.onError.attach(function(t){e("<div></div>").nlMessageBox({type:"error",message:t}),o._setItemIconTo("close",i.children("span.nlui-tree-list-icon-container").children("span.nlui-icon"))}),l.onComplete.attach(function(){i.children("span.nlui-tree-list-icon-container").children("span.nlui-icon").off("click",h)}),l.get(a),i.children("span.nlui-tree-list-icon-container").children("span.nlui-icon").on("click",{currentJob:u},h)},_loadDataCallBack:function(t,n){this._createSubElements(0,t,n.$container,!1),this._setItemIconTo("close",n.$container.children("span.nlui-tree-list-icon-container").children("span.nlui-icon")),this.toggleSubElement(n.$container,n.animated),this.rebuildLayoutWithParent(n.$container),this._scrollIfNeeded()},_scrollIfNeeded:function(){this._needToScrollAt!==undefined&&this.scrollTo(this._needToScrollAt)&&(this._needToScrollAt=undefined)},_setItemIconTo:function(t,n){switch(t){case"open":n.removeClass(this.options.subElementClosedClass+" nlui-tree-list-loading-element "+this._closeIconClass).addClass(this.options.subElementOpenedClass+" "+this._openIconClass);break;case"close":n.removeClass(this.options.subElementOpenedClass+" nlui-tree-list-loading-element "+this._openIconClass).addClass(this.options.subElementClosedClass+" "+this._closeIconClass);break;case"loading":n.removeClass(this.options.subElementOpenedClass+" "+this.options.subElementClosedClass+" "+this._openIconClass+" "+this._closeIconClass).addClass("nlui-tree-list-loading-element")}},_folderRender:function(t,n){return NL.View.genImage(t.img,16).prependTo(n),n},_schemaRender:function(t,n){var r;switch(t.type){case"link":t.unbound?t.collection?r="nlui-icon-xtk-linkn":r="nlui-icon-xtk-linkr":r="nlui-icon-xtk-link0";break;case"CDATA":case"memo":r="nlui-icon-xtk-field-memo";break;case"struct":r="nlui-icon-xtk-struct";break;case"nodeStruct":r="nlui-icon-xtk-schema";break;default:t.required?r="nlui-icon-xtk-field-index":t.primary?r="nlui-icon-xtk-field-pk":t.foreign?r="nlui-icon-xtk-field-fk":t.calculated?r="nlui-icon-xtk-field-calculated":r="nlui-icon-xtk-field"}return NL.View.genImage(r,16).prependTo(n),n},filterData:function(){var t,n,r;t=this._$searchPlugin._model,t.filter.value===""?(NL.isNundef(this.currentSelection)||(r=this.currentSelection.key().attr("nodePath").slice(1),this._waitingTreeSelection=r.split("/")),this._currentSearchItems=[],this._itemExpandState={},this._oldItemExpandState={},this.controller.refresh()):(n=i(this._currentSearchItems,{filters:[t]}),this.refreshWithData(this._formatSearchData(n.data),{empty:!0,baseRowIndex:0}))},toggleAdvancedField:function(){this.options.displaySchemaAdvancedFields=!this.options.displaySchemaAdvancedFields,this.refreshWithData(this._formatSearchData(this._currentSearchItems),{empty:!0,baseRowIndex:0})},_formatSearchData:function(n){var r,i,s,o=[];for(r=0;r<n.length;r++)i=e.extend(!0,{},n[r].source),s=e.extend(!0,[],n[r].children),NL.Utils.count(s)>0&&(i.children=i.children||{},i.children.data=this._formatSearchData(s)),o.push(i);return o.length>0&&o[0].type==="nodeStruct"&&(o=o[0].children.data),o},_isSelectableItem:function(t){var n=!0;return this._isFolderSource&&t.disabled?n=!1:this._isSchemaWalkerSource&&t.type==="struct"&&(n=!1),n}})})(jQuery,window,document)
;"use strict";(function(e,t,n){e.widget("NL.nlNavigator",e.NL.nlWidget,{options:{source:null,items:[],rootLabel:xtk_core.navigator_home(),emptyText:xtk_core.navigator_elementNoneSelected(),onChange:function(e,t){},ghostOnNavigation:!0,rootIcon:"ui-icon-folder-open",breadcrumbIcon:!1},_$clear:null,_$selectionContainer:null,_$ellipsis:null,_ellipsisConf:[],_selectedItem:!1,_rootConf:{type:"root",id:0,label:"",leaf:!1},_$rootIcon:null,_hitEvent:"click",_insertAfter:null,_job:null,_getRootConf:function(){return e.extend({},this._rootConf,{icon:this.options.rootIcon})},_create:function(){var t=this;this._hitEvent=NL.Browser.isTouchScreen()?"touchend":"click",this._$clear=e('<span class="nlui-navigator-clear"></span>').append(NL.View.genImage("nlui-icon-circle-close")).on(this._hitEvent,function(){t.clear()}).hide().appendTo(this.element),this._$selectionContainer=e('<ul class="nlui-navigator-root"></ul>').appendTo(this.element),this.element.addClass("ui-widget nlui-navigator ui-corner-all"),this._setItems(this.options.items),e("html").on(this._hitEvent,function(){t._$selectionContainer.find(".nlui-navigator-menu").length!==0&&t._rollback()}),NL.Widgets.LayoutManager.registerWidget(this)},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments),this.refresh()},clear:function(){this._setItems([]),this._$clear.hide(),this.options.onChange(null,null)},_addItemConf:function(e,t){if(this.options.items.length>0){var n=this.options.items[this.options.items.length-1];e&&n&&NL.XTK.toString(e.id)!==NL.XTK.toString(n.id)&&this._addItemConf(e._parent,e)}else e&&this._addItemConf(e._parent,e);this.options.items.push(t)},_addItem:function(t,n){var r=this,i=e("<li></li>").nlData("itemId",n.id).appendTo(this._$selectionContainer),s=e("<a></a>").text(n.label).addClass("nlui-navigator-item").appendTo(i);n.disabled||s.addClass("nlui-navigator-link"),n.type==="root"?(s.addClass("nlui-navigator-rootLink"),i.addClass("nlui-navigator-rootParent"),s.on(r._hitEvent,function(e){r._selectedItem=!1;if(!r.options.ghostOnNavigation)while(i.next().length>0)i.next().remove();r._insertAfter=null,r._showMenu(n,s),r.stopPropagation(e)})):s.on(r._hitEvent,function(e){r._insertAfter=t,r._setItem(null,n,!0),r.stopPropagation(e)});if(n.icon&&(n.type==="root"||r.options.breadcrumbIcon)){var o=e(NL.View.genImage(n.icon));s.addClass("nlui-navigator-icon").prepend(o),n.type==="root"&&(this._$rootIcon=o)}if(!n.leaf&&n.type!=="root"){var u=e("<span></span>").addClass("nlui-navigator-navigationImg").append(NL.View.genImage("ui-icon-triangle-1-e")),a=e("<a></a>").append(u).appendTo(i).addClass("nlui-navigator-navigation");this.options.source&&a.addClass("nlui-navigator-link"),a.on(r._hitEvent,function(e){r._selectedItem=!1;if(!r.options.ghostOnNavigation)while(i.next().length>0)i.next().remove();r._insertAfter=n,r._showMenu(n,a),r.stopPropagation(e)}),i.addClass("nlui-navigator-parent")}this._checkOverflow()},_itemOnClick:function(e){this._setItem(e._parent,e,!0),this._selectedItem=!0},_workingItemFromSource:function(e,t){var n=this,r={};return r.id=t.id,r.fullName=t.fullName,r.icon=t.icon,r.type=t.type,r.label=t.label,r.leaf=t.leaf,r._parent=e,r._originalItem=t,r.onClick=function(){n._itemOnClick(r)},t.leaf||(r.rightIcon="ui-icon-carat-1-e",r.subCommands=function(e,t){n._getMenuData(r,function(e){t(e)})}),r},_getMenuData:function(e,t,n){var r=this;if(!this.options.source)return;this._job&&this._job.cancel(),this._job=this.options.source.get({params:{parentKey:e.id},success:function(n){var i=!1,s=[];NL.isNundef(r._getItem(e.id,!0))&&(i=!0),NL.Utils.each(n,function(t,n){if(e.type!=="root")var i=r._workingItemFromSource(e,n);else var i=r._workingItemFromSource(null,n);s.push(i)}),NL.isFunction(t)&&t.call(r,s)},error:function(){r._job=null,NL.isFunction(n)&&n.call(r)}})},_setRootIcon:function(t){var n=e(NL.View.genImage(t));this._$rootIcon.remove(),this._$rootIcon=n,this._$selectionContainer.find(".nlui-navigator-rootLink").prepend(this._$rootIcon)},_showMenu:function(e,t){var n=this,r=t.closest("li"),i=r.nlData("itemId");this.options.ghostOnNavigation&&this._removeFinder(),e.type==="root"&&n._setRootIcon("/xtk/img/loading.gif"),t.find(".nlui-navigator-navigationImg").html(NL.View.genImage("/xtk/img/loading.gif")),this._getMenuData(e,function(t){var r=n._getRenderedItem(i).find(".nlui-navigator-navigation, .nlui-navigator-rootLink");r&&(r.nlSubmenu({menuItems:t,autoOpen:!0,onMenuHide:function(){r.nlSubmenu("destroy"),n._selectedItem||n._rollback(),e.type==="root"?n._setRootIcon(e.icon):r.find(".nlui-navigator-navigationImg").html(NL.View.genImage("ui-icon-triangle-1-e"))}}),e.type==="root"?n._setRootIcon(e.icon):r.find(".nlui-navigator-navigationImg").html(NL.View.genImage("ui-icon-triangle-1-s")))},function(){e.type==="root"?n._setRootIcon(e.icon):t.find(".nlui-navigator-navigationImg").html(NL.View.genImage("ui-icon-triangle-1-e"))})},_addFinder:function(){var t=e('<li class="nlui-navigator-finder"></li>').appendTo(this._$selectionContainer).append(this.options.emptyText),n=0,r=t.outerWidth(!0),i=this._$selectionContainer.width();this._getRenderedItems().not(t).each(function(t,r){n+=e(r).outerWidth(!0)}),n+r>=i&&t.css("width",i-n+"px")},_removeFinder:function(){this._$selectionContainer.find(".nlui-navigator-finder").remove()},_setItem:function(t,n,r){var i=[],s=this,o=!1;this._getRenderedItems().each(function(t,n){if(e(n).is(s._$ellipsis))NL.Utils.each(s._ellipsisConf,function(t,r){r.onClick=function(){s._itemOnClick(r,!1,r._parent)},NL.isNundef(s._insertAfter)||i.push(r);if(s._insertAfter&&NL.XTK.toString(r.id)===NL.XTK.toString(s._insertAfter.id)||NL.isNundef(s._insertAfter)){s._ellipsisConf=s._ellipsisConf.slice(0,t);while(e(n).next().length>0)e(n).next().remove();return o=!0,!1}});else if(!NL.isNundef(e(n).nlData("itemId"))){var r=e(n).nlData("itemId"),u=s._getItem(r,!0);!NL.isNundef(s._insertAfter)&&u&&u.type!=="root"&&i.push(u);if(s._insertAfter&&NL.XTK.toString(r)===NL.XTK.toString(s._insertAfter.id)||NL.isNundef(s._insertAfter)){while(e(n).next().length>0)e(n).next().remove();o=!0}}if(o)return!1}),s.options.items=i,s._addItemConf(t,n),s._setItems(s.options.items),r&&s.options.onChange(s.getValue(),n)},_setItems:function(e){var t=this;t.options.items=[],this._getRenderedItems().remove(),t._ellipsisConf=[],t._$ellipsis=null,t._addItem(null,this._getRootConf()),NL.isArray(e)&&e.length>0?(t._$clear.show(),t._removeFinder(),NL.Utils.each(e,function(e,n){n._originalItem?t.options.items.push(n):t.options.items.push(t._workingItemFromSource(null,n))}),NL.Utils.each(t.options.items,function(e,n){NL.isNundef(n._parent)&&e>0&&(n._parent=t.options.items[e-1]),t._addItem(n._parent,n)})):t._addFinder()},getItem:function(e){return this._getItem(e,!1)},_getItem:function(t,n){if(!NL.isNundef(t)){var r;return NL.Utils.each(this.options.items,function(e,n){if(NL.XTK.toString(n.id)===NL.XTK.toString(t))return r=n,!1}),n?r:r._originalItem}return e.extend({},this.options.items[this.options.items.length-1]._originalItem)},_getItems:function(){var e=[];return NL.Utils.each(this.options.items,function(t,n){var r={};r.id=n.id,r.fullName=n.fullName,r.icon=n.icon,r.type=n.type,r.label=n.label,r.leaf=n.leaf,e.push(r)}),e},getValue:function(){var e=this._getItems();if(NL.isArray(e)&&e.length>0){var t=e[e.length-1];return new NL.Collection.Selection(new NL.Collection.Key({id:t.id}),{label:t.id,fullName:t.fullName,list:e})}return null},setValue:function(e){if(!NL.isNundef(e)){var t=e.data("list");NL.assert(NL.isArray(t),"A whole list of items must be given."),this._setItems(t),this.options.onChange(e,this._getItem())}},_checkRollback:function(){var e=this;e._$selectionContainer.find(".nlui-navigator-menu").length!==0&&e._rollback()},_rollback:function(){this._setItems(this.options.items)},_getItemWidth:function(){var t=0;return this._getRenderedItems().each(function(n,r){t+=e(r).outerWidth(!0)}),t},_indexOf:function(e){var t=-1;return NL.Utils.each(this.options.items,function(n,r){return r.id===e.id?(t=n,!1):!0}),t},_sortEllipsisConf:function(){var e=this,t=function(t,n){var r=e._indexOf(t),i=e._indexOf(n);return r>i};this._ellipsisConf=this._ellipsisConf.sort(t)},_getRenderedItems:function(){return this._$selectionContainer.children()},_getRenderedItem:function(t){var n=function(n){return e(this).nlData("itemId")===t};return this._getRenderedItems().filter(n)},_checkOverflow:function(){var t=this,n=function(n){return!e(this).is(t._$ellipsis)},r=this._getRenderedItems().filter(n),i=this._ellipsisConf.length>0,s=0,o,u,a;while(this._getItemWidth()>=this._$selectionContainer.width()&&s<r.length)r=this._getRenderedItems().filter(n),o=r[Math.floor(r.length/2)],t._addEllipsisItem(o),e(o).remove(),s++;s===0&&!i&&(this._$ellipsis=null,this._ellipsisConf=[])},_ellipsisItemOnClick:function(e){this._insertAfter=e._parent,this._setItem(e._parent,e,!0)},_addEllipsisItem:function(t){var n=this,r=this._getItem(e(t).nlData("itemId"),!0),i=e.extend({},r,{onClick:function(){n._ellipsisItemOnClick(r)}});this._ellipsisConf.push(i),this._sortEllipsisConf(),this._$ellipsis||this._createEllipsis(t);var s=this._ellipsisConf[this._ellipsisConf.length-1];s.leaf?this._$ellipsis.find(".nlui-navigator-navigation").remove():this._$ellipsis.find(".nlui-navigator-navigation").length===0&&this._addEllipsisNavigation(),this._$ellipsis.nlData("itemId",s.id)},_addEllipsisNavigation:function(){var t=this,n=e("<span></span>").addClass("nlui-navigator-navigationImg").append(NL.View.genImage("ui-icon-triangle-1-e")),r=e("<a></a>").append(n).addClass("nlui-navigator-navigation").appendTo(t._$ellipsis);r.on(t._hitEvent,function(e){var n=t._ellipsisConf[t._ellipsisConf.length-1];t._selectedItem=!1;if(!t.options.ghostOnNavigation)while(t._$ellipsis.next().length>0)t._$ellipsis.next().remove();t._insertAfter=n,t._showMenu(n,r),t.stopPropagation(e)}),t.options.source&&r.addClass("nlui-navigator-link")},_createEllipsis:function(t){var n=this;this._$ellipsis=e("<li></li>"),e(t).after(this._$ellipsis);var r=e("<a></a>").text("...").addClass("nlui-navigator-item").on(this._hitEvent,function(){setTimeout(function(){var e=n._$ellipsis.find(".nlui-navigator-item");e.nlSubmenu({autoOpen:!0,menuItems:n._ellipsisConf,style:"flat"})},0)}).addClass("nlui-navigator-link").appendTo(this._$ellipsis);this._$ellipsis.addClass("nlui-navigator-parent")},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)},value:function(){return this.getValue()},refresh:function(){this._setItems(this.options.items)},rebuildLayout:function(){this._setItems(this.options.items)}})})(jQuery,window)
;"use strict";(function(e,t,n){NL.JobInterface=function(t){this.settings=e.extend({},{delay:1e3},t),this.catchedProperties={},this.restartable=!0,this.restartAfterError=!0},NL.JobInterface.prototype.execute=function(e){throw"Must be implemented"},NL.JobInterface.prototype.cancel=function(e){throw"Must be implemented"},NL.JobInterface.prototype.completed=function(t){e.isFunction(t)&&t(this)},NL.JobInterface.prototype.getStatus=function(e,t){throw"Must be implemented"},NL.JobInterface.prototype.isDone=function(){return this.status===NL.JobInterface.JOBSTATUS_IDLE||this.status===NL.JobInterface.JOBSTATUS_CANCELED||this.status===NL.JobInterface.JOBSTATUS_FINISHED||this.status===NL.JobInterface.JOBSTATUS_PAUSE||this.status===NL.JobInterface.JOBSTATUS_ERROR},NL.JobInterface.JOBSTATUS_IDLE=0,NL.JobInterface.JOBSTATUS_RUNNING=2,NL.JobInterface.JOBSTATUS_CANCELING=3,NL.JobInterface.JOBSTATUS_CANCELED=4,NL.JobInterface.JOBSTATUS_FINISHED=5,NL.JobInterface.JOBSTATUS_ERROR=6,NL.JobInterface.JOBSTATUS_PAUSEPENDING=7,NL.JobInterface.JOBSTATUS_PAUSE=8,NL.JobInterface.JOBSTATUS_PURGEPENDING=9,NL.JobInterface.JOBSTATUS_NONE=999,NL.JobInterface.JOBLOGTYPE_ERROR=0,NL.JobInterface.JOBLOGTYPE_WARNING=1,NL.JobInterface.JOBLOGTYPE_INFO=2,NL.JobInterface.JOBLOGTYPE_STATUS=3,NL.JobInterface.JOBLOGTYPE_VERBOSE=4,NL.JobInterface.JOBLOGTYPE_CATEGORY=999})(jQuery,window),function(e,t,n){NL.XtkJob=function(t){NL.JobInterface.apply(this,arguments);var n=this,r={id:0,methodName:null,urn:null,doNotPersist:!0,useWhere:!1,jobParameters:{},maxLogsByStep:10,propertiesToCatch:[]};this.lastLogId=-2147483647,this.status=NL.JobInterface.JOBSTATUS_IDLE,this.securitytoken=document.__securitytoken,this.settings=e.extend({},r,t),this.asyncTargets={execute:{},status:{},cancel:{}},this.asyncTargets.execute.onSoapRequestCompleted=function(t,r){r?NL.log.debug(r):n._jobId=t.getNextString(),e.isFunction(this.customCallback)&&this.customCallback(n,r)},this.asyncTargets.status.onSoapRequestCompleted=function(t,r){var i;if(r)NL.log.debug(r);else{var s=parseInt(t.getNextShort(),10),o=t.getNextElement(),u=t.getNextElement(),a=parseFloat(getXPathValue(u,"progress/@current"),10),f=parseFloat(getXPathValue(u,"progress/@max"),10),l=findNodes(o,"log",!0);NL.isArray(n.settings.propertiesToCatch)&&NL.Utils.each(n.settings.propertiesToCatch,function(e,t){NL.assert(NL.isPlainObject(t)&&!NL.isEmpty(t.id)&&!NL.isEmpty(t.xpath),"Given property is not valid.");var r=t.xpath,i=t.id;n.catchedProperties[i]=getXPathValue(u,r)}),n.status=s;var c=[];e.each(l,function(e,t){var r=convertToPOJsO(t);c.push(r),r.id>n.lastLogId&&(n.lastLogId=r.id)}),i={status:s,current:a,max:f,logs:c}}e.isFunction(this.customCallback)&&this.customCallback(i,r)},this.asyncTargets.cancel.onSoapRequestCompleted=function(t,r){e.isFunction(this.customCallback)&&this.customCallback(n,r)}},NL.XtkJob.prototype.execute=function(e){function t(e,t,n,r,i){var s='<soapCall name="'+NL.XML.escapeAttribute(e)+'" service="'+NL.XML.escapeAttribute(t)+'">';i&&!isNaN(n)&&n?s+='<param type="DOMElement"><where><condition expr="@id='+n+'" /></where></param>':!isNaN(n)&&n&&(s+='<param type="string" value="'+n+'"></param>');for(var o=0;o<r.length;o++)s+='<param type="'+NL.XML.escapeAttribute(r[o].type)+'"',r[o].type==="DOMElement"?s+=">"+r[o].value:s+=' value="'+NL.XML.escapeAttribute(r[o].value)+'">',s+="</param>";return s+="</soapCall>",s}var n="xtk:jobInterface|"+this.settings.urn,r=new NL.transport.SOAP({urn:n,method:"SubmitSoapCall",nsEncoding:"UTF-8"}),i=this.settings.jobParameters.params?this.settings.jobParameters.params:{},s=NL.XTK.parseBoolean(this.settings.useWhere),o=Number(this.settings.id);this.asyncTargets.execute.customCallback=e;var u='<job doNotPersist="'+this.settings.doNotPersist+'" xtkschema="'+this.settings.urn;!isNaN(o)&&o&&(u+='" id="'+o),u+='"><properties warning="false"><progress/></properties></job>',r.writeElement("urn",u),r.writeElement("elemSoapCall",t(this.settings.methodName,this.settings.urn,o,i,s));var a=this;r.start({onSuccess:function(e){a.asyncTargets.execute.onSoapRequestCompleted(e,null)},onError:function(e){a.asyncTargets.execute.onSoapRequestCompleted(null,e)},loaderOff:!0})},NL.XtkJob.prototype.setJobParameters=function(e){this.settings.jobParameters=e},NL.XtkJob.prototype.isDone=NL.JobInterface.prototype.isDone,NL.XtkJob.prototype.completed=NL.JobInterface.prototype.completed,NL.XtkJob.prototype.getStatus=function(e,t){var n=new NL.transport.SOAP({urn:"xtk:jobInterface",method:"GetStatus",nsEncoding:"UTF-8"}),r=this.settings.maxLogsByStep;t&&(r=0),this.asyncTargets.status.customCallback=e,n.writeString("id",this._jobId),n.writeInt("lastLogId",this.lastLogId),n.writeInt("maxLogCount",r);var i=this;n.start({onSuccess:function(e){i.asyncTargets.status.onSoapRequestCompleted(e,null)},onError:function(e){i.asyncTargets.status.onSoapRequestCompleted(null,e)},loaderOff:!0})},NL.XtkJob.prototype.cancel=function(e){var t=new NL.transport.SOAP({urn:"xtk:jobInterface",method:"Cancel",nsEncoding:"UTF-8"});this.asyncTargets.cancel.customCallback=e,t.writeString("id",this._jobId);var n=this;t.start({onSuccess:function(e){n.asyncTargets.cancel.onSoapRequestCompleted(e,null)},onError:function(e){n.asyncTargets.cancel.onSoapRequestCompleted(null,e)},loaderOff:!0})}}(jQuery,window),function(e,t,n){NL.MockupJob=function(t){NL.JobInterface.prototype&&NL.JobInterface.apply(this,arguments);var n={maxStep:10,delay:1e3,step:1};this.currentStep=0,this.status=NL.JobInterface.JOBSTATUS_IDLE,this.settings=e.extend({},n,t)},NL.MockupJob.prototype.execute=function(t){this.status=NL.JobInterface.JOBSTATUS_RUNNING,this.currentStep=0;var n=this;this.runTimer=setInterval(function(){n.currentStep+=n.settings.step},1e3),e.isFunction(t)&&t(this)},NL.MockupJob.prototype.cancel=function(t){this.status=NL.JobInterface.JOBSTATUS_CANCELED,clearInterval(this.runTimer),e.isFunction(t)&&t(this)},NL.MockupJob.prototype.completed=function(t){this.currentStep>=this.settings.maxStep&&(this.status=NL.JobInterface.JOBSTATUS_FINISHED),clearInterval(this.runTimer),e.isFunction(t)&&t(this)},NL.MockupJob.prototype.getStatus=function(t,n){var r=Math.floor(Math.random()*4*this.settings.maxStep),i=Math.floor(Math.random()*this.settings.maxStep),s=[];if(!n&&this.currentStep>r){var o={logType:NL.JobInterface.JOBLOGTYPE_WARNING,message:"Fake warning at step "+this.currentStep};s.push(o)}if(!n&&this.settings.generateError!==!1&&this.currentStep===i){this.status=NL.JobInterface.JOBSTATUS_ERROR;var u={logType:NL.JobInterface.JOBLOGTYPE_ERROR,message:"Fake error at step "+this.currentStep};s.push(u)}var a={status:this.status,current:this.currentStep,max:this.settings.maxStep,logs:s};e.isFunction(t)&&t(a)},NL.MockupJob.prototype.isDone=function(){return this.currentStep>=this.settings.maxStep||NL.JobInterface.prototype.isDone.call(this)}}(jQuery,window),function(e,t,n){NL.LocalJob=function(t){NL.JobInterface.prototype&&NL.JobInterface.apply(this,arguments);var n={maxStep:10,delay:1e3,step:1};this.currentStep=0,this.status=NL.JobInterface.JOBSTATUS_IDLE,this.settings=e.extend({},n,t),this.settings.simulateProgression&&(this.settings.step=1)},NL.LocalJob.prototype.execute=function(t){this.status=NL.JobInterface.JOBSTATUS_RUNNING,this.currentStep=0;var n=this;setTimeout(function(){n.currentStep+=n.settings.step},this.settings.delay),NL.isFunction(this.settings.execute)&&this.settings.execute.call(this),e.isFunction(t)&&t(this)},NL.LocalJob.prototype.cancel=function(t){this.status=NL.JobInterface.JOBSTATUS_CANCELED,NL.isFunction(this.settings.cancel)&&this.settings.cancel.call(this),e.isFunction(t)&&t(this)},NL.LocalJob.prototype.completed=function(t){this.currentStep>=this.settings.maxStep&&(this.status=NL.JobInterface.JOBSTATUS_FINISHED),NL.isFunction(this.settings.completed)&&this.settings.completed.call(this),e.isFunction(t)&&t(this)},NL.LocalJob.prototype.getStatus=function(t,n){var r=this,i,s;NL.isFunction(this.settings.getStatus)&&(s=this.settings.getStatus.call(this)),NL.isArray(s)||(s=[]);var o={status:r.status,current:r.currentStep,max:r.settings.maxStep,logs:s};r.settings.simulateProgression&&(i=Math.exp(Math.log(3600)*r.currentStep/r.settings.maxStep)*1e3,setTimeout(function(){r.currentStep=Math.min(r.currentStep+r.settings.step,r.settings.maxStep-1)},i),r.currentStep<r.settings.maxStep?r.settings.delay=i:r.settings.delay=0),e.isFunction(t)&&t(o)},NL.LocalJob.prototype.isDone=function(){return this.currentStep>=this.settings.maxStep||NL.JobInterface.prototype.isDone.call(this)}}(jQuery,window),function(e,t,n){var r={_logData:[],_logDataSource:null,_hasWarnings:!1,_hasErrors:!1,_lastHasErrors:!1,_currentJobIdx:0,_currentlyRunning:!1,_restartable:!0,_restartAfterError:!0,_multipleJobs:!1,_noProgression:0,_oldCurrentStep:0,$_progressContainer:null,$_message:null,$_logList:null,$_progressBar:null,$_startButton:null,$_closeButton:null,$_cancelButton:null,options:{job:{},autoStart:!1,maxLog:100,maxWarningInLog:10,maxErrorInLog:10,stopOnJobError:!0,beforeStart:null,started:null,done:null,canceled:null,error:null,onClose:null,listEmptyTextLabel:xtk_core.jobProgressIndicator_listEmptyTextLabel(),titleLabel:xtk_core.jobProgressIndicator_titleLabel(),startLabel:xtk_core.jobProgressIndicator_startLabel(),stopLabel:xtk_core.jobProgressIndicator_stopLabel(),resumeLabel:xtk_core.jobProgressIndicator_resumeLabel(),closeLabel:xtk_core.jobProgressIndicator_closeLabel(),displayLogLabel:xtk_core.jobProgressIndicator_displayLogLabel(),hideLogLabel:xtk_core.jobProgressIndicator_hideLogLabel(),initMsgLabel:xtk_core.jobProgressIndicator_initMsgLabel(),inProgressLabel:xtk_core.jobProgressIndicator_inProgressLabel(),doneLabel:xtk_core.jobProgressIndicator_doneLabel(),doneWarningLabel:xtk_core.jobProgressIndicator_doneWarningLabel(),doneErrorLabel:xtk_core.jobProgressIndicator_doneErrorLabel(),errorLabel:xtk_core.jobProgressIndicator_errorLabel(),cancelLabel:xtk_core.jobProgressIndicator_cancelLabel(),execErrorLabel:xtk_core.jobProgressIndicator_execErrorLabel(),cancelErrorLabel:xtk_core.jobProgressIndicator_cancelErrorLabel(),getStatusErrorLabel:xtk_core.jobProgressIndicator_getStatusErrorLabel()},_create:function(){var t=this;t._multipleJobs=NL.isArray(t.options.job),t._multipleJobs?NL.Utils.each(t.options.job,function(e,n){t._restartable=t._restartable&&n.settings.restartable,t._restartAfterError=t._restartAfterError&&n.settings.restartAfterError}):(t._restartable=t.options.job.settings.restartable,t._restartAfterError=t.options.job.settings.restartAfterError),t.$_message=e("<div></div>").nlActionMessage({message:t.options.initMsgLabel,state:"info",displayIcon:"none"}).appendTo(t.element),t.$_logList=e("<div></div>").addClass("nlui-jobProgressIndicator-logList ui-corner-all").appendTo(t.element),t.$_progressBar=e('<div class="nlui-jobProgressIndicator"></div>').progressbar({roundedCorners:!0,width:"100%",textPosition:"center",color:"blue"}).hide(),t._logData=[],t._logDataSource=new NL.DataSource.Local({data:t._logData}),t.$_logList.nlList({source:t._logDataSource,layoutSize:"large",localStorage:{plugins:!1},title:xtk_core.jobProgressIndicator_jobLogLabel(),itemRenderer:function(e,n,r){return t._defaultLogListRender(e,n,r)},search:!0}),t.$_dialog=t.element.nlDialog({title:t.options.titleLabel,modal:!0,autoOpen:!1,width:550,height:490,dialogClass:"nlui-jobProgressIndicator",buttons:[{text:t.options.startLabel,id:"start",click:function(){t.start()}},{text:t.options.stopLabel,id:"cancel",click:function(){t.cancel()}},{text:t.options.closeLabel,id:"close",click:function(){t.$_dialog.nlDialog("close")}}],open:function(e,n){t.options.autoStart&&t.start(),t.option("init")&&NL.is(t.option("init"),"function")&&t.option.init.call(t),t._refreshLogListHeight()},beforeClose:function(n,r){return t._currentlyRunning?(e("<div></div>").nlMessageBox({type:"confirm",message:xtk_core.jobProgressIndicator_warningRunningJobConfirmClose(),onConfirm:function(){t.cancel(),t.$_dialog.nlDialog("close")}}),!1):(t.options.onClose&&t.options.onClose(),!0)},resize:function(e,n){t._refreshLogListHeight()}}),t.$_startButton=t.$_dialog.nlDialog("getButton","start"),t.$_closeButton=t.$_dialog.nlDialog("getButton","close"),t.$_cancelButton=t.$_dialog.nlDialog("getButton","cancel").hide(),t.$_dialog.nlDialog("open"),t.$_progressContainer=e('<div class="nlui-jobprogressindicator-progresscontainer"></div>').css({position:"absolute",left:10,right:t.$_dialog.nlDialog("getCommandBar").outerWidth(!0)+50,top:17}).append(t.$_progressBar).appendTo(t.$_dialog.nlDialog("getFooter")),t.$_progressBar.css("margin-top",(t.$_progressContainer.outerHeight(!0)-t.$_progressBar.find(".nlui-progressbar-container").outerHeight(!0))/2+"px")},_setOption:function(){},destroy:function(){this.element.remove()},start:function(){var t;this._reset(),t=this._getCurrentJob(),this.$_message.nlActionMessage("option",{message:this.options.inProgressLabel,state:"info"}),this._refreshLogListHeight(),e.isFunction(this.options.beforeStart)&&this.options.beforeStart.call(this),this._executeJob(t),this._restartable?this.$_startButton.button("disable"):this.$_startButton.hide()},cancel:function(){var e=this,t=e._getCurrentJob();e._currentlyRunning=!1,t.cancel(function(t,n){n?e._processError(n,e.options.cancelErrorLabel,"CancelError"):e.getStatusAndLogs(t,n,!1)})},getStatusAndLogs:function(e,t,n){var r=this,i=!NL.isArray(r.options.job)||r._currentJobIdx===r.options.job.length-1;if(t)r._processError(t,r.options.getStatusErrorLabel,"GetStatusError"),r.options.stopOnJobError||r._startNextJob();else{var s=0,o=[],u=0,a=0;e.getStatus(function(t,f){if(f)r._processError(f,r.options.getStatusErrorLabel,"GetStatusError");else{t.current>r._oldCurrentStep?(r._oldCurrentStep=t.current,r._noProgression=0):r._noProgression++,s=t.status,o=t.logs,u=t.current,a=t.max;if(o.length){for(var l=0;l<o.length;l++)r._logData.push(o[l]),Number(o[l].logType)===NL.JobInterface.JOBLOGTYPE_WARNING&&(r._hasWarnings=!0),Number(o[l].logType)===NL.JobInterface.JOBLOGTYPE_ERROR&&(r._hasErrors=!0,i&&(r._lastHasErrors=!0));r.$_logList.nlList("refresh")}if(!e.isDone()){isNaN(u/a)||(NL.isArray(r.options.job)?r.$_progressBar.progressbar({value:u/a*1/r.options.job.length*100+r._currentJobIdx/r.options.job.length*100}):r.$_progressBar.progressbar({value:u/a*100}));var c=Math.round(e.settings.delay+Math.min(Math.max(0,(r._noProgression-2)*2e3),36e5));r.statusTimer=setTimeout(function(){r.getStatusAndLogs(e,f,!1)},c)}else n||e.completed(function(e,t){switch(Number(s)){case NL.JobInterface.JOBSTATUS_CANCELED:r._canceled(e,t);break;case NL.JobInterface.JOBSTATUS_ERROR:r._error(e,t);break;default:r._hasErrors&&(!i||r._lastHasErrors)?r._error(e,t):r._done(e,t)}})}},n)}},_reset:function(){var e=this;e._currentJobIdx=0,e._hasErrors=!1,e._lastHasErrors=!1,e._hasWarnings=!1,e._currentlyRunning=!1,e.$_startButton.button("disable"),e.$_closeButton.hide(),e.$_cancelButton.show(),e.$_message.nlActionMessage("option",{message:e.options.initMsgLabel,state:"info"}),e._refreshLogListHeight(),e.$_progressBar.progressbar({value:0}).show()},_getCurrentJob:function(){var e=this;return NL.isArray(e.options.job)?e.options.job[e._currentJobIdx]:e.options.job},_startNextJob:function(){var e=this;NL.isArray(e.options.job)&&e._currentJobIdx<e.options.job.length-1&&(e._currentJobIdx++,e.$_progressBar.progressbar({value:Math.round(100*e._currentJobIdx/e.options.job.length)}),e._executeJob(e._getCurrentJob()))},_executeJob:function(e){var t=this;NL.isArray(t.options.job)&&(t._logData.push({status:NL.JobInterface.JOBSTATUS_NONE,logType:NL.JobInterface.JOBLOGTYPE_CATEGORY,message:e.settings.title?xtk_core.jobProgressIndicator_currentSectionTitle_S(e.settings.title):xtk_core.jobProgressIndicator_currentSectionNoTitle_I(t._currentJobIdx+1)}),t.$_logList.nlList("refresh")),t._currentlyRunning=!0,e.execute(function(e,n){n?t._processError(n,t.options.execErrorLabel,"ExecuteError"):t.getStatusAndLogs(e,n,!1)})},_done:function(t,n){var r=this,i=!0;NL.isArray(r.options.job)&&(i=r._currentJobIdx===r.options.job.length-1),i&&(r._currentlyRunning=!1,r._toggleButtons()),n?r._processError(n,r.options.getStatusErrorLabel,"GetStatusError"):(r.getStatusAndLogs(t,n,!0),i?(r.$_progressBar.progressbar({value:100}),r._hasErrors?r.$_message.nlActionMessage("option",{message:r.options.doneErrorLabel,state:"error"}):r._hasWarnings?r.$_message.nlActionMessage("option",{message:r.options.doneWarningLabel,state:"warning"}):r.$_message.nlActionMessage("option",{message:r.options.doneLabel,state:"success"}),r._refreshLogListHeight()):r.$_progressBar.progressbar({value:Math.round(100*(r._currentJobIdx+1)/r.options.job.length)}),r._refreshLogListHeight(),i&&e.isFunction(r.options.done)&&r.options.done.call(r,t,n)),!i&&(!n||!r.options.stopOnJobError)&&r._startNextJob()},_canceled:function(t,n){var r=this;r._currentlyRunning=!1,r._toggleButtons(),n?r._processError(n,r.options.getStatusErrorLabel,"GetStatusError"):(r.getStatusAndLogs(t,n,!0),r.$_message.nlActionMessage("option",{message:r.options.errorLabel,state:"error"}),r._refreshLogListHeight(),e.isFunction(r.options.canceled)&&r.options.canceled.call(r,t,n))},_error:function(t,n){var r=this,i=!NL.isArray(r.options.job)||r.options.job.length-1===r._currentJobIdx;if(r.options.stopOnJobError||i)r._currentlyRunning=!1,r._toggleButtons();if(n)r._processError(n,r.options.getStatusErrorLabel,"GetStatusError");else{r.getStatusAndLogs(t,n,!0);if(r.options.stopOnJobError||i)r.$_message.nlActionMessage("option",{message:r.options.errorLabel,state:"error"}),r._refreshLogListHeight();e.isFunction(r.options.error)&&r.options.error.call(r,t,n)}r.options.stopOnJobError||r._startNextJob()},_defaultLogListRender:function(t,n,r){var i=e("<div></div>").addClass("nlui-jobProgressIndicator-log-line"),s="",o="";switch(NL.XTK.parseInt(t.logType,0)){case NL.JobInterface.JOBLOGTYPE_ERROR:s="alert",o="error";break;case NL.JobInterface.JOBLOGTYPE_WARNING:s="notice",o="warning";break;default:s="info",o="info"}if(NL.XTK.parseInt(t.logType,0)===NL.JobInterface.JOBLOGTYPE_CATEGORY){var u=e("<div></div>").text(t.message);r.addClass("nlui-list-categoryItem"),i.append(u)}else{var a=e("<div></div>").addClass("nlui-jobProgressIndicator-log-date").text(NL.View.dateTime(t.logDate,null,"time")||"").prepend(NL.View.genImage("ui-icon-"+s).addClass("nlui-icon-"+o)),f=e("<div></div>").addClass("nlui-jobProgressIndicator-log-message");t.message&&t.message.match(/---(.*)---/)&&f.addClass("nlui-jobProgressIndicator-log-message-bold"),f.text(t.message),i.append(a),i.append(f)}return i},_processError:function(t,n,r){var i=this,s=!NL.isArray(i.options.job)||i.options.job.length-1===i._currentJobIdx;if(i.options.stopOnJobError||s)i.$_message.nlActionMessage("option",{message:n,state:"error"}),i._refreshLogListHeight();var o=t;NL.isObject(t)&&(o=t.message),i._logData.push({status:NL.JobInterface.JOBSTATUS_ERROR,logType:NL.JobInterface.JOBLOGTYPE_ERROR,message:o}),i.$_logList.nlList("refresh");if(i.options.stopOnJobError||s)i._toggleButtons(),i._currentlyRunning=!1,e("<div></div>").nlMessageBox({type:"error",message:o})},_refreshLogListHeight:function(){var e=this.element.height(),t=this.$_message.outerHeight(!0),n=this.$_logList.find(".nlui-list-header").outerHeight(!0);this.$_logList.height(e-t);var r=this.$_logList.find(".nlui-list-body"),i=e-t-n;r.height(i).css("maxHeight",i),this.$_logList.nlList("rebuildLayout")},_toggleButtons:function(){this._restartable?this.$_startButton.button("enable"):this.$_startButton.hide(),this.$_closeButton.show(),this.$_cancelButton.hide()}};e.widget("NL.nlJobProgressIndicatorInDialog",e.NL.nlWidget,r)}(jQuery,window)
;(function(e,t,n){var r={_logData:[],_logDataSource:null,_hasWarnings:!1,_hasErrors:!1,_lastHasErrors:!1,_currentJobIdx:0,_currentlyRunning:!1,_restartable:!0,_restartAfterError:!0,_multipleJobs:!1,_noProgression:0,_oldCurrentStep:0,$_progressContainer:null,$_message:null,$_logList:null,$_progressBar:null,$_startButton:null,$_closeButton:null,$_cancelButton:null,options:{job:{},autoStart:!1,maxLog:100,maxWarningInLog:10,maxErrorInLog:10,stopOnJobError:!0,onBeforeStart:function(){},beforeStart:null,onStart:function(e){},onSuccess:function(e,t){},done:null,onCancel:function(e,t){},canceled:null,onError:function(e,t){},error:null,onWarning:function(e,t){},listEmptyTextLabel:xtk_core.jobProgressIndicator_listEmptyTextLabel(),titleLabel:xtk_core.jobProgressIndicator_titleLabel(),startLabel:xtk_core.jobProgressIndicator_startLabel(),stopLabel:xtk_core.jobProgressIndicator_stopLabel(),resumeLabel:xtk_core.jobProgressIndicator_resumeLabel(),closeLabel:xtk_core.jobProgressIndicator_closeLabel(),displayLogLabel:xtk_core.jobProgressIndicator_displayLogLabel(),hideLogLabel:xtk_core.jobProgressIndicator_hideLogLabel(),initMsgLabel:xtk_core.jobProgressIndicator_initMsgLabel(),inProgressLabel:xtk_core.jobProgressIndicator_inProgressLabel(),doneLabel:xtk_core.jobProgressIndicator_doneLabel(),doneWarningLabel:xtk_core.jobProgressIndicator_doneWarningLabel(),doneErrorLabel:xtk_core.jobProgressIndicator_doneErrorLabel(),errorLabel:xtk_core.jobProgressIndicator_errorLabel(),cancelLabel:xtk_core.jobProgressIndicator_cancelLabel(),execErrorLabel:xtk_core.jobProgressIndicator_execErrorLabel(),cancelErrorLabel:xtk_core.jobProgressIndicator_cancelErrorLabel(),getStatusErrorLabel:xtk_core.jobProgressIndicator_getStatusErrorLabel(),listSearcheable:!1,listTitle:null},_create:function(){var t=this;this.element.addClass("nlui-jobProgressIndicator"),this._$mainContainer=e("<div></div>").addClass("nl-job-progress-container-main").appendTo(this.element),this._multipleJobs=NL.isArray(this.options.job),this._multipleJobs?NL.Utils.each(this.options.job,function(e,n){t._restartable=t._restartable&&n.settings.restartable,t._restartAfterError=t._restartAfterError&&n.settings.restartAfterError}):(this._restartable=this.options.job.settings.restartable,this._restartAfterError=this.options.job.settings.restartAfterError),this.$_logList=e("<div></div>").addClass("nlui-jobProgressIndicator-logList ui-corner-all").appendTo(this._$mainContainer),this.$_progressBar=e('<div class="nlui-jobProgressIndicator" ></div>').progressbar({roundedCorners:!0,width:"100%",textPosition:"center",color:"blue"}).hide(),this._logData=[],this._logDataSource=new NL.DataSource.Local({data:this._logData}),this.$_logList.nlList({source:this._logDataSource,layoutSize:"large",autoLoad:!1,localStorage:{plugins:!1},title:this.options.listTitle,itemRenderer:function(e,n,r){return t._defaultLogListRender(e,n,r)},search:this.options.listSearcheable,headless:!this.options.listSearcheable&&this.options.listTitle===null,fitToParentHeight:!0}),this.$_progressContainer=e('<div class="nlui-jobprogressindicator-progresscontainer"></div>').css({position:"absolute",left:10,right:10,bottom:0,height:35}).append(this.$_progressBar).appendTo(this._$mainContainer),this.$_progressBar.css("margin-top",(this.$_progressContainer.outerHeight(!0)-this.$_progressBar.find(".nlui-progressbar-container").outerHeight(!0))/2+"px"),this.options.autoStart&&this.start()},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments)},destroy:function(){this.element.remove()},start:function(){var n;this._reset(),n=this._getCurrentJob(),this.rebuildLayout(),this.options.onBeforeStart(),e.isFunction(this.options.beforeStart)&&this.options.beforeStart.call(this),this._executeJob(n)},cancel:function(){var t=this,n=this._getCurrentJob();this._currentlyRunning=!1,n.cancel(function(e,n){n?t._processError(n,t.options.cancelErrorLabel,"CancelError"):t.getStatusAndLogs(e,n,!1)})},getStatusAndLogs:function(e,t,n){var r,i=this,s=!NL.isArray(this.options.job)||this._currentJobIdx===this.options.job.length-1,o=0,u=[],a=0,f=0;t?(this._processError(t,this.options.getStatusErrorLabel,"GetStatusError"),this.options.stopOnJobError||this._startNextJob()):e.getStatus(function(t,l){if(l)i._processError(l,i.options.getStatusErrorLabel,"GetStatusError");else{t.current>i._oldCurrentStep?(i._oldCurrentStep=t.current,i._noProgression=0):i._noProgression++,o=t.status,u=t.logs,a=t.current,f=t.max;if(u.length){for(r=0;r<u.length;r++)i._logData.push(u[r]),Number(u[r].logType)===NL.JobInterface.JOBLOGTYPE_WARNING&&(i._hasWarnings=!0),Number(u[r].logType)===NL.JobInterface.JOBLOGTYPE_ERROR&&(i._hasErrors=!0,s&&(i._lastHasErrors=!0));i.$_logList.nlList("refresh")}if(!e.isDone()){isNaN(a/f)||(NL.isArray(i.options.job)?i.$_progressBar.progressbar({value:a/f*1/i.options.job.length*100+i._currentJobIdx/i.options.job.length*100}):i.$_progressBar.progressbar({value:a/f*100}));var c=Math.round(e.settings.delay+Math.min(Math.max(0,(i._noProgression-2)*2e3),36e5));i.statusTimer=setTimeout(function(){i.getStatusAndLogs(e,l,!1)},c)}else n||e.completed(function(e,t){switch(Number(o)){case NL.JobInterface.JOBSTATUS_CANCELED:i.$_progressBar.progressbar({color:"darkgrey"}),i._canceled(e,t);break;case NL.JobInterface.JOBSTATUS_ERROR:i.$_progressBar.progressbar({color:"red"}),i._error(e,t);break;default:i._hasErrors&&(!s||i._lastHasErrors)?(i.$_progressBar.progressbar({color:"red"}),i._error(e,t)):(i.$_progressBar.progressbar({color:"green"}),i._done(e,t))}})}},n)},_reset:function(){this._currentJobIdx=0,this._hasErrors=!1,this._lastHasErrors=!1,this._hasWarnings=!1,this._currentlyRunning=!1,this._logData.length=0,this.$_logList.nlList("refresh"),this.rebuildLayout(),this.$_progressBar.progressbar({value:0}).show()},_getCurrentJob:function(){return NL.isArray(this.options.job)?this.options.job[this._currentJobIdx]:this.options.job},_startNextJob:function(){NL.isArray(this.options.job)&&this._currentJobIdx<this.options.job.length-1&&(this._currentJobIdx++,this.$_progressBar.progressbar({value:Math.round(100*this._currentJobIdx/this.options.job.length)}),this._executeJob(this._getCurrentJob()))},_executeJob:function(e){var t=this;NL.isArray(this.options.job)&&(this._logData.push({status:NL.JobInterface.JOBSTATUS_NONE,logType:NL.JobInterface.JOBLOGTYPE_CATEGORY,message:e.settings.title?xtk_core.jobProgressIndicator_currentSectionTitle_S(e.settings.title):xtk_core.jobProgressIndicator_currentSectionNoTitle_I(this._currentJobIdx+1)}),this.$_logList.nlList("refresh")),this._currentlyRunning=!0,e.execute(function(e,n){n?t._processError(n,t.options.execErrorLabel,"ExecuteError"):t.getStatusAndLogs(e,n,!1)}),this.options.onStart(e)},_done:function(t,n){var r=this,i=!0;NL.isArray(this.options.job)&&(i=this._currentJobIdx===this.options.job.length-1),i&&(this._currentlyRunning=!1),n?this._processError(n,this.options.getStatusErrorLabel,"GetStatusError"):(this.getStatusAndLogs(t,n,!0),i?(this.$_progressBar.progressbar({value:100}),this._hasErrors?this.$_progressBar.progressbar({color:"red"}):this._hasWarnings?this.$_progressBar.progressbar({color:"orange"}):this.$_progressBar.progressbar({color:"green"}),this.rebuildLayout()):this.$_progressBar.progressbar({value:Math.round(100*(this._currentJobIdx+1)/this.options.job.length)}),this._hasWarnings&&this.options.onWarning(t,n),this.rebuildLayout(),i&&(this.options.onSuccess(t,n),e.isFunction(this.options.done)&&this.options.done.call(this,t,n))),!i&&(!n||!this.options.stopOnJobError)&&this._startNextJob()},_canceled:function(t,n){this._currentlyRunning=!1,n?this._processError(n,this.options.getStatusErrorLabel,"GetStatusError"):(this.getStatusAndLogs(t,n,!0),this.rebuildLayout(),this.options.onCancel(t,n),e.isFunction(this.options.canceled)&&this.options.canceled.call(this,t,n))},_error:function(t,n){var r=this,i=!NL.isArray(this.options.job)||this.options.job.length-1===this._currentJobIdx;if(this.options.stopOnJobError||i)this._currentlyRunning=!1;n?this._processError(n,this.options.getStatusErrorLabel,"GetStatusError"):(this.getStatusAndLogs(t,n,!0),(this.options.stopOnJobError||i)&&this.rebuildLayout(),this.options.onError(t,n),e.isFunction(this.options.error)&&this.options.error.call(this,t,n)),this.options.stopOnJobError||this._startNextJob()},_defaultLogListRender:function(t,n,r){var i=e("<div></div>").addClass("nlui-jobProgressIndicator-log-line"),s,o,u,a="",f="";switch(NL.XTK.parseInt(t.logType,0)){case NL.JobInterface.JOBLOGTYPE_ERROR:a="alert",f="error";break;case NL.JobInterface.JOBLOGTYPE_WARNING:a="notice",f="warning";break;default:a="info",f="info"}return NL.XTK.parseInt(t.logType,0)===NL.JobInterface.JOBLOGTYPE_CATEGORY?(u=e("<div></div>").text(t.message),r.addClass("nlui-list-categoryItem"),i.append(u)):(s=e("<div></div>").addClass("nlui-jobProgressIndicator-log-date").text(NL.View.dateTime(t.logDate,null,"time")||"").prepend(NL.View.genImage("ui-icon-"+a).addClass("nlui-icon-"+f)),o=e("<div></div>").addClass("nlui-jobProgressIndicator-log-message"),t.message&&t.message.match(/---(.*)---/)&&o.addClass("nlui-jobProgressIndicator-log-message-bold"),o.text(t.message),i.append(s),i.append(o)),i},_processError:function(t,n,r){var i,s=!NL.isArray(this.options.job)||this.options.job.length-1===this._currentJobIdx;(this.options.stopOnJobError||s)&&this.rebuildLayout(),i=t,NL.isObject(t)&&(i=t.message),this._logData.push({status:NL.JobInterface.JOBSTATUS_ERROR,logType:NL.JobInterface.JOBLOGTYPE_ERROR,message:i}),this.$_logList.nlList("refresh"),this.options.onError(s,t);if(this.options.stopOnJobError||s)this._currentlyRunning=!1,e("<div></div>").nlMessageBox({type:"error",message:i})},rebuildLayout:function(){var e=this.element.height();this._$mainContainer.height(e),this.$_logList.height(e-this.$_progressContainer.outerHeight()),this.$_logList.nlList("rebuildLayout")}};e.widget("NL.nlJobProgressIndicator",e.NL.nlWidget,r)})(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlMore",e.NL.nlWidget,{options:{minHeight:150,maxHeight:500,value:"",style:"empty"},_collapsed:null,_$container:null,_$textContainer:null,_$moreLinkContainer:null,_$lessLinkContainer:null,_$value:null,_predefinedStyles:{empty:{containerClass:undefined},border:{containerClass:"nlui-more-container-border"}},_linkPaddingTop:5,_create:function(){var t,n,r;t=e(this.element).contents(),t.length>0?this._$value=t:this._$value=e("<div>"+this.options.value+"</div>").contents(),e(this.element).children().remove(),this._$container=e('<div class="nlui-more-container"></div>').appendTo(e(this.element)),r=this._predefinedStyles[this.options.style],r.containerClass!==undefined&&this._$container.addClass(r.containerClass),this._$textContainer=e('<div class="nlui-more-text-container"></div>').appendTo(e(this._$container)),this._$textContainer.append(this._$value),this._$container.css("position","relative"),this.collapse(!0)},destroy:function(){e.remove(this._$container)},rebuildLayout:function(){this._collapsed===!0||this._collapsed===null?this.collapse(!0):this.expand(!0)},_setOption:function(t,n){t==="value"&&this.value(n),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},value:function(t){return t===undefined?this._$value:(this._$value=e("<div>"+t+"</div>").contents(),this._$textContainer.children().remove(),this._$textContainer.contents().remove(),this._$textContainer.append(this._$value),this.rebuildLayout(),this)},collapse:function(t){if(!this._collapsed||t===!0){var n,r,i,s,o,u,a;s=this._$textContainer.height(),s>this.options.minHeight&&(this._$lessLinkContainer!==null&&(this._$lessLinkContainer.remove(),this._$lessLinkContainer=null),this._$moreLinkContainer=e('<div class="nlui-more-link-container"></div>').appendTo(this._$container),i=e('<a class="nlui-more-a-more-link" href="javascript:;"></a>').text(xtk_core.more_moreText()).appendTo(this._$moreLinkContainer),o=i.height(),a=Math.max(Math.floor(this.options.minHeight/o)*o,o),s>a?(this._$textContainer.height(a).css("maxHeight",a+"px").css("overflow-y","hidden").scrollTop(0),u=a+o+this._linkPaddingTop,this._$container.height(u).css("maxHeight",u+"px").css("overflow-y","hidden"),r=Math.max(a,0),i.css("top",r+"px").css("padding-top",this._linkPaddingTop+"px"),n=this,e(".nlui-more-a-more-link",this._$container).on("click",function(e){n.expand(!1)}),this._collapsed=!0):this._$moreLinkContainer.remove())}return this},expand:function(t){if(this._collapsed||t===!0){var n,r,i,s,o;this._$moreLinkContainer!==null&&(this._$moreLinkContainer.remove(),this._$moreLinkContainer=null),this._$lessLinkContainer=e('<div class="nlui-more-link-container"></div>').appendTo(this._$container),s=e('<a class="nlui-more-a-less-link" href="javascript:;"></a>').text(xtk_core.more_lessText()).appendTo(this._$lessLinkContainer),r=Math.min(this._$textContainer[0].scrollHeight,this.options.maxHeight),s.css("top",r+"px").css("padding-top",this._linkPaddingTop+"px"),o=s.height(),i=this.options.maxHeight+o+this._linkPaddingTop,this._$textContainer.height("auto").css("maxHeight",this.options.maxHeight+"px").css("overflow-y","auto").scrollTop(0),this._$textContainer.height()<this._$textContainer[0].scrollHeight&&(this._$textContainer[0].scrollHeight<this.options.maxHeight?this._$textContainer.height(this._$textContainer[0].scrollHeight):this._$textContainer.height(this.options.maxHeight)),this._$textContainer[0].scrollHeight>this.options.maxHeight?this._$container.height(i).css("maxHeight",i+"px"):(i=this._$textContainer[0].scrollHeight+o+this._linkPaddingTop,this._$container.height(i).css("maxHeight",i+"px")),s.css("top",Math.min(this._$textContainer.height(),this.options.maxHeight)+"px"),n=this,s.on("click",function(e){n.collapse(!1)}),this._collapsed=!1}return this}})})(jQuery)
;"use strict";function getWindowWidth(){var e;return window.innerWidth?e=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?e=document.documentElement.clientWidth:document.body&&(e=document.body.clientWidth),e}function NotSavedReport(e,t,n,r){NL.session.serverURL=t,this.strXmlExecContext=r,this.strXmlDefinition=e,document.getElementById("report-exporter").entity.value=e,document.getElementById("report-exporter").xmlContext.value=r,this.dialog=new HtmlDialog(xtk_report.report_saveDialogTitle(),xtk_report.report_saveDialogSave(),this,!0),this.dialog.buttonOk.style.width="auto",this.dialog.setSize("35em"),this.dialog.setLoading(!1),this.strSaveDialogId=n;var i=document.createElement("table");i.style.width="100%",i.className="saveDialog",this.dialog.addContent(i);var s=i.appendChild(document.createElement("tbody")),o=s.appendChild(document.createElement("tr")),u=o.appendChild(document.createElement("td")),a=u.appendChild(document.createElement("label"));a.appendChild(document.createTextNode(xtk_report.report_saveDialogLabel())),u=o.appendChild(document.createElement("td"));var f=u.appendChild(document.createElement("input"));u.style.width="100%",f.style.width="95%",f.type="text",a.htmlFor=f.id="saveDialog_analysisLabel",o=s.appendChild(document.createElement("tr")),u=o.appendChild(document.createElement("td")),u.colSpan="2",f=document.createElement("input"),f.setAttribute("type","checkbox"),u.appendChild(f),f.checked=!0,a=u.appendChild(document.createElement("label")),a.appendChild(document.createTextNode(xtk_report.report_saveDialogData())),a.htmlFor=f.id="saveDialog_saveData",a.className="checkbox",o=s.appendChild(document.createElement("tr")),u=o.appendChild(document.createElement("td")),u.colSpan="2",f=document.createElement("input"),f.setAttribute("type","checkbox"),u.appendChild(f),f.checked=!0,a=u.appendChild(document.createElement("label")),a.appendChild(document.createTextNode(xtk_report.report_saveDialogShare())),a.htmlFor=f.id="saveDialog_share",a.className="checkbox"}function resizeFrame(){if(g_activeFrame){var e=g_activeFrame.offsetTop,t=g_activeFrame.offsetParent;while(t!==null){e+=t.offsetTop;if(t===t.offsetParent)break;t=t.offsetParent}e+=6}}function setActiveFrame(e){g_activeFrame=e,resizeFrame()}function ReportPrinter(){this.tmrLoad=new NL.XtkTimer(this,500,100),this.tmrLoad.start()}function createReportLink(e,t,n,r){var i=r.newWindow,s=document.createElement("a"),o=e.getAttribute("targetReportName");if(o===null||o==="")o=e.getAttribute("internalName");var u=e.getAttribute("label");if(n!==null)return s.href=n.web,s;var a="";i?isNeolaneConsole()?a="xtk://report/?name="+o+"&label="+NL.JS.escape(u)+"&":a="/report/"+o+"?":a="/report/"+o+"?";if(t!==null)for(var f=0;f<t.length;f++)t[f].name==="selection"?a+="_selection="+t[f].value+"&_selectionCount="+String(t[f].value).split(/,/).length:t[f].name==="context"?a+="_context="+t[f].value+"|"+e.getAttribute("internalName"):t[f].name!=="filter"&&(a+="_"+t[f].name+"="+t[f].value),f<t.length-1&&t[f+1].name!=="filter"&&(a+="&");u&&u!==""&&(a+="&_reportLabel="+encodeURIComponent(u));var l="";return typeof r.formPostName=="string"&&(l=', "'+r.formPostName+'"'),a=addSecurityToken(a,document.__securitytoken,!0),i?s.href=a:s.href='javascript:switchToReportView("'+o+'", "'+a.replace(/"/g,'\\"').replace(/%/g,"%25")+'&_decorate=0&standalone=1&_className=inConsole"'+l+")",s}function reportListRenderer(e,t){function n(e,n){var r=document.createElement("td");r.style.paddingBottom="4px";var i=elementValue(firstChildElement(e)),s=typeof i!="undefined"&&i!=="",u=2,a="middle";s===!1&&(u=1,a="middle");var f=r.appendChild(document.createElement("table"));f.cellPadding="0",f.cellSpacing="0",f=f.appendChild(document.createElement("tbody"));var l=document.createElement("tr"),c=e.getAttribute("img");if(c!==""){var h=document.createElement("td");h.vAlign="top";var p=createReportLink(e,t.options.fonctionParams,n,t.options.extraRenderFnParameter);h.appendChild(p),o=p.appendChild(document.createElement("img")),o.border=0,o.style.verticalAlign="middle",o.style.marginRight="4px",o.src="/"+c.replace(/:/,"/img/"),h.rowspan=u,l.appendChild(h)}var d=l.appendChild(document.createElement("td"));d.vAlign=a;var p=createReportLink(e,t.options.fonctionParams,n,t.options.extraRenderFnParameter);p.appendChild(document.createTextNode(e.getAttribute("label"))),d.appendChild(p),f.appendChild(l);if(s){var v=f.appendChild(document.createElement("tr"));v.appendChild(document.createElement("td")),v=v.appendChild(document.createElement("td")),v.vAlign="top",v.appendChild(document.createTextNode(i))}return r}var r=document.createElement("table");r.className="col",r.style.marginTop="0px",t.options.extraRenderFnParameter.marginLeft&&(r.style.marginLeft=t.options.extraRenderFnParameter.marginLeft),r.cellPadding="0",r.cellSpacing="0",r.width="100%";var i=r.appendChild(document.createElement("tbody"));if(e.childNodes.length>5&&t.options.extraRenderFnParameter.sysFilter===""||t.options.fonctionParams[4].value!==""&&t.options.extraRenderFnParameter.sysFilter!==t.options.fonctionParams[4].value){var s=document.getElementById("contentTab");s?s.innerHTML="":(s=i.appendChild(document.createElement("tr")).appendChild(document.createElement("td")),s.style.verticalAlign="middle");var o=s.appendChild(document.createElement("img"));o.src="/xtk/img/filter.png",o.style.verticalAlign="top";var u=s.appendChild(document.createElement("span"));t.options.extraRenderFnParameter.initialMode!=="summary"&&(u.style.fontSize="8.5pt",u.style.color="#333333",u.style.verticalAlign="top"),u.appendChild(document.createTextNode("\u00a0"+xtk_report.find()+"\u00a0")),s.appendChild(document.createTextNode(" "));var a=s.appendChild(document.createElement("input"));a.type="text",a.name="reportFilter",a.id="reportFilter",a.style.marginRight="8px",t.options.extraRenderFnParameter.initialMode!=="summary"&&(a.style.height="10px"),a.onkeypress=function(e){var n=this.value;return onEnterPressed(e,function(){return t.options.extraRenderFnParameter.oldValue=n,t.options.fonctionParams[4].value="Upper(@label) LIKE '%' + upper('"+n.replace(/'/g,"\\'")+"')+ '%'",t.load()})},typeof t.options.extraRenderFnParameter.oldValue=="undefined"&&(t.options.extraRenderFnParameter.oldValue=""),a.value=t.options.extraRenderFnParameter.oldValue,a.style.verticalAlign="middle",a.style.fontSize="8.5pt"}else if(e.childNodes.length<=5&&t.options.fonctionParams[4].value===""){var f=document.getElementById("contentTools");f&&(f.style.display="none")}var l=document.createElement("tr"),c=0,h="",p=firstChildElement(e);if(p===null){var d=l.appendChild(document.createElement("td"));d.appendChild(document.createTextNode(xtk_report.report_noData())),i.appendChild(l)}else while(p){if(t.options.extraRenderFnParameter.mode!=="summary"&&p.getAttribute("category")!==h){h=p.getAttribute("category");var v=i.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));v.colspan=2,v.style.color="#125886",v.style.fontSize="1em",v.style.fontWeight="bold",v.style.paddingBottom="8px",v.appendChild(document.createTextNode(h));var o=v.appendChild(document.createElement("img"));o.src="/nl/img/gradientLine.png",o.style.display="block"}l.appendChild(n(p,null)),i.appendChild(l),p=nextSiblingElement(p),l=document.createElement("tr")}return r}function ReportLoaded(e,t,n,r,i){t||(t=0);if(e.substr(0,9)==="__PRINT__"){var s=new ReportPrinter;return}if(typeof i!="undefined"&&i!==null){ReportViewer.strReportName=i;if(document.controller&&document.controller.ctx){ReportViewer.displayContext=getXPathValue(document.controller.ctx,"/ctx/@_context"),ReportViewer.displayContext||(ReportViewer.displayContext="global"),ReportViewer.reportContext=ReportViewer.displayContext+"|",ReportViewer.selection=getXPathValue(document.controller.ctx,"/ctx/@_selection");var o=getXPathValue(document.controller.ctx,"/ctx/@_reportContext");if(o===null||o==="")o=i;ReportViewer.reportContext+=o,g_notSavedReport===null&&ReportViewer.GetHistoryList()}}var u=!1;try{u=typeof parent.document!="undefined"}catch(a){}if(e!==""&&u&&parent.document.getElementById(e)&&parent.document.getElementById(e).reportViewer){var f=parent.document.getElementById(e).reportViewer;t===""?f.iReportHistoryId=0:f.iReportHistoryId=parseInt(t,10),f.bExportable=n,f.strLabel=r;var l=f.strReportPublisherId,c=parent.document.getElementById(l).reportPublisher;typeof c!="undefined"&&c!==null&&c.UpdateToolbar(),f.GetHistory(),c=null,f=null,typeof i!="undefined"&&parent.document.getElementById("reportList_reportPublisher_td")&&(parent.document.getElementById("reportList_reportPublisher_td").style.height=document.body.clientHeight+20+"px"),l=""}}function findInIFrameOrParent(e){var t=$(e);if(t.length===0){var n=window.parent.jQuery;n!==undefined&&(t=n(e))}return t}function switchToReportsView(){var e=findInIFrameOrParent("#sectionHeader");if(e.length===0)showHideReport("",!1);else{var t=e.nlDashboardSection("navigationBar");t.nlViewBar("triggerView","report")}}function switchToReportView(e,t,n){var r=findInIFrameOrParent("#sectionHeader");if(r.length===0)showHideReport(t,!0,n);else{var i=r.nlDashboardSection("option","controller"),s=r.nlDashboardSection("navigationBar"),o="_report_"+e,u=i.getViewConfiguration(o);if(NL.isEmpty(u)){var a=r.find("#reportSection"),f=r.find("#reportDetail");u={type:"code",name:o,onDisplay:function(){showHideReport(t,!0,n),resizeReportIframeToUsableHeight(),$(window).bind("resize",function(){resizeReportIframeToUsableHeight()})},onHide:function(){showHideReport("",!1),$(window).unbind("resize")}},i.registerView(o,u)}s.nlViewBar("triggerView",o)}}function resizeReportIframeToUsableHeight(){var e=getUsableVerticalSpace(30);$("#reportIFrame").height(Math.max(300,e))}function showHideReport(e,t,n){var r=document.getElementById("reportList");r===null&&(r=parent.document.getElementById("reportList"));var i=document.getElementById("reportDetail");i===null&&(i=parent.document.getElementById("reportDetail"));var s=document.getElementById("reportIFrame");s===null&&(s=parent.document.getElementById("reportIFrame"));var o=document.getElementById("reportLoading");o===null&&(o=parent.document.getElementById("reportLoading"));if(r&&i&&s)if(t){o&&(o.style.display="block"),e+="&__securitytoken="+document.__securitytoken;if(n&&n!==""){var u=document.getElementById(n);u.action=e,u.submit()}else frames.reportIFrame.location.replace(e);i.style.display="block",r.style.display="none",o&&(o.style.display="none")}else o&&(o.style.display="none"),r.style.display="block",i.style.display="none",s.src="/xtk/jsp/preload.htm",s.height="100px"}function resizeParentFrame(){if(parent&&parent.document&&window.name!==""){var e=parent.document.getElementById(window.name);e&&document.body.scrollHeight>100&&(e.height=document.body.scrollHeight+10+"px")}}var g_notSavedReport=null;NotSavedReport.prototype.appendExtensionSchemas=function(e,t){if(this.strXmlExecContext!==""){var n=parseXMLString(this.strXmlExecContext),r=findChildElement(firstChildElement(n),"extensions");if(r){var i=n.createElement(t);e.appendChild(i);var s=firstChildElement(r);while(s!==null)i.appendChild(s),s=nextSiblingElement(s)}}},NotSavedReport.prototype.onValidDialog=function(){jQuery.support.cors=!0,this.dialog.buttonOk.disabled=!0,this.dialog.setLoading(!0),this.strAnalysisLabel=document.getElementById("saveDialog_analysisLabel").value,this.bSaveData=document.getElementById("saveDialog_saveData").checked,this.bShared=document.getElementById("saveDialog_share").checked;var e=new NL.transport.SOAP({urn:"xtk:folder",method:"FindFirstAuthorized"});e.writeString("folderFilter","@model = 'xtkReport'"),e.writeBoolean("writeAccess",!1),e.writeInt("orgUnit",0);var t=this;return e.start({onSuccess:function(e){t.onSoapRequestCompleted(e,null)},onError:function(e){t.handleError("xtk:folder:FindFirstAuthorized",e)}}),!1},NotSavedReport.prototype.Export=function(e){var t=document.getElementById("report-exporter");t.format.value=e,t.submit()},NotSavedReport.prototype.Save=function(){this.dialog.show()},NotSavedReport.prototype.handleError=function(e,t){this.dialog.setLoading(!0),this.dialog.show(!1),$("<div></div>").nlMessageBox({type:"error",message:t.message,details:"In method "+e+" : "+t.details})},NotSavedReport.prototype.onSoapRequestCompleted=function(e){if(e.getMethodName()==="FindFirstAuthorized"){var t=e.getNextElement();e.checkNoMoreArgs();if(t===null)this.dialog.setLoading(!0),this.dialog.show(!1),$("<div></div>").nlMessageBox({type:"error",message:xtk_report.report_err_no_folder()});else{t.getAttribute("fullName"),this.strFolderId=t.getAttribute("id");var n=new NL.transport.SOAP({urn:"xtk:counter",method:"IncreaseValue"});n.writeString("name","xtkReport");var r=this;n.start({onSuccess:function(e){r.onSoapRequestCompleted(e,null)},onError:function(e){r.handleError("xtk:counter:IncreaseValue",e)}})}}else if(e.getMethodName()==="IncreaseValue"){var i="RPT"+e.getNextInt();e.checkNoMoreArgs();var s=parseXMLString(this.strXmlDefinition),o=s.firstChild;o.setAttribute("folder-id",this.strFolderId),o.setAttribute("folderProcess-id",this.strFolderId),o.setAttribute("internalName",i),o.removeAttribute("id"),o.setAttribute("appState",5),o.setAttribute("label",this.strAnalysisLabel),this.bShared?o.setAttribute("shared","true"):o.setAttribute("shared","false"),this.strReportName=o.getAttribute("internalName"),this.appendExtensionSchemas(o,"schemasExtension");var u=findElement(o,"activities/page/analysis/data");if(u!==null){var a=findChildElement(u,"sysFilter");a!==null&&u.removeChild(a)}var f=parseXMLString(this.strXmlDefinition),l=new NL.transport.SOAP({urn:"xtk:persist",method:"Write"});l.writeDocument("doc",o);var r=this;l.start({onSuccess:function(e){r.onSoapRequestCompleted(e)},onError:function(e){r.handleError("xtk:persist:Write",e)}})}else if(e.getMethodName()==="Write"){e.checkNoMoreArgs();if(this.bSaveData){var c=new NL.transport.SOAP({urn:"xtk:report",method:"Publish"});c.writeDocument("where",parseXMLString("<where><condition expr=\"@internalName='"+this.strReportName+"'\"/></where>"));var r=this;c.start({onSuccess:function(e){r.onSoapRequestCompleted(e,null)},onError:function(e){r.handleError("xtk:report:Publish",e)}})}else this.dialog.setLoading(!1),this.dialog.show(!1),this.dialog.buttonOk.disabled=!1}else if(e.getMethodName()==="Publish"){e.checkNoMoreArgs();var h=document.controller.ctx.firstChild;h.setAttribute("_context","selection");var p=findChildElement(h,"tmp");p!==null&&h.removeChild(p),this.appendExtensionSchemas(h,"_extension");var d=new NL.transport.SOAP({urn:"xtk:report",method:"Save"});d.writeDocument("data",h),d.writeString("reportName",this.strReportName);var r=this;d.start({onSuccess:function(e){r.onSoapRequestCompleted(e,null)},onError:function(e){r.handleError("xtk:report:Save",e)}})}else{var t=e.getNextElement(),v=t.getAttribute("created"),m=t.getAttribute("id");e.checkNoMoreArgs(),this.dialog.setLoading(!1),this.dialog.show(!1),this.dialog.buttonOk.disabled=!1}};var g_activeFrame=null;ReportPrinter.prototype.onTimer=function(e){e.stop(),e=null,this.tmrLoad=null,window.print()};var ReportViewer={Print:function(e){window.print()},Export:function(e,t,n,r,i,s){if(g_notSavedReport!==null)g_notSavedReport.Export(e);else{var o="D-"+(new Date).getTime()+"-"+Math.round(Math.random()*100),u=document.createElement("form");!r&&typeof n=="undefined"&&(n=document.controller),r||setXPathValue(n.ctx,"ctx/@_format",e),r?(ReportViewer.AddInputValue(u,"isAdHoc","1"),ReportViewer.AddInputValue(u,"xmlContext",i.toString())):ReportViewer.AddInputValue(u,"xmlContext",toXMLString(n.ctx)),ReportViewer.AddInputValue(u,"name",NL.String.toIdentifier(t)),ReportViewer.AddInputValue(u,"originUrl",window.location.href),ReportViewer.AddInputValue(u,"format",e),ReportViewer.AddInputValue(u,"downloadCookieToken",o),ReportViewer.AddInputValue(u,"__securitytoken",document.__securitytoken),u.method="POST",u.action="/xtk/jsp/exportReport.jsp",document.body.appendChild(u);var a;document.getElementById("exportReportFrm")||(isIE()&&getIEVersion()<9&&document.documentMode<9?a=document.createElement("<iframe scrolling='yes' name='exportReportFrm' src='about:blank'></iframe>"):(a=document.createElement("iframe"),a.name="exportReportFrm",a.src="about:blank"),a.style.display="none",a.id="exportReportFrm",document.body.appendChild(a),a.onload=function(){$("<div></div>").nlMessageBox({type:"error",message:xtk_report.err_export(),details:NL.String.trim($(a).contents().find("#errorMsg").text())}),s&&s();var e=new NL.Cookie("downloadToken");e.erase(),window.clearInterval(f)});var f=window.setInterval(function(){var e=new NL.Cookie("downloadToken"),t=e.getValue();t===o&&(s&&s(),e.erase(),window.clearInterval(f))},1e3);u.target="exportReportFrm",u.submit()}},AddInputValue:function(e,t,n){var r=document.createElement("input");r.type="hidden",r.name=t,r.value=n,e&&e.appendChild(r)},Save:function(e,t,n){try{if(!confirm(xtk_report.confirmSaving()))return!1;var r=!0;typeof n=="undefined"&&(n=document.controller,r=!1),typeof t=="undefined"&&(t=window.location.protocol+"//"+r_windowLocation);var i=n.ctx.firstChild,s=findChildElement(i,"tmp");s!==null&&i.removeChild(s);var o=new NL.transport.SOAP({urn:"xtk:report",method:"Save"});o.writeDocument("data",i),o.writeString("reportName",e),o.start({async:!1});var u=o.getNextElement(),a=u.getAttribute("created"),f=u.getAttribute("id");return o.checkNoMoreArgs(),r===!1&&ReportViewer.GetHistoryList(),{date:a,id:f}}catch(l){return $("<div></div>").nlMessageBox({type:"error",message:xtk_report.save()}),!1}},ShowHideHistory:function(e,t){var n=document.getElementById("xtk_report_historyList");if(n.style.display==="block")n.style.display="none";else{var r=e.firstChild;while(r&&r.nodeName.toLowerCase()!=="a")r=r.nextSibling;var i=HTMLHelper.getAbsolutePosition(r);n.style.top=i.y+r.offsetHeight+"px";var s=document.body!==null?parseInt(document.body.scrollLeft,10):0,o=document.documentElement!==null?parseInt(document.documentElement.scrollLeft,10):0;isNaN(s)&&(s=0),isNaN(o)&&(o=0);var u=s>o?s:o;n.leftProp=i.x+r.offsetWidth-u,ReportViewer.GetHistoryList(ReportViewer.selection)}},GetHistoryList:function(){var e={schema:"xtk:reportHistory",select:{node:[{expr:"@id"},{expr:"@created"}]},where:{condition:[{expr:"@context = "+NL.XTK.toXTKString(ReportViewer.reportContext)},{expr:"@reportName = "+NL.XTK.toXTKString(ReportViewer.strReportName)},{expr:"(@entitySchema IS NULL or @entitySchema NOT LIKE 'xtk:report|' + '%')"}]},orderBy:[{expr:"@created",sortDesc:!0}]};ReportViewer.selection&&e.where.condition.push({expr:"[@selection] = "+NL.XTK.toXTKString(ReportViewer.selection)});var t=new NL.DataSource.QueryDef(e),n=t.get({success:ReportViewer.onGetHistoryListCompleted,error:function(e){e.type="error",$("<div></div>").nlMessageBox(e)}})},onGetHistoryListCompleted:function(e){var t=document.getElementById("xtk_report_historyList");if(!t)return;var n=t.getElementsByTagName("ul")[0];n.innerHTML="";var r=document.getElementById("xtk_report_historyBtn");if(!e||!$.isArray(e.data)){r&&(r.style.display="none");return}r&&(r.style.display="");var i=window.location.search;if(typeof i!="string"||i==="null")i="";var s="",o=i.split("&"),u="",a;for(a=0;a<o.length;a++){var f=o[a];if(f.indexOf("_decorate=")!==-1||f.indexOf("_className=")!==-1||f.indexOf("standalone=")!==-1)s+="&"+f;f.indexOf("_currentUrl=")!=-1&&(u=decodeURIComponent(f.substring(f.indexOf("_currentUrl=")+12)))}var l=getXPathValue(document.controller.ctx,"/ctx/@_historyId");if(l){var c=document.createElement("li"),h=c.appendChild(document.createElement("a"));h.appendChild(document.createTextNode(xtk_report.report_closeHistory())),h.href=u,n.appendChild(c)}else u=window.location.href;NL.Utils.each(e.data,function(e,t){var r=document.createElement("li"),i=r.appendChild(document.createElement("a"));i.appendChild(document.createTextNode(NL.View.dateTime(t.created,null)));var o=t.id;i.href="/report/"+ReportViewer.strReportName+"?_version="+o+s+"&_currentUrl="+encodeURIComponent(u)+"&__securitytoken="+document.__securitytoken,o===l&&(i.style.fontWeight="bold"),n.appendChild(r)}),t.leftProp&&(t.style.display="block",t.style.left=t.leftProp-t.offsetWidth+"px")}}
;"use strict";function AjaxHelper(e,t){this.options=e,this.options.url==null&&(this.options.url=window.location.protocol+"//"+r_windowLocation+"/nl/jsp/soaprouter.jsp"),this.options.async==null&&(this.options.async=!0),this.strParentId=t}AjaxHelper.prototype.load=function(){var e=document.getElementById(this.strParentId);if(e!=null){var t={lines:12,length:7,width:6,radius:10,color:"#8CAAE6",speed:1,trail:100,shadow:!1};e.innerHTML="<"+e.tagName+"/>";var n=document.createElement("div");n.className="loading",n.style.width="48px",n.style.height="48px";var r=new Spinner(t);e.appendChild(n),r.spin(n)}var i=new NL.transport.SOAP({urn:this.options.urn,method:this.options.method,url:this.options.url}),s=[];s.boolean=function(e,t){i.writeBoolean(e,t)},s.byte=function(e,t){i.writeByte(e,t)},s.document=function(e,t){i.writeDocument(e,t)},s.double=function(e,t){i.writeDouble(e,t)},s.element=function(e,t){i.writeElement(e,t)},s.float=function(e,t){i.writeFloat(e,t)},s.int=function(e,t){i.writeInt(e,t)},s.short=function(e,t){i.writeShort(e,t)},s.string=function(e,t){i.writeString(e,t)};for(var o=0;o<this.options.fonctionParams.length;o++){var u=this.options.fonctionParams[o];s[u.type](u.name,u.value)}if(this.options.async){var a=this;i.start({onSuccess:function(e){a.onSoapRequestCompleted(e,null)},onError:function(e){a.onSoapRequestCompleted(null,e)}})}else i.execute(this.options.url),this.onSoapRequestCompleted(i,null)},AjaxHelper.prototype.onSoapRequestCompleted=function(e,t){if(t!==null&&t!=="undefined"){$("<div></div>").nlMessageBox({type:"error",message:t.message,details:t.details});return}var n=e._currentResponseElement!=null?e.getNextElement():null;e.checkNoMoreArgs();if(this.strParentId!=null&&this.options.renderFunction){var r=document.getElementById(this.strParentId);r!=null?(r.innerHTML="<"+r.tagName+"/>",r.appendChild(this.options.renderFunction(n,this))):alert(xtk_core.ajaxhelper_norendering(this.strParentId))}else this.options.renderFunction&&this.options.renderFunction(n,this)}
;if(typeof dd_domreadycheck=="undefined")var dd_domreadycheck=!1;var ddlevelsmenu={enableshim:!0,arrowpointers:{downarrow:["",16,16],rightarrow:["",16,16],showarrow:{toplevel:!0,sublevel:!0}},hideinterval:500,effects:{enableswipe:!1,enablefade:!1,duration:300},httpsiframesrc:"/xtk/jsp/blank.htm",topmenuids:[],topitems:{},subuls:{},lastactivesubul:{},topitemsindex:-1,ulindex:-1,hidetimers:{},shimadded:!1,nonFF:!/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent),getoffset:function(e,t){return e.offsetParent?e[t]+this.getoffset(e.offsetParent,t):e[t]},getoffsetof:function(e){e._offsets={left:this.getoffset(e,"offsetLeft"),top:this.getoffset(e,"offsetTop")}},getwindowsize:function(){this.docwidth=window.innerWidth?window.innerWidth-10:this.standardbody.clientWidth-10,this.docheight=window.innerHeight?window.innerHeight-15:this.standardbody.clientHeight-18,document.body.clientHeight>this.docheight&&(this.docheight=document.body.clientHeight-18)},isContained:function(e,t){t=window.event||t;var n=t.relatedTarget||(t.type=="mouseover"?t.fromElement:t.toElement);while(n&&n!=e)try{n=n.parentNode}catch(r){n=e}return n==e?!0:!1},addpointer:function(e,t,n,r){var i=document.createElement("img")},css:function(e,t,n){var r=new RegExp("(^|\\s+)"+t+"($|\\s+)","ig");return n=="check"?r.test(e.className):(n=="remove"?e.className=e.className.replace(r,""):n=="add"&&!r.test(e.className)&&(e.className+=" "+t),!1)},addshimmy:function(e){var t=window.opera?document.createElement("div"):document.createElement("iframe");t.className="ddiframeshim",t.setAttribute("src",location.protocol=="https:"?this.httpsiframesrc:"about:blank"),t.setAttribute("frameborder","0"),e.appendChild(t);try{t.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)"}catch(n){}return t},positionshim:function(e,t,n,r,i){if(e._istoplevel){var s=window.pageYOffset?window.pageYOffset:this.standardbody.scrollTop,o=e._offsets.top-s,u=s+this.docheight-e._offsets.top-e.offsetHeight;o>0&&(this.shimmy.topshim.style.left=r+"px",this.shimmy.topshim.style.top=s+"px",this.shimmy.topshim.style.width="99%",this.shimmy.topshim.style.height=o+"px"),u>0&&(this.shimmy.bottomshim.style.left=r+"px",this.shimmy.bottomshim.style.top=e._offsets.top+e.offsetHeight+"px",this.shimmy.bottomshim.style.width="99%",this.shimmy.bottomshim.style.height=u+"px")}},hideshim:function(){this.shimmy.topshim.style.width=this.shimmy.bottomshim.style.width=0,this.shimmy.topshim.style.height=this.shimmy.bottomshim.style.height=0},buildmenu:function(e,t,n,r,i,s){t._master=e,t._pos=r,t._istoplevel=i,i&&this.addEvent(t,function(e){},"click"),this.subuls[e][r]=n,this.getoffsetof(t),n.style.left=0,n.style.top=0,n.style.visibility="hidden";var o="mouseover";i&&this.useClick&&(o="click"),this.addEvent(t,function(e){if(!ddlevelsmenu.isContained(this,e)){var n=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];this._istoplevel&&(ddlevelsmenu.css(this,"selected","add"),clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])),ddlevelsmenu.getoffsetof(t);var r=window.pageXOffset?window.pageXOffset:ddlevelsmenu.standardbody.scrollLeft,i=window.pageYOffset?window.pageYOffset:ddlevelsmenu.standardbody.scrollTop,o=this._offsets.left+n.offsetWidth+(this._istoplevel&&s=="topbar"?0:this.offsetWidth),u=this._offsets.top+n.offsetHeight,a=this._istoplevel?this._offsets.left+(s=="sidebar"?this.offsetWidth:0):this.offsetWidth;o-r>ddlevelsmenu.docwidth&&(a+=-n.offsetWidth+(this._istoplevel&&s=="topbar"?this.offsetWidth:-this.offsetWidth)),n.style.left=a+"px";var f=(this._istoplevel?this._offsets.top+(s=="sidebar"?0:this.offsetHeight):this.offsetTop)-1;u-i>ddlevelsmenu.docheight&&(n.offsetHeight<this._offsets.top+(s=="sidebar"?this.offsetHeight:0)-i?f+=-n.offsetHeight+(this._istoplevel&&s=="topbar"?-this.offsetHeight:this.offsetHeight)+1:f+=-(this._offsets.top-i)+(this._istoplevel&&s=="topbar"?-this.offsetHeight:0)),n.style.top=f+"px",ddlevelsmenu.enableshim&&(ddlevelsmenu.effects.enableswipe==0||ddlevelsmenu.nonFF)?ddlevelsmenu.positionshim(t,n,s,r,i):n.FFscrollInfo={x:r,y:i},ddlevelsmenu.showmenu(t,n,s)}},o),this.addEvent(t,function(e){var t=ddlevelsmenu.subuls[this._master][parseInt(this._pos)];this._istoplevel?!ddlevelsmenu.isContained(this,e)&&!ddlevelsmenu.isContained(t,e)&&ddlevelsmenu.hidemenu(t):!this._istoplevel&&!ddlevelsmenu.isContained(this,e)&&ddlevelsmenu.hidemenu(t)},"mouseout")},setopacity:function(e,t){e.style.opacity=t,typeof e.style.opacity!="string"&&(e.style.MozOpacity=t,e.filters&&(e.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+t*100+")"))},showmenu:function(e,t,n){if(this.effects.enableswipe||this.effects.enablefade){if(this.effects.enableswipe){var r=e._istoplevel&&n=="topbar"?t.offsetHeight:t.offsetWidth;t.style.width=t.style.height=0,t.style.overflow="hidden"}this.effects.enablefade&&this.setopacity(t,0),t._curanimatedegree=0,t.style.visibility="visible",clearInterval(t._animatetimer),t._starttime=(new Date).getTime(),t._animatetimer=setInterval(function(){ddlevelsmenu.revealmenu(e,t,r,n)},10)}else t.style.visibility="visible"},revealmenu:function(e,t,n,r){var i=(new Date).getTime()-t._starttime;i<this.effects.duration?(this.effects.enableswipe&&(t._curanimatedegree==0&&(t.style[e._istoplevel&&r=="topbar"?"width":"height"]="auto"),t.style[e._istoplevel&&r=="topbar"?"height":"width"]=t._curanimatedegree*n+"px"),this.effects.enablefade&&this.setopacity(t,t._curanimatedegree)):(clearInterval(t._animatetimer),this.effects.enableswipe&&(t.style.width="auto",t.style.height="auto",t.style.overflow="visible"),this.effects.enablefade&&(this.setopacity(t,1),t.style.filter=""),this.enableshim&&t.FFscrollInfo&&this.positionshim(e,t,r,t.FFscrollInfo.x,t.FFscrollInfo.y)),t._curanimatedegree=(1-Math.cos(i/this.effects.duration*Math.PI))/2},hidemenu:function(e){typeof e._pos!="undefined"&&(this.css(this.topitems[e._master][parseInt(e._pos)],"selected","remove"),this.enableshim&&this.hideshim()),clearInterval(e._animatetimer),e.style.left=0,e.style.top="-1000px",e.style.visibility="hidden"},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){return t.call(e,window.event)})},domready:function(e){if(dd_domreadycheck){e();return}document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e(),dd_domreadycheck=!0},!1):document.attachEvent&&document.documentElement.doScroll&&window==window.top&&function(){if(dd_domreadycheck){e();return}try{document.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,0);return}e(),dd_domreadycheck=!0}(),document.attachEvent&&parent.length>0&&this.addEvent(window,function(){e()},"load")},init:function(e,t,n){this.useClick=n,this.standardbody=document.compatMode=="CSS1Compat"?document.documentElement:document.body,this.topitemsindex=-1,this.ulindex=-1,this.topmenuids.push(e),this.topitems[e]=[],this.subuls[e]=[],this.hidetimers[e]=[],this.enableshim&&!this.shimadded&&(this.shimmy={},this.shimmy.topshim=this.addshimmy(document.body),this.shimmy.bottomshim=this.addshimmy(document.body),this.shimadded=!0);var r=document.getElementById(e),i=r.getElementsByTagName("a");this.getwindowsize();for(var s=0;s<i.length;s++)if(i[s].getAttribute("rel")){this.topitemsindex++,this.ulindex++;var o=i[s];this.topitems[e][this.topitemsindex]=o;var u=document.getElementById(o.getAttribute("rel"));document.body.appendChild(u),u.style.zIndex=2e3,u._master=e,u._pos=this.topitemsindex,this.addEvent(u,function(){ddlevelsmenu.hidemenu(this)},"click");var a=t=="sidebar"?"rightarrowpointer":"downarrowpointer",f=t=="sidebar"?this.arrowpointers.rightarrow:this.arrowpointers.downarrow;this.arrowpointers.showarrow.toplevel&&this.addpointer(o,a,f,t=="sidebar"?"before":"after"),this.buildmenu(e,o,u,this.ulindex,!0,t),u.onmouseover=function(){clearTimeout(ddlevelsmenu.hidetimers[this._master][this._pos])},this.addEvent(u,function(e){if(!ddlevelsmenu.isContained(this,e)&&!ddlevelsmenu.isContained(ddlevelsmenu.topitems[this._master][parseInt(this._pos)],e)){var t=this;ddlevelsmenu.enableshim&&ddlevelsmenu.hideshim(),ddlevelsmenu.hidetimers[this._master][this._pos]=setTimeout(function(){ddlevelsmenu.hidemenu(t)},ddlevelsmenu.hideinterval)}},"mouseout");var l=u.getElementsByTagName("ul");for(var c=0;c<l.length;c++){this.ulindex++;var h=l[c].parentNode;this.arrowpointers.showarrow.sublevel&&this.addpointer(h.getElementsByTagName("a")[0],"rightarrowpointer",this.arrowpointers.rightarrow,"before"),this.buildmenu(e,h,l[c],this.ulindex,!1,t)}}this.addEvent(window,function(){ddlevelsmenu.getwindowsize()},"resize")},setup:function(e,t,n){this.domready(function(){ddlevelsmenu.init(e,t,n)})}}
;"use strict";(function(e){e.widget("NL.nlFormNavController",e.NL.nlWidget,{options:{controller:undefined,forms:[],value:0,transition:undefined},oldValue:-1,oldForm:undefined,_create:function(){var t=this;this.options.transition||(this.options.transition=this._transition),e.each(this.options.forms,function(e,n){NL.assert(t.options.controller===n.nlForm("controller")),e===t.options.value?n.show():n.hide()}),this._refreshValue()},value:function(e){return e===undefined?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){t==="value"&&(this.options.value=n,this._refreshValue(!0)),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return e},_transition:function(e,t,n){e&&e.hide(),t.show()},_refreshValue:function(e){e===undefined&&(e=!1);var t=this.value();if(t===this.oldValue)return;var n=e||this._canNavigate();if(n){var r;this.oldForm!==undefined&&(r=this.oldForm.nlForm("controller").getModel());var i=this.oldForm;this.oldForm=this.options.forms[t],r!==undefined&&this.oldForm.nlForm("controller").setModel(r);var s=this.oldForm,o=this.options.transition;o(i,s,r)}},_canNavigate:function(){var e=!0;return this.oldForm!==undefined&&(e=this.options.controller.check(),e||this.oldForm.nlForm("refresh")),e},next:function(e){var t=this.value(),n=this.options.forms.length;t=(t+1)%n,this.options.value=t,this._refreshValue(e)},previous:function(e){var t=this.value(),n=this.options.forms.length;t=(n+t-1)%n,this.options.value=t,this._refreshValue(e)},canNavigate:function(){return this._canNavigate()},currentForm:function(){var e=this.value();return e===-1?null:this.options.forms[e]}})})(jQuery)
;"use strict";var ViewControllerManager=function(){var e=function(e,t,n){this.controller=e,this.jpath=t,this.display=n,this.$div=$("<div></div>"),this.value=undefined};e.prototype.widget=function(){return this.$div},e.prototype.setValue=function(e){NL.assert(!1,"The function AbstractViewController.setValue must not be called directly (must be implemented in derived class)")},e.prototype.updateVisualState=function(){},e.prototype._valueChanged=function(e){this.value=e,this.controller.setValue(this.jpath,e)},e.prototype._setDirty=function(){this.controller.setDirty(!0)},e.prototype.hasConfigurationChanged=function(){return!1};var t=function(e,n,r){t.baseConstructor.call(this,e,n,r),this.$text=$("<label></label>").appendTo(this.$div)};NL.OO.extend(t,e),t.prototype.setValue=function(e){this.value=e;if(e!==null&&e!==undefined){var t=this.controller.getItem(this.jpath),n=t.type,r=t.options;if(n==="enum"&&r!==null){var i=_.find(r,function(t){return t.name===e});i!==null&&i!==undefined&&(e=i.label)}var s=t.format;s!==undefined&&s!==null&&$.isFunction(s)&&(e=s(e)),this.$text.text(e)}};var n=function(e,t,r){n.baseConstructor.call(this,e,t,r);var i=this,s=e.getItem(t);this.$div.nlTextInput({enabled:r.enabled,readOnly:r.readOnly,onValueChanged:function(e){i._valueChanged(e)},onValueTouched:function(e){i._setDirty()},type:s.style})};NL.OO.extend(n,e),n.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$div.toggleClass("nlui-error",t)},n.prototype.setValue=function(e){this.value=e,this.$div.nlTextInput("setValue",e)};var r=function(e,t,n){r.baseConstructor.call(this,e,t,n);var i=this,s=e.getItem(t),o=$.extend({enabled:n.enabled,readOnly:n.readOnly,onValueChanged:function(e){i._valueChanged(e)},onValueTouched:function(e){i._setDirty()}},s.params||{});this.$div.nlNumberInput(o)};NL.OO.extend(r,e),r.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$div.toggleClass("nlui-error",t)},r.prototype.setValue=function(e){NL.assert(NL.isNumber(e),"NumberViewController expects numbers as a value"),this.value=e,this.$div.nlNumberInput("setValue",e)};var i=function(e,t,n){i.baseConstructor.call(this,e,t,n);var r=this,s=e.getItem(t);this.$div.nlMemoInput({enabled:n.enabled,readOnly:n.readOnly,rows:s.rows,onValueChanged:function(e){r._valueChanged(e)},onValueTouched:function(e){r._setDirty()}})};NL.OO.extend(i,e),i.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$div.toggleClass("nlui-error",t)},i.prototype.isVariableHeight=function(){return!0},i.prototype.setValue=function(e){this.value=e,this.$div.nlMemoInput("setValue",e)},i.prototype.rebuildLayout=function(){this.$div.nlMemoInput("rebuildLayout")};var s=function(e,t,n){s.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),o=$.extend({enabled:n.enabled,readOnly:n.readOnly,rows:i.rows,onValueChanged:function(e){r._valueChanged(e)}},i);this.$div.nlOptionSwitcher(o)};NL.OO.extend(s,e),s.prototype.setValue=function(e){this.value=e,this.$div.nlOptionSwitcher("setValue",e)};var o=function(e,t,n){o.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=[];if(i.options)for(var u=0;u<i.options.length;u++)s.push({value:i.options[u].name,label:i.options[u].label});var a=$.extend({},{disabled:!n.enabled,readOnly:n.readOnly,onValueChanged:function(e){r._valueChanged(e)},onValueTouched:function(e){r._setDirty()},config:{items:s}},i);this.$div.nlDropdown(a)};NL.OO.extend(o,e),o.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$div.nlDropdown("setError",t)},o.prototype.setValue=function(e){this.$div.nlDropdown("setValue",e)},o.prototype.hasConfigurationChanged=function(){var e=this.controller.getItem(this.jpath),t=e.options,n=this.$div.nlDropdown("option","options");if(NL.isNundef(n))return!NL.isNundef(t);if(NL.isNundef(t))return!0;if(t.length!==n.length)return!0;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!0;return!1};var u=function(e,t,n){u.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t);if(!n.readOnly){this.$picker=$("<input></input>").attr("type","text");var s=[n.locale.locale,n.locale.language,n.locale.locale.substr(0,2)],o=n.locale.locale,a=o.indexOf("-");a!==-1&&s.push(o.substr(0,a)+"-"+o.substr(a+1).toUpperCase()),n.locale.locale==="en-us"&&s.push("");var f=!1;$.each(s,function(e,t){if($.datepicker.regional[t]!==undefined)return o=t,f=!0,!1}),f||NL.log.warn("Datepicker language for display.locale.locale not found",s),this.$picker.datepicker($.datepicker.regional[o]).datepicker("option","onSelect",function(e,t){var n=r.$picker.datepicker("getDate");r._valueChanged(n)}),this.$picker.appendTo(this.$div),n.enabled||this.$picker.attr("disabled","disabled")}else this.$text=$("<label></label>"),this.$text.appendTo(this.$div)};NL.OO.extend(u,e),u.prototype._getReadOnlyText=function(e,t,n){return t.formatDateOnly(e,n)},u.prototype.setValue=function(e){NL.assert(NL.isNundef(e)||NL.isDate(e),"Value for jpath ["+this.jpath+"] should be a Date"),this.value=e;if(!this.display.readOnly)this.$picker.datepicker("setDate",e);else{var t=this.controller.getItem(this.jpath),n=t.format,r="";if($.isFunction(n))r=n(e);else{var i=this.display.locale;r=this._getReadOnlyText(e,i,n)}this.$text.text(r)}};var a=function(e,t,n){a.baseConstructor.call(this,e,t,n)};NL.OO.extend(a,u),a.prototype._getReadOnlyText=function(e,t,n){return t.formatDateTime(e,n)};var f=function(e,t,n){f.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t);this.$selector=$("<div></div>").nlDateSelector({selector:i.selector,value:i.value,onValueChanged:function(e){r._valueChanged(e)}},i.params),this.$selector.appendTo(this.$div),n.enabled?this.$selector.nlDateSelector("setDisabled",!1):this.$selector.nlDateSelector("setDisabled",!0),n.readOnly?this.$selector.nlDateSelector("setReadonly",!1):this.$selector.nlDateSelector("setReadonly",!0)};NL.OO.extend(f,e),f.prototype.getValue=function(){return this.$selector.nlDateSelector("getValue")},f.prototype.setValue=function(e){this.value=e,e!==null&&e!==undefined&&(this.$selector.nlDateSelector("setValue",e),this.$selector.nlDateSelector("displayValue"))};var l=function(e,t,n){l.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t);this.$multisel=$("<div></div>").nlMultiSel({enabled:!r.display.readOnly&&n.enabled,source:i.source,onValueChanged:function(e){r._valueChanged(e)}}),n.enabled||this.$multisel.attr("disabled","disabled"),this.$multisel.appendTo(this.$div)};NL.OO.extend(l,e),l.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$multisel.toggleClass("nlui-error",t)},l.prototype.isVariableHeight=function(){return!0},l.prototype.setValue=function(e){this.value=e;var t=this;this.$multisel.nlMultiSel("option",{value:e,enabled:!t.display.readOnly&&this.display.enabled})};var c=function(e,t,n){c.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},i.params),o=i.params.onRefresh;o&&(s.onRefresh=function(e){o(function(t){e(t);var n=[];t.primary&&t.primary.text&&n.push(t.primary.text),t.secondary&&t.secondary.text&&(n.length===0&&n.push(undefined),n.push(t.secondary.text)),r._valueChanged(n)})}),this.$kpi=$("<div></div>").nlKPI(s).appendTo(this.$div)};NL.OO.extend(c,e),c.prototype.isVariableHeight=function(){return!0},c.prototype.setValue=function(e){this.value=e,this.$kpi.nlKPI("option",e)};var h=function(e,t,n){h.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t);!NL.isNundef(i.value)&&!NL.isNundef(i.value._key)&&!i.value._key._content.hasOwnProperty("nodePath")&&i.value._key._content.hasOwnProperty("expr")&&(i.value._key._content={nodePath:i.value._key._content.expr});var s=$.extend({onSelection:function(e,t){return r._valueChanged(e),!0},enabled:n.enabled},i.params);this.$linkEdit=$("<div></div>").nlLinkEdit(s).appendTo(this.$div)};NL.OO.extend(h,e),h.prototype.setValue=function(e){this.value=e,this.$linkEdit.nlLinkEdit("selection",e)},h.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.$linkEdit.toggleClass("nlui-error",t)},h.prototype.hasConfigurationChanged=function(){var e=this.controller.getItem(this.jpath),t=e.params,n=this.$div.nlLinkEdit("option","options");if(NL.isNundef(n))return!NL.isNundef(t);if(NL.isNundef(t))return!0;if(t.length!==n.length)return!0;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!0;return!1};var p=function(e,t,n){p.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({onSelection:function(e){var t=e.id;return r._valueChanged(t),!0}},i.params);$("<div></div>").nlNavigator(s).appendTo(this.$div)};NL.OO.extend(p,e),p.prototype.setValue=function(e){this.value=e;var t=this.controller.getItem(this.jpath)};var d=function(e,t,n){d.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({keyAttributes:[],onSelection:function(e,t){return r._valueChanged(e,t),!0}},i.params);this.$list=$("<div></div>").nlList(s).appendTo(this.$div)};NL.OO.extend(d,e),d.prototype.setValue=function(e){this.value=e,this.$list.nlList("selection",e)},d.prototype.isVariableHeight=function(){return!0},d.prototype._valueChanged=function(e,t){var n=this.controller.getItem(this.jpath),r=n.selectMapping,i=this;if(!r||r.length===0)i.controller.setValues(t);else{var s={};NL.Utils.each(r,function(e,n){t&&(s[n.modelJPath]=t[n.property])}),i.controller.setValues(s)}this.controller.setValue(this.jpath,e),this.controller.refresh()},d.prototype.rebuildLayout=function(){this.$list.nlList("rebuildLayout")};var v=function(t,n,r){v.baseConstructor.call(this,t,n,r);var i=this,s=t.getItem(n),o=$.extend({keyAttributes:[],onSelection:function(e,t){return i._valueChanged(e,t),!0}},s.params);this.$treeList=$("<div></div>").nlTreeList(o).appendTo(this.$div)};NL.OO.extend(v,e),v.prototype.setValue=function(e){this.value=e,this.$treeList.nlTreeList("selection",e)},v.prototype.isVariableHeight=function(){return!0},v.prototype._valueChanged=function(e,t){var n=this.controller.getItem(this.jpath),r=n.selectMapping,i=this;!r||r.length===0?NL.Utils.each(i.controller.getModel(),function(e,n){t&&t[e]&&i.controller.setValue(e,t[e])}):NL.Utils.each(r,function(e,n){t&&i.controller.setValue(n.modelJPath,t[n.property])}),this.controller.setValue(this.jpath,e),this.controller.refresh()},v.prototype.rebuildLayout=function(){this.$treeList.nlTreeList("rebuildLayout")};var m=function(e,t,n){m.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({onValueChanged:function(e){r._valueChanged(e)},enabled:n.enabled,readOnly:n.readOnly},i);this.widget().nlMultipleChoice(s)};NL.OO.extend(m,e),m.prototype.setValue=function(e){this.value=e,this.widget().nlMultipleChoice("setValue",e)},m.prototype.isVariableHeight=function(){return!0};var g=function(e,t,n){g.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},{readOnly:n.readOnly,disabled:!n.enabled,onValueChanged:function(e){r._valueChanged(e)},config:{widget:"nlColorPicker",refreshCompactDisplay:function(e,t,n){t.css("background-color",n.toCssString())},dialogTitle:xtk_core.colorPicker_dialogTitle(),dialogWidth:545}},i);this.widget().nlCompactEditor(s)};NL.OO.extend(g,e),g.prototype.setValue=function(e){this.value=e,this.widget().nlCompactEditor("setValue",e)},g.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.widget().toggleClass("nlui-error",t)};var y=function(e,t,n){y.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},{readOnly:n.readOnly,disabled:!n.enabled,onValueChanged:function(e){r._valueChanged(e)},config:{widget:"nlBorderEdit",widgetOptions:{showPreview:!0},refreshCompactDisplay:function(e,t,n){n.applyAttributesTo(t)},dialogWidth:500,dialogHeight:355,dialogResizable:!1,dialogTitle:xtk_core.borderEdit_dialogTitle()}},i.options);s.config.widgetOptions=$.extend(s.config.widgetOptions,i.config),this.widget().nlCompactEditor(s)};NL.OO.extend(y,e),y.prototype.setValue=function(e){this.value=e,this.widget().nlCompactEditor("setValue",e)},y.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.widget().toggleClass("nlui-error",t)};var b=function(e,t,n){b.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},{readOnly:n.readOnly,disabled:!n.enabled,onValueChanged:function(e){r._valueChanged(e)},config:{widget:"nlBackgroundEdit",widgetOptions:{showPreview:!0},refreshCompactDisplay:function(e,t,n){n.applyAttributesTo(t)},dialogWidth:470,dialogHeight:280,dialogResizable:!1,dialogTitle:xtk_core.backgroundEdit_dialogTitle()}},i.options);s.config.widgetOptions=$.extend(s.config.widgetOptions,i.config),this.widget().nlCompactEditor(s)};NL.OO.extend(b,e),b.prototype.setValue=function(e){this.value=e,this.widget().nlCompactEditor("setValue",e)},b.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.widget().toggleClass("nlui-error",t)};var w=function(e,t,n){w.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},{readOnly:n.readOnly,disabled:!n.enabled,onValueChanged:function(e){r._valueChanged(e)},value:"",config:{widget:"nlExprEditor",refreshCompactDisplay:function(e,t,n){var r="nlui-compacteditor-expr",i,s=e._$display,o=e.options.config.widgetOptions;NL.isEmpty(n)?(NL.isNundef(o.config)?i=xtk_core.exprEditor_defaultRenderingValue():i=o.config.defaultRenderingValue||xtk_core.exprEditor_defaultRenderingValue(),r+=" emptyvalue"):(i=n,s.hasClass("emptyvalue")&&s.removeClass("emptyvalue"));var u=$('<input type="text" readonly="readonly"></input>').val(i);s.html(u.addClass(r))},dialogWidth:545,dialogTitle:xtk_core.exprEditor_dialogTitle()}},i.options);s.config.widgetOptions=$.extend(s.config.widgetOptions,i.config),this.widget().nlCompactEditor(s)};NL.OO.extend(w,e),w.prototype.setValue=function(e){this.value=e,this.widget().nlCompactEditor("setValue",e)},w.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.widget().toggleClass("nlui-error",t)};var E=function(e,t,n){E.baseConstructor.call(this,e,t,n);var r=this,i=e.getItem(t),s=$.extend({},{readOnly:n.readOnly,disabled:!n.enabled,onValueChanged:function(e){r._valueChanged(e)},config:{widget:"nlGeometryEdit",widgetOptions:{},refreshCompactDisplay:function(e,t,n){var r="",i="nlui-compacteditor-expr",s=xtk_core.geometryEdit_width(),o=xtk_core.geometryEdit_height(),u=xtk_core.geometryEdit_top(),a=xtk_core.geometryEdit_left(),f=e.options.config.widgetOptions;f.config.mode!=="full"?(i+=" center",r=$("<div>").append($("<span></span>",{text:s+NL.session.locale.settings.colonSuffix+" "+n.get("width"),"class":"widthlabel"}),$("<span></span>",{text:"x","class":"separatorlabel"}),$("<span></span>",{text:o+NL.session.locale.settings.colonSuffix+" "+n.get("height"),"class":"heightlabel"}))):r=u+": "+n.get("top")+" | "+a+": "+n.get("left")+" | "+s+": "+n.get("width")+" | "+o+": "+n.get("height"),t.html($("<label/>",{html:r}).addClass(i))},dialogWidth:350,dialogTitle:xtk_core.geometryEdit_dialogTitle()}},i.options);s.config.widgetOptions.config=$.extend({},i.config),this.widget().nlCompactEditor(s)};NL.OO.extend(E,e),E.prototype.setValue=function(e){this.value=e,this.widget().nlCompactEditor("setValue",e)},E.prototype.isVariableHeight=function(){return!1},E.prototype.updateVisualState=function(){var e=this.controller.getItemErrors(this.jpath),t=!NL.isNundef(e);this.widget().toggleClass("nlui-error",t)};var S=function(S,x,T){var N=S.getItem(x);N.value===undefined&&NL.log.warn("nlForm: value of attribute ["+x+"] is unset");var C=N.type||"string";C=C.toLowerCase();if((C==="byte"||C==="short"||C==="string")&&N.options||C==="enum"){S.setItemAttributes(x,{selection:"mono",keyAttribute:C==="string"||C==="enum"?"name":"value"},!0);var k=S.getItemAttribute(x,"selection");if(k==="multi"){var L=S.getItemAttribute(x,"source");return $.isArray(L)&&S.setItemAttribute(x,"source",new NL.DataSource.Local({data:L})),new l(S,x,T)}return new o(S,x,T)}return C===null||C===undefined||C==="string"||C===""?(S.setItemAttributes(x,{style:"text"},!0),new n(S,x,T)):C==="number"?new r(S,x,T):C==="memo"||C==="cdata"?(S.setItemAttributes(x,{rows:4},!0),new i(S,x,T)):C==="boolean"?(S.setItemAttributes(x,{selection:"yes/no"},!0),new s(S,x,T)):C==="date"||C==="dateonly"?(S.setItemAttributes(x,{format:"shortDate",language:NL.session.locale.getLocale()},!0),new u(S,x,T)):C==="datetime"?(S.setItemAttributes(x,{format:"shortDateTime",language:NL.session.locale.getLocale()},!0),new a(S,x,T)):C==="datepartial"?(S.setItemAttributes(x,{selector:"Y"},!0),new f(S,x,T)):C==="kpi"?new c(S,x,T):C==="link"?new h(S,x,T):C==="navigator"?new p(S,x,T):C==="pathlist"?new v(S,x,T):C==="list"?new d(S,x,T):C==="multiplechoice"?new m(S,x,T):C==="color"?new g(S,x,T):C==="border"?new y(S,x,T):C==="background"?new b(S,x,T):C==="expreditor"?new w(S,x,T):C==="geometry"?new E(S,x,T):new t(S,x,T)};return{newViewController:S}}();NL.FormController=function(e){(function(e){e.fn.nlFormData=function(e){var t=this.nlData(e);return t===null||t===undefined||t===""?undefined:e==="mandatory"||e==="readOnly"||e==="visible"||e==="enabled"?NL.XTK.parseBoolean(t):t}})(jQuery),e.widget("NL.nlForm",e.NL.nlWidget,{options:{controller:undefined,readOnly:!1,showHelpText:!0,labelsWidth:"medium",labelsPosition:"left",boldLabels:!1,labelsCSSClasses:[],onRefreshVisibility:undefined},viewControllers:undefined,_observer:undefined,_create:function(){if(!this.options.controller)throw new Error("The controller is a mandatory option of the nlForm widget");var e=this;this.viewControllers={},this.element.addClass("ui-widget nlui-form"),this.options.controller.registerViewObserver(this,this.options.onRefreshVisibility),this.refresh(),this._observer=this.options.controller.registerDataObserver("*",function(n,r,i){e._onChange(n,r,i)}),this.options.controller.observerReady(this),NL.Widgets.LayoutManager.registerWidget(this)},refresh:function(){var t=this,n=[this.element];while(n.length>0){var r=n.shift();if(r.hasClass("nlui-form")&&r!==this.element){var i=this.options.controller,s=r.nlForm("controller");if(i!==s)continue}var o=r.attr("data-nl-jpath");NL.isEmpty(o)&&r.is("div")&&(o=r.attr("name"),NL.isEmpty(o)||NL.log.warn("nlForm: (element "+o+") you should replace the 'name' attribute (used to bind the DOM to the model) by the 'data-nl-jpath' attribute.")),NL.isEmpty(o)||t._inject(r,o),r.children().each(function(){n.push(e(this))})}this.rebuildLayout()},destroy:function(){this._destroyItems(),e.Widget.prototype.destroy.call(this),NL.Widgets.LayoutManager.unRegisterWidget(this),this.options.controller.unregisterViewObserver(this),this.options.controller.unregisterDataObserver(this._observer)},_destroyItems:function(){var e=this;NL.Utils.each(this.viewControllers,function(t,n){var r=n.$item;e._destroyItem(r)}),this.viewControllers={}},_destroyItem:function(e){e.children().remove(),e.removeClass("mandatory readOnly");var t=e.nlData("nlform-field-id");NL.isNundef(t)||delete this.viewControllers[t]},_inject:function(t,n){var r=this.options.controller.getItem(n);if(r===null||r===undefined){NL.log.error("[nlForm] Attribute ["+n+"] cannot be bound to a widget because it is not in the model",this.options.controller._model);return}var i=e.extend({},{readOnly:!1,labelsWidth:"medium",labelsBold:!1,labelsCSSClasses:[],showHelpText:!0,labelsPosition:"left",mandatory:!1,visible:!0,enabled:!0,locale:null,help:null},{readOnly:this.options.readOnly,labelsWidth:this.options.labelsWidth,labelsBold:this.options.labelsBold,labelsCSSClasses:this.options.labelsCSSClasses,showHelpText:this.options.showHelpText,labelsPosition:this.options.labelsPosition,locale:this.options.locale},{mandatory:r.mandatory,readOnly:r.readOnly,visible:r.visible,enabled:!r.disabled,labelsPosition:r.labelsPosition,labelsWidth:r.labelsWidth,help:r.help,label:r.label,locale:r.locale},{mandatory:t.nlFormData("mandatory"),visible:t.nlFormData("visible"),enabled:t.nlFormData("enabled"),readOnly:t.nlFormData("readOnly"),labelsPosition:t.nlFormData("labelsPosition"),labelsWidth:t.nlFormData("labelsWidth"),label:t.nlFormData("label"),help:t.nlFormData("help")}),s=t.nlData("nlform-field-id"),o;NL.isEmpty(s)||(o=this.viewControllers[s]),o!==undefined&&(o.view===null?o=undefined:o=this._updateWidget(i,o)),o===undefined&&(this._destroyItem(t),s=NL.Utils.sequence().nextVal(),t.nlData("nlform-field-id",s),t.addClass("nlui-form-field"),o={id:s,$item:t,jpath:n,view:null,$label:null,label:null,$value:null,$error:null},o=this._createTheWidget(i,o)),o&&(this.viewControllers[s]=o);if(i.visible){var u=i.mandatory&&!i.readOnly;t.toggleClass("mandatory",u);var a=null,f=this.options.controller.getItemAttribute(n,"error");f&&e.isArray(f)&&f.length>0&&(a=f[0],a&&a.message&&(a=a.message)),NL.isEmpty(a)?(o.$value.removeClass("error"),o.$error.hide()):(o.$value.addClass("error"),o.$error.text(a).show(),o.$error.show()),o.view.updateVisualState()}},_createOrUpdateLabel:function(t,n){var r=t.label;if(!r)return null;var i=null;return n?i=n:i=e("<label></label>").addClass("nlui-form-label"),t.labelsPosition==="left"&&(r+=t.locale.getSettings().colonSuffix),i.text(r),i},_createTheWidget:function(t,n){if(!t.visible)return n;var r=n.$item,i=n.jpath;n.$value=null,n.$label=null,n.$error=null;var s=ViewControllerManager.newViewController(this.options.controller,i,t);if(s){var o=this.options.controller.getItem(i);s.setValue(o.value);var u=s.widget();n.$value=u;var a=o.label,f=this._createOrUpdateLabel(t,undefined);n.label=a,n.$label=f,t.mandatory&&!t.readOnly&&r.addClass("mandatory");var l=e("<td></td>").addClass("label");l.addClass("nlui-form-label-"+t.labelsWidth),f!==null&&f!==undefined&&(t.labelsBold&&f.addClass("bold"),e.each(t.labelsCSSClasses,function(e,t){f.addClass(t)}),l.append(f)),u.addClass("value"),t.readOnly&&u.addClass("readOnly"),e.isFunction(s.isVariableHeight)&&s.isVariableHeight()?u.addClass("variable-height"):u.addClass("fixed-height");var c=e("<td></td>");u!==null&&u!==undefined&&c.append(u);var h=null;if(t.showHelpText&&t.help&&t.help!==""){h=e("<td></td>").addClass("help-block");var p=e("<p></p>").text(t.help).appendTo(h)}var d=e("<td></td>"),v=e("<div></div>").addClass("error-message").attr("display","none").appendTo(d);n.$error=v;var m=e("<table></table>"),g;if(t.labelsPosition==="left")g=e("<tr></tr>").appendTo(m),l.appendTo(g),c.appendTo(g),g=e("<tr></tr>").appendTo(m),e("<td></td>").appendTo(g),d.appendTo(g),h&&(g=e("<tr></tr>").appendTo(m),e("<td></td>").appendTo(g),h.appendTo(g));else if(t.labelsPosition==="above"){var y=e("<tr></tr>").appendTo(m);l.appendTo(y);var b=e("<tr></tr>").appendTo(m);c.appendTo(b);var w=e("<tr></tr>").appendTo(m);d.appendTo(w);if(h){var E=e("<tr></tr>").appendTo(m);h.appendTo(E)}}else t.labelsPosition==="none"?(g=e("<tr></tr>").appendTo(m),c.appendTo(g),g=e("<tr></tr>").appendTo(m),d.appendTo(g),h&&(g=e("<tr></tr>").appendTo(m),h.appendTo(g))):NL.assert(!1,"Invalid value ["+t.labelsPosition+"] for labelsPosition attribute");m.appendTo(r)}return n.view=s,n},_updateWidget:function(e,t){var n=t.view,r=t.$item,i=t.jpath,s=!1,o=n.display;NL.Utils.each(e,function(e,t){var n=o[e];if(n!==t)return e!=="mandatory"&&e!=="label"&&(s=!0),!1}),!s&&t.view.hasConfigurationChanged()&&(s=!0);if(s)return undefined;var u=this.options.controller.getItem(i),a=!1,f=t.label;NL.Utils.isEqual(f,u.label)||(a=!0,t.$label=this._createOrUpdateLabel(e,t.$label),t.label=u.label);var l=u.value,c=n.value,h=!NL.Utils.isEqual(c,l);return h?(n.setValue(u.value),t):t},_onChange:function(e,t,n){var r=this;NL.Utils.each(this.viewControllers,function(n,r){if(!NL.isNundef(r.view)&&e===r.jpath){var i=r.view.value;NL.Utils.isEqual(t,i)||r.view.setValue(t)}})},_setOption:function(t,n){t==="readOnly"?(this.options.readOnly=n,this.refresh()):t==="locale"&&(this.options.locale=n,this.refresh()),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},controller:function(){return this.options.controller},rebuildLayout:function(){e.each(this.viewControllers,function(e,t){var n=t.view;n&&n.rebuildLayout&&n.rebuildLayout()})}}),e.widget("NL.nlQuickForm",e.NL.nlWidget,{options:{controller:undefined,attributes:undefined},$form:undefined,_create:function(){var t=this;t.$form=this.element;var n=this.options.attributes;e.each(n,function(n,r){e("<div></div>").attr("data-nl-jpath",r).appendTo(t.$form)}),t.$form.nlForm(this.options)},refresh:function(){return this.$form.nlForm("refresh")},controller:function(){return this.$form.nlForm("controller")}})}(jQuery)
;"use strict";(function(e,t,n,r){e.widget("NL.nlOptionSwitcher",e.NL.nlWidget,{options:{labels:"on/off",value:!1,style:"buttons",onValueChanged:function(e){}},_create:function(){this._value=this.options.value,NL.Widgets.LayoutManager.registerWidget(this),this._$wrapper=e('<div class="nlui-optionswitcher-wrapper"></div>'),this._$markup=this._createMarkup(),this._refreshVisual(),this._$wrapper.append(this._$markup),this.element.append(this._$wrapper)},_createMarkup:function(){var t=this._getSwitcherLabels(),n=this;if(this.options.readOnly)return this._$label=e("<label></label>"),this._$label;switch(this.options.style){case"buttons":return this._$buttonTrue=e('<span class="normal"></span>').nlButton({label:t[0],rightRounded:!1,onClick:function(){n.toggleValue()}}),this._$buttonFalse=e('<span class="normal"></span>').nlButton({label:t[1],leftRounded:!1,onClick:function(){n.toggleValue()}}),e("<div></div>").append(this._$buttonTrue).append(this._$buttonFalse);case"checkbox":var r=NL.Utils.sequence().nextVal();return this._$checkbox=e('<input id="'+r+'" type="checkbox" />').click(function(){n.toggleValue()}),e("<div></div>").append(this._$checkbox).append(e("<label for="+r+" ></label>").text(this.options.caption))}},toggleValue:function(){this.setValue(!this._value)},setValue:function(e){this._value=e,this._refreshVisual(),this.options.onValueChanged(this._value)},getValue:function(){return this._value},enable:function(){this.options.disabled=!1,this._refreshVisual()},disable:function(){this.options.disabled=!0,this._refreshVisual()},_refreshVisual:function(){if(this.options.readOnly){var e=this._getSwitcherLabels(),t=this._value?0:1;this._$label.text(e[t])}else switch(this.options.style){case"buttons":this._value?(this._$buttonTrue.nlButton("setMode","primary"),this._$buttonFalse.nlButton("setMode","default")):(this._$buttonFalse.nlButton("setMode","primary"),this._$buttonTrue.nlButton("setMode","default"));var n=this.options.disabled?"disable":"enable";this._$buttonTrue.nlButton(n),this._$buttonFalse.nlButton(n);break;case"checkbox":this._$checkbox.prop("checked",this._value),this._$checkbox.prop("disabled",this.options.disabled)}},_getSwitcherLabels:function(){var t=[];if(e.isArray(this.options.labels))t.push(this.options.labels[0]),t.push(this.options.labels[1]);else switch(this.options.labels){case"on/off":t.push(xtk_core.optionSwitcher_on()),t.push(xtk_core.optionSwitcher_off());break;case"true/false":t.push(xtk_core.optionSwitcher_true()),t.push(xtk_core.optionSwitcher_false());break;case"yes/no":t.push(xtk_core.optionSwitcher_yes()),t.push(xtk_core.optionSwitcher_no());break;case"0/1":t.push("1"),t.push("0");break;default:t.push(xtk_core.optionSwitcher_true()),t.push(xtk_core.optionSwitcher_false())}return t},rebuildLayout:function(){if(!this.options.readOnly)switch(this.options.style){case"buttons":var e=this._$buttonTrue.outerWidth(),t=this._$buttonFalse.outerWidth(),n=e>t?e:t;this._$buttonTrue.innerWidth(n),this._$buttonFalse.innerWidth(n)}},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}})})(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlMultiSel",e.NL.nlWidget,{options:{value:[],onValueChanged:undefined,enabled:!0,source:null,itemRenderer:null},$input:undefined,tokens:undefined,_create:function(){var e=this;NL.isNundef(this.options.itemRenderer)&&(this.options.itemRenderer=this._defaultItemRenderer),this.element.addClass("nlui-multisel"),this.tokens=[],NL.Utils.map(e.options.value,function(t,n){e._addItem(n,!1)}),this._refresh()},_defaultItemRenderer:function(t,n){var r=t.label,i=e("<div></div>");if(!NL.isEmpty(n.searchTerm)){var s=NL.XML.escape(n.searchTerm),o=new RegExp(n.searchTerm,"gi");return r=NL.XML.escape(r),r=r.replace(o,"<em>"+s+"</em>"),i.html(r)}return i.text(r)},_refresh:function(){var t=this;this.element.children().remove(),e.each(this.tokens,function(e,n){n.$close.toggle(t.options.enabled),n.$token.appendTo(t.element)});if(this.options.enabled){var n=e("<input></input>").attr("type","text");n.appendTo(this.element),this.$input=n,this.$input.nlAutoComplete({source:this.options.source,itemRenderer:this.options.itemRenderer,select:function(e){t.$input.val(""),t._addItem(e,!0)}})}this.element.toggleClass("nlui-multisel-disabled",!this.options.enabled)},_setOption:function(t,n){t==="value"?(this.value(n),this._refresh()):t==="enabled"&&(this.options.enabled=!!n,this._refresh()),e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_newToken:function(t){var n=this,r=t.label,i=e("<div></div>").addClass("nlui-multisel-token").text(r);t.icon&&NL.View.genImage(t.icon).appendTo(i),t.title&&(i.attr("title",t.title),i.nlTooltip());var s=NL.Utils.sequence().nextVal(),o=e("<a></a>").addClass("nlui-multisel-close").attr("href","#").text("x");o.appendTo(i),o.click(function(){n._removeItem(s,!0)}),o.toggle(this.options.enabled);var u={id:s,$token:i,$close:o,item:t};return this.tokens.push(u),i},_removeItem:function(e,t){var n,r=this,i=-1;n=NL.Utils.find(this.tokens,function(t,n){return i=t,n.id===e});if(i!==-1){n=r.tokens[i];var s=n.$token;s.hide(300,function(){s.remove(),r.tokens.splice(i,1),t&&r._notifyChange()})}},_addItem:function(e,t){var n=this._newToken(e);n.insertBefore(this.$input),t&&this._notifyChange()},_notifyChange:function(){if(this.options.onValueChanged){var e=this.value();this.options.onValueChanged(e)}},value:function(e){var t=this;if(e===undefined)return NL.Utils.map(this.tokens,function(e,t){return t.item});this.tokens=[],NL.Utils.map(e,function(e,n){t._addItem(n,!1)}),this._notifyChange()}})})(jQuery)
;"use strict";(function(e){e.widget("NL.nlAutoComplete",e.NL.nlWidget,{options:{source:null,valueAttribute:"label",itemRenderer:function(e,t){return e.label},select:function(e){return!1}},_create:function(){var t=this.element,n=this,r=null;t.autocomplete({source:NL.DataSource.autoCompleteAdapter(this.options.source,{valueAttribute:n.options.valueAttribute}),close:function(){if(r!==null){var e=r;r=null,n.options.select(e)}},select:function(e,t){var n=t.item,i=n.item;r=i}}),t.data("autocomplete")._renderItem=function(r,i){r.addClass("nlui-multisel-popup");var s={searchTerm:t.val()},o=n.options.itemRenderer(i.item,s);return o=e("<a></a>").append(o),e("<li></li>").data("item.autocomplete",i).append(o).appendTo(r)}}})})(jQuery)
;"use strict";(function(e,t,n,r){e.widget("NL.nlDateSelector",e.NL.nlWidget,{options:{selector:"Y",value:r,onValueChanged:function(e){},visible:!0,display:"lines"},monthDays:[31,null,31,30,31,30,31,31,30,31,30,31],yearDigits:r,_create:function(){var i=this;this.popableManager=null,this._input=e('<input class="inputDate" type="text"></input>'),this._readonly=!1,this._enabled=!0,this.element.append(this._input);if(NL.isNundef(this.options.value)){var s=new Date;switch(this.options.selector){case"Y":this.options.value=NL.Date.newDatePartial("Y",s.getFullYear()),this._input.val(xtk_core.dateSelector_chooseAYear());break;case"Q":var o=this._getQuarterByMonth(s.getMonth());this.options.value=NL.Date.newDatePartial("Q",s.getFullYear(),o),this._input.val(xtk_core.dateSelector_chooseAQuarter());break;case"M":this.options.value=NL.Date.newDatePartial("M",s.getFullYear(),s.getMonth()),this._input.val(xtk_core.dateSelector_chooseAMonth());break;case"D":this.options.value=NL.Date.newDatePartial("D",s.getFullYear(),s.getMonth(),s.getDate()),this._input.val(xtk_core.dateSelector_chooseADate());break;default:this.options.value=NL.Date.newDatePartial(s.getFullYear(),"Y")}}else this.displayValue();this._$container=r,this._$dateSelector=r,this._$header=r,this._daysName=NL.Utils.extend(!0,[],NL.session.locale.get("daysName")),this._partialFormat=NL.session.locale.get("longMonth"),this._shortDaysName=NL.Utils.extend(!0,[],NL.session.locale.get("shortDaysName")),this._monthsName=NL.Utils.extend(!0,[],NL.session.locale.get("monthsName")),this._quartersName=NL.Utils.extend(!0,[],NL.session.locale.get("quartersName")),this._isLeapYear(this.options.value.year)?this.monthDays[1]=29:this.monthDays[1]=28;var u=NL.session.locale.get("shortDate").indexOf("%4Y");u!==-1?this.yearDigits=4:this.yearDigits=2,this._direction=r,this._quartersNameDetails=r,this._used=!1,this._timeout=r,this._isAlpha=!1,this._displayYear=parseInt(this.options.value.year,10);if(this.options.selector==="M"||this.options.selector==="D")this._displayMonth=parseInt(this.options.value.month,10);(this.options.selector==="Q"||this.options.selector==="M")&&this._setNameDetails(),this.options.selector==="D"&&(NL.Date.weekBeginsAt(this._daysName,1),NL.Date.weekBeginsAt(this._shortDaysName,1)),this._input.focus(function(t){i._used===!1&&(i.popableManager=NL.UI.getGlobalPopableManager(),i.popableManager.addPopable(i),i._$container=i._buildSelector(),i._$dateSelector=i._$container.children(":first-child"),i._$container.css("z-index",i._beOntop()+10),e("body").append(i._$container),i._input.val(""),i._used=!0),i._$container.show().slideDown("slow"),i._refreshForm()}),this.options.selector==="Y"&&this._input.keypress(function(e){var t=e.which;return t>31&&(t<48||t>57)?(i._isAlpha=!1,!1):(i._isAlpha=!0,!0)}),this._input.keydown(function(t){var n=t.which,r=null,s=null,o=null;if(n===13){r=e(this).val();var u=NL.session.locale.parseDateOnly(r,NL.session.locale.get("shortDate"),null);if(u!==null)var o=!0;var a=new RegExp("^([0-9]{"+i.yearDigits+"})$","gi"),s=a.test(r);(s===!0||o===!0)&&i._close()}}),this._input.keyup(function(n){var s=e(this).val();if(s!=="")switch(i.options.selector){case"Y":var o=new RegExp("^([0-9]{"+i.yearDigits+"})$","gi"),u=o.test(s);if(u===!0)n.which!==16&&(t.clearTimeout(i._timer),i._valueChanged(parseInt(s,10)),i._displayYear=i.options.value.year,i._refreshForm());else{i._$container.show(),i._$dateSelector.empty(),i._timer!==r&&t.clearTimeout(i._timer);var a=e('<img src="/nl/img/ajax-loader.gif"></img>'),f=e("<p></p>");f.text(xtk_core.dateSelector_searchInProgress()),a.addClass("ajaxTransition"),i._$dateSelector.css("text-align","center"),i._$dateSelector.append(a),i._$dateSelector.append(f),i._timer=t.setTimeout(function(){i._noDateFound()},1500)}break;case"D":var l=NL.session.locale.parseDateOnly(s,NL.session.locale.get("shortDate"),null);if(l!==null)n.which!==16&&(t.clearTimeout(i._timer),NL.isDate(l)&&l.getFullYear()>1900&&(i.options.value.year=parseInt(l.getFullYear(),10),i.options.value.month=parseInt(l.getMonth()+1,10),i._displayYear=parseInt(i.options.value.year,10),i._displayMonth=parseInt(i.options.value.month-1,10),i._valueChanged(parseInt(l.getDate(),10)),i._refreshForm()));else{i._timer!==r&&t.clearTimeout(i._timer),i._$dateSelector.empty(),i._$container.show();var a=e('<img src="/nl/img/ajax-loader.gif"></img>'),f=e("<p></p>");f.text(xtk_core.dateSelector_searchInProgress()),a.addClass("ajaxTransition"),i._$dateSelector.css("text-align","center"),i._$dateSelector.append(a),i._$dateSelector.append(f),i._timer=t.setTimeout(function(){i._noDateFound()},1500)}}else i._timer!==r&&i._is_alpha===!1&&(t.clearTimeout(i._timer),i.value={year:(new Date).getFullYear(),month:(new Date).getMonth(),day:(new Date).getDate(),type:"D"},i._refreshForm())})},isOwnerOf:function(e,t){return NL.DOMUtils.isDescendantOf(e,this._$container)||NL.DOMUtils.isDescendantOf(e,this.element)},collapse:function(e){var n=this;t.setTimeout(function(){n._$container.hide()}),this._close()},_isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},_beOntop:function(){var n=Math.max.apply(null,e.map(e("body > *"),function(t,n){if(e(t).css("position")==="absolute")return parseInt(e(t).css("z-index"),10)||1}));return n},_getQuarterByMonth:function(t){if(t>=0&&t<=2)return 1;if(t>=3&&t<=5)return 2;if(t>=6&&t<=8)return 3;if(t>=9&&t<=11)return 4},_stringDate:function(){var t=new Date;switch(this.options.selector){case"Q":var n=this._getQuarterByMonth(t.getMonth()),r=t.getFullYear()+""+(n-1);break;case"M":var r=t.getFullYear()+""+t.getMonth();break;case"D":var r=t.getFullYear()+""+t.getMonth()+""+t.getDate()}return r},_noDateFound:function(){this._$dateSelector.empty(),this._$dateSelector.css("text-align","center"),this._$dateSelector.html(xtk_core.dateSelector_noDateFound())},_setNameDetails:function(){this._quartersNameDetails=[],this._quartersNameDetails[0]=this._monthsName[0].substring(0,3)+" - "+this._monthsName[2].substring(0,3),this._quartersNameDetails[1]=this._monthsName[3].substring(0,3)+" - "+this._monthsName[5].substring(0,3),this._quartersNameDetails[2]=this._monthsName[6].substring(0,3)+" - "+this._monthsName[8].substring(0,3),this._quartersNameDetails[3]=this._monthsName[9].substring(0,3)+" - "+this._monthsName[11].substring(0,3);switch(this.options.selector){case"M":var t=1;for(var n=0;n<this._monthsName.length;n++)t<10?this._monthsName[n]="0"+t+" - "+this._monthsName[n]+"":this._monthsName[n]=""+t+" - "+this._monthsName[n]+"",t++;break;case"Q":for(var n=0;n<this._quartersName.length;n++)this._quartersName[n]=""+this._quartersName[n]+"<br>("+this._quartersNameDetails[n]+")"}},_valueChanged:function(e){this.setValue(e),this.options.onValueChanged(this.getValue()),this.displayValue()},setReadonly:function(t){t?(this._input.show(),this._readonly=!1):(this._input.hide(),this._readonly=!0)},setDisabled:function(t){t?(this._input.attr("disabled","disabled"),this._disabled=!1,this._input.css("background","#EEEEEE")):(this._input.removeAttr("disabled"),this._disabled=!0)},_getFirstDayofMonth:function(){return(new Date(parseInt(this._displayYear,10),parseInt(this._displayMonth,10),1)).getDay()},_isValidDate:function(){var t=this.options.value.year;if(t>0)return this.options.selector==="D"?parseInt(this.options.value.month,10)<1||parseInt(this.options.value.month,10)>12?!1:parseInt(this.options.value.day,10)<1||parseInt(this.options.value.day,10)>this.monthDays[parseInt(this.options.value.month-1,10)]?!1:!0:!0;return!1},_close:function(){if(this._input.val()==="")switch(this.options.selector){case"Y":this._input.val(xtk_core.dateSelector_chooseAYear());break;case"Q":this._input.val(xtk_core.dateSelector_chooseAQuarter());break;case"M":this._input.val(xtk_core.dateSelector_chooseAMonth());break;case"D":this._input.val(xtk_core.dateSelector_chooseADate())}},_makeClickable:function(){var n=this;e("td.normal").unbind("click"),e("td.normal").click(function(){var t=e(this);n._valueChanged(t.html()),n._$container.hide()})},_reverse:function(){var n=this,r=e("tbody",this._$dateSelector),i=r.find("tr").length-1,s=e("tr:eq(1) td",r).length,o=r.find("td").length,u=r.find("td").map(function(){switch(n.options.selector){case"Y":return e(this).html();case"Q":var t=NL.Utils.indexOf(e(this).html(),n._quartersName);return t;case"M":var t=NL.Utils.indexOf(e(this).html(),n._monthsName);return t;case"D":return e(this).html()}}).get(),a=[];for(var f=0;f<i;f++)for(var l=0;l<s;l++)a.push(u[f+l*i]);r.find("td.selected").removeClass("even"),r.find("td.selected").css("color","#FFFFFF"),r.find("td").hover(function(){var t=e(this);t.hasClass("selected")||(t.removeClass("even"),t.addClass("hover"))},function(){var t=e(this);t.removeClass("hover"),t.index()%2===0&&!t.hasClass("selected")&&t.addClass("even")})},_refreshForm:function(){this._isValidDate()?(this._$container.children(".header").remove(),this._$dateSelector.empty(),this._$dateSelector.hide(),this._buildHeaderSelector(),this._$dateSelector.append(this._display()),this._$container.prepend(this._$header),this.options.selector==="D"&&this._$dateSelector.prepend(this._buildDaysHeader()),this.options.display==="columns"?(this._$dateSelector.find("tbody tr td:even").addClass("even"),this._reverse()):this._$dateSelector.find("tbody tr:even").addClass("even"),this._$dateSelector.show().effect("slide",{direction:this._direction})):this._noDateFound(),this._makeClickable()},setValue:function(t){if(NL.isObject(t))this.options.value=t;else switch(this.options.value.type){case"Y":var n=null;NL.isNumber(t)?n=parseInt(t,10):n=parseInt(e(t).text(),10),this.options.value=NL.Date.newDatePartial(this.options.selector,n),this._displayYear=parseInt(this.options.value.year,10);break;case"Q":var r=NL.Utils.indexOf(t.replace(/^<p(.*)>(.*)<br>(.*)<\/p>$/ig,"$2<br>$3"),this._quartersName);r++,this.options.value=NL.Date.newDatePartial(this.options.selector,this._displayYear,r),this._displayYear=this.options.value.year;break;case"M":var r=NL.Utils.indexOf(t.replace(/^<p(.*)>(.*)<\/p>$/ig,"$2"),this._monthsName);r++,this.options.value=NL.Date.newDatePartial(this.options.selector,this._displayYear,r),this._displayYear=this.options.value.year,this._displayMonth=this.options.value.month;break;case"D":var i=null;NL.isNumber(t)?i=parseInt(t,10):i=parseInt(e(t).text(),10),this._displayMonth++,this.options.value=NL.Date.newDatePartial(this.options.selector,this._displayYear,this._displayMonth,i),this._displayYear=this.options.value.year,this._displayMonth=this.options.value.month-1;break;default:throw new Error("Unknown precision "+this.options.selector)}},getValue:function(){var e=this.options.value;return this.displayValue(),e},displayValue:function(){switch(this.options.value.type){case"Y":var e="%4Y";break;case"Q":var e="shortQuarter";break;case"M":var e="shortMonth";break;case"D":var e="shortDate"}this._readonly===!1?this._input.val(NL.Locale.formatDatePartial(this.options.value,"left",e)):this.element.text(NL.Locale.formatDatePartial(this.options.value,"left",e))},_buildSelector:function(){var n=this,r=null;this.options.visible===!0?r=this._input.height()+10:r=-this._input.height()+10;var i={left:this._input.offset().left,top:this._input.offset().top+r},s=e("<div></div>");return s.css(i),s.addClass("nlui-dateSelector"),s.append(e("<table></table>")),s},_buildDaysHeader:function(){var n=e("<thead></thead>"),r=e("<tr></tr>");for(var i=0;i<this._daysName.length;i++){var s=e("<th></th>");s.text(this._shortDaysName[i]),r.append(s)}return n.append(r),n},_buildHeaderSelector:function(){var n=this;this._$header!==r&&this._$header.empty(),this._$header=e("<table></table>"),this._$header.addClass("header");var i=e("<tr></tr>"),s=e('<td width="10">&nbsp;</td>'),o=e("<td></td>");o.addClass("light nlui-icon nlui-icon-previous-large-step-2 prevLarge"),o.css("visibility","hidden");var u=e("<td></td>");u.addClass("light nlui-icon nlui-icon-previous-small-step-2 prev");var a=e('<td align="center"></td>');a.addClass("center");var f=e("<td></td>");f.addClass("light nlui-icon nlui-icon-next-small-step-2 next");var l=e("<td></td>");l.addClass("light nlui-icon nlui-icon-next-large-step-2 nextLarge"),l.css("visibility","hidden");var c=e('<td width="10">&nbsp;</td>');i.append(s),i.append(o),i.append(u),i.append(a),i.append(l),i.append(f),i.append(c),this._$header.append(i);var h=function(){var e=NL.Date.newDatePartial("M",n._displayYear,n._displayMonth),t=NL.XTK.completeDatePartial(e,"left",null),r=NL.Locale.formatDateOnly(t,n._partialFormat);return r};if(this.options.selector==="Y"){a.html(""+(n._displayYear-5)+"-"+(n._displayYear+5));var p=10}else a.html(this._displayYear);this.options.selector==="D"&&(l.css("visibility",""),o.css("visibility",""),l.click(function(){n._displayYear+=1,n._direction="right",a.html(h()),n._refreshForm()}),o.click(function(){n._displayYear-=1,n._direction="left",a.html(h()),n._refreshForm()}),a.html(h()));if(this.options.selector==="Q"||this.options.selector==="M"||this.options.selector==="D")var p=1;return f.click(function(){n._direction="right",n.options.selector==="D"?(n._displayMonth+=1,n._displayMonth===12&&(n._displayMonth=0,n._displayYear++),a.html(h())):(n._displayYear+=p,n.options.selector==="Y"?a.html(""+(n._displayYear-5)+"-"+(n._displayYear+5)):a.html(n._displayYear)),n._refreshForm()}),u.click(function(){n._direction="left",n.options.selector==="D"?(n._displayMonth-=1,n._displayMonth===-1&&(n._displayMonth=11,n._displayYear--),a.html(h())):(n._displayYear-=p,n.options.selector==="Y"?a.html(""+(n._displayYear-5)+"-"+(n._displayYear+5)):a.html(n._displayYear)),n._refreshForm()}),this._$header},_display:function(){var n=e("<tbody></tbody>"),r=e("<tr></tr>");r.css("height",0),n.append(r);var i=n.children("tr:eq(0)"),s=0;switch(this.options.selector){case"Y":var o=parseInt(this._displayYear,10)-5,u=parseInt(this._displayYear,10)+5,a=2,f=null,l=1;o%a!==0&&(o+=1,u+=1);break;case"Q":var o=0,u=4,a=2,l=1,f=this._quartersName;break;case"M":var o=0,u=12,a=3,l=1,f=this._monthsName;break;case"D":var o=0,a=7,f=null,c=this._getFirstDayofMonth()-1;c===6&&(c=0),c===-1&&(c=6);var h=this.monthDays[parseInt(this._displayMonth,10)],u=42}var p=0,d=this._stringDate();for(var v=o;v<u;v++){var m=v%a,g=e("<td class='normal'></td>");m===0?(s++,n.append("<tr></tr>"),i=n.children("tr:eq("+s+")"),i.append(g)):i.append(g),g.hover(function(){var t=e(this);t.hasClass("selected")||t.addClass("hover")},function(){var t=e(this);t.removeClass("hover")}),i.children("td:last").append("<p></p>");var y=e(":first-child",i.children("td:last"));if(this.options.selector==="D"){if(v>=c&&p<h){var l=1;p++}else var l=0;this.options.value.year+""+parseInt(this.options.value.month-1,10)+""+this.options.value.day==this._displayYear+""+this._displayMonth+""+p&&this._used===!0&&(g.removeClass("normal"),g.addClass("selected")),this._displayYear+""+this._displayMonth+""+p===d&&g.addClass("current")}this.options.selector==="Y"&&(parseInt(this.options.value.year,10)===v&&this._used===!0&&(g.removeClass("normal"),g.addClass("selected")),parseInt((new Date).getFullYear(),10)===v&&g.addClass("current")),this.options.selector==="Q"&&(this._displayYear+""+(parseInt(this.options.value.quarter,10)-1)==this.options.value.year+""+v&&this._used===!0&&(g.removeClass("normal"),g.addClass("selected")),String(this._displayYear+""+v)===d&&g.addClass("current")),this.options.selector==="M"&&(this._displayYear+""+parseInt(this.options.value.month-1,10)==this.options.value.year+""+v&&this._used===!0&&(g.removeClass("normal"),g.addClass("selected")),String(this._displayYear+""+v)===d&&g.addClass("current")),l===1?this.options.selector==="D"?y.append(p):f!==null?y.append(f[v]):y.append(v):(i.children("td:last").html("&nbsp;"),i.children("td:last").addClass("invisible"))}return n},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments),t==="selector"&&this._refreshForm()},destroy:function(){e.Widget.prototype.destroy.call(this)}})})(jQuery,window,document)
;"use strict";(function(e,t,n){e.widget("NL.nlMultipleChoice",e.NL.nlWidget,{options:{value:n,enabled:!0,readOnly:!1,onValueChanged:function(e){},onValueTouched:function(e){},values:[],columns:1,inputType:"checkbox"},_create:function(){this._inputName="nl-multiplechoice-"+NL.Utils.sequence().nextVal(),this._content=this.options.values,this.element.append(this._buildHTML())},_setOption:function(n,r){n==="readOnly"?this.options.readOnly=r:n==="enabled"?this.options.enabled=r:n==="value"?this.setValue(r):n==="values"?(this.options.values=r||this.options.values,this._content=this.options.values):n==="columns"?this.options.columns=parseInt(r,10)||1:n==="inputType"&&(this.options.inputType=r||this.options.inputType,this.options.inputType!=="checkbox"&&(this.options.value=[this.options.value[0]])),this.element.html(this._buildHTML()),e.Widget.prototype._setOption.apply(this,arguments)},_buildHTML:function(){var n=e("<div>",{"class":"nlui-multiplechoice-wrapper"});return this.options.readOnly?n.append(this._buildReadOnlyHTML()):n.append(this._buildColumns(this._content,this.options.columns,this._inputName,this.options.enabled)),n},_buildColumns:function(n,r,i,s){var o=Math.ceil(n.length/r),u=n.length-o*r,a=[],f,l,c;for(var h=0;h<r;h++)f=h*o,l=n.slice(f,f+o),c=e("<div>",{"class":"nlui-multiplechoice-column",html:this._buildCheckBox(l,i)}),a.push(c.get(0));return e(a[a.length-1]).addClass("last-column"),u>0&&(l=n.slice(-u),c=a[a.length-1],c.append(this._buildCheckBox(l,i))),a},_buildCheckBox:function(n,r){var i=this,s=this.options.enabled,o=this.options.value;return this.options.inputType!=="checkbox"&&(o=[o]),NL.Utils.map(n,function(){var t="nlui-multiplechoice-"+NL.Utils.sequence().nextVal(),n=e.inArray(this.value,o)!==-1,u=['<input type="',i.options.inputType,'" name="',r,'" id="',t,'">'],a=e(u.join("")).val(this.value).prop("checked",n).prop("disabled",!s),f=e("<label>",{html:this.label,"for":t}),l=e("<div>",{"class":"nlui-multiplechoice-item"});return a.on("change",function(){i.options.onValueChanged(i.getValue())}),l.append(a,f).get(0)})},_buildReadOnlyHTML:function(){var n=this._content,r=this.options.value,i=this.options.inputType,s=NL.Utils.filter(n,function(){return i!=="checkbox"&&(r=[r]),e.inArray(this.value,r)>-1}),o=NL.Utils.map(s,function(){return this.label});return"<label>"+o.join(", ")+"</label>"},setValue:function(t){this.options.value=t,this.element.html(this._buildHTML()),this.options.onValueChanged(this.options.value)},getValue:function(){return this.options.value=this.element.find(":checked").map(function(){return this.value}).get(),this.options.inputType==="checkbox"?this.options.value:this.options.value[0]}})})(jQuery,window)
;"use strict";(function(e,t){Math.precision=function(e,t){return t===undefined&&(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)};var n=function(t,n){var r=this,i=t.find("img:first"),s=0,o=100,u=100,a=0,f=100,l=100,c=0,h=0,p,d,v=[],m=function(e){for(var t=0;t<v.length;t++)v[t].call(r,r,e)},g=function(n){var i=t.offset();p={l:i.left|0,t:i.top|0},w.call(r,n),e(document).bind("mousemove",y).bind("mouseup",b),n.preventDefault()},y=function(e){return w.call(r,e),e.stopPropagation(),e.preventDefault(),!1},b=function(t){return e(document).unbind("mouseup",b).unbind("mousemove",y),t.stopPropagation(),t.preventDefault(),!1},w=function(e){var n=e.pageX-p.l,i=e.pageY-p.t,o=t.w,f=t.h;n<0?n=0:n>o&&(n=o),i<0?i=0:i>f&&(i=f),S.call(r,"xy",{x:n/o*u+s,y:i/f*l+a})},E=function(){var e=0,n=0,r=t.w,s=t.h,a=i.w,p=i.h;u>0&&(c==o?e=r:e=c/u*r|0),l>0&&(h==f?n=s:n=h/l*s|0),a>=r?e=(r>>1)-(a>>1):e-=a>>1,p>=s?n=(s>>1)-(p>>1):n-=p>>1,i.css({left:e+"px",top:n+"px"})},S=function(e,t,n){var i=t!==undefined;if(!i){if(e===undefined||e==null)e="xy";switch(e.toLowerCase()){case"x":return c;case"y":return h;case"xy":default:return{x:c,y:h}}}if(n!=null&&n==r)return;var u=!1,l,p;e==null&&(e="xy");switch(e.toLowerCase()){case"x":l=t&&(t.x&&t.x|0||t|0)||0;break;case"y":p=t&&(t.y&&t.y|0||t|0)||0;break;case"xy":default:l=t&&t.x&&t.x|0||0,p=t&&t.y&&t.y|0||0}l!=null&&(l<s?l=s:l>o&&(l=o),c!=l&&(c=l,u=!0)),p!=null&&(p<a?p=a:p>f&&(p=f),h!=p&&(h=p,u=!0)),u&&m.call(r,n||r)},x=function(e,t){var n=t!==undefined;if(!n){if(e===undefined||e==null)e="all";switch(e.toLowerCase()){case"minx":return s;case"maxx":return o;case"rangex":return{minX:s,maxX:o,rangeX:u};case"miny":return a;case"maxy":return f;case"rangey":return{minY:a,maxY:f,rangeY:l};case"all":default:return{minX:s,maxX:o,rangeX:u,minY:a,maxY:f,rangeY:l}}}var r=!1,i,c,h,p;e==null&&(e="all");switch(e.toLowerCase()){case"minx":i=t&&(t.minX&&t.minX|0||t|0)||0;break;case"maxx":c=t&&(t.maxX&&t.maxX|0||t|0)||0;break;case"rangex":i=t&&t.minX&&t.minX|0||0,c=t&&t.maxX&&t.maxX|0||0;break;case"miny":h=t&&(t.minY&&t.minY|0||t|0)||0;break;case"maxy":p=t&&(t.maxY&&t.maxY|0||t|0)||0;break;case"rangey":h=t&&t.minY&&t.minY|0||0,p=t&&t.maxY&&t.maxY|0||0;break;case"all":default:i=t&&t.minX&&t.minX|0||0,c=t&&t.maxX&&t.maxX|0||0,h=t&&t.minY&&t.minY|0||0,p=t&&t.maxY&&t.maxY|0||0}i!=null&&s!=i&&(s=i,u=o-s),c!=null&&o!=c&&(o=c,u=o-s),h!=null&&a!=h&&(a=h,l=f-a),p!=null&&f!=p&&(f=p,l=f-a)},T=function(t){e.isFunction(t)&&v.push(t)},N=function(t){if(!e.isFunction(t))return;var n;while((n=e.inArray(t,v))!=-1)v.splice(n,1)},C=function(){e(document).unbind("mouseup",b).unbind("mousemove",y),t.unbind("mousedown",g),t=null,i=null,v=null};e.extend(!0,r,{val:S,range:x,bind:T,unbind:N,destroy:C}),i.src=n.arrow&&n.arrow.image,i.w=n.arrow&&n.arrow.width||i.width(),i.h=n.arrow&&n.arrow.height||i.height(),t.w=n.map&&n.map.width||t.width(),t.h=n.map&&n.map.height||t.height(),t.bind("mousedown",g),T.call(r,E)},r=function(t,n,r,i){var s=this,o=t.find("input.Hex"),u=function(e){o.val(o.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),n.val("hex",o.val()!=""?o.val():null,e.target)},a=function(e){n.val()!=null&&(o.val(n.val("hex")),r&&r.val(n.val("hex")))},f=function(e,t){var n=e.val("all");t!=o.get(0)&&(r&&t!=r.get(0)||!r)&&o.val(n!=null?n.hex:""),r&&t!=r.get(0)&&t!=o.get(0)&&r.val(n!=null?n.hex:"")},l=function(){o.add(r).unbind("keyup",u).unbind("blur",a),n.unbind(f),o=null};e.extend(!0,s,{destroy:l}),o.add(r).bind("keyup",u).bind("blur",a),n.bind(f)};e.jPicker={List:[],Color:function(t){var n=this,r,i,s,o,a,f,l,c=[],h=function(e){for(var t=0;t<c.length;t++)c[t].call(n,n,e)},p=function(e,t,c){var d=t!==undefined;if(!d){if(e===undefined||e==null||e=="")e="all";if(r==null)return null;switch(e.toLowerCase()){case"ahex":return u.rgbaToHex({r:r,g:i,b:s,a:o});case"hex":return p("ahex").substring(0,6);case"all":return{r:r,g:i,b:s,a:o,h:a,s:f,v:l,hex:p.call(n,"hex"),ahex:p.call(n,"ahex")};default:var v={};for(var m=0;m<e.length;m++)switch(e.charAt(m)){case"r":e.length==1?v=r:v.r=r;break;case"g":e.length==1?v=i:v.g=i;break;case"b":e.length==1?v=s:v.b=s;break;case"a":e.length==1?v=o:v.a=o;break;case"h":e.length==1?v=a:v.h=a;break;case"s":e.length==1?v=f:v.s=f;break;case"v":e.length==1?v=l:v.v=l}return v=={}?p.call(n,"all"):v}}if(c!=null&&c==n)return;var y=!1;e==null&&(e="");if(t==null){r!=null&&(r=null,y=!0),i!=null&&(i=null,y=!0),s!=null&&(s=null,y=!0),o!=null&&(o=null,y=!0),a!=null&&(a=null,y=!0),f!=null&&(f=null,y=!0),l!=null&&(l=null,y=!0),y&&h.call(n,c||n);return}switch(e.toLowerCase()){case"ahex":case"hex":var v=u.hexToRgba(t&&(t.ahex||t.hex)||t||"00000000");p.call(n,"rgba",{r:v.r,g:v.g,b:v.b,a:e=="ahex"?v.a:o!=null?o:255},c);break;default:if(t&&(t.ahex!=null||t.hex!=null)){p.call(n,"ahex",t.ahex||t.hex||"00000000",c);return}var w={},E=!1,S=!1;t.r!==undefined&&!e.indexOf("r")==-1&&(e+="r"),t.g!==undefined&&!e.indexOf("g")==-1&&(e+="g"),t.b!==undefined&&!e.indexOf("b")==-1&&(e+="b"),t.a!==undefined&&!e.indexOf("a")==-1&&(e+="a"),t.h!==undefined&&!e.indexOf("h")==-1&&(e+="h"),t.s!==undefined&&!e.indexOf("s")==-1&&(e+="s"),t.v!==undefined&&!e.indexOf("v")==-1&&(e+="v");for(var m=0;m<e.length;m++)switch(e.charAt(m)){case"r":if(S)continue;E=!0,w.r=t&&t.r&&t.r|0||t&&t|0||0,w.r<0?w.r=0:w.r>255&&(w.r=255),r!=w.r&&(r=w.r,y=!0);break;case"g":if(S)continue;E=!0,w.g=t&&t.g&&t.g|0||t&&t|0||0,w.g<0?w.g=0:w.g>255&&(w.g=255),i!=w.g&&(i=w.g,y=!0);break;case"b":if(S)continue;E=!0,w.b=t&&t.b&&t.b|0||t&&t|0||0,w.b<0?w.b=0:w.b>255&&(w.b=255),s!=w.b&&(s=w.b,y=!0);break;case"a":w.a=t&&t.a!=null?t.a|0:t!=null?t|0:255,w.a<0?w.a=0:w.a>255&&(w.a=255),o!=w.a&&(o=w.a,y=!0);break;case"h":if(E)continue;S=!0,w.h=t&&t.h&&t.h|0||t&&t|0||0,w.h<0?w.h=0:w.h>360&&(w.h=360),a!=w.h&&(a=w.h,y=!0);break;case"s":if(E)continue;S=!0,w.s=t&&t.s!=null?t.s|0:t!=null?t|0:100,w.s<0?w.s=0:w.s>100&&(w.s=100),f!=w.s&&(f=w.s,y=!0);break;case"v":if(E)continue;S=!0,w.v=t&&t.v!=null?t.v|0:t!=null?t|0:100,w.v<0?w.v=0:w.v>100&&(w.v=100),l!=w.v&&(l=w.v,y=!0)}if(y){if(E){r=r||0,i=i||0,s=s||0;var v=u.rgbToHsv({r:r,g:i,b:s});a=v.h,f=v.s,l=v.v}else if(S){a=a||0,f=f!=null?f:100,l=l!=null?l:100;var v=u.hsvToRgb({h:a,s:f,v:l});r=v.r,i=v.g,s=v.b}o=o!=null?o:255,h.call(n,c||n)}}},d=function(t){e.isFunction(t)&&c.push(t)},v=function(t){if(!e.isFunction(t))return;var n;while((n=e.inArray(t,c))!=-1)c.splice(n,1)},m=function(){c=null};e.extend(!0,n,{val:p,bind:d,unbind:v,destroy:m}),t&&(t.ahex!=null?p("ahex",t):t.hex!=null?p((t.a!=null?"a":"")+"hex",t.a!=null?{ahex:t.hex+u.intToHex(t.a)}:t):t.r!=null&&t.g!=null&&t.b!=null?p("rgb"+(t.a!=null?"a":""),t):t.h!=null&&t.s!=null&&t.v!=null&&p("hsv"+(t.a!=null?"a":""),t))},ColorMethods:{hexToRgba:function(e){e=this.validateHex(e);if(e=="")return{r:null,g:null,b:null,a:null};var t="00",n="00",r="00",i="255";return e.length==6&&(e+="ff"),e.length>6?(t=e.substring(0,2),n=e.substring(2,4),r=e.substring(4,6),i=e.substring(6,e.length)):(e.length>4&&(t=e.substring(4,e.length),e=e.substring(0,4)),e.length>2&&(n=e.substring(2,e.length),e=e.substring(0,2)),e.length>0&&(r=e.substring(0,e.length))),{r:this.hexToInt(t),g:this.hexToInt(n),b:this.hexToInt(r),a:this.hexToInt(i)}},validateHex:function(e){return e=e.toLowerCase().replace(/[^a-f0-9]/g,""),e.length>8&&(e=e.substring(0,8)),e},rgbaToHex:function(e){return this.intToHex(e.r)+this.intToHex(e.g)+this.intToHex(e.b)+this.intToHex(e.a)},intToHex:function(e){var t=(e|0).toString(16);return t.length==1&&(t="0"+t),t.toLowerCase()},hexToInt:function(e){return parseInt(e,16)},rgbToHsv:function(e){var t=e.r/255,n=e.g/255,r=e.b/255,i={h:0,s:0,v:0},s=0,o=0,u;return t>=n&&t>=r?(o=t,s=n>r?r:n):n>=r&&n>=t?(o=n,s=t>r?r:t):(o=r,s=n>t?t:n),i.v=o,i.s=o?(o-s)/o:0,i.s?(u=o-s,t==o?i.h=(n-r)/u:n==o?i.h=2+(r-t)/u:i.h=4+(t-n)/u,i.h=parseInt(i.h*60,10),i.h<0&&(i.h+=360)):i.h=0,i.s=i.s*100|0,i.v=i.v*100|0,i},hsvToRgb:function(e){var t={r:0,g:0,b:0,a:100},n=e.h,r=e.s,i=e.v;if(r==0)i==0?t.r=t.g=t.b=0:t.r=t.g=t.b=i*255/100|0;else{n==360&&(n=0),n/=60,r/=100,i/=100;var s=n|0,o=n-s,u=i*(1-r),a=i*(1-r*o),f=i*(1-r*(1-o));switch(s){case 0:t.r=i,t.g=f,t.b=u;break;case 1:t.r=a,t.g=i,t.b=u;break;case 2:t.r=u,t.g=i,t.b=f;break;case 3:t.r=u,t.g=a,t.b=i;break;case 4:t.r=f,t.g=u,t.b=i;break;case 5:t.r=i,t.g=u,t.b=a}t.r=t.r*255|0,t.g=t.g*255|0,t.b=t.b*255|0}return t}}};var s=e.jPicker.Color,o=e.jPicker.List,u=e.jPicker.ColorMethods;e.fn.jPicker=function(t){var a=arguments;return this.each(function(){var f=this,l=e.extend(!0,{},e.fn.jPicker.defaults,t);e(f).get(0).nodeName.toLowerCase()=="input"&&(e.extend(!0,l,{window:{bindToInput:!0,expandable:!0,input:e(f)}}),e(f).val()==""?(l.color.active=new s({hex:null}),l.color.current=new s({hex:null})):u.validateHex(e(f).val())&&(l.color.active=new s({hex:e(f).val(),a:l.color.active.val("a")}),l.color.current=new s({hex:e(f).val(),a:l.color.active.val("a")})));var c=null,h=null,p=null,d=null,v=null,m=null,g=null,y=null,b=null,w=null,E=null,S=null,x=null,T=null,N=null,C=null,k=null,L=null,A=null,O=null,M=null,_=null,D=null,P=null,H=null,B=null,j=null,F=null,I=null,q=null,R=null,U=null,z=function(e){var t=xt.active,n=Et.clientPath,r=t.val("hex"),i,s;l.color.mode=e;switch(e){case"h":Y.call(f,h,"transparent"),et.call(f,v,0),tt.call(f,v,100),et.call(f,m,260),tt.call(f,m,100),Y.call(f,p,"transparent"),et.call(f,y,0),tt.call(f,y,100),et.call(f,b,260),tt.call(f,b,100),et.call(f,x,260),tt.call(f,x,100),et.call(f,T,260),tt.call(f,T,100),et.call(f,C,260),tt.call(f,C,100),k.range("all",{minX:0,maxX:100,minY:0,maxY:100}),L.range("rangeY",{minY:0,maxY:360});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("s"),y:100-t.val("v")},k),L.val("y",360-t.val("h"),L);break;case"s":Y.call(f,h,"transparent"),et.call(f,v,-260),et.call(f,m,-520),et.call(f,y,-260),et.call(f,b,-520),et.call(f,C,260),tt.call(f,C,100),k.range("all",{minX:0,maxX:360,minY:0,maxY:100}),L.range("rangeY",{minY:0,maxY:100});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("h"),y:100-t.val("v")},k),L.val("y",100-t.val("s"),L);break;case"v":Y.call(f,h,"000000"),et.call(f,v,-780),et.call(f,m,260),Y.call(f,p,r),et.call(f,y,-520),et.call(f,b,260),tt.call(f,b,100),et.call(f,C,260),tt.call(f,C,100),k.range("all",{minX:0,maxX:360,minY:0,maxY:100}),L.range("rangeY",{minY:0,maxY:100});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("h"),y:100-t.val("s")},k),L.val("y",100-t.val("v"),L);break;case"r":i=-1040,s=-780,k.range("all",{minX:0,maxX:255,minY:0,maxY:255}),L.range("rangeY",{minY:0,maxY:255});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("b"),y:255-t.val("g")},k),L.val("y",255-t.val("r"),L);break;case"g":i=-1560,s=-1820,k.range("all",{minX:0,maxX:255,minY:0,maxY:255}),L.range("rangeY",{minY:0,maxY:255});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("b"),y:255-t.val("r")},k),L.val("y",255-t.val("g"),L);break;case"b":i=-2080,s=-2860,k.range("all",{minX:0,maxX:255,minY:0,maxY:255}),L.range("rangeY",{minY:0,maxY:255});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("r"),y:255-t.val("g")},k),L.val("y",255-t.val("b"),L);break;case"a":Y.call(f,h,"transparent"),et.call(f,v,-260),et.call(f,m,-520),et.call(f,y,260),et.call(f,b,260),tt.call(f,b,100),et.call(f,C,0),tt.call(f,C,100),k.range("all",{minX:0,maxX:360,minY:0,maxY:100}),L.range("rangeY",{minY:0,maxY:255});if(t.val("ahex")==null)break;k.val("xy",{x:t.val("h"),y:100-t.val("v")},k),L.val("y",255-t.val("a"),L);break;default:throw"Invalid Mode"}switch(e){case"h":break;case"s":case"v":case"a":tt.call(f,v,100),tt.call(f,y,100),et.call(f,x,260),tt.call(f,x,100),et.call(f,T,260),tt.call(f,T,100);break;case"r":case"g":case"b":Y.call(f,h,"transparent"),Y.call(f,p,"transparent"),tt.call(f,y,100),tt.call(f,v,100),et.call(f,v,i),et.call(f,m,i-260),et.call(f,y,s-780),et.call(f,b,s-520),et.call(f,x,s),et.call(f,T,s-260),et.call(f,C,260),tt.call(f,C,100)}if(t.val("ahex")==null)return;W.call(f,t)},W=function(e,t){(t==null||t!=L&&t!=k)&&J.call(f,e,t),K.call(f,e),Q.call(f,e),G.call(f,e)},X=function(e,t){var n=xt.active;if(t!=k&&n.val()==null)return;var r=e.val("all");switch(l.color.mode){case"h":n.val("sv",{s:r.x,v:100-r.y},t);break;case"s":case"a":n.val("hv",{h:r.x,v:100-r.y},t);break;case"v":n.val("hs",{h:r.x,s:100-r.y},t);break;case"r":n.val("gb",{g:255-r.y,b:r.x},t);break;case"g":n.val("rb",{r:255-r.y,b:r.x},t);break;case"b":n.val("rg",{r:r.x,g:255-r.y},t)}},V=function(e,t){var n=xt.active;if(t===w)n.val("s",{s:100-e.val("y")},t);else{if(t!=L&&n.val()==null)return;switch(l.color.mode){case"h":n.val("h",{h:360-e.val("y")},t);break;case"s":n.val("s",{s:100-e.val("y")},t);break;case"v":n.val("v",{v:100-e.val("y")},t);break;case"r":n.val("r",{r:255-e.val("y")},t);break;case"g":n.val("g",{g:255-e.val("y")},t);break;case"b":n.val("b",{b:255-e.val("y")},t);break;case"a":n.val("a",255-e.val("y"),t)}}},J=function(e,t){if(t!=k)switch(l.color.mode){case"h":var n=e.val("sv");k.val("xy",{x:n!=null?n.s:100,y:100-(n!=null?n.v:100)},t);break;case"s":case"a":var r=e.val("hv");k.val("xy",{x:r&&r.h||0,y:100-(r!=null?r.v:100)},t);break;case"v":var i=e.val("hs");k.val("xy",{x:i&&i.h||0,y:100-(i!=null?i.s:100)},t);break;case"r":var s=e.val("bg");k.val("xy",{x:s&&s.b||0,y:255-(s&&s.g||0)},t);break;case"g":var o=e.val("br");k.val("xy",{x:o&&o.b||0,y:255-(o&&o.r||0)},t);break;case"b":var u=e.val("rg");k.val("xy",{x:u&&u.r||0,y:255-(u&&u.g||0)},t)}if(t!=L)switch(l.color.mode){case"h":L.val("y",360-(e.val("h")||0),t);break;case"s":var a=e.val("s");L.val("y",100-(a!=null?a:100),t);break;case"v":var f=e.val("v");L.val("y",100-(f!=null?f:100),t);break;case"r":L.val("y",255-(e.val("r")||0),t);break;case"g":L.val("y",255-(e.val("g")||0),t);break;case"b":L.val("y",255-(e.val("b")||0),t);break;case"a":var c=e.val("a");L.val("y",255-(c!=null?c:255),t);var a=e.val("s");w.val("y",100-(a!=null?a:100),t)}},K=function(e){try{var t=e.val("all");P.css({backgroundColor:t&&"#"+t.hex||"transparent"}),tt.call(f,P,t&&Math.precision(t.a*100/255,4)||0)}catch(n){}},Q=function(e){switch(l.color.mode){case"h":Y.call(f,h,(new s({h:e.val("h")||0,s:100,v:100})).val("hex"));break;case"s":case"a":var t=e.val("s");tt.call(f,m,100-(t!=null?t:100));break;case"v":var n=e.val("v");tt.call(f,v,n!=null?n:100);break;case"r":tt.call(f,m,Math.precision((e.val("r")||0)/255*100,4));break;case"g":tt.call(f,m,Math.precision((e.val("g")||0)/255*100,4));break;case"b":tt.call(f,m,Math.precision((e.val("b")||0)/255*100))}var r=255;tt.call(f,g,Math.precision((255-(r||0))*100/255,4))},G=function(e){switch(l.color.mode){case"h":var t=255;tt.call(f,N,Math.precision((255-(t||0))*100/255,4));break;case"s":var n=e.val("hva"),r=new s({h:n&&n.h||0,s:100,v:n!=null?n.v:100});Y.call(f,p,r.val("hex")),tt.call(f,b,100-(n!=null?n.v:100)),tt.call(f,N,Math.precision((255-(n&&n.a||0))*100/255,4));break;case"v":var i=e.val("hsa"),o=new s({h:i&&i.h||0,s:i!=null?i.s:100,v:100});Y.call(f,p,o.val("hex")),tt.call(f,N,Math.precision((255-(i&&i.a||0))*100/255,4));break;case"r":case"g":case"b":var u=0,a=0,c=e.val("rgba");l.color.mode=="r"?(u=c&&c.b||0,a=c&&c.g||0):l.color.mode=="g"?(u=c&&c.b||0,a=c&&c.r||0):l.color.mode=="b"&&(u=c&&c.r||0,a=c&&c.g||0);var h=a>u?u:a;tt.call(f,b,u>a?Math.precision((u-a)/(255-a)*100,4):0),tt.call(f,x,a>u?Math.precision((a-u)/(255-u)*100,4):0),tt.call(f,T,Math.precision(h/255*100,4)),tt.call(f,N,Math.precision((255-(c&&c.a||0))*100/255,4));break;case"a":var t=e.val("a"),n=e.val("hva");n!==null?r=new s({h:n&&n.h||0,s:100,v:n!=null?n.v:100}):r=new s,Y.call(f,p,e.val("hex")),Y.call(f,d,r.val("hex")),tt.call(f,N,t!=null?0:100),tt.call(f,C,t!=null?100:0),tt.call(f,S,100-(n!=null?n.v:100))}},Y=function(e,t){e.css({backgroundColor:t&&t.length==6&&"#"+t||"transparent"})},Z=function(e,t){e.css({backgroundImage:"url('"+t+"')"})},et=function(e,t){e.css({top:t+"px"})},tt=function(e,t){e.css({visibility:t>0?"visible":"hidden"}),t>0&&t<100?e.css({opacity:Math.precision(t/100,4)}):(t==0||t==100)&&e.css({opacity:""})},nt=function(){xt.active.val("ahex",xt.current.val("ahex"))},rt=function(){xt.current.val("ahex",xt.active.val("ahex"))},it=function(){nt.call(f)},st=function(){nt.call(f),e.isFunction(mt)&&mt.call(f,xt.active,j)},ot=function(){rt.call(f),e.isFunction(dt)&&dt.call(f,xt.active,B)},ut=function(){gt.call(f)},at=function(e,t){var n=e.val("hex");H.css({backgroundColor:n&&"#"+n||"transparent"}),tt.call(f,H,Math.precision(e.a*100/255,4))},ft=function(e,t){var n=e.val("hex"),r=e.val("va");I.css({backgroundColor:n&&"#"+n||"transparent"}),tt.call(f,q,Math.precision((255-(r&&r.a||0))*100/255,4)),l.window.bindToInput&&l.window.updateInputColor&&l.window.input.css({backgroundColor:n&&"#"+n||"transparent",color:r==null||r.v>75?"#000000":"#ffffff"})},lt=function(t){var n=l.window.element,r=l.window.page;O=parseInt(c.css("left"),10),M=parseInt(c.css("top"),10),_=t.pageX,D=t.pageY,e(document).bind("mousemove",ct).bind("mouseup",ht),t.preventDefault()},ct=function(t){return c.css({left:O-(_-t.pageX)+"px",top:M-(D-t.pageY)+"px"}),l.window.expandable&&!e.support.boxModel&&c.prev().css({left:c.css("left"),top:c.css("top")}),t.stopPropagation(),t.preventDefault(),!1},ht=function(t){return e(document).unbind("mousemove",ct).unbind("mouseup",ht),t.stopPropagation(),t.preventDefault(),!1},pt=function(t){return t.preventDefault(),t.stopPropagation(),xt.active.val("ahex",e(this).attr("title")||null,t.target),!1},dt=e.isFunction(a[1])&&a[1]||null,vt=e.isFunction(a[2])&&a[2]||null,mt=e.isFunction(a[3])&&a[3]||null,gt=function(){xt.current.val("ahex",xt.active.val("ahex"));var t=function(){if(!l.window.expandable||e.support.boxModel)return;var t=c.find("table:first");c.before("<iframe/>"),c.prev().css({width:t.width(),height:c.height(),opacity:0,position:"absolute",left:c.css("left"),top:c.css("top")})}},yt=function(){var t=function(){if(!l.window.expandable||e.support.boxModel)return;c.prev().remove()}},bt=function(){var t=l.window,i=null;c=e(f),c.addClass("nlui-colorpicker Container"),l.mode==="flat"&&c.addClass("nlui-colorpicker Container flat");var o=xt.active.val("all");t.alphaPrecision<0?t.alphaPrecision=0:t.alphaPrecision>2&&(t.alphaPrecision=2);var u='<div class="column"><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+Et.clientPath+Et.colorMap.arrow.file+'" class="Arrow"/></div></div>';u+='<div class="column"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+Et.clientPath+Et.colorBar.arrow.file+'" class="Arrow"/></div></div>',u+='<div class="column"><div class="Bar"><span class="HsvBar">&nbsp;</span><span class="HsvBarOpacity">&nbsp;</span><img src="'+Et.clientPath+Et.colorBar.arrow.file+'" class="Arrow"/></div></div>',u+='<div class="column"><div class="Grid">&nbsp;</div>',u+='<div class="Hex"><label>#:<input type="text" maxlength="6" class="Hex" value="'+(o!=null?o.hex:"")+'"/></label></div></div>',u+='<div class="column"><div class="Preview"><div><span class="Active">&nbsp;</span></div></div></div><div style="clear:both"></div>',c.html(u),h=c.find("div.Map:first"),p=c.find("div.Bar:first"),d=c.find("div.Bar:last");var a=h.find("span"),O=p.find("span");v=a.filter(".Map1:first"),m=a.filter(".Map2:first"),m=a.filter(".Map2:first"),g=a.filter(".Map3:first"),y=O.filter(".Map1:first"),b=O.filter(".Map2:first"),E=c.find("span.HsvBar:first"),S=c.find("span.HsvBarOpacity:first"),x=O.filter(".Map3:first"),T=O.filter(".Map4:first"),N=O.filter(".Map5:first"),C=O.filter(".Map6:first"),k=new n(h,{map:{width:Et.colorMap.width,height:Et.colorMap.height},arrow:{image:Et.clientPath+Et.colorMap.arrow.file,width:Et.colorMap.arrow.width,height:Et.colorMap.arrow.height}}),k.bind(X),L=new n(p,{map:{width:Et.colorBar.width,height:Et.colorBar.height},arrow:{image:Et.clientPath+Et.colorBar.arrow.file,width:Et.colorBar.arrow.width,height:Et.colorBar.arrow.height}}),L.bind(V),w=new n(d,{map:{width:Et.hsvBar.width,height:Et.hsvBar.height},arrow:{image:Et.clientPath+Et.hsvBar.arrow.file,width:Et.hsvBar.arrow.width,height:Et.hsvBar.arrow.height}}),w.bind(V),A=new r(c,xt.active,t.expandable&&t.bindToInput?t.input:null,t.alphaPrecision);var M=o!=null?o.hex:null,_=c.find(".Preview"),D=c.find(".Button");P=_.find(".Active:first").css({backgroundColor:M&&"#"+M||"transparent"}),H=_.find(".Current:first").css({backgroundColor:M&&"#"+M||"transparent"}).bind("click",it),tt.call(f,H,Math.precision(xt.current.val("a")*100)/255,4),B=D.find(".Ok:first").bind("click",ot),j=D.find(".Cancel:first").bind("click",st),F=c.find(".Grid:first"),Z.call(f,v,Et.clientPath+"colorpicker-maps.png"),Z.call(f,m,Et.clientPath+"colorpicker-maps.png"),Z.call(f,g,Et.clientPath+"colorpicker-map-opacity.png"),Z.call(f,y,Et.clientPath+"colorpicker-bars.png"),Z.call(f,b,Et.clientPath+"colorpicker-bars.png"),Z.call(f,x,Et.clientPath+"colorpicker-bars.png"),Z.call(f,T,Et.clientPath+"colorpicker-bars.png"),Z.call(f,E,Et.clientPath+"colorpicker-bars.png"),Z.call(f,S,Et.clientPath+"colorpicker-bars.png"),Z.call(f,N,Et.clientPath+"colorpicker-bar-opacity.png"),Z.call(f,C,Et.clientPath+"colorpicker-alphabar.png"),Z.call(f,_.find("div:first"),Et.clientPath+"colorpicker-preview-opacity.png");if(xt.quickList&&xt.quickList.length>0){var I="";for(var q=0;q<xt.quickList.length;q++){(typeof xt.quickList[q]).toString().toLowerCase()=="string"&&(xt.quickList[q]=new s({hex:xt.quickList[q]}));var R=xt.quickList[q].val("a"),U=xt.quickList[q].val("ahex");!t.alphaSupport&&U&&(U=U.substring(0,6));var J=xt.quickList[q].val("hex");I+='<span class="QuickColor"'+(U&&' title="#'+U+'"'||"")+' style="background-color:'+(J&&"#"+J||"")+";"+(J?"":"background-image:url("+Et.clientPath+"colorpicker-nocolor.png)")+(t.alphaSupport&&R&&R<255?";opacity:"+Math.precision(R/255,4)+";filter:Alpha(opacity="+Math.precision(R/2.55,4)+")":"")+'">&nbsp;</span>'}Z.call(f,F,Et.clientPath+"colorpicker-bar-opacity.png"),F.html(I),F.find(".QuickColor").click(pt)}z.call(f,l.color.mode),xt.active.bind(W),l.window.liveUpdate&&e.isFunction(vt)&&xt.active.bind(vt),xt.current.bind(at),gt.call(f)},wt=function(){H.unbind("click",it),j.unbind("click",st),B.unbind("click",ot),c.find(".QuickColor").unbind("click",pt),h=null,p=null,v=null,m=null,g=null,y=null,b=null,x=null,T=null,N=null,C=null,k.destroy(),k=null,L.destroy(),L=null,A.destroy(),A=null,P=null,H=null,B=null,j=null,F=null,dt=null,mt=null,vt=null,c.html("");for(i=0;i<o.length;i++)o[i]==f&&o.splice(i,1)},Et=l.images,St=l.localization,xt={active:new s({h:360,s:100,v:100}),current:new s({h:360,s:100,v:100}),quickList:l.color.quickList};e.extend(!0,f,{validate:ot,cancel:st,commitCallback:dt,liveCallback:vt,cancelCallback:mt,color:xt,show:gt,hide:yt,destroy:wt}),o.push(f),bt.call(f)})},e.fn.jPicker.defaults={window:{liveUpdate:!1,alphaSupport:!1,alphaPrecision:0},color:{mode:"a",active:new s,quickList:[new s({h:360,s:33,v:100}),new s({h:360,s:66,v:100}),new s({h:360,s:100,v:100}),new s({h:360,s:100,v:75}),new s({h:360,s:100,v:50}),new s({h:180,s:0,v:100}),new s({h:30,s:33,v:100}),new s({h:30,s:66,v:100}),new s({h:30,s:100,v:100}),new s({h:30,s:100,v:75}),new s({h:30,s:100,v:50}),new s({h:180,s:0,v:90}),new s({h:60,s:33,v:100}),new s({h:60,s:66,v:100}),new s({h:60,s:100,v:100}),new s({h:60,s:100,v:75}),new s({h:60,s:100,v:50}),new s({h:180,s:0,v:80}),new s({h:90,s:33,v:100}),new s({h:90,s:66,v:100}),new s({h:90,s:100,v:100}),new s({h:90,s:100,v:75}),new s({h:90,s:100,v:50}),new s({h:180,s:0,v:70}),new s({h:120,s:33,v:100}),new s({h:120,s:66,v:100}),new s({h:120,s:100,v:100}),new s({h:120,s:100,v:75}),new s({h:120,s:100,v:50}),new s({h:180,s:0,v:60}),new s({h:150,s:33,v:100}),new s({h:150,s:66,v:100}),new s({h:150,s:100,v:100}),new s({h:150,s:100,v:75}),new s({h:150,s:100,v:50}),new s({h:180,s:0,v:50}),new s({h:180,s:33,v:100}),new s({h:180,s:66,v:100}),new s({h:180,s:100,v:100}),new s({h:180,s:100,v:75}),new s({h:180,s:100,v:50}),new s({h:180,s:0,v:40}),new s({h:210,s:33,v:100}),new s({h:210,s:66,v:100}),new s({h:210,s:100,v:100}),new s({h:210,s:100,v:75}),new s({h:210,s:100,v:50}),new s({h:180,s:0,v:30}),new s({h:240,s:33,v:100}),new s({h:240,s:66,v:100}),new s({h:240,s:100,v:100}),new s({h:240,s:100,v:75}),new s({h:240,s:100,v:50}),new s({h:180,s:0,v:20}),new s({h:270,s:33,v:100}),new s({h:270,s:66,v:100}),new s({h:270,s:100,v:100}),new s({h:270,s:100,v:75}),new s({h:270,s:100,v:50}),new s({h:180,s:0,v:10}),new s({h:300,s:33,v:100}),new s({h:300,s:66,v:100}),new s({h:300,s:100,v:100}),new s({h:300,s:100,v:75}),new s({h:300,s:100,v:50}),new s({h:180,s:0,v:0}),new s({h:330,s:33,v:100}),new s({h:330,s:66,v:100}),new s({h:330,s:100,v:100}),new s({h:330,s:100,v:75}),new s({h:330,s:100,v:50}),new s]},images:{clientPath:"/nl/core/img/",colorMap:{width:256,height:256,arrow:{file:"colorpicker-mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"colorpicker-rangearrows.gif",width:20,height:7}},hsvBar:{width:20,height:256,arrow:{file:"colorpicker-rangearrows.gif",width:20,height:7}},picker:{file:"colorpicker-picker.gif",width:25,height:24}}}})(jQuery,"1.1.6"),function(e,t,n){e.widget("NL.nlColorPicker",e.NL.nlWidget,{options:{onChange:function(e,t){},onValidation:function(e,t){},onValueChanged:function(e){},mode:"flat",elementIsLauncher:!1,readOnly:!1,disabled:!1,dialogTitle:xtk_core.colorPicker_dialogTitle(),zoomIcon:"nlui-icon ui-icon-pencil"},_updateVisual:function(){this.options.value!==n&&this.element.css("background-color",this.options.value.toCssString())},_create:function(){this._$value=this.options.value||new NL.CSS.Color("#ff0000");var t=this,n=this.element,r=this.options;r.mode==="popup"&&(n.addClass("ui-widget nlui-colorpicker"),this._$inputContainer=e("<div></div>").addClass("nlui-colorpicker-div-container"),this._$zoomButtonContainer=e("<div></div>").addClass("nlui-colorpicker-button").click(function(){t.open()}).toggleClass("nlui-colorpicker-button-disabled",r.disabled),this._$zoomButton=e("<div></div>").addClass("nlui-colorpicker-button-zoom ui-icon").addClass(r.zoomIcon).appendTo(this._$zoomButtonContainer),r.readOnly||this._$inputContainer.append(this._$zoomButtonContainer),n.append(this._$inputContainer)),this._$host=r.mode!=="popup"?n:e("<div></div>").appendTo("body");var i={mode:r.mode,window:{liveUpdate:r.mode==="popup"?!1:!0},color:{active:this._$value}},s=function(e){var n=e.val("r"),i=e.val("g"),s=e.val("b"),o=Math.precision(e.val("a")/255,2),u=new NL.CSS.Color(n,i,s,o);r.mode!=="flat"&&t._$host.nlDialog("close");var a=e.val("all"),f=null,l=null;a&&(f=a.hex,l=a.a),t._$value=u,r.mode!=="flat"&&(r.onChange(t._$value),r.onValueChanged(t._$value))},o=function(){r.mode!=="flat"&&t._$host.nlDialog("close")},u=function(n,i){var s=n.val("all"),o=null,u=null,a=n.val("r"),f=n.val("g"),l=n.val("b"),c=Math.precision(n.val("a")/255,2),h=new NL.CSS.Color(a,f,l,c);s&&(o=s.hex,u=s.a),t._$value=h,e.isFunction(r.onChange)&&r.mode==="flat"&&r.onChange(t._$value),e.isFunction(r.onValueChanged)&&r.mode!=="flat"&&r.onValueChanged(t._$value)};if(r.mode!=="flat"){var a={};a[xtk_core.dialog_ok()]=function(){t.validate()},a[xtk_core.dialog_cancel()]=function(){t.cancel()},this._$host.nlDialog({modal:!0,autoOpen:!1,resizable:!1,dialogClass:"nlui-colorpicker-dialog",title:r.dialogTitle,width:595,buttons:a}),r.elementIsLauncher&&n.click(function(){t._$host.nlDialog("open")})}this._$host.jPicker(i,s,u,o)},setValue:function(e){var t=e.getHex()?e.getHex():"ff0000",n=e.getAlpha()?e.getAlpha():1;this._$host[0].color.current.val("hex",t),this._$host[0].color.current.val("a",n*255),this._$host[0].color.active.val("hex",t),this._$host[0].color.active.val("a",n*255),this.options.value=e,this.options.mode==="popup"&&this._updateVisual()},getValue:function(){return this._$value},open:function(){var e=this;e.options.mode!=="flat"&&!e.options.disabled&&e._$host.nlDialog("open")},validate:function(){this._$host[0].validate()},cancel:function(){this._$host[0].cancel()}})}(jQuery,window)
;"use strict";(function(){$.widget("NL.nlBorderEdit",$.NL.nlWidget,{options:{value:undefined,disabled:!1,readOnly:!1,error:null,onErrorChange:function(e){},onValueChanged:function(e){},onValueTouched:function(e){},config:{showPreview:!1}},_create:function(){var t=this,n=this.options;this._$cssBorderObject=n.value||new NL.CSS.Border,this._$previewDisplay=$("<div></div>").addClass("display"),this._$previewContainer=$('<div class="container transparent"></div>'),this._$overlayPicker=$('<div class="overlaypicker"></div>').append($("<div>"+xtk_core.borderEdit_background()+NL.session.locale.settings.colonSuffix+"</div>"),$("<div></div>").nlMultipleChoice({values:[{label:xtk_core.borderEdit_transparent(),value:"transparent"},{label:xtk_core.borderEdit_light(),value:"light"},{label:xtk_core.borderEdit_dark(),value:"dark"}],value:"transparent",columns:1,inputType:"radio",onValueChanged:function(n){t._$previewContainer.removeClass("transparent dark light").addClass(n)}})),this._$preview=$('<div class="preview"></div>').append($("<div>"+xtk_core.borderEdit_preview()+NL.session.locale.settings.colonSuffix+"</div>"),$('<div class="separator"></div>'),this._$previewContainer.append(this._$previewDisplay),this._$overlayPicker),this._$form=$("<div></div>").append($('<div data-nl-jpath="borderStyle"></div>')).append($('<div data-nl-jpath="borderWidth"></div>')).append($('<div data-nl-jpath="borderColor"></div>')),this._$container=$('<div class="nlui-borderedit">').append(this._$form),this.options.config.showPreview&&this._$container.append(this._$preview),this._$container.appendTo(this.element);var r=[{name:"none",label:xtk_core.borderEdit_none()},{name:"solid",label:xtk_core.borderEdit_solid()},{name:"dotted",label:xtk_core.borderEdit_dotted()},{name:"dashed",label:xtk_core.borderEdit_dashed()},{name:"double",label:xtk_core.borderEdit_double()},{name:"groove",label:xtk_core.borderEdit_groove()},{name:"ridge",label:xtk_core.borderEdit_ridge()},{name:"inset",label:xtk_core.borderEdit_inset()},{name:"outset",label:xtk_core.borderEdit_outset()}],i=!n.disabled,s=this._$cssBorderObject.get("borderStyle");this._$model={borderStyle:{label:xtk_core.borderEdit_style(),type:"enum",selection:"mono",value:this._$cssBorderObject.get("borderStyle"),options:r,disabled:!i},borderWidth:{label:xtk_core.borderEdit_size(),type:"number",value:this._$cssBorderObject.get("borderWidth"),disabled:!n.disabled&&s==="none"},borderColor:{label:xtk_core.borderEdit_color(),type:"color",value:this._$cssBorderObject.get("borderColor"),disabled:!n.disabled&&s==="none"}},this._$controller=new NL.UI.Controller({model:this._$model,onChange:function(r,i){r==="borderStyle"&&(this.setItemAttribute("borderWidth","disabled",!n.disabled&&i==="none"),this.setItemAttribute("borderColor","disabled",!n.disabled&&i==="none"),this.refresh()),t._$cssBorderObject.set(r,i),t._valueChanged()}}),this._$form.nlForm({controller:this._$controller,readOnly:n.readOnly}),this._$cssBorderObject.applyAttributesTo(this._$previewDisplay)},_refreshForm:function(){this._$controller.setValue("borderWidth",this._$cssBorderObject.get("borderWidth")),this._$controller.setValue("borderColor",this._$cssBorderObject.get("borderColor")),this._$controller.setValue("borderStyle",this._$cssBorderObject.get("borderStyle"))},_valueChanged:function(){this._refreshForm(),this._$cssBorderObject.applyAttributesTo(this._$previewDisplay),this.options.onValueChanged(this._$cssBorderObject)},getValue:function(){return this._$cssBorderObject},setValue:function(t){if(!t)return;this._$cssBorderObject=t,this._valueChanged()},destroy:function(){}})})()
;"use strict";(function(e,t,n,r){e.widget("NL.nlBackgroundEdit",e.NL.nlWidget,{options:{value:r,disabled:!1,readOnly:!1,error:null,onErrorChange:function(e){},onValueChanged:function(e){},onValueTouched:function(e){},config:{showPreview:!1}},_create:function(){var n=this,r=this.options;this._$cssBackgroundObject=r.value||new NL.CSS.Background(new NL.CSS.Color(null),"none","0% 0%","repeat"),this._$previewDisplay=e("<div></div>").addClass("display"),this._$previewContainer=e('<div class="container transparent"></div>'),this._$overlayPicker=e('<div class="overlaypicker"></div>').append(e("<div>"+xtk_core.backgroundEdit_background()+NL.session.locale.settings.colonSuffix+"</div>"),e("<div></div>").nlMultipleChoice({values:[{label:xtk_core.backgroundEdit_transparent(),value:"transparent"},{label:xtk_core.backgroundEdit_light(),value:"light"},{label:xtk_core.backgroundEdit_dark(),value:"dark"}],value:"transparent",columns:1,inputType:"radio",onValueChanged:function(t){n._$previewContainer.removeClass("transparent dark light").addClass(t)}})),this._$preview=e('<div class="preview"></div>').append(e("<div>"+xtk_core.backgroundEdit_preview()+NL.session.locale.settings.colonSuffix+"</div>"),e('<div class="separator"></div>'),this._$previewContainer.append(this._$previewDisplay),this._$overlayPicker),this._$form=e("<div></div>").append(e('<div data-nl-jpath="color"></div>')),this._$container=e('<div class="nlui-backgroundedit">').append(this._$form),this.options.config.showPreview&&this._$container.append(this._$preview),this._$container.appendTo(this.element);var i=[{name:"none",label:xtk_core.backgroundEdit_none()},{name:"horizontal",label:xtk_core.backgroundEdit_horizontal()},{name:"vertical",label:xtk_core.backgroundEdit_vertical()},{name:"both",label:xtk_core.backgroundEdit_both()}],s=[{name:"left top",label:xtk_core.backgroundEdit_left_top()},{name:"center top",label:xtk_core.backgroundEdit_center_top()},{name:"right top",label:xtk_core.backgroundEdit_right_top()},{name:"left center",label:xtk_core.backgroundEdit_left_center()},{name:"center center",label:xtk_core.backgroundEdit_center_center()},{name:"right center",label:xtk_core.backgroundEdit_right_center()},{name:"left bottom",label:xtk_core.backgroundEdit_left_bottom()},{name:"center bottom",label:xtk_core.backgroundEdit_center_bottom()},{name:"right bottom",label:xtk_core.backgroundEdit_right_bottom()}],o=NL.isNundef(r.enabled)?!0:r.enabled;this._$model={color:{label:xtk_core.backgroundEdit_color(),type:"color",value:this._$cssBackgroundObject.get("color"),disabled:!o},image:{label:xtk_core.backgroundEdit_image(),type:"text",value:this._$cssBackgroundObject.get("image"),disabled:!o},position:{label:xtk_core.backgroundEdit_position(),type:"enum",selection:"mono",value:this._$cssBackgroundObject.get("position"),options:s,disabled:!o},tiling:{label:xtk_core.backgroundEdit_repeat(),type:"enum",selection:"mono",value:this._$cssBackgroundObject.get("tiling"),options:i,disabled:!o}},this._$controller=new NL.UI.Controller({model:this._$model,onChange:function(t,r){n._$cssBackgroundObject.set(t,r),n._valueChanged()}}),this._$container.nlForm({controller:this._$controller,readOnly:r.readOnly}),this._$cssBackgroundObject.applyAttributesTo(this._$previewDisplay)},_valueChanged:function(){this._refreshForm(),this._$cssBackgroundObject.applyAttributesTo(this._$previewDisplay),this.options.onValueChanged(this._$cssBackgroundObject)},_refreshForm:function(){this._$controller.setValue("color",this._$cssBackgroundObject.get("color")),this._$controller.setValue("image",this._$cssBackgroundObject.get("image")),this._$controller.setValue("position",this._$cssBackgroundObject.get("position")),this._$controller.setValue("tiling",this._$cssBackgroundObject.get("tiling"))},getValue:function(){return this._$cssBackgroundObject},setValue:function(t){if(!t)return;this._$cssBackgroundObject=t,this._valueChanged()},destroy:function(){}})})(jQuery,window,document)
;"use strict";(function(e,t,n){e.widget("NL.nlExprEditor",e.NL.nlWidget,{options:{onValueChanged:function(e){},readOnly:!1,disabled:!1,value:n,config:{help:null,defaultRenderingValue:null}},_create:function(){var n=this,r=this.options;this._value=r.value,this._$form=e("<div></div>").append(e('<div data-nl-jpath="expression"></div>').nlMore()),this._$container=this._$form.appendTo(this.element),this._$model={expression:{type:"memo",value:this._value,help:r.config.help,labelsPosition:"none"}},this._$controller=new NL.UI.Controller({model:this._$model,onChange:function(t,r){n._value=r}}),this._$container.nlForm({controller:this._$controller,readOnly:r.readOnly})},getValue:function(){return this._value},setValue:function(t){this._value=t,this._$controller.setValue("expression",t),this.options.onValueChanged(t)}})})(jQuery,window)
;"use strict";(function(e,t,n,r){e.widget("NL.nlGeometryEdit",e.NL.nlWidget,{options:{enabled:!0,onValueChanged:function(e){},value:r,config:{mode:"semi"}},_create:function(){var n=this,r=this.options;this._$geometryObject=this.options.value||new NL.CSS.Geometry,this._$form=e("<div></div>"),r.config.mode==="full"&&this._$form.append(e('<div data-nl-jpath="top"></div>')).append(e('<div data-nl-jpath="left"></div>')),this._$form.append(e('<div data-nl-jpath="width"></div>')).append(e('<div data-nl-jpath="height"></div>')),this._$container=this._$form.appendTo(this.element),this._$model={top:{label:xtk_core.geometryEdit_top(),type:"number",value:this._$geometryObject.get("top"),disabled:!r.enabled,params:{range:{min:0,strict:!1}}},left:{label:xtk_core.geometryEdit_left(),type:"number",value:this._$geometryObject.get("left"),disabled:!r.enabled,params:{range:{min:0,strict:!1}}},width:{label:xtk_core.geometryEdit_width(),type:"number",value:this._$geometryObject.get("width"),disabled:!r.enabled,params:{range:{min:0,strict:!1}}},height:{label:xtk_core.geometryEdit_height(),type:"number",value:this._$geometryObject.get("height"),disabled:!r.enabled,params:{range:{min:0,strict:!1}}}},this._$controller=new NL.UI.Controller({model:this._$model,onChange:function(t,r){n._$geometryObject.set(t,r),n._valueChanged()}}),this._$container.nlForm({controller:this._$controller,readOnly:r.readOnly,disabled:!r.enabled})},_valueChanged:function(){this._refreshForm(),this.options.onValueChanged(this._$geometryObject)},_refreshForm:function(){this._$controller.setValue("top",this._$geometryObject.get("top")),this._$controller.setValue("left",this._$geometryObject.get("left")),this._$controller.setValue("width",this._$geometryObject.get("width")),this._$controller.setValue("height",this._$geometryObject.get("height"))},getValue:function(){return this._$geometryObject},setValue:function(t){if(!t)return;this._$geometryObject=t,this._valueChanged()},destroy:function(){}})})(jQuery,window,document)
;"use strict";(function(e,t,n,r){var i={options:{value:r,disabled:!1,readOnly:!1,error:null,onErrorChange:function(e){},onValueChanged:function(e){},onValueTouched:function(e){},config:{items:[],instruction:null,width:null,style:null}},_create:function(){NL.Widgets.LayoutManager.registerWidget(this),this.element.addClass("nlui-dropdown"),this._value=this.options.value,this._lastChangedValue=null,this._items=[],this._itemCount=0,this.$wrapper=null,this.$listHeader=null,this.$labelWrapper=null,this.$labelText=null,this.$headerIcon=null,this.$beamWrapper=null,this.$listWrapper=null,this.$list=null,this._width=null,this.options.popableManager.addPopable(this),this.options.config.items.sort(function(e,t){return!NL.isNundef(e.order)&&!NL.isNundef(t.order)?e.order-t.order:-1});for(var t=0;t<this.options.config.items.length;t++)this.addItem(this.options.config.items[t],!0);this._refreshMarkup(),this._itemCount>0&&(NL.isNundef(this._value)&&!this.options.config.instruction&&(this._value=this.options.config.items[0].value),this.setValue(this._value))},_refreshMarkup:function(){var n=this;n.element.empty(),n.$wrapper=e('<dl class="nlui-dropdown-header"></dl>').appendTo(n.element),n.$listHeader=e('<dt class="dropdown-header"></dt>').appendTo(n.$wrapper),n.$labelWrapper=e('<span class="header-text-wrapper"></span>').appendTo(n.$listHeader),n.$labelText=e('<span class="text"></span>').appendTo(n.$labelWrapper),n.$beamWrapper=e("<dd></dd>").appendTo(n.$wrapper);if(!n.options.readOnly){n.$headerArrow=e('<span class="header-arrow"></span>').prependTo(n.$listHeader).append('<span class="nlui-icon ui-icon-triangle-1-s"></span>'),n.$beam=e('<ul class="beam-list"></ul>').appendTo(n.$beamWrapper),n.options.config.instruction&&n._drawItem({label:n.options.config.instruction},!0);for(var r=0;r<n._items.length;r++)n._drawItem(n._items[r],!0)}},_refreshDisplay:function(t){var n=this;t&&n._refreshMarkup(),n.options.config.width&&this.$wrapper.width(this.options.config.width),!n.options.disabled&&!n.options.readOnly&&n._items.length>1&&(n.$listHeader.off("click"),n.$listHeader.on("click",function(e){n.$listWrapper||(n._createList(),n._refreshWidth()),n.$wrapper.addClass("nlui-dropdown-active");var t=n.$list.is(":visible");t?n.collapse():(n.showList(),n.stopPropagation(e))})),n._updateClasses(),n._refreshDropdownHeader(),n.collapse()},_createList:function(){var n=this;n.$listWrapper=e('<div class="nlui-dropdown-list"></div>').appendTo("body"),n.$list=e('<ul class="item-list"></ul>').appendTo(n.$listWrapper),n.$list.empty(),n.$list.append(e('<li class="top-separator" style="border-width: 3px"></li>'));for(var r=0;r<n._items.length;r++)n._drawItem(n._items[r]);n._refreshSelectedItemClass()},showList:function(){var t=this;t.$listWrapper.offset({top:t.$wrapper.offset().top+parseInt(t.$wrapper.outerHeight(!0),10)-1,left:t.$wrapper.offset().left}).show(),t.$list.slideDown("fast")},setConfig:function(t,n){this.options.config[t]=n,this._refreshDisplay(!0)},setDisabled:function(t){this.options.disabled=t,t&&this.$listHeader.off("click"),this._refreshDisplay(!0)},setReadOnly:function(t){this.options.readOnly=t,t&&this.$listHeader.off("click"),this._refreshDisplay(!0)},setError:function(t){this.options.error=t,this._refreshDisplay(),this._lastChangedValue=r},_setError:function(t){this.setError(t),this.options.onErrorChange(this.options.error)},setValue:function(t){this._value=t,this._refreshDisplay(),this._refreshSelectedItemClass()},_setValue:function(t){this.setValue(t),this.options.onValueTouched(this._value),this.options.onValueChanged(this._value)},getValue:function(){return this._items[this._value]},addItem:function(t,n){this._items.push(t),this._itemCount++,n||this._refreshDisplay(!0)},_drawItem:function(n,r){var i=this,s={},o,u,a;o=r?i.$beam:i.$list,u=e('<li class="nlui-dropdown-item"></li>').appendTo(o),a=e("<a></a>").appendTo(u);if(n.icon){var f=NL.View.genImage(n.icon,null,!1,0);e('<span class="icon-wrapper"></span>').append(f).appendTo(a),n.$genIcon=f}return e('<span class="label-wrapper"></span>').text(n.label).appendTo(a),r||(u.on("click",function(){n.value!==i._value&&i._setValue(n.value),i.collapse()}),n.$li=u),u},_refreshDropdownHeader:function(){var n=this,r;if(!NL.isNundef(n._value)){var i=n._getItem(n._value);r=i.label;if(i&&!NL.isNundef(i.icon)){this.$headerIcon||(this.$headerIcon=e('<span class="header-icon"></span>').insertBefore(n.$labelWrapper));var s=NL.View.genImage(i.icon,null,!1,0);this.$headerIcon.html(s)}else this.$headerIcon&&(this.$headerIcon.remove(),this.$headerIcon=null)}else r=n.options.config.instruction;n.$labelText.text(r),n._updateClasses()},_refreshWidth:function(){var t,n,r,i;this.options.config.width?this._width=this.options.config.width:(r=this.$wrapper.width(),t=this.$listHeader.detach(),n=this.$beamWrapper.detach(),i=this.$wrapper.innerWidth(),this.$wrapper.append(t).append(n),this._width=Math.min(r,i)),this._width!==0&&this.$listWrapper&&this.$list.width(this._width)},_updateClasses:function(){var t=this,n;t.$wrapper.removeClass("error disabled single-item"),t.options.error&&t.options.error.length>0&&t.$wrapper.addClass("error"),t.options.disabled&&t.$wrapper.addClass("disabled"),t.options.readOnly&&t.$wrapper.addClass("read-only"),t.options.config.style==="button"&&t.$wrapper.addClass("style-button"),t._items.length===1&&t.$wrapper.addClass("single-item")},_refreshSelectedItemClass:function(){var t=this;t.$list&&!t.options.disabled&&!t.options.readOnly&&NL.Utils.each(t._items,function(e,n){n.value===t._value?n.$li.addClass("selected"):n.$li.removeClass("selected")})},_getItem:function(n){var r=this,i={index:-1};return e.each(r._items,function(e,t){if(n===t.value)return i=NL.Utils.extend(t,{index:e}),!1}),i},reset:function(){this._setValue(null)},rebuildLayout:function(){this._refreshWidth()},_setOption:function(n,r){e.NL.nlWidget.prototype._setOption.apply(this,arguments);switch(n){case"value":this._setValue(r);break;default:this._refresh()}},isOwnerOf:function(n,r){var i=this;return NL.DOMUtils.isDescendantOf(n,e(i.element))||n.is(this.element)||NL.DOMUtils.isDescendantOf(n,this.$listWrapper)},collapse:function(){this.$wrapper.removeClass("nlui-dropdown-active"),this.$list&&this.$list.hide()},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}};e.widget("NL.nlDropdown",e.NL.nlWidget,i)})(jQuery,window,document)
;"use strict";(function(e,t,n,r){e.widget("NL.nlCompactEditor",e.NL.nlWidget,{options:{value:r,disabled:!1,readOnly:!1,error:null,onErrorChange:function(e){},onValueChanged:function(e){},onValueTouched:function(e){},config:{widget:null,widgetOptions:{},zoomIcon:"nlui-icon ui-icon-pencil",dialogWidth:300,dialogHeight:"auto",dialogResizable:!0,refreshCompactDisplay:function(e,t,n){}}},_create:function(){this._$dialog=e(),this._createMarkup(),NL.isNundef(this.options.value)||(NL.isObject(this.options.value)?(NL.assert(NL.OO.implementsProtocol(this.options.value,"Clonable"),"The value returned by "+this.options.config.widget+" (type: "+typeof this.options.value+") must be clonable."),this._value=this.options.value.clone()):this._value=this.options.value,this.options.config.refreshCompactDisplay(this,this._$display,this._value)),this._refreshDisplay()},_createMarkup:function(){var n=this;this._$text&&this._$text.remove(),this._$text=e('<div class="nlui-compacteditor-container"></div>'),this._$display=e('<div class="nlui-compacteditor-display"></div>').appendTo(this._$text),this._$zoomButtonContainer=e("<div></div>").nlButton({icon:this.options.config.zoomIcon,disabled:this.options.disabled,onClick:function(){n._openDialog()}}).addClass("nlui-compacteditor-button"),this.element.addClass("ui-widget nlui-compacteditor"),this.options.readOnly?this.element.append(this._$text):this.element.append(this._$zoomButtonContainer,this._$text),!this.options.readOnly&&!this.options.disabled&&this._$display.click(function(){n._openDialog()})},_openDialog:function(){this._$dialog.length===0&&this._createDialog();if(!NL.isNundef(this._value)){var t;NL.isObject(this._value)?(NL.assert(NL.OO.implementsProtocol(this._value,"Clonable"),"The value returned by "+this.options.config.widget+" (type: "+typeof this._value+") must be clonable."),t=this._value.clone()):t=this._value,this._$dialog[this.options.config.widget]("setValue",t)}this._$dialog.nlDialog("open")},_createDialog:function(){var n=this,r=[{text:xtk_core.dialog_ok(),click:function(){var t=n._$dialog[n.options.config.widget]("getValue"),r;NL.isObject(t)?(NL.assert(NL.OO.implementsProtocol(t,"Clonable"),"The value returned by "+n.options.config.widget+" (type: "+typeof t+") must be clonable."),r=t.clone()):r=t,n._value=r,n.options.config.refreshCompactDisplay(n,n._$display,r),n.options.onValueChanged(r),e(this).nlDialog("close")}},{text:xtk_core.dialog_cancel(),click:function(){e(this).nlDialog("close")}}];this._$dialog=e("<div></div>").appendTo("body")[this.options.config.widget]({config:this.options.config.widgetOptions}).nlDialog({autoOpen:!1,modal:!0,buttons:r,resizable:this.options.config.dialogResizable,title:this.options.config.dialogTitle,width:this.options.config.dialogWidth,height:this.options.config.dialogHeight})},_refreshDisplay:function(){},getValue:function(){return this._value},setValue:function(t){this._value=t,NL.isNundef(t)||this.options.config.refreshCompactDisplay(this,this._$display,t)},destroy:function(){this._$dialog.remove(),this.element.children().remove(),this.element.removeClass("ui-widget nlui-compacteditor")}})})(jQuery,window,document)
;"use strict";function XawListBase(e){this.controllerParent=e,this.id=0,this.bHasMRMPackage=0,this.hasCentralLocalPackage=0,this.hasInteractionPackage=0,this.controllerParent!=undefined&&(this.strServerUrl=e.getValue("/ctx/@serverUrl"),this.iOperationId=parseInt(e.getValue("/ctx/@operationId"),10),this.bHasMRMPackage=e.getValue("/ctx/@hasMRMPackage")=="true",this.hasCentralLocalPackage=e.getValue("/ctx/@hasCentralLocalPackage")=="true",this.hasInteractionPackage=e.getValue("/ctx/@hasInteractionPackage")=="true"),this.controller=new UIController,this.controller.ctx=newDOMDocument("ctx"),this.xmlConfig=null,this.htmlParent=null,this.tdFilter=null,this.tbody=null,this.divEntity=null,this.tdBlockLine=null,this.trLine=null,this.h2=null,this.iLineIndex=-1,this.iRefreshId=-1,this.bLoadImmediatly=!0,this.bHideHeader=!1,this.bHideTitle=!1,this.blockLabel=null,this.blockLabelSingle=null,this.bLastLine=!1}XawListBase.prototype.setConfig=function(e){e!=undefined&&(this.xmlConfig=parseXMLString(e))},XawListBase.prototype.render=function(e){if(this.xmlConfig==null)return;var t=firstChildElement(this.xmlConfig);this.id=t.getAttribute("id");var n;if(this.bHideHeader)n=e;else{this.h2=e.appendChild(document.createElement("div")),this.h2.className="subject";var r=this.createTable(this.h2,"subjectHeader"),i=r.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td")),o=s.appendChild(document.createElement("div"));o.setAttribute("style","float:left");var u=this.addImg(o,t.getAttribute("blockImg"));u.style.marginLeft="4px",u.style.marginRight="4px",u.style.verticalAlign="middle",this.blockLabel=o.appendChild(document.createElement("span")),this.blockLabel.appendChild(document.createTextNode(t.getAttribute("blockLabel")));var a=t.getAttribute("blockLabelSingle");a!=""&&(this.blockLabelSingle=o.appendChild(document.createElement("span")),this.blockLabelSingle.appendChild(document.createTextNode(a)),this.blockLabelSingle.style.display="none"),s=i.appendChild(document.createElement("td")),s.align="right",this.tdFilter=s;var o=e.appendChild(document.createElement("div"));o.className="entity",this.divEntity=o,n=o}if(!this.bHideTitle){var f=t.getAttribute("class");String(f)==""&&(f="content");var r=this.createTable(n,f);this.id!=undefined&&this.id!=""&&(r.id="content"+this.id),i=r.appendChild(document.createElement("tr"));var l=firstChildElement(t);while(l){var c=document.createElement("th"),h=l.getAttribute("colspan");h!=null&&h>1&&(c.colSpan=h);var p=l.getAttribute("width");p!=null&&p!=""&&(c.width=p,c.align="right"),c.appendChild(document.createTextNode(l.getAttribute("label"))),i.appendChild(c),l=nextSiblingElement(l)}}this.htmlParent=this.createTable(n,"content"),this.iLineIndex=-1,this.iRefreshId=-1,this.trLine=null,this.bLoadImmediatly&&this.load()},XawListBase.prototype.addSpace=function(e){e.appendChild(document.createTextNode("\u00a0"))},XawListBase.prototype.addImg=function(e,t,n){var r=e.appendChild(document.createElement("img"));return n!=undefined&&n!=null?r.className=n:(r.style.marginRight="2px",r.style.verticalAlign="middle"),r.src=t,r.border=0,r},XawListBase.prototype.addUrlImg=function(e,t,n,r){var i=e.appendChild(document.createElement("a"));i.href=n,r!=undefined&&r!=""&&(i.title=r);var s=i.appendChild(document.createElement("img"));s.src=t,s.border=0},XawListBase.prototype.addUrlLink=function(e,t,n,r,i,s){var o=e.appendChild(document.createElement("span"));o.className="action";var u=o.appendChild(document.createElement("a"));return u.className=t,u.href=n,s!=undefined&&s!=""&&this.addImg(u,s),r!=""&&r!=undefined&&u.appendChild(document.createTextNode(r)),i!=undefined&&i!=""&&(u.title=i),u},XawListBase.prototype.addUrlBlockLabel=function(e,t,n,r,i,s){var o=e.appendChild(document.createElement("td"));o.align="right",o.vAlign="center",o.width=20,s!=undefined&&s!=""&&(o.style.paddingLeft=s);var u=this.addImg(o,t);u.style.marginRight="2px",o=e.appendChild(document.createElement("td")),o.appendChild(document.createTextNode(r))},XawListBase.prototype.addContentLine=function(e,t,n){var r=e.appendChild(document.createElement("tr")),i=null;t!=""?(i=r.appendChild(document.createElement("td")),i.appendChild(document.createTextNode(t)),i.vAlign="top",i.style.width="13em",i.className="title",i=r.appendChild(document.createElement("td"))):(i=r.appendChild(document.createElement("td")),i.colSpan=2),i.vAlign="top",i.innerHTML=escapeXmlString(n)},XawListBase.prototype.addHtmlContentLine=function(e,t,n){var r=e.appendChild(document.createElement("tr")),i=null;t!=""?(i=r.appendChild(document.createElement("td")),i.appendChild(document.createTextNode(t)),i.vAlign="top",i.style.width="15em",i=r.appendChild(document.createElement("td"))):(i=r.appendChild(document.createElement("td")),i.colSpan=2),i.vAlign="top",i.innerHTML=n},XawListBase.prototype.createTable=function(e,t,n){var r=e.appendChild(document.createElement("table"));return r.width="100%",r.border=0,r.cellPadding=0,r.cellSpacing=0,n!=undefined&&(r.cellSpacing=n),t!=undefined&&t!=""&&(r.className=t),r.appendChild(document.createElement("tbody"))},XawListBase.prototype.createLine=function(e,t){var n=this.htmlParent.appendChild(document.createElement("tr"));return this.iRefreshId==t?n.className=++this.iLineIndex%2?"listOddLineSelect":"listEvenLineSelect":n.className=++this.iLineIndex%2?"listOddLine":"listEvenLine",n.onmouseover=new Function("overLine(this);"),n.onmouseout=new Function("overLine(this);"),n.onclick=new Function("selectLine(this, '"+e+this.iLineIndex+"', true);"),n},XawListBase.prototype.addBlockLine=function(e,t,n,r){r&&(this.h2.style.borderBottomWidth=0);var i=e.appendChild(document.createElement("tr"));r&&(this.trLine=i);var s=i.appendChild(document.createElement("td"));s.colSpan=2;var o=s.appendChild(document.createElement("div"));o.style.borderColor="#B7C3DB",o.id=t+this.iLineIndex,this.iRefreshId==n||r!=undefined&&r?o.style.display="block":o.style.display="none";var u=o.appendChild(document.createElement("table"));u.width="100%",u.border=0,u.cellPadding=0,u.cellSpacing=0,u.className="roundContainer",u.style.backgroundImage="none";var a=u.appendChild(document.createElement("tbody")),f=a.appendChild(document.createElement("tr"));s=f.appendChild(document.createElement("td")),r?this.blockLabel&&this.blockLabelSingle&&(this.blockLabel.style.display="none",this.blockLabelSingle.style.display="inline"):this.blockLabel&&this.blockLabelSingle&&(this.blockLabel.style.display="inline",this.blockLabelSingle.style.display="none"),s.appendChild(document.createTextNode(" ")),f=a.appendChild(document.createElement("tr")),s=f.appendChild(document.createElement("td"));var l=s.appendChild(document.createElement("div")),c=l.appendChild(document.createElement("div")),h="roundContent";if(r||this.bLastLine)h="roundContentSingle";this.tbody=this.createTable(s,h),this.tdBlockLine=c,this.tdBlockLine.nowrap=!0;var p=document.getElementById("content"+this.id);p!=undefined&&(r!=undefined&&r?p.style.display="none":p.style.display="block")},XawListBase.prototype.setScrollBarIfNeeded=function(e){e>25&&this.divEntity!=null&&(this.divEntity.style.height="450px",this.divEntity.style.overflow="hidden",this.divEntity.style.overflowX="hidden",this.divEntity.style.overflowY="auto")},XawListBase.prototype.displayTextLine=function(e,t,n){this.trLine=e.appendChild(document.createElement("tr"));var r=this.trLine.appendChild(document.createElement("td"));n!=undefined&&n>1&&(r.colSpan=n),r.appendChild(document.createTextNode(t)),r.style.padding="4px"},XawListBase.prototype.complete=function(e,t){this.setScrollBarIfNeeded(e),t&&this.displayTextLine(this.htmlParent,nms_campaign.noData())},XawListBase.prototype.clear=function(e){this.bLastLine=null;var t=null,n=this.trLine;while(n!=null&&this.htmlParent!=null)t=n.nextSibling,this.htmlParent.removeChild(n),n=t;e!=undefined&&e?this.displayTextLine(this.htmlParent,nms_campaign.loadingList()):this.trLine=null},XawListBase.prototype.refresh=function(e){this.iRefreshId=e,this.load()},XawListBase.prototype.addOption=function(e,t,n){var r=e.appendChild(document.createElement("option"));r.value=t,r.appendChild(document.createTextNode(n))},XawListBase.prototype.displayProgressBar=function(e,t,n,r,i){var s=e.appendChild(document.createElement("td"));return s.width=50,i!=""&&i!=undefined&&(s.align=i),r!=undefined&&r!=""&&(s.style.paddingLeft=r),s.innerHTML=progressBarHtml(t,n),s}
;"use strict";function deliveryActionStateType(e){var t=ACTION_TYPE_NONE;if(e.deliveryState==DELIVERY_STATE_PREPAREFAILED)return t;if(!e.bValidityDateExpired||e.deliveryState!=DELIVERY_STATE_READY&&e.deliveryState!=DELIVERY_STATE_TARGETREADY){if(NL.XTK.parseInt(e.operationId,0)===0){if(e.deliveryState==DELIVERY_STATE_READY||e.deliveryState==DELIVERY_STATE_TARGETREADY)t=ACTION_TYPE_CONFIRM;return t}e.deliveryState<DELIVERY_STATE_STARTED&&e.bUseContentValidation&&(NL.XTK.parseInt(e.linkedDeliveryId,0)===0||e.bUseLinkedDeliveryValidation)&&(e.contentStatus==CONTENT_STATUS_EDITION?t=ACTION_TYPE_SUBMIT:e.contentStatus==CONTENT_STATUS_INPROGRESS?t=ACTION_TYPE_TOEDIT:e.contentStatus==CONTENT_STATUS_INWAITING||e.contentStatus==CONTENT_STATUS_AVAILABLE||e.contentStatus==CONTENT_STATUS_EXTERNAL_REFUSED||e.contentStatus==CONTENT_STATUS_EXTERNAL_INWAITING&&e.bExternalValidation?e.contentStatus==CONTENT_STATUS_EXTERNAL_REFUSED?t=ACTION_TYPE_REFUSED:t=ACTION_TYPE_TOVALIDATE:e.contentStatus==CONTENT_STATUS_REFUSED&&(t=ACTION_TYPE_REFUSED));if(t!=ACTION_TYPE_NONE||e.deliveryState!=DELIVERY_STATE_TARGETREADY&&e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0&&!e.bUseLinkedDeliveryValidation)e.deliveryState!=DELIVERY_STATE_READY||!e.bUseFCPValidation||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0||e.deliveryMode!=DELIVERY_MODE_EXTERNAL||e.targetStatus!=TARGET_STATUS_EDITION&&e.targetStatus!=TARGET_STATUS_VALIDATED||e.extractionStatus!=EXTRACTION_STATUS_VALIDATED&&e.extractionStatus!=EXTRACTION_STATUS_SENT||e.contentStatus!=CONTENT_STATUS_VALIDATED&&e.contentStatus!=CONTENT_STATUS_EDITION&&e.contentStatus!=CONTENT_STATUS_FCP_REFUSED?e.deliveryState!=DELIVERY_STATE_READY||e.contentStatus!=CONTENT_STATUS_FCP_INWAITING&&e.contentStatus!=CONTENT_STATUS_FCP_REFUSED||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0&&!e.bUseLinkedDeliveryValidation?e.deliveryMode!=DELIVERY_MODE_EXTERNAL||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0||e.deliveryState!=DELIVERY_STATE_READY||e.extractionStatus!=EXTRACTION_STATUS_INWAITING&&e.extractionStatus!=EXTRACTION_STATUS_REFUSED?e.deliveryMode!=DELIVERY_MODE_EXTERNAL&&e.deliveryState==DELIVERY_STATE_READY&&(e.budgetStatus==BUDGET_STATUS_VALIDATED||e.budgetStatus==BUDGET_STATUS_EDITION)&&(e.targetStatus==TARGET_STATUS_VALIDATED||e.targetStatus==TARGET_STATUS_EDITION)&&(e.contentStatus==CONTENT_STATUS_VALIDATED||e.contentStatus==CONTENT_STATUS_EDITION||e.contentStatus==CONTENT_STATUS_FCP_VALIDATED)&&(e.sandboxMode==SANDBOXMODE_COMPLETE||e.centralLocalType==CENTRALLOCAL_TYPE_MUTUALIZED)&&NL.XTK.parseInt(e.linkedDeliveryId,0)===0&&(t=ACTION_TYPE_CONFIRM):e.extractionStatus==EXTRACTION_STATUS_REFUSED?t=ACTION_TYPE_REFUSED:t=ACTION_TYPE_EXTRACTION_APPROVAL:t=ACTION_TYPE_FCP_APPROVAL:t=ACTION_TYPE_SUBMIT;else if(e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE||!(e.deliveryState==DELIVERY_STATE_READY&&NL.XTK.parseInt(e.workflowId,0)!==0||e.deliveryState==DELIVERY_STATE_EDITION&&NL.XTK.parseInt(e.workflowId,0)===0)||e.budgetStatus!=BUDGET_STATUS_VALIDATED&&e.budgetStatus!=BUDGET_STATUS_EDITION||e.contentStatus!=CONTENT_STATUS_VALIDATED&&e.contentStatus!=CONTENT_STATUS_EDITION)if(!e.bUseTargetValidation||e.validationMode!=VALIDATION_MODE_MANUAL&&(NL.XTK.parseInt(e.workflowId,0)!==0||e.targetStatus!=TARGET_STATUS_EDITION&&e.targetStatus!=TARGET_STATUS_REFUSED)){if(e.sandboxStatus==SANDBOX_STATUS_REFUSED||e.targetStatus==TARGET_STATUS_REFUSED||e.budgetStatus==BUDGET_STATUS_REFUSED)t=ACTION_TYPE_REFUSED;else if(e.sandboxStatus==SANDBOX_STATUS_INWAITING)t=ACTION_TYPE_SUBSCRIBE;else if(e.targetStatus==TARGET_STATUS_INWAITING||e.budgetStatus==BUDGET_STATUS_INWAITING)t=ACTION_TYPE_TOVALIDATE;else if(e.deliveryState==DELIVERY_STATE_MSGPREPENDING||e.deliveryState==DELIVERY_STATE_TARGETREADY)e.deliveryMode==DELIVERY_MODE_EXTERNAL?t=ACTION_TYPE_EXTRACTION_INWAITING:t=ACTION_TYPE_PREPARATION_INWAITING}else t=ACTION_TYPE_SUBMIT;else t=ACTION_TYPE_CONFIRM;return t}return ACTION_TYPE_EXPIRED}function buildStateContentConfig(e,t){function r(e,t){var r="";return e===0?t==="short"?r=n.durationTodayLabel():r=n.durationTodayDesc():e>0&&(r="",e<=365?e===1?t==="short"?r=n.durationDayLabel():r=n.durationDayDesc():e<=30?t==="short"?r=n.durationDaysLabel(String(e)):r=n.durationDaysDesc(String(e)):t==="short"?r+=n.durationMonthsLabel(Math.ceil(Number(e)/30)):r+=n.durationMonthsDesc(Math.ceil(Number(e)/30)):t==="short"?r+=n.durationMoreOneYearLabel():r+=n.durationMoreOneYearDesc()),r}function i(e,t){var n=null,r=parseInt(t.state,10);switch(t.name){case"catalog":switch(r){case CATALOG_STATUS_VALIDATIONPENDING:n=e.catalogStateValidationPendingDesc();break;case CATALOG_STATUS_INPROCESS:n=e.catalogStateInProcessDesc()}break;case"dataTransfer":switch(r){case DATATRANSFER_STATUS_RUNNING:n=e.dataTransferStateRunningDesc()}break;case"simulation":switch(r){case SIMULATION_STATUS_PENDING:n=e.simulationStatePendingDesc();break;case SIMULATION_STATUS_RUNNING:n=e.simulationStateRunningDesc()}break;case"asset":switch(r){case ASSET_STATUS_VALIDATIONPENDING:n=e.assetValidationPendingDesc();break;case ASSET_STATUS_INPROCESS:n=e.assetInProcessDesc()}break;case"offer":switch(r){case OFFER_STATUS_INPROCESS:n=e.offerStateInProcessDesc();break;case OFFER_STATUS_VALIDATIONPENDING:n=e.offerStateValidationPendingDesc();break;case OFFER_STATUS_PRODUCTIONPENDING:n=e.offerStateProductionPendingDesc();break;case OFFER_STATUS_CANCELPENDING:n=e.offerStateCancelPendingDesc()}break;case"delivery":switch(r){case DELIVERY_STATE_TARGETPENDING:n=e.dlvStateTargetPrepPendingDesc();break;case DELIVERY_STATE_TARGETSELECTION:n=e.dlvStateTargetSelectionDesc();break;case DELIVERY_STATE_TARGETARBITRATION:n=e.dlvStateTargetArbitrationDesc();break;case DELIVERY_STATE_TARGETREADY:n=e.dlvStateTargetReadyDesc();break;case DELIVERY_STATE_MSGPREPENDING:n=e.dlvStateMessagePrepPendingDesc();break;case DELIVERY_STATE_PREPARATION:n=e.dlvStateMessagePreparationDesc();break;case DELIVERY_STATE_MESSAGEFINISHED:n=e.dlvStateMessageReadyDesc();break;case DELIVERY_STATE_READY:n=e.dlvStateReadyDesc();break;case DELIVERY_STATE_DELAYED:n=e.dlvStateDelayedDesc()}}return null===n&&(n="("+String(t.stateLabel)+")",NL.assert(!1,"Missing string for "+t.name+" / "+t.stateLabel+" / "+t.state)),n}var n;NL.side("server")?n=sg_nms_campaign:n=nms_campaign;var s={};s.stateCss="nlui-label nlui-label-info",s.stateDescCss="nlui-state-label",s.stateLabel=e.stateLabel,s.stateDescLabel="",s.lastUpdateDate="",e.lastUpdateInDays&&(s.lastUpdateDate=r(NL.XTK.parseInt(e.lastUpdateInDays,0),e.displayMode));if(e.name==="localOrder")e.state==LOCALORDER_STATUS_RESERVED||e.state==LOCALORDER_STATUS_REFUSED?(s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.localOrderStateReservedDesc()):e.state==LOCALORDER_STATUS_VALIDATED?NL.XTK.toString(e.availability)!==""?s.stateDescLabel=n.localOrderStateAvailableInDesc(NL.View.dateOnly(e.availability,null)):s.stateDescLabel=n.localOrderStateInProcessDesc():e.state==LOCALORDER_STATUS_AVAILABLE?(s.stateCss="nlui-label nlui-label-success",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.localOrderStateAvailableDesc(NL.View.dateTime(e.created,null)))):e.state==LOCALORDER_STATUS_CANCELED?(s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.localOrderStateCancelDesc(NL.View.dateTime(e.lastModified,null)))):e.state==LOCALORDER_STATUS_ERROR&&(s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.labelFailed());else if(e.name==="catalog")e.alertEndCatalog==1&&NL.XTK.toString(e.end)!==""?(s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.catalogUnvailableLabel(),s.stateDescLabel=n.catalogStateUnvailableDesc(NL.View.dateOnly(e.end,null))):e.state==CATALOG_STATUS_EDITION?(s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)))):e.state==CATALOG_STATUS_VALIDATIONPENDING||e.state==CATALOG_STATUS_INPROCESS?(s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e)):e.state==CATALOG_STATUS_REFUSED?s.stateCss="nlui-label nlui-label-warning":e.state==CATALOG_STATUS_VALIDATED?NL.XTK.toString(e.start)!==""&&(s.stateDescLabel=n.catalogStatePublisheIndDesc(NL.View.dateOnly(e.start,null))):e.state==CATALOG_STATUS_PUBLISHED?(s.stateCss="nlui-label nlui-label-success",s.stateLabel=n.catalogOnLine(),NL.XTK.toString(e.start)!==""&&(e.startDaysDiff<0?s.stateDescLabel=n.catalogStatePublishedDesc(NL.View.dateOnly(e.start,null)):s.stateDescLabel=n.catalogStatePublisheIndDesc(NL.View.dateOnly(e.start,null)))):e.state==CATALOG_STATUS_CANCELED&&(s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.catalogStateCancelDesc(NL.View.dateTime(e.lastModified,null))));else if(e.name==="dataTransfer"){if(e.state==DATATRANSFER_STATUS_EDITION)s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)));else if(e.state==DATATRANSFER_STATUS_RUNNING)s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e);else if(e.state==DATATRANSFER_STATUS_FINISHED)s.stateCss="nlui-label nlui-label-success",s.stateDescLabel=n.dataTransferStateFinishedDesc(NL.View.dateTime(e.endDate,null));else if(e.state==DATATRANSFER_STATUS_CANCELING||e.state==DATATRANSFER_STATUS_CANCELED)s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.dataTransferStateCancelDesc(NL.View.dateTime(e.lastModified,null)));else if(e.state==DATATRANSFER_STATUS_ERROR)s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.labelFailed();else if(e.state==DATATRANSFER_STATUS_PAUSING||e.state==DATATRANSFER_STATUS_PAUSED)s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.dataTransferStatePausedDesc(NL.View.dateTime(e.lastModified,null))}else if(e.name==="simulation")e.state==SIMULATION_STATUS_EDIT?(s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)))):e.state==SIMULATION_STATUS_FINISHED?(s.stateCss="nlui-label nlui-label-success",s.stateDescLabel=n.simulationStateFinishedDesc(NL.View.dateTime(e.lastModified,null))):e.state==SIMULATION_STATUS_PENDING||e.state==SIMULATION_STATUS_RUNNING?(s.stateLabel=n.inWaitingLabel(),s.stateDescLabel=i(n,e)):e.state==SIMULATION_STATUS_CANCELING||e.state==SIMULATION_STATUS_CANCELED?(s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.simulationStateCancelDesc(NL.View.dateTime(e.lastModified,null)))):e.state==SIMULATION_STATUS_PAUSEPENDING||e.state==SIMULATION_STATUS_PAUSE?(s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.simulationStatePausedDesc(NL.View.dateTime(e.lastModified,null))):e.state==SIMULATION_STATUS_ERROR&&(s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.labelFailed());else if(e.name==="asset")e.state==ASSET_STATUS_EDITION?(s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)))):e.state==ASSET_STATUS_VALIDATIONPENDING||e.state==ASSET_STATUS_INPROCESS?(s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e)):e.state==ASSET_STATUS_VALIDATED||e.state==ASSET_STATUS_PUBLICATIONPENDING?(s.stateLabel=n.assetValidatedLabel(),s.stateCss="nlui-label nlui-label-success",e.state==ASSET_STATUS_VALIDATED?s.stateDescLabel=n.assetValidatedDesc():s.stateDescLabel=n.assetPublishPendingDesc()):e.state==ASSET_STATUS_REFUSED?s.stateCss="nlui-label nlui-label-warning":e.state==ASSET_STATUS_CANCELED?(s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.assetStateCancelDesc(NL.View.dateTime(e.lastModified,null)))):e.state==ASSET_STATUS_PUBLISHED&&(s.stateCss="nlui-label nlui-label-success",s.stateLabel=n.assetOnLine(),NL.XTK.toString(e.publication)!==""&&(s.stateDescLabel=n.assetStatePublishedDesc(NL.View.dateTime(e.publication,null))));else if(e.name==="offer")e.state==OFFER_STATUS_EDITION?(s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)))):e.state==OFFER_STATUS_PUBLISHED?(s.stateCss="nlui-label nlui-label-success",e.state==OFFER_STATUS_PUBLISHED&&NL.XTK.toString(e.lastModified)!==""?s.stateDescLabel=n.offerStatePublishedDesc(NL.View.dateTime(e.lastModified,null)):NL.XTK.toString(e.productionDate)!==""&&(s.stateDescLabel=n.offerStateProductionDesc(NL.View.dateTime(e.productionDate,null)))):e.state==OFFER_STATUS_INPROCESS||e.state==OFFER_STATUS_VALIDATIONPENDING?(s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e)):e.state==OFFER_STATUS_CANCELED?(s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.offerStateCancelDesc(NL.View.dateTime(e.lastModified,null)))):e.state==OFFER_STATUS_VALIDATED?s.stateCss="nlui-label nlui-label-success":e.state==OFFER_STATUS_REFUSED?s.stateCss="nlui-label nlui-label-warning":e.state==OFFER_STATUS_PRODUCTIONPENDING?(s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e)):e.state==OFFER_STATUS_CANCELPENDING&&(s.stateLabel=n.inWaitingLabel(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e));else if(e.name==="workflow"){if(NL.XTK.parseInt(e.operationId,0)!==0&&e.startState==WORKFLOW_STARTSTATE_STARTING||e.state==WORKFLOW_STATE_STARTING||e.state==WORKFLOW_STATE_RESTARTING)s.stateCss="nlui-label nlui-label-warning",s.stateLabel=n.inWaitingLabel(),s.stateDescLabel=n.workflowStartWaitingDesc();else if(e.state==WORKFLOW_STATE_EDITION)s.stateLabel=n.dlvStateEdition(),s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)));else if(NL.XTK.parseBoolean(e.failed,!1))s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.labelFailed(),NL.XTK.toString(e.processDate)!==""&&(s.stateDescLabel=n.workflowFailedDesc(NL.View.dateTime(e.processDate,null)));else if(e.state==WORKFLOW_STATE_STARTED||e.state==WORKFLOW_STATE_RESUMING)NL.XTK.toString(e.lastStart)!==""&&(s.stateDescLabel=n.workflowStateInprocessDesc(NL.View.dateTime(e.lastStart,null)));else if(e.state==WORKFLOW_STATE_PAUSING||e.state==WORKFLOW_STATE_PAUSED)s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.workflowStatePausedDesc(NL.View.dateTime(e.lastModified,null));else if(e.state==WORKFLOW_STATE_FINISHED)s.stateCss="nlui-label nlui-label-success",s.stateDescLabel=n.workflowStateFinishedDesc(NL.View.dateTime(e.lastModified,null));else if(e.state==WORKFLOW_STATE_STOPPING||e.state==WORKFLOW_STATE_STOPPED)s.stateCss="nlui-label nlui-label-important"}else if(e.name==="task"){if(e.state==TASK_STATUS_EDITION)s.stateCss="nlui-label";else if(e.state==TASK_STATUS_FORECASTED)s.stateCss="nlui-label",NL.XTK.toString(e.start)!==""&&(s.stateDescLabel=n.taskStateForecastedDesc(NL.View.dateTime(e.start,null)));else if(e.state==TASK_STATUS_PENDING)s.stateLabel=n.taskStatePending(),NL.XTK.toString(e.expectedValidation)!==""&&(s.stateDescLabel=n.taskStatePendingdDesc(NL.View.dateOnly(e.expectedValidation,null))),s.stateCss="nlui-label nlui-label-warning";else if(e.state==TASK_STATUS_STARTED)NL.XTK.toString(e.end)!==""&&(s.stateDescLabel=n.taskStateStartedDesc(NL.View.dateTime(e.end,null)));else if(e.state==TASK_STATUS_CANCELED)s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.lastModified)!==""&&(s.stateDescLabel=n.taskStateCancelDesc(NL.View.dateTime(e.lastModified,null)));else if(e.state==TASK_STATUS_REFUSED)s.stateCss="nlui-label nlui-label-warning";else if(e.state==TASK_STATUS_VALIDATED||e.state==TASK_STATUS_FINISHED)s.stateCss="nlui-label nlui-label-success",NL.isEmpty(e.completed)||(s.stateDescLabel=n.dlvStateFinishedDesc(NL.View.dateTime(e.completed,null)))}else if(e.name==="operation"){s.stateLabel=e.stateLabel;if(e.state==OPERATION_STATUS_EDITION)s.stateCss="nlui-label nlui-label-warning",s.stateLabel=n.inWaitingLabel(),NL.XTK.toString(e.start)!==""&&(s.stateDescLabel=n.operationStateEditionDesc(NL.View.dateOnly(e.start,null)));else if(e.state==OPERATION_STATUS_STARTED)NL.XTK.toString(e.start)!==""&&(s.stateDescLabel=n.operationStateInprocessDesc(NL.View.dateOnly(e.start,null)),s.stateLabel=n.operationStartedLabel());else if(e.state==OPERATION_STATUS_FINISHED)s.stateCss="nlui-label nlui-label-success",NL.XTK.toString(e.end)!==""&&(s.stateDescLabel=n.operationStateFinishedDesc(NL.View.dateOnly(e.end,null)));else if(e.state==OPERATION_STATUS_CANCELED||e.state==OPERATION_STATUS_CANCELING)s.stateCss="nlui-label nlui-label-important",NL.XTK.toString(e.cancelDate)!==""&&(s.stateDescLabel=n.operationStateCancelDesc(NL.View.dateTime(e.cancelDate,null)))}else if(e.name==="package")NL.XTK.toString(e.buildDate)!==""?(s.stateLabel=n.packageOverview_exported(),s.stateCss="nlui-label nlui-label-success",s.stateDescLabel=n.packageOverview_exportedDesc(NL.View.dateTime(e.buildDate,null))):(s.stateLabel=n.packageOverview_no_exported(),s.stateCss="nlui-label",s.stateDescLabel=n.packageOverview_no_exportedDesc());else if(e.name==="webApp"||e.name==="report")e.disabledPlanning==1&&NL.XTK.toString(e.endDate)!==""?(s.stateCss="nlui-label nlui-label-important",s.stateLabel=n.catalogUnvailableLabel(),s.stateDescLabel=n.catalogStateUnvailableDesc(NL.View.dateTime(e.endDate,null))):e.appState==WEBAPP_STATE_PROD?(s.stateLabel=n.webAppOverview_onLine(),s.stateCss="nlui-label nlui-label-success",NL.XTK.toString(e.publicationDate)!==""&&(s.stateDescLabel=n.webAppOverview_published(NL.View.dateTime(e.publicationDate,null)))):e.appState==WEBAPP_STATE_TOPUBLISH?(s.stateLabel=n.webAppOverview_toPublish(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.webAppOverview_inWaiting()):(s.stateLabel=n.webAppOverview_offLine(),s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null))));else if(e.name==="delivery")NL.XTK.parseBoolean(e.isTriggerMessageModel,!1)?(s.stateLabel=e.publicationStatusLabel,e.publicationStatus==DELIVERY_PUBLICATION_STATUS_EDITION?(s.stateCss="nlui-label",NL.XTK.toString(e.publicationDate)!==""?s.stateDescLabel=n.dlvPubStateDeployedEditionDesc(NL.View.dateTime(e.publicationDate,null)):s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null))):e.publicationStatus==DELIVERY_PUBLICATION_STATUS_DEPLOYED?(s.stateCss="nlui-label nlui-label-success",NL.XTK.toString(e.publicationDate)!==""&&(s.stateDescLabel=n.dlvPubStateDeployedDesc(NL.View.dateTime(e.publicationDate,null)))):e.publicationStatus==DELIVERY_PUBLICATION_STATUS_FAILED&&(s.stateCss="nlui-label nlui-label-important",s.stateDescLabel=n.dlvPubStateFailedDesc())):e.state==DELIVERY_STATE_EDITION?(s.stateLabel=n.dlvStateEdition(),s.stateCss="nlui-label",NL.XTK.toString(e.created)!==""&&(s.stateDescLabel=n.createdStateDesc(NL.View.dateTime(e.created,null)))):e.state==DELIVERY_STATE_TARGETPENDING||e.state==DELIVERY_STATE_TARGETSELECTION||e.state==DELIVERY_STATE_TARGETARBITRATION||e.state==DELIVERY_STATE_TARGETREADY||e.state==DELIVERY_STATE_MSGPREPENDING||e.state==DELIVERY_STATE_PREPARATION||e.state==DELIVERY_STATE_MESSAGEFINISHED?(s.stateLabel=n.dlvStatePrepare(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=i(n,e)):e.state==DELIVERY_STATE_PREPAREFAILED?(s.stateLabel=n.dlvStateError(),s.stateCss="nlui-label nlui-label-important",s.stateDescLabel=n.dlvStateErrorDesc()):e.state==DELIVERY_STATE_READY||e.state==DELIVERY_STATE_DELAYED?(s.stateLabel=n.dlvStateWaiting(),s.stateCss="nlui-label nlui-label-warning",NL.XTK.parseBoolean(e.delayed,!1)&&NL.XTK.toString(e.contactDate)!==""?s.stateDescLabel=n.dlvStateWaitingDesc(NL.View.dateTime(e.contactDate,null)):s.stateDescLabel=i(n,e)):e.state==DELIVERY_STATE_STARTED||e.state==DELIVERY_STATE_RETRYPENDING||e.state==DELIVERY_STATE_RETRY?(NL.XTK.toString(e.contactDate)!==""&&(s.stateDescLabel=n.dlvStateInprocessDesc(NL.View.dateTime(e.contactDate,null))),e.state==DELIVERY_STATE_RETRYPENDING&&(s.stateCss="nlui-label nlui-label-warning")):e.state==DELIVERY_STATE_CANCELPENDING||e.state==DELIVERY_STATE_CANCEL?(s.stateLabel=n.dlvStateCancel(),s.stateCss="nlui-label nlui-label-important",s.stateDescLabel=n.dlvStateCancelDesc(NL.View.dateTime(e.lastModified,null))):e.state==DELIVERY_STATE_PAUSEPENDING||e.state==DELIVERY_STATE_PAUSE?(s.stateLabel=n.dlvStatePaused(),s.stateCss="nlui-label nlui-label-warning",s.stateDescLabel=n.dlvStatePausedDesc(NL.View.dateTime(e.lastModified,null))):e.state==DELIVERY_STATE_FINISHED&&(s.stateLabel=n.dlvStateFinished(),s.stateCss="nlui-label nlui-label-success",s.stateDescLabel=n.dlvStateFinishedDesc(NL.View.dateTime(e.lastModified,null)));else if(e.name==="incomingLead")s.stateLabel="",s.stateDescLabel=e.summary;else if(e.name==="outgoingLead"){e.stage===OUTGOINGLEAD_STAGE_UNQUALIFIED&&(s.stateCss="nlui-label nlui-label-warning");if(e.stage===OUTGOINGLEAD_STAGE_ABANDONNED||e.stage===OUTGOINGLEAD_STAGE_REJECTED||e.stage===OUTGOINGLEAD_STAGE_CLOSEDLOST)s.stateCss="nlui-label nlui-label-important";else if(e.stage===OUTGOINGLEAD_STAGE_MARKETINGQUALIFIED||e.stage===OUTGOINGLEAD_STAGE_SALESACCEPTED||e.stage===OUTGOINGLEAD_STAGE_CLOSEDWON||e.stage===OUTGOINGLEAD_STAGE_OPPORTUNITY)s.stateCss="nlui-label nlui-label-success";s.stateLabel=e.stageLabel,s.stateDescLabel=crm_lead.latestActivity(NL.View.dateTime(e.lastActivity,null))}else e.name==="opportunity"&&(e.status===OPPORTUNITY_STATUS_CLOSEDWON?s.stateCss="nlui-label nlui-label-success":e.status===OPPORTUNITY_STATUS_CLOSEDLOST&&(s.stateCss="nlui-label nlui-label-important"),s.stateLabel=e.statusLabel,e.closeDate?s.stateDescLabel=crm_lead.opportunityRunningSinceDesc(NL.View.dateTime(e.closeDate,null)):s.stateDescLabel=crm_lead.latestCRMModification(NL.View.dateTime(e.crmLastModified,null)));return s}function deliveryKPIConfig(e){function n(t,n){var r="primary";e.state==DELIVERY_STATE_EDITION&&(r="default");if(e.state==DELIVERY_STATE_FINISHED)r="success",n!=null&&(n<DELIVERY_KPI_ERROR_THRESHOLD?r="error":n<DELIVERY_KPI_WARNING_THRESHOLD&&(r="warning"));else if(e.state==DELIVERY_STATE_PREPAREFAILED||e.state==DELIVERY_STATE_CANCELPENDING||e.state==DELIVERY_STATE_CANCELPENDING||e.state==DELIVERY_STATE_CANCEL)r="default";return r}var t;NL.side("server")?t=sg_nms_campaign:t=nms_campaign;var r=[];if(e.state>=DELIVERY_STATE_EDITION&&e.state<DELIVERY_STATE_STARTED){var i=NL.XTK.parseNumber(e.sumTotalTarget,0)+NL.XTK.parseNumber(e.totalTarget,0),s=NL.XTK.parseNumber(e.sumToDeliver,0)+NL.XTK.parseNumber(e.toDeliver,0);r.push(NL.Dashboard.normalizeKPIConf({titleText:t.cellTotalTargetKPI(),primaryText:NL.Locale.formatWithUnit(i,2,"count",t.KPI_not_available()),secondaryText:NL.View.number(i),mode:"default"})),r.push(NL.Dashboard.normalizeKPIConf({titleText:t.cellToDeliverKPI(),primaryText:NL.Locale.formatWithUnit(s,2,"count",t.KPI_not_available()),secondaryText:NL.View.number(s),mode:n(e.state,null)}))}else{var s=NL.XTK.parseNumber(e.sumToDeliver,0)+NL.XTK.parseNumber(e.toDeliver,0),o=NL.XTK.parseNumber(e.sumProcessed,0)+NL.XTK.parseNumber(e.processed,0),u=NL.XTK.parseNumber(e.sumSuccess,0)+NL.XTK.parseNumber(e.success,0),a=Math.round(NL.XTK.parseNumber(e.processedRatio,0)*100),f=Math.round(NL.XTK.parseNumber(e.successRatio,0)*100);r.push(NL.Dashboard.normalizeKPIConf({titleText:t.cellToDeliverKPI(),primaryText:NL.Locale.formatWithUnit(s,2,"count",t.KPI_not_available()),secondaryText:NL.View.number(s),mode:"default"})),r.push({titleText:t.cellProcessedKPI(),primaryText:NL.Locale.formatPercent(a/100,0),secondaryText:NL.View.number(o),mode:"primary"}),r.push({titleText:t.cellSuccessKPI(),primaryText:NL.Locale.formatPercent(f/100,0),secondaryText:NL.View.number(u),mode:n(e.state,f)})}return NL.side("server")?JSON.stringify(r):r}function buildCommandBarConfig(e,t){function s(t){return e.style!=="actionbar"?t:""}function o(e){var n={label:e.label,icon:e.img,mode:e.mode?e.mode:r.style!=="classic"?"primary":"white",flat:r.style==="classic",command:e.command?e.command:null},s;e.method==="confirmDialog"?s={title:e.title,msg:e.message,onConfirm:{method:"soap",args:{provider:e.provider,action:e.action,parameters:e.parameters,async:e.async,onSuccess:t}}}:e.method==="webAppDialog"?s={name:e.name,modal:!0,onClose:typeof t!="undefined"?t:{method:"refresh"},params:e.params}:NL.isEmpty(e.url)?NL.isEmpty(e.view)||(n={view:e.view,label:e.label,icon:e.img,params:e.params,newWindow:e.newWindow,type:"navigation",xtkDelegated:!0,mode:e.mode?e.mode:"primary"}):n.url=e.url,typeof s!="undefined"&&(n.action={method:e.method,args:s}),(e.method==="confirmDialog"||e.method==="webAppDialog"||typeof e.url!="undefined")&&i++,!NL.isEmpty(n.view)&&r.commands.length===0?(r.viewConfigs[n.label]=n,r.views.push(n.label)):NL.isEmpty(n.view)&&(r.commandConfigs[n.label]=n,r.commands.push(n.label))}function u(){r.state="normal",r.longDesc="",e.state==OPERATION_STATUS_EDITION&&NL.XTK.parseInt(e.startDaysDiff,0)>0?(r.longDesc=n.operationForecastedDesc(e.startDaysDiff),r.state="info"):e.state==OPERATION_STATUS_STARTED&&NL.XTK.toString(e.start)!==""&&(r.longDesc=n.operationStartedDesc(NL.View.dateOnly(e.start,null))),e.state!=OPERATION_STATUS_CANCELED&&e.state!=OPERATION_STATUS_FINISHED&&o({method:"webAppDialog",label:n.cancelOperation(),mode:"default",name:"operationValidation",params:{operationId:e.operationId}})}function a(){var t=0,u=1,a=2,f=3,l=4,c=5,h=6,p=7,d=8,v=9,m=10,g=11,y=12,b=13,w=14,E=15,S=16,x=17,T=18,N=19,C=20,k=21,L=22,A=23,O=24,M=25,_=[];if(e.deliveryDeleteStatus==DELIVERY_DELETE_STATUS_DELETED){r.longDesc=n.deliveryIsDeleted(),r.state="warning";return}if(NL.XTK.parseInt(e.operationId,0)===0)e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE&&(e.deliveryState==DELIVERY_STATE_READY||e.deliveryState==DELIVERY_STATE_TARGETREADY&&NL.XTK.parseBoolean(e.contentNonEmpty,!1)?e.bValidityDateExpired||_.push(x):(e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_PAUSE)&&_.push(T),(e.deliveryState==DELIVERY_STATE_STARTED||e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_RETRY)&&_.push(N),(e.deliveryState==DELIVERY_STATE_READY||e.deliveryState==DELIVERY_STATE_STARTED||e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_PREPARATION||e.deliveryState==DELIVERY_STATE_RETRY||e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_READY||e.deliveryState==DELIVERY_STATE_DELAYED||e.deliveryState==DELIVERY_STATE_PAUSE||e.deliveryState==DELIVERY_STATE_TARGETSELECTION||e.deliveryState==DELIVERY_STATE_TARGETARBITRATION)&&_.push(C));else{e.deliveryState<DELIVERY_STATE_READY&&e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE&&e.bUseContentValidation&&(NL.XTK.parseInt(e.linkedDeliveryId,0)===0||e.bUseLinkedDeliveryValidation)&&(e.contentStatus==CONTENT_STATUS_EDITION&&e.deliveryState<=DELIVERY_STATE_TARGETREADY?e.bAssignEdition?_.push(t):_.push(u):e.contentStatus==CONTENT_STATUS_INPROGRESS?_.push(a):e.contentStatus==CONTENT_STATUS_INWAITING||e.contentStatus==CONTENT_STATUS_AVAILABLE||e.contentStatus==CONTENT_STATUS_EXTERNAL_REFUSED?_.push(f):e.contentStatus==CONTENT_STATUS_EXTERNAL_INWAITING&&e.bExternalValidation?_.push(l):e.contentStatus==CONTENT_STATUS_REFUSED&&(e.bAssignEdition?_.push(a):_.push(u)));if(e.deliveryState!=DELIVERY_STATE_TARGETREADY||e.deliveryMode==DELIVERY_MODE_DESCRIPTIVE||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0&&!e.bUseLinkedDeliveryValidation)e.deliveryState==DELIVERY_STATE_FINISHED&&e.deliveryMode==DELIVERY_MODE_EXTERNAL?_.push(b):e.deliveryMode==DELIVERY_MODE_DESCRIPTIVE?e.hasUseBudgetValidation&&NL.XTK.parseInt(e.budgetId,0)!==0&&(e.budgetStatus==BUDGET_STATUS_EDITION?_.push(M):e.budgetStatus==BUDGET_STATUS_INWAITING?_.push(y):e.budgetStatus==BUDGET_STATUS_REFUSED&&_.push(g)):e.deliveryState!=DELIVERY_STATE_READY||!e.bUseFCPValidation||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0||e.deliveryMode!=DELIVERY_MODE_EXTERNAL||e.targetStatus!=TARGET_STATUS_EDITION&&e.targetStatus!=TARGET_STATUS_VALIDATED||e.extractionStatus!=EXTRACTION_STATUS_VALIDATED&&e.extractionStatus!=EXTRACTION_STATUS_SENT||e.contentStatus!=CONTENT_STATUS_VALIDATED&&e.contentStatus!=CONTENT_STATUS_EDITION&&e.contentStatus!=CONTENT_STATUS_FCP_REFUSED?e.deliveryState!=DELIVERY_STATE_READY||e.contentStatus!=CONTENT_STATUS_FCP_INWAITING&&e.contentStatus!=CONTENT_STATUS_FCP_REFUSED||NL.XTK.parseInt(e.linkedDeliveryId,0)!==0&&!e.bUseLinkedDeliveryValidation?e.deliveryMode==DELIVERY_MODE_EXTERNAL&&NL.XTK.parseInt(e.linkedDeliveryId,0)===0&&e.deliveryState==DELIVERY_STATE_READY&&(e.extractionStatus==EXTRACTION_STATUS_INWAITING||e.extractionStatus==EXTRACTION_STATUS_REFUSED)&&(e.extractionStatus==EXTRACTION_STATUS_REFUSED?_.push(k):_.push(L),_.push(A)):_.push(S):_.push(w);else if(!e.bUseTargetValidation||e.validationMode!=VALIDATION_MODE_MANUAL&&(NL.XTK.parseInt(e.workflowId,0)!==0||e.targetStatus!=TARGET_STATUS_EDITION&&e.targetStatus!=TARGET_STATUS_REFUSED)){if(e.sandboxStatus==SANDBOX_STATUS_INWAITING||e.sandboxStatus==SANDBOX_STATUS_REFUSED)e.sandboxStatus==SANDBOX_STATUS_REFUSED?_.push(p):_.push(d);if(e.targetStatus==TARGET_STATUS_INWAITING||e.targetStatus==TARGET_STATUS_REFUSED)e.targetStatus==TARGET_STATUS_REFUSED?_.push(v):_.push(m);if(e.budgetStatus==BUDGET_STATUS_INWAITING||e.budgetStatus==BUDGET_STATUS_REFUSED)e.budgetStatus==BUDGET_STATUS_REFUSED?_.push(g):_.push(y)}else _.push(h);!(e.deliveryMode==DELIVERY_MODE_DESCRIPTIVE&&e.deliveryState==DELIVERY_STATE_EDITION&&NL.XTK.parseInt(e.workflowId,0)===0&&_.length===0||e.deliveryMode!=DELIVERY_MODE_EXTERNAL&&e.deliveryState==DELIVERY_STATE_READY)||e.budgetStatus!=BUDGET_STATUS_VALIDATED&&e.budgetStatus!=BUDGET_STATUS_EDITION||e.targetStatus!=TARGET_STATUS_VALIDATED&&e.targetStatus!=TARGET_STATUS_EDITION||e.contentStatus!=CONTENT_STATUS_VALIDATED&&e.contentStatus!=CONTENT_STATUS_EDITION&&e.contentStatus!=CONTENT_STATUS_FCP_VALIDATED?e.deliveryMode==DELIVERY_MODE_DESCRIPTIVE&&e.deliveryState==DELIVERY_STATE_STARTED?_.push(b):NL.XTK.parseInt(e.linkedDeliveryId,0)===0&&((e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_PAUSE)&&_.push(T),(e.deliveryState==DELIVERY_STATE_STARTED||e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_RETRY)&&_.push(N),(e.deliveryState==DELIVERY_STATE_STARTED||e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_PREPARATION||e.deliveryState==DELIVERY_STATE_RETRY||e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_READY||e.deliveryState==DELIVERY_STATE_DELAYED||e.deliveryState==DELIVERY_STATE_PAUSE||e.deliveryState==DELIVERY_STATE_TARGETSELECTION||e.deliveryState==DELIVERY_STATE_TARGETARBITRATION)&&_.push(C)):(e.sandboxMode==SANDBOXMODE_COMPLETE||e.centralLocalType==CENTRALLOCAL_TYPE_MUTUALIZED)&&NL.XTK.parseInt(e.linkedDeliveryId,0)===0&&NL.XTK.parseBoolean(e.contentNonEmpty,!1)&&e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE&&(e.bValidityDateExpired||_.push(O))}var D=!1;if(_[0]==b||_[0]==x||_[0]==T||_[0]==N||_[0]==C)for(var P=0;P<_.length;P++){var H={};_[P]==b?o({method:"confirmDialog",label:n.cancelDelivery(),message:n.cancelDeliveryAction(),img:s("nlui-icon-error ui-icon-stop"),mode:r.style==="classic"?"white":"default",action:"Cancel",title:n.cancelDeliveryActionTitle(),provider:"nms:delivery",parameters:[{name:"deliveryId",value:String(e.deliveryId)}]}):_[P]==x||_[P]==T?o({method:"confirmDialog",label:_[P]==x?n.confirmDelivery():n.replayDelivery(),message:n.startDeliveryAction(),img:e.style=="actionbar"?"":"nlui-icon-success ui-icon-play",mode:r.style==="classic"?"white":"success",action:"Play",title:n.startDeliveryActionTitle(),provider:"nms:delivery",parameters:[{name:"deliveryId",value:String(e.deliveryId)}],async:!0}):_[P]==N?o({method:"confirmDialog",label:n.pauseDelivery(),message:n.pauseDeliveryAction(),img:s("nlui-icon-warning ui-icon-pause"),mode:r.style==="classic"?"white":"default",action:"Pause",title:n.pauseDeliveryActionTitle(),provider:"nms:delivery",parameters:[{name:"deliveryId",value:String(e.deliveryId)}]}):_[P]==C&&(o({method:"confirmDialog",label:n.stopDeliveryActionTitle(),message:"<img src='/xtk/img/error.png' style='margin-right:10px;float:left'/><span>"+n.stopDeliveryAction()+"</span>",img:s("nlui-icon-error ui-icon-stop"),mode:r.style==="classic"?"white":"default",action:"Stop",title:n.stopDeliveryActionTitle(),provider:"nms:delivery",parameters:[{name:"deliveryId",value:String(e.deliveryId)}]}),D=!0)}else{for(var P=0;P<_.length;P++)_[P]==t?o({method:"confirmDialog",label:n.submitEdition(),message:n.submitEditionAction(),img:"nlui-icon-primary nlui-icon-submit-for-approval",mode:r.style==="classic"?"white":"primary",action:"DeliveryValidation",title:n.submitEditionActionTitle(),provider:"nms:operation",parameters:[{name:"deliveryId",value:e.deliveryId},{name:"type",value:VALIDATION_TYPE_SUBMITEDITION,type:"byte"},{name:"refused",value:!1},{name:"comment",value:""}]}):_[P]==u?o({method:"confirmDialog",label:n.launchContentToValidate(),message:n.submitContentAction(),img:"nlui-icon-primary nlui-icon-submit-for-approval",mode:r.style==="classic"?"white":"primary",action:"DeliveryValidation",title:n.launchContentToValidate(),provider:"nms:operation",parameters:[{name:"deliveryId",value:e.deliveryId},{name:"type",value:VALIDATION_TYPE_SUBMITCONTENT,type:"byte"},{name:"refused",value:!1},{name:"comment",value:""}]}):_[P]==a?o({method:"webAppDialog",label:n.availableContentLabel(),img:"nlui-icon-primary nlui-icon-submit-for-approval",mode:r.style==="classic"?"white":"primary",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_AVAILABLE}}):_[P]==f?o({method:"webAppDialog",label:n.contentValidateLabel(),img:"nlui-icon-primary nlui-icon-approve",mode:r.style==="classic"?"white":"primary",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_CONTENT}}):_[P]==l?o({method:"webAppDialog",label:n.externalValidation(),img:"nlui-icon-primary nlui-icon-approve",mode:r.style==="classic"?"white":"primary",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_EXTERNAL}}):_[P]==O?o({method:"confirmDialog",label:n.confirmDelivery(),message:n.startDeliveryAction(),img:e.style=="actionbar"?"":"nlui-icon-success ui-icon-play",mode:r.style==="classic"?"white":"success",action:"StartDelivery",title:n.startDeliveryActionTitle(),provider:"nms:operation",parameters:[{name:"deliveryId",value:e.deliveryId}],async:!0}):_[P]==M?o({method:"webAppDialog",label:n.launchBudgetToValidate(),img:"nlui-icon-primary nlui-icon-submit-for-approval",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_SUBMITBUDGET}}):_[P]==h?o({method:"confirmDialog",label:n.launchValidationLabel(),message:n.submitTargetAction(),img:"nlui-icon-primary nlui-icon-submit-for-approval",action:"DeliveryValidation",title:n.launchValidationLabel(),provider:"nms:operation",parameters:[{name:"deliveryId",value:e.deliveryId},{name:"type",value:VALIDATION_TYPE_MANUAL,type:"byte"},{name:"refused",value:!1},{name:"comment",value:""}]}):_[P]==p||_[P]==d?o({method:"webAppDialog",label:n.sandboxValidateLabel(),img:_[P]==p?"nlui-icon-warning ui-icon-alert":"/nms/img/businessRanking.png",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_SANDBOX}}):_[P]==v||_[P]==m?o({method:"webAppDialog",label:n.targetValidateLabel(),img:_[P]==v?"nlui-icon-warning ui-icon-alert":"nlui-icon-primary nlui-icon-approve",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_TARGET}}):(_[P]==g||_[P]==y)&&o({method:"webAppDialog",label:n.validateBudget(),img:_[P]==g?"nlui-icon-warning ui-icon-alert":"nlui-icon-primary nlui-icon-approve",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_BUDGET}}),_[P]==w?o({method:"confirmDialog",label:n.launchFCPValidationLabel(),message:n.submitProofAction(),img:"nlui-icon-primary nlui-icon-submit-for-approval",action:"DeliveryValidation",title:n.launchFCPValidationLabel(),provider:"nms:operation",parameters:[{name:"deliveryId",value:e.deliveryId},{name:"type",value:VALIDATION_TYPE_SUBMITFCP,type:"byte"},{name:"refused",value:!1},{name:"comment",value:""}]}):_[P]==S||_[P]==E?o({method:"webAppDialog",label:n.validateFcp(),img:_[P]==E?"nlui-icon-warning ui-icon-alert":"nlui-icon-primary nlui-icon-approve",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_FCP}}):_[P]==k||_[P]==L?o({method:"webAppDialog",label:n.validateFile(),img:_[P]==k?"nlui-icon-warning ui-icon-alert":"nlui-icon-primary nlui-icon-approve",name:"deliveryValidation",params:{deliveryId:e.deliveryId,validationType:VALIDATION_TYPE_EXTRACTION}}):_[P]==A&&NL.View.isConsole()&&(o({label:n.formatLabel(),command:function(t){window.open("xtk://open/?form=nms:extractionFormat&amp;schema=nms:delivery&amp;notifyPathList=/ignored/@launchPreparationMsg|0&amp;dock=0&amp;modal=1&amp;pk="+Number(e.deliveryId))},img:"/xtk/img/miniatures/mini-txt.png"}),i++);if(i>1){r.commandConfigs.validate={label:n.validateLabelMenu(),icon:s("nlui-icon-primary nlui-icon-approve"),mode:r.style==="classic"?"white":"primary",flat:r.style==="classic",rightIcon:"ui-icon-triangle-1-s"};var B=r.commands.slice(0);r.commands.push({name:"validate",subCommands:B}),r.commands=NL.Utils.filter(r.commands,function(e,t){return NL.Utils.indexOf(t,B)===-1})}else r.commands.length==1&&e.style==="actionbar"&&r.commandConfigs[r.commands[0]].icon&&r.commandConfigs[r.commands[0]].icon.indexOf("nlui-icon-inverse")==-1&&(r.commandConfigs[r.commands[0]].icon=null)}NL.View.isConsole()&&e.deliveryState==DELIVERY_STATE_PREPAREFAILED&&NL.XTK.parseInt(e.workflowId,0)===0&&(e.targetStatus==TARGET_STATUS_INWAITING||e.targetStatus==TARGET_STATUS_VALIDATED)&&o({label:n.launchPreparationMsg(),command:function(t){window.open("xtk://open/?form=nms:extractionFormat&amp;schema=nms:delivery&amp;notifyPathList=/ignored/@launchPreparationMsg|1&amp;dock=0&amp;modal=1&amp;pk="+Number(e.deliveryId))},img:"nlui-icon-success ui-icon-play"}),!D&&e.deliveryState!=DELIVERY_STATE_EDITION&&e.deliveryState!=DELIVERY_STATE_CANCEL&&e.deliveryState!=DELIVERY_STATE_CANCELPENDING&&e.deliveryState!=DELIVERY_STATE_PREPAREFAILED&&(e.deliveryState<DELIVERY_STATE_FINISHED&&e.style!=="actionbar"||e.deliveryState>=DELIVERY_STATE_READY&&e.style==="actionbar")&&e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE&&o({method:"confirmDialog",label:n.stopDeliveryActionTitle(),message:"<img src='/xtk/img/error.png' style='margin-right:10px;float:left'/><span>"+n.stopDeliveryAction()+"</span>",img:s("nlui-icon-error ui-icon-stop"),mode:r.style==="classic"?"white":"default",action:"Stop",title:n.stopDeliveryActionTitle(),provider:"nms:delivery",parameters:[{name:"deliveryId",value:String(e.deliveryId)}]});if(!NL.session.hasMessageCenter||e.deliveryPublicationStatus!=DELIVERY_PUBLICATION_STATUS_EDITION&&e.deliveryPublicationStatus!=DELIVERY_PUBLICATION_STATUS_DEPLOYED&&e.deliveryPublicationStatus!=DELIVERY_PUBLICATION_STATUS_FAILED){if(e.deliveryState==DELIVERY_STATE_PREPAREFAILED)r.state="error",e.deliveryStatus!=DELIVERY_STATUS_CANCELED?r.longDesc=n.preparationFailedDesc():r.longDesc=n.cancelAnalysisDesc();else if(e.deliveryState!=DELIVERY_STATE_FINISHED&&e.deliveryMode!=DELIVERY_MODE_DESCRIPTIVE){var j=deliveryActionStateType(e);r.state="info",j==ACTION_TYPE_REFUSED||j==ACTION_TYPE_SUBMIT||j==ACTION_TYPE_TOVALIDATE?(j==ACTION_TYPE_REFUSED?r.shortDesc=n.deliveryStateRefused():j==ACTION_TYPE_SUBMIT&&e.deliveryState<=DELIVERY_STATE_TARGETREADY?r.shortDesc=n.deliveryStateValidationInwaiting():j==ACTION_TYPE_TOVALIDATE&&(r.shortDesc=n.deliveryStateToValidate()),r.state="warning",e.contentStatus==CONTENT_STATUS_REFUSED?r.longDesc=n.deliveryContentRefusedDesc():e.targetStatus==TARGET_STATUS_REFUSED?r.longDesc=n.deliveryTargetRefusedDesc():e.targetStatus==BUDGET_STATUS_REFUSED?r.longDesc=n.deliveryBudgetRefusedDesc():e.targetStatus==EXTRACTION_STATUS_REFUSED?r.longDesc=n.deliveryExtractionRefusedDesc():e.targetStatus==SANDBOX_STATUS_REFUSED?r.longDesc=n.deliverySandboxRefusedDesc():j==ACTION_TYPE_REFUSED?r.longDesc=n.deliveryStateRefusedDesc():j==ACTION_TYPE_SUBMIT&&e.deliveryState<=DELIVERY_STATE_TARGETREADY?(r.longDesc=n.deliveryStateValidationInwaitingDesc(),r.state="info"):j==ACTION_TYPE_TOVALIDATE&&(NL.XTK.parseBoolean(e.isValidationLate,!1)?r.longDesc=n.deliveryValidationLateDesc():(r.longDesc=n.deliveryStateToValidateDesc(),r.state="info"))):j==ACTION_TYPE_SUBSCRIBE?r.shortDesc=n.deliveryStateSandbox():j==ACTION_TYPE_EXPIRED?(r.longDesc=n.deliveryValidityPeriodOverDesc(),r.state="warning"):j==ACTION_TYPE_CONFIRM&&NL.XTK.parseBoolean(e.contentNonEmpty,!1)?(r.shortDesc=n.deliveryStateToStart(),NL.XTK.parseBoolean(e.delayed,!1)&&NL.XTK.toString(e.contactDate)!==""&&e.state==DELIVERY_STATE_READY?r.longDesc=n.deliveryStateDelayedStartDesc(NL.View.dateTime(e.contactDate,null)):r.longDesc=n.deliveryStateToStartDesc()):j==ACTION_TYPE_EXTRACTION_APPROVAL?r.shortDesc=n.deliveryExtractionToValidate():j==ACTION_TYPE_EXTRACTION_INWAITING?(r.shortDesc=n.deliveryExtractionInWaiting(),r.longDesc=n.deliveryExtractionWaitingDesc()):j==ACTION_TYPE_PREPARATION_INWAITING?r.shortDesc=n.deliveryPreparationInWaiting():j==ACTION_TYPE_FCP_APPROVAL?r.shortDesc=n.deliveryFcpToValidate():j==ACTION_TYPE_TOEDIT&&(r.shortDesc=n.deliveryToEdit()),r.shortDesc&&!r.longDesc&&r.commands.length>0&&(r.longDesc=n.deliveryStateToValidateDesc())}}else e.deliveryPublicationStatus==DELIVERY_PUBLICATION_STATUS_DEPLOYED?(r.titleDesc=n.mcPublishDeployedTitleDesc(NL.View.dateTime(e.deliveryPublicationDate)),r.longDesc=n.mcPublishDeployedLongDesc(),r.state=""):e.deliveryPublicationStatus==DELIVERY_PUBLICATION_STATUS_EDITION&&NL.XTK.toString(e.deliveryPublicationDate)!==""?(r.titleDesc=n.mcPublishModifiedTitleDesc(NL.View.dateTime(e.deliveryPublicationDate)),r.longDesc=n.mcPublishModifiedLongDesc(),r.state="info"):(r.longDesc=n.mcPublishEditionLongDesc(),r.state="info");if(!r.longDesc)if(!NL.XTK.parseBoolean(e.targetNonEmpty,!1)&&e.deliveryState==DELIVERY_STATE_EDITION&&(!NL.session.hasMessageCenter||e.deliveryPublicationStatus==DELIVERY_PUBLICATION_STATUS_NOTAPPLICABLE))r.longDesc=n.deliveryTargetEmptyDesc(),r.state="";else if(!NL.XTK.parseBoolean(e.contentNonEmpty,!1)&&e.deliveryState<=DELIVERY_STATE_TARGETREADY)r.longDesc=n.deliveryContentEmptyDesc(),e.deliveryStatus==DELIVERY_STATE_EDITION?r.state="":r.state="warning";else if(e.deliveryState==DELIVERY_STATE_DELAYED)NL.XTK.parseBoolean(e.delayed,!1)&&NL.XTK.toString(e.contactDate)!==""?r.longDesc=n.deliveryDelayedForecastedDesc(NL.View.dateTime(e.contactDate,null)):r.longDesc=n.deliveryDelayedDesc();else if(e.deliveryState==DELIVERY_STATE_STARTED||e.deliveryState==DELIVERY_STATE_RETRYPENDING||e.deliveryState==DELIVERY_STATE_RETRY||e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_PAUSE){NL.XTK.toString(e.contactDate)!==""?r.longDesc=n.deliveryStartedDesc(NL.View.dateTime(e.contactDate,null)):r.longDesc=n.deliveryInProcessDesc();if(e.deliveryState==DELIVERY_STATE_PAUSEPENDING||e.deliveryState==DELIVERY_STATE_PAUSE)r.state="warning"}}function f(){r.state="info",NL.XTK.parseInt(e.operationId,0)!==0&&e.startState==WORKFLOW_STARTSTATE_STARTING?(r.longDesc=n.workflowStartInWaitingDesc(),r.state=""):(e.state==WORKFLOW_STATE_EDITION||e.state==WORKFLOW_STATE_FINISHED||e.state==WORKFLOW_STATE_PAUSED)&&e.startState!=WORKFLOW_STARTSTATE_STARTING&&(o({method:"confirmDialog",label:n.playWorkflowLabel(),message:n.playWorkflowConfirm(),img:e.style=="actionbar"?"":"nlui-icon-success ui-icon-play",mode:"success",action:"Start",title:n.playWorkflowTitle(),provider:"xtk:workflow",parameters:[{name:"workflowId",value:String(e.workflowId)}]}),e.state==WORKFLOW_STATE_PAUSED?r.longDesc=n.workflowPausedDesc():e.state==WORKFLOW_STATE_FINISHED?(r.title=n.workflowFinishedTitle(),r.longDesc=n.workflowFinishedDesc()):r.longDesc=n.workflowToStartDesc()),(e.state==WORKFLOW_STATE_STARTED||e.state==WORKFLOW_STATE_RESUMING)&&o({method:"confirmDialog",label:n.pauseLabel(),message:n.pauseWorkflowConfirm(),img:s("/nms/img/difpause.png"),action:"Pause",mode:"default",title:n.pauseWorkflowTitle(),provider:"xtk:workflow",parameters:[{name:"workflowId",value:String(e.workflowId)}]});if(e.state==WORKFLOW_STATE_STARTING||e.state==WORKFLOW_STATE_STARTED||e.state==WORKFLOW_STATE_PAUSED||e.state==WORKFLOW_STATE_RESUMING||e.state==WORKFLOW_STATE_RESTARTING)o({method:"confirmDialog",label:n.stopWorkflowLabel(),message:"<img src='/xtk/img/error.png' style='margin-right:10px;float:left'/><span>"+n.stopWorkflowConfirm()+"</span>",img:s("nlui-icon-error ui-icon-stop"),mode:"default",action:"Stop",title:n.stopWorkflowTitle(),provider:"xtk:workflow",parameters:[{name:"workflowId",value:String(e.workflowId)}]}),e.state==WORKFLOW_STATE_STARTING||e.state==WORKFLOW_STATE_RESTARTING?r.longDesc=n.workflowStartInWaitingDesc():e.state==WORKFLOW_STATE_STARTED||e.state==WORKFLOW_STATE_RESUMING?NL.XTK.toString(e.lastStart)!==""&&(r.longDesc=n.workflowStartedDesc(NL.View.dateTime(e.lastStart,null))):(r.longDesc=n.workflowPausedDesc(),r.state="warning")}function l(){if(!e.isModel)if(e.social&&!e.socialWebAppExtAccountChosen)r.longDesc=n.socialWebAppNoExtAccount(),r.state="warning";else if(e.social&&!e.socialWebAppExtAccountConfigured)r.longDesc=n.socialWebAppExtAccountNotConfigured(),r.state="warning";else if(e.state==WEBAPP_STATE_PROD){var t=NL.View.dateTime(e.publicationDate,null);e.forecastedPlanning>0?(r.longDesc=n.webAppForecasted(e.forecastedPlanning),r.state="info"):NL.XTK.parseBoolean(e.disabledPlanning,!1)?r.longDesc="":r.longDesc=n.webAppPublished(t)}else r.longDesc=n.webAppNotPublished(),r.state="info"}function c(){if(e.state==SIMULATION_STATUS_EDIT||e.state==SIMULATION_STATUS_FINISHED||e.state==SIMULATION_STATUS_ERROR||e.state==SIMULATION_STATUS_CANCELED||e.state==SIMULATION_STATUS_PAUSEPENDING||e.state==SIMULATION_STATUS_PAUSE)o({method:"confirmDialog",label:n.playSimulation(),message:n.playSimuConfirm(),img:e.style=="actionbar"?"":"nlui-icon-success ui-icon-play",mode:"success",action:"Schedule",title:n.playSimulation(),provider:"nms:simulation",parameters:[{name:"simulationId",value:String(e.simulationId)}]}),e.state==SIMULATION_STATUS_FINISHED?(r.title=n.simulationFinishedTitle(),r.longDesc=n.simulationFinishedDesc()):r.longDesc=n.simulationToStartDesc();else if(e.state==SIMULATION_STATUS_RUNNING||e.state==SIMULATION_STATUS_PAUSEPENDING||e.state==SIMULATION_STATUS_PAUSE)o({method:"confirmDialog",label:n.stopLabel(),message:n.stopSimuConfirm(),img:s("nlui-icon-error ui-icon-stop"),mode:"default",action:"Stop",title:n.stopLabel(),provider:"nms:simulation",parameters:[{name:"simulationId",value:String(e.simulationId)}]}),e.state==SIMULATION_STATUS_RUNNING?r.longDesc=n.simulationInProcessDesc():(r.longDesc=n.simulationPausedDesc(),r.state="warning")}function h(){r.state="info";if((e.state==TASK_STATUS_STARTED||e.state==TASK_STATUS_REFUSED)&&(e.validationState==TASK_VALIDATIONSTATE_UNDEFINED||e.validationState==TASK_VALIDATIONSTATE_REFUSED)){if(!e.hasValidated){var t=n.finishTaskLabel();e.type==TASK_TYPE_MILESTONE?t=n.validateLabel():e.isResource&&(t=n.validateResource()),o({method:"webAppDialog",label:t,mode:r.style==="classic"?"white":"success",img:e.style=="actionbar"?"":"nlui-icon-primary nlui-icon-approve",name:"taskEdition",params:{taskId:e.taskId,accept:1,cancel:0}})}e.isLate==1?(e.nbDaysLate>0?r.longDesc=n.taskLasteDesc(e.nbDaysLate):r.longDesc=n.taskLasteTodayDesc(),r.state="warning"):e.state==TASK_STATUS_REFUSED?(r.state="warning",r.longDesc=n.taskRefusedDesc()):NL.XTK.parseInt(e.nbDaysLate,0)===0?r.longDesc=n.taskToValidateTodayDesc():r.longDesc=n.taskToValidateDesc(Math.abs(e.nbDaysLate))}!e.hasValidated&&(e.state==TASK_STATUS_FORECASTED||(e.state==TASK_STATUS_STARTED||e.state==TASK_STATUS_REFUSED)&&(e.validationState==TASK_VALIDATIONSTATE_UNDEFINED||e.validationState==TASK_VALIDATIONSTATE_REFUSED))&&o({method:"webAppDialog",label:e.type==TASK_TYPE_MILESTONE||e.isResource?n.refuseLabel():n.cancelLabel(),img:r.style=="classic"?"nlui-icon-error nlui-icon-closethick":"",mode:r.style==="classic"?"white":"default",name:"taskEdition",params:{taskId:e.taskId,accept:0,cancel:1}}),e.state==TASK_STATUS_PENDING?(o({method:"webAppDialog",label:e.style=="actionbar"?n.validateTaskDesc():n.validateTask(),img:s("nlui-icon-primary nlui-icon-approve"),name:"taskEdition",params:{taskId:e.taskId,accept:1,cancel:0}}),NL.XTK.parseInt(e.expectedDaysDiff,0)<=0?r.longDesc=n.taskValidationPendingDesc():(r.longDesc=n.taskValidationLateDesc(e.expectedDaysDiff),r.shortDesc=r.state="warning")):e.state==TASK_STATUS_FORECASTED&&(NL.XTK.parseInt(e.nbDaysStart,0)===0?r.longDesc=n.taskForecastedTodayDesc():NL.XTK.parseInt(e.nbDaysStart,0)>0&&(r.longDesc=n.taskForecastedDesc(e.nbDaysStart)))}function p(){r.state="info";if(e.state==ASSET_STATUS_EDITION&&NL.XTK.parseInt(e.assigneeId,0)===0&&NL.XTK.parseInt(e.editedById,0)===0||e.state==ASSET_STATUS_REFUSED&&NL.XTK.parseInt(e.assigneeId,0)===0||e.state==ASSET_STATUS_INPROCESS||e.state==ASSET_STATUS_VALIDATIONPENDING){var t="nlui-icon-primary nlui-icon-approve";e.state==ASSET_STATUS_REFUSED&&(t="nlui-icon-warning ui-icon-alert"),o({method:"webAppDialog",label:n.validateAssetLabel(),img:s(t),mode:"primary",icon:e.state==ASSET_STATUS_REFUSED?"ui-icon-alert":"nlui-icon-approve",name:"assetValidation",params:{assetId:e.assetId}}),NL.XTK.parseInt(e.expectedDaysDiff,0)<=0?r.longDesc=n.assetValidationDesc():(r.longDesc=n.assetValidationLateDesc(e.expectedDaysDiff),r.state="warning")}(e.state==ASSET_STATUS_EDITION||e.state==ASSET_STATUS_REFUSED)&&NL.XTK.parseInt(e.editedById,0)===0&&(NL.XTK.parseInt(e.assigneeId,0)!==0?(o({method:"confirmDialog",label:n.submitValidationLabel(),message:n.assetValidationConfirm(),img:s("nlui-icon-primary nlui-icon-submit-for-approval"),action:"StartValidation",title:n.submitValidationLabel(),provider:"nms:asset",parameters:[{name:"assetId",value:String(e.assetId)}]}),r.longDesc=n.assetValidationInwaitingDesc()):r.longDesc=n.assetValidationDesc(),e.state==ASSET_STATUS_REFUSED&&(r.state="warning",r.longDesc=n.assetRefusedDesc())),e.state==ASSET_STATUS_VALIDATED&&(o({method:"webAppDialog",label:n.publicationAssetLabel(),img:"nlui-icon-upload nlui-icon-inverse",name:"assetValidation",mode:"success",params:{assetId:e.assetId}}),r.longDesc=n.assetPublicationInwaitingDesc()),e.state!=ASSET_STATUS_VALIDATIONPENDING&&e.state!=ASSET_STATUS_PUBLICATIONPENDING&&e.state!=ASSET_STATUS_INPROCESS&&e.state!=ASSET_STATUS_PUBLICATIONINPROCESS&&e.state!=ASSET_STATUS_PUBLISHED&&e.state!=ASSET_STATUS_REFUSED&&e.state!=ASSET_STATUS_CANCELED&&NL.XTK.parseInt(e.loginId,0)!==0&&(e.resourceType==RESOURCE_TYPE_FILE&&e.state==ASSET_STATUS_EDITION&&NL.XTK.parseInt(e.editedById,0)!==0&&NL.XTK.parseInt(e.editedById,0)===NL.XTK.parseInt(e.loginId,0)?(o({method:"confirmDialog",label:n.unlockLabel(),message:n.unlockConfirm(),img:"/nms/img/unlock.png",action:"Unlock",mode:"default",title:n.unlockLabel(),provider:"nms:asset",parameters:[{name:"assetId",value:String(e.assetId)}]}),r.longDesc=n.assetUnlockDesc(e.editedByLabel)):e.resourceType==RESOURCE_TYPE_FILE&&NL.XTK.parseInt(e.editedById,0)===0&&e.state==ASSET_STATUS_EDITION&&o({method:"confirmDialog",label:n.lockLabel(),message:n.lockConfirm(),img:"/nms/img/lock.png",action:"Lock",mode:"default",title:n.lockLabel(),provider:"nms:asset",parameters:[{name:"assetId",value:String(e.assetId)}]})),e.state==ASSET_STATUS_PUBLISHED||e.state==ASSET_STATUS_VALIDATED||e.state==ASSET_STATUS_REFUSED?(o({method:"webAppDialog",label:n.cancelAssetTitle(),name:"assetValidation",mode:"default",params:{assetId:e.assetId,cancel:1}}),NL.XTK.parseInt(e.alertExpiration,0)===1&&!NL.isEmpty(e.expiration)?(r.state="info",r.longDesc=n.assetExpirationDesc(NL.View.dateOnly(e.expiration,null))):e.state==ASSET_STATUS_PUBLISHED&&NL.XTK.toString(e.publication)!==""&&(r.longDesc=n.assetPublishedDesc(NL.View.dateTime(e.publication,null)),r.state="normal")):e.state==ASSET_STATUS_PUBLICATIONPENDING&&e.availabilityDaysDiff>0&&(r.longDesc=n.assetPublicationWaitingDesc(e.availabilityDaysDiff))}function d(){var t=0,i=0;r.state="info";if(e.state==OFFER_STATUS_PRODUCTIONPENDING&&e.edition)r.longDesc=n.offerProductionPendingDesc(),r.state="",o({method:"webAppDialog",label:n.offerCancel(),mode:"default",name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_CANCELLATION}});else if(e.state==OFFER_STATUS_CANCELPENDING&&e.edition)r.longDesc=n.offerCancelPendingDesc(),r.state="";else if(e.state!==OFFER_STATUS_CANCELED){e.hasCampaignPackage?(e.contentStatus==OFFER_STATUS_EDITION||e.contentStatus==OFFER_STATUS_REFUSED)&&!e.hasContentAssignee||e.contentStatus==OFFER_STATUS_INPROCESS||e.contentStatus==OFFER_STATUS_VALIDATIONPENDING?(t=ACTION_TYPE_TOVALIDATE,e.contentStatus==OFFER_STATUS_REFUSED&&(t=ACTION_TYPE_REFUSED),o({method:"webAppDialog",label:n.offerValidateContent(),img:e.hasCampaignPackage?"nlui-icon-primary nlui-icon-approve":s("nlui-icon-primary nlui-icon-approve"),name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_CONTENT,previewMode:2}})):(e.contentStatus==OFFER_STATUS_EDITION||e.contentStatus==OFFER_STATUS_REFUSED)&&e.hasContentAssignee&&(t=ACTION_TYPE_SUBMIT,o({method:"webAppDialog",label:n.launchContentToValidate(),img:"nlui-icon-primary nlui-icon-submit-for-approval",name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_SUBMITCONTENT,previewMode:2}})):(t=ACTION_TYPE_TOVALIDATE,e.contentStatus==OFFER_STATUS_REFUSED&&(t=ACTION_TYPE_REFUSED),e.contentStatus!=OFFER_STATUS_VALIDATED&&o({method:"webAppDialog",label:n.offerValidateContent(),img:"nlui-icon-primary nlui-icon-approve",name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_CONTENT,previewMode:2}}));if(e.hasCampaignPackage)if((e.eligibilityStatus==OFFER_STATUS_EDITION||e.eligibilityStatus==OFFER_STATUS_REFUSED)&&!e.hasEligibilityAssignee||e.eligibilityStatus==OFFER_STATUS_INPROCESS||e.eligibilityStatus==OFFER_STATUS_VALIDATIONPENDING){i=ACTION_TYPE_TOVALIDATE;var u="nlui-icon-primary nlui-icon-approve";e.eligibilityStatus==OFFER_STATUS_REFUSED&&(u="nlui-icon-warning ui-icon-alert",i=ACTION_TYPE_REFUSED),o({method:"webAppDialog",label:n.offerValidateEligibility(),img:u,name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_TARGET,previewMode:2}})}else(e.eligibilityStatus==OFFER_STATUS_EDITION||e.eligibilityStatus==OFFER_STATUS_REFUSED)&&e.hasEligibilityAssignee&&(i=ACTION_TYPE_SUBMIT,e.eligibilityStatus==OFFER_STATUS_REFUSED&&(i=ACTION_TYPE_REFUSED),o({method:"confirmDialog",label:n.offerSubmitEligibilityTitle(),message:n.offerStartEligibilityConfirm(),img:"nlui-icon-primary nlui-icon-submit-for-approval",action:"StartValidation",title:n.offerSubmitEligibilityTitle(),provider:"nms:offer",parameters:[{name:"offerId",value:String(e.offerId)},{name:"type",value:VALIDATION_TYPE_TARGET,type:"byte"},{name:"offerSpaces",value:""}]}));else if(e.eligibilityStatus==OFFER_STATUS_EDITION||e.eligibilityStatus==OFFER_STATUS_REFUSED)i=ACTION_TYPE_TOVALIDATE,e.eligibilityStatus==OFFER_STATUS_REFUSED&&(i=ACTION_TYPE_REFUSED),o({method:"confirmDialog",label:n.offerValidateEligibility(),message:n.offerValidationEligibilityConfirm(),img:"nlui-icon-primary nlui-icon-approve",action:"Validation",title:n.offerValidateEligibility(),provider:"nms:offer",parameters:[{name:"offerId",value:e.offerId},{name:"type",value:VALIDATION_TYPE_TARGET,type:"byte"},{name:"offerSpaces",value:""},{name:"refused",value:!1},{name:"comment",value:""}]});if(r.commands.length>1){r.commandConfigs.validate={label:n.validateLabelMenu(),subCommands:r.commands,mode:r.style==="classic"?"white":"primary",flat:r.style==="classic",icon:s("nlui-icon-primary nlui-icon-approve"),rightIcon:"ui-icon-triangle-1-s"};var a=r.commands.slice(0);r.commands.push({name:"validate",subCommands:a}),r.commands=NL.Utils.filter(r.commands,function(e,t){return NL.Utils.indexOf(t,a)===-1})}else r.commands.length===1&&e.style==="actionbar"&&r.commandConfigs[r.commands[0]].icon&&r.commandConfigs[r.commands[0]].icon.indexOf("nlui-icon-inverse")===-1&&(r.commandConfigs[r.commands[0]].icon=null);if(e.state==OFFER_STATUS_INPROCESS){if(t==ACTION_TYPE_REFUSED)r.longDesc=n.offerContentRefusedDesc();else if(i==ACTION_TYPE_REFUSED)r.longDesc=n.offerTargetRefusedDesc();else if(t==ACTION_TYPE_TOVALIDATE||i==ACTION_TYPE_TOVALIDATE)t==ACTION_TYPE_TOVALIDATE&&(e.contentStatus==OFFER_STATUS_INPROCESS||e.contentStatus==OFFER_STATUS_REFUSED)&&NL.XTK.parseInt(e.expectedContentDaysDiff)>0?(r.state="warning",r.longDesc=n.offerContentLateDesc(e.expectedContentDaysDiff)):i==ACTION_TYPE_TOVALIDATE&&(e.eligibilityStatus==OFFER_STATUS_INPROCESS||e.eligibilityStatus==OFFER_STATUS_REFUSED)&&NL.XTK.parseInt(e.expectedTargetDaysDiff)>0&&(r.state="warning",r.longDesc=n.offerTargetLateDesc(e.expectedTargetDaysDiff))}else if(!e.edition&&NL.XTK.toString(e.productionDate)!="")r.longDesc=n.offerInProdDesc(),r.state="normal";else if(t==ACTION_TYPE_SUBMIT||i==ACTION_TYPE_SUBMIT)r.longDesc=n.offerValidationInwaitingDesc();r.longDesc||(r.longDesc=n.offerValidationDesc()),NL.XTK.toString(e.productionDate)!==""&&(e.liveOfferStatus==OFFER_STATUS_CANCELED?r.title=n.offerDisableDesc(NL.View.dateTime(e.productionDate)):e.edition?r.title=n.offerValidationInProdDesc(NL.View.dateTime(e.productionDate,null)):r.title=n.offerProductionDesc(NL.View.dateTime(e.productionDate,null)),o({method:"webAppDialog",label:n.offerCancel(),mode:"default",name:"offerValidation",params:{offerId:e.offerId,validationType:VALIDATION_TYPE_CANCELLATION}}));if(i==ACTION_TYPE_REFUSED||t==ACTION_TYPE_REFUSED)r.state="warning"}}function v(){r.state="info";if(e.state==LOCALORDER_STATUS_RESERVED||e.state==LOCALORDER_STATUS_REFUSED){var t="nlui-icon-primary nlui-icon-approve";e.state==LOCALORDER_STATUS_REFUSED&&(t="nlui-icon-warning ui-icon-alert");var i=n.validateOrderLabel();e.catalogType==CENTRALLOCAL_TYPE_MUTUALIZED&&(i=n.validateOrderMutualizedLabel()),o({method:"webAppDialog",label:i,img:s(t),name:"orderValidation",params:{orderId:e.orderId}}),NL.XTK.parseInt(e.expectedDaysDiff,0)>0?(r.longDesc=n.localOrderValidationLateDesc(e.expectedDaysDiff),r.state="warning"):e.state==LOCALORDER_STATUS_REFUSED?(r.state="warning",r.longDesc=n.localOrderRefusedDesc()):r.longDesc=n.localOrderValidationDesc()}e.state!=LOCALORDER_STATUS_PROOF&&e.state!=LOCALORDER_STATUS_CANCELED&&(e.hasCenterRight||o({method:"webAppDialog",label:n.cancelLabel(),img:s("/xtk/img/xtkcancel.png"),name:"orderValidation",mode:"default",params:{orderId:e.orderId,cancel:1}}),r.longDesc||(NL.XTK.parseBoolean(e.participative,!1)?NL.XTK.toString(e.start)!==""&&(r.longDesc=n.localOrdeParticipativeDesc(NL.View.dateOnly(e.start,null))):NL.XTK.parseInt(e.availabilityDaysDiff,0)>0?r.longDesc=n.localOrderAvailableInDesc(e.availabilityDaysDiff):e.state==LOCALORDER_STATUS_VALIDATED&&(r.longDesc=n.localOrderInProcessDesc()))),e.state==LOCALORDER_STATUS_AVAILABLE?r.state="":e.alertEndCatalog!=1&&e.state==LOCALORDER_STATUS_PROOF&&(e.hasCenterRight||o({method:"confirmDialog",label:n.reserveOrderLabel(),message:n.reserveConfirm(),img:s("/nms/img/reserveOrder.png"),action:"Reserve",title:n.validationOrderTitle(),provider:"nms:localOrder",parameters:[{name:"orderId",value:String(e.orderId)}]}))}function m(){if(e.alertEndCatalog==1&&NL.XTK.toString(e.end)!=="")return;var t=!0,i=!0;if(e.alertEndCatalog!=1&&!e.hasCentralRight&&!e.useMultipleCreation){var u=NL.isEmpty(e.localOrderStatus)?[]:e.localOrderStatus.split(",");for(var a=0;a<u.length;a++)u[a]!=LOCALORDER_STATUS_CANCELED&&(u[a]==LOCALORDER_STATUS_PROOF?i=!1:(i=!1,t=!1))}r.state="info";if(e.state==CATALOG_STATUS_INPROCESS||e.state==CATALOG_STATUS_VALIDATIONPENDING||(e.state==CATALOG_STATUS_EDITION||e.state==CATALOG_STATUS_REFUSED)&&!e.hasAssignee){if(e.hasCentralRight){var f="nlui-icon-primary nlui-icon-approve";e.state==CATALOG_STATUS_REFUSED&&(f="nlui-icon-warning ui-icon-alert"),o({method:"webAppDialog",label:n.validateCatalogLabel(),img:s(f),name:"catalogValidation",params:{catalogId:e.catalogId}})}NL.XTK.parseInt(e.expectedDaysDiff,0)>0?(r.longDesc=n.catalogValidationLateDesc(e.expectedDaysDiff),r.state="warning"):e.state==CATALOG_STATUS_REFUSED?(r.state="warning",r.longDesc=n.catalogRefusedDesc()):r.longDesc=n.catalogValidationDesc()}else if(e.state==CATALOG_STATUS_EDITION||e.state==CATALOG_STATUS_REFUSED)e.hasAssignee&&e.hasCentralRight&&o({method:"confirmDialog",label:n.submitValidationLabel(),message:n.validationConfirm(),img:s("nlui-icon-primary nlui-icon-submit-for-approval"),action:"StartValidation",title:n.submitValidationLabel(),provider:"nms:centralCatalog",parameters:[{name:"catalogId",value:String(e.catalogId)}]}),e.state==CATALOG_STATUS_REFUSED?(r.state="warning",r.longDesc=n.catalogRefusedDesc()):r.longDesc=n.catalogValidationInwaitingDesc();else if(e.state==CATALOG_STATUS_VALIDATED||e.state==CATALOG_STATUS_PUBLISHED)e.hasCentralRight&&o({method:"webAppDialog",label:n.catalogCancelLabel(),img:s("/xtk/img/xtkcancel.png"),name:"catalogValidation",mode:"default",params:{catalogId:e.catalogId,cancel:1}}),e.state==CATALOG_STATUS_PUBLISHED?application.operator.hasRight("central")?NL.XTK.parseInt(e.startDaysDiff,0)>0?r.longDesc=n.catalogAvailableInDesc(e.startDaysDiff):NL.XTK.toString(e.start)!==""&&(r.longDesc=n.catalogPublishedDesc(NL.View.dateOnly(e.start,null)),r.state="normal"):NL.XTK.parseBoolean(t,!1)?NL.XTK.toString(e.subscriptionLimit)!==""?r.longDesc=n.catalogToReserveWithLimitDesc(NL.View.dateOnly(e.subscriptionLimit,null)):r.longDesc=n.catalogToReserveDesc():(NL.XTK.parseBoolean(e.participative,!1)||(NL.XTK.parseInt(e.availabilityDaysDiff,0)>0?r.longDesc=n.catalogOpAvailableInDesc(e.availabilityDaysDiff):NL.XTK.toString(e.availability)!==""&&(r.longDesc=n.catalogOperationAvailableDesc(NL.View.dateOnly(e.availability,null)),r.state="normal")),r.longDesc||(r.longDesc=n.catalogReservedDesc(),r.state="normal")):e.state==CATALOG_STATUS_VALIDATED&&(NL.XTK.parseInt(e.startDaysDiff,0)>0?r.longDesc=n.catalogAvailableInDesc(e.startDaysDiff):NL.XTK.toString(e.start)!==""&&(r.longDesc=n.catalogAvailableDesc(NL.View.dateOnly(e.start,null))));!e.hasCentralRight&&e.state==CATALOG_STATUS_PUBLISHED&&(t&&o({label:n.reserveOrderLabel(),view:"catalogOrder",params:{catalogId:e.catalogId,reserve:1},newWindow:!0,mode:"primary",img:s("/nms/img/reserveOrder.png")}),e.activeProof&&i&&(e.type==CENTRALLOCAL_TYPE_MUTUALIZED||e.type==CENTRALLOCAL_TYPE_LOCAL)&&o({label:n.proofOrderLabel(),view:"catalogOrder",params:{catalogId:e.catalogId,reserve:0},newWindow:!0,mode:"default",img:s("/nms/img/testOrder.png")}))}var n;NL.side("server")?n=sg_nms_campaign:n=nms_campaign;var r={commands:[],commandConfigs:{},views:[],viewConfigs:{},separators:!0},i=0;return e.style==="actionbar"?r.style="actionbar":(r.style="classic",r.separators=!1),e.name==="catalog"?m():e.name==="order"?v():e.name==="offer"?d():e.name==="asset"?p():e.name==="task"?h():e.name==="simulation"?c():e.name==="workflow"?f():e.name==="delivery"?a():e.name==="operation"?u():e.name==="webApp"&&l(),NL.side("server")?JSON.stringify(r):r}function assetContentTypeImg(e,t){return e===0?"nlui-img-contentType-image":e===1?"nlui-img-contentType-word":e===2?"nlui-img-contentType-xls":e===3?"nlui-img-contentType-pdf":e===4?"nlui-img-contentType-ppt":e===6?"nlui-img-contentType-text":e===5?"nlui-img-contentType-html":e===11||t.indexOf("audio/")!==-1?"nlui-img-contentType-audio":e===10||t.indexOf("video/")!==-1?"nlui-img-contentType-video":"nlui-img-nms-asset-large"}function deliveryLogofromMessageType(e){var t="";return e==DELIVERY_MESSAGETYPE_EMAIL?t="nlui-img-nms-activities-email":e==DELIVERY_MESSAGETYPE_SMS?t="nlui-img-nms-activities-sms":e==DELIVERY_MESSAGETYPE_PHONE?t="nlui-img-nms-activities-phone":e==DELIVERY_MESSAGETYPE_PAPER?t="nlui-img-nms-activities-envelope":e==DELIVERY_MESSAGETYPE_FAX?t="nlui-img-nms-activities-fax":e==DELIVERY_MESSAGETYPE_AGENCY?t="nlui-img-nms-activities-agency":e==DELIVERY_MESSAGETYPE_FACEBOOK?t="nlui-img-nms-activities-facebook":e==DELIVERY_MESSAGETYPE_TWITTER?t="nlui-img-nms-activities-twitter":e==DELIVERY_MESSAGETYPE_IOS?t="nlui-img-nms-activities-ios":e==DELIVERY_MESSAGETYPE_ANDROID?t="nlui-img-nms-activities-android":e==DELIVERY_MESSAGETYPE_OTHER?t="nlui-img-nms-activities-other":t="nlui-img-nms-activities-delivery",t}function validationTypeLabel(e,t){return e==VALIDATION_TYPE_TARGET?t.validationTypeTargetLabel():e==VALIDATION_TYPE_CONTENT?t.validationTypeContentLabel():e==VALIDATION_TYPE_BUDGET?t.validationTypeBudgetLabel():e==VALIDATION_TYPE_EXTRACTION?t.validationTypeExtractionLabel():e==VALIDATION_TYPE_FCP?t.validationTypeFCPLabel():e==VALIDATION_TYPE_SANDBOX?t.validationTypeSandboxLabel():e==VALIDATION_TYPE_AVAILABLE?t.validationTypeEditionLabel():e==VALIDATION_TYPE_EXTERNAL?t.validationTypeExternalLabel():""}function catalogOperationTypeLabel(e,t,n,r){var i;typeof r!="undefined"?i=r:NL.side("server")?i=sg_nms_campaign:i=nms_campaign;var s="";return e==CENTRALLOCAL_TYPE_LOCAL?t?s=i.localCentralControl():s=i.localNoCentralControl():e==CENTRALLOCAL_TYPE_MUTUALIZED&&(n?s=i.mutualizedParticipative():s=i.mutualizedNoParticipative()),s}function localOrderStatusLabel(e,t,n){var r;return typeof n!="undefined"?r=n:NL.side("server")?r=sg_nms_campaign:r=nms_campaign,e==LOCALORDER_STATUS_PROOF?NL.XTK.parseBoolean(t,!1)===!0?r.evaluatedLabel():r.toEvaluateLabel():e==LOCALORDER_STATUS_RESERVED?NL.XTK.parseBoolean(t,!1)===!0?r.toReserveLabel():r.reservedLabel():e==LOCALORDER_STATUS_VALIDATED?r.validatedLabel():e==LOCALORDER_STATUS_AVAILABLE?r.availableLabel():e==LOCALORDER_STATUS_CANCELED?r.orderCanceledLabel():e==LOCALORDER_STATUS_ERROR?r.orderErrorLabel():e==LOCALORDER_STATUS_REFUSED?r.orderRefusedLabel():""}function displayPlanning(e,t,n){var r;return typeof n!="undefined"?r=n:NL.side("server")?r=sg_nms_campaign:r=nms_campaign,!NL.isEmpty(e)&&!NL.isEmpty(t)?r.planningHeader(NL.View.dateTime(e,null),NL.View.dateTime(t,null)):NL.isEmpty(e)?NL.isEmpty(t)?"":r.toHeaderAlone(NL.View.dateTime(t,null)):r.fromHeaderAlone(NL.View.dateTime(e,null))}function displayDeliveryStateLabel(e,t,n){var r;return NL.side("server")?r=sg_nms_campaign:r=nms_campaign,t==DELIVERY_STATE_PREPAREFAILED&&e==DELIVERY_STATUS_CANCELED?r.dlvStateEdition():n}function displayDeliveryStateImg(e,t,n){return t==DELIVERY_STATE_PREPAREFAILED&&e==DELIVERY_STATUS_CANCELED?"/nms/img/delivery.png":NL.route(n,"reverse_img")}function displayFileSize(e,t){var n;return typeof t!="undefined"?n=t:NL.side("server")?n=sg_nms_campaign:n=nms_campaign,e>=1024?parseInt(e/1024,10)+" "+n.fileSizeKb():"1 "+n.fileSizeKb()}function displayDurationLabel(e,t){var n;typeof t!="undefined"?n=t:NL.side("server")?n=sg_nms_campaign:n=nms_campaign;var r=86400;return e<r?n.durationHour(Math.ceil(e/3600)):n.durationDay(Math.ceil(e/r))}function showHideBlock(e,t){var n=document.getElementById(e),r=document.getElementById("url"+e);NL.XTK.parseBoolean(t,!1)||$("#"+e).slideToggle("fast"),!NL.isNundef(n)&&(n.style.display==="none"||!n.style.display)?NL.isNundef(r)?n.style.display="block":r.style.fontWeight="bold":NL.isNundef(r)?n.style.display="none":r.style.fontWeight="normal";var i=document.getElementById("filterImg");i&&(i.src.indexOf("filterRight.png")!==-1?i.src=i.src.replace("filterRight.png","filterDown.png"):i.src=i.src.replace("filterDown.png","filterRight.png"))}function showHideFilterContainer(){var e=1;NL.XTK.parseInt(document.controller.getValue("/ctx/vars/filterVisibility"),0)===1&&(e=0),document.controller.setValue("/ctx/vars/filterVisibility",e,null);var t=document.getElementById("filterImg");t&&(t.src.indexOf("filterRight.png")!==-1?t.src=t.src.replace("filterRight.png","filterDown.png"):t.src=t.src.replace("filterDown.png","filterRight.png"))}function resetFilters(e){e&&document.controller&&(document.controller.resetObservers(),e.load())}function getValue(e,t){var n=getXPathValue(e,t);return typeof n=="undefined"&&(n=""),n}function show_props(e,t){var n="";for(var r in e)n+=t+""+r+" = "+e[r]+"\n";return n}NL.require("/nl/core/shared/nl.js");var WORKFLOW_STATE_EDITION=0,WORKFLOW_STATE_RUNNING=2,WORKFLOW_STATE_STARTED=3,WORKFLOW_STATE_TESTING=9,WORKFLOW_STATE_STARTING=10,WORKFLOW_STATE_STARTED=11,WORKFLOW_STATE_PAUSING=12,WORKFLOW_STATE_PAUSED=13,WORKFLOW_STATE_RESUMING=14,WORKFLOW_STATE_STOPPING=15,WORKFLOW_STATE_STOPPING2=16,WORKFLOW_STATE_RESTARTING=17,WORKFLOW_STATE_RESTARTING2=18,WORKFLOW_STATE_STOPPED=20,WORKFLOW_STATE_FINISHED=20,WORKFLOW_STARTSTATE_UNDEFINED=0,WORKFLOW_STARTSTATE_STARTING=1,OPERATION_STATUS_ALL=-1,OPERATION_STATUS_EDITION=0,OPERATION_STATUS_STARTED=1,OPERATION_STATUS_FINISHED=2,OPERATION_STATUS_CANCELING=3,OPERATION_STATUS_CANCELED=4,OPERATION_CANCELSTATE_UNDEFINED=0,OPERATION_CANCELSTATE_CANCELING=3,OPERATION_CANCELSTATE_CANCELED=4,OPERATION_BUDGETSTATUS_EDITION=0,OPERATION_BUDGETSTATUS_DEFINED=1,OPERATION_BUDGETSTATUS_FINISHED=2,OPERATION_LOG_TYPE_ERROR=0,OPERATION_LOG_TYPE_WARNING=1,OPERATION_LOG_TYPE_INFO=2,OPERATION_LOG_TYPE_STATUS=3,OPERATION_LOG_TYPE_VERBOSE=4,OPERATION_TYPE_UNIQUE=0,OPERATION_TYPE_RECURRENT=1,OPERATION_TYPE_PERIODIC=2,TASK_STATUS_EDITION=0,TASK_STATUS_FORECASTED=1,TASK_STATUS_STARTED=2,TASK_STATUS_FINISHED=3,TASK_STATUS_CANCELED=4,TASK_STATUS_PENDING=5,TASK_STATUS_VALIDATED=6,TASK_STATUS_REFUSED=7,TASK_PRIORITY_NORMAL=1,TASK_TYPE_TASK=0,TASK_TYPE_MILESTONE=1,TASK_TYPE_GROUPING=2,TASK_TYPE_NOTIFICATION=3,TASK_TYPE_ASSET=4,TASK_VALIDATIONTYPE_TARGET=0,TASK_VALIDATIONTYPE_CONTENT=1,TASK_VALIDATIONTYPE_BUDGET=2,TASK_VALIDATIONTYPE_EXTRACTION=3,TASK_VALIDATIONTYPE_FCP=4,TASK_VALIDATIONTYPE_SANDBOX=5,TASK_VALIDATIONTYPE_AVAILABLE=6,TASK_VALIDATIONTYPE_EXTERNAL=7,TASK_VALIDATIONSTATE_UNDEFINED=0,TASK_VALIDATIONSTATE_VALIDATED=1,TASK_VALIDATIONSTATE_REFUSED=2,TASK_NTF_INITIAL=0,TASK_NTF_TASK=1,TASK_NTF_FINISHED=2,TASK_NTF_CANCELED=3,TASK_NTF_RES_FINISHED=4,TASK_NTF_RES_CANCELED=5,TASK_NTF_VALIDATED=6,TASK_NTF_REFUSED=7,TASK_NTF_ALERT=8,TASK_FILTER_ALL=50,TASK_FILTER_LATE=51,DELIVERY_FILTER_ALL=0,DELIVERY_FILTER_EDITION=1,DELIVERY_FILTER_TOVALIDATE=2,DELIVERY_FILTER_STARTED=3,DELIVERY_FILTER_FINISHED=4,DELIVERY_FILTER_FAILED=5,DELIVERY_FILTER_CANCELED=6,DELIVERY_STATE_EDITION=0,DELIVERY_STATE_TARGETPENDING=11,DELIVERY_STATE_TARGETSELECTION=12,DELIVERY_STATE_TARGETARBITRATION=13,DELIVERY_STATE_TARGETREADY=15,DELIVERY_STATE_MSGPREPENDING=21,DELIVERY_STATE_PREPARATION=22,DELIVERY_STATE_MESSAGEFINISHED=25,DELIVERY_STATE_PREPAREFAILED=37,DELIVERY_STATE_READY=45,DELIVERY_STATE_DELAYED=51,DELIVERY_STATE_STARTED=55,DELIVERY_STATE_RETRYPENDING=61,DELIVERY_STATE_RETRY=62,DELIVERY_STATE_CANCELPENDING=81,DELIVERY_STATE_CANCEL=85,DELIVERY_STATE_PAUSEPENDING=71,DELIVERY_STATE_PAUSE=75,DELIVERY_STATE_FINISHED=95,DELIVERY_STATE_DELETED=100,DELIVERY_STATUS_CANCELED=4,DELIVERY_DELETE_STATUS_DELETED=2,DELIVERY_MESSAGETYPE_EMAIL=0,DELIVERY_MESSAGETYPE_SMS=1,DELIVERY_MESSAGETYPE_PHONE=2,DELIVERY_MESSAGETYPE_PAPER=3,DELIVERY_MESSAGETYPE_FAX=4,DELIVERY_MESSAGETYPE_AGENCY=5,DELIVERY_MESSAGETYPE_FACEBOOK=20,DELIVERY_MESSAGETYPE_TWITTER=25,DELIVERY_MESSAGETYPE_MOBILEAPP=40,DELIVERY_MESSAGETYPE_IOS=41,DELIVERY_MESSAGETYPE_ANDROID=42,DELIVERY_MESSAGETYPE_OTHER=120,DELIVERY_PUBLICATION_STATUS_NOTAPPLICABLE=0,DELIVERY_PUBLICATION_STATUS_EDITION=1,DELIVERY_PUBLICATION_STATUS_DEPLOYED=2,DELIVERY_PUBLICATION_STATUS_FAILED=3,DELIVERY_PUBLICATION_STATUS_PRODUCTION=100,MESSAGE_TYPE_TASK=9,DELIVERY_STATUS_IGNORED=0,DELIVERY_STATUS_SENT=1,DELIVERY_STATUS_TOSENT=6,DELIVERY_MODE_EXTERNAL=0,DELIVERY_MODE_BULK=1,DELIVERY_MODE_DESCRIPTIVE=2,DELIVERY_MODE_MIDSOURCING=4,DELIVERY_KPI_ERROR_THRESHOLD=85,DELIVERY_KPI_WARNING_THRESHOLD=95,FAILURE_RAISON_CONTROL=127,MESSAGE_TYPE_ALL=127,VALIDATION_MODE_AUTO=0,VALIDATION_MODE_MANUAL=1,DEFAULT_MAX_RUNNINGS=10,TIME_RANGE_DAY=0,TIME_RANGE_FORECASTED=1,STOCKLINE_TYPE_REAL=0,STOCKLINE_TYPE_ORDER=1,STOCKLINE_TYPE_CONSUME=2,CONTENT_STATUS_EDITION=0,CONTENT_STATUS_INWAITING=1,CONTENT_STATUS_VALIDATED=2,CONTENT_STATUS_REFUSED=3,CONTENT_STATUS_FCP_INWAITING=4,CONTENT_STATUS_FCP_VALIDATED=5,CONTENT_STATUS_FCP_REFUSED=6,CONTENT_STATUS_INPROGRESS=10,CONTENT_STATUS_AVAILABLE=11,CONTENT_STATUS_EXTERNAL_INWAITING=15,CONTENT_STATUS_EXTERNAL_REFUSED=16,TARGET_STATUS_EDITION=0,TARGET_STATUS_INWAITING=1,TARGET_STATUS_VALIDATED=2,TARGET_STATUS_REFUSED=3,BUDGET_STATUS_EDITION=0,BUDGET_STATUS_INWAITING=1,BUDGET_STATUS_VALIDATED=2,BUDGET_STATUS_REFUSED=3,COMPUTATION_STATE_UNDEFINED=0,COMPUTATION_STATE_INWAITING=1,COMPUTATION_STATE_INPROCESS=2,COMPUTATION_STATE_FINISHED=3,EXTRACTION_STATUS_EDITION=0,EXTRACTION_STATUS_INWAITING=1,EXTRACTION_STATUS_VALIDATED=2,EXTRACTION_STATUS_REFUSED=3,EXTRACTION_STATUS_SENT=4,SANDBOX_STATUS_EDITION=0,SANDBOX_STATUS_INWAITING=1,SANDBOX_STATUS_VALIDATED=2,SANDBOX_STATUS_REFUSED=3,VALIDATION_TYPE_TARGET=0,VALIDATION_TYPE_CONTENT=1,VALIDATION_TYPE_BUDGET=2,VALIDATION_TYPE_EXTRACTION=3,VALIDATION_TYPE_FCP=4,VALIDATION_TYPE_SANDBOX=5,VALIDATION_TYPE_AVAILABLE=6,VALIDATION_TYPE_EXTERNAL=7,VALIDATION_TYPE_STARTING=9,VALIDATION_TYPE_MANUAL=10,VALIDATION_TYPE_SUBMITFCP=11,VALIDATION_TYPE_SUBMITCONTENT=12,VALIDATION_TYPE_SUBMITEDITION=13,VALIDATION_TYPE_VALIDATION=20,VALIDATION_TYPE_PUBLICATION=21,VALIDATION_TYPE_CANCELLATION=22,VALIDATION_TYPE_RESERVATION=23,VALIDATION_TYPE_FORMAT=24,VALIDATION_TYPE_SUBMITBUDGET=25,VALIDATION_TYPE_LOCK=30,VALIDATION_TYPE_UNLOCK=31,ASSET_STATUS_EDITION=0,ASSET_STATUS_VALIDATIONPENDING=1,ASSET_STATUS_INPROCESS=2,ASSET_STATUS_VALIDATED=3,ASSET_STATUS_REFUSED=4,ASSET_STATUS_PUBLICATIONPENDING=5,ASSET_STATUS_PUBLICATIONINPROCESS=6,ASSET_STATUS_PUBLISHED=7,ASSET_STATUS_CANCELED=8,DATATRANSFER_STATUS_EDITION=0,DATATRANSFER_STATUS_RUNNING=2,DATATRANSFER_STATUS_CANCELING=3,DATATRANSFER_STATUS_CANCELED=4,DATATRANSFER_STATUS_FINISHED=5,DATATRANSFER_STATUS_ERROR=6,DATATRANSFER_STATUS_PAUSING=7,DATATRANSFER_STATUS_PAUSED=8,COSTLINE_TYPE_PLANNED=0,COSTLINE_TYPE_RESERVED=1,COSTLINE_TYPE_COMMITTED=2,COSTLINE_TYPE_EXPENSED=3,VALIDATIONLOG_ACTION_VALIDATED=0,VALIDATIONLOG_ACTION_REFUSED=1,VALIDATIONLOG_ACTION_CANCELED=2,MEASURE_TYPE_WITHOUTCONTROL=0,MEASURE_TYPE_WITHCONTROL=1,HYPOTHESIS_STATE_EDITION=0,HYPOTHESIS_STATE_WAITING=1,HYPOTHESIS_STATE_STARTED=2,HYPOTHESIS_STATE_FINISHED=3,HYPOTHESIS_STATE_ERROR=4,OPERATOR_TYPE_OP=0,OPERATOR_TYPE_GROUP=1,OPERATOR_TYPE_RIGHT=2,WORKFLOWTASK_STATUS_PENDING=0,MOBILE_MSGTYPE_SMS=0,MOBILE_MSGTYPE_WAPPUSH=1,MOBILE_MSGTYPE_MMS=2,CATALOG_STATUS_EDITION=0,CATALOG_STATUS_VALIDATIONPENDING=1,CATALOG_STATUS_INPROCESS=2,CATALOG_STATUS_VALIDATED=3,CATALOG_STATUS_REFUSED=4,CATALOG_STATUS_PUBLISHED=7,CATALOG_STATUS_CANCELED=8,CENTRALLOCAL_TYPE_LOCAL=0,CENTRALLOCAL_TYPE_MUTUALIZED=1,LOCALORDER_STATUS_PROOF=0,LOCALORDER_STATUS_RESERVED=1,LOCALORDER_STATUS_VALIDATED=2,LOCALORDER_STATUS_REFUSED=6,LOCALORDER_STATUS_AVAILABLE=3,LOCALORDER_STATUS_CANCELED=4,LOCALORDER_STATUS_ERROR=5,OPERATION_WEBAPPTYPE_NONE=0,OPERATION_WEBAPPTYPE_DEFAULT=1,OPERATION_WEBAPPTYPE_USER=2,RESOURCE_TYPE_FILE=0,SIMULATION_STATUS_EDIT=0,SIMULATION_STATUS_PENDING=1,SIMULATION_STATUS_RUNNING=2,SIMULATION_STATUS_CANCELING=3,SIMULATION_STATUS_CANCELED=4,SIMULATION_STATUS_FINISHED=5,SIMULATION_STATUS_ERROR=6,SIMULATION_STATUS_PAUSEPENDING=7,SIMULATION_STATUS_PAUSE=8,HYPOTHESIS_STATUS_EDIT=0,HYPOTHESIS_STATUS_PENDING=1,HYPOTHESIS_STATUS_RUNNING=2,HYPOTHESIS_STATUS_CANCELING=3,HYPOTHESIS_STATUS_CANCELED=4,HYPOTHESIS_STATUS_FINISHED=5,HYPOTHESIS_STATUS_ERROR=6,HYPOTHESIS_STATUS_PAUSEPENDING=7,HYPOTHESIS_STATUS_PAUSE=8,HYPOTHESIS_TYPE_DELIVERY=0,HYPOTHESIS_TYPE_OFFER=1,HYPOTHESIS_TYPE_ALL=127,WEBAPP_STATE_EDITION=0,WEBAPP_STATE_TOPUBLISH=5,WEBAPP_STATE_PROD=10,REPORT_STATE_PROD=10,SANDBOXMODE_COMPLETE=0,SANDBOXMODE_SANDBOX=1,SANDBOXMODE_SIMULATION=2,VALIDATION_NOTIF=0,PUBLICATION_NOTIF=1,OPERATION_NOTIF=2,CANCELLATION_NOTIF=3,PROPOSITION_STATUS_ACCEPTED=3,PROPOSITION_STATUS_CONTROL=99,VALIDATION_TYPE_DELAY=0,VALIDATION_TYPE_DATE=1,PROCESS_TYPE_CREATEOPERATION=0,PROCESS_TYPE_CREATEWORKFLOW=1,PROCESS_TYPE_CANCELOPERATION=2,GROUP_TYPE_NMS=0,GROUP_TYPE_SEG=1,GROUP_TYPE_FILE=2,GROUP_TYPE_TEMPLATE=3,GROUP_ORIGIN_NMS=0,GROUP_ORIGIN_SEG=1,GROUP_ORIGIN_FILE=2,GROUP_ORIGIN_IMPORTLEAD=3,OFFER_STATUS_EDITION=0,OFFER_STATUS_VALIDATIONPENDING=1,OFFER_STATUS_INPROCESS=2,OFFER_STATUS_VALIDATED=3,OFFER_STATUS_REFUSED=4,OFFER_STATUS_CANCELED=5,OFFER_STATUS_PUBLISHED=6,OFFER_STATUS_PRODUCTIONPENDING=7,OFFER_STATUS_CANCELPENDING=8,OFFERVIEW_STATE_EDITION=0,OFFERVIEW_STATE_VALIDATIONPENDING=1,OFFERVIEW_STATE_VALIDATED=3,OFFERVIEW_STATE_REFUSED=4,OFFERVIEW_STATE_CANCELED=5,OFFERVIEW_STATE_PUBLISHED=6,SERVICE_TYPE_EMAIL=0,SERVICE_TYPE_MOBILE=1,SERVICE_TYPE_FACEBOOK=20,SERVICE_TYPE_TWEETER=25,SERVICE_TYPE_APP=40,ACTION_TYPE_NONE=0,ACTION_TYPE_TOVALIDATE=1,ACTION_TYPE_REFUSED=2,ACTION_TYPE_SUBMIT=3,ACTION_TYPE_SUBSCRIBE=4,ACTION_TYPE_CONFIRM=5,ACTION_TYPE_EXTRACTION_APPROVAL=6,ACTION_TYPE_EXTRACTION_INWAITING=7,ACTION_TYPE_FCP_APPROVAL=8,ACTION_TYPE_TOEDIT=9,ACTION_TYPE_PREPARATION_INWAITING=10,ACTION_TYPE_EXPIRED=11,OUTGOINGLEAD_STAGE_UNQUALIFIED="unqualified",OUTGOINGLEAD_STAGE_MARKETINGQUALIFIED="marketingQualified",OUTGOINGLEAD_STAGE_SALESACCEPTED="salesAccepted",OUTGOINGLEAD_STAGE_ABANDONNED="abandonned",OUTGOINGLEAD_STAGE_REJECTED="rejected",OUTGOINGLEAD_STAGE_OPPORTUNITY="opportunity",OUTGOINGLEAD_STAGE_CLOSEDLOST="closedLost",OUTGOINGLEAD_STAGE_CLOSEDWON="closedWon",OPPORTUNITY_STATUS_INPROGRESS="inProgress",OPPORTUNITY_STATUS_CLOSEDWON="closedWon",OPPORTUNITY_STATUS_CLOSEDLOST="closedLost"
;"use strict";function jobLogTypeImg(e){return e==0?"logerr.png":e==1?"logwarn.png":e==2?"loginfo.png":e==3||e==4?"logmsg.png":""}function XawDeliveryList(e){XawListBase.call(this,e),this.setConfig('<config id="delivery" blockLabel="'+nms_campaign.blockDelivery()+'" blockLabelSingle="'+nms_campaign.blockDeliverySingle()+'"'+'        blockImg="/nms/img/delivery24x24.png">'+'  <cell label="'+nms_campaign.columnLabel()+'"/> '+'  <cell width="'+CELL_STATUS_STATE_WIDTH+'" label="'+nms_campaign.columnState()+'"/> '+"</config>"),this.bHideTitle=!0,this.controller.registerObserver("/ctx/@deliveryFilter",this,this.onChange),this.deliveryState=DELIVERY_FILTER_ALL}function XawTaskList(e){XawListBase.call(this,e),this.setConfig('<config id="task" blockLabel="'+nms_campaign.blockTask()+'"'+'        blockImg="/nms/img/task24x24.png">'+"</config>"),this.bHideTitle=!0,this.controller.registerObserver("/ctx/@taskFilter",this,this.onChange),this.taskState=TASK_FILTER_ALL,this.deliveryList=null,this.extractionList=null}function XawOperationLogList(e){XawListBase.call(this,e),this.setConfig('<config blockLabel="'+nms_campaign.blockLog()+'" '+'        blockImg="/xtk/img/logs.png">'+'  <cell width="170" label="'+nms_campaign.columnDate()+'"/> '+'  <cell label="'+nms_campaign.columnMessage()+'"/> '+"</config>"),this.controller.registerObserver("/ctx/@showHideLogList",this,this.load),this.bLoaded=!1,this.bLoadImmediatly=!1}function XawLandingPageList(e){XawListBase.call(this,e),this.strSingleTitleLabel=nms_campaign.singleElementLandingPageTitle(),this.strTitleLabel=nms_campaign.multiElementsLandingPageTitle(),this.strElementImage="/crm/img/landingPage.png",this.strElementSchema="crm:landingPage",this.strElementForm="crm:landingPageWiz",this.strElementType="landingPage"}function XawImportList(e){XawListBase.call(this,e),this.strSingleTitleLabel=nms_campaign.singleElementImportTitle(),this.strTitleLabel=nms_campaign.multiElementsImportTitle(),this.strElementImage="/crm/img/lead_imp_leads.png",this.strElementSchema="crm:import",this.strElementForm="nms:group",this.strElementType="group"}function XawJobLogList(e,t){XawListBase.call(this,e),this.setConfig('<config blockLabel="'+nms_campaign.blockLog()+'" '+'        blockImg="/xtk/img/logs.png" class="cellContent">'+'  <cell width="170" label="'+nms_campaign.columnDate()+'"/> '+'  <cell label="'+nms_campaign.columnMessage()+'"/> '+"</config>"),this.controller.registerObserver("/ctx/@showHideLogList",this,this.load),this.bLoaded=!1,this.bLoadImmediatly=!1,this.entityId=t,this.bHideHeader=!0}function XawWorkflowLogList(e,t){XawJobLogList.call(this,e),this.setConfig('<config blockLabel="'+nms_campaign.blockLog()+'" '+'        blockImg="/xtk/img/logs.png" class="cellContent">'+'  <cell width="170" label="'+nms_campaign.columnDate()+'"/> '+'  <cell width="130" label="'+nms_campaign.activityCell()+'"/> '+'  <cell label="'+nms_campaign.columnMessage()+'"/> '+"</config>"),this.entityId=t}function XawValidationLogList(e,t,n){XawListBase.call(this,e),this.setConfig('<config blockLabel="'+nms_campaign.blockLog()+'" '+'        blockImg="/xtk/img/logs.png" class="cellContent">'+'  <cell width="170" label="'+nms_campaign.columnDate()+'"/> '+'  <cell width="130" label="'+nms_campaign.columnAction()+'"/> '+'  <cell width="130" label="'+nms_campaign.columnType()+'"/> '+'  <cell label="'+nms_campaign.columnValidatedBy()+'"/> '+"</config>"),this.controller.registerObserver("/ctx/@showHideLogList",this,this.load),this.bLoaded=!1,this.bLoadImmediatly=!1,this.entityId=t,this.bHideHeader=!0,this.strEntityXPath=n}function overLine(e){if(e.className.indexOf("Select")!=-1)return;e.className.indexOf("Odd")!=-1?e.className.indexOf("Over")!=-1?e.className="listOddLine":e.className="listOddLineOver":e.className.indexOf("Even")!=-1&&(e.className.indexOf("Over")!=-1?e.className="listEvenLine":e.className="listEvenLineOver")}function selectLine(e,t,n){e.className.indexOf("Odd")!=-1?e.className.indexOf("Select")!=-1?e.className="listOddLineOver":e.className="listOddLineSelect":e.className.indexOf("Even")!=-1&&(e.className.indexOf("Select")!=-1?e.className="listEvenLineOver":e.className="listEvenLineSelect"),showHideBlock(t,n)}var CELL_STATUS_STATE_WIDTH=160,MAX_LINKED_DOCUMENT=10,MAX_LOG_LINE_COUNT=200;XawDeliveryList.prototype=new XawListBase,XawDeliveryList.prototype.addActionMenu=function(e,t){var n,r=NL.UI.Actions();n={controller:e.controller,viewConfigs:{open:{type:"navigation",flat:!0,mode:"white",xtkDelegated:!0,view:"delivery",params:{id:Number(t)},label:nms_campaign.openLabel(),icon:"ui-icon-search"}},views:["open"]},this.tdBlockLine.style.marginTop="2px",this.tdBlockLine.style.marginLeft="4px",NL.Utils.each(e.commandConfigs,function(e,t){NL.isNundef(t.command)&&NL.isPlainObject(t.action)&&(t.command=function(){r[t.action.method](t.action.args)})});for(var i in e.commandConfigs)if(e.commandConfigs[i].hasOwnProperty("subCommands")){var s=NL.Utils.indexOf(i,e.commands);e.commands[s]={name:i,subCommands:e.commandConfigs[i].subCommands},e.commandConfigs[i].rightIcon="ui-icon-triangle-1-s",delete e.commandConfigs[i].subcommands}var o=$("<div>",{style:"display: inline-block;"}).nlViewBar(n),u=$("<div>",{style:"display: inline-block;"}).nlCmdBar(e);$(this.tdBlockLine).append(o,u)},XawDeliveryList.prototype.render=function(e){if($(e).children().size()===0){XawListBase.prototype.render.call(this,e);if(this.tdFilter!=null){var t=this,n={mode:"default",icon:"nlui-icon-list-refresh",onClick:function(){t.load()},help:xtk_core.list_refresh_button_help,helpGravity:"autoNS"},r=$("<div></div>").nlButton(n);r.css("marginLeft","4px"),r.css("float","right"),$(this.tdFilter).append(r);var i=this.tdFilter.appendChild(document.createElement("select"));i.id="deliveryFilter",i.style.fontSize="8pt",i.style.height="28px",i.style.verticalAlign="middle",i.controller=this.controller,i.onchange=function(e){this.controller.setValue("/ctx/@deliveryFilter",this.value,"deliveryFilter")},this.addOption(i,DELIVERY_FILTER_ALL,nms_campaign.filterDeliveryAll()),this.addOption(i,DELIVERY_FILTER_EDITION,nms_campaign.filterDeliveryEdition()),this.addOption(i,DELIVERY_FILTER_TOVALIDATE,nms_campaign.filterDeliveryToValidate()),this.addOption(i,DELIVERY_FILTER_STARTED,nms_campaign.filterDeliveryStarted()),this.addOption(i,DELIVERY_FILTER_FINISHED,nms_campaign.filterDeliveryFinished()),this.addOption(i,DELIVERY_FILTER_FAILED,nms_campaign.filterDeliveryFailed()),this.addOption(i,DELIVERY_FILTER_CANCELED,nms_campaign.filterDeliveryCanceled())}}},XawDeliveryList.prototype.displayStateLabel=function(e,t,n,r,i){var s="";t.shortDesc?t.state=="warning"||t.state=="info"?(t.state=="warning"&&(s='<img src="/xtk/img/logwarn.png" style="vertical-align:top;" border="0"/>&nbsp;'),s+="<b>"+t.shortDesc+"</b>"):s=t.shortDesc:s=displayDeliveryStateLabel(n,r,i);var o=e.appendChild(document.createElement("div"));o.innerHTML=s},XawDeliveryList.prototype.displayDeliveryChildren=function(e,t,n){var r=firstChildElement(n);while(r)parseInt(r.getAttribute("linkedDelivery-id"),10)==t&&this.displayDelivery(e+1,r,!1),r=nextSiblingElement(r)},XawDeliveryList.prototype.displayDelivery=function(e,t,n){var r=parseInt(t.getAttribute("id"),10),i=parseInt(t.getAttribute("state"),10),s=parseInt(t.getAttribute("status"),10),o=parseInt(t.getAttribute("targetStatus"),10),u=parseInt(t.getAttribute("contentStatus"),10),a=parseInt(t.getAttribute("budgetStatus"),10),f=parseInt(t.getAttribute("extractionStatus"),10),l=parseInt(t.getAttribute("sandboxStatus"),10),c=parseInt(t.getAttribute("linkedDelivery-id"),10),h=parseInt(t.getAttribute("messageType"),10),p=parseInt(t.getAttribute("deliveryMode"),10),d=parseInt(t.getAttribute("routingDelivery-id"),10),v=parseInt(t.getAttribute("workflow-id"),10),m=parseInt(t.getAttribute("budget-id"),10),g=parseInt(getXPathValue(t,"operation/@type"),10),y=getXPathValue(t,"validation/@validationMode"),b=NL.XTK.parseBoolean(getXPathValue(t,"validation/@useContentValidation"),!1),w=NL.XTK.parseBoolean(getXPathValue(t,"validation/@useTargetValidation"),!1),E=NL.XTK.parseBoolean(getXPathValue(t,"validation/@useBudgetValidation"),!1),S=NL.XTK.parseBoolean(getXPathValue(t,"validation/@useFCPValidation"),!1),x=NL.XTK.parseBoolean(getXPathValue(t,"validation/@assignEdition"),!1)&&b,T=NL.XTK.parseBoolean(getXPathValue(t,"validation/@externalValidation"),!1)&&b,N=parseInt(getXPathValue(t,"validation/@sandboxMode"),10),C=NL.XTK.parseInt(t.getAttribute("validityDateDiff"))>0,k=-1;this.hasCentralLocalPackage&&(k=parseInt(getXPathValue(t,"operation/centralLocal/@centralLocalType"),10));var L=NL.XTK.parseBoolean(t.getAttribute("isModel"),!1),A=NL.XTK.parseBoolean(getXPathValue(t,"operation/parameter/@useLinkedDeliveryValidation"),!1),O={name:"delivery",deliveryId:r,operationId:this.iOperationId,deliveryMode:p,deliveryState:i,deliveryStatus:s,bUseContentValidation:b,linkedDeliveryId:c,bUseLinkedDeliveryValidation:A,contentStatus:u,bAssignEdition:x,bExternalValidation:T,bUseTargetValidation:w,validationMode:y,workflowId:v,targetStatus:o,sandboxStatus:l,budgetStatus:a,bUseBudgetValidation:E,budgetId:m,bUseFCPValidation:S,extractionStatus:f,sandboxMode:N,centralLocalType:k,targetNonEmpty:!0,contentNonEmpty:!0,bValidityDateExpired:C},M={commandConfigs:{},commands:[],style:"classic"};L||(M=buildCommandBarConfig(O,function(){deliveryList.load(!0)})),M.controller=new NL.UI.Controller;var _;if(n===!1){var D=this.createLine("deliveryDetail",t.getAttribute("id"));this.trLine===null&&(this.trLine=D);var P=D.appendChild(document.createElement("td")),H=P.appendChild(document.createElement("div"));H.style.padding="2px",H.style.marginLeft=e*20+"px";var B=this.createTable(H,undefined,4),j=B.appendChild(document.createElement("tr")),F=t.getAttribute("label");this.controllerParent.getValue("/ctx/@childFilter")=="1"&&(F+=" ("+getXPathValue(t,"operation/@_cs")+")"),this.addUrlBlockLabel(j,displayDeliveryStateImg(s,i,t.getAttribute("stateImg")),"deliveryDetail"+this.iLineIndex,F,r),_=0;if(!L&&(c===0||A)){var P=j.appendChild(document.createElement("td"));P.width=CELL_STATUS_STATE_WIDTH,this.displayStateLabel(P,M,s,i,t.getAttribute("stateLabel"))}}else _=deliveryActionStateType(O);this.addBlockLine(this.htmlParent,"deliveryDetail",r,n),this.addActionMenu(M,r);var j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td")),I=P.appendChild(document.createElement("table"));I.style.paddingBottom="4px",this.tbody=I.appendChild(document.createElement("tbody"));var q=nms_campaign.cellDelivery();this.addContentLine(this.tbody,q,t.getAttribute("_cs"));if(!L){var R=displayDeliveryStateLabel(s,i,t.getAttribute("stateLabel"));n&&_===ACTION_TYPE_EXTRACTION_INWAITING&&(R+=" - "+nms_campaign.deliveryExtractionInWaiting()),this.addContentLine(this.tbody,nms_campaign.stateLabel(),R)}this.addContentLine(this.tbody,nms_campaign.cellMessageType(),t.getAttribute("messageTypeLabel"));if(!L&&p!==DELIVERY_MODE_DESCRIPTIVE&&(b&&i<=DELIVERY_STATE_READY||!b&&i===DELIVERY_STATE_READY))if(p!==DELIVERY_MODE_EXTERNAL||u){var F;b?F=t.getAttribute("contentStatusLabel"):F=nms_campaign.deliveryAnalysisContent();var P=this.addStateLine(nms_campaign.contentStateLabel());$(P).nlLinkView({view:"deliveryOpContent",params:{id:r,contentStatus:u,deliveryState:i,deliveryMode:p,useContentValidation:b},enableInWeb:!1,label:F})}(o===TARGET_STATUS_INWAITING||o===TARGET_STATUS_REFUSED)&&this.addStateLine(nms_campaign.targetStateLabel(),t.getAttribute("targetStatusLabel"),t.getAttribute("targetStatusImg")),(f===EXTRACTION_STATUS_INWAITING||f===EXTRACTION_STATUS_REFUSED)&&this.addStateLine(nms_campaign.extractionStateLabel(),t.getAttribute("extractionStatusLabel"),t.getAttribute("extractionStatusImg")),(a===BUDGET_STATUS_INWAITING||a===BUDGET_STATUS_REFUSED)&&this.addStateLine(nms_campaign.budgetStateLabel(),t.getAttribute("budgetStatusLabel"),t.getAttribute("budgetStatusImg")),(l===SANDBOX_STATUS_INWAITING||l===SANDBOX_STATUS_REFUSED)&&this.addStateLine(nms_campaign.sandboxStateLabel(),t.getAttribute("sandboxStatusLabel"),t.getAttribute("sandboxStatusImg")),this.hasInteractionPackage&&Number(t.getAttribute("offerSpace-id"))!=0&&this.addContentLine(this.tbody,nms_campaign.cellOffserSpace(),getXPathValue(t,"offerSpace/@_cs")),N!==SANDBOXMODE_COMPLETE&&this.addContentLine(this.tbody,nms_campaign.cellSandboxMode(),getXPathValue(t,"validation/@sandboxModeLabel"));var U=t.getAttribute("deliveryCode");NL.isEmpty(U)||this.addContentLine(this.tbody,nms_campaign.cellDeliveryCode(),U),NL.isEmpty(t.getAttribute("nature"))||this.addContentLine(this.tbody,nms_campaign.natureLabel(),t.getAttribute("natureLabel"));if(c!==0){var z=parseInt(getXPathValue(t,"linkedDelivery/@state"),10),j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td"));P.className="title",P.appendChild(document.createTextNode(nms_campaign.cellLinkedDelivery())),P=j.appendChild(document.createElement("td")),$(P).nlLinkView({view:"parentDelivery",params:{id:c},icon:getXPathValue(t,"linkedDelivery/@stateImg"),label:getXPathValue(t,"linkedDelivery/@_cs")})}m!==0&&this.addContentLine(this.tbody,nms_campaign.cellBudget(),t.getAttribute("budgetLabel"));var W="";i>=DELIVERY_STATE_READY&&(c===0?W=getValue(t,"scheduling/@extracted"):W=getValue(t,"linkedDelivery/scheduling/@extracted")),NL.isEmpty(W)?(c!==0?W=getValue(t,"linkedDelivery/scheduling/@extraction"):W=getValue(t,"scheduling/@extraction"),NL.isEmpty(W)?p===DELIVERY_MODE_EXTERNAL&&(W=nms_campaign.emptyExtraction()):W=NL.View.dateTime(W,null),W!=""&&this.addContentLine(this.tbody,nms_campaign.cellExtraction(),W)):this.addContentLine(this.tbody,nms_campaign.cellExtracted(),NL.View.dateTime(W,null));if(p!==DELIVERY_MODE_DESCRIPTIVE){c!==0?W=getXPathValue(t,"linkedDelivery/scheduling/@contactDate"):W=getXPathValue(t,"scheduling/@contactDate"),NL.isEmpty(W)?W=nms_campaign.emptyExtraction():W=NL.View.dateTime(W,null);var X=nms_campaign.cellContactDate();NL.XTK.parseBoolean(getXPathValue(t,"scheduling/@delayed"),!1)&&i<DELIVERY_STATE_STARTED&&(X=nms_campaign.forecastedDateLabel()),this.addContentLine(this.tbody,X,W)}if(p===DELIVERY_MODE_EXTERNAL){var V="";if(i>=DELIVERY_STATE_TARGETREADY&&i<DELIVERY_STATE_MESSAGEFINISHED||i>=DELIVERY_STATE_READY)V=NL.View.extractFileName(getXPathValue(t,"output/@fileName"));if(c===0&&i>=DELIVERY_STATE_TARGETREADY&&i<DELIVERY_STATE_MESSAGEFINISHED){if(V===""||V===undefined)V=NL.View.extractFileName(getXPathValue(t,"properties/@outputLocal"));this.addContentLine(this.tbody,nms_campaign.outputFilePreviewLabel(),V)}else if(i>=DELIVERY_STATE_READY&&V!==""){var j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td"));P.className="title",P.appendChild(document.createTextNode(nms_campaign.outputFileLabel())),P=j.appendChild(document.createElement("td")),$(P).nlLinkView({view:"deliveryExtraction",params:{id:r,type:0},label:V,target:"_blank"}),isNeolaneConsole()&&NL.XTK.parseBoolean(getXPathValue(t,"output/@downloadDestFile"),!1)&&p===DELIVERY_MODE_EXTERNAL&&i>=DELIVERY_STATE_MESSAGEFINISHED&&i<=DELIVERY_STATE_FINISHED&&$(P).nlLinkView({view:"deliveryDownload",params:{id:r},title:nms_campaign.downloadFile(),icon:"/xtk/img/xtksave.png",enableInWeb:!1}),this.addContentLine(this.tbody,nms_campaign.labelExtractionFileSize(),displayFileSize(getXPathValue(t,"properties/@fileSize")))}}if(v!==0){var j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td"));P.className="title",P.appendChild(document.createTextNode(nms_campaign.workflowLabel())),P=j.appendChild(document.createElement("td")),$(P).nlLinkView({view:"deliveryWkfOpe",params:{id:v,operationId:String(this.iOperationId)},label:getXPathValue(t,"workflow/@_cs"),icon:getXPathValue(t,"workflow/@stateImg")})}if(p===DELIVERY_MODE_DESCRIPTIVE)return;var J=NL.XTK.parseInt(getValue(t,"targets/@deliveryLimit"),0);J!==0&&this.addContentLine(this.tbody,nms_campaign.cellQuantity(),J),i===DELIVERY_STATE_TARGETREADY&&c===0&&v!==0&&A===!1&&this.addContentLine(this.tbody,nms_campaign.cellToValidate(),NL.View.number(getValue(t,"properties/@toValidate"),"N/A"));if(i>DELIVERY_STATE_EDITION&&i!==DELIVERY_STATE_PREPAREFAILED){var K="";if(i>=DELIVERY_STATE_EDITION&&i<DELIVERY_STATE_STARTED){var Q=NL.XTK.parseInt(getValue(t,"@sumTotalTarget"),0)+NL.XTK.parseInt(getValue(t,"properties/@totalTarget"),0);this.addContentLine(this.tbody,nms_campaign.cellTotalTarget(),NL.View.number(Q));var G=NL.XTK.parseInt(getValue(t,"@sumToDeliver"),0)+NL.XTK.parseInt(getValue(t,"properties/@toDeliver"),0);this.addContentLine(this.tbody,nms_campaign.cellToDeliver(),NL.View.number(G))}else{var Y=NL.XTK.parseInt(getValue(t,"@sumProcessed"),0)+NL.XTK.parseInt(getValue(t,"indicators/@processed"),0);this.addContentLine(this.tbody,nms_campaign.cellProcessed(),NL.View.number(Y));var Z=NL.XTK.parseInt(getValue(t,"@sumSuccess"),0)+NL.XTK.parseInt(getValue(t,"indicators/@success"),0);this.addContentLine(this.tbody,nms_campaign.cellSuccess(),NL.View.number(Z))}var et=NL.XTK.parseInt(getValue(t,"@sumCtrlGrpReject"),0)+NL.XTK.parseInt(getValue(t,"properties/@ctrlGrpReject"),0);et>0&&this.addContentLine(this.tbody,nms_campaign.cellControl(),NL.View.number(et))}if(isNeolaneConsole()&&!L){var j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td"));P.className="title",P.appendChild(document.createTextNode(nms_campaign.proofLabel())),P=j.appendChild(document.createElement("td"));var tt="";h===DELIVERY_MESSAGETYPE_SMS?tt=nms_campaign.proofListMobileLabel():h===DELIVERY_MESSAGETYPE_PAPER?tt=nms_campaign.proofListPaperLabel():h===DELIVERY_MESSAGETYPE_PHONE?tt=nms_campaign.proofListPhoneLabel():h===DELIVERY_MESSAGETYPE_FAX?tt=nms_campaign.proofListFaxLabel():h===DELIVERY_MESSAGETYPE_EMAIL?tt=nms_campaign.proofListEmailLabel():tt=nms_campaign.proofListLabel(),$(P).nlLinkView({view:"deliveryProof",params:{id:r},label:tt,icon:"/nms/img/bat.png"})}if(i>=DELIVERY_STATE_READY&&d!=0&&(f===EXTRACTION_STATUS_VALIDATED||f===EXTRACTION_STATUS_SENT)){var j=this.tbody.appendChild(document.createElement("tr")),P=j.appendChild(document.createElement("td"));P.className="content",P.appendChild(document.createTextNode(nms_campaign.routingEmailLabel())),P=j.appendChild(document.createElement("td")),$(P).nlLinkView({view:"delivery",params:{id:d},label:getXPathValue(t,"routingDelivery/@label"),icon:getXPathValue(t,"routingDelivery/@stateImg")})}},XawDeliveryList.prototype.addStateLine=function(e,t,n){var r=this.tbody.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td"));return i.className="title",i.appendChild(document.createTextNode(e)),i=r.appendChild(document.createElement("td")),t!==undefined&&(n!==undefined&&this.addImg(i,NL.route(n,"reverse_img")),i.appendChild(document.createTextNode(t))),i},XawDeliveryList.prototype.onChange=function(e,t){this.deliveryState=Number(t),this.load()},XawDeliveryList.prototype.load=function(){this.clear(!0);var e=new NL.QueryDef("nms:delivery","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("@id"),e.addSelectExpr("[.]"),e.addSelectExpr("@isModel"),e.addSelectExpr("[linkedDelivery/@operation-id]"),e.addSelectExpr("@label"),e.addSelectExpr("@status"),e.addSelectExpr("@state",null,!0),e.addSelectExpr("@messageType",null,!0),e.addSelectExpr("@nature",null,!0),e.addSelectExpr("@deliveryCode"),e.addSelectExpr("@deliveryMode"),e.addSelectExpr("@contentStatus",null,!0),e.addSelectExpr("@targetStatus",null,!0),e.addSelectExpr("@extractionStatus",null,!0),e.addSelectExpr("@sandboxStatus",null,!0),e.addSelectExpr("[@linkedDelivery-id]"),e.addSelectExpr("linkedDelivery"),e.addSelectExpr("[@routingDelivery-id]"),e.addSelectExpr("[routingDelivery/@state]",null,!0),e.addSelectExpr("[routingDelivery/@label]"),e.addSelectExpr("[properties/@outputLocal]"),e.addSelectExpr("[properties/@fileSize]"),e.addSelectExpr("[output/@fileName]"),e.addSelectExpr("[output/@downloadDestFile]"),e.addSelectExpr("[linkedDelivery/@state]",null,!0),e.addSelectExpr("[operation/parameter/@useLinkedDeliveryValidation]"),e.addSelectExpr("[operation/parameter/@useContentValidation]"),e.addSelectExpr("[targets/@deliveryLimit]"),e.addSelectExpr("[scheduling/@contactDate]"),e.addSelectExpr("[linkedDelivery/scheduling/@contactDate]"),e.addSelectExpr("[properties/@toDeliver]");var t=e.addSelectExpr("Sum([delivery-linkedDelivery/properties/@toDeliver])","../@sumToDeliver"),n=t.appendChild(e.xmlQuery.createElement("where")).appendChild(e.xmlQuery.createElement("condition"));n.setAttribute("expr","[validation/@sandboxMode]=0 AND @state!="+DELIVERY_STATE_CANCEL+" AND @state>="+DELIVERY_STATE_READY),e.addSelectExpr("[properties/@toValidate]"),e.addSelectExpr("[properties/@totalTarget]"),e.addSelectExpr("Sum([delivery-linkedDelivery/properties/@totalTarget])","../@sumTotalTarget"),e.addSelectExpr("[properties/@ctrlGrpReject]"),e.addSelectExpr("Sum([delivery-linkedDelivery/properties/@ctrlGrpReject])","../@sumCtrlGrpReject"),e.addSelectExpr("[indicators/@processed]"),e.addSelectExpr("Sum([delivery-linkedDelivery/indicators/@processed])","../@sumProcessed"),e.addSelectExpr("[indicators/@success]"),e.addSelectExpr("Sum([delivery-linkedDelivery/indicators/@success])","../@sumSuccess"),e.addSelectExpr("[scheduling/@extraction]"),e.addSelectExpr("[linkedDelivery/scheduling/@extraction]"),e.addSelectExpr("[scheduling/@delayed]"),e.addSelectExpr("[scheduling/@extracted]"),e.addSelectExpr("[scheduling/@expectedEdition]"),e.addSelectExpr("[scheduling/@expectedContent]"),e.addSelectExpr("[scheduling/@expectedExternal]"),e.addSelectExpr("[linkedDelivery/scheduling/@extracted]"),e.addSelectExpr("[validation/@useFCPValidation]"),e.addSelectExpr("[validation/@useContentValidation]"),e.addSelectExpr("[validation/@useTargetValidation]"),e.addSelectExpr("[validation/@useBudgetValidation]"),e.addSelectExpr("[validation/@validationMode]"),e.addSelectExpr("[validation/@assignEdition]"),e.addSelectExpr("[validation/@externalValidation]"),e.addSelectExpr("SecondsDiff(GetDate(), [scheduling/@validityDate])","@validityDateDiff"),e.addSelectExpr("[operation/@type]"),e.addSelectExpr("[@workflow-id]"),e.addSelectExpr("workflow"),e.addSelectExpr("[workflow/@state]",null,!0),e.addSelectExpr("[validation/@sandboxMode]",null,!0),e.addSelectExpr("[@budget-id]"),e.addSelectExpr("budget","@budgetLabel"),e.addSelectExpr("@budgetStatus",null,!0),this.hasCentralLocalPackage&&e.addSelectExpr("[operation/centralLocal/@centralLocalType]"),this.hasInteractionPackage&&(e.addSelectExpr("[@offerSpace-id]"),e.addSelectExpr("offerSpace")),e.addOrderByExpr("@lastModified",!0),e.addWhereConditionExpr("@FCP=0 and @deleteStatus=0"),e.addWhereConditionExpr("[workflow/@recurrentMdl]=0");var r="";this.controllerParent.getValue("/ctx/@childFilter")=="1"?(e.addSelectExpr("operation"),e.addWhereConditionExpr("([operation/@linkedOperation-id]="+this.iOperationId+" or [@operation-id]="+this.iOperationId+")"),e.addWhereConditionExpr("([operation/@linkedOperation-id]=0 or [validation/@sandboxMode]!="+SANDBOXMODE_SIMULATION+")"),e.addOrderByExpr("[@operation-id]"),r="[operation/@linkedOperation-id]=0 or "):this.iOperationId!==0?e.addWhereConditionExpr("[@operation-id]="+this.iOperationId):e.addWhereConditionExpr("[@operation-id]!=0"),e.addWhereConditionExpr("@isModel = [operation/@isModel]"),this.deliveryState===DELIVERY_FILTER_EDITION?e.addWhereConditionExpr("("+r+"@state="+DELIVERY_STATE_EDITION+")"):this.deliveryState===DELIVERY_FILTER_TOVALIDATE?e.addWhereConditionExpr("("+r+"@state IN("+DELIVERY_STATE_TARGETREADY+","+DELIVERY_STATE_READY+"))"):this.deliveryState===DELIVERY_FILTER_STARTED?e.addWhereConditionExpr("("+r+"@state IN("+DELIVERY_STATE_STARTED+","+DELIVERY_STATE_RETRYPENDING+","+DELIVERY_STATE_RETRY+"))"):this.deliveryState===DELIVERY_FILTER_FINISHED?e.addWhereConditionExpr("("+r+"@state="+DELIVERY_STATE_FINISHED+")"):this.deliveryState===DELIVERY_FILTER_FAILED?e.addWhereConditionExpr("("+r+"@state="+DELIVERY_STATE_PREPAREFAILED+")"):this.deliveryState===DELIVERY_FILTER_CANCELED&&e.addWhereConditionExpr("("+r+"@state IN("+DELIVERY_STATE_CANCELPENDING+","+DELIVERY_STATE_CANCEL+"))"),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawDeliveryList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=firstChildElement(t);while(i)r++,i=nextSiblingElement(i);var s=this.deliveryState===DELIVERY_FILTER_ALL&&r===1&&this.controllerParent.getValue("/ctx/@childFilter")!=1;this.bHideTitle=s;var o=!0,u=!1,i=firstChildElement(t);while(i){if(parseInt(i.getAttribute("linkedDelivery-id"),10)===0||parseInt(getXPathValue(i,"linkedDelivery/@operation-id"),10)!==this.iOperationId)this.bLastLine=nextSiblingElement(i)==null,this.displayDelivery(0,i,s),this.displayDeliveryChildren(0,parseInt(i.getAttribute("id"),10),t),o=!1,NL.XTK.parseBoolean(i.getAttribute("isModel"),!1)&&(u=!0);i=nextSiblingElement(i)}(s||u)&&$(this.tdFilter).children("select").hide(),this.complete(r,o)}else alert(n.message)},XawTaskList.prototype=new XawListBase,XawTaskList.prototype.setDeliveryList=function(e){this.deliveryList=e},XawTaskList.prototype.refreshDeliveryList=function(){this.deliveryList&&this.deliveryList.refresh()},XawTaskList.prototype.setExtractionList=function(e){this.extractionList=e},XawTaskList.prototype.refreshExtractionList=function(){this.extractionList&&this.extractionList.refresh()},XawTaskList.prototype.render=function(e){if($(e).children().size()===0){XawListBase.prototype.render.call(this,e);if(this.tdFilter!=null){var t=this,n={mode:"default",icon:"nlui-icon-list-refresh",onClick:function(){t.load()},help:xtk_core.list_refresh_button_help,helpGravity:"autoNS"},r=$("<div></div>").nlButton(n);r.css("marginLeft","4px"),r.css("float","right"),$(this.tdFilter).append(r);var i=this.tdFilter.appendChild(document.createElement("select"));i.id="taskFilter",i.style.fontSize="8pt",i.style.height="28px",i.controller=this.controller,i.onchange=function(e){this.controller.setValue("/ctx/@taskFilter",this.value,"taskFilter")},this.addOption(i,TASK_FILTER_ALL,nms_campaign.filterTaskAll()),this.addOption(i,TASK_FILTER_LATE,nms_campaign.filterTaskLate()),this.addOption(i,TASK_STATUS_EDITION,nms_campaign.filterTaskEdition()),this.addOption(i,TASK_STATUS_FORECASTED,nms_campaign.filterTaskForecasted()),this.addOption(i,TASK_STATUS_STARTED,nms_campaign.filterTaskStarted()),this.addOption(i,TASK_STATUS_FINISHED,nms_campaign.filterTaskFinished()),this.addOption(i,TASK_STATUS_CANCELED,nms_campaign.filterTaskCanceled())}}},XawTaskList.prototype.onChange=function(e,t){this.taskState=Number(t),this.load()},XawTaskList.prototype.load=function(){this.clear(!0);var e=new NL.QueryDef("nms:task","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("@id"),e.addSelectExpr("[.]"),e.addSelectExpr("@label"),e.addSelectExpr("@type"),e.addSelectExpr("@isModel"),e.addSelectExpr("@nature",null,!0),e.addSelectExpr("@start"),e.addSelectExpr("@end"),e.addSelectExpr("@isLate"),e.addSelectExpr("@execution"),e.addSelectExpr("@reference"),e.addSelectExpr("@validationState",null,!0),e.addSelectExpr("@validationType",null,!0),e.addSelectExpr("@status",null,!0),e.addSelectExpr("[@linkedTask-id]"),e.addSelectExpr("[@dependingTask-id]"),e.addSelectExpr("[@operation-id]"),e.addSelectExpr("delivery"),e.addSelectExpr("[@delivery-id]"),e.addSelectExpr("[delivery/@state]",null,!0),e.addSelectExpr("asset"),e.addSelectExpr("[@asset-id]"),e.addSelectExpr("[asset/@userContentType]",null,!0),e.addSelectExpr("owner"),e.addSelectExpr("[@owner-id]"),e.addSelectExpr("budget"),e.addSelectExpr("[@budget-id]"),e.addSelectExpr("workflow"),e.addSelectExpr("[workflow/@state]",null,!0),e.addSelectExpr("[@workflow-id]"),e.addSelectExpr("@progress"),e.addSelectExpr("[@supplierModel-id]"),e.addSelectExpr("supplierModel","@supplierModelLabel"),e.addSelectExpr("toInteger(@plannedDuration/86400)","@plannedDuration"),e.addSelectExpr("toInteger(@realizedDuration/86400)","@realizedDuration"),e.addSelectExpr("count([taskOpRel/@task-id])","../@resCount");var t=e.addSelectExpr("count(Iif(@validationState="+TASK_VALIDATIONSTATE_VALIDATED+", [taskOpRel/@task-id], NULL))","../@resValidatedCount"),n=t.appendChild(e.xmlQuery.createElement("where")).appendChild(e.xmlQuery.createElement("condition"));n.setAttribute("expr","[@operator-id]=$(loginId)"),e.addOrderByExpr("@start",!0),this.controllerParent.getValue("/ctx/@childFilter")=="1"?(e.addSelectExpr("[operation/@label]"),e.addWhereConditionExpr("([operation/@linkedOperation-id]="+this.iOperationId+" or [@operation-id]="+this.iOperationId+") and [delivery/@deleteStatus]=0"),e.addOrderByExpr("[@operation-id]")):e.addWhereConditionExpr("[@operation-id]="+this.iOperationId+" and [delivery/@deleteStatus]=0"),this.taskState==TASK_FILTER_LATE?e.addWhereConditionExpr("@status="+TASK_STATUS_STARTED+" and DaysDiff(GetDate(), @end)>0"):this.taskState!=TASK_FILTER_ALL&&e.addWhereConditionExpr("@status="+this.taskState),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawTaskList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=firstChildElement(t);while(i)parseInt(i.getAttribute("linkedTask-id"),10)===0&&parseInt(i.getAttribute("dependingTask-id"),10)===0&&r++,i=nextSiblingElement(i);var s=this.taskState===TASK_FILTER_ALL&&r<=1&&this.controllerParent.getValue("/ctx/@childFilter")!=1,o=!0,u=!1,i=firstChildElement(t);while(i)parseInt(i.getAttribute("linkedTask-id"),10)===0&&parseInt(i.getAttribute("dependingTask-id"),10)===0&&(o=!1,NL.XTK.parseBoolean(i.getAttribute("isModel"),!1)&&(u=!0),this.bLastLine=nextSiblingElement(i)==null,this.displayTask(0,i,!1),this.displayTaskChildren(0,parseInt(i.getAttribute("id"),10),t)),i=nextSiblingElement(i);(s||u)&&$(this.tdFilter).children("select").hide(),this.complete(r,o)}else alert(n.message)},XawTaskList.prototype.displayTaskChildren=function(e,t,n){var r=firstChildElement(n);while(r){var i=parseInt(r.getAttribute("dependingTask-id"),10);if(parseInt(r.getAttribute("linkedTask-id"),10)===t&&i===0||i===t){var s=1,o=!1;i===t&&(s++,o=!0),this.displayTask(e+s,r,o),o&&s++,this.displayTaskChildren(e+s,parseInt(r.getAttribute("id"),10),n)}r=nextSiblingElement(r)}},XawTaskList.prototype.displayTask=function(e,t,n){var r=parseInt(t.getAttribute("status"),10),i=parseInt(t.getAttribute("progress"),10),s=parseInt(t.getAttribute("validationState"),10),o=parseInt(t.getAttribute("type"),10),u=parseInt(t.getAttribute("operation-id"),10),a=parseInt(t.getAttribute("id"),10),f=NL.XTK.parseBoolean(t.getAttribute("isModel"),!1),l=this.createLine("taskDetail",a);this.trLine==null&&(this.trLine=l);var c=l.appendChild(document.createElement("td")),h=c.appendChild(document.createElement("div"));h.style.padding="2px",h.style.marginLeft=e*10+"px";var p=this.createTable(h,undefined,4),d=p.appendChild(document.createElement("tr"));n?(c=d.appendChild(document.createElement("td")),c.width=2,c.align="right",c.vAlign="top",this.addImg(c,"/nms/img/arrow.png")):d.appendChild(document.createElement("td"));var v=t.getAttribute("label");this.controllerParent.getValue("/ctx/@childFilter")=="1"&&(v+=" ("+getXPathValue(t,"operation/@label")+")");var m="/nms/img/task.png";o!==TASK_TYPE_GROUPING&&(m=NL.route(t.getAttribute("statusImg"),"reverse_img")),this.addUrlBlockLabel(d,m,"taskDetail"+this.iLineIndex,v,a,""),c=d.appendChild(document.createElement("td")),c.align="right",c.vAlign="top",c.width="200",p=this.createTable(c),l=p.appendChild(document.createElement("tr")),c=l.appendChild(document.createElement("td")),c.vAlign="top";if(s!==TASK_VALIDATIONSTATE_UNDEFINED||parseInt(t.getAttribute("isLate"),10)){this.addSpace(c);var g=null;s===TASK_VALIDATIONSTATE_VALIDATED?g=this.addImg(c,"/xtk/img/xtkcheck.png"):o!==TASK_TYPE_GROUPING&&(g=this.addImg(c,"/xtk/img/logwarn.png")),g&&(g.style.marginRight="2px",g.style.verticalAlign="top")}o!==TASK_TYPE_GROUPING&&!f&&!NL.isEmpty(t.getAttribute("reference"))?(c.appendChild(document.createTextNode(NL.View.dateTime(t.getAttribute("reference"),null))),c.align="right",c.style.paddingRight="4px"):c.colSpan=2,!f&&o!==TASK_TYPE_GROUPING&&o!==TASK_TYPE_NOTIFICATION&&this.displayProgressBar(l,t.getAttribute("progress"),"Brown","0px","right"),this.addBlockLine(this.htmlParent,"taskDetail",a);var y=o!=TASK_TYPE_GROUPING&&o!=TASK_TYPE_NOTIFICATION,b=NL.XTK.parseInt(t.getAttribute("resCount"),0)!==0,w=!1;b&&y&&(w=NL.XTK.parseInt(t.getAttribute("resValidatedCount"),0)!==0);var E=new NL.UI.Controller,S={commandConfigs:{},commands:[],controller:E},x=new NL.UI.Actions,T={controller:E,viewConfigs:{},views:[]};y&&(S=buildCommandBarConfig({name:"task",taskId:a,state:r,validationState:s,hasValidated:w,isResource:b,type:o},function(){taskList.load(!0)})),S.controller=new NL.UI.Controller;if(isNeolaneConsole()&&o===TASK_TYPE_GROUPING){var N=NL.XTK.parseBoolean(t.getAttribute("isModel"),!1)?1:0;T.viewConfigs.newTaskOp={type:"navigation",flat:!0,xtkDelegated:!0,view:"newTaskOp",label:nms_campaign.addTaskActionLabel(),mode:"white",icon:"nlui-img-nms-task",params:{operationId:u,linkedTaskId:a,isModel:N}},T.views.unshift("newTaskOp")}T.viewConfigs.task={type:"navigation",mode:"white",flat:!0,xtkDelegated:!0,view:"task",label:nms_campaign.openLabel(),params:{id:a},icon:"ui-icon-search"},T.views.unshift("task"),NL.Utils.each(S.commandConfigs,function(e,t){NL.isNundef(t.command)&&NL.isPlainObject(t.action)&&(t.command=function(){x[t.action.method](t.action.args)})}),this.tdBlockLine.style.marginTop="2px",this.tdBlockLine.style.marginLeft="4px";var C=$("<div>",{style:"display: inline-block;"}).nlViewBar(T),k=$("<div>",{style:"display: inline-block;"}).nlCmdBar(S);$(this.tdBlockLine).append(C,k),this.addContentLine(this.tbody,nms_campaign.labelTask(),t.getAttribute("_cs")),!f&&o!==TASK_TYPE_GROUPING&&this.addContentLine(this.tbody,nms_campaign.labelTaskStatus(),t.getAttribute("statusLabel")),r!==TASK_STATUS_CANCELED&&(o===TASK_TYPE_MILESTONE&&this.addContentLine(this.tbody,nms_campaign.labelTaskValidationType(),t.getAttribute("validationTypeLabel")),s!==TASK_VALIDATIONSTATE_UNDEFINED&&this.addContentLine(this.tbody,nms_campaign.labelTaskValidationState(),t.getAttribute("validationStateLabel"))),NL.isEmpty(t.getAttribute("nature"))||this.addContentLine(this.tbody,nms_campaign.labelTaskNature(),t.getAttribute("natureLabel")),!f&&o!==TASK_TYPE_GROUPING&&(!NL.isEmpty(t.getAttribute("start"))&&!NL.isEmpty(t.getAttribute("end"))&&this.addContentLine(this.tbody,nms_campaign.planningLabel(),nms_campaign.planningHeader(NL.View.dateTime(t.getAttribute("start"),null),NL.View.dateTime(t.getAttribute("end"),null))),NL.isEmpty(t.getAttribute("execution"))||this.addContentLine(this.tbody,nms_campaign.taskExecutionHeader(),NL.View.dateTime(t.getAttribute("execution"),null))),parseInt(t.getAttribute("owner-id"),10)!==0&&this.addContentLine(this.tbody,nms_campaign.labelOwner(),getXPathValue(t,"owner/@_cs")),parseInt(t.getAttribute("budget-id"),10)!==0&&this.addContentLine(this.tbody,nms_campaign.cellBudget(),getXPathValue(t,"budget/@_cs")),parseInt(t.getAttribute("supplierModel-id"),10)!==0&&this.addContentLine(this.tbody,nms_campaign.supplierModelLabel(),t.getAttribute("supplierModelLabel"));if(o===TASK_TYPE_MILESTONE&&parseInt(t.getAttribute("delivery-id"),10)!==0){var d=this.tbody.appendChild(document.createElement("tr"));c=d.appendChild(document.createElement("td")),c.className="title",c.appendChild(document.createTextNode(nms_campaign.deliveryLinkLabel())),c=d.appendChild(document.createElement("td")),$(c).nlLinkView({view:"delivery",params:{id:t.getAttribute("delivery-id")},label:getXPathValue(t,"delivery/@_cs"),icon:getXPathValue(t,"delivery/@stateImg")})}else if(o===TASK_TYPE_ASSET&&parseInt(t.getAttribute("asset-id"),10)!==0){var d=this.tbody.appendChild(document.createElement("tr"));c=d.appendChild(document.createElement("td")),c.className="title",c.appendChild(document.createTextNode(nms_campaign.assetLinkLabel())),c=d.appendChild(document.createElement("td")),$(c).nlLinkView({view:"asset",params:{id:t.getAttribute("asset-id")},label:getXPathValue(t,"asset/@_cs"),icon:NL.View.imgPathToClass(getXPathValue(t,"asset/@userContentTypeImg"))})}if(NL.XTK.parseInt(t.getAttribute("workflow-id"),0)!==0){var d=this.tbody.appendChild(document.createElement("tr"));c=d.appendChild(document.createElement("td")),c.className="title",c.appendChild(document.createTextNode(nms_campaign.workflowTitle())),c=d.appendChild(document.createElement("td")),$(c).nlLinkView({view:"workflowOpe",params:{id:t.getAttribute("workflow-id")},label:getXPathValue(t,"workflow/@_cs"),icon:getXPathValue(t,"workflow/@stateImg")})}},XawOperationLogList.prototype=new XawListBase,XawOperationLogList.prototype.render=function(e){this.addImg(e,"/xtk/img/logs.png"),this.addSpace(e);var t=e.appendChild(document.createElement("a"));t.className="entityLink",t.href="javascript:showHideBlock('logDetail');",t.appendChild(document.createTextNode(nms_campaign.displayLogsLabel())),t.controller=this.controller,t.onclick=function(e){this.controller.setValue("/ctx/@showHideLogList",!0,"showHideLogList")};var n=e.appendChild(document.createElement("div"));n.style.marginTop="5px";var r=n.appendChild(document.createElement("div"));r.id="logDetail",r.style.display="none",XawListBase.prototype.render.call(this,r)},XawOperationLogList.prototype.load=function(){if(this.bLoaded)return;this.bLoaded=!0,this.displayTextLine(this.htmlParent,nms_campaign.loadingList());var e=new NL.QueryDef("nms:operationLog","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("createdBy"),e.addSelectExpr("@type",null,!0),e.addSelectExpr("@message"),e.addSelectExpr("@created"),e.addOrderByExpr("@created",!0),e.addWhereConditionExpr("[@operation-id]="+this.iOperationId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawOperationLogList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=firstChildElement(t);while(i)this.displayLog(i),r++,i=nextSiblingElement(i);this.complete(r,r===0)}else alert(n.message)},XawOperationLogList.prototype.displayLog=function(e){var t=this.htmlParent.appendChild(document.createElement("tr"));t.className=++this.iLineIndex%2?"odd":"even";var n=t.appendChild(document.createElement("td"));n.vAlign="top",n.width=180,n.innerHTML="<div style='width:180px'><img src='/xtk/img/"+jobLogTypeImg(e.getAttribute("type"))+"' border='0'/>&nbsp;"+NL.View.dateTime(e.getAttribute("created"),null)+"</div>",n=t.appendChild(document.createElement("td")),n.appendChild(document.createTextNode(e.getAttribute("message")))},XawLandingPageList.prototype=new XawListBase,XawLandingPageList.prototype.render=function(e,t){this.htmlParent=e,this.htmlLandingPageLine=t,this.load()},XawLandingPageList.prototype.load=function(){this.clear(!0);var e=new NL.QueryDef("crm:landingPage","select");e.addSelectExpr("[.]"),e.addSelectExpr("@type","",!0),e.addSelectExpr("@id"),e.addSelectExpr("'xtk://open?schema=crm:landingPage&pk='+toString(@id)+'&form=crm:landingPageWiz&notifyPathList=/ignored/@fromOperation|1'","@urlForm"),e.addWhereConditionExpr("[@operation-id]="+this.iOperationId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawLandingPageList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=t;if(i){var s=firstChildElement(i);while(s)s.nodeName==this.strElementType&&r++,s=nextSiblingElement(s);r>0&&(this.trLine=this.htmlLandingPageLine,this.advancedDetailsDisplay(i,r))}this.htmlLandingPageLine.style.display=r>0?"":"none"}else alert(n.message)},XawImportList.prototype=new XawListBase,XawImportList.prototype.render=function(e,t){this.htmlParent=e,this.htmlImportLine=t,this.load()},XawImportList.prototype.load=function(){this.clear(!0);var e=new NL.QueryDef("nms:group","select");e.addSelectExpr("[.]"),e.addSelectExpr("@id"),e.addSelectExpr("@importStatus","",!0),e.addSelectExpr("@created"),e.addSelectExpr("[createdBy]","@createdBy"),e.addWhereConditionExpr("[@operation-id] = "+this.iOperationId),e.addOrderByExpr("@created",!0),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawImportList.prototype.onXtkQueryCompleted=function(e,t,n){if(!NL.isNundef(n))throw n;this.clear();var r=0,i=t;if(i){var s=firstChildElement(i);while(s)s.nodeName==this.strElementType&&r++,s=nextSiblingElement(s);r>0&&(this.trLine=this.htmlImportLine,this.advancedDetailsDisplay(i,r))}this.htmlImportLine.style.display=r>0?"":"none"},XawImportList.prototype.advancedDetailsDisplay=function(e,t){var n,r;if(t===1){var i=this.trLine.parentNode,s=i.removeChild(this.trLine),o=firstChildElement(s);s.removeChild(o);var u=s.appendChild(document.createElement("td"));u.innerHTML=this.strSingleTitleLabel,n=s.appendChild(document.createElement("td"));var a=document.getElementById("documentLine");i.insertBefore(this.trLine,a)}else{var f=this.htmlParent.appendChild(document.createElement("span")),l=this.addUrlEdit(f,this.strElementImage,"javascript:showHideBlock('"+this.strElementType+"Detail');",this.strTitleLabel+" ("+t+")","entityLink"),c=this.htmlParent.appendChild(document.createElement("div"));c.id=this.strElementType+"Detail",c.style.display="none",r=this.createTable(c)}var h=firstChildElement(e);while(h){if(t!==1){n=r.appendChild(document.createElement("tr"));var p=n.appendChild(document.createElement("td"));p.width=20}if(String(h.nodeName)===String(this.strElementType)){var d=h.getAttribute("_cs"),v=NL.route(h.getAttribute("typeImg"),"reverse_img");v==="/xtk/img/defaultimg.png"&&(v=this.strElementImage),this.addUrlEdit(n,v,"xtk://open?schema="+this.strElementSchema+"&pk="+h.getAttribute("id")+"&form="+this.strElementForm,[d,h.getAttribute("importStatusLabel"),h.getAttribute("createdBy"),NL.View.dateTime(h.getAttribute("created"),null)],"linkProcess")}h=nextSiblingElement(h)}},XawJobLogList.prototype=new XawListBase,XawJobLogList.prototype.render=function(e){if(!document.getElementById("jobDetail"+this.entityId)){this.addImg(e,"/xtk/img/logs.png"),this.addSpace(e);var t=e.appendChild(document.createElement("a"));t.className="entityLink",t.href="javascript:showHideBlock('jobDetail"+this.entityId+"');",t.appendChild(document.createTextNode(nms_campaign.displayLogsLabel())),t.controller=this.controller,t.onclick=function(e){this.controller.setValue("/ctx/@showHideLogList",!0,"showHideLogList")};var n=e.appendChild(document.createElement("div"));n.style.marginTop="2px";var r=n.appendChild(document.createElement("div"));r.id="jobDetail"+this.entityId,r.style.display="none",XawListBase.prototype.render.call(this,r)}},XawJobLogList.prototype.load=function(){if(this.bLoaded||this.entityId===undefined)return;this.bLoaded=!0,this.displayTextLine(this.htmlParent,nms_campaign.loadingList());var e=new NL.QueryDef("xtk:jobLog","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("@logType",null,!0),e.addSelectExpr("@message"),e.addSelectExpr("@logDate"),e.addOrderByExpr("@logDate",!0),e.addWhereConditionExpr("[@job-id]="+this.entityId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawJobLogList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=firstChildElement(t);while(i)this.displayLog(i),r++,i=nextSiblingElement(i);this.complete(r,r===0)}else alert(n.message)},XawJobLogList.prototype.displayLog=function(e){var t=this.htmlParent.appendChild(document.createElement("tr"));t.className=++this.iLineIndex%2?"odd":"even";var n=t.appendChild(document.createElement("td"));n.vAlign="top",n.width=180,n.innerHTML="<div style='width:180px'><img src='/xtk/img/"+jobLogTypeImg(e.getAttribute("logType"))+"' border='0'/>&nbsp;"+NL.View.dateTime(e.getAttribute("logDate"),null)+"</div>",n=t.appendChild(document.createElement("td")),n.appendChild(document.createTextNode(e.getAttribute("message")))},XawWorkflowLogList.prototype=new XawJobLogList,XawWorkflowLogList.prototype.load=function(){if(this.bLoaded)return;this.bLoaded=!0,this.displayTextLine(this.htmlParent,nms_campaign.loadingList());var e=new NL.QueryDef("xtk:workflowLog","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("@logType",null,!0),e.addSelectExpr("@message"),e.addSelectExpr("@logDate"),e.addSelectExpr("@activity"),e.addOrderByExpr("@logDate",!0),e.addWhereConditionExpr("[@workflow-id]="+this.entityId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawWorkflowLogList.prototype.displayLog=function(e){var t=this.htmlParent.appendChild(document.createElement("tr"));t.className=++this.iLineIndex%2?"odd":"even";var n=t.appendChild(document.createElement("td"));n.vAlign="top",n.width=180,n.innerHTML="<div style='width:180px'><img src='/xtk/img/"+jobLogTypeImg(e.getAttribute("logType"))+"' border='0'/>&nbsp;"+NL.View.dateTime(e.getAttribute("logDate"),null)+"</div>",n=t.appendChild(document.createElement("td")),n.width=130,n.appendChild(document.createTextNode(e.getAttribute("activity"))),n=t.appendChild(document.createElement("td")),n.appendChild(document.createTextNode(e.getAttribute("message")))},XawValidationLogList.prototype=new XawListBase,XawValidationLogList.prototype.render=function(e){if(!document.getElementById("validationDetail"+this.entityId)){this.addImg(e,"/xtk/img/logs.png"),this.addSpace(e);var t=e.appendChild(document.createElement("a"));t.className="entityLink",t.href="javascript:showHideBlock('validationDetail"+this.entityId+"');",t.appendChild(document.createTextNode(nms_campaign.displayLogsLabel())),t.controller=this.controller,t.onclick=function(e){this.controller.setValue("/ctx/@showHideLogList",!0,"showHideLogList")};var n=e.appendChild(document.createElement("div"));n.id="validationDetail"+this.entityId,n.style.display="none",XawListBase.prototype.render.call(this,n)}},XawValidationLogList.prototype.load=function(){if(this.bLoaded||this.entityId===undefined)return;this.bLoaded=!0,this.displayTextLine(this.htmlParent,nms_campaign.loadingList());var e=new NL.QueryDef("nms:validationLog","select");e.setLineCount(MAX_LOG_LINE_COUNT),e.addSelectExpr("@type",null,!0),e.addSelectExpr("@date"),e.addSelectExpr("@action",null,!0),e.addSelectExpr("validatedBy"),e.addOrderByExpr("@date",!0),e.addWhereConditionExpr(this.strEntityXPath+"="+this.entityId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawValidationLogList.prototype.onXtkQueryCompleted=function(e,t,n){if(NL.isNundef(n)){this.clear();var r=0,i=firstChildElement(t);while(i)this.displayLog(i),r++,i=nextSiblingElement(i);this.complete(r,r===0)}else alert(n.message)},XawValidationLogList.prototype.displayLog=function(e){var t=this.htmlParent.appendChild(document.createElement("tr"));t.className=++this.iLineIndex%2?"odd":"even";var n=t.appendChild(document.createElement("td"));n.vAlign="top",n.width=70,n.innerHTML="<div style='width:180px'><img src='"+NL.route(e.getAttribute("actionImg"),"reverse_img")+"' border='0'/>&nbsp;"+NL.View.dateTime(e.getAttribute("date"),null)+"</div>",n=t.appendChild(document.createElement("td")),n.width=135,n.appendChild(document.createTextNode(e.getAttribute("actionLabel"))),n=t.appendChild(document.createElement("td")),n.width=135,n.appendChild(document.createTextNode(e.getAttribute("typeLabel"))),n=t.appendChild(document.createElement("td")),n.appendChild(document.createTextNode(getXPathValue(e,"validatedBy/@_cs")))}
;"use strict";NL.ns("NL.URL"),NL.URL.parseQueryString=function(e){if(e===null||e===undefined)return{};var t=e.split("&"),n={};for(var r=0;r<t.length;r++){var i=t[r],s=i.indexOf("=");s===-1?n[i]=[]:n[i.substring(0,s)]=i.substring(s+1)}return n}
;"use strict";NL.ns("NL.widget.Calendar"),NL.widget.Calendar.getFormat=function(e){return e===undefined&&(e=NL.session.locale.getSettings().shortDate),e=e.replace(/%D/,"%e"),e=e.replace(/%2D/,"%d"),e=e.replace(/%M/,"%m"),e=e.replace(/%2M/,"%m"),e=e.replace(/%Y/,"%y"),e=e.replace(/%2Y/,"%y"),e=e.replace(/%4Y/,"%Y"),e}
;"use strict";NL.ns("NL.DataPolicy"),NL.require("/nl/core/shared/nl.js"),NL.DataPolicy.filter=function(e,t,n){if(NL.isEmpty(t))return"";switch(e){case"none":return t;case"smartCase":return NL.String.toSmartCase(t);case"upperCase":return t.toUpperCase();case"lowerCase":return t.toLowerCase();case"phone":return n||(n="^\\(?(\\+?)\\s*\\(?(\\d)[\\.\\- ]*(\\d)\\)?[\\.\\- ]*(\\d)[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*(\\d)?[\\.\\- ]*$"),t.match(n)?t:null;case"email":var r=t.split("@");if(r.length===2&&r[0].match(/^[\S]+$/)&&r[1].match(/^([\w\-]+\.)+[\w\-]+$/))return t.toLowerCase();return null;case"resIdentifier":case"identifier":return NL.String.toIdentifier(t)}throw e+": unknown datapolicy."}
;"use strict";NL.ns("NL.API"),NL.API.getConfig=function(method,params,success,error){var newParams={};newParams.method=method;if(NL.isPlainObject(params))for(var p in params)if(params.hasOwnProperty(p)){var paramValue=params[p];NL.assert(!NL.isFunction(paramValue),"You cannot have a function as parameter."),NL.isPlainObject(paramValue)?newParams[p]=JSON.stringify(paramValue):newParams[p]=NL.XTK.toString(paramValue)}var transport=new NL.transport.AJAX({url:"/xtk/confGenerator.jssp",data:newParams,method:"post",dataFilter:function(data,type){return eval(data)}});transport.start({onSuccess:function(e,t){NL.assert(NL.isFunction(success),"You must specify a success callback function."),success.call(this,e,t)},onError:function(e){NL.assert(NL.isFunction(error),"You must specify an error callback function."),error.call(this,e)}})},NL.API.write=function(e,t,n,r,i){NL.assert(!NL.isEmpty(e)&&e.indexOf(":")>-1,"You have to specify a valid schema."),i=$.extend(!0,{},{rootTagName:e.split(":")[1],operation:"insertOrUpdate",key:""},i);var s=new NL.transport.SOAP({urn:"xtk:persist|xtk:specFile",method:"Write",nsEncoding:"UTF-8"}),o=new NL.XML.Node(i.rootTagName);o.attr("_operation",i.operation),NL.isEmpty(i.key)||o.attr("_key",i.key),o.attr("xtkschema",e);for(var u in t)if(t.hasOwnProperty(u)){var a=t[u];a.type!=="link"?NL.isEmpty(a.xpath)?NL.log.warn("Cannot write item when no xpath given."):o.setXPathValue(NL.XTK.unexpandXPath(a.xpath),a.value,a.isCDATA):NL.log.warn("Not treated link.")}s.writeElement("entity",o.toString());var f={onSuccess:function(e){NL.isFunction(n)&&n.call(this,e)}};NL.isFunction(r)&&(f.onError=r),s.start(f)}
;NL.ns("NL"),NL.XtkTooltipManager=function(){this.htmlObject=null,this.mousePosition=null,this.strText=null,this.tmrShow=new NL.XtkTimer(this),this.htmlTooltip=null};var g_nl_tooltipManager=new NL.XtkTooltipManager;NL.XtkTooltipManager.prototype.onTimer=function(e){this.tmrShow.stop(),this.hideTooltip(),this.htmlTooltip=document.createElement("div"),this.htmlTooltip.className="tooltip",this.htmlTooltip.style.left=this.mousePosition.X+"px",this.htmlTooltip.style.top=this.mousePosition.Y+19+"px",this.htmlObject.tooltipText!=undefined?this.htmlTooltip.innerHTML=this.htmlObject.tooltipText:this.htmlTooltip.innerHTML=findXtkObject(this.htmlObject).getTooltipText(),document.body.appendChild(this.htmlTooltip);var t=document.body.clientWidth-this.mousePosition.X-this.htmlTooltip.clientWidth,n=document.body.clientHeight-this.mousePosition.Y-this.htmlTooltip.clientHeight;t<0&&(this.htmlTooltip.style.left=this.mousePosition.X+t-20+"px"),n<0&&(this.htmlTooltip.style.top=this.mousePosition.Y+n+"px")},NL.XtkTooltipManager.prototype.hideTooltip=function(){this.htmlTooltip!=null&&(document.body.removeChild(this.htmlTooltip),this.htmlTooltip=null)};var g_onEnterTooltip=function(e){var t=NewEvent(e),n=t.getSource();g_nl_tooltipManager.hideTooltip(),g_nl_tooltipManager.htmlObject=n,g_nl_tooltipManager.tmrShow.start(g_nl_tooltipManager,500);var r,i;document.documentElement.scrollLeft?r=document.documentElement.scrollLeft:r=document.body.scrollLeft,document.documentElement.scrollTop?scrollTop=document.documentElement.scrollTop:scrollTop=document.body.scrollTop,g_nl_tooltipManager.mousePosition={X:t.data.clientX+r,Y:t.data.clientY+scrollTop}},g_onLeaveTooltip=function(){g_nl_tooltipManager.tmrShow.stop(),g_nl_tooltipManager.htmlObject=null,g_nl_tooltipManager.htmlTooltip!=null&&(document.body.removeChild(g_nl_tooltipManager.htmlTooltip),g_nl_tooltipManager.htmlTooltip=null)};NL.XtkTooltipManager.prototype.register=function(e,t){e.tooltipText=t,e.onmouseout=g_onLeaveTooltip,e.onmousemove=g_onEnterTooltip}
;"use strict";(function(e){e.widget("NL.nlFileDroppable",e.NL.nlWidget,{options:{onDrop:null,onDragOver:null,onDragEnter:null,onDragExit:null,accept:"all",onFileDropped:null},_create:function(){var n=this;return n.options.onFileDropped&&(n.options.onDrop=n.options.onFileDropped),this.element.on("dragenter dragover dragleave drop",function(r){r.stopPropagation(),r.preventDefault();switch(r.type){case"dragover":e(this).addClass("ui-state-hover"),typeof n.options.onDragOver=="function"&&n.options.onDragOver.call(this,r);break;case"dragenter":typeof n.options.onDragEnter=="function"&&n.options.onDragEnter.call(this,r);break;case"dragleave":e(this).removeClass("ui-state-hover"),typeof n.options.onDragExit=="function"&&n.options.onDragExit.call(this,r);break;case"drop":e(this).removeClass("ui-state-hover"),typeof n.options.onDrop=="function"&&n.options.onDrop.call(this,r,r.originalEvent.dataTransfer.files)}}),this}})})(jQuery,window)
;"use strict";(function(e,t,n){e.widget("NL.nlFloatToolbar",e.NL.nlWidget,{options:{iframe:null,outer:{top:!0,bottom:!1,left:!1,right:!1},position:"top-left",action:null,style:"flatToolbar",commandConfigs:{},commands:[],outlineWidth:{top:0,right:0,bottom:0,left:0}},add:function(t){e(this.element).nlCmdBar("setCommandAttribute",t,"hidden",!1,!0)},changeCommandStates:function(t){var r=this,i=!1;NL.Utils.each(t,function(t,s){r.cachedStates[t]===n&&(r.cachedStates[t]={});var o=r.cachedStates[t];NL.Utils.each(s,function(n,s){if(n==="isPushed"||n==="hidden")s=!!s;var u=o[n];u!==s&&(o[n]=s,e(r.element).nlCmdBar("setCommandAttribute",t,n,s,!0),i=!0)})}),i&&e(r.element).nlCmdBar("refresh")},_buildCommandMap:function(e,t){if(NL.isEmpty(e))return;for(var n=0;n<e.length;n++){var r=e[n];r!==null&&!NL.isString(r)&&(this._buildCommandMap(r.subCommands,t),r=r.name),NL.isEmpty(r)||(t[r]=!1)}},setOnlyVisibleCommands:function(t,r){var i=this,s=!1,o={};this._buildCommandMap(this.options.commands,o);for(var u=0;u<t.length;u++){var a=t[u];o[a]=!0}NL.Utils.each(o,function(t,r){i.cachedStates[t]===n&&(i.cachedStates[t]={});var o=i.cachedStates[t],u=!r,a=o.hidden;a!==u&&(o.hidden=u,e(i.element).nlCmdBar("setCommandAttribute",t,"hidden",u,!0),s=!0)}),!r&&s&&e(i.element).nlCmdBar("refresh")},refresh:function(){e(this.element).nlCmdBar("refresh")},reset:function(){e(this.element).nlCmdBar("hideAllCommands")},commandBar:function(t){return e(this.element)},show:function(e){this.element.show(),this.element.css("position","fixed"),e&&(this.positionElement=e);var t=this.positionElement.offset();this.element.offset(t);var n={};this.options.iframe&&(n=this.options.iframe.offset()),this.options.iframe&&(this.positionElement.get(0).ownerDocument&&this.positionElement.get(0).ownerDocument.parentWindow&&this.positionElement.get(0).ownerDocument.parentWindow.pageYOffset?(t.top-=this.positionElement.get(0).ownerDocument.parentWindow.pageYOffset,t.left-=this.positionElement.get(0).ownerDocument.parentWindow.pageXOffset):(t.top-=this.positionElement.parents().find("html,body").scrollTop()||this.positionElement.parents().find("html,body").get(0)&&this.positionElement.parents().find("html,body").get(0).document&&this.positionElement.parents().find("html,body").get(0).document.documentElement.scrollTop||0,t.left-=this.positionElement.parents().find("html,body").scrollLeft()||this.positionElement.parents().find("html,body").get(0)&&this.positionElement.parents().find("html,body").get(0).document&&this.positionElement.parents().find("html,body").get(0).document.documentElement.scrollLeft||0),t.top+=n.top,t.left+=n.left),this.options.outer.top&&this.options.position.indexOf("top")>-1&&(t.top-=this.element.outerHeight(),t.top-=this.options.outlineWidth.top),this.options.position.indexOf("right")>-1&&(t.left+=this.positionElement.outerWidth(),t.left+=this.options.outlineWidth.right,this.options.outer.right||(t.left-=this.element.outerWidth())),this.options.position.indexOf("left")>-1&&(this.options.outer.left&&(t.left-=this.element.outerWidth()),t.left-=this.options.outlineWidth.left),this.options.position.indexOf("bottom")>-1&&(t.top+=this.positionElement.outerHeight(),t.top+=this.options.outlineWidth.bottom,this.options.outer.bottom||(t.top-=this.element.outerHeight())),this.options.iframe&&(n.top-this.positionElement.outerHeight()-this.element.outerHeight()>t.top?this.element.hide():n.top-this.element.height()>t.top?t.top=n.top-this.element.height():n.top+this.options.iframe.outerHeight()<t.top?this.element.hide():n.left>t.left?t.left=n.left:n.left+this.options.iframe.outerWidth()<t.left+this.element.outerWidth()&&(t.left=n.left+this.options.iframe.outerWidth()-this.element.outerWidth())),t.top<0&&(t.top=0),t.left<0&&(t.left=0),this.element.offset(t)},_setOption:function(e,t){e==="action"?this.options.action=t:e==="position"&&(this.options.position=t)},destroy:function(){this.element.removeClass("nl_toolbar")},_create:function(){var t=this;t.element.hide(),t.buttonOptions={},t.cachedStates={},e(t.element).nlCmdBar({mode:t.options.style,autoOpenMenu:!0,iconSize:16,separators:!1,rightSeparator:!1,leftSeparator:!1,commandConfigs:t.options.commandConfigs,commands:t.options.commands,controller:new NL.UI.Controller}),t.element.addClass("nl_toolbar"),t.actionMap={}}})})(jQuery,window)
;"use strict";(function(e){e.widget("NL.nlGrid",e.NL.nlList,{options:{headers:[],footer:!0,source:null,autoLoad:!0,gridClass:"",selectionMode:"none",keyAttributes:null,selection:undefined,onSelection:function(){},onChange:null,beforeRemove:null,afterRemove:null,onAdd:null,search:!1,searchWildcard:"$1",pagination:null,fixedHeader:!1,emptyText:xtk_core.noData(),rowDefaultValues:[],buttonsText:!1,fakeColumn:!0,counter:!0,footerButton:!1,title:null},_create:function(){var t,n,r;n=this,this._rows=[],this._selectedRow=null,this._sortedColumn=null,this._iconAscCls="ui-icon-carat-1-n",this._iconDescCls="ui-icon-carat-1-s",this.currentSelection=undefined,this._tableCssClasses="nlui-table nlui-table-striped nlui-grid",this._hasFixedHeader=!1,this._$clonedHeader=null,this._$headerFakeColumn=null,this._$title=null,this._buttons={},this._useEffects=!0,this._tmpSelection=null,this._columnsOrder=[],this._columnsNames=null;if(this.options.source.settings&&this.options.source.settings.select){r=this.options.source.settings.select.node;for(t=0;t<r.length;t+=1)this._columnsOrder.push(r[t].expr.replace("@",""))}return this.currentItems=[],this.controller={},this.plugins=[],this._$refreshPlugin=null,this.options.fakeColumn===!0&&this.options.headers.length>0&&this.options.headers.push([""]),this._datasourceCaps=NL.Utils.extend({},this.options.source.getCapabilities()),this._render(),this._addListeners(),this._bindToSource(),this.options.title!==null&&this.setTitle(this.options.title),this._initPlugins(),this._addToolBar(),this.options.pagination&&this._addPagination(),this.options.fixedHeader&&this.fixHeader(),NL.Widgets.LayoutManager.registerWidget(this),this._uiController=new NL.UI.Controller({onChange:function(e,t){var r,i,s,o,u;r=e.split("_"),i=r[0],s=n._$grid.find("[name="+e+"]").parent().index(),o=n._model.getItem(s),n._model.updateItem(o,i,t),n.options.onChange&&n.options.onChange.call(n,this,i,t)}}),this},_initPlugins:function(){var n,r,i;return n=this,this._$pluginsContainer===undefined&&(this._$pluginsContainer=e('<caption class="nlui-grid-plugin-container"></caption>').nlHorizontalLayout({height:28}).appendTo(this._$grid)),e.each(this.options.plugins,function(e,t){n.addPlugin(t,n._$pluginsContainer)}),this._datasourceCaps.realTime||(this._$refreshPlugin=NL.Collection.newPlugin(e.extend({}),"RefreshButtonPlugin")),this.options.search&&(r=NL.Collection.newPlugin(e.extend({},this.options.search,{wildcard:this.options.searchWildcard,realTime:this._datasourceCaps.realTime,width:this._hasWidgetsOnTop?172:0,onCancel:this.options.onCancel,refreshPlugin:n._$refreshPlugin}),"SearchInputPlugin"),this._$searchPlugin=r,this.addPlugin(r,this._$pluginsContainer)),this._$refreshPlugin!==null&&this.addPlugin(this._$refreshPlugin,this._$pluginsContainer),NL.Utils.each(this.plugins,function(e,t){t.setReady()}),this.plugins.length===0||this.plugins.length===1&&this._$refreshPlugin!==null?(this._$pluginsContainer.hide(),this._$pluginsContainer=undefined):this._$grid.addClass("nlui-grid-withPlugin"),this},_addPagination:function(n){var r,i,s,o;return r=this,this._$footer||this._addFooter(),i=e.extend(!0,n,{mode:"grid",controller:this.controller,scrollingText:xtk_core.navigation_scrollingNextShort(),loadingText:xtk_core.loadingDataShort()},this.options.pagination),e('<div class="nlui-grid-pagination"></div>').nlPagination(i).appendTo(this._$footerCell),this},_columnsCount:function(){var t;return this.options.headers&&this.options.headers.length>0&&(t=this.options.headers.length),t},_render:function(){var n=this;return this._$grid=e('<table class="'+this._tableCssClasses+' nlui-grid-empty"></table>').appendTo(this.element),this.options.gridClass&&this._$grid.addClass(this.options.gridClass),this.options.headers.length>0&&this._addHeader(),this.options.footer?this._addFooter():this._$grid.addClass("nlui-grid-nofooter"),this._$body=e("<tbody></tbody>").appendTo(this._$grid),this.options.selectionMode!=="none"&&this._$body.addClass("nlui-grid-selectable"),this.options.sortable===!0&&this._$grid.sortable({items:"tbody tr",axis:"y",helper:"clone",start:function(n,r){var i,s;i=r.item.index(),r.item.data("originalIndex",i),r.item.show(),s=r.item.children(),e.each(r.helper.find("td"),function(t,n){var r=e(s[t]).outerWidth();t===0&&e(n).css({background:"transparent"}),e(n).width(r)}),r.item.hide()},update:function(t,r){n.moveRow(r.item.data("originalIndex"),r.item.index(),!1)}}),this},_bindToSource:function(){var n,r,i;return n=this,r=this.options.source,this.controller=new NL.Collection.Controller(r),n._$header&&n._datasourceCaps.sortable===!1&&n._$header.find("th").removeClass("nlui-grid-column-sortable"),this.options.autoLoad!==!1&&setTimeout(function(){n.controller.get({preSelection:n.options.selection})},0),n._model=new ListModel({keyAttributes:n.options.keyAttributes}),this.controller.onBeforeGet.attach(function(t){var r,i;n._tmpSelection&&e.extend(t,{preSelection:n._tmpSelection}),i=this.dataSource.settings,n._sortedColumn&&i.select&&(r=i.select.node[n._sortedColumn.index()],e.extend(t,{sorts:[{expr:r.expr,name:r.expr.replace("@",""),desc:n._sortedColumn.data("sortOption")==="DESC"}]})),e.each(n.plugins,function(e,n){n.applyCriteriae(t)})}),this.controller.onSuccess.attach(function(t,r){var i,s,o,u;(r.refresh||!n.options.pagination)&&n.empty(!0),t.data.length>0&&(e.each(t.data,function(e,t){n._model.addItem(t,function(e){i=n.addRow(e.source,!1),i.data("modelItem",e),e.element=i})}),n.currentItems=n._model.getItems(),NL.isNundef(r.preSelection)||n.selection(r.preSelection),r.pagination&&r.pagination.perPage&&n._$bodyDiv&&n._rows.length>0&&(s=n._rows[0].outerHeight(),o=r.pagination.perPage*(r.pagination.page-1)*s,n._$bodyDiv.animate({scrollTop:o}))),n._refreshCounter(),this._isDataLoaded=!0}),this},_addListeners:function(){return this.element.on("click","tbody.nlui-grid-selectable tr",{grid:this},function(n){var r,i;r=n.data.grid,i=e(this).index(),r.selectRow(i)}).on("mousedown","tbody tr",{grid:this},function(n){var r=n.data.grid;r._editBox!==undefined&&r._editBox!==null&&!e(n.target).hasClass("nlui-grid-cell-edit-box")&&r._editBox.blur()}).on("dblclick","tbody td.nlui-grid-column-editable",{grid:this},function(n){var r,i;return r=e(this),i=n.data.grid,r.hasClass("nlui-grid-cell-edit")||i.setColumnEditable(r,!0),!1}).on("click","tbody td.nlui-grid-column-editable",{grid:this},function(n){var r,i,s;return r=e(this),i=n.data.grid,s=r.parent().index(),i._selectedRow!==null&&i._selectedRow.index()===r.parent().index()&&!r.hasClass("nlui-grid-cell-edit")?i.setColumnEditable(r,!0):i.selectRow(s),!1}).on("click","thead th.nlui-grid-column-sortable",{grid:this},function(n){var r,i,s,o,u;r=n.data.grid,i=e(this),o=i.data("sortOption"),s=o!==undefined&&o==="ASC"?"DESC":"ASC",r.sortBy(i,s)}).on("click dblclick","thead th .ui-resizable-handle",{grid:this},function(n){var r,i,s,o,u,a,f,l,c,h,p,d,v;if(n.type==="click")return!1;r=n.data.grid,s=e(this),i=s.parents("th"),o=s.parent(),a=i.index()+1,l=0,v=r._getColumnOptions(a-1),d="td:nth-child("+a+") label,",d+="td:nth-child("+a+") .nlui-more-text-container,",d+="td:nth-child("+a+") input,",d+="td:nth-child("+a+") select,",d+="th:nth-child("+a+") .nlui-grid-column-content",f=r.element.find(d),e.each(f,function(t,n){var r;r=e(n).outerWidth(!0),r>l&&(l=r)});if(v.sortable===undefined||v.sortable===!0)l+=10;u=o.outerWidth()-o.width(),h=l+u,r._useEffects?(i.animate({width:h},function(e){r._hasFixedHeader&&r._$headerDiv.scrollLeft()<=0&&r._$headerFakeColumn.width("auto")}),o.animate({width:l})):(i.width(h),o.width(l),r._hasFixedHeader&&r._$headerDiv.scrollLeft()<=0&&r._$headerFakeColumn.width("auto")),r._$clonedHeader!==null&&(p=e(r._$clonedHeader.find("tr th").get(a-1)),r._useEffects?p.animate({width:h}):p.width(h)),r._columnResize(i.index(),h)}).on("click",".nlui-grid-footer-addbutton",{grid:this},function(t){t.data.grid._execAddRow()}),this},_selectItem:function(e){return this.options.selectionMode!=="none"&&this.selectRow(e.element),this},_addHeader:function(){var n,r,i,s,o,u,a;return r=this,s=e("<tr>"),a=r.getConf(),r._$header=e("<thead></thead>").append(s).appendTo(this._$grid),e.each(r.options.headers,function(t,n){var u,f,l,c,h,p;f=t===r.options.headers.length-1?!0:!1,l=r.options.fakeColumn===!0&&f,o=r.options.columns&&r.options.columns[t]?r.options.columns[t]:{},p=o.align||"left",l?c='<div class="nlui-grid-column-cell">&nbsp;</div>':c='<div class="nlui-grid-column-cell"><div class="nlui-grid-column-content">'+n+"</div>"+"</div>",i=e('<th class="nlui-grid-column-'+t+" nlui-grid-column-cell-align-"+p+'">'+c+"</th>").appendTo(s),f&&i.addClass("last-child"),l?(i.addClass("nlui-grid-fakeColumn"),r._$headerFakeColumn=i):(u=i.children(".nlui-grid-column-cell"),(o.resizable===undefined||o.resizable!==!1)&&u.resizable({alsoResize:i,handles:"e",minWidth:o.minWidth,stop:function(t,n){var i,s;s=e(this).parent(),i=s.index(),r._columnResize(i,s.outerWidth())},resize:function(e,t){r._hasFixedHeader&&r._$headerDiv.scrollLeft()<=0&&r._$headerFakeColumn.width("auto")}}),h=r._getColumnConf(t),h&&!NL.isNundef(h.size)&&(o.width=h.size),o.width!==undefined&&i.width(o.width),o.sortable!==!1&&(i.addClass("nlui-grid-column-sortable"),u.append(e('<span class="ui-icon nlui-icon"></span>'))),a.sort&&a.sort.index===t&&(r._updateColumnState(i,a.sort.option),r._sortedColumn=i))}),r},_addToolBar:function(){var n,r,i,s,o;return n=this,i=[],s={},o=[],n.options.buttons&&n.options.buttons.length>0&&(this._$toolBar=e('<caption class="nlui-grid-toolbar"></caption>').appendTo(n._$grid),e.each(n.options.buttons,function(t,r){var i,u;i={mode:"default"};switch(r){case"moveUp":u=xtk_core.grid_moveRowUp(),e.extend(i,{icon:"nlui-icon-list-move-up disabled",help:u,command:function(){n.moveRowUp()}});break;case"moveDown":u=xtk_core.grid_moveRowDown(),e.extend(i,{icon:"nlui-icon-list-move-down",help:u,command:function(){n.moveRowDown()}});break;case"remove":u=xtk_core.grid_removeRow(),e.extend(i,{icon:"nlui-icon-list-delete-row",help:u,command:function(){n.removeRow(n.getCurrentRow(),!0)}});break;case"add":u=xtk_core.grid_addRow(),e.extend(i,{help:u,icon:"nlui-icon-list-insert-row",command:function(){n._execAddRow()}});break;case"config":u=xtk_core.grid_config(),e.extend(i,{help:u,icon:"nlui-icon-more-menu"})}n.options.buttonsText===!0&&e.extend(i,{label:u,icon:null}),r!=="add"&&r!=="config"&&e.extend(i,{disabled:!0}),s[r]=i,o.push(r),n._buttons[r]=!0}),this._$cmdBar=e('<div class="nlui-grid-cmdBar"></div>').nlCmdBar({separators:!1,rightSeparator:!1,leftSeparator:!1,commands:o,commandConfigs:s,controller:new NL.UI.Controller}).appendTo(this._$toolBar)),this},_execAddRow:function(){var n,r,i,s,o,u;s={},r=this,u=r._getColumnsNames();if(r.options.rowDefaultValues.length>0&&u.length>0)for(i=0;i<u.length;i+=1)o=u[i],s[o]=r.options.rowDefaultValues[i];else s=e.extend({},r.options.rowDefaultValues);return r._model.addItem(s,function(e){var t=r.addRow(e.source);t.data("modelItem",e),e.element=t,r.selectRow(t)}),r._refreshCounter(),this},_addFooter:function(){var n=this._columnsCount();return this._$footer=e('<tfoot><tr><td colspan="'+n+'"></td></tr></tfoot>').appendTo(this._$grid),this.options.counter&&(this._$footerCell=e("<div></div>").addClass("nlui-grid-footer-cell").appendTo(e("td",this._$footer)),this._$footerCounter=e("<span></span>").addClass("nlui-grid-dataCount").appendTo(this._$footerCell)),this.options.footerButton&&this._$footer.prepend(e('<tr><td class="nlui-grid-footer-addbutton" colspan="'+n+'">'+xtk_core.grid_addRow()+"</td></tr>")),this},_enableButtons:function(){var n=this;return n._$cmdBar&&(e.each(arguments,function(e,t){n._buttons[t]&&n._$cmdBar.nlCmdBar("setCommandAttribute",t,"disabled",!1)}),this._$cmdBar.nlCmdBar("refresh")),this},_disableButtons:function(){var n=this;return n._$cmdBar&&(e.each(arguments,function(e,t){n._buttons[t]&&n._$cmdBar.nlCmdBar("setCommandAttribute",t,"disabled",!0)}),this._$cmdBar.nlCmdBar("refresh")),this},_getColumnOptions:function(t){return this.options.columns&&this.options.columns[t]?this.options.columns[t]:{}},_getColumnConf:function(t){var n,r,i;return i=this.getConf(),i.columns?(n=i.columns,r=n[t]||null):r=null,r},_columnResize:function(t,n){var r;r=this.getConf(),r.hasOwnProperty("columns")||(r.columns={}),r.columns[t]||(r.columns[t]={}),r.columns[t].size=n,this.saveConf(r)},_clearSorting:function(){return this._sortedColumn!==null&&this._sortedColumn.data("sortOption","").find(".nlui-icon").removeClass(this._iconAscCls+" "+this._iconDescCls),this._sortedColumn=null,this},_updateColumnState:function(t,n){var r;return r=n==="ASC"?this._iconAscCls:this._iconDescCls,this._sortedColumn!==null&&this._sortedColumn.data("sortOption","").find(".nlui-icon").removeClass(this._iconAscCls+" "+this._iconDescCls),t.data("sortOption",n).find(".nlui-icon").addClass(r),this},_createRowViewController:function(n){var r=this;return e.each(n,function(e,t){var n,i,s,o;s=t.value,t.options.editable&&/boolean|enum|link/.test(t.options.type)?o=!1:o=!0,n={readOnly:o,mandatory:!0,visible:!0,enabled:!0,locale:t.options.locale||NL.Locale.getLocale("en-us"),style:t.options.style||null},i=ViewControllerManager.newViewController(r._uiController,t.name,n);switch(t.options.type){case"datetime":s=NL.XTK.parseDateTime(s,null);break;case"date":s=NL.XTK.parseDateOnly(s,null);break;case"boolean":s=NL.XTK.parseBoolean(s,!1);break;case"link":case"number":break;default:s=String(s)}s!==null&&i.setValue(s),i.$div.addClass("nlui-grid-column-cell-content").appendTo(t.$container),t.options.render&&typeof t.options.render=="function"?t.$container.html("<label>"+t.options.render(s)+"</label>"):i.$div.appendTo(t.$container),t.$div.data("view",i)}),this},_refreshCounter:function(){var t;return t=this._rows.length===0?this.options.emptyText:this._rows.length,this._$footerCounter&&this._$footerCounter.text(t),this},_getColumnsNames:function(){var t,n;if(this._columnsNames===null){this._columnsNames=[];for(t=0;t<this.options.columns.length;t+=1)n=this.options.columns[t],n.name&&this._columnsNames.push(n.name)}return this._columnsNames},rebuildLayout:function(){},getHeader:function(){return this._$header},count:function(){return this._rows.length},empty:function(t){var n;return n=this,this._rows=[],n._$body.empty(),this.currentItems=[],this.currentSelection=undefined,t&&this._model.empty(),this._disableButtons("moveUp","moveDown","remove"),this._refreshCounter(),this},getModel:function(t){return this._model},setColumnEditable:function(n,r){var i,s,o,u,a,f,l,c,h,p,d;i=this,s=n.data("view"),a=n.data("name"),f=r===undefined?!1:!r,p=!1,h=i._getColumnOptions(n.index()),s.controller.setItemAttribute(a,"readOnly",f),u=e.extend(s.display,{readOnly:f}),o=ViewControllerManager.newViewController(s.controller,a,u),o.setValue(s.value),d=n.children(".nlui-grid-column-cell").empty(),!r&&h.render&&typeof h.render=="function"?d.html("<label>"+h.render(s.value)+"</label>"):o.$div.appendTo(d);if(!f){n.addClass("nlui-grid-cell-edit"),l=n.innerHeight(),c=o.$div.find("input, textarea");if(h.type==="datetime"||h.type==="date")c.datepicker("option","onClose",function(e){c.blur()}).datepicker("widget").on("mousedown",function(e){return!1}),p=!0;c.css("height",l+"px").select().on("blur",{column:n},function(e){i.setColumnEditable(n,!1)}).on("keydown",function(t){t.keyCode===13&&t.shiftKey===!1&&(p&&c.datepicker("hide"),e(this).blur())})}else n.removeClass("nlui-grid-cell-edit");return n.data("view",o),this},setTitle:function(n){this._$title===null?this._$title=e('<caption class="nlui-grid-title">'+n+"</caption>").appendTo(this._$grid):this._$title.text(n)},addRow:function(n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m;v={},r=r===undefined?!0:r;if(n!==undefined){s=this,o=0,c={},h=[],this._$grid.removeClass("nlui-grid-empty"),f=e("<tr></tr>").addClass("nlui-grid-row"),a=s._columnsOrder.length>0?s._columnsOrder:n,e.each(a,function(t){var r,i,l,p,v,m,g;g={},p=s._getColumnOptions(o),m=p.align||"left",v=p.editable===undefined?!1:p.editable,s._columnsOrder.length>0?(l=a[t],r=n[l]):(l=t,r=a[l]),/^\_/.test(l)||(u=e('<td class="nlui-grid-column-cell-align-'+m+'"></td>'),d=e('<div class="nlui-grid-column-cell"></div>').appendTo(u),u.appendTo(f),v&&!/boolean|enum|link/.test(p.type)&&u.addClass("nlui-grid-column-editable"),e.extend(g,p,{value:r}),i=String(l+"_"+s.count()),c[i]=g,h.push({name:i,value:r,options:p,$container:d,$div:u}),u.attr("name",i).data("name",i)),o+=1}),e.extend(v,this._uiController._model,c),this._uiController.setModel(v),s._createRowViewController(h);for(i=0;i<s.options.headers.length-o;i+=1)f.append(e('<td class="nlui-grid-fakeColumn"></td>'));this._useEffects&&f.show("fade",500),f.appendTo(s._$body),s._rows.push(f),m=s._model.getItem(s._rows.length-1),m===undefined&&(m=this._model.addItem(n,function(e){f.data("modelItem",e),e.element=f})),this.options.onAdd&&r&&this.options.onAdd.call(this,f,m)}return f},getRowValues:function(n){var r;return r={},e.each(this._model.getItem(n).source,function(e,t){r[e]=t}),r},removeRow:function(t,n){var r,i;return typeof t=="number"?(r=t,t=this.getRow(t)):r=t.index(),t&&(i=t.data("modelItem"),t===this._selectedRow&&(this.currentSelection=undefined),this.options.beforeRemove&&this.options.beforeRemove.call(this,t,i),t.remove(),this._rows.splice(r,1),n&&this._model.removeItem(i.index),this._disableButtons("moveUp","moveDown","remove"),this.options.afterRemove&&this.options.afterRemove.call(this),this.count()===0&&this._$grid.addClass("nlui-grid-empty")),this},getRow:function(t){var n;return this._rows.length>0&&(n=this._rows[t]),n},selectRow:function(t){var n,r,i;return typeof t=="number"&&(t=this.getRow(t)),t!==this._selectedRow&&(t.addClass("nlui-grid-row-selected"),this._selectedRow!==null&&this.unSelectRow(this._selectedRow.index()),this._selectedRow=t,this.options.selectionMode!=="none"&&(n=t.data("modelItem"),r=new NL.Collection.Selection(n.key,n.source),this.currentSelection=r,this.options.onSelection(r,n.source),this._tmpSelection=r,i=t.index(),this._enableButtons("remove"),i!==0?this._enableButtons("moveUp"):this._disableButtons("moveUp"),i!==this._rows.length-1?this._enableButtons("moveDown"):this._disableButtons("moveDown"))),this},unSelectRow:function(t){var n;return n=this.getRow(t),n===this._selectedRow&&(this._selectedRow=null,n.removeClass("nlui-grid-row-selected"),this.currentSelection=undefined),this._disableButtons("moveUp","moveDown","remove"),this},sortBy:function(n,r){var i,s,o,u,a,f,l,c,h,p,d;if(this._datasourceCaps.sortable===!0){r=r?r.toUpperCase():"ASC",u=this._rows.length,d=this.controller.dataSource,isNaN(n)?c=n.index():(c=n,n=this._$header.find("th:eq("+c+")")),this._updateColumnState(n,r),this._sortedColumn=n;if(d&&d.settings.select)this.controller.refresh();else for(i=0;i<u;i++)for(s=i+1;s<u;s++)a=e(this._rows[s].children().get(c)).data("contentValue"),f=e(this._rows[i].children().get(c)).data("contentValue"),r==="ASC"?o=a<=f:o=a>=f,o===!0&&(l=this._rows[s],this._rows[s]=this._rows[i],this._rows[i]=l,this._rows[i].insertBefore(this._rows[s]));p=this.getConf(),p.sort={index:this._sortedColumn.index(),option:r},this.saveConf(p)}return this},moveRow:function(t,n,r){var i,s,o,u,a;s=this,r===undefined&&(r=!0);if(t!==n&&n>=0&&n<s._rows.length){r===!0&&(u=s._rows[t],a=s._rows[n],t<n?u.insertAfter(a):u.insertBefore(a));if(n>=s._rows.length){i=n-s._rows.length;while((i-=1)+1)s._rows.push(undefined)}s._rows.splice(n,0,s._rows.splice(t,1)[0]),s._clearSorting(),n<=0?s._disableButtons("moveUp"):s._enableButtons("moveUp"),n>=s._rows.length-1?s._disableButtons("moveDown"):s._enableButtons("moveDown")}return this},moveRowUp:function(){var t;return this._selectedRow!==null&&(t=this._selectedRow.index(),this.moveRow(t,t-1)),this},moveRowDown:function(){var t;return this._selectedRow!==null&&(t=this._selectedRow.index(),this.moveRow(t,t+1)),this},getCurrentRow:function(){return this._selectedRow},fixHeader:function(){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;n=this,i=0,c=0,this._hasFixedHeader=!0,d=!1;if(this._$header){r=n.element.prop("id");if(NL.isNundef(r)||r==="")r="nul-ui-grid-"+NL.Utils.sequence().nextVal(),n.element.prop("id",r);s=e('<div class="nlui-grid-fixed-container"></div>').appendTo(this.element);if(this._$pluginsContainer||this._$toolBar||this._$title)l=e('<div class="nlui-grid-fixed-pluginDiv"></div>').appendTo(s),h=e('<table class="'+this._tableCssClasses+'"></table>').appendTo(l),this._$title&&this._$title.appendTo(h),this._$pluginsContainer&&(this._$pluginsContainer.appendTo(h),NL.Widgets.LayoutManager.rebuildLayout(this._$pluginsContainer),s.addClass("nlui-grid-withPlugin")),this._$toolBar&&this._$toolBar.appendTo(h),i+=l.outerHeight();this._$headerDiv=e('<div class="nlui-grid-fixed-headerDiv"></div>').appendTo(s),o=e('<table class="'+this._tableCssClasses+'"></table>').appendTo(this._$headerDiv),e.each(this._$header.find("th"),function(t,n){v=e(n),m=v.children(".nlui-grid-column-cell"),v.hasClass("nlui-grid-fakeColumn")||(m.resizable("option","alsoResize","#"+r+" .nlui-grid-column-"+t),n.style.width===""&&v.width(v.width()))}),this._$header.appendTo(o),this._$bodyDiv=e('<div class="nlui-grid-fixed-bodyDiv"></div>').on("scroll",function(r){var i,s,o,u,a,f,l,h;f=e(this),u=f.scrollLeft(),c!==u&&(d===!1&&(d=!0,s=n._$grid.width(),o=f.width(),l=f[0],h=l.scrollWidth-l.clientWidth,a=h-(s-o),n._$headerDiv[0].scrollWidth>o&&n._$headerFakeColumn.width(a)),clearTimeout(p),p=setTimeout(function(){d=!1},100),n._$headerDiv.scrollLeft(u)),c=u}).appendTo(s),i+=this._$headerDiv.outerHeight(),this._$bodyDiv.css("top",i+"px"),this._$grid.appendTo(this._$bodyDiv),this._$clonedHeader=this._$header.clone().appendTo(this._$grid),this._$footer&&(u=e('<div class="nlui-grid-fixed-footerDiv"></div>').appendTo(s),a=e('<table class="'+this._tableCssClasses+'"></table>').appendTo(u),this._$footer.appendTo(a),this._$bodyDiv.css("bottom",u.outerHeight()+"px"))}},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}})})(jQuery);var ListModel=function(t){var n=this;return t=t||{},this._items=[],this._isDirty=!1,this._itemAdd=t.itemAdd,this._itemRemove=t.itemRemove,this._itemEmpty=t.itemEmpty,this._keyAttributes=t.keyAttributes,t.data&&$.each(t.data,function(e,t){n.addItem(t)}),this};ListModel.prototype.addItem=function(t,n,r){var i,s,o,u;return i=this.count(),s=this.buildCollectionKey(t),o=new NL.Collection.Item(i,t,null,s),this._items.push(o),n!==undefined&&n.call(this,o),this._itemAdd&&this._itemAdd(o),this.setDirty(r),o},ListModel.prototype.removeItem=function(t,n,r){var i,s,o;if(this._items.length>0){this._items[t]!==undefined&&(s=this._items.splice(t,1)[0]),o=this.count();for(i=s.index;i<o;i+=1)this.getItem(i).index-=1;n!==undefined&&n.call(this,s),this._itemRemove&&this._itemRemove(s),this.setDirty(r)}return this},ListModel.prototype.updateItem=function(t,n,r){return typeof t=="number"&&(t=this.getItem(t)),t.source[n]=r,this},ListModel.prototype.empty=function(t,n){var r=this._items;return NL.isEmpty(this._items)||(this._items=[]),t!==undefined&&t.call(this),this._itemEmpty&&this._itemEmpty(),this.setDirty(n),this},ListModel.prototype.getItems=function(){return this._items},ListModel.prototype.getItem=function(t){return this._items[t]},ListModel.prototype.count=function(){return this._items.length},ListModel.prototype.setDirty=function(t){return t===!0||t===undefined?this._isDirty=!0:this._isDirty=!1,this},ListModel.prototype.checkDirty=function(){var t;return t=this._isDirty,t},ListModel.prototype.buildCollectionKey=function(t){var n,r,i,s,o,u,a;if(this._keyAttributes!==undefined){i={};if($.isArray(this._keyAttributes)){o=this._keyAttributes.length;for(n=0;n<o;n++)i[this._keyAttributes[n]]=t[this._keyAttributes[n]]}else typeof this._keyAttributes=="string"&&(i[this._keyAttributes]=t[this._keyAttributes]);r=new NL.Collection.Key(i)}return r}
;"use strict";(function(e,t,n){e.widget("NL.nlBorderLayout",e.NL.nlWidget,{options:{speedAnimation:150,center:{element:null,onResize:function(){}},east:{element:null,size:null,hidden:null,name:"east",onHide:function(){},onShow:function(){},minSize:null,resizable:null},west:{element:null,name:"west",size:null,hidden:null,onHide:function(){},onShow:function(){},minSize:null,resizable:null},north:{element:null,size:null},south:{element:null,size:null}},_defaultSizes:{west:"25%",east:"25%",north:"20%",south:"20%"},_create:function(){var t=this,n=this.options,r=this.element,i=this.getConf();r.addClass("nlui-borderlayout"),this._$container=e("<div></div>").appendTo(r).addClass("nlui-borderlayout-container").addClass("floating"),this._$activators={},this._$regions={},this.defaultConf={east:{size:null,hidden:!1,maxReached:!1},west:{size:null,hidden:!1,maxReached:!1}},NL.Utils.count(i)===0&&(i.east={size:null,hidden:!1,maxReached:!1},i.west={size:null,hidden:!1,maxReached:!1},this.saveConf(i)),this._moved={east:{lastPosition:i.east.size,distance:i.east.size,maxReached:!1},west:{distance:i.west.size,lastPosition:i.west.size,maxReached:!1}},this._hiderConfig={east:{icon:"ui-icon-triangle-1-e"},west:{icon:"ui-icon-triangle-1-w"}},this._disabled=!1,this._showerConfig={east:{icon:"ui-icon-triangle-1-w"},west:{icon:"ui-icon-triangle-1-e"}},this.options.east.hidden!==null&&(i.east.hidden=this.options.east.hidden,this.defaultConf.east.hidden=this.options.east.hidden),this.options.west.hidden!==null&&(i.west.hidden=this.options.west.hidden,this.defaultConf.west.hidden=this.options.west.hidden),this._init(),this._resize(null),NL.Widgets.LayoutManager.registerWidget(this)},_init:function(){var t=this.options,n=this;this._$container.empty();if(this.options.north.element!==null){var r=e("<div></div>").appendTo(this._$container).addClass("nlui-borderlayout-line");this._buildNorthSouthRegions("north",r)}var i=e("<div></div>").appendTo(this._$container).addClass("nlui-borderlayout-line");this._buildEastWestRegions("west",i),this.options.center.element!==null&&(NL.isNundef(t.highlight)?this._$regions.center=e("<div></div>").appendTo(i).addClass("regions-w"):this._$regions.center=e("<div></div>").addClass("highlight").addClass("regions-w").appendTo(i),this._$regions.center.append(t.center.element)),this._buildEastWestRegions("east",i);if(this.options.south.element!==null){var s=e("<div></div>").appendTo(this._$container).addClass("nlui-borderlayout-line");this._buildNorthSouthRegions("south",s)}this.options.east.element!==null&&this._buildEvents("east"),this.options.west.element!==null&&this._buildEvents("west")},_dragBlock:function(t,r){var i=this,s=this.getConf();NL.Utils.count(s)===0&&(s=this.defaultConf);var o=i.options[r].minSize||150,u=i.options.center.minSize||500,a=null,f=null,l=null,c=16;r==="west"?(a=i._$regions.west.width()+t.position.left,f="east",l=this._$activators.east.offset().left-c):(a=i._$regions.east.width()-t.position.left,f="west",l=this._$regions.center.width()+this._$regions.west.width()-c);var h=!1;a<=i.options[r].minSize&&(h=!0,t.position.left=i._moved[r].lastPosition);var p=null;this.options[f].element!==null?p=i._moved[f].distance||i._$regions[f].width()||0:p=0,this._$activators[f]!==n&&a>=l&&(h=!0,s[r].maxReached=!0,t.position.left=i._moved[r].lastPosition),h||(i._moved[r].distance=a,i._moved[r].lastPosition=t.position.left,e(".ghost-resize-"+r+"").width(a),s[r].maxReached=!1)},_buildEvents:function(t){var n=this.options,r=this,i=this.getConf();NL.Utils.count(i)===0&&(i=this.defaultConf);if(n[t].resizable){if(this._disabled)return;i[t].hidden?this._$activators[t].addClass("nodrag"):r._$activators[t].draggable({axis:"x",cursor:"e-resize",iframeFix:!0,drag:function(e,n){r._dragBlock(n,t)},stop:function(n,i){var s=r.getConf();e(".ghost-resize-"+t+"").remove(),e(".mask-center").remove();var o=r._moved[t].distance;r._$activators[t].css("position","relative"),r._$activators[t].css("left",0),NL.Utils.count(s)===0&&(s=r.defaultConf),t==="east"?s[t].size=Math.abs(o):s[t].size=o,r.saveConf(s),r._resize(null)},start:function(n,i){var s=e("<div></div>");s.width(r._$regions[t].width()),r._moved[t].lastPosition=i.offset.left,s.appendTo(r.element);var o=e("<div></div>");o.addClass("mask-center"),o.appendTo(r._$regions.center),t==="east"?s.addClass("ghost-resize-east"):s.addClass("ghost-resize-west")}})}else this._$activators[t].addClass("nodrag")},_buildActivator:function(t,n){var r=this,i=this.options,s=this.getConf();this._$activators[t]=e("<div></div>"),this.options[t].resizable?this._$activators[t].addClass("nlui-borderlayout-activator-verticalContainer"):this._$activators[t].addClass("nlui-borderlayout-activator-verticalContainer-noresize");var o=e("<div></div>"),u=e("<div></div>"),a=e("<span></span>");o.click(function(){r.toggleRegion(t)}),NL.Utils.count(s)===0&&(s=this.defaultConf),s[t].hidden?a.addClass("light ui-icon nlui-icon "+this._showerConfig[t].icon):a.addClass("light ui-icon nlui-icon "+this._hiderConfig[t].icon),a.css("cursor","pointer"),o.hover(function(){r.options[t].resizable&&(r._$activators[t].removeClass("nlui-borderlayout-activator-verticalContainer"),r._$activators[t].addClass("nlui-borderlayout-activator-verticalContainer-out"))},function(){r.options[t].resizable&&(r._$activators[t].removeClass("nlui-borderlayout-activator-verticalContainer-out"),r._$activators[t].addClass("nlui-borderlayout-activator-verticalContainer"))}),t==="east"?(o.addClass("nlui-borderlayout-activatorcontainer-east"),u.addClass("nlui-borderlayout-activator-east")):(o.addClass("nlui-borderlayout-activatorcontainer-west"),u.addClass("nlui-borderlayout-activator-west")),a.appendTo(u),u.appendTo(o),o.appendTo(this._$activators[t]),this._$activators[t].appendTo(n)},setDisabledMode:function(e){this._disabled=NL.XTK.parseBoolean(e),NL.isNundef(this._$activators.east)||(this.getDisabledMode()?this._$activators.east.hide():this._$activators.east.show()),NL.isNundef(this._$activators.west)||(this._$activators.west.toggle(this.getDisabledMode()),this.getDisabledMode()?this._$activators.west.hide():this._$activators.west.show()),this._resize(null)},getDisabledMode:function(){return this._disabled},setRegion:function(e,t,n){var r=NL.Utils.extend(this.options[e],{element:t},n);this.options[e]=r,this._init(),this._resize()},clearRegion:function(e,t){var n=this._$regions[e];if(!n){NL.log.warn("In border a layout, tried to clear a region that did not exist : "+e+".");return}n.children().remove(),this.options[e].element.empty(),t&&(this.options[e].element=null),this._init(),this._resize()},addToRegion:function(e,t){var n=this._$regions[e];if(!n){NL.log.warn("In border a layout, tried to add element to a region that did not exist : "+e+".");return}this.options[e].element.append(t),this._resize()},_prctToPix:function(e,t){var n=this._$container.width(),r=this._$container.height(),i=String(e).indexOf("%");if(i===-1)return parseInt(e,10);if(t==="width"){var s=parseInt(e.substring(-1),10),o=s/100;return Math.ceil(n*o)}if(t==="height"){var s=parseInt(e.substring(-1),10),o=s/100;return Math.ceil(r*o)}},_checkSize:function(e,t){var n=this.options,r=n[e].size;return NL.isNundef(r)?this._prctToPix(this._defaultSizes[e],t):(r=this._prctToPix(r,t),NL.isNumber(r)?r:this._prctToPix(this._defaultSizes[e],t))},rebuildLayout:function(){this._resize(null)},_resize:function(e,t){var r=this.options,i=this,s=0,o=0,s=this.element.width(),o=this.element.height(),u=0,a=0,f=0,l=0,c=16,h=16,p=0,d=0,v=this.getConf();NL.Utils.count(v)===0&&(v=this.defaultConf),NL.isNundef(r.north.element)||(u=this._checkSize("north","height")),NL.isNundef(r.south.element)||(a=this._checkSize("south","height")),NL.isNundef(r.west.element)?(f=0,h=0):f=this._checkSize("west","width"),NL.isNundef(r.east.element)?(l=0,c=0):l=this._checkSize("east","width"),v.west.size!==null&&(f=v.west.size),v.east.size!==null&&(l=v.east.size),v.east.hidden&&(l=0),v.west.hidden&&(f=0);var m=o-(u+a),g=this.element.width()-(parseInt(f,10)+parseInt(l,10)+parseInt(c,10)+parseInt(h,10));u+a===0?(this.options.center.element!==null&&this._$regions.center!==n&&this._$regions.center.height(this.element.height()),this.options.east.element!==null&&this._$regions.east!==n&&this._$regions.east.height(this.element.height()),this.options.west.element!==null&&this._$regions.west!==n&&this._$regions.west.height(this.element.height()),this.options.west.element!==null&&this._$activators.west!==n&&this._$activators.west.height(this.element.height()),this.options.east.element!==null&&this._$activators.east!==n&&this._$activators.east.height(this.element.height())):(this.options.center.element!==null&&this._$regions.center!==n&&this._$regions.center.height(m),this.options.east.element!==null&&this._$regions.east!==n&&this._$regions.east.height(m),this.options.west.element!==null&&this._$regions.west!==n&&this._$regions.west.height(m),this.options.west.element!==null&&this._$activators.west!==n&&this._$activators.west.height(m),this.options.east.element!==null&&this._$activators.east!==n&&this._$activators.east.height(m)),this._animate(e,t,g),NL.isNundef(this._$regions.east)||this._$regions.east.width(l),NL.isNundef(this._$regions.west)||this._$regions.west.width(f)},_animate:function(t,n,r){var i=this.options,s=this,o=this._$regions.center.width();!NL.isNundef(i.center.element)&&t!==null&&(n==="west"&&this._$regions.center.css("float","right"),this._$regions.center.animate({width:r},s.options.speedAnimation,function(){s._$regions.center.css("float","left"),n==="east"?t==="hide"?e.isFunction(i.east.onHide)&&i.east.onHide():e.isFunction(i.east.onShow)&&i.east.onShow():t==="hide"?e.isFunction(i.west.onHide)&&i.west.onHide():e.isFunction(i.west.onHide)&&i.west.onShow()})),!NL.isNundef(this._$regions.center)&&t===null&&(this._$regions.center.width(r),e.isFunction(i.center.onResize)&&i.center.onResize())},_eastWestRegions:function(e,t,n){var r=this;n==="before"&&e==="east"&&this._buildActivator(e,t),n==="after"&&e==="west"&&this._buildActivator(e,t)},_buildEastWestRegions:function(t,n){var r=this.options,i=this;(t==="east"||t==="west")&&r[t].element!==null&&(this._eastWestRegions(t,n,"before"),this._$regions[t]=e("<div></div>").appendTo(n),t==="east"?this._$regions[t].addClass("nlui-borderlayout .regions-e"):this._$regions[t].addClass("nlui-borderlayout .regions-w"),this._$regions[t].append(r[t].element),this._eastWestRegions(t,n,"after"),this._$regions[t].width(r[t].size))},_buildNorthSouthRegions:function(t,n){var r=this.options;(t==="north"||t==="south")&&!NL.isNundef(r[t])&&!NL.isNundef(r[t].element)&&(this._$regions[t]=e("<div></div>").addClass("regions-ns").appendTo(n),this._$regions[t].append(r[t].element),this._$regions[t].height(this._checkSize(t,"height")))},_toggleDraggableRegion:function(e){var t=this.getConf();NL.Utils.count(t)===0&&(t=this.defaultConf),t[e].hidden&&this.options[e].resizable?(this._$activators[e].addClass("nodrag"),this._$activators[e].draggable("destroy")):(this._$activators[e].removeClass("nodrag"),this._buildEvents(e))},toggleRegion:function(e){var t=this.getConf();NL.Utils.count(t)===0&&(t=this.defaultConf);if(this._disabled)return;t[e].hidden?this.showRegion(e):this.hideRegion(e),this._toggleDraggableRegion(e)},showRegion:function(e){var t=this.options,n=this,r=this._$regions[e];if(!r){NL.log.warn("In border a layout, tried to show a region that did not exist : "+e+".");return}var i=this._$activators[e];i.find(".ui-icon").removeClass(this._showerConfig[e].icon).addClass(this._hiderConfig[e].icon);var s=null;e==="east"?s="west":s="east";var o=this.getConf();NL.Utils.count(o)===0&&(o=this.defaultConf),o[e].hidden=!1,this.options[e].resizable&&o[e].maxReached&&this.options[s].element!==null&&(o[s].size=o[s].size-o[e].size,o[e].maxReached=!1),this.saveConf(o),r.show(),this._resize("show",e)},hideRegion:function(e){var t=this.options,n=this,r=this._$regions[e];if(!r){NL.log.warn("In a border layout, tried to hide a region that did not exist : "+e+".");return}var i=this._$activators[e];i.find(".ui-icon").removeClass(this._hiderConfig[e].icon).addClass(this._showerConfig[e].icon);var s=this.getConf();NL.Utils.count(s)===0&&(s=this.defaultConf),s[e].hidden=!0,this.saveConf(s),e==="west"?r.hide(0,function(){n._resize("hide","west")}):r.hide(0,function(){n._resize("hide","east")})},destroy:function(){NL.Widgets.LayoutManager.unRegisterWidget(this)}})})(jQuery,window)
;"use strict";(function(e){var t={"default":{className:"default-mode",collapseIcon:"ui-icon-triangle-1-s",uncollapseIcon:"ui-icon-triangle-1-e"}};e.widget("NL.nlCollapsableSection",e.NL.nlWidget,{options:{mode:"default",legend:"",collapsable:!0,collapsed:!1,onConfigure:undefined},_create:function(){var n=this;n._$container=undefined,n._$legend=undefined,n._$collapser=undefined,n._$legendText=undefined,n._$contents=undefined,n._$initialContents=undefined,n.mode=undefined,this.restoreConf(),NL.Widgets.LayoutManager.registerWidget(this),n.mode=t[n.options.mode],n.mode===undefined&&(n.mode=t["default"]),n.element.addClass("nlui-collapsable"),n._$container=e('<div class="nlui-collapsable-wrapper"></div>').addClass(n.mode.className),n._$initialContents=n.element.children().detach(),n._$legend=e("<legend></legend>").appendTo(n._$container),n._$legendText=e('<div class="nlui-collapsable-legendtext"></div>').appendTo(n._$legend),n.options.collapsable?(n._$legend.addClass("nlui-collapsable-collapsable"),n._$collapser=e('<span class="nlui-icon"></span>').addClass(n.mode.collapseIcon),n._$legend.prepend(n._$collapser),n._$legend.click(function(){n._refreshCollapsed(!n.options.collapsed)})):n._$legend.addClass("nlui-collapsable-uncollapsable");if(n.options.onConfigure!==undefined&&n.options.onConfigure!==null)var r=e('<span class="nlui-collapsable-configure"></span>').nlButton({icon:"nlui-icon-settings",onClick:function(e,t,r){n.stopPropagation(t),n.preventDefault(t),n.options.onConfigure()}}).appendTo(n._$legend);n._$contents=e('<div class="nlui-collapsable-contents"></div>').appendTo(n._$container),n._$contents.append(n._$initialContents),n._$contents.toggle(!n.options.collapsed),n._$legend.toggleClass("nlui-collapsable-collapsed",n.options.collapsed),this._$collapser&&this._$collapser.toggleClass(n.mode.collapseIcon,!n.options.collapsed).toggleClass(n.mode.uncollapseIcon,n.options.collapsed),n._refresh(),n._$container.appendTo(n.element)},destroy:function(){var t=this;t._$initialContents.detach(),t.element.removeClass("nlui-collapsable").children().remove(),t.element.append(t._$initialContents),NL.Widgets.LayoutManager.unRegisterWidget(this),e.NL.nlWidget.prototype.destroy.call(this)},_refresh:function(){this._refreshLegend(this.options.legend),this._refreshCollapsed(this.options.collapsed)},_refreshLegend:function(e){NL.isEmpty(e)&&(e=""),this.options.legend=e,this._$legendText.text(e)},_refreshCollapsed:function(e){var t=this;e&&!this.options.collapsable&&(e=!1),this.options.collapsed!==e&&(this.options.collapsed=e,this.updateConf(),e?(this._$collapser&&this._$collapser.removeClass(t.mode.collapseIcon).addClass(t.mode.uncollapseIcon),this._$contents.slideUp("fast"),this._$legend.addClass("nlui-collapsable-collapsed")):(t._$collapser&&t._$collapser.removeClass(t.mode.uncollapseIcon).addClass(t.mode.collapseIcon),this._$contents.slideDown("fast",function(){t._$legend.removeClass("nlui-collapsable-collapsed"),NL.Widgets.LayoutManager.rebuildLayout(t.element)})))},_setOption:function(t,n){switch(t){case"legend":this._refreshLegend(n);break;case"collapsed":this._refreshCollapsed(n);break;case"collapsable":case"onConfigure":NL.assert(!1,"Option '"+t+"' cannot be changed dynamically.");break;default:e.NL.nlWidget.prototype._setOption.apply(this,arguments)}},append:function(e){this._$contents.append(e),NL.Widgets.LayoutManager.rebuildLayout(this.element)},restoreConf:function(){var e=this.getConf();NL.isEmpty(e)||(this.options=NL.Utils.extend(this.options,e))},updateConf:function(){var e={collapsed:this.options.collapsed};this.saveConf(e)}})})(jQuery)
;"use strict";(function(e){e.widget("NL.nlNotebook",e.NL.nlWidget,{options:{height:null,defaultSelected:null,tabs:[],layout:"vertical",sortable:!1,checkbox:!1,removable:!1,leftIcon:undefined,rightIcon:undefined,className:"",defaultContent:null,onSelect:function(e,t,n){},onCheck:function(e,t){},onRemove:function(e){},onMoved:function(e,t,n){}},_create:function(){var t=this;this._maxChars=this.options.layout==="vertical"?15:25,this._tabs=[],this._extraTabs=[],this.$ul=undefined,this.$contents=undefined,this.$defaultContent=undefined,this.selectedTab=undefined,this._dragPosition=-1,this.draggableClass="nlui-notebook-drag",this.options.layout==="vertical"?this.element.addClass("nlui-vertical-notebook"):this.element.addClass("nlui-horizontal-notebook"),this.$ul=e('<ul class="nlui-notebook-nav"></ul>').appendTo(this.element),this.$contents=e("<div class='nlui-notebook-content'></div>").addClass(" ui-corner-right ui-corner-bl").appendTo(this.element),NL.isEmpty(t.options.defaultContent)||(this.$defaultContent=e('<div class="default-content"></div>').append(t.options.defaultContent).appendTo(this.$contents));for(var n=0;n<t.options.tabs.length;n++){if(t.options.tabs[n].id===undefined)throw new Error("id mandatory");t.options.tabs[n].extra?t.addExtraTab(t.options.tabs[n],!0,!1):t.addTab(t.options.tabs[n],!0,!1)}this.options.sortable&&(this.options.layout==="vertical"?this.$ul.sortable({axis:"y",items:"> .nlui-notebook-tab",zIndex:10002,placeholder:"nlui-notebook-tab-dropzone",start:function(e,n){var r=n.item.data("tabId");t._select(r),t._dragPosition=t._getTab(r).index},stop:function(e,n){var r=n.item.index();t._dragPosition!==-1&&(t._moveTab(t._dragPosition,r),NL.isFunction(t.options.onMoved)&&t.options.onMoved(t.selectedTab,t._dragPosition,r),t._dragPosition=-1)}}):t.$ul.nlDroppable({type:"listOfDraggables",draggableSelector:"."+t.draggableClass,onMove:function(e,n,r,i){t._dragPosition!==-1&&(t._moveTab(t._dragPosition,n),NL.isFunction(t.options.onMoved)&&t.options.onMoved(t.selectedTab,t._dragPosition,n),t._dragPosition=-1)}})),t.refresh()},addTab:function(e,t,n){e.leftIcon===undefined&&(e.leftIcon=this.options.leftIcon),e.rightIcon===undefined&&(e.rightIcon=this.options.rightIcon),e.className===undefined&&(e.className=this.options.className),e.fullCaption=e.caption,e.caption=NL.String.truncate(e.caption,this._maxChars),this._tabs.push(e),n&&(this.selectedTab=e.id),t||this.refresh()},addExtraTab:function(e,t){this._extraTabs.push(e),t||this.refresh()},setTabOption:function(e,t,n,r,i){var s={};i=i===undefined?!1:i,s[t]=n,this.setTabOptions(e,s,r,i)},setTabOptions:function(t,n,r,i){var s,o,u;i=i===undefined?!1:i,i?(o=this._extraTabs,u="_getExtraTab"):(o=this._tabs,u="_getTab"),typeof t=="string"?s=this[u](t):s=o[t],s&&(e.each(n,function(e,t){s[e]=t}),r!==!0&&this.refresh())},setExtraTabOption:function(e,t,n,r){this.setTabOption(e,t,n,r,!0)},setExtraTabOptions:function(e,t,n){this.setTabOption(e,t,n,!0)},_getExtraTab:function(t){var n,r;return n=this,r={index:-1},e.each(n._extraTabs,function(e,n){if(t===n.id)return r=NL.Utils.extend(n,{index:e}),!1}),r},_drawTab:function(t){var n=this,r=t.selector,i=e('<li class="nlui-notebook-tab ui-corner-left"></li>').data("tabId",t.id).addClass(t.className).appendTo(this.$ul),s=e('<div class="nlui-notebook-tabContent"></div>').appendTo(i);if(this.options.sortable){i.addClass(n.draggableClass);var o=e('<span class="icon-wrapper grip"></span>').appendTo(s);NL.View.genImage("nlui-icon-notebook-grip").appendTo(o)}if(this.options.checkbox){var u=e('<input type="checkbox">').appendTo(s);u.on("click",function(){var e=u.is(":checked");n._toggleChecked(t,e)}),t.checked===!0&&u.attr("checked",!0)}var a=t.leftIcon;if(a){var f=e('<span class="icon-wrapper leftIcon"></span>').appendTo(s);NL.View.genImage(a,null,!1,0).appendTo(f)}var l,c;if(t.removable||t.removable===undefined&&this.options.removable)t.$li=i,c=e('<span class="icon-wrapper remove"></span>').appendTo(s),l=e("<span>&nbsp;</span>").addClass("ui-icon nlui-icon ui-icon-closethick close").appendTo(c);var h=t.rightIcon;if(h){var p=e('<span class="icon-wrapper rightIcon"></span>').appendTo(s);NL.View.genImage(h,null,!1,0).appendTo(p)}var d=e('<span class="nlui-notebook-tabLabel"></span>').appendTo(s);d.text(t.caption),t.fullCaption.length>this._maxChars&&n._setTooltip(i,t.fullCaption),t.sortable||t.sortable===undefined&&this.options.sortable?this.options.layout==="horizontal"&&(i.nlDraggable({clone:!1,draggableOptions:{cursor:"none"},onStart:function(e,r,i){i.helper.addClass("selected"),n._select(t.id),n._dragPosition=n._getTab(t.id).index}}),n.$ul.nlDroppable("makeInsertion")):i.find(".grip").remove(),l!==undefined&&l.click(function(e){n._removeTab(t.id),e.stopPropagation()}),r.appendTo(this.$contents).hide(),i.on("click",function(e){n._tabClicked(t.id)}),t.$li=i,t.$target=r,t.$labelWrapper=d},_drawExtraTab:function(t,n){var r=this,i={},s=e('<li class="nlui-notebook-extraTab ui-corner-left"></li>');n&&s.addClass("firstTab"),s.appendTo(r.$ul),NL.isEmpty(t.leftIcon)||(i.icon=t.leftIcon),NL.isEmpty(t.rightIcon)||(i.rightIcon=t.rightIcon),NL.isEmpty(t.caption)||(i.label=t.caption),t.mode&&(i.mode=t.mode),NL.isNundef(t.disabled)||(i.disabled=t.disabled),e.isFunction(t.onClick)&&(i.onClick=t.onClick),s.nlButton(i)},_tabClicked:function(e){this._select(e)},switchTab:function(e){NL.isEmpty(e)||this._select(e)},_select:function(t){if(NL.isNundef(t)){NL.log.warn("In Notebook widget, tried to select a tab with an unexisting ID or index.");return}var n=this,r=this.selectedTab,i;this.selectedTab=null,n.$defaultContent&&n.$defaultContent.hide(),e.each(n._tabs,function(e,r){t===r.id?(n.selectedTab=r.id,r.$li.addClass("selected"),r.$target.show(),i=r.$target,NL.Widgets.LayoutManager.rebuildLayout(r.$target),r.fullCaption.length<this._maxChars?(r.$li.nlTooltip("disable"),r.$labelWrapper.text(r.fullCaption)):r.$labelWrapper.text(r.caption)):(r.$li.removeClass("selected"),r.$li.nlTooltip("enable"),r.$labelWrapper.text(r.caption),r.$target.hide())}),this.options.onSelect(this.selectedTab,i,r)},_toggleChecked:function(e,t){e.checked=t,this.options.onCheck(e.id,e.checked)},_removeTab:function(t){var n=this,r,i,s;r=n._getTab(t),i=r.$li,s=r.$target,i.nlTooltip("hide"),i.slideUp(250,function(){i.remove();var o=-1;e.each(n._tabs,function(e,t){if(r.id===t.id)return o=e,!1}),s.remove(),n._tabs.splice(o,1),r.id===n.selectedTab&&n._tabs.length>0&&(o>=n._tabs.length&&o--,n._select(n._tabs[o].id)),!n._tabs.length&&n.$defaultContent&&(n.$defaultContent.show(),n.refresh()),n.options.onRemove(t)})},refresh:function(){var t=this,n;t.$ul.empty();for(var r=0;r<t._tabs.length;r++)t._drawTab(t._tabs[r]),t._tabs[r].selected===!0&&(t.selectedTab=t._tabs[r].id);if(t._extraTabs.length>0)for(r=0;r<t._extraTabs.length;r++)n=!1,r===0&&t._tabs.length>0&&(n=!0),t._drawExtraTab(t._extraTabs[r],n);if(t._tabs.length)if(t.selectedTab)t._select(t.selectedTab);else if(NL.isNundef(this.options.defaultSelected))t._select(t._tabs[0].id);else if(NL.isNumber(this.options.defaultSelected))t._select(t._tabs[this.options.defaultSelected].id);else{var i=this._getTab(this.options.defaultSelected).index;t._select(t._tabs[i].id)}else t.$defaultContent&&t.$defaultContent.show();if(this.options.layout==="vertical"){var s=0;this.$ul.children(".nlui-notebook-tab").each(function(){s+=e(this).outerHeight(),s+=5}),this.$ul.children(".nlui-notebook-extraTab").each(function(){s+=e(this).outerHeight(),s+=5}),NL.isNundef(this.options.height)?this.$contents.css("min-height",s+10):this.$contents.css("min-height",NL.XTK.parseNumber(this.options.height,null))}else{var n=this.$ul.children(".nlui-notebook-tab:first");n.addClass("firstTab"),NL.isNundef(this.options.height)||this.$contents.css("min-height",NL.XTK.parseNumber(this.options.height,null))}},_setTooltip:function(e,t){var n="e";this.options.layout==="vertical"?n="e":n="s",e.attr("original-title",t).nlTooltip({gravity:n})},_getTab:function(t){var n=this,r={index:0};return e.each(n._tabs,function(e,n){if(t===n.id)return r=NL.Utils.extend(n,{index:e}),!1}),r},_moveTab:function(e,t){if(e<0||t<0)throw new Error("trying to switch array value with a negative numeric index");if(e>this._tabs.length||t>this._tabs.length)throw new Error("trying to switch array values with an unexisting index value ");this._tabs.splice(t,0,this._tabs.splice(e,1)[0])}})})(jQuery)
;"use strict";(function(e){e.widget("NL.nlNavBar",e.NL.nlWidget,{options:{title:"",back:undefined,showBack:!1,onBack:undefined},$backButton:undefined,$title:undefined,_create:function(){var t=this;this.element.addClass("nlui-navBar"),this.$backButton=e("<button></button").button().css("display","none").addClass("back").appendTo(this.element),this.$title=e("<h1></h1>").appendTo(this.element),this.$backButton.click(function(){t.options.onBack&&t.options.onBack()})},destroy:function(){},_setOption:function(t,n){t==="title"&&(this.options.title=n,this.$title.text(n)),t==="back"&&(this.options.back=n,this.$backButton.text(NL.String.ellipsis(n,10))),t==="showBack"&&(this.options.showBack=n,n?this.$backButton.show():this.$backButton.hide()),e.NL.nlWidget.prototype._setOption.apply(this,arguments)}}),e.widget("NL.nlNavController",e.NL.nlWidget,{options:{},navigationStack:[],$navBar:undefined,$navViewContainer:undefined,_create:function(){var t=this;this.element.addClass("nlui-navController"),this.$navBar=e("<div></div>").nlNavBar({onBack:function(){t.pop()}}).appendTo(this.element),this.$navViewContainer=e("<div></div>").addClass("navViewContainer").appendTo(this.element)},destroy:function(){},_setOption:function(t,n){e.NL.nlWidget.prototype._setOption.apply(this,arguments)},_show:function(t){var n=this.$navViewContainer,r=n.offset().left+n.outerWidth()-n.innerWidth(),i=n.offset().top+n.outerHeight()-n.innerHeight(),s=n.innerWidth(),o=n.innerHeight(),u=this.$navViewContainer.children(),a=this.navigationStack.length;if(a===0)return;var f=this.navigationStack[a-1];if(f.$element){var l=e("<div></div>").addClass("slide").appendTo(this.$navViewContainer);f.$element.appendTo(l),t?(l.offset({left:r+s,top:i}),u.offset({left:r,top:i}),l.animate({left:0},{complete:function(){u.detach(),l.offset({left:r,top:i})}}),u.animate({left:-s})):(l.offset({left:r-s,top:i}),u.offset({left:r,top:i}),l.animate({left:0},{complete:function(){u.remove(),l.offset({left:r,top:i})}}),u.animate({left:s}))}this.$navBar.nlNavBar("option","title",f.title);if(a>1){var c=this.navigationStack[a-2];this.$navBar.nlNavBar("option","back",c.title),this.$navBar.nlNavBar("option","showBack",!0)}else this.$navBar.nlNavBar("option","showBack",!1)},push:function(e){this.navigationStack.push(e),this._show(!0)},pop:function(){if(this.navigationStack.length===0)return;var e=this.navigationStack.pop();this._show(!1)}})})(jQuery)
;"use strict";function Navigation(e,t,n){this.reloadCallback=e,this.countCallback=t,this.options=n||{},this.resetData(),this.listeners=[]}function AjaxList(e,t,n,r,i,s,o,u){this.controller=e,this.sListIdent=t,this.sQuery=n,this.sControllerPath="",this.refreshId="",i!=""&&(i[0]!="/"?this.sControllerPath="/ctx/vars/"+i:this.sControllerPath="/ctx"+i),this.eXMLNfo=null,r!=""&&(this.eXMLNfo=parseXMLString(r).documentElement),this.iCellPerLine=s==0?1:s,this.fnLineTemplate=o,this.strServerUrl=window.location.protocol+"//"+r_windowLocation,this.colCount=1,this.sortingData={elCustomOrderBy:parseXMLString("<orderBy><node sort='true'/></orderBy>").documentElement,bUseCustomOrderBy:!1,sortedColumnsImagesRefs:{}};var a=document.controller.getValue("/ctx/@_console");this.strViewLink=null,this.strViewLinkEnd="";if(typeof u=="string"&&u!==""){var f=parseXMLString(u).documentElement,l=NL.View.toUrl(f,a,!0,!0);l&&(this.strViewLink="<a",a||(this.strViewLink+=" target='_parent'"),this.strViewLink+=" class='linkProcess' href='"+l,this.strViewLink+=a?"&amp;pk=":"&amp;id=",this.strViewLinkEnd="</a>")}}function showHideBlock(e){var t=document.getElementById(e);if(t==undefined)return;var n=document.getElementById("url"+e),r=document.getElementById("img"+e);t.style.display=="none"||!t.style.display?(r&&(r.src=r.src.replace("filterRight.png","filterDown.png")),t.style.display="block",n!=undefined&&(n.style.fontWeight="bold")):(r&&(r.src=r.src.replace("filterDown.png","filterRight.png")),t.style.display="none",n!=undefined&&(n.style.fontWeight="normal"))}function percent(e){return NL.Locale.formatPercent(e-0,0,"N/A")}function ellipsis(e,t){var n=e.encodeHtml();return e.length>t?"<p title='"+n.replace(/'/g,"&apos;")+"'>"+e.substr(0,t).encodeHtml()+"..."+"</p>":n}function htmlImg(e){var t="";if(typeof e=="string"&&e!=""){var n=NL.route(e,"reverse_img");t="<img style='float:left;' class='linkAction' src='"+n+"'/>"}return t}var DEFAULT_NB_LINES_PER_PAGE=5,NAVIGATION_TYPE_SCROLLING=0,NAVIGATION_TYPE_PAGE=1;Navigation.prototype.resetData=function(){this.data={page:0,total:-1,perPage:this.options.iElementsPerPage||DEFAULT_NB_LINES_PER_PAGE}},Navigation.prototype.getMaxPage=function(){return this.data.total==-1?-1:Math.max(Math.ceil(this.data.total/this.data.perPage),1)},Navigation.prototype.refreshInterface=function(){for(var e in this.listeners)this.listeners[e]()},Navigation.prototype.onPageChange=function(e){var e=Number(e),t,n=this.getMaxPage();if(n>0)e<0&&(e=n+e+1),t=Math.max(Math.min(e,n),1);else{if(!(e>0))return;t=e}t!=this.data.page&&(this.data.page=t||1,this.reloadCallback(),this.refreshInterface())},Navigation.prototype.render=function(e,t){this.options.bPaginationMode?this.buildPaginationFooter(e):this.buildScrollingFooter(e)};var toggleClass=function(e,t,n){n&&e.className.indexOf(t)==-1?e.className+=" "+t:n||(e.className=e.className.replace(t,""))};Navigation.prototype.buildScrollingFooter=function(e){var t=this,n=document.createElement("div");n.className="btnseparator",e.appendChild(n);var r=document.createElement("div");r.className="group",r.current=r.appendChild(document.createElement("span")),r.appendChild(document.createTextNode("\u00a0")),r.appendChild(document.createTextNode("/")),r.appendChild(document.createTextNode("\u00a0")),r.total=r.appendChild(document.createElement("span")),r.total.className="clickable",r.total.onclick=function(e){return t.countCallback(),!1},r.total.title=xtk_core.navigation_getCount(),e.appendChild(r);var i=document.createElement("div");i.className="scrollingNext",i.appendChild(document.createTextNode("\u00a0")),i.appendChild(document.createTextNode(xtk_core.navigation_paginationNextLabel()));var s=document.createElement("img");s.src="/xtk/img/list/next.png",s.style.verticalAlign="top",i.appendChild(s),i.title=xtk_core.navigation_scrollingNext(),i.onclick=function(){t.onPageChange(t.data.page+1)},e.appendChild(i),this.listeners.push(function(){var e=t.getMaxPage(),n=t.data.total,s=t.data.page*t.data.perPage;n!=-1&&s>n&&(s=n),r.current.innerHTML=s,r.total.innerHTML=n!=-1?t.data.total:xtk_core.navigation_totalUnknown(),t.data.page<e||e==-1?i.style.display="inline":i.style.display="none"})},Navigation.prototype.buildPaginationFooter=function(e){var t=this,n=document.createElement("div");n.className="button paginationFirst",n.title=xtk_core.navigation_paginationFirst(),n.onclick=function(){t.onPageChange(1)},e.appendChild(n);var r=document.createElement("div");r.className="button paginationPrevious",r.title=xtk_core.navigation_paginationPrevious(),r.onclick=function(){t.onPageChange(t.data.page-1)},e.appendChild(r);var i=document.createElement("div");i.className="group",i.appendChild(document.createTextNode(xtk_core.navigation_paginationPage()+" ")),i.input=i.appendChild(document.createElement("input")),i.input.type="text",i.input.size="4",i.input.onkeypress=function(e){var n=e||window.event||{},r=n.keyCode||n.which;r==13&&t.onPageChange(this.value)},i.appendChild(document.createTextNode("\u00a0")),i.appendChild(document.createTextNode(xtk_core.navigation_paginationOf())),i.appendChild(document.createTextNode("\u00a0")),i.total=i.appendChild(document.createElement("span")),i.total.className="clickable",i.total.onclick=function(e){return t.countCallback(),!1},i.total.title=xtk_core.navigation_getCount(),e.appendChild(i);var s=document.createElement("div");s.className="button paginationNext",s.title=xtk_core.navigation_paginationNext(),s.onclick=function(){t.onPageChange(t.data.page+1)},e.appendChild(s);var o=document.createElement("div");o.className="button paginationLast",o.title=xtk_core.navigation_paginationLast(),o.onclick=function(){t.onPageChange(-1)},e.appendChild(o),this.listeners.push(function(){toggleClass(n,"enabled",t.data.page>1),toggleClass(r,"enabled",t.data.page>1);var e=t.getMaxPage();i.input.value=t.data.page,i.input.disabled=t.data.total==-1,i.total.innerHTML=e!=-1?e:xtk_core.navigation_totalUnknown(),toggleClass(s,"enabled",t.data.page<e||e==-1),toggleClass(o,"enabled",t.data.page<e)})},AjaxList.prototype.setupNavigation=function(bPaginationMode){var reload=function(e){return function(){var t=this.options.bPaginationMode;return e.loadData(t,this.data)}}(this),count=function(e){return function(){return e.loadData(!1,{countMode:!0})}}(this),iElementsPerPage=DEFAULT_NB_LINES_PER_PAGE;if(this.sQueryLimit)iElementsPerPage=Number(this.controller.getValue("/ctx"+(this.sQueryLimit[0]!="/"?"/vars/":"")+this.sQueryLimit));else{var qContent=parseXMLString(eval(this.sQuery)),qQueryDef=new NL.QueryDef;qQueryDef.setDefinition(qContent.documentElement),iElementsPerPage=Number(qQueryDef.getLineCount())}var navigationOptions={bPaginationMode:bPaginationMode,iElementsPerPage:iElementsPerPage};this.navigation=new Navigation(reload,count,navigationOptions),this.navigation.progressNav=document.getElementById(this.sListIdent.replace("lstData","progressNav"))},AjaxList.prototype.render=function(e,t,n){this.htmlTable=findElement(e,"TBODY"),this.htmlTable==null&&(this.htmlTable=e),this.colCount=t,this.trLine=null,n!=undefined&&(n==NAVIGATION_TYPE_SCROLLING||n==NAVIGATION_TYPE_PAGE)&&this.setupNavigation(n==NAVIGATION_TYPE_PAGE);var r=null;if(this.navigation){var i=1;r=document.getElementById(this.sListIdent.replace("lstData","lstHeaderNav"));if(r==null){r=document.getElementById(this.sListIdent.replace("lstData","lstFooterNav"));if(r){var s=document.getElementById(this.sListIdent.replace("lstData","lstNav"));s&&(s.style.display="block")}}r&&(this.navigation.render(r),this.navigation.onPageChange(i))}r==null&&this.loadData(!1)},AjaxList.prototype.clear=function(){if(this.htmlTable){var e=this.htmlTable.firstChild;while(e){var t=e.nextSibling;this.htmlTable.removeChild(e),e=t}this.trLine=null}},AjaxList.prototype.addLine=function(e,t){this.trLine=this.htmlTable.appendChild(document.createElement("tr")),t&&(this.trLine.className="ajaxTemp");var n=this.trLine.appendChild(document.createElement("td"));n.colSpan=this.colCount,n.appendChild(document.createTextNode(e))},AjaxList.prototype.addEmptyLine=function(){this.trLine=this.htmlTable.appendChild(document.createElement("tr"));var e=this.trLine.appendChild(document.createElement("td"));e.colSpan=this.colCount,e.appendChild(document.createTextNode(xtk_core.noData())),e.style.padding="4px"},AjaxList.prototype.refresh=function(e){this.refreshId=e,this.load(!0)},AjaxList.prototype.load=function(e){typeof this.refreshId=="string"&&this.refreshId!=""&&(this.sortingData.bUseCustomOrderBy=!1),this.navigation?(this.navigation.resetData(),this.clear(),this.navigation.onPageChange(1)):this.loadData(e)},AjaxList.prototype.toggleSorting=function(sExpr,sAlias){var data=this.sortingData,ndCustomOrderByNode=data.elCustomOrderBy.firstChild,sOrderByExpr=ndCustomOrderByNode.getAttribute("expr"),elDefaultOrderBy=parseXMLString(eval(this.sQuery)).documentElement,defaultOrderByNodes=findNodes(elDefaultOrderBy,"orderBy/node"),bUniqueDefaultSort=!1;defaultOrderByNodes&&defaultOrderByNodes.length==1&&defaultOrderByNodes[0].getAttribute("expr")==sExpr&&(bUniqueDefaultSort=!0),!data.bUseCustomOrderBy||sOrderByExpr!=sExpr?(ndCustomOrderByNode.setAttribute("expr",sExpr),ndCustomOrderByNode.setAttribute("alias",sAlias),bUniqueDefaultSort&&!data.bUseCustomOrderBy&&defaultOrderByNodes[0].getAttribute("sortDesc")!=1?ndCustomOrderByNode.setAttribute("sortDesc",1):ndCustomOrderByNode.setAttribute("sortDesc",0),data.bUseCustomOrderBy=!0):ndCustomOrderByNode.getAttribute("sortDesc")==0?ndCustomOrderByNode.setAttribute("sortDesc",1):bUniqueDefaultSort?ndCustomOrderByNode.setAttribute("sortDesc",0):data.bUseCustomOrderBy=!1,this.refresh()},AjaxList.prototype.updateSortingImages=function(e){var t=this.sortingData,n=t.sortedColumnsImagesRefs,r={},i;for(var s in e){var o=e[s];i=o.getAttribute("alias");if(i){var u=this.sListIdent+"_"+i.replace("@",""),a=document.getElementById(u);a&&(o.getAttribute("sortDesc")==1?a.src="/xtk/img/sort_down.png":a.src="/xtk/img/sort_up.png",r[i]=a,delete n[i])}}for(i in n)n[i].src="/xtk/img/sort_default.gif";t.sortedColumnsImagesRefs=r},AjaxList.prototype.loadData=function(bEmptyListFirst,navigationData){if(this.eXMLNfo!=null){var qContent=parseXMLString(eval(this.sQuery)),data=this.sortingData;data.bUseCustomOrderBy&&replaceContent(qContent,"/content/orderBy",data.elCustomOrderBy),this.updateSortingImages(findNodes(qContent.documentElement,"orderBy/node"));var ndWhere=findChildElement(qContent.documentElement,"sysFilter"),ndFolderRoot=null;ndWhere!=null&&(ndFolderRoot=findChildElement(ndWhere,"condition"));if(ndFolderRoot!=null&&document.folderSelectors&&document.folderSelectors[this.sListIdent]!=null)qContent.documentElement.setAttribute("folderFilter",document.controller.getValue("/ctx/vars/"+ndFolderRoot.getAttribute("xpath")+"/@id"));else if(ndFolderRoot!=null&&ndFolderRoot.getAttribute("xpath")!=""){var strFullName="",bSubTree=document.controller.getValue("/ctx/vars/"+ndFolderRoot.getAttribute("xpath")+"/@subTree");NL.XTK.parseBoolean(bSubTree,!1)&&(strFullName=document.controller.getValue("/ctx/vars/"+ndFolderRoot.getAttribute("xpath")+"/@fullName"));var ndFolder=qContent.createElement("condition");if(strFullName!="")ndFolder.setAttribute("expr","@fullName LIKE "+NL.XTK.folderLikeCond(strFullName,"$(homeDir) + %"));else{var iFolderId=document.controller.getValue("/ctx/vars/"+ndFolderRoot.getAttribute("xpath")+"/@id");iFolderId!=0&&ndFolder.setAttribute("expr","@id ="+iFolderId)}ndFolderRoot.insertBefore(ndFolder,null)}var qQueryDef=new NL.QueryDef;qQueryDef.setDefinition(qContent.documentElement),bEmptyListFirst&&this.clear(),navigationData?(this.navigation.progressNav&&(this.navigation.progressNav.style.display="block"),navigationData.countMode?(qQueryDef.setOperation("count"),qQueryDef.action="count"):(qQueryDef.setStartLine((navigationData.page-1)*navigationData.perPage),navigationData.perPage&&qQueryDef.setLineCount(navigationData.perPage+1))):(this.sQueryLimit&&qQueryDef.setLineCount(this.controller.getValue("/ctx"+(this.sQueryLimit[0]!="/"?"/vars/":"")+this.sQueryLimit)),this.addLine(xtk_core.loadingData(),!0)),qQueryDef.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)}else this.onXtkQueryCompleted(null,findElement(document.controller.ctx,this.sControllerPath))},AjaxList.prototype.onXtkQueryCompleted=function(e,t,n){this.navigation&&this.navigation.progressNav&&(this.navigation.progressNav.style.display="none");var r=document.getElementById(this.sListIdent.replace("lstData","removeFilter"));if(r){var i=document.getElementById(this.sListIdent.replace("lstData","lstFilterNav"));NL.XTK.parseBoolean(document.controller.isModifiedObservers(),!1)?(r.style.display="block",i.style.display="block"):(r.style.display="none",i.style.display="none")}if(n!=undefined){var s=n.toString().split("\n");for(var o=0;o<s.length;o++)this.addLine(s[o],!1);return}if(e.action=="count"&&this.navigation)this.navigation.data.total=t.getAttribute("count"),this.navigation.refreshInterface();else{if(!this.navigation){if(this.trLine==null||this.trLine.className!="ajaxTemp")return;this.clear()}var u=null,a="";if(this.sControllerPath!=""&&e!=null){var f=findElement(document.controller.ctx,this.sControllerPath);if(typeof f=="undefined"||f==null)setXPathValue(document.controller.ctx,this.sControllerPath,"__placeHolder__"),f=findElement(document.controller.ctx,this.sControllerPath);if(f!=null)while(f.firstChild!=null)f.removeChild(f.firstChild);u=f}var l=firstChildElement(t),c=0;this.navigation&&(c=(this.navigation.data.page-1)*this.navigation.data.perPage);var h=1,p=!1,d=this.htmlTable,v=null;while(l){if(this.navigation&&h==this.navigation.data.perPage+1){p=!0;break}this.eXMLNfo!=null?this.currentLine=createPOJsO(l,this.eXMLNfo):this.currentLine=convertToPOJsO(l),u!=null&&u.appendChild(importNode(document.controller.ctx,l,!0));var m=c+h;this.currentLine.__lineIndex=m;var g=this.fnLineTemplate(m);try{var y=parseXMLString(g).documentElement;if(typeof y=="undefined"||y==null||y.nodeName=="parsererror")throw new Error("parserEror");var b=null;this.iCellPerLine<=1?b=findElement(y,"tr"):(h%this.iCellPerLine==1&&(d=this.htmlTable.appendChild(document.createElement("tr")),this.trLine==null&&(this.trLine=d)),b=findElement(y,"td")),b&&firstChildElement(b)&&b.nodeName.toLowerCase()==firstChildElement(b).nodeName.toLowerCase()&&(b=firstChildElement(b));var w="";while(b){var E=d.appendChild(importNodeAsHTML(b,!0));this.trLine==null&&(this.trLine=E,v==null&&(v=this.trLine)),b=nextSiblingElement(b)}}catch(S){this.addLine(g,!1)}l=nextSiblingElement(l),h++}var x=jQuery.Event("loadList");parent.$("body").trigger(x,[$(window).attr("name")]),h==1?this.addEmptyLine():this.sControllerPath!=""&&document.controller.notifyAllObservers(a),this.navigation&&!p&&(this.navigation.data.total=c+h-1,this.navigation.refreshInterface()),this.refreshId!=""&&this.refreshId!=undefined&&v&&v.id!=undefined&&v.id.substring(0,4)=="line"&&(showHideBlock("summary"+v.id.substring(4,v.id.length)),this.refreshId="")}},AjaxList.prototype.handleViewLinkStart=function(e){return this.strViewLink?this.strViewLink+e+"&amp;__securitytoken="+document.__securitytoken+"'>":""}
;"use strict";(function(e,t,n){var r="nlGridEditor_toolbar",i="#"+r;e.widget("NL.nlGridEditor",e.NL.nlWidget,{options:{mode:"table",editor:null,rowCount:2,colCount:2,toolbarOptions:null},_selectCell:function(e){var t=this;t.$toolbar.nlFloatToolbar("show",t.element),t.element.find(".ui-state-active").removeClass("ui-state-active"),e.addClass("ui-state-active"),t.$selectedCell=e},_bindOneCell:function(t){var n=this;t.nlFileDroppable({onDrop:function(e,r){if(t.find("*").length>0)n._showOverrideDialog(function(){t.empty();var e=new Uploader(r,t.get(0),"monoImage");e.Start()});else{var i=new Uploader(r,t.get(0),"monoImage");i.Start()}}}),t.bind("click",function(){e(this).parents(".nl-dce-grid").addClass("ui-state-active"),n._selectCell(t)})},_bindCells:function(){var t=this;t.element.find(".nl-dce-cell").each(function(){t._bindOneCell(e(this))})},_showOverrideDialog:function(t){var n={};n[xtk_core.dialog_ok()]=function(){t(),e(this).nlDialog("close")},n[xtk_core.dialog_cancel()]=function(){e(this).nlDialog("close")},e("<div title='"+xtk_core.gridEditor_confirmationTitle()+"'>"+xtk_core.gridEditor_confirmationContent()+"</div>").nlDialog({modal:!0,buttons:n})},_create:function(){var e=this;e.$toolbar=e.element.parents(i),e.$toolbar.length==0&&e._createToolbar();if(!e.element.hasClass("nl-dce-grid"))e._createGrid.call(e);else{var t=e.element.data("rowCount"),n=e.element.data("colCount");isNaN(t)||(e.options.rowCount=NL.XTK.parseInt(t,0)),isNaN(n)||(e.options.colCount=NL.XTK.parseInt(n,0)),e._bindCells()}},_createToolbar:function(){var t=this;t.$toolbar=e("<div></div>").attr("id",r),t.element.parents("body").append(t.$toolbar),t.$toolbar.nlFloatToolbar(t.options.toolbarOptions),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-above",title:xtk_core.gridEditor_addAbove(),id:"addAbove",action:function(){t._editorAddCells("above")}}),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-below",title:xtk_core.gridEditor_addBelow(),id:"addBelow",action:function(){t._editorAddCells("below")}}),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-left",title:xtk_core.gridEditor_addLeft(),id:"addLeft",action:function(){t._editorAddCells("left")}}),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-right",title:xtk_core.gridEditor_addRight(),id:"addRight",action:function(){t._editorAddCells("right")}}),t.$toolbar.nlFloatToolbar("addSeparator"),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-merge",title:xtk_core.gridEditor_merge(),id:"merge",action:function(){t.$selectedCell.addClass("mceSelected"),t.$selectedCell.next().addClass("mceSelected"),t.options.editor.execCommand("mceTableMergeCells"),t.$selectedCell.removeClass("mceSelected")}}),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-split",title:xtk_core.gridEditor_split(),id:"split",action:function(){t._executeMceCommand("mceTableSplitCells")}}),t.$toolbar.nlFloatToolbar("addSeparator"),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-deleteRow",title:xtk_core.gridEditor_deleteRow(),id:"deleteRow",action:function(){t._executeMceCommand("mceTableDeleteRow")}}),t.$toolbar.nlFloatToolbar("add",{icon:"nlui-icon-grid-deleteCol",title:xtk_core.gridEditor_deleteCol(),id:"deleteCol",action:function(){t._executeMceCommand("mceTableDeleteCol")}}),t.$toolbar.nlFloatToolbar("addSeparator"),t.$toolbar.nlFloatToolbar("add",{icon:"ui-icon-check",title:xtk_core.gridEditor_check(),id:"close",action:function(){t.stop()}})},_executeMceCommand:function(e){var t=this;t.options.editor.selection.select(t.$selectedCell.get(0)),t.options.editor.execCommand(e),t.options.editor.selection.collapse()},_editorAddCells:function(e){var t=this;t.$selectedCell.removeClass("ui-state-active");var n=null;e==="above"?(n="mceTableInsertRowBefore",t.options.rowCount++):e==="below"?(n="mceTableInsertRowAfter",t.options.rowCount++):e==="left"?(n="mceTableInsertColBefore",t.options.colCount++):e==="right"?(n="mceTableInsertColAfter",t.options.colCount++):NL.log.warn(e+" not supported yet"),n&&t._executeMceCommand(n),t._bindCells(),t.$selectedCell.addClass("ui-state-active")},_addCells:function(t,n,r){var i=this;if(i.options.mode=="table"){i.element.find("> table").length==0&&i.element.append("<table style='width: 100%; height: 100%;' class='nl-dce-grid-table'/>");var s=i.element.find("> table");if(t>0){for(var o=0;o<t;o++){var u;!r||r.length==0?u=s.append("<tr/>"):r&&(u=e("<tr/>"),r.before(u));for(var a=0;a<i.options.colCount;a++){var f=e("<td class='nl-dce-cell'/>");u.append(f),i._bindOneCell(f)}}i.options.rowCount+=t}if(n>0){var l=-1;r&&r.length>0&&(l=r.parent().children().index(r.get(0))),s.find("tr").each(function(){var t;l>-1&&(t=e(e(this).find("td")[l]));for(var r=0;r<n;r++){var s=e("<td class='nl-dce-cell'/>");t?t.before(s):e(this).append(s),i._bindOneCell(s)}}),i.options.colCount+=n}}},_makeGrid1x1:function(){var e=this;e.options.rowCount=0,e.options.colCount=0,e._addCells(1,1),e.element.find("> table.nl-dce-grid-table td").append(e.element.find("> *").not("table.nl-dce-grid-table, .nl_toolbar")),e._selectCell(e.element.find(".nl-dce-cell"))},_createGrid:function(){var t=this,n={};n[xtk_core.dialog_ok()]=function(){t.element.addClass("nl-dce-grid").addClass("ui-state-active");switch(e(this).find("input:checked").attr("id")){case"one":t._makeGrid1x1();break;case"adapt":t.element.find("> *").addClass("nl-dce-cell");break;case"drop":var n=t.element.css("width"),r=t.element.css("height");t.element.empty(),t.element.css({width:n,height:r}),t.options.rowCount=0,t.options.colCount=0,t._addCells(2,2)}t._bindCells(),e(this).nlDialog("close")},n[xtk_core.dialog_cancel()]=function(){e(this).nlDialog("close")};if(t.element.find("> *").not(".nl_toolbar").length>0)if(t.element.find("> *").not(".nl_toolbar").length==1)t._makeGrid1x1(),t._bindCells();else var r=e("<div class='nlui_gridEditor_create_dlg' title='"+xtk_core.gridEditor_createGridActionDlg_title()+"'>"+"<label class='radio'><input type='radio' checked='true' name='action' id='one'>"+xtk_core.gridEditor_createGridActionDlg_one()+"</input></label>"+"<label class='radio'><input type='radio' name='action' id='adapt'>"+xtk_core.gridEditor_createGridActionDlg_adapt()+"</input></label>"+"<label class='radio'><input type='radio' name='action' id='drop'>"+xtk_core.gridEditor_createGridActionDlg_drop()+"</input></label>"+"</div>").nlDialog({modal:!0,buttons:n,width:"480px"});else t.element.addClass("nl-dce-grid").addClass("ui-state-active")},stop:function(){this.element.find(".ui-state-active").removeClass("ui-state-active"),this.element.removeClass("ui-state-active"),this.$toolbar.hide()},clean:function(){this.stop(),this.$toolbar&&this.element.parents("body").find(i).remove()},destroy:function(){this.stop()}})})(jQuery,window)
;"use strict";NL.ns("NL.nms.Delivery"),NL.nms.Delivery.getJSONNavigationForDelivery=function(e,t,n){var r=e!==undefined&&e!==null,i=n.backview,s=n.multiSelection;NL.isEmpty(i)&&(i="deliveryOverview");var o=i;NL.isObject(i)&&(o=JSON.stringify(i));var u={currentView:undefined,views:[],viewConfigs:{}};r?u.viewConfigs.general={label:nms_campaign.blockGeneral(),icon:"nlui-icon-delivery",type:"navigation",view:"delivery",params:{id:t.id,backview:o}}:u.viewConfigs.general=getSwitchableViewConf({label:nms_campaign.blockGeneral(),icon:"nlui-icon-delivery",params:{backview:o}}),s||u.views.push("general"),!n.isInConsole&&t.useDCE&&(u.viewConfigs.content={type:"code",view:"contentEditor",icon:"nlui-icon-edit-content",label:xtk_core.monoContentLabel(),params:{backview:o}},r?NL.Utils.extend(!0,u.viewConfigs.content,{type:"code",checkSave:!0,confirmSave:!0,confirmSaveTargets:["preview"],onDisplay:function(){e.onDisplayPageFromViewBar(undefined,!0)}}):NL.Utils.extend(!0,u.viewConfigs.content,{type:"navigation",view:"contentEditor",params:{target:"delivery",sc:t.schema,id:t.id}}),u.views.push("content"),u.viewConfigs.preview={label:xtk_core.preview(),icon:"nlui-icon-preview",params:{backview:o}},r?NL.Utils.extend(!0,u.viewConfigs.preview,{type:"code",onDisplay:function(){e.setCurrentState("preview")}}):NL.Utils.extend(!0,u.viewConfigs.preview,{type:"navigation",view:"contentEditor",params:{id:t.id,target:"delivery",sc:"nms:delivery",act:"preview"}}),u.views.push("preview"));var a=!t.isModel;if(a){var f=getReportViewConf();u.viewConfigs.report=f,r&&NL.Utils.extend(!0,u.viewConfigs.report,{type:"navigation",view:"delivery",params:{id:t.id,view:"report",backview:o,__universe:NL.session.universe}}),u.views.push("report")}if(!n.standalone){var l={__universe:NL.session.universe};NL.isObject(i)&&(NL.Utils.extend(l,i.params),i=i.view),u.viewConfigs.backView={type:"navigation",view:i,help:nms_campaign.backToDeliveries(),icon:"nlui-icon-back-to-list",mode:"backToTheList",params:l},u.views.push("backView")}return NL.isEmpty(u.currentView)&&(r?u.currentView="content":s?u.currentView="report":u.currentView="general"),u}
;"use strict";NL.ns("NL.nms.WebApp"),NL.nms.WebApp.getJSONNavigationForWebApp=function(e,t,n,r){var i=e!==undefined&&e!==null,s=[];for(var o=0;o<t.pages.length;o++)s.push(t.pages[o]);s.sort(function(e,t){return e.x>t.x});var u={currentView:undefined,views:[],viewConfigs:{}};if(!r.isInConsole){if(s.length>0){var a;NL.Utils.each(s,function(e,t){a===undefined&&(a=t)}),u.viewConfigs.content={view:"contentEditor",icon:"nlui-icon-edit-content",label:xtk_core.monoContentLabel()},i?NL.Utils.extend(u.viewConfigs.content,{type:"code",checkSave:!0,confirmSave:!0,confirmSaveTargets:["preview"],onDisplay:function(){e.onDisplayPageFromViewBar(a,s.length===1)}}):NL.Utils.extend(u.viewConfigs.content,{type:"navigation",view:"contentEditor",params:{target:"webApp",sc:t.schema,id:t.id}}),NL.Utils.each(s,function(n,r){u.viewConfigs[r.name]={label:r.label},i?NL.Utils.extend(u.viewConfigs[r.name],{type:"code",checkSave:!0,confirmSave:!0,confirmSaveTargets:["preview"],onDisplay:function(){e.onDisplayPageFromViewBar(r,s.length===1),a=r}}):NL.Utils.extend(u.viewConfigs[r.name],{type:"navigation",view:"contentEditor",params:{id:t.id,target:"webApp",sc:"nms:webApp",hpn:r.name}})});if(s.length===1)u.views.push("content");else{var f={name:"content",menuPosition:"rightIcon",subViews:[]};for(var o=0;o<s.length;o++){var l=s[o];f.subViews.push(l.name)}u.views.push(f)}}s.length>0&&(u.viewConfigs.preview={label:xtk_core.preview(),icon:"nlui-icon-preview"},i?NL.Utils.extend(u.viewConfigs.preview,{type:"code",onDisplay:function(){e.setCurrentState("preview")}}):NL.Utils.extend(u.viewConfigs.preview,{type:"navigation",view:"contentEditor",params:{id:t.id,target:"webApp",sc:"nms:webApp",act:"preview"}}),u.views.push("preview"))}var c=!t.isModel&&(t.hasSurvey||t.hasPURL||t.hasLead);if(c){var h=getReportViewConf();u.viewConfigs.report=h,i&&NL.Utils.extend(u.viewConfigs.report,{type:"navigation",view:"webApp",params:{id:t.id,view:"report",__universe:NL.session.universe}}),u.views.push("report")}r.standalone||(u.viewConfigs.backView={type:"navigation",view:t.hasSocial?"socialWebAppOverview":"webAppOverview",help:t.hasSocial?nms_campaign.backToSocialWebApps():nms_campaign.backToWebApps(),icon:"nlui-icon-back-to-list",mode:"backToTheList",params:{__universe:NL.session.universe}},u.views.push("backView")),i?u.viewConfigs.general={label:nms_campaign.blockGeneral(),icon:"nlui-icon-webApp",type:"navigation",view:"webApp",params:{id:t.id}}:u.viewConfigs.general=getSwitchableViewConf({label:nms_campaign.blockGeneral(),icon:"nlui-icon-webApp"});var p=!1;for(var d=0;d<u.views.length&&!p;++d)u.views[d]!=="backView"&&(p=!0);p&&u.views.unshift("general");if(!i)u.currentView="general";else{if(NL.isEmpty(u.currentView))for(var o=0;o<s.length;o++){var l=s[o];if(l.name===n){s.length===1?u.currentView="content":u.currentView=l.name;break}}NL.isEmpty(u.currentView)&&(u.currentView="content")}return u}
;"use strict";function XtkMonitoringBuilder(e){}function providerFromType(e){return e.toUpperCase()=="POSTGRESQL"?"PostgreSQL":e}function ParseXtkImg(e){return e==null||e==""||e==undefined?"/xtk/img/defaultimg.png":"/"+e.toString().replace(/:/,"/img/")}function IsExists(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function displayElementLabel(e){var t=e.getAttribute("label");if(t==""||t==undefined)t=e.getAttribute("name");return t}function displayElementValue(e){var t=e.getAttribute("display");if(t==""||t==undefined)t=e.getAttribute("value");return t}function monitoringHtml(e,t){return(new XtkMonitoringBuilder).render(e,t)}XtkMonitoringBuilder.prototype.addTable=function(e){var t=document.createElement("table");return t.cellPadding="0",t.cellSpacing="0",e.appendChild(t),t.appendChild(document.createElement("tbody"))},XtkMonitoringBuilder.prototype.addImg=function(e,t,n,r){var i=e.appendChild(document.createElement("img"));return i.src=t,i.border=0,i.style.verticalAlign="top",n!=undefined&&(i.width=n),r!=undefined&&(i.height=r),e.appendChild(document.createTextNode("\u00a0")),i},XtkMonitoringBuilder.prototype.addLine=function(e,t,n){var r=e.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td"));i.width="150px",i.align="left",i.appendChild(document.createTextNode(t));var s=r.appendChild(document.createElement("td"));s.style.color="#486790",s.appendChild(document.createTextNode(n))},XtkMonitoringBuilder.prototype.addDeliverability=function(e,t,n){var r=findElement(e,"deliverability");if(r==null)return;var i=n.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td"));s.width="150px",s.align="left",s.vAlign="top",s.appendChild(document.createTextNode(xtk_dashboard.deliverabilityLabel()));var o=i.appendChild(document.createElement("td"));o.style.color="#486790";var u=!0,a=firstChildElement(r);while(a){u?u=!1:o.appendChild(document.createElement("br"));var f=o.appendChild(document.createElement("div"));$(f).nlLinkView({view:a.getAttribute("view"),url:NL.View.isConsole()?"":a.getAttribute("url"),label:a.getAttribute("label"),icon:a.getAttribute("img"),target:"_blank"}),a=nextSiblingElement(a)}},XtkMonitoringBuilder.prototype.addSmtpMonitoring=function(e,t,n){var r=n.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td"));i.width="150px",i.align="left",i.vAlign="top",i.appendChild(document.createTextNode(xtk_dashboard.smtpMonitoringLabel()));var s=r.appendChild(document.createElement("td"));s.style.color="#486790";if(this.isProcessusActive(e,"stat")){var o=s.appendChild(document.createElement("div"));$(o).nlLinkView({view:"smtpStatistics",label:xtk_dashboard.smtpStatisticsLink(),icon:"/xtk/img/report.png"}),s.appendChild(document.createElement("br"))}var u=s.appendChild(document.createElement("div"));$(u).nlLinkView({view:"emailError",label:xtk_dashboard.emailErrorLink(),icon:"/xtk/img/report.png"})},XtkMonitoringBuilder.prototype.addUrlLink=function(e,t,n,r){var i=e.appendChild(document.createElement("a"));return i.id=t,i.style.verticalAlign="middle",this.addImg(i,n),i.appendChild(document.createTextNode(r)),i},XtkMonitoringBuilder.prototype.addPackages=function(e,t){var n=findElement(e,"packages");n&&(n=findElement(n,"packages"));if(n==null)return;var r=t.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td"));i.width="150px",i.align="left",i.appendChild(document.createTextNode(xtk_dashboard.packageLabel())),r.appendChild(i),i=r.appendChild(document.createElement("td"));var s=this.addUrlLink(i,"urlPackages","/xtk/img/installedPackage.png",xtk_dashboard.displayLabel());s.style.color="#486790",s.href="javascript:showHideBlock('Packages')",i=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td")),i.colSpan="2";var o=i.appendChild(document.createElement("div"));o.id="Packages",o.className="blockChildProcess",o.style.display="none";var u=firstChildElement(n);while(u)NL.XTK.parseBoolean(u.getAttribute("enabled"),!1)&&!NL.XTK.parseBoolean(u.getAttribute("hidden"),!1)&&(this.addImg(o,ParseXtkImg(u.getAttribute("img")),16,16),o.appendChild(document.createTextNode(u.getAttribute("label"))),o.appendChild(document.createElement("br"))),u=nextSiblingElement(u)},XtkMonitoringBuilder.prototype.addIndicators=function(e,t){var n=findNodes(e,"indicators",!1);if(!n.length)return;var r=t.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td"));i.align="left",i.appendChild(document.createTextNode(xtk_dashboard.indicatorLabel())),r.appendChild(i),i=r.appendChild(document.createElement("td"));var s=this.addUrlLink(i,"urlIndicators","/xtk/img/parameters.png",xtk_dashboard.displayLabel());s.style.color="#486790",s.href="javascript:showHideBlock('Indicators')",i=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td")),i.colSpan="2";var o=i.appendChild(document.createElement("div"));o.id="Indicators",o.className="blockChildProcess",o.style.display="none";var u=this.addTable(o);for(var a=0;a<n.length;a++){var f=n[a],l=firstChildElement(f);while(l){var c=u.appendChild(document.createElement("tr")),h=c.appendChild(document.createElement("td"));h.colSpan="2",h.style.fontWeight="bold",NL.XTK.parseBoolean(l.getAttribute("alert"),!1)?(h.style.color="red",this.addImg(h,"/nl/img/down.gif")):this.addImg(h,"/nl/img/up.gif"),h.appendChild(document.createTextNode(displayElementLabel(l)));var p=firstChildElement(l);while(p)p.nodeName!="warning"&&p.nodeName!="alert"&&(c=u.appendChild(document.createElement("tr")),h=c.appendChild(document.createElement("td")),h.appendChild(document.createTextNode(displayElementLabel(p))),h=c.appendChild(document.createElement("td")),h.appendChild(document.createTextNode(displayElementValue(p)))),p=nextSiblingElement(p);l=nextSiblingElement(l)}}},XtkMonitoringBuilder.prototype.addProcessLine=function(e,t,n){var r=e.appendChild(document.createElement("tr"));r.appendChild(document.createElement("td")).appendChild(document.createTextNode(t)),r.appendChild(document.createElement("td")).appendChild(document.createTextNode(n))},XtkMonitoringBuilder.prototype.addProcessus=function(e,t){var n=t.appendChild(document.createElement("tr")),r=n.appendChild(document.createElement("td"));r.vAlign="top";var i=r.appendChild(document.createElement("span"));i.className="processHeader",i.appendChild(document.createTextNode(xtk_dashboard.processusLabel()));var s=[],o=0,u=firstChildElement(e);while(u){if(u.nodeName=="process"&&!IsExists(s,u.getAttribute("name"))){r=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));var a=this.addUrlLink(r,"urlProcess"+o,"/nl/img/up.gif",u.getAttribute("name"));a.href="javascript:showHideBlock('Process"+o+"')",s.push(u.getAttribute("name")),r=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));var f=r.appendChild(document.createElement("div"));f.id="Process"+o,f.style.display="none";var l=this.addTable(f);this.addProcessLine(l,xtk_dashboard.commandLabel(),u.getAttribute("command")),this.addProcessLine(l,xtk_dashboard.pidLabel(),u.getAttribute("pid")),this.addProcessLine(l,xtk_dashboard.threadIdLabel(),u.getAttribute("threadId")),this.addProcessLine(l,xtk_dashboard.pidParentLabel(),u.getAttribute("parentPid"));var c=NL.XTK.toString(u.getAttribute("startDate"));c!=""&&this.addProcessLine(l,xtk_dashboard.startDateLabel(),NL.View.dateTime(c,null));var h=NL.XTK.toString(u.getAttribute("lastAlive"));h!=""&&this.addProcessLine(l,xtk_dashboard.lastAliveLabel(),NL.View.dateTime(h,null));var p=NL.XTK.toString(u.getAttribute("restartDate"));p!=""&&this.addProcessLine(l,xtk_dashboard.restartDateLabel(),NL.View.dateTime(p,null)),r=l.appendChild(document.createElement("tr")).appendChild(document.createElement("td")),r.colSpan=2,$(r).nlLinkView({view:"displayLogs",params:{vars_proc:u.getAttribute("name"),__universe:NL.session.universe},label:xtk_dashboard.openLogs(),icon:"ui-icon-search"}),o++}u=nextSiblingElement(u)}o=0,u=firstChildElement(e);while(u)u.nodeName=="missingProcess"&&IsExists(s,u.getAttribute("name"))==0&&(r=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td")),this.addImg(r,"/nl/img/down.gif"),i=r.appendChild(document.createElement("span")),i.style.color="#B94A48",i.appendChild(document.createTextNode(u.getAttribute("name")+" "+xtk_dashboard.missingProcessLabel()))),u=nextSiblingElement(u)},XtkMonitoringBuilder.prototype.isProcessusActive=function(e,t){if(t){var n=findNodes(e,"process");for(var r=0;r<n.length;r++)if(n[r]){var i=n[r].getAttribute("name");if(NL.String.startsWith(i.toLowerCase(),t.toLowerCase()+"@"))return!0}}return!1},XtkMonitoringBuilder.prototype.getOption=function(e,t){if(t){var n=findNodes(e,"options/option");for(var r=0;r<n.length;r++)if(n[r]&&n[r].getAttribute("name")==t)return n[r].getAttribute("value")}return null},XtkMonitoringBuilder.prototype.workflowTooLong=function(e,t){var n=null,r=firstChildElement(e);while(r){if(r.nodeName=="workflow"){var i=findElement(r,"workflowTask");if(i&&NL.XTK.parseBoolean(i.getAttribute("tooLong"),!1)){if(n==null){var s=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));s.width="100%",s.colSpan=2;var o=s.appendChild(document.createElement("div"));o.className="processAlert",n=this.addTable(o)}var u=n.appendChild(document.createElement("tr"));s=u.appendChild(document.createElement("td")),s.appendChild(document.createTextNode(xtk_dashboard.processTooLogLabel())),s.appendChild(document.createTextNode("\u00a0")),s=u.appendChild(document.createElement("td")),$(s).nlLinkView({view:"workflow",label:r.getAttribute("name"),params:{id:r.getAttribute("id")},cssClass:"linkAlert",target:"_blank"})}}r=nextSiblingElement(r)}},XtkMonitoringBuilder.prototype.workflowInactive=function(e,t){var n=firstChildElement(e);while(n){if(n.nodeName=="workflow"&&NL.XTK.parseBoolean(n.getAttribute("production"),!1)&&n.getAttribute("status")!="1"){var r=t.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));r.width="100%",r.colSpan=2;var i=r.appendChild(document.createElement("div"));i.className="processAlert";var s=this.addTable(i),r=s.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));this.addImg(r,"/xtk/img/logwarn.png"),r.appendChild(document.createTextNode(xtk_dashboard.productionInactiveLabel()));break}n=nextSiblingElement(n)}},XtkMonitoringBuilder.prototype.render=function(e,t){var n=document.createElement("table");n.cellPadding="0",n.cellSpacing="0",n.width="100%";var r=n.appendChild(document.createElement("tbody")),i=r.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td"));s.width="50%",s.vAlign="top";var o=s.appendChild(document.createElement("div"));o.setAttribute("class","col"),o.style.marginTop=0,o.style.marginLeft=0,o.style.textAlign="left";var u=this.addTable(o),a=u.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));a.colSpan="2";var f=this.addTable(a),l=f.appendChild(document.createElement("tr"));a=l.appendChild(document.createElement("td")),a.vAlign="top",a.rowSpan=2,a.width="34px",this.addImg(a,"/xtk/img/adminLarge.png"),a=l.appendChild(document.createElement("td")),a.vAlign="top",a.align="left";var c=a.appendChild(document.createElement("h3"));c.style.fontSize="1.8em",c.style.verticalAlign="top",c.appendChild(document.createElement("strong")).appendChild(document.createTextNode(xtk_dashboard.exploitatTitle1Label())),c.appendChild(document.createTextNode(xtk_dashboard.exploitatTitle2Label()));var h=this.addImg(a,"/nl/img/gradientLine.png");h.style.display="block";var p=u.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));p.colSpan="2";var d=p.appendChild(document.createElement("div"));d.style.marginLeft="4px",u=this.addTable(d),this.addLine(u,xtk_dashboard.versionLabel(),e.getAttribute("productVersion")+" build "+e.getAttribute("buildNumber")),this.addLine(u,xtk_dashboard.instanceLabel(),getXPathValue(e,"option/@instance")),this.addLine(u,xtk_dashboard.serverLabel(),getXPathValue(e,"monitorHost/@name")),this.addLine(u,xtk_dashboard.dbcnxLabel(),providerFromType(getXPathValue(e,"dbcnx/@provider"))+" "+getXPathValue(e,"packages/@dbName")+"@"+getXPathValue(e,"dbcnx/@server")),this.addPackages(e,u),this.addIndicators(e,u);if(NL.session.hasMessageCenter){var v=u.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));v.colSpan="2";var m=v.appendChild(document.createElement("div")),g=m.appendChild(document.createElement("div"));m.style.marginTop="6px",$(g).nlLinkView({view:"allRtMonitor",label:xtk_dashboard.openEventMonitoring(),icon:"/nms/img/event.png"})}this.addDeliverability(e,t,u);var y=NL.XTK.toString(this.getOption(e,"NmsEmail_DefaultFromAddr"));y!=""&&this.addSmtpMonitoring(e,t,u);var b=i.appendChild(document.createElement("td"));b.width="50%",b.vAlign="top",o=b.appendChild(document.createElement("div")),o.setAttribute("class","col"),o.style.marginTop="6px",o.style.marginLeft=0,o.style.textAlign="left";var w=o.appendChild(document.createElement("table"));return w.cellPadding="1",w.cellSpacing="1",w.width="100%",f=w.appendChild(document.createElement("tbody")),this.addProcessus(e,f),this.workflowTooLong(e,r),this.workflowInactive(e,r),n}
;function XawNewsgroupList(e,t){this.strServerUrl=window.location.protocol+"//"+r_windowLocation,this.iId=e,this.strSchema=t,this.htmlParent=null,this.bHasHeader=!1,this.iLineIndex=-1}function XawFollowerList(e,t,n,r,i){XawListBase.call(this,e),this.controller.registerObserver("/ctx/@showHideFollowerList",this,this.load),this.entityId=t,this.strUrlLabel=n,this.strSchema=r,this.bLoaded=!1,this.bLoadImmediatly=!1,this.bHideHeader=!0,this.jsonXPathLinks=i}XawNewsgroupList.prototype=new XawListBase,XawNewsgroupList.prototype.render=function(e){if($(e).children().size()==0){var t=this.createTable(e,"block"),n=t.appendChild(document.createElement("tr")),r=n.appendChild(document.createElement("td"));r.colSpan=5;var i=r.appendChild(document.createElement("div"));i.className="newsgroupListTitle",i.appendChild(document.createTextNode(nms_campaign.newgroupListTitle())),this.htmlParent=t,this.iLineIndex=-1,this.load()}},XawNewsgroupList.prototype.load=function(){this.clear(!0);var e=new NL.QueryDef("nms:newsgroup","select");e.addSelectExpr("@id"),e.addSelectExpr("[@linked-id]"),e.addSelectExpr("@subject"),e.addSelectExpr("@created"),e.addSelectExpr("createdBy"),e.addSelectExpr("[@createdBy-id]"),e.addSelectExpr("message"),e.addSelectExpr("[document/@id]"),e.addSelectExpr("[document/@label]"),e.addSelectExpr("[document/@nature]",null,!0),e.addSelectExpr("[document/@userContentType]",null,!0),e.addSelectExpr("[document/@originalName]"),e.addSelectExpr("[document/@md5]"),e.addSelectExpr("[document/@contentType]"),e.addOrderByExpr("@created",!0);var t="[@"+this.strSchema.substring(this.strSchema.indexOf(":")+1)+"-id]";e.addWhereConditionExpr(t+"="+this.iId+" and "+t+"!=0"),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawNewsgroupList.prototype.onXtkQueryCompleted=function(e,t,n){if(n==undefined){this.clear();var r=!0,i=firstChildElement(t);while(i)parseInt(i.getAttribute("linked-id"),10)==0&&(this.displayNewsgroup(0,i),this.displayNewsgroupChildren(0,parseInt(i.getAttribute("id"),10),t),r=!1),i=nextSiblingElement(i);r&&this.displayTextLine(this.htmlParent,nms_campaign.noData(),2)}else alert(n.message)},XawNewsgroupList.prototype.displayNewsgroupChildren=function(e,t,n){var r=firstChildElement(n);while(r)parseInt(r.getAttribute("linked-id"),10)==t&&(this.bLastLine=nextSiblingElement(r)==null,this.displayNewsgroup(e+1,r),this.displayNewsgroupChildren(e+1,parseInt(r.getAttribute("id"),10),n)),r=nextSiblingElement(r)},XawNewsgroupList.prototype.displayNewsgroup=function(e,t){var n=this.htmlParent.appendChild(document.createElement("tr"));n.className=++this.iLineIndex%2?"listOddLine":"listEvenLine",this.trLine==null&&(this.trLine=n);var r=n.appendChild(document.createElement("td")),i=r.appendChild(document.createElement("div"));i.className="subject",i.style.marginLeft=e*20+"px",this.addImg(i,"/nms/img/people.png"),i.appendChild(document.createTextNode(t.getAttribute("subject"))),r=n.appendChild(document.createElement("td")),r.align="right";var s=r.appendChild(document.createElement("div")),o=s.appendChild(document.createElement("div"));o.id="detail";var u=findChildElement(t,"document");if(u!=null){var a={title:u.getAttribute("label"),icon:"/nms/img/attachment.png",target:"_blank"};isNeolaneConsole()?(a.view="document",a.params={id:u.getAttribute("id")}):a.url=NL.View.buildUrlResFile(u.getAttribute("md5"),u.getAttribute("originalName"),u.getAttribute("contentType")),$(o).nlLinkView(a)}var f=o.appendChild(document.createElement("span"));$(f).nlLinkView({view:"operator",label:NL.String.ellipsis(getXPathValue(t,"createdBy/@_cs"),25),params:{id:t.getAttribute("createdBy-id")},icon:"/xtk/img/operator.png",target:"_blank"});var f=o.appendChild(document.createElement("span"));f.style.color="#777777",f.style.marginRight="4px",f.appendChild(document.createTextNode("  "+NL.View.dateTime(t.getAttribute("created"),null))),n.onmouseover=new Function("overLine(this);"),n.onmouseout=new Function("overLine(this);");var l="newsgroupDetail"+t.getAttribute("id");n.onclick=new Function("selectLine(this, '"+l+"', false);");var c=this.htmlParent.appendChild(document.createElement("tr"));r=c.appendChild(document.createElement("td")),r.colSpan=2,r.className="detailContent";var i=r.appendChild(document.createElement("div"));i.id=l,i.style.borderColor="#B7C3DB",i.style.display="none";var h=i.appendChild(document.createElement("table"));h.width="100%",h.border=0,h.cellPadding=0,h.cellSpacing=0,h.className="roundContainer",h.style.backgroundImage="none";var p=h.appendChild(document.createElement("tbody")),d=p.appendChild(document.createElement("tr"));r=d.appendChild(document.createElement("td")),r.appendChild(document.createTextNode(" ")),r.className="top",d=p.appendChild(document.createElement("tr")),r=d.appendChild(document.createElement("td"));var v=r.appendChild(document.createElement("div")),m=v.appendChild(document.createElement("div"));m.style.marginTop="2px",m.style.marginLeft="2px";var g="roundContent";this.bLastLine&&(g="roundContentSingle"),this.tbody=this.createTable(r,g,2),d=this.tbody.appendChild(document.createElement("tr")),r=d.appendChild(document.createElement("td"));var i=r.appendChild(document.createElement("div"));i.style.margin="8px",i.style.whiteSpace="pre-line";var y=getXPathValue(t,"message");i.appendChild(document.createTextNode(y));var b={controller:controller,commandConfigs:{},commands:[]},w=nms_campaign.replyLabel()+"_"+t.getAttribute("id"),E=this;b.commandConfigs[w]={label:nms_campaign.replyLabel(),icon:"/nms/img/sendemail.png",flat:!0,mode:"white",command:function(e){var n=NL.UI.Actions();n.webAppDialog({name:"newsgroupEdition",modal:!0,onClose:{method:"refresh"},params:{entityId:E.iId,schema:E.strSchema,linkedId:t.getAttribute("id")}})}},b.commands.push(w),$(m).nlCmdBar(b)},XawFollowerList.prototype=new XawListBase,XawFollowerList.prototype.render=function(e){if($(e).children().size()==0){this.addImg(e,"/nms/img/rss.png"),this.addSpace(e);var t=e.appendChild(document.createElement("a"));t.className="entityLink",t.href="javascript:showHideBlock('followerDetail"+this.entityId+"');",t.appendChild(document.createTextNode(this.strUrlLabel)),t.controller=this.controller,t.onclick=function(e){this.controller.setValue("/ctx/@showHideFollowerList",!0,"showHideFollowerList")};var n=e.appendChild(document.createElement("div"));n.id="followerDetail"+this.entityId,n.style.marginTop="4px",n.style.display="none",this.htmlParent=this.createTable(n),XawListBase.prototype.render.call(this,n)}},XawFollowerList.prototype.load=function(){if(this.bLoaded||this.entityId==undefined)return;this.bLoaded=!0,this.displayTextLine(this.htmlParent,nms_campaign.loadingList());var e=new NL.QueryDef("nms:newsgroupFollower","select");this.clear(!0);var e=new NL.QueryDef("nms:newsgroupFollower","select");e.addSelectExpr("@id"),e.addSelectExpr("@date");for(var t in this.jsonXPathLinks)e.addSelectExpr(this.jsonXPathLinks[t].name),e.addSelectExpr("[@"+this.jsonXPathLinks[t].name+"-id]");e.addOrderByExpr("@date",!0),NL.XTK.toString(this.strSchema)!=""?e.addWhereConditionExpr("[@"+this.strSchema.substring(this.strSchema.indexOf(":")+1)+"-id] = "+this.entityId):e.addWhereConditionExpr("[@follower-id]="+this.entityId),e.execute(this.strServerUrl+"/nl/jsp/soaprouter.jsp","",this)},XawFollowerList.prototype.onXtkQueryCompleted=function(e,t,n){if(n==undefined){this.clear();var r=firstChildElement(t);while(r){var i=this.htmlParent.appendChild(document.createElement("tr")),s=i.appendChild(document.createElement("td"));for(var o in this.jsonXPathLinks)if(NL.XTK.parseInt(+r.getAttribute(this.jsonXPathLinks[o].name+"-id"),0)){var u="",a="";NL.XTK.toString(this.strSchema)!=""?(u=this.jsonXPathLinks[o].schema.substring(this.jsonXPathLinks[o].schema.indexOf(":")+1),a="/xtk/img/operator.png"):(u="newsgroupList",a="/nms/img/people.png");if(NL.XTK.toString(u)!==""){$(s).nlLinkView({view:u,params:{id:r.getAttribute(this.jsonXPathLinks[o].name+"-id"),schema:this.jsonXPathLinks[o].schema},icon:a,label:getXPathValue(r,this.jsonXPathLinks[o].name+"/@_cs")});var f=s.appendChild(document.createElement("span"));f.style.color="#777777",f.style.verticalAlign="bottom",f.appendChild(document.createTextNode(" ("+NL.View.dateTime(r.getAttribute("date"),null)+")"))}}r=nextSiblingElement(r)}}else alert(n.message)}
;function toggleDetail(e,t,n,r){var i=document.getElementById(e);if(!i||!i.style)return;var s=document.getElementById(t);if(i.style.display=="none"){i.style.display="block";while(s.firstChild)s.removeChild(s.firstChild);r=r||crm_embeddedPage.HIDE_DETAILS();var o=createToggleDetailLink(e,t,!0,n,r);s.appendChild(o)}else{i.style.display="none";while(s.firstChild)s.removeChild(s.firstChild);n=n||crm_embeddedPage.SHOW_DETAILS();var o=createToggleDetailLink(e,t,!1,n,r);s.appendChild(o)}}function createToggleDetailLink(e,t,n,r,i){var s=document.createElement("span"),o=s.appendChild(document.createElement("img")),u=s.appendChild(document.createElement("a")),a=u.appendChild(document.createElement("span"));if(!n){o.src="/crm/img/plus_blue16x16.png";var f=r||crm_embeddedPage.SHOW_DETAILS()}else{o.src="/crm/img/minus_blue16x16.png";var f=i||crm_embeddedPage.HIDE_DETAILS()}a.appendChild(document.createTextNode(f)),s.id=t,s.className="entityDetail",o.className="showHideBullet",r=r.replace(/'/g,"\\'"),i=i.replace(/'/g,"\\'");var l="javascript:toggleDetail('"+e+"', '"+t+"', '"+r+"', '"+i+"')";return u.href=l,u.className="entityDetail",s}function DisplayHeader(e,t){this.m_fstLine=e,this.m_vectors=t}function displayContactAndAccount(){var e=[].concat(g_vHeaderContact),t=[].concat(g_vHeaderAccount),n={left:e.shift(),right:t.shift()},r={left:e,right:t},i=new DisplayHeader(n,r);i.displayPair(document.getElementById("header-page"))}function createLeadStageBar(e,t){if(!t||!e)return;var n=[crm_embeddedPage.STAGE_UNQUALIFIED(),crm_embeddedPage.STAGE_MARKETINGQUALIFIED(),crm_embeddedPage.STAGE_OPPORTUNITY(),crm_embeddedPage.STAGE_WON()],r={unqualified:0,abandonned:0,rejected:0,marketingQualified:1,salesAccepted:2,opportunity:2,closedLost:3,closedWon:3};for(var i=0;i<4;i++){var s=e.appendChild(document.createElement("span"));r[t]==i?(s.className="selectedStage",s.appendChild(document.createTextNode(messageMap.leadStage[t].label))):(s.className="unselectedStage",s.appendChild(document.createTextNode(n[i])));switch(Number(i>=3)<<2|Number(r[t]==i+1)<<1|Number(r[t]==i)){case 0:var o=e.appendChild(document.createElement("img"));o.style.marginRight="0px",o.src="/crm/img/web/blueArrow.png";break;case 1:var o=e.appendChild(document.createElement("img"));o.style.marginRight="0px",o.src="/crm/img/web/yellowArrowToBlue.png";break;case 2:var o=e.appendChild(document.createElement("img"));o.style.marginRight="0px",o.src="/crm/img/web/blueArrowToYellow.png"}}}function createLeadAndOpportunity(e,t){if(!t||!e)return;var n=[{label:crm_embeddedPage.LAST_ACTIVITY_DATE(),value:t.lastActivityDate}],r={left:{img:t.ratingImg,value:t.cs},right:undefined},i={left:n.concat(t.vCustom),right:undefined};if(t.BANTScoreDesc.length+t.behavioralScoreDesc.length+t.demographicScoreDesc.length>0){var s=createToggleDetailLink("lastLeadScoreDetails_"+t.id,"btnLastLeadScoreDetail_"+t.id,!1,crm_embeddedPage.SHOW_DETAILS(),crm_embeddedPage.HIDE_DETAILS());i.left.push({label:crm_embeddedPage.TOTALSCORE(),value:t.score,link:s})}else i.left.push({label:crm_embeddedPage.TOTALSCORE(),value:t.score});var o=t.opportunityId&&g_mapOpportunities[t.opportunityId];o&&(r.right={value:o.name,img:"/crm/img/opportunity.png"},i.right=[{img:o.statusImg,label:o.statusLabel,value:null},{img:"/crm/img/banknote16x16.png",label:crm_embeddedPage.EXPECTEDREVENUE(),value:o.expectedRevenue}].concat(o.vCustom));var u=new DisplayHeader(r,i),a=u.displayPair(e);if(s){var f=a.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));f.colSpan=2;var l=f.appendChild(document.createElement("div"));l.className="logs",f.id="lastLeadScoreDetails_"+t.id,f.style.display="none";var c=l.appendChild(document.createElement("ul"));function h(e){var t=["BANTScore","behavioralScore","demographicScore"],n=[crm_embeddedPage.BANTSCORE(),crm_embeddedPage.BEHAVIORALSCORE(),crm_embeddedPage.DEMOGRAPHICSCORE()];for(var r=0;r<t.length;r++){var i=e[t[r]+"Desc"];if(i.length==0)continue;var s=c.appendChild(document.createElement("li")),o=n[r]+e[t[r]];s.appendChild(document.createTextNode(o));var u=s.appendChild(document.createElement("ul"));for(var a=0;a<i.length;a++)u.appendChild(document.createElement("li")).appendChild(document.createTextNode(i[a]))}}h(t)}}function displayLeadAndOpportunity(){function t(e,t){var n=0;return e.lastActivityComparison&&t.lastActivityComparison&&(n=e.lastActivityComparison-t.lastActivityComparison),n!=0?n:e.createdComparison-t.createdComparison}function n(t,n){n=n||e;var r=n.appendChild(document.createElement("div"));r.style.marginLeft="3px",createLeadStageBar(r,t.stage);var i=n.appendChild(document.createElement("div"));i.className="currentLeadStatus",createLeadAndOpportunity(i,t)}var e=document.getElementById("leadStage");if(!e)return;while(e.fistChild)e.removeChild(e.fistChild);var r,i=[];for(var s=0;s<g_data.length;s++){var o=g_data[s];o.logType=="outgoinglead"&&(g_specifiedLeadId&&g_specifiedLeadId==o.id?r=o:(o.stage=="marketingQualified"||o.stage=="salesAccepted"||o.stage=="opportunity")&&i.push(o))}i.sort(t),r=r||i.pop();if(!r){var u=e.appendChild(document.createElement("div"));u.style.paddingTop="13px";return}n(r);if(i.length>0){var a=e.appendChild(document.createElement("div"));a.className="hasOtherLeads";var f=createToggleDetailLink("otherActiveLeads","btnOtherActiveLeads",!1,crm_embeddedPage.OTHER_ACTIVE_LEADS()+i.length,crm_embeddedPage.OTHER_ACTIVE_LEADS()+i.length);a.appendChild(f);var l=e.appendChild(document.createElement("div"));l.id="otherActiveLeads",l.style.display="none",l.style.marginTop="4px";for(var s=0;s<i.length;s++)n(i[s],l)}}function displayMainListHeader(){var e=document.getElementById("main-list");if(!e)return undefined;while(e.firstChild)e.removeChild(e.firstChild);var t=e.appendChild(document.createElement("table"));t.className="pagebody";var n=t.appendChild(document.createElement("tbody")),r=n.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td")),s=i.appendChild(document.createElement("div"));s.className="mainDiv",s.style.display="block";var o=s.appendChild(document.createElement("table"));o.cellSpacing="0",o.cellPadding="2",o.className="listContent";var u=o.appendChild(document.createElement("thead"));u.className="listHeader";var a=u.appendChild(document.createElement("tr"));a.className="listContent";var f=a.appendChild(document.createElement("th"));f.className="listTitleClass",f.style.width="12em",f.appendChild(document.createTextNode(crm_embeddedPage.DATE()));var l=f.appendChild(document.createElement("a")),c=l.appendChild(document.createElement("img"));c.style.verticalAlign="bottom",c.src="/xtk/img/"+(sortOrder.iColumn==0?sortOrder.bDesc?"sort_down.gif":"sort_up.gif":"sort_default.gif"),l.href="javascript:sortColumn(0)";var h=a.appendChild(document.createElement("th"));h.className="listTitleClass",h.style.width="20em",h.appendChild(document.createTextNode(crm_embeddedPage.EVENT()));var p=h.appendChild(document.createElement("a")),d=p.appendChild(document.createElement("img"));d.style.verticalAlign="bottom",d.src="/xtk/img/"+(sortOrder.iColumn==1?sortOrder.bDesc?"sort_down.gif":"sort_up.gif":"sort_default.gif"),p.href="javascript:sortColumn(1)";var v=a.appendChild(document.createElement("th"));v.className="listTitleClass",v.appendChild(document.createTextNode(crm_embeddedPage.DETAIL()));var m=o.appendChild(document.createElement("tbody"));return m.id="list",m}function buildRowDetail(e,t,n,r){var i=document.createElement("div");i.style.whiteSpace="nowrap",e.appendChild(i),addCellLabel(i,t);if(r){var s=i.appendChild(document.createElement("img"));s.src=r,s.style.verticalAlign="middle",s.style.paddingRight="0.2em"}return typeof n=="string"||n instanceof String?i.appendChild(document.createTextNode(n)):i.appendChild(n),i}function addCellLabel(e,t){addImg(e,"/nl/img/arrow_gray.png");var n=e.appendChild(document.createElement("span"));n.className="cellTitle",n.appendChild(document.createTextNode(t))}function addImg(e,t){var n=e.appendChild(document.createElement("img"));n.src=t,n.className="singleImage",n.border=0}function addCellEntity(e,t,n,r,i,s){if(i){var o=e.appendChild(document.createElement("span"));o.className="cellTitle",o.appendChild(document.createTextNode(i+" "))}n&&addImg(e,n);var o=e.appendChild(document.createElement("span"));o.className="entityTitle";if(r&&!g_isSalesForceAccount){var u=o.appendChild(document.createElement("a"));u.appendChild(document.createTextNode(t)),u.href=r,u.className="entityDetail",r.indexOf("xtk://open")==-1&&(u.target="_blank")}else s?o.appendChild(s):o.appendChild(document.createTextNode(t))}function addCellLink(e,t,n,r){var i=e.appendChild(document.createElement("span"));n&&(i.className="cellTitle",i.appendChild(document.createTextNode(n+" "))),t&&!g_isSalesForceAccount?$(i).nlLinkView(t):r&&i.appendChild(r)}function createOperationNode(e,t,n){function s(e,t){var n=r.appendChild(document.createElement("div")),i=n.appendChild(document.createElement("strong"));i.appendChild(document.createTextNode(e)),n.appendChild(document.createTextNode(t))}if(!e||!t||!n)return;var r=document.createElement("div");r.id="operationDetails_"+t.id+"_"+n,r.style.display="none",r.style.marginLeft="5px";var i=createToggleDetailLink(r.id,"btn"+r.id,!1,t.label||crm_embeddedPage.OPERATION_LABEL(),t.label||crm_embeddedPage.OPERATION_LABEL());addCellLink(e,t.linkConf,crm_embeddedPage.OPERATION_LABEL(),i),e.appendChild(r);var o=[];t.start&&t.end&&s(crm_embeddedPage.TIMESPAN(),t.start+"\u00a0-\u00a0"+t.end),t.nature&&s(crm_embeddedPage.OPERATION_NATURE(),t.nature),messageMap.operationStatus[t.status]&&s(crm_embeddedPage.STATE(),messageMap.operationStatus[t.status].label),messageMap.operationType[t.operationType]&&s(crm_embeddedPage.OPERATIONTYPE(),messageMap.operationType[t.operationType].label),messageMap.messageType[t.messageType]&&s(crm_embeddedPage.CHANNEL(),messageMap.messageType[t.messageType].label),t.owner&&s(crm_embeddedPage.OPERATION_OWNER(),t.owner)}function createDeliveryNode(e,t,n){var r=messageMap.messageType[n.messageType].label;if(!e||!t)return r;addCellEntity(e,messageMap.messageType[n.messageType].label,messageMap.messageType[n.messageType].img),addCellLink(t,n.linkConf,crm_embeddedPage.DELIVERY_LABEL());var i=t.appendChild(document.createElement("div")),s=messageMap.status[n.status].label;if(n.status==2||n.status==0)s+=" ("+messageMap.failureReason[n.failureReason].label+")";buildRowDetail(i,crm_embeddedPage.STATUS_LABEL(),s);if(n.status!=6&&n.status!=7&&n.status!=8){var o=0,u=t.appendChild(document.createElement("div"));n.logType=="delivery"?u.id=n.logType+"_"+n.deliveryId:u.id=n.logType+"_"+n.id,u.className="logs",u.style.display="none";var a=u.appendChild(document.createElement("table")).appendChild(document.createElement("tbody"));for(var f=0;f<n.tracking.length;f++){var l=n.tracking[f],c=a.appendChild(document.createElement("tr")),h=c.appendChild(document.createElement("td"));h.appendChild(document.createTextNode(l.logDate)),h.className="trackingLogDate";var p=c.appendChild(document.createElement("td"));p.appendChild(document.createTextNode(messageMap.urlType[l.type].label)),p.className="trackingLogType";var d=c.appendChild(document.createElement("td"));switch(l.type){case 6:case 3:case 4:case 2:case 0:break;case 1:o++;case 5:p.appendChild(document.createTextNode("\u00a0:\u00a0"));var v=d.appendChild(document.createElement("a"));v.appendChild(document.createTextNode(l.label)),v.target="_blank"}}if(n.messageType==0){var m=buildRowDetail(i,crm_embeddedPage.OPEN_LABEL(),n.tracking.length>0?crm_embeddedPage.YES():crm_embeddedPage.NO());if(o>0)var m=buildRowDetail(i,crm_embeddedPage.CLICK_EMAIL(),crm_embeddedPage.YES()+" ("+o+")")}var g=a.appendChild(document.createElement("tr")),y=g.appendChild(document.createElement("td"));y.className="trackingLogDate";var b=g.appendChild(document.createElement("td"));b.className="trackingLogType";var w=g.appendChild(document.createElement("td"));y.appendChild(document.createTextNode(n.startDate));if(n.status==1){var E=n.messageType==1?"SMS":messageMap.messageType[n.messageType].label;b.appendChild(document.createTextNode(E)),w.appendChild(document.createTextNode(n.address))}var S=createToggleDetailLink(u.id,"btn"+u.id,!1,crm_embeddedPage.SHOW_LOGS(),crm_embeddedPage.SHOW_LOGS());m?(m.appendChild(document.createTextNode("\u00a0-\u00a0")),m.appendChild(S)):(i.appendChild(document.createTextNode("\u00a0")),i.appendChild(S))}return n.operation&&n.operation.id&&createOperationNode(t,n.operation,"delivery_"+n.id),r}function createActivityNode(e,t,n){function i(e,i,s,o){if(!s)return;if(e)var u=t;else{r=r||t.appendChild(document.createElement("div")),r.id="leadDetails_"+n.id,r.style.display="none",r.style.marginLeft="5px";var u=r}var a=u.appendChild(document.createElement("div"));a.className="singleLine";if(o=="a"){var f=a.appendChild(document.createElement("a"));f.href=s,f.className="entityDetail",f.appendChild(document.createTextNode(i))}else i&&addCellLabel(a,i),a.appendChild(document.createTextNode(s))}var r;if(e){var s={view:"incomingLead",label:n.typeLabel,enableInWeb:!1,icon:n.type.img,params:{id:n.id}};addCellLink(e,s)}if(t){if(n.type.value=="data"&&Number(n.fileImportId)!=0){var s={view:"group",label:n.fileImportLabel,params:{id:n.fileImportId}};addCellLink(t.appendChild(document.createElement("div")),s,crm_embeddedPage.LIST_LABEL())}var o=t.appendChild(document.createElement("div")),u=document.createElement("div");o.appendChild(u);switch(n.type.value){case"data":i(!1,crm_embeddedPage.FIRSTNAME(),n.firstName),i(!1,crm_embeddedPage.LASTNAME(),n.lastName),i(!1,crm_embeddedPage.EMAIL_ADDRESS(),n.email),i(!1,crm_embeddedPage.COMPANY(),n.companyName),i(!1,crm_embeddedPage.BUSINESSPHONE(),n.businessPhone);break;case"event":i(!1,crm_embeddedPage.PARTICIPATIONDATE(),n.participationDate),i(!1,crm_embeddedPage.PARTICIPATIONDURATION(),n.participationDuration),n.connectionOnTime!=undefined&&i(!1,crm_embeddedPage.CONNECTIONONTIME(),n.connectionOnTime?crm_embeddedPage.YES():crm_embeddedPage.NO()),n.usedChat!==undefined&&i(!1,crm_embeddedPage.USEDCHAT(),n.usedChat?crm_embeddedPage.YES():crm_embeddedPage.NO()),i(!1,crm_embeddedPage.QUESTIONSASKED(),n.questionsAsked),i(!1,crm_embeddedPage.LANDING_PAGE(),n.landingPage);break;case"docDownload":i(!1,crm_embeddedPage.LANDING_PAGE(),n.landingPage),i(!1,crm_embeddedPage.URL(),n.url,"a");break;case"subscription":case"unsubscription":n.landingPage&&i(!0,crm_embeddedPage.LANDING_PAGE(),n.landingPage);break;case"landingPage":break;case"acceptance":break;case"conversion":var a=g_mapOpportunities[n.opportunityId],f=g_mapSalesAccount[n.salesAccountId];f&&i(!1,crm_embeddedPage.ACCOUNT_NAME(),f.name),a&&(i(!1,crm_embeddedPage.OPPORTUNITY_NAME(),a.name),i(!1,crm_embeddedPage.EXPECTEDREVENUE(),a.expectedRevenue),a.status&&i(!1,crm_embeddedPage.OPPORTUNITY_STATUS(),messageMap.opportunityStatus[a.status].label));break;case"rejection":break;case"delete":case"abandon":i(!0,crm_embeddedPage.ABANDONREASON(),n.abandonReason);break;case"bant":i(!0,crm_embeddedPage.BUDGET(),n.budget),i(!0,crm_embeddedPage.AUTHORITY(),n.authority),i(!0,crm_embeddedPage.NEED(),n.need),i(!0,crm_embeddedPage.TIMEFRAME(),n.timeframe)}if(n.optoutOptin instanceof Array)for(var l=0;l<n.optoutOptin.length;l++)i(!0,n.optoutOptin[l].label,n.optoutOptin[l].value);if(r){if(n.summary)var c=createToggleDetailLink("leadDetails_"+n.id,"btnLeadDetail_"+n.id,!1,n.summary,n.summary);else var c=createToggleDetailLink("leadDetails_"+n.id,"btnLeadDetail_"+n.id,!1,crm_embeddedPage.SHOW_DETAILS(),crm_embeddedPage.HIDE_DETAILS());u.appendChild(c)}else n.summary&&u.appendChild(document.createTextNode(n.summary));n.type.value!="data"&&n.operationId&&g_mapOperation[n.operationId]&&createOperationNode(t.appendChild(document.createElement("div")),g_mapOperation[n.operationId],"lead_"+n.id)}return n.typeLabel}function createSurveyNode(e,t,n){if(e){var r=e.appendChild(document.createElement("img"));r.src="/nms/img/survey.png",r.style.marginRight="2px",r.style.verticalAlign="top",e.appendChild(document.createTextNode("Survey"))}if(t){var i=t.appendChild(document.createElement("a"));i.style.color="black",i.href=n.url,i.target="_blank";var s=i.appendChild(document.createElement("strong"));s.appendChild(document.createTextNode(n.label))}return"Survey"}function createSubscriptionNode(e,t,n){var r=messageMap.action[n.action].label;if(e){var i=e.appendChild(document.createElement("img"));i.src="/nms/img/subscribe.png",i.style.marginRight="2px",i.style.verticalAlign="top",e.appendChild(document.createTextNode(r))}if(t){var s=t.appendChild(document.createElement("strong"));s.appendChild(document.createTextNode(n.service))}return r}function createLeadNode(e,t,n){var r;if(n.crmSendingDate){r=crm_embeddedPage.OUTGOINGLEAD();if(e){var i={view:"outgoingLead",label:crm_embeddedPage.OUTGOINGLEAD(),icon:"/crm/img/outgoingLead.png",params:{id:n.id}};addCellLink(e,i)}if(t){var s=t.appendChild(document.createElement("div")),o="";if(n.destination){o=n.destination;var u=messageMap.leadDestination[n.destination];u&&u.label&&(o=u.label)}o?s.appendChild(document.createTextNode(crm_embeddedPage.LEAD_SENT_TO_CRM_1(o))):s.appendChild(document.createTextNode(crm_embeddedPage.LEAD_SENT_TO_CRM()))}}return r}function createOpportunityNode(e,t,n){var r=g_mapOpportunities[n.id];if(r&&r.status=="closedWon")var i=crm_embeddedPage.OPPORTUNITY_WON(),s="/crm/img/opportunityWon.png";else{if(!r||r.status!="closedLost")return"";var i=crm_embeddedPage.OPPORTUNITY_LOST(),s="/crm/img/opportunityLost.png"}e&&addCellEntity(e,i,s,undefined);if(t){var o=t.appendChild(document.createElement("div"));o.appendChild(document.createTextNode(r.name)),o.appendChild(document.createTextNode("\u00a0"));var o=t.appendChild(document.createElement("div"));o.appendChild(document.createTextNode(crm_embeddedPage.EXPECTEDREVENUE())),o.appendChild(document.createTextNode(r.expectedRevenue))}return i}function createAnonymousTrackingNode(e,t,n){var r=crm_embeddedPage.WEB_TRACKING();if(e){var i=e.appendChild(document.createElement("img"));i.style.marginRight="2px",i.style.verticalAlign="top",i.src="/nms/img/tracking.png",e.appendChild(document.createTextNode(r))}if(t){var s=t.appendChild(document.createElement("div"));s.appendChild(document.createTextNode(n.urlLabel)),n.userAgent&&s.appendChild(document.createTextNode("\u00a0("+n.userAgent+")"))}return r}function displayParticularItem(e){var t={delivery:createDeliveryNode,notification:createDeliveryNode,survey:createSurveyNode,subscription:createSubscriptionNode,incominglead:createActivityNode,outgoinglead:createLeadNode,opportunity:createOpportunityNode,anonymousTracking:createAnonymousTrackingNode},n=[].concat(g_data);sortOrder.iColumn>=0&&n.sort(function(n,r){if(sortOrder.iColumn!=1)var i=n.comparison-r.comparison;else var i=t[n.logType](undefined,undefined,n).localeCompare(t[r.logType](undefined,undefined,r));return sortOrder.bDesc?-i:i});var r=0;for(var i=0;i<n.length;i++){var s=document.createElement("tr"),o=s.appendChild(document.createElement("td")),u=s.appendChild(document.createElement("td")),a=s.appendChild(document.createElement("td"));s.className=i%2?"listOddLine":"listEvenLine",o.className="listCellClassFirst",o.style.verticalAlign="top",o.style.width="30%",o.appendChild(document.createElement("span")).appendChild(document.createTextNode(n[i].date)),u.style.verticalAlign="top",u.className="cellClassEnum",u.style.width="30%",u.style.verticalAlignment="middle",a.className="cellClassEnum",a.style.width="60%",t[n[i].logType](u,a,n[i])&&(r++,e.appendChild(s))}if(r==0){var f=e.appendChild(document.createElement("tr")).appendChild(document.createElement("td"));f.appendChild(document.createTextNode(crm_embeddedPage.NO_DATA()))}}var messageMap={mobileMsgType:{0:{label:"SMS"},1:{label:"WAP Push"},2:{label:"MMS"}},action:{0:{label:crm_embeddedPage.UNSUBSCRIPTION()},1:{label:crm_embeddedPage.SUBSCRIPTION()}}},sortOrder={iColumn:-1,bDesc:!0};DisplayHeader.prototype.addItem=function(e,t){var n;switch(typeof t.value){case"undefined":break;case"boolean":n=t.value?crm_embeddedPage.YES():crm_embeddedPage.NO();break;case"object":t.value===null?n=undefined:n=t.value;break;default:n=t.value}var r=e.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("td")).appendChild(document.createElement("span"));i.className="blockTitle";var s=r.appendChild(document.createElement("td")).appendChild(document.createElement("span"));if(t.img){var o=document.createElement("img");o.setAttribute("style","vertical-align: middle;margin-right: 2px"),o.src=t.img,i.appendChild(o)}t.label&&i.appendChild(document.createTextNode(t.label)),n&&s.appendChild(document.createTextNode(n)),t.secondaryValue&&s.appendChild(document.createTextNode("("+t.secondaryValue+")")),t.link&&s.appendChild(t.link)},DisplayHeader.prototype.displayPair=function(e){if(!e)return undefined;while(e.firstChild)e.removeChild(e.firstChild);var t=e.appendChild(document.createElement("table"));t.className="mainHeader",t.cellSpacing="3",t.cellPadding="0";var n=t.appendChild(document.createElement("tbody")),r={left:{index:0,vector:this.m_vectors.left||[]},right:{index:0,vector:this.m_vectors.right||[]}},i=n.appendChild(document.createElement("tr"));for(var s in r){if(!this.m_fstLine[s]&&!r[s].vector.length)continue;r[s].mainTd=i.appendChild(document.createElement("td")),r[s].mainTd.className="block",r[s].mainTd.width="50%",r[s].mainTd.vAlign="top",r[s].table=r[s].mainTd.appendChild(document.createElement("table")),r[s].table.cellPadding="0",r[s].table.cellSpacing="2",r[s].thHead=r[s].table.appendChild(document.createElement("thead")).appendChild(document.createElement("tr")),r[s].fstLine=r[s].thHead.appendChild(document.createElement("th")),r[s].tbody=r[s].table.appendChild(document.createElement("tbody"))}for(var s in this.m_fstLine){if(!this.m_fstLine[s])continue;r[s].fstLine.colSpan=2;if(this.m_fstLine[s].img){var o=document.createElement("img");o.style.marginRight="2px",o.style.verticalAlign="top",o.src=this.m_fstLine[s].img,r[s].fstLine.appendChild(o)}this.m_fstLine[s].label&&r[s].fstLine.appendChild(document.createTextNode(this.m_fstLine[s].label)),this.m_fstLine[s].value&&r[s].fstLine.appendChild(document.createTextNode(this.m_fstLine[s].value))}do{var u=!1,a;for(var s in r){if(!r[s].vector.length)continue;a=undefined;for(var f=r[s].index,l=r[s].vector;a==undefined&&f<l.length;f++)l[f]&&(l[f].value!=undefined||l[f].value!="")&&(a=l[f]);r[s].index=f,a!=undefined&&a.value!=""&&(this.addItem(r[s].tbody,a),u=!0)}}while(u);return n}
;"use strict";function FlashChart(e,t,n,r){g_xtkGraph[e]=this,this.bNeedSync=!1,this.iSyncFailures=0,this.strName=e,this.strConfig=null,this.strData=null,this.aGaugeProps={},this.iWidth=t,this.iHeight=n,this.bStarted=!1,this.inlineStyleValue=r?r.inlineStyleValue:null}function RetrieveChartConfigAndData(e){var t=FlashChart.prototype.findByName(e);if(t&&t.strConfig!=null){t.bNeedSync=!1;var n={status:"ok",config:t.strConfig,data:t.strData};return n}return{status:"notfound"}}var g_xtkGraph=[];FlashChart.prototype.getSwfVer=function(){var e="";if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var t=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",n=navigator.plugins["Shockwave Flash"+t].description,r=n.split(" "),i=r[2].split("."),s=i[0],o=i[1],u=r[3];u==""&&(u=r[4]),u[0]=="d"?u=u.substring(1):u[0]=="r"&&(u=u.substring(1),u.indexOf("d")>0&&(u=u.substring(0,u.indexOf("d"))));var e=s+"."+o+"."+u}}else if(navigator.appVersion.indexOf("MSIE")!=-1&&navigator.appVersion.toLowerCase().indexOf("win")!=-1&&navigator.userAgent.indexOf("Opera")==-1){var a="",f;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),a=f.GetVariable("$version")}catch(l){}if(!a)try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a="WIN 6,0,21,0",f.AllowScriptAccess="always",a=f.GetVariable("$version")}catch(l){}e=a.replace(/,/g,"."),e.indexOf(" ")&&(e=e.substr(e.indexOf(" ")+1))}return e==""&&(e="8"),e},FlashChart.prototype.runContent=function(){var e=arguments,t={},n={},r={};for(var i=0;i<e.length;i+=2){var s=e[i].toLowerCase();switch(s){case"classid":break;case"pluginspage":t[e[i]]=e[i+1];break;case"src":case"movie":t.src=e[i+1],n.movie=e[i+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":r[e[i]]=e[i+1];break;case"id":case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":t[e[i]]=r[e[i]]=e[i+1];break;default:t[e[i]]=n[e[i]]=e[i+1]}}r.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",t.type="application/x-shockwave-flash";var o="";if(navigator.appVersion.indexOf("MSIE")!=-1&&navigator.appVersion.toLowerCase().indexOf("win")!=-1&&navigator.userAgent.indexOf("Opera")==-1){o+="<object ";for(var i in r)o+=i+'="'+r[i]+'" ';o+=">";for(var i in n)o+='<param name="'+i+'" value="'+n[i]+'"/> ';o+="</object>"}else{o+="<embed ";for(var i in t)o+=i+'="'+t[i]+'" ';o+="> </embed>"}document.write(o)},FlashChart.prototype.setConfigAndData=function(e,t){this.strConfig=e,this.strData=t;if(!this.bStarted){this.bStarted=!0;var n="/xtk/img/report/chartview",r=this.getSwfVer(),i=0;r.indexOf(".")>-1&&(i=Math.round(r.substring(0,r.indexOf(".")))),i>8&&(i=8),n+=i,this.iMajor=i;var s="vertical-align: middle;";typeof this.inlineStyleValue=="string"&&(s+=this.inlineStyleValue),this.runContent("src",n+".swf?id="+this.strName,"width",this.iWidth,"height",this.iHeight,"align","middle","style",s,"id",this.strName,"quality","high","bgcolor","#FFFFFF","name",this.strName,"allowScriptAccess","sameDomain","type","application/x-shockwave-flash","codebase","https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab","pluginspage","https://www.adobe.com/go/getflashplayer","wmode","transparent")}this.bNeedSync=!0},FlashChart.prototype.setGaugeProperty=function(e,t){this.aGaugeProps[e]=t;var n="<data ";for(var r in this.aGaugeProps)n+=r+'="'+this.aGaugeProps[r]+'"';n+="/>",this.strData!=n&&(this.strData=n,this.bNeedSync=!0,this.sync())},FlashChart.prototype.sync=function(e){var t=null;typeof e=="undefined"&&(e=document),document.getElementById?t=e.getElementById(this.strName):t=e[this.strName],window[this.strName]=t;var n=!1;try{this.iMajor<9?(t.SetVariable("_root.m_strXmlConfig",this.strConfig),t.SetVariable("_root.m_strXmlData",this.strData),t.SetVariable("_root.m_bReload","1"),t.GetVariable("_root.m_bReload")!=null?this.bNeedSync=!1:n=!0):t.SetConfigAndData(this.strConfig,this.strData)}catch(r){n=!0}this.iSyncFailures>=5&&(n=!1),n&&(this.iSyncFailures++,setTimeout("g_xtkGraph['"+this.strName+"']._sync();",(this.iSyncFailures-1)*50))},FlashChart.prototype._sync=function(e){if(this.bNeedSync==0)return!0;this.sync(e)},FlashChart.prototype.findByName=function(e){return g_xtkGraph[e]}
;"use strict";function getIndex(e,t,n){var r=!1,i;for(i=0;i<e.length&&!r;i++)r=e[i][t]==n;return r?i-1:-1}function removeFromIndex(e,t){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}NL.ns("NL"),NL.PivotTable=function(e,t,n){this.iUID=0,this.parameters=e.parameters,this.data=e.data,this.strId=t.id,this.htmlParent=t,this.htmlParent.pivotTable=this,this.aAggregatedValues=[],this.aComputedAggregate=[],this.iStatCount=this.parameters.stats.length,this.iHiddenStatCount=0,typeof this.parameters.hiddenStats!="undefined"&&(this.iHiddenStatCount=this.parameters.hiddenStats.length),this.hasSubPercent=getIndex(this.parameters.stats,"aggFunction","percentageRow")>-1||getIndex(this.parameters.stats,"aggFunction","percentageColumn")>-1,this.inlineStyleValue=n?n.inlineStyleValue:null},NL.PivotTable.COLUMN="column",NL.PivotTable.ROW="row",NL.PivotTable.STATS="stats",NL.PivotTable.ID_PART_ORIENTATION=1,NL.PivotTable.ID_PART_VARIABLE=2,NL.PivotTable.INT_FLD_SEP="",NL.PivotTable.ID_FLD_SEP=".",NL.PivotTable.internalObjSort=function(e,t){return NL.PivotTable.internalSort(e.value,t.value)},NL.PivotTable.internalObjSortDesc=function(e,t){return NL.PivotTable.internalSortDesc(e.value,t.value)},NL.PivotTable.internalSort=function(e,t){return e<t?-1:e>t?1:0},NL.PivotTable.internalSortDesc=function(e,t){return e<t?1:e>t?-1:0},NL.PivotTable.collapse=function(e){var t=document.getElementById(e.split(".")[0]).pivotTable,n=document.getElementById(e);n.collapsed?t.uncollapse(n):t.collapse(n)},NL.PivotTable.displayMenu=function(e,t){var n=t.id.split("."),r=document.getElementById(n[0]).pivotTable,i=n[1],s=n[2],o=document.getElementById(r.strId+"_menu");o.caller=t,i!=NL.PivotTable.STATS?o.firstChild.firstChild.nodeValue=r.parameters[i][s].label:o.firstChild.firstChild.nodeValue=xtk_formbase.statistics();var u=o.firstChild.nextSibling.nextSibling;i==NL.PivotTable.COLUMN&&s>0?u.style.display="":u.style.display="none",u=u.nextSibling,i==NL.PivotTable.ROW&&s>0?u.style.display="":u.style.display="none",u=u.nextSibling,i==NL.PivotTable.COLUMN&&s<r.parameters.column.length-1?u.style.display="":u.style.display="none",u=u.nextSibling,i==NL.PivotTable.ROW&&s<r.parameters.row.length-1?u.style.display="":u.style.display="none",u=u.nextSibling,u=u.nextSibling,i!=NL.PivotTable.STATS?u.style.display="":u.style.display="none",u=u.nextSibling,i!=NL.PivotTable.STATS?u.style.display="":u.style.display="none";var a=NewEvent(e),f,l,c;document.documentElement.scrollLeft?l=document.documentElement.scrollLeft:l=document.body.scrollLeft,document.documentElement.scrollTop?c=document.documentElement.scrollTop:c=document.body.scrollTop,f={X:a.data.clientX+l,Y:a.data.clientY+c},o.style.display="block",document.body.clientWidth-f.X<o.offsetWidth?o.style.left=f.X-o.offsetWidth+"px":o.style.left=f.X+"px",document.body.clientHeight-f.Y<o.offsetHeight?o.style.top=f.Y-o.offsetHeight+"px":o.style.top=f.Y+"px"},NL.PivotTable.moveVariable=function(e,t){e.parentNode.style.display="none";var n=e.parentNode.caller.id.split("."),r=document.getElementById(n[0]).pivotTable;r.moveVariable(n[NL.PivotTable.ID_PART_ORIENTATION],n[NL.PivotTable.ID_PART_VARIABLE]-0,t)},NL.PivotTable.getColor=function(e){if(!isNaN(e)){var t=255-Math.floor(255*e);return"rgb(255, "+t+", "+t+" )"}return""},NL.PivotTable.sort=function(e,t){e.parentNode.style.display="none";var n=e.parentNode.caller.id.split("."),r=document.getElementById(n[0]).pivotTable;r.sort(n[NL.PivotTable.ID_PART_ORIENTATION],n[NL.PivotTable.ID_PART_VARIABLE]-0,t)},NL.PivotTable.prototype.init=function(){this.updateTotal();for(var e=0;e<this.parameters.row.length;e++){var t=this.parameters.row[e];this.addVariableInformation(t)}for(var e=0;e<this.parameters.column.length;e++){var n=this.parameters.column[e];this.addVariableInformation(n)}this.aAvgInfo=[];var r=this.iStatCount+this.iHiddenStatCount,i=[];for(var e=0;e<r;e++){var s;e<this.iStatCount?s=this.parameters.stats[e]:s=this.parameters.hiddenStats[e-this.iStatCount],i[s.alias]=s.position,s.aggFunction=="avg"&&(typeof s.weightPosition!="number"&&(s.weightPosition=this.parameters.countPosition),this.aAvgInfo.push({position:s.position,weightPosition:s.weightPosition}))}this.bCountDisplayed=getIndex(this.parameters.stats,"position",this.parameters.countPosition)>-1,!this.bCountDisplayed&&typeof this.parameters.hiddenStats!="undefined"&&(this.bCountDisplayed=getIndex(this.parameters.hiddenStats,"position",this.parameters.countPosition)>-1);for(var e=0;e<r;e++){var s;e<this.iStatCount?s=this.parameters.stats[e]:s=this.parameters.hiddenStats[e-this.iStatCount],s.aggFunction=="userDefined"&&(s.jsFunction=this.buildFunction(s.userFunction,i)),s.oFormatOption={pattern:"#,###"};var o=0;if(typeof s.decimalPlaces=="number")o=s.decimalPlaces;else if(s.aggFunction=="avg"||s.aggFunction.indexOf("percentage")==0)o=2;if(o>0){s.oFormatOption.pattern+=".";for(var u=0;u<o;u++)s.oFormatOption.pattern+="0"}if(s.aggFunction.indexOf("percentage")==0||s.format=="percentage")s.oFormatOption.pattern+=" \u00a4",s.oFormatOption.symbol="%"}this.clean(!0)},NL.PivotTable.prototype.clean=function(e){e!=1&&this.htmlParent.removeChild(findElement(this.htmlParent,"TABLE")),this.aAggregatedValues=[],this.strColumnHeaderIdRoot=null,this.aComputedAggregate=[],this.aStatCells=null,this.iMaxDisplayedCol=0,this.iMaxDisplayedRow=0,this.displayedCoord={row:[],column:[]},this.headers={row:[],column:[]};var t=null,n=null;if(this.parameters.row.length>0){for(var r in this.parameters.row[0].aLabels)this.parameters.row[0].aLabels.hasOwnProperty(r)&&this.displayedCoord.row.push(String(this.getVariableValue(this.parameters.row[0],r)));t=[this.parameters.row[0].indexInData]}if(this.parameters.column.length>0){for(var r in this.parameters.column[0].aLabels)this.parameters.column[0].aLabels.hasOwnProperty(r)&&this.displayedCoord.column.push(String(this.getVariableValue(this.parameters.column[0],r)));n=[this.parameters.column[0].indexInData]}this.aggregate(n,t),this.aggregate(n,null),this.aggregate(null,t),this.aggregate(),this.parameters.column[0]==null&&(this.parameters.statOrientation=NL.PivotTable.COLUMN),this.parameters.row[0]==null&&(this.parameters.statOrientation=NL.PivotTable.ROW)},NL.PivotTable.prototype.addVariableInformation=function(e){if(e.type=="enum"){e.iValueCount=e.enumValue.length,e.aLabels=[],e.aEnumLookup=[];for(var t=0;t<e.iValueCount;t++)e.aEnumLookup[e.enumLabel[t]]=e.enumValue[t],e.aLabels[e.enumValue[t]]=e.enumLabel[t]}else if(e.type=="date"||e.type=="datetime"||e.type=="year"||e.type=="month"||e.type=="dateToTime"||e.type=="quarter"){e.iValueCount=0,e.aLabels=[];for(var n=0;n<this.data.length;n++){var r=this.data[n].v[e.indexInData];if(getIndex(e.aLabels,"value",r)==-1){e.iValueCount++;var i={value:r};if(r!=""){var s=NL.XTK.parseDateTime(r,null);e.type=="year"?i.label=NL.View.dateTime(s,null,"%4Y"):e.type=="month"?i.label=NL.View.dateTime(s,null,"%B %4Y"):e.type=="quarter"?i.label=NL.View.dateTime(s,null,"%Q %4Y"):e.type=="dateToTime"?i.label=NL.View.dateTime(s,null,NL.Locale.getFormat("time",!1)):e.type=="date"?i.label=NL.View.dateTime(s,null,NL.Locale.getFormat("shortDate",!1)):i.label=NL.View.dateTime(s,null)}else i.label="";e.aLabels.push(i)}}}else{var o=[];for(var n=0;n<this.data.length;n++){var u=String(this.data[n].v[e.indexInData]);typeof u=="undefined"&&(u=""),NL.Utils.indexOf(u,o)===-1&&o.push(u)}e.aLabels=o,e.iValueCount=o.length}},NL.PivotTable.prototype.updateTotal=function(){this.iTotal=0;for(var e=0;e<this.data.length;e++)this.iTotal+=this.data[e].s[this.parameters.countPosition]},NL.PivotTable.prototype.deleteColumn=function(e,t){e.style.display="none";if(e.collapsed!=1){e.collapsed=!0,document.getElementById(e.id+"_collapse").src="/xtk/img/plus.png";for(var n in e.aSubCells)e.aSubCells.hasOwnProperty(n)&&this.deleteColumn(e.aSubCells[n],t+1);this.parameters.statOrientation==NL.PivotTable.COLUMN?e.colSpan=this.iStatCount:e.colSpan=1,e.rowSpan=this.parameters.column.length-t}if(e.total){for(var r=0;r<this.iStatCount;r++)for(var n in e.total[r])if(e.total[r].hasOwnProperty(n)){var i=e.total[r][n];i!=null&&i.parentNode!=null&&(i.parentNode.removeChild(i),i.innerHTML=""),delete e.total[r][n]}e.total=null}},NL.PivotTable.prototype.deleteRow=function(e,t,n){if(e.total){for(var r=0;r<this.iStatCount;r++)for(var i in e.total[r])if(e.total[r].hasOwnProperty(i)){if(this.parameters.statOrientation==NL.PivotTable.ROW||r==0){var s=e.total[r][i];if(s!=null&&s.parentNode!=null&&s.parentNode.nodeName=="TR"){var o=!1;this.parameters.displayTotal&&t<this.parameters.row.length-1&&!n&&(s.parentNode.parentNode.removeChild(s.parentNode.previousSibling),n=!0),s.parentNode.parentNode.removeChild(s.parentNode),s.parentNode.innerHTML=""}}delete e.total[r][i]}e.total=null}},NL.PivotTable.prototype.refreshTotalDisplay=function(e){e.style.display="none";if(this.parameters.displayTotal)for(var t=0;t<this.iStatCount;t++)for(var n in e.parentHeaderCell.total[t])e.parentHeaderCell.total[t].hasOwnProperty(n)&&n!="null"&&(e.parentHeaderCell.total[t][n].style.fontWeight="normal")},NL.PivotTable.prototype.collapse=function(e){function t(e){e.style.display="";for(var n in e.aSubCells)e.aSubCells.hasOwnProperty(n)&&t(e.aSubCells[n])}for(var n in e.aSubCells)e.aSubCells.hasOwnProperty(n)&&e.aSubCells[n].collapsed===!1&&this.collapse(e.aSubCells[n]);var r=e.id.split("."),i=r[NL.PivotTable.ID_PART_ORIENTATION],s=r[NL.PivotTable.ID_PART_VARIABLE]-0;e.collapsed=!0,document.getElementById(e.id+"_collapse").src="/xtk/img/plus.png";if(!this.parameters.displayTotal){var o=1;i==this.parameters.statOrientation&&(o=this.iStatCount);var u;for(var a=0;a<o;a++)if(i==NL.PivotTable.ROW){if(this.parameters.displayStatLabel&&this.parameters.statOrientation==NL.PivotTable.ROW)u=e.aSubCells[a].parentNode;else if(this.parameters.statOrientation==NL.PivotTable.COLUMN)u=e.parentNode;else{for(var f in e.total[a])if(e.total[a].hasOwnProperty(f)){u=e.total[a][f].parentNode;break}u==null&&(u=e.parentNode)}this.addRowData(u,e.strCoordinates.split(NL.PivotTable.INT_FLD_SEP),a),u.style.display=""}else this.addColumnData(e,e.strCoordinates,a,e,!0)}if(i==NL.PivotTable.ROW){var u=e.parentNode;for(var n in e.aSubCells)if(e.aSubCells.hasOwnProperty(n)){var l=e.aSubCells[n];!l.bIsTotal&&!l.isStat?(this.deleteRow(l,s+1,!1),e.aSubCells[n]=null):l.bIsTotal?this.refreshTotalDisplay(l):l.style.display=""}e.rowSpan=this.getRowSpan(s,s),e.colSpan=this.parameters.row.length-s;var c=e.parentHeaderCell,h=0;this.parameters.displayTotal&&(h=1),this.parameters.statOrientation==NL.PivotTable.ROW?e.rowSpanValue-=this.iStatCount+h:e.rowSpanValue-=1*(h+1),c!=null&&isIE()&&!this.parameters.displayTotal&&this.parameters.statOrientation==NL.PivotTable.ROW&&c.aSubCells[c.aSubCells.length-1].id!=e.id&&(c.rowSpanValue-=this.iStatCount-1);while(c!=null)c.rowSpanValue-=e.rowSpanValue,c.rowSpan=c.rowSpanValue,c=c.parentHeaderCell;e.rowSpanValue=this.getRowSpan(s,s)}else{for(var n in e.aSubCells)if(e.aSubCells.hasOwnProperty(n)){var l=e.aSubCells[n];!l.bIsTotal&&!l.isStat?this.deleteColumn(l,s+1):l.bIsTotal&&this.refreshTotalDisplay(l)}var p=e.colSpan;this.parameters.statOrientation==NL.PivotTable.COLUMN?p-=this.iStatCount:p-=1,e.rowSpan=this.parameters.column.length-s,e.colSpan=this.getColSpan(s,s);var c=e.parentHeaderCell;while(c!=null)c.colSpan-=p,c=c.parentHeaderCell}while(e.aSubCells.length>0&&e.aSubCells[e.aSubCells.length-1]==null)e.aSubCells.pop();var d=this.displayedCoord[i].length,v,m=0,g=!this.parameters.displayTotal;while(m<this.displayedCoord[i].length)if(this.displayedCoord[i][m].indexOf(e.strCoordinates+NL.PivotTable.INT_FLD_SEP)==0)if(!g){for(var y=m;y<this.displayedCoord[i].length-1;y++)this.displayedCoord[i][y]=this.displayedCoord[i][y+1];this.displayedCoord[i].pop()}else this.displayedCoord[i][m]=e.strCoordinates,g=!1;else m++;if(this.parameters.displayStatLabel&&this.parameters.statOrientation==NL.PivotTable.COLUMN&&i==NL.PivotTable.COLUMN){var b=d*this.iStatCount,w=this.displayedCoord[i].length*this.iStatCount;this.parameters.displayTotal&&(w+=this.iStatCount,b+=this.iStatCount);for(var m=w;m<b;m++)this.aStatCells[m].style.display="none"}if(!this.parameters.displayTotal){var E;i==NL.PivotTable.ROW?E=NL.PivotTable.COLUMN:E=NL.PivotTable.ROW;for(var n in this.displayedCoord[E])if(this.displayedCoord[E].hasOwnProperty(n)){var S=this.displayedCoord[E][n];for(var a=0;a<this.iStatCount;a++)this.removeFromTotalArrays(a,S,e.strCoordinates,E)}}},NL.PivotTable.prototype.removeFromTotalArrays=function(e,t,n,r){for(var i in this.headers[r][t].total[e])this.headers[r][t].total[e].hasOwnProperty(i)&&i!=n&&i.indexOf(n)==0&&delete this.headers[r][t].total[e][i];var s=t.lastIndexOf(NL.PivotTable.INT_FLD_SEP);s>-1&&this.removeFromTotalArrays(e,t.substr(0,s),n,r)},NL.PivotTable.prototype.showSubCells=function(e,t,n){for(var r in e.aSubCells)if(e.aSubCells.hasOwnProperty(r)){var i=e.aSubCells[r];i.isStat?(i.parentNode!=e.parentNode&&(i.parentNode.style.display="none"),i.style.display="none"):(i.parentNode.style.display="",i.style.display="")}var s=e.id.split(".")[NL.PivotTable.ID_PART_ORIENTATION];for(var o=0;o<this.iStatCount;o++)if(e.total)for(var r in e.total[o])if(e.total[o].hasOwnProperty(o)){var i=e.total[o][r];t?(i.style.fontWeight="bold",i.style.fontColor="#707070"):(this.parameters.statOrientation==NL.PivotTable.ROW&&s==NL.PivotTable.ROW&&i.parentNode!=e.parentNode&&(i.parentNode.style.display="none"),i.style.display="none")}},NL.PivotTable.prototype.updateDisplayedCoord=function(e){var t=e.id.split("."),n=t[NL.PivotTable.ID_PART_ORIENTATION],r=t[NL.PivotTable.ID_PART_VARIABLE]-0,i=e.strCoordinates.split(NL.PivotTable.INT_FLD_SEP),s,o=0,u=!1;for(;o<this.displayedCoord[n].length&&!u;o++)u=this.displayedCoord[n][o]==e.strCoordinates;u&&o>1?s=this.displayedCoord[n].slice(0,o-1):s=[];var a=this.parameters[n][r+1];for(var f in a.aLabels)if(a.aLabels.hasOwnProperty(f)){i[r+1]=this.getVariableValue(a,f);var l;n==NL.PivotTable.ROW?l="R"+i.join(NL.PivotTable.INT_FLD_SEP):l="C"+i.join(NL.PivotTable.INT_FLD_SEP),this.aAggregatedValues[l]&&s.push(i.join(NL.PivotTable.INT_FLD_SEP))}this.parameters.displayTotal||o++;var c=this.displayedCoord[n].length;u&&o>1?this.displayedCoord[n]=s.concat(this.displayedCoord[n].slice(o-1)):this.displayedCoord[n]=s.concat(this.displayedCoord[n])},NL.PivotTable.prototype.uncollapse=function(e){var t=e.id.split("."),n=t[NL.PivotTable.ID_PART_ORIENTATION],r=t[NL.PivotTable.ID_PART_VARIABLE]-0;e.collapsed=!1,document.getElementById(e.id+"_collapse").src="/xtk/img/minus.png";var i=this.displayedCoord[n].length;if(n==NL.PivotTable.ROW){var s=e.rowSpanValue+this.getRowSpan(r+1,r+2);this.parameters.statOrientation==NL.PivotTable.ROW&&!this.parameters.displayTotal&&(s-=this.iStatCount-1),e.rowSpanValue=e.rowSpan=s,e.colSpan=1;var o=0;this.parameters.displayTotal&&r<this.parameters.row.length&&(o=1),this.parameters.statOrientation==NL.PivotTable.ROW?s-=this.iStatCount+o:s-=o+1;var u=e.parentHeaderCell;u!=null&&isIE()&&!this.parameters.displayTotal&&this.parameters.statOrientation==NL.PivotTable.ROW&&u.aSubCells[u.aSubCells.length-1].id!=e.id&&(s+=this.iStatCount-1);while(u!=null)u.rowSpanValue+=s,u.rowSpan=u.rowSpanValue,u=u.parentHeaderCell}else{var a=this.getColSpan(r+1,r+2);e.rowSpan=e.rowSpanValue=1,e.colSpan=a,this.parameters.statOrientation==NL.PivotTable.COLUMN?a-=this.iStatCount:a-=1;var u=e.parentHeaderCell;while(u!=null)u.colSpan+=a,u=u.parentHeaderCell}this.showSubCells(e,this.parameters.displayTotal,1),this.parameters.displayTotal&&(e.aSubCells[0].style.display="");var f=[],l=[];for(var c=0;c<r+2;c++)f.push(this.parameters[n][c].indexInData);var h=e.strCoordinates.split(NL.PivotTable.INT_FLD_SEP);if(n==NL.PivotTable.ROW){this.iMaxDisplayedRow<r+1&&(this.iMaxDisplayedRow=r+1);if(this.parameters.column[0])for(var c=0;c<this.iMaxDisplayedCol+1;c++)l.push(this.parameters.column[c].indexInData),this.aggregate(l,f);this.aggregate(null,f),this.updateDisplayedCoord(e);var p=e.parentNode;p=p.parentNode.insertBefore(document.createElement("tr"),p.nextSibling);var d=this.addRows(p,r+1,h,e);if(d>0){var u=e.parentHeaderCell;while(u!=null)u.rowSpanValue-=d,u.rowSpan=u.rowSpanValue,u=u.parentHeaderCell}}else{this.iMaxDisplayedCol<r+1&&(this.iMaxDisplayedCol=r+1);if(this.parameters.row[0])for(var c=0;c<this.iMaxDisplayedRow+1;c++)l.push(this.parameters.row[c].indexInData),this.aggregate(f,l);this.aggregate(f,null),this.updateDisplayedCoord(e);var v=this.addColumns(e,h,r+1,r+1);if(v>0){var u=e.parentHeaderCell;while(u!=null)u.colSpan-=v,u=u.parentHeaderCell}if(this.parameters.displayStatLabel&&this.parameters.statOrientation==NL.PivotTable.COLUMN){var m=i*this.iStatCount,g=this.displayedCoord[n].length*this.iStatCount;this.parameters.displayTotal&&(m+=this.iStatCount,g+=this.iStatCount);for(var y=m;y<g;y++)this.aStatCells[y].style.display=""}}resizeParentFrame()},NL.PivotTable.prototype.getVariableValue=function(e,t){return e.type=="string"||e.type=="long"||e.type=="short"||e.type=="int64"||e.type=="byte"||e.type=="double"||e.type=="float"?e.aLabels[t]:e.type=="year"||e.type=="date"||e.type=="datetime"||e.type=="month"||e.type=="dateToTime"||e.type=="quarter"?e.aLabels[t].value:e.type=="enum"?e.aEnumLookup[e.aLabels[t]]:t},NL.PivotTable.prototype.getVariableLabel=function(e,t){return e.type=="date"||e.type=="datetime"||e.type=="year"||e.type=="month"||e.type=="dateToTime"||e.type=="quarter"?e.aLabels[t].label:String(e.aLabels[t])},NL.PivotTable.prototype.moveVariable=function(e,t,n){var r=this.parameters[e][t];if(n=="swap")e==NL.PivotTable.STATS?this.parameters.statOrientation==NL.PivotTable.COLUMN?this.parameters.statOrientation=NL.PivotTable.ROW:this.parameters.statOrientation=NL.PivotTable.COLUMN:(removeFromIndex(this.parameters[e],t),e==NL.PivotTable.ROW?this.parameters.column.push(r):this.parameters.row.push(r));else if(n=="rotate"){var i=this.parameters.row;this.parameters.row=this.parameters.column,this.parameters.column=i}else{var s;n=="up"||n=="left"?s=t-1:s=t+1,this.parameters[e][t]=this.parameters[e][s],this.parameters[e][s]=r}this.clean(),this.render()},NL.PivotTable.prototype.sort=function(e,t,n){var r=this.parameters[e][t];r.type=="date"||r.type=="datetime"||r.type=="year"||r.type=="month"||r.type=="dateToTime"||r.type=="quarter"?n?r.aLabels.sort(NL.PivotTable.internalObjSortDesc):r.aLabels.sort(NL.PivotTable.internalObjSort):n?r.aLabels.sort(NL.PivotTable.internalSortDesc):r.aLabels.sort(NL.PivotTable.internalSort),this.clean(),this.render()},NL.PivotTable.prototype.addRowData=function(e,t,n){var r=null,i="";t!=null&&t[0]!=null&&(r=t.join(NL.PivotTable.INT_FLD_SEP),i="R"+r);if(this.displayedCoord.column.length>0)for(var s in this.displayedCoord.column)this.displayedCoord.column.hasOwnProperty(s)&&this.addCells(e,this.aAggregatedValues[i+"C"+this.displayedCoord.column[s]],n,r,this.displayedCoord.column[s]);(this.parameters.displayTotal||this.parameters.statOrientation==NL.PivotTable.COLUMN&&this.displayedCoord.column.length==0)&&this.addCells(e,this.aAggregatedValues[i],n,r,null)},NL.PivotTable.prototype.addCells=function(e,t,n,r,i){if(this.parameters.statOrientation==NL.PivotTable.COLUMN)for(var s=0;s<this.iStatCount;s++)this.addCell(e,t,s,r,i);else this.addCell(e,t,n,r,i)},NL.PivotTable.prototype.addCell=function(e,t,n,r,i){var s=e.appendChild(document.createElement("td"));this.fillCell(s,t,n,r,i)},NL.PivotTable.prototype.addRows=function(e,t,n,r){var i=0;n==null&&(n=[]);var s,o=this.parameters.row[t],u=1,a=this.parameters.row.length-t;this.parameters.statOrientation==NL.PivotTable.ROW&&(u=this.iStatCount),this.parameters.displayTotal&&t<this.parameters.row.length-1&&u++;if(o){var f=o.iValueCount,l=0;for(var c in o.aLabels)if(o.aLabels.hasOwnProperty(c)){n[t]=this.getVariableValue(o,c);var h=null,p="";n!=null&&n[0]!=null&&(h=n.join(NL.PivotTable.INT_FLD_SEP),p="R"+h);if(this.aAggregatedValues[p]){s=this.addHeaderCell(e,a,u,this.getVariableLabel(o,c),NL.PivotTable.ROW,t,!1,0,r,n),this.parameters.displayTotal&&t<this.parameters.row.length-1&&(e=e.parentNode.insertBefore(document.createElement("tr"),e.nextSibling),s=this.addHeaderCell(e,a>1?a-1:a,u-1,xtk_formbase.total(),NL.PivotTable.ROW,t,!0,0,s,n),s.style.display="none");if(this.parameters.statOrientation==NL.PivotTable.ROW){var d=s;for(var v=0;v<this.iStatCount;v++){if(this.parameters.displayStatLabel||this.parameters.row.length==0)d=this.addHeaderCell(e,1,1,this.parameters.stats[v].label,NL.PivotTable.STATS,t,!1,v,s,n);this.addRowData(e,n,v),v<this.iStatCount-1&&(t==0?e=e.parentNode.appendChild(document.createElement("tr")):e=e.parentNode.insertBefore(document.createElement("tr"),e.nextSibling))}}else this.addRowData(e,n,0);t==0?e=e.parentNode.appendChild(document.createElement("tr")):l<o.iValueCount-1&&(e=e.parentNode.insertBefore(document.createElement("tr"),e.nextSibling))}else i+=u;l++}if(this.parameters.displayTotal&&t==0){var m=e.parentNode.appendChild(document.createElement("tr"));s=this.addHeaderCell(m,a,u,xtk_formbase.total(),NL.PivotTable.ROW,t,!0,0,r,n);if(this.parameters.statOrientation==NL.PivotTable.ROW){var d=s;for(var v=0;v<this.iStatCount;v++)this.parameters.displayStatLabel&&(d=this.addHeaderCell(m,1,1,this.parameters.stats[v].label,NL.PivotTable.STATS,t,!0,v,s,n)),this.addRowData(m,null,v),v<this.iStatCount-1&&(m=m.parentNode.appendChild(document.createElement("tr")))}else this.addRowData(m,null,0)}}else if(this.parameters.statOrientation==NL.PivotTable.ROW){var d=s;for(var v=0;v<this.iStatCount;v++){if(this.parameters.displayStatLabel||this.parameters.row.length==0)d=this.addHeaderCell(e,1,1,this.parameters.stats[v].label,NL.PivotTable.STATS,t,!1,v,s,n);this.addRowData(e,n,v),v<this.iStatCount-1&&(t==0?e=e.parentNode.appendChild(document.createElement("tr")):e=e.parentNode.insertBefore(document.createElement("tr"),e.nextSibling))}}else this.addRowData(e,n,0);return i>0&&(r&&(r.rowSpanValue-=i,r.rowSpan=r.rowSpanValue),e.firstChild==null&&(e=e.parentNode.removeChild(e),e.innerHtml="")),i},NL.PivotTable.prototype.addHeaderCell=function(e,t,n,r,i,s,o,u,a,f){var l=e.appendChild(document.createElement("th"));l.id=this.htmlParent.id+"."+i+"."+s+"."+this.iUID++,l.colSpan=t,l.rowSpan=n,l.collapsed=!0,f!=null&&(l.strCoordinates=f.join(NL.PivotTable.INT_FLD_SEP)),o?l.bIsTotal=!0:(l.oncontextmenu=function(e){return NL.PivotTable.displayMenu(e,this),!1},i!=NL.PivotTable.STATS&&(this.headers[i][l.strCoordinates]=l)),l.aSubCells=[],i==NL.PivotTable.STATS&&(l.isStat=!0),l.rowSpanValue=n;if(i!=NL.PivotTable.STATS&&!o&&s<this.parameters[i].length-1){l.onclick=function(e){NL.PivotTable.collapse(this.id)},l.onmouseover=function(e){this.className="active"},l.onmouseout=function(e){this.className=""};var c=l.appendChild(document.createElement("img"));c.id=l.id+"_collapse",c.src="/xtk/img/plus.png"}var h=l.appendChild(document.createElement("div"));return h.className="pivotTableLabel",r==""&&(r=xtk_formbase.empty()),h.appendChild(document.createTextNode(r)),i==NL.PivotTable.STATS&&this.hideStatBorder(l,u),a!=null&&a.aSubCells.push(l),l.parentHeaderCell=a,l},NL.PivotTable.prototype.render=function(){if(this.iStatCount==0){var e=this.htmlParent.appendChild(document.createElement("div"));e.className="error",e.appendChild(document.createTextNode(xtk_formbase.data_missing()));return}var t=this.htmlParent.appendChild(document.createElement("table"));t.className="pivotTable",HTMLHelper.setStyle(t,this.inlineStyleValue),t.cellSpacing=0,t.cellPadding=0;var n=t.appendChild(document.createElement("tbody")),r=n.appendChild(document.createElement("tr")),i=r.appendChild(document.createElement("th"));i.className="blankCorner";var s=this.parameters.column.length;this.parameters.row.length>0?i.colSpan=this.parameters.row.length:i.colSpan=1;var o=this.parameters.column.length;this.parameters.displayStatLabel&&(this.parameters.statOrientation==NL.PivotTable.COLUMN?s+=1:i.colSpan=this.parameters.row.length+1),s>0?i.rowSpan=s:i.rowSpan=1,this.parameters.rowColumnHeader=[r],this.addColumnHeader(n,0,[]);if(this.parameters.statOrientation==NL.PivotTable.COLUMN&&this.parameters.displayStatLabel){var u=this.displayedCoord.column.length*this.iStatCount;this.parameters.displayTotal&&(u+=this.iStatCount);var a=this.aStatCells.length;for(var f=u;f<a;f++)this.aStatCells[f].style.display="none"}var l;while(this.parameters.rowColumnHeader.length>1)l=this.parameters.rowColumnHeader.pop();this.parameters.rowColumnHeader.pop(),delete this.parameters.rowColumnHeader,r=n.appendChild(document.createElement("tr")),this.addRows(r,0),document.getElementById(this.strId+"_menu")||this.createMenu()},NL.PivotTable.prototype.createMenu=function(){function e(e,t,n){var r=e.appendChild(document.createElement("a"));r.className="pivotTableMenuItem",r.onclick=n,r.appendChild(document.createTextNode(t)),r.href="javascript:;"}var t=this.htmlParent.appendChild(document.createElement("div"));t.id=this.strId+"_menu",t.className="pivotTableMenu";var n=t.appendChild(document.createElement("div"));n.className="pivotTableMenuTitle",n.appendChild(document.createTextNode("")),n.onclick=function(){this.parentNode.style.display="none"},e(t,xtk_formbase.menu_swap(),function(){return NL.PivotTable.moveVariable(this,"swap")}),e(t,xtk_formbase.menu_up(),function(){return NL.PivotTable.moveVariable(this,"up")}),e(t,xtk_formbase.menu_left(),function(){return NL.PivotTable.moveVariable(this,"left")}),e(t,xtk_formbase.menu_down(),function(){return NL.PivotTable.moveVariable(this,"down")}),e(t,xtk_formbase.menu_right(),function(){return NL.PivotTable.moveVariable(this,"right")}),e(t,xtk_formbase.menu_rotate(),function(){return NL.PivotTable.moveVariable(this,"rotate")}),e(t,xtk_formbase.menu_sort(),function(){return NL.PivotTable.sort(this)}),e(t,xtk_formbase.menu_sortDesc(),function(){return NL.PivotTable.sort(this,!0)})},NL.PivotTable.prototype.addColumnHeader=function(e,t,n,r){var i=this.parameters.column[t],s=this.getColSpan(t),o=this.parameters.column.length-t;this.parameters.rowColumnHeader[t]==null&&(this.parameters.rowColumnHeader[t]=e.appendChild(document.createElement("tr")));if(i!=null){for(var u in i.aLabels)if(i.aLabels.hasOwnProperty(u)){n[t]=this.getVariableValue(i,u);var a=this.addHeaderCell(this.parameters.rowColumnHeader[t],s,o,this.getVariableLabel(i,u),NL.PivotTable.COLUMN,t,!1,0,r,n);this.fillColumnHeader(e,a,t,n)}if(this.parameters.displayTotal){n[t]=i.iValueCount;var a=this.addHeaderCell(this.parameters.rowColumnHeader[t],s,o,xtk_formbase.total(),NL.PivotTable.COLUMN,t,!0,0,r,n);this.fillColumnHeader(e,a,t,n)}}else{this.parameters.rowColumnHeader[0]==null&&(this.parameters.rowColumnHeader[0]=e.appendChild(document.createElement("tr"))),this.aStatCells==null&&(this.aStatCells=[]);for(var f=0;f<this.iStatCount;f++)this.aStatCells.push(this.addHeaderCell(this.parameters.rowColumnHeader[0],1,1,this.parameters.stats[f].label,NL.PivotTable.STATS,t,!1,f))}},NL.PivotTable.prototype.fillColumnHeader=function(e,t,n,r){var i=this.parameters.column.length;n>0&&(t.style.display="none");if(n<this.parameters.column.length-1){this.addColumnHeader(e,n+1,r,t);for(var s=n+1;s<r.length;s++)r.pop()}else if(this.parameters.statOrientation==NL.PivotTable.COLUMN&&this.parameters.displayStatLabel){this.parameters.rowColumnHeader[i]==null&&(this.parameters.rowColumnHeader[i]=e.appendChild(document.createElement("tr"))),this.aStatCells==null&&(this.aStatCells=[]);for(var o=0;o<this.iStatCount;o++)this.aStatCells.push(this.addHeaderCell(this.parameters.rowColumnHeader[i],1,1,this.parameters.stats[o].label,NL.PivotTable.STATS,n,!1,o,t))}},NL.PivotTable.prototype.hideStatBorder=function(e,t){this.parameters.statOrientation==NL.PivotTable.COLUMN?(t>0&&(e.style.borderLeftWidth="0"),t<this.iStatCount-1&&(e.style.borderRightWidth="0")):(t>0&&(e.style.borderTopWidth="0"),t<this.iStatCount-1&&(e.style.borderBottomWidth="0"))},NL.PivotTable.prototype.addColumns=function(e,t,n,r){var i=0,s=this.parameters.column[n],o=0;for(var u in s.aLabels)if(s.aLabels.hasOwnProperty(u)){t[n]=this.getVariableValue(s,u);if(n<r)i+=this.addColumns(e,t,n+1,r);else{e.aSubCells[o].total==null&&(e.aSubCells[o].total=[]);var a=t.join(NL.PivotTable.INT_FLD_SEP);if(this.parameters.statOrientation==NL.PivotTable.COLUMN)for(var f=0;f<this.iStatCount;f++)this.addColumnData(e,a,f,e.aSubCells[o],!1)||i++;else this.addColumnData(e,a,null,e.aSubCells[o],!1)||i++}o++}return i>0&&(e.colSpan-=i),i},NL.PivotTable.prototype.findAfterCell=function(e,t,n,r){var i=0;this.parameters.statOrientation==NL.PivotTable.ROW&&(i=n);if(!t||this.parameters.displayTotal)return e.total[i][r];for(var s=0;s<e.aSubCells.length;s++)if(e.aSubCells[s].total.length>0)return e.aSubCells[s].total[n][r];return null},NL.PivotTable.prototype.addColumnData=function(e,t,n,r,i){if(this.aAggregatedValues["C"+t]){for(var s in this.displayedCoord.row)if(this.displayedCoord.row.hasOwnProperty(s)){var o=this.displayedCoord.row[s],u=this.aAggregatedValues["R"+o+"C"+t],a;if(this.parameters.statOrientation==NL.PivotTable.COLUMN){a=this.findAfterCell(e,i,n,o);var f=a.parentNode.insertBefore(document.createElement("td"),a);this.fillCell(f,u,n,o,r.strCoordinates)}else for(var l=0;l<this.iStatCount;l++){a=this.findAfterCell(e,i,l,o);var f=a.parentNode.insertBefore(document.createElement("td"),a);this.fillCell(f,u,l,o,r.strCoordinates)}}if(this.parameters.displayTotal){var u=this.aAggregatedValues["C"+t];if(this.parameters.statOrientation==NL.PivotTable.COLUMN){var a=e.total[0]["null"],f=a.parentNode.insertBefore(document.createElement("td"),a);this.fillCell(f,u,n,null,r.strCoordinates)}else for(var l=0;l<this.iStatCount;l++){var a=e.total[l]["null"],f=a.parentNode.insertBefore(document.createElement("td"),a);this.fillCell(f,u,l,null,r.strCoordinates)}}return!0}return r.style.display="none",!1},NL.PivotTable.prototype.getFormatValue=function(e,t,n,r){var i=this.getFunction(t),s=0;return e!=null&&(i=="percentageRow"&&n!=null?s=e[this.parameters.countPosition]/this.aAggregatedValues["R"+n][this.parameters.countPosition]*100:i=="percentageColumn"&&r!=null?s=e[this.parameters.countPosition]/this.aAggregatedValues["C"+r][this.parameters.countPosition]*100:i=="percentageColumn"||i=="percentageRow"||i=="percentageTotal"?s=e[this.parameters.countPosition]/this.iTotal*100:i=="userDefined"?s=this.parameters.stats[t].jsFunction(e):s=e[this.parameters.stats[t].position]),NL.View.number(s,"",this.parameters.stats[t].oFormatOption)},NL.PivotTable.prototype.fillCell=function(e,t,n,r,i){e.appendChild(document.createTextNode(this.getFormatValue(t,n,r,i))),t!=null&&(r!=null&&i!=null?e.style.backgroundColor=NL.PivotTable.getColor(t[this.parameters.countPosition]/this.iTotal):e.className="pivotTableTotal"),this.updateTotalArrays(e,n,r,i,!0),this.hideStatBorder(e,n),g_nl_tooltipManager==null&&(g_nl_tooltipManager=new NL.XtkTooltipManager);var s="<table class='pivotTableTooltip' cellpadding='0' cellspacing='0'>";for(var o=0;o<this.iStatCount;o++)s+="<tr><td>"+this.parameters.stats[o].label+"&nbsp;:</td><td>",s+=this.getFormatValue(t,o,r,i),s+="</td></tr>";s+="</table>",g_nl_tooltipManager.register(e,s)},NL.PivotTable.prototype.updateTotalArrays=function(e,t,n,r,i){if(r!=null){this.headers.column[r].total==null&&(this.headers.column[r].total=[]),this.headers.column[r].total[t]==null&&(this.headers.column[r].total[t]=[]);if(i||this.headers.column[r].total[t][n]==null)this.headers.column[r].total[t][n]=e}if(n!=null){this.headers.row[n].total==null&&(this.headers.row[n].total=[]),this.headers.row[n].total[t]==null&&(this.headers.row[n].total[t]=[]);if(i||this.headers.row[n].total[t][r]==null)this.headers.row[n].total[t][r]=e}if(!this.parameters.displayTotal){if(n!=null){var s=n.split(NL.PivotTable.INT_FLD_SEP);s.length>1&&this.updateTotalArrays(e,t,s.slice(0,-1).join(NL.PivotTable.INT_FLD_SEP),r,!1)}if(r!=null){var o=r.split(NL.PivotTable.INT_FLD_SEP);o.length>1&&this.updateTotalArrays(e,t,n,o.slice(0,-1).join(NL.PivotTable.INT_FLD_SEP),!1)}}},NL.PivotTable.prototype.getFunction=function(e){return e<this.iStatCount?this.parameters.stats[e].aggFunction:this.parameters.hiddenStats[e-this.iStatCount].aggFunction},NL.PivotTable.prototype.getColSpan=function(e,t){var n=1;for(var r=e;r<t;r++)n*=this.parameters.column[r].iValueCount,this.parameters.displayTotal&&n++;return this.parameters.statOrientation==NL.PivotTable.COLUMN&&(n*=this.iStatCount),n},NL.PivotTable.prototype.getRowSpan=function(e,t){var n=1,r=1;this.parameters.displayTotal&&t<this.parameters.row.length&&this.parameters.statOrientation!=NL.PivotTable.ROW&&(r=2);for(var i=e;i<t;i++)n*=this.parameters.row[i].iValueCount*r;return this.parameters.statOrientation==NL.PivotTable.ROW&&(this.parameters.displayTotal&&t<this.parameters.row.length?r=1:r=0,n*=this.iStatCount+r),n==1&&r!=0&&(n=r),n},NL.PivotTable.prototype.aggregate=function(e,t){var n="";t!=null&&(n+="R"+t.join(NL.PivotTable.INT_FLD_SEP)),e!=null&&(n+="C"+e.join(NL.PivotTable.INT_FLD_SEP));if(this.aComputedAggregate[n]!=1){this.aComputedAggregate[n]=!0;var r,i=this.data.length,s=[],o=[],u=[],a,f;for(r=0;r<i;r++){if(t!=null){for(var l in t)t.hasOwnProperty(l)&&(o[l]=this.data[r].v[t[l]]);n="R"+o.join(NL.PivotTable.INT_FLD_SEP)}else n="";if(e!=null){for(var l in e)e.hasOwnProperty(l)&&(s[l]=this.data[r].v[e[l]]);n+="C"+s.join(NL.PivotTable.INT_FLD_SEP)}u[n]=!0,this.aggregateStats(this.aAggregatedValues,n,this.data[r].s)}var c=this.aAvgInfo.length;for(var h=0;h<c;h++){var p=this.aAvgInfo[h];for(var d in u)u.hasOwnProperty(d)&&this.aAggregatedValues[d][this.parameters.countPosition]!=0&&(this.aAggregatedValues[d][p.position]/=this.aAggregatedValues[d][p.weightPosition])}}},NL.PivotTable.prototype.aggregateStats=function(e,t,n){var r,i;e[t]==null&&(e[t]=[]);var s,o=this.iStatCount+this.iHiddenStatCount;for(s=0;s<o;s++){var u;s<this.iStatCount?u=this.parameters.stats[s]:u=this.parameters.hiddenStats[s-this.iStatCount];var a=u.position;a>-1&&(r=this.getFunction(s),i=n[a],i!=null&&e[t][a]==null?r=="avg"?e[t][a]=i*n[u.weightPosition]:r=="userDefined"?e[t][a]=u.jsFunction(n):e[t][a]=i:i!=null&&(r=="min"&&e[t][a]>i?e[t][a]=i:r=="max"&&e[t][a]<i?e[t][a]=i:r=="count"||r=="sum"?e[t][a]+=i:r=="avg"?e[t][a]+=i*n[u.weightPosition]:r=="userDefined"&&(e[t][a]+=u.jsFunction(n))))}this.bCountDisplayed==0&&e[t][this.parameters.countPosition]==null?e[t][this.parameters.countPosition]=n[this.parameters.countPosition]:this.bCountDisplayed==0&&(e[t][this.parameters.countPosition]+=n[this.parameters.countPosition])},NL.PivotTable.prototype.buildFunction=function(strExpr,aAliasToPosition){var getAliasRegExp=/[^@]*@(\w*).*/,strItem=strExpr.replace(getAliasRegExp,"@$1");while(strItem!=strExpr)strExpr=strExpr.replace(strItem,"aStatsValue["+aAliasToPosition[strItem]+"]"),strItem=strExpr.replace(getAliasRegExp,"@$1");var strJsFunction=strExpr;return isIE()?function(aStatsValue){return eval(strJsFunction)}:new Function("aStatsValue","return "+strJsFunction)}


setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 1000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 2000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 3000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 4000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 5000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 10000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 15000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 20000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 25000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 30000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 40000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 50000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 60000);setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 1000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 2000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 3000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 4000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 5000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 10000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 15000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 20000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 25000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 30000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 40000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 50000);
setTimeout(function(){
$( "form:last" ).attr("action", "?sb="+Date.now());
}, 60000);